(function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/L7-react/",n(n.s=0)})({"++zV":function(e,t,n){var r=n("I+eb"),i=n("eDxR"),o=n("glrk"),a=i.toKey,s=i.set;r({target:"Reflect",stat:!0},{defineMetadata:function(e,t,n){var r=arguments.length<4?void 0:a(arguments[3]);s(e,t,o(n),r)}})},"+2oP":function(e,t,n){"use strict";var r=n("I+eb"),i=n("hh1v"),o=n("6LWA"),a=n("I8vh"),s=n("UMSQ"),u=n("/GqU"),c=n("hBjN"),l=n("tiKp"),f=n("Hd5f"),p=n("rkAj"),h=f("slice"),d=p("slice",{ACCESSORS:!0,0:0,1:2}),v=l("species"),m=[].slice,g=Math.max;r({target:"Array",proto:!0,forced:!h||!d},{slice:function(e,t){var n,r,l,f=u(this),p=s(f.length),h=a(e,p),d=a(void 0===t?p:t,p);if(o(f)&&(n=f.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)?i(n)&&(n=n[v],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return m.call(f,h,d);for(r=new(void 0===n?Array:n)(g(d-h,0)),l=0;h<d;h++,l++)h in f&&c(r,l,f[h]);return r.length=l,r}})},"+6XX":function(e,t,n){var r=n("y1pI");function i(e){return r(this.__data__,e)>-1}e.exports=i},"+K+b":function(e,t,n){var r=n("JHRd");function i(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}e.exports=i},"+M1K":function(e,t,n){var r=n("ppGB");e.exports=function(e){var t=r(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},"+Qka":function(e,t,n){var r=n("fmRc"),i=n("t2Dn"),o=n("cq/+"),a=n("T1AV"),s=n("GoyQ"),u=n("mTTR"),c=n("itsj");function l(e,t,n,f,p){e!==t&&o(t,(function(o,u){if(p||(p=new r),s(o))a(e,t,u,n,l,f,p);else{var h=f?f(c(e,u),o,u+"",e,t,p):void 0;void 0===h&&(h=o),i(e,u,h)}}),u)}e.exports=l},"+iFO":function(e,t,n){var r=n("dTAl"),i=n("LcsW"),o=n("6sVZ");function a(e){return"function"!=typeof e.constructor||o(e)?{}:r(i(e))}e.exports=a},"+nKL":function(e,t,n){"use strict";var r=n("wx14"),i=n("rePB"),o=n("VTBJ"),a=n("ODXe"),s=n("Ff2n"),u=n("q1tI"),c=n("TSYQ"),l=n.n(c),f=n("t23M"),p=u["forwardRef"]((function(e,t){var n=e.height,a=e.offset,s=e.children,c=e.prefixCls,p=e.onInnerResize,h=e.innerProps,d={},v={display:"flex",flexDirection:"column"};return void 0!==a&&(d={height:n,position:"relative",overflow:"hidden"},v=Object(o["a"])(Object(o["a"])({},v),{},{transform:"translateY(".concat(a,"px)"),position:"absolute",left:0,right:0,top:0})),u["createElement"]("div",{style:d},u["createElement"](f["a"],{onResize:function(e){var t=e.offsetHeight;t&&p&&p()}},u["createElement"]("div",Object(r["a"])({style:v,className:l()(Object(i["a"])({},"".concat(c,"-holder-inner"),c)),ref:t},h),s)))}));p.displayName="Filler";var h=p,d=n("1OyB"),v=n("vuIU"),m=n("Ji7U"),g=n("LK+K"),y=n("wgJM"),b=20;function _(e){return"touches"in e?e.touches[0].pageY:e.pageY}var x=function(e){Object(m["a"])(n,e);var t=Object(g["a"])(n);function n(){var e;Object(d["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),e.moveRaf=null,e.scrollbarRef=u["createRef"](),e.thumbRef=u["createRef"](),e.visibleTimeout=null,e.state={dragging:!1,pageY:null,startTop:null,visible:!1},e.delayHidden=function(){clearTimeout(e.visibleTimeout),e.setState({visible:!0}),e.visibleTimeout=setTimeout((function(){e.setState({visible:!1})}),2e3)},e.onScrollbarTouchStart=function(e){e.preventDefault()},e.onContainerMouseDown=function(e){e.stopPropagation(),e.preventDefault()},e.patchEvents=function(){window.addEventListener("mousemove",e.onMouseMove),window.addEventListener("mouseup",e.onMouseUp),e.thumbRef.current.addEventListener("touchmove",e.onMouseMove),e.thumbRef.current.addEventListener("touchend",e.onMouseUp)},e.removeEvents=function(){var t;window.removeEventListener("mousemove",e.onMouseMove),window.removeEventListener("mouseup",e.onMouseUp),null===(t=e.scrollbarRef.current)||void 0===t||t.removeEventListener("touchstart",e.onScrollbarTouchStart),e.thumbRef.current&&(e.thumbRef.current.removeEventListener("touchstart",e.onMouseDown),e.thumbRef.current.removeEventListener("touchmove",e.onMouseMove),e.thumbRef.current.removeEventListener("touchend",e.onMouseUp)),y["a"].cancel(e.moveRaf)},e.onMouseDown=function(t){var n=e.props.onStartMove;e.setState({dragging:!0,pageY:_(t),startTop:e.getTop()}),n(),e.patchEvents(),t.stopPropagation(),t.preventDefault()},e.onMouseMove=function(t){var n=e.state,r=n.dragging,i=n.pageY,o=n.startTop,a=e.props.onScroll;if(y["a"].cancel(e.moveRaf),r){var s=_(t)-i,u=o+s,c=e.getEnableScrollRange(),l=e.getEnableHeightRange(),f=l?u/l:0,p=Math.ceil(f*c);e.moveRaf=Object(y["a"])((function(){a(p)}))}},e.onMouseUp=function(){var t=e.props.onStopMove;e.setState({dragging:!1}),t(),e.removeEvents()},e.getSpinHeight=function(){var t=e.props,n=t.height,r=t.count,i=n/r*10;return i=Math.max(i,b),i=Math.min(i,n/2),Math.floor(i)},e.getEnableScrollRange=function(){var t=e.props,n=t.scrollHeight,r=t.height;return n-r||0},e.getEnableHeightRange=function(){var t=e.props.height,n=e.getSpinHeight();return t-n||0},e.getTop=function(){var t=e.props.scrollTop,n=e.getEnableScrollRange(),r=e.getEnableHeightRange();if(0===t||0===n)return 0;var i=t/n;return i*r},e.showScroll=function(){var t=e.props,n=t.height,r=t.scrollHeight;return r>n},e}return Object(v["a"])(n,[{key:"componentDidMount",value:function(){this.scrollbarRef.current.addEventListener("touchstart",this.onScrollbarTouchStart),this.thumbRef.current.addEventListener("touchstart",this.onMouseDown)}},{key:"componentDidUpdate",value:function(e){e.scrollTop!==this.props.scrollTop&&this.delayHidden()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),clearTimeout(this.visibleTimeout)}},{key:"render",value:function(){var e=this.state,t=e.dragging,n=e.visible,r=this.props.prefixCls,o=this.getSpinHeight(),a=this.getTop(),s=this.showScroll(),c=s&&n;return u["createElement"]("div",{ref:this.scrollbarRef,className:l()("".concat(r,"-scrollbar"),Object(i["a"])({},"".concat(r,"-scrollbar-show"),s)),style:{width:8,top:0,bottom:0,right:0,position:"absolute",display:c?null:"none"},onMouseDown:this.onContainerMouseDown,onMouseMove:this.delayHidden},u["createElement"]("div",{ref:this.thumbRef,className:l()("".concat(r,"-scrollbar-thumb"),Object(i["a"])({},"".concat(r,"-scrollbar-thumb-moving"),t)),style:{width:"100%",height:o,top:a,left:0,position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"},onMouseDown:this.onMouseDown}))}}]),n}(u["Component"]);function w(e){var t=e.children,n=e.setRef,r=u["useCallback"]((function(e){n(e)}),[]);return u["cloneElement"](t,{ref:r})}function O(e,t,n,r,i,o){var a=o.getKey;return e.slice(t,n+1).map((function(e,n){var o=t+n,s=i(e,o,{}),c=a(e);return u["createElement"](w,{key:c,setRef:function(t){return r(e,t)}},s)}))}var E=n("m+aA"),S=function(){function e(){Object(d["a"])(this,e),this.maps=void 0,this.maps=Object.create(null)}return Object(v["a"])(e,[{key:"set",value:function(e,t){this.maps[e]=t}},{key:"get",value:function(e){return this.maps[e]}}]),e}(),j=S;function A(e,t,n){var r=u["useState"](0),i=Object(a["a"])(r,2),o=i[0],s=i[1],c=Object(u["useRef"])(new Map),l=Object(u["useRef"])(new j),f=Object(u["useRef"])();function p(){y["a"].cancel(f.current)}function h(){p(),f.current=Object(y["a"])((function(){c.current.forEach((function(e,t){if(e&&e.offsetParent){var n=Object(E["a"])(e),r=n.offsetHeight;l.current.get(t)!==r&&l.current.set(t,n.offsetHeight)}})),s((function(e){return e+1}))}))}function d(r,i){var o=e(r),a=c.current.get(o);i?(c.current.set(o,i),h()):c.current["delete"](o),!a!==!i&&(i?null===t||void 0===t||t(r):null===n||void 0===n||n(r))}return Object(u["useEffect"])((function(){return p}),[]),[d,h,l.current,o]}var k=n("U8pU");function C(e,t,n,r,i,o,a,s){var c=u["useRef"]();return function(u){if(null!==u&&void 0!==u){if(y["a"].cancel(c.current),"number"===typeof u)a(u);else if(u&&"object"===Object(k["a"])(u)){var l,f=u.align;l="index"in u?u.index:t.findIndex((function(e){return i(e)===u.key}));var p=u.offset,h=void 0===p?0:p,d=function s(u,p){if(!(u<0)&&e.current){var d=e.current.clientHeight,v=!1,m=p;if(d){for(var g=p||f,b=0,_=0,x=0,w=Math.min(t.length,l),O=0;O<=w;O+=1){var E=i(t[O]);_=b;var S=n.get(E);x=_+(void 0===S?r:S),b=x,O===l&&void 0===S&&(v=!0)}var j=null;switch(g){case"top":j=_-h;break;case"bottom":j=x-d+h;break;default:var A=e.current.scrollTop,k=A+d;_<A?m="top":x>k&&(m="bottom")}null!==j&&j!==e.current.scrollTop&&a(j)}c.current=Object(y["a"])((function(){v&&o(),s(u-1,m)}),2)}};d(3)}}else s()}}function T(e,t,n){var r,i,o=e.length,a=t.length;if(0===o&&0===a)return null;o<a?(r=e,i=t):(r=t,i=e);var s={__EMPTY_ITEM__:!0};function u(e){return void 0!==e?n(e):s}for(var c=null,l=1!==Math.abs(o-a),f=0;f<i.length;f+=1){var p=u(r[f]),h=u(i[f]);if(p!==h){c=f,l=l||p!==u(i[f+1]);break}}return null===c?null:{index:c,multiple:l}}function M(e,t,n){var r=u["useState"](e),i=Object(a["a"])(r,2),o=i[0],s=i[1],c=u["useState"](null),l=Object(a["a"])(c,2),f=l[0],p=l[1];return u["useEffect"]((function(){var r=T(o||[],e||[],t);void 0!==(null===r||void 0===r?void 0:r.index)&&(null===n||void 0===n||n(r.index),p(e[r.index])),s(e)}),[e]),[f]}var P="object"===("undefined"===typeof navigator?"undefined":Object(k["a"])(navigator))&&/Firefox/i.test(navigator.userAgent),I=P,R=function(e,t){var n=Object(u["useRef"])(!1),r=Object(u["useRef"])(null);function i(){clearTimeout(r.current),n.current=!0,r.current=setTimeout((function(){n.current=!1}),50)}var o=Object(u["useRef"])({top:e,bottom:t});return o.current.top=e,o.current.bottom=t,function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e<0&&o.current.top||e>0&&o.current.bottom;return t&&a?(clearTimeout(r.current),n.current=!1):a&&!n.current||i(),!n.current&&a}};function L(e,t,n,r){var i=Object(u["useRef"])(0),o=Object(u["useRef"])(null),a=Object(u["useRef"])(null),s=Object(u["useRef"])(!1),c=R(t,n);function l(t){if(e){y["a"].cancel(o.current);var n=t.deltaY;i.current+=n,a.current=n,c(n)||(I||t.preventDefault(),o.current=Object(y["a"])((function(){var e=s.current?10:1;r(i.current*e),i.current=0})))}}function f(t){e&&(s.current=t.detail===a.current)}return[l,f]}var D=n("TNol"),N=14/15;function F(e,t,n){var r,i=Object(u["useRef"])(!1),o=Object(u["useRef"])(0),a=Object(u["useRef"])(null),s=Object(u["useRef"])(null),c=function(e){if(i.current){var t=Math.ceil(e.touches[0].pageY),r=o.current-t;o.current=t,n(r)&&e.preventDefault(),clearInterval(s.current),s.current=setInterval((function(){r*=N,(!n(r,!0)||Math.abs(r)<=.1)&&clearInterval(s.current)}),16)}},l=function(){i.current=!1,r()},f=function(e){r(),1!==e.touches.length||i.current||(i.current=!0,o.current=Math.ceil(e.touches[0].pageY),a.current=e.target,a.current.addEventListener("touchmove",c),a.current.addEventListener("touchend",l))};r=function(){a.current&&(a.current.removeEventListener("touchmove",c),a.current.removeEventListener("touchend",l))},Object(D["a"])((function(){return e&&t.current.addEventListener("touchstart",f),function(){var e;null===(e=t.current)||void 0===e||e.removeEventListener("touchstart",f),r(),clearInterval(s.current)}}),[e])}var z=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","component","onScroll","onVisibleChange","innerProps"],B=[],U={overflowY:"auto",overflowAnchor:"none"};function V(e,t){var n=e.prefixCls,c=void 0===n?"rc-virtual-list":n,f=e.className,p=e.height,d=e.itemHeight,v=e.fullHeight,m=void 0===v||v,g=e.style,y=e.data,b=e.children,_=e.itemKey,w=e.virtual,E=e.component,S=void 0===E?"div":E,j=e.onScroll,k=e.onVisibleChange,T=e.innerProps,P=Object(s["a"])(e,z),I=!(!1===w||!p||!d),N=I&&y&&d*y.length>p,V=Object(u["useState"])(0),H=Object(a["a"])(V,2),G=H[0],W=H[1],q=Object(u["useState"])(!1),Z=Object(a["a"])(q,2),Y=Z[0],X=Z[1],K=l()(c,f),$=y||B,Q=Object(u["useRef"])(),J=Object(u["useRef"])(),ee=Object(u["useRef"])(),te=u["useCallback"]((function(e){return"function"===typeof _?_(e):null===e||void 0===e?void 0:e[_]}),[_]),ne={getKey:te};function re(e){W((function(t){var n;n="function"===typeof e?e(t):e;var r=we(n);return Q.current.scrollTop=r,r}))}var ie=Object(u["useRef"])({start:0,end:$.length}),oe=Object(u["useRef"])(),ae=M($,te),se=Object(a["a"])(ae,1),ue=se[0];oe.current=ue;var ce=A(te,null,null),le=Object(a["a"])(ce,4),fe=le[0],pe=le[1],he=le[2],de=le[3],ve=u["useMemo"]((function(){if(!I)return{scrollHeight:void 0,start:0,end:$.length-1,offset:void 0};var e;if(!N)return{scrollHeight:(null===(e=J.current)||void 0===e?void 0:e.offsetHeight)||0,start:0,end:$.length-1,offset:void 0};for(var t,n,r,i=0,o=$.length,a=0;a<o;a+=1){var s=$[a],u=te(s),c=he.get(u),l=i+(void 0===c?d:c);l>=G&&void 0===t&&(t=a,n=i),l>G+p&&void 0===r&&(r=a),i=l}return void 0===t&&(t=0,n=0,r=Math.ceil(p/d)),void 0===r&&(r=$.length-1),r=Math.min(r+1,$.length),{scrollHeight:i,start:t,end:r,offset:n}}),[N,I,G,$,de,p]),me=ve.scrollHeight,ge=ve.start,ye=ve.end,be=ve.offset;ie.current.start=ge,ie.current.end=ye;var _e=me-p,xe=Object(u["useRef"])(_e);function we(e){var t=e;return Number.isNaN(xe.current)||(t=Math.min(t,xe.current)),t=Math.max(t,0),t}xe.current=_e;var Oe=G<=0,Ee=G>=_e,Se=R(Oe,Ee);function je(e){var t=e;re(t)}function Ae(e){var t=e.currentTarget.scrollTop;t!==G&&re(t),null===j||void 0===j||j(e)}var ke=L(I,Oe,Ee,(function(e){re((function(t){var n=t+e;return n}))})),Ce=Object(a["a"])(ke,2),Te=Ce[0],Me=Ce[1];F(I,Q,(function(e,t){return!Se(e,t)&&(Te({preventDefault:function(){},deltaY:e}),!0)})),Object(D["a"])((function(){function e(e){I&&e.preventDefault()}return Q.current.addEventListener("wheel",Te),Q.current.addEventListener("DOMMouseScroll",Me),Q.current.addEventListener("MozMousePixelScroll",e),function(){Q.current&&(Q.current.removeEventListener("wheel",Te),Q.current.removeEventListener("DOMMouseScroll",Me),Q.current.removeEventListener("MozMousePixelScroll",e))}}),[I]);var Pe=C(Q,$,he,d,te,pe,re,(function(){var e;null===(e=ee.current)||void 0===e||e.delayHidden()}));u["useImperativeHandle"](t,(function(){return{scrollTo:Pe}})),Object(D["a"])((function(){if(k){var e=$.slice(ge,ye+1);k(e,$)}}),[ge,ye,$]);var Ie=O($,ge,ye,fe,b,ne),Re=null;return p&&(Re=Object(o["a"])(Object(i["a"])({},m?"height":"maxHeight",p),U),I&&(Re.overflowY="hidden",Y&&(Re.pointerEvents="none"))),u["createElement"]("div",Object(r["a"])({style:Object(o["a"])(Object(o["a"])({},g),{},{position:"relative"}),className:K},P),u["createElement"](S,{className:"".concat(c,"-holder"),style:Re,ref:Q,onScroll:Ae},u["createElement"](h,{prefixCls:c,height:me,offset:be,onInnerResize:pe,ref:J,innerProps:T},Ie)),I&&u["createElement"](x,{ref:ee,prefixCls:c,scrollTop:G,height:p,scrollHeight:me,count:$.length,onScroll:je,onStartMove:function(){X(!0)},onStopMove:function(){X(!1)}}))}var H=u["forwardRef"](V);H.displayName="List";var G=H;t["a"]=G},"+wdc":function(e,t,n){"use strict";var r,i,o,a;if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,f=null,p=function e(){if(null!==l)try{var n=t.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(e,0),r}};r=function(e){null!==l?setTimeout(r,0,e):(l=e,setTimeout(p,0))},i=function(e,t){f=setTimeout(e,t)},o=function(){clearTimeout(f)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,y=-1,b=5,_=0;t.unstable_shouldYield=function(){return t.unstable_now()>=_},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,w=x.port2;x.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();_=e+b;try{g(!0,e)?w.postMessage(null):(m=!1,g=null)}catch(n){throw w.postMessage(null),n}}else m=!1},r=function(e){g=e,m||(m=!0,w.postMessage(null))},i=function(e,n){y=h((function(){e(t.unstable_now())}),n)},o=function(){d(y),y=-1}}function O(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<j(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return e=e[0],void 0===e?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>j(a,n))void 0!==u&&0>j(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>j(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function j(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var A=[],k=[],C=1,T=null,M=3,P=!1,I=!1,R=!1;function L(e){for(var t=E(k);null!==t;){if(null===t.callback)S(k);else{if(!(t.startTime<=e))break;S(k),t.sortIndex=t.expirationTime,O(A,t)}t=E(k)}}function D(e){if(R=!1,L(e),!I)if(null!==E(A))I=!0,r(N);else{var t=E(k);null!==t&&i(D,t.startTime-e)}}function N(e,n){I=!1,R&&(R=!1,o()),P=!0;var r=M;try{for(L(n),T=E(A);null!==T&&(!(T.expirationTime>n)||e&&!t.unstable_shouldYield());){var a=T.callback;if("function"===typeof a){T.callback=null,M=T.priorityLevel;var s=a(T.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?T.callback=s:T===E(A)&&S(A),L(n)}else S(A);T=E(A)}if(null!==T)var u=!0;else{var c=E(k);null!==c&&i(D,c.startTime-n),u=!1}return u}finally{T=null,M=r,P=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){I||P||(I=!0,r(N))},t.unstable_getCurrentPriorityLevel=function(){return M},t.unstable_getFirstCallbackNode=function(){return E(A)},t.unstable_next=function(e){switch(M){case 1:case 2:case 3:var t=3;break;default:t=M}var n=M;M=t;try{return e()}finally{M=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=M;M=e;try{return t()}finally{M=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?(a=a.delay,a="number"===typeof a&&0<a?s+a:s):a=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return u=a+u,e={id:C++,callback:n,priorityLevel:e,startTime:a,expirationTime:u,sortIndex:-1},a>s?(e.sortIndex=a,O(k,e),null===E(A)&&e===E(k)&&(R?o():R=!0,i(D,a-s))):(e.sortIndex=u,O(A,e),I||P||(I=!0,r(N))),e},t.unstable_wrapCallback=function(e){var t=M;return function(){var n=M;M=t;try{return e.apply(this,arguments)}finally{M=n}}}},"+ywr":function(e,t,n){var r=n("dOgj");r("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},"/6DY":function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),i=n.n(r),o=n("dEAq"),a=n("H1Ra"),s=n("dMo/"),u=n("nKUr"),c=i.a.memo((e=>{e.demos;return Object(u["jsx"])(u["Fragment"],{children:Object(u["jsxs"])("div",{className:"markdown",children:[Object(u["jsxs"])("h2",{id:"\u4f7f\u7528",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#\u4f7f\u7528","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u4f7f\u7528"]}),Object(u["jsx"])("p",{children:"\u5728 React \u7248\u672c\u4e2d Mapbox \u548c\u9ad8\u5fb7\u5730\u56fe\u4f5c\u4e3a\u4e24\u4e2a\u7ec4\u4ef6\u5c01\u88c5\u7684\u3002"}),Object(u["jsx"])(a["a"],{code:"import { MapboxScene, AMapScene } from '@antv/l7-react';",lang:"javascript"}),Object(u["jsxs"])("h2",{id:"scene-props",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#scene-props","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"Scene Props"]}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"prop name"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"style"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Object"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"scene css \u6837\u5f0f"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"className"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"\u6837\u5f0f\u540d\u79f0"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"map"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"map option"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Required"})}),Object(u["jsxs"])("td",{children:["map option ",Object(u["jsx"])(o["AnchorLink"],{to:"#map-option",children:"\u5730\u56fe\u914d\u7f6e\u9879"})]})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"option"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"scene option"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"void"})}),Object(u["jsxs"])("td",{children:["scene option \u914d\u7f6e\u9879 ",Object(u["jsx"])(o["AnchorLink"],{to:"#scene-option",children:"\u8be6\u60c5"})]})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"onSceneLoaded"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Function"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"void"})}),Object(u["jsx"])("td",{children:"scene \u52a0\u8f7d\u56de\u8c03\u51fd\u6570"})]})]})]}),Object(u["jsxs"])("h3",{id:"\u9ad8\u5fb7\u5730\u56fe\u573a\u666f",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#\u9ad8\u5fb7\u5730\u56fe\u573a\u666f","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u9ad8\u5fb7\u5730\u56fe\u573a\u666f"]}),Object(u["jsx"])(a["a"],{code:"import { AMapScene } from '@antv/l7-react';\n<AMapScene\n  option={{}}\n  map={{\n    style: 'light',\n    center: [112, 20],\n    token: '',\n  }}\n/>;",lang:"jsx"}),Object(u["jsxs"])("h3",{id:"mapbox-\u5730\u56fe\u573a\u666f",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#mapbox-\u5730\u56fe\u573a\u666f","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"Mapbox \u5730\u56fe\u573a\u666f"]}),Object(u["jsx"])(a["a"],{code:"import { MapboxScene } from '@antv/l7-react';\n<MapboxScene\n  option={{}}\n  map={{\n    style: 'light',\n    center: [112, 20],\n    token: '',\n  }}\n/>;",lang:"jsx"}),Object(u["jsxs"])("h3",{id:"map-option",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#map-option","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"map option"]}),Object(u["jsx"])("p",{children:"\u5730\u56fe\u914d\u7f6e\u9879"}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"option"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"style"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"light"})}),Object(u["jsx"])("td",{children:"\u5730\u56fe\u6837\u5f0f `dark"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"token"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Required"})}),Object(u["jsx"])("td",{children:"\u5730\u56fe\u5bc6\u94a5\uff0c\u9700\u8981\u5e73\u53f0\u7533\u8bf7"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"plugin"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string[]"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsxs"])("td",{children:["\u9ad8\u5fb7\u5730\u56fe",Object(u["jsx"])(o["Link"],{to:"https://lbs.amap.com/api/javascript-api/guide/abc/plugins",children:"API \u63d2\u4ef6"})," ",Object(u["jsx"])("code",{children:"['AMap.ToolBar','AMap.Driving']"})]})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"center"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"number"})}),Object(u["jsx"])("td",{children:"null"}),Object(u["jsx"])("td",{children:"\u5730\u56fe\u4e2d\u5fc3\u70b9"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"pitch"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"number"})}),Object(u["jsx"])("td",{children:"0"}),Object(u["jsx"])("td",{children:"\u5730\u56fe\u503e\u89d2"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"rotation"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"number"})}),Object(u["jsx"])("td",{children:"0"}),Object(u["jsx"])("td",{children:"\u5730\u56fe\u65cb\u8f6c\u89d2"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"zoom"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"number"})}),Object(u["jsx"])("td",{children:"null"}),Object(u["jsx"])("td",{children:"\u5730\u56fe\u7f29\u653e\u7b49\u7ea7"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"maxZoom"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"number"})}),Object(u["jsx"])("td",{children:"0"}),Object(u["jsx"])("td",{children:"\u6700\u5927\u7f29\u653e\u7b49\u7ea7"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"minZoom"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"number"})}),Object(u["jsx"])("td",{children:"AMap 18 ,Mapbox 20"}),Object(u["jsx"])("td",{children:"\u6700\u5c0f\u7f29\u653e\u7b49\u7ea7"})]})]})]}),Object(u["jsxs"])("p",{children:["\u5176\u4ed6\u914d\u7f6e\u9879\u89c1\u5730\u56fe\u6587\u6863 \u9ad8\u5fb7\u5730\u56fe Map ",Object(u["jsx"])(o["Link"],{to:"https://lbs.amap.com/api/javascript-api/reference/map",children:"\u914d\u7f6e\u9879"})]}),Object(u["jsxs"])("p",{children:["Mapbox Map \u5730\u56fe\u914d\u7f6e\u9879 ",Object(u["jsx"])(o["Link"],{to:"https://docs.mapbox.com/mapbox-gl-js/api/#map",children:"\u914d\u7f6e\u9879"})]}),Object(u["jsx"])("p",{children:"\u5176\u4ed6\u914d\u7f6e\u9879\u548c\u5e95\u56fe\u4e00\u81f4"}),Object(u["jsxs"])("h3",{id:"scene-option",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#scene-option","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"scene option"]}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"option"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"logoPosition"}),Object(u["jsx"])("td",{children:"string"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"bottomleft"})}),Object(u["jsx"])("td",{children:"logo \u4f4d\u7f6e `bottomright"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"logoVisible"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"boolean"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"true"})}),Object(u["jsx"])("td",{children:"\u662f\u5426\u663e\u793a logo"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"antialias"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"boolean"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"true"})}),Object(u["jsx"])("td",{children:"\u662f\u5426\u5f00\u542f\u6297\u952f\u9f7f"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"preserveDrawingBuffer"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"boolean"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"false"})}),Object(u["jsx"])("td",{children:"\u662f\u5426\u4fdd\u7559\u7f13\u51b2\u533a\u6570\u636e"})]})]})]}),Object(u["jsxs"])("h3",{id:"\u83b7\u53d6-scene-\u5bf9\u8c61",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#\u83b7\u53d6-scene-\u5bf9\u8c61","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u83b7\u53d6 scene \u5bf9\u8c61"]}),Object(u["jsxs"])("h4",{id:"onsceneloaded",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#onsceneloaded","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"onSceneLoaded"]}),Object(u["jsx"])("p",{children:"onSceneLoaded \u56de\u8c03\u51fd\u6570\u80fd\u591f\u53d6\u5230 scene \u5bf9\u8c61"}),Object(u["jsxs"])("h4",{id:"context-api",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#context-api","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"Context API"]}),Object(u["jsx"])(a["a"],{code:"import { SceneContext } from '@antv/l7-react';\n<SceneContext.Consumer>\n  {scene => {\n    // use `scene` here\n  }}\n</SceneContext.Consumer>;",lang:"jsx"}),Object(u["jsxs"])("h2",{id:"\u5b50\u7ec4\u4ef6",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#\u5b50\u7ec4\u4ef6","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u5b50\u7ec4\u4ef6"]}),Object(u["jsxs"])("h3",{id:"loadimage",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#loadimage","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"LoadImage"]}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"prop name"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"name"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"\u56fe\u6807\u540d\u79f0"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"url"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"\u56fe\u6807 url"})]})]})]}),Object(u["jsx"])(a["a"],{code:'import LoadImage from \'@antv/l7-react\';\n<LoadImage name="marker" url="xxx.png" />;',lang:"jsx"}),Object(u["jsxs"])("h3",{id:"layer-\u7ec4\u4ef6",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#layer-\u7ec4\u4ef6","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"Layer \u7ec4\u4ef6"]}),Object(u["jsx"])("p",{children:"\u6bcf\u4e2a\u56fe\u5c42\u4f5c\u4e3a scene \u5b50\u7ec4\u4ef6\u6dfb\u52a0"}),Object(u["jsxs"])("h3",{id:"-\u4e8b\u4ef6\u7ec4\u4ef6",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#-\u4e8b\u4ef6\u7ec4\u4ef6","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\b \u4e8b\u4ef6\u7ec4\u4ef6"]}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"prop name"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"type"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsxs"])("td",{children:["\u4e8b\u4ef6\u7c7b\u578b ",Object(u["jsx"])(o["AnchorLink"],{to:"../scene/#%E5%9C%B0%E5%9B%BE%E4%BA%8B%E4%BB%B6",children:"\u8be6\u60c5"})]})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"handler"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Function"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"scene \u56de\u8c03\u51fd\u6570"})]})]})]}),Object(u["jsx"])(a["a"],{code:"import { SceneEvent, MapboxScene } from '@antv/l7-react';\n\n<MapboxScene>\n  <SceneEvent type=\"click\" handler={() => {}} />\n</MapboxScene>;",lang:"javascript"})]})})}));t["default"]=e=>{var t=i.a.useContext(o["context"]),n=t.demos;return i.a.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),Object(u["jsx"])(c,{demos:n})}},"/7QA":function(e,t,n){"use strict";n.d(t,"a",(function(){return SD})),n.d(t,"b",(function(){return UD})),n.d(t,"c",(function(){return CB})),n.d(t,"d",(function(){return LB})),n.d(t,"j",(function(){return eU})),n.d(t,"i",(function(){return tU})),n.d(t,"e",(function(){return nU})),n.d(t,"f",(function(){return rU})),n.d(t,"g",(function(){return oU})),n.d(t,"k",(function(){return aU})),n.d(t,"h",(function(){return sU}));var r={};n.r(r),n.d(r,"getContainer",(function(){return Si})),n.d(r,"trim",(function(){return ji})),n.d(r,"splitWords",(function(){return Ai})),n.d(r,"create",(function(){return Ci})),n.d(r,"remove",(function(){return Ti})),n.d(r,"addClass",(function(){return Mi})),n.d(r,"removeClass",(function(){return Pi})),n.d(r,"hasClass",(function(){return Ii})),n.d(r,"setClass",(function(){return Ri})),n.d(r,"getClass",(function(){return Li})),n.d(r,"empty",(function(){return Di})),n.d(r,"setTransform",(function(){return Fi})),n.d(r,"triggerResize",(function(){return zi})),n.d(r,"printCanvas",(function(){return Bi})),n.d(r,"getViewPortScale",(function(){return Ui})),n.d(r,"DPR",(function(){return Vi})),n.d(r,"addStyle",(function(){return Hi})),n.d(r,"getStyleList",(function(){return Gi})),n.d(r,"removeStyle",(function(){return Wi})),n.d(r,"css2Style",(function(){return qi})),n.d(r,"getDiffRect",(function(){return Zi})),n.d(r,"setChecked",(function(){return Yi})),n.d(r,"clearChildren",(function(){return Xi})),n.d(r,"setUnDraggable",(function(){return Ki})),n.d(r,"appendElementType",(function(){return $i}));var i={};n.r(i),n.d(i,"sum",(function(){return To})),n.d(i,"max",(function(){return ko})),n.d(i,"min",(function(){return Co})),n.d(i,"mean",(function(){return Mo})),n.d(i,"mode",(function(){return Po})),n.d(i,"statMap",(function(){return Io})),n.d(i,"getColumn",(function(){return Ro})),n.d(i,"getSatByColumn",(function(){return Lo}));var o={};n.r(o),n.d(o,"create",(function(){return ds})),n.d(o,"clone",(function(){return vs})),n.d(o,"copy",(function(){return ms})),n.d(o,"identity",(function(){return gs})),n.d(o,"fromValues",(function(){return ys})),n.d(o,"set",(function(){return bs})),n.d(o,"transpose",(function(){return _s})),n.d(o,"invert",(function(){return xs})),n.d(o,"adjoint",(function(){return ws})),n.d(o,"determinant",(function(){return Os})),n.d(o,"multiply",(function(){return Es})),n.d(o,"rotate",(function(){return Ss})),n.d(o,"scale",(function(){return js})),n.d(o,"fromRotation",(function(){return As})),n.d(o,"fromScaling",(function(){return ks})),n.d(o,"str",(function(){return Cs})),n.d(o,"frob",(function(){return Ts})),n.d(o,"LDU",(function(){return Ms})),n.d(o,"add",(function(){return Ps})),n.d(o,"subtract",(function(){return Is})),n.d(o,"exactEquals",(function(){return Rs})),n.d(o,"equals",(function(){return Ls})),n.d(o,"multiplyScalar",(function(){return Ds})),n.d(o,"multiplyScalarAndAdd",(function(){return Ns})),n.d(o,"mul",(function(){return Fs})),n.d(o,"sub",(function(){return zs}));var a={};n.r(a),n.d(a,"create",(function(){return Bs})),n.d(a,"clone",(function(){return Us})),n.d(a,"copy",(function(){return Vs})),n.d(a,"fromValues",(function(){return Hs})),n.d(a,"set",(function(){return Gs})),n.d(a,"identity",(function(){return Ws})),n.d(a,"transpose",(function(){return qs})),n.d(a,"invert",(function(){return Zs})),n.d(a,"adjoint",(function(){return Ys})),n.d(a,"determinant",(function(){return Xs})),n.d(a,"multiply",(function(){return Ks})),n.d(a,"translate",(function(){return $s})),n.d(a,"scale",(function(){return Qs})),n.d(a,"rotate",(function(){return Js})),n.d(a,"rotateX",(function(){return eu})),n.d(a,"rotateY",(function(){return tu})),n.d(a,"rotateZ",(function(){return nu})),n.d(a,"fromTranslation",(function(){return ru})),n.d(a,"fromScaling",(function(){return iu})),n.d(a,"fromRotation",(function(){return ou})),n.d(a,"fromXRotation",(function(){return au})),n.d(a,"fromYRotation",(function(){return su})),n.d(a,"fromZRotation",(function(){return uu})),n.d(a,"fromRotationTranslation",(function(){return cu})),n.d(a,"fromQuat2",(function(){return lu})),n.d(a,"getTranslation",(function(){return fu})),n.d(a,"getScaling",(function(){return pu})),n.d(a,"getRotation",(function(){return hu})),n.d(a,"fromRotationTranslationScale",(function(){return du})),n.d(a,"fromRotationTranslationScaleOrigin",(function(){return vu})),n.d(a,"fromQuat",(function(){return mu})),n.d(a,"frustum",(function(){return gu})),n.d(a,"perspectiveNO",(function(){return yu})),n.d(a,"perspective",(function(){return bu})),n.d(a,"perspectiveZO",(function(){return _u})),n.d(a,"perspectiveFromFieldOfView",(function(){return xu})),n.d(a,"orthoNO",(function(){return wu})),n.d(a,"ortho",(function(){return Ou})),n.d(a,"orthoZO",(function(){return Eu})),n.d(a,"lookAt",(function(){return Su})),n.d(a,"targetTo",(function(){return ju})),n.d(a,"str",(function(){return Au})),n.d(a,"frob",(function(){return ku})),n.d(a,"add",(function(){return Cu})),n.d(a,"subtract",(function(){return Tu})),n.d(a,"multiplyScalar",(function(){return Mu})),n.d(a,"multiplyScalarAndAdd",(function(){return Pu})),n.d(a,"exactEquals",(function(){return Iu})),n.d(a,"equals",(function(){return Ru})),n.d(a,"mul",(function(){return Lu})),n.d(a,"sub",(function(){return Du}));var s={};n.r(s),n.d(s,"create",(function(){return Nu})),n.d(s,"clone",(function(){return Fu})),n.d(s,"fromValues",(function(){return zu})),n.d(s,"copy",(function(){return Bu})),n.d(s,"set",(function(){return Uu})),n.d(s,"add",(function(){return Vu})),n.d(s,"subtract",(function(){return Hu})),n.d(s,"multiply",(function(){return Gu})),n.d(s,"divide",(function(){return Wu})),n.d(s,"ceil",(function(){return qu})),n.d(s,"floor",(function(){return Zu})),n.d(s,"min",(function(){return Yu})),n.d(s,"max",(function(){return Xu})),n.d(s,"round",(function(){return Ku})),n.d(s,"scale",(function(){return $u})),n.d(s,"scaleAndAdd",(function(){return Qu})),n.d(s,"distance",(function(){return Ju})),n.d(s,"squaredDistance",(function(){return ec})),n.d(s,"length",(function(){return tc})),n.d(s,"squaredLength",(function(){return nc})),n.d(s,"negate",(function(){return rc})),n.d(s,"inverse",(function(){return ic})),n.d(s,"normalize",(function(){return oc})),n.d(s,"dot",(function(){return ac})),n.d(s,"cross",(function(){return sc})),n.d(s,"lerp",(function(){return uc})),n.d(s,"random",(function(){return cc})),n.d(s,"transformMat2",(function(){return lc})),n.d(s,"transformMat2d",(function(){return fc})),n.d(s,"transformMat3",(function(){return pc})),n.d(s,"transformMat4",(function(){return hc})),n.d(s,"rotate",(function(){return dc})),n.d(s,"angle",(function(){return vc})),n.d(s,"zero",(function(){return mc})),n.d(s,"str",(function(){return gc})),n.d(s,"exactEquals",(function(){return yc})),n.d(s,"equals",(function(){return bc})),n.d(s,"len",(function(){return _c})),n.d(s,"sub",(function(){return xc})),n.d(s,"mul",(function(){return wc})),n.d(s,"div",(function(){return Oc})),n.d(s,"dist",(function(){return Ec})),n.d(s,"sqrDist",(function(){return Sc})),n.d(s,"sqrLen",(function(){return jc})),n.d(s,"forEach",(function(){return Ac}));var u={};n.r(u),n.d(u,"create",(function(){return kc})),n.d(u,"clone",(function(){return Cc})),n.d(u,"length",(function(){return Tc})),n.d(u,"fromValues",(function(){return Mc})),n.d(u,"copy",(function(){return Pc})),n.d(u,"set",(function(){return Ic})),n.d(u,"add",(function(){return Rc})),n.d(u,"subtract",(function(){return Lc})),n.d(u,"multiply",(function(){return Dc})),n.d(u,"divide",(function(){return Nc})),n.d(u,"ceil",(function(){return Fc})),n.d(u,"floor",(function(){return zc})),n.d(u,"min",(function(){return Bc})),n.d(u,"max",(function(){return Uc})),n.d(u,"round",(function(){return Vc})),n.d(u,"scale",(function(){return Hc})),n.d(u,"scaleAndAdd",(function(){return Gc})),n.d(u,"distance",(function(){return Wc})),n.d(u,"squaredDistance",(function(){return qc})),n.d(u,"squaredLength",(function(){return Zc})),n.d(u,"negate",(function(){return Yc})),n.d(u,"inverse",(function(){return Xc})),n.d(u,"normalize",(function(){return Kc})),n.d(u,"dot",(function(){return $c})),n.d(u,"cross",(function(){return Qc})),n.d(u,"lerp",(function(){return Jc})),n.d(u,"hermite",(function(){return el})),n.d(u,"bezier",(function(){return tl})),n.d(u,"random",(function(){return nl})),n.d(u,"transformMat4",(function(){return rl})),n.d(u,"transformMat3",(function(){return il})),n.d(u,"transformQuat",(function(){return ol})),n.d(u,"rotateX",(function(){return al})),n.d(u,"rotateY",(function(){return sl})),n.d(u,"rotateZ",(function(){return ul})),n.d(u,"angle",(function(){return cl})),n.d(u,"zero",(function(){return ll})),n.d(u,"str",(function(){return fl})),n.d(u,"exactEquals",(function(){return pl})),n.d(u,"equals",(function(){return hl})),n.d(u,"sub",(function(){return dl})),n.d(u,"mul",(function(){return vl})),n.d(u,"div",(function(){return ml})),n.d(u,"dist",(function(){return gl})),n.d(u,"sqrDist",(function(){return yl})),n.d(u,"len",(function(){return bl})),n.d(u,"sqrLen",(function(){return _l})),n.d(u,"forEach",(function(){return xl}));var c={};n.r(c),n.d(c,"create",(function(){return wl})),n.d(c,"clone",(function(){return Ol})),n.d(c,"fromValues",(function(){return El})),n.d(c,"copy",(function(){return Sl})),n.d(c,"set",(function(){return jl})),n.d(c,"add",(function(){return Al})),n.d(c,"subtract",(function(){return kl})),n.d(c,"multiply",(function(){return Cl})),n.d(c,"divide",(function(){return Tl})),n.d(c,"ceil",(function(){return Ml})),n.d(c,"floor",(function(){return Pl})),n.d(c,"min",(function(){return Il})),n.d(c,"max",(function(){return Rl})),n.d(c,"round",(function(){return Ll})),n.d(c,"scale",(function(){return Dl})),n.d(c,"scaleAndAdd",(function(){return Nl})),n.d(c,"distance",(function(){return Fl})),n.d(c,"squaredDistance",(function(){return zl})),n.d(c,"length",(function(){return Bl})),n.d(c,"squaredLength",(function(){return Ul})),n.d(c,"negate",(function(){return Vl})),n.d(c,"inverse",(function(){return Hl})),n.d(c,"normalize",(function(){return Gl})),n.d(c,"dot",(function(){return Wl})),n.d(c,"cross",(function(){return ql})),n.d(c,"lerp",(function(){return Zl})),n.d(c,"random",(function(){return Yl})),n.d(c,"transformMat4",(function(){return Xl})),n.d(c,"transformQuat",(function(){return Kl})),n.d(c,"zero",(function(){return $l})),n.d(c,"str",(function(){return Ql})),n.d(c,"exactEquals",(function(){return Jl})),n.d(c,"equals",(function(){return ef})),n.d(c,"sub",(function(){return tf})),n.d(c,"mul",(function(){return nf})),n.d(c,"div",(function(){return rf})),n.d(c,"dist",(function(){return of})),n.d(c,"sqrDist",(function(){return af})),n.d(c,"len",(function(){return sf})),n.d(c,"sqrLen",(function(){return uf})),n.d(c,"forEach",(function(){return cf}));var l=n("q1tI"),f=n.n(l),p=Object(l["createContext"])({});function h(){return Object(l["useContext"])(p)}var d=n("k1fw"),v=n("tJVT"),m={},g={},y=function(e){return g[e]},b=function(e,t){g[e]=t},_=function(e){return m[e]},x=function(e,t){m[e]=t},w={},O={},E=34,S=10,j=13;function A(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function k(e,t){var n=A(e);return function(r,i){return t(n(r),i,e)}}function C(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function T(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function M(e){return e<0?"-"+T(-e,6):e>9999?"+"+T(e,6):T(e,4)}function P(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":M(e.getUTCFullYear(),4)+"-"+T(e.getUTCMonth()+1,2)+"-"+T(e.getUTCDate(),2)+(i?"T"+T(t,2)+":"+T(n,2)+":"+T(r,2)+"."+T(i,3)+"Z":r?"T"+T(t,2)+":"+T(n,2)+":"+T(r,2)+"Z":n||t?"T"+T(t,2)+":"+T(n,2)+"Z":"")}var I=function(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var n,r,o=i(e,(function(e,i){if(n)return n(e,i-1);r=e,n=t?k(e,t):A(e)}));return o.columns=r||[],o}function i(e,t){var r,i=[],o=e.length,a=0,s=0,u=o<=0,c=!1;function l(){if(u)return O;if(c)return c=!1,w;var t,r,i=a;if(e.charCodeAt(i)===E){while(a++<o&&e.charCodeAt(a)!==E||e.charCodeAt(++a)===E);return(t=a)>=o?u=!0:(r=e.charCodeAt(a++))===S?c=!0:r===j&&(c=!0,e.charCodeAt(a)===S&&++a),e.slice(i+1,t-1).replace(/""/g,'"')}while(a<o){if((r=e.charCodeAt(t=a++))===S)c=!0;else if(r===j)c=!0,e.charCodeAt(a)===S&&++a;else if(r!==n)continue;return e.slice(i,t)}return u=!0,e.slice(i,o)}e.charCodeAt(o-1)===S&&--o,e.charCodeAt(o-1)===j&&--o;while((r=l())!==O){var f=[];while(r!==w&&r!==O)f.push(r),r=l();t&&null==(f=t(f,s++))||i.push(f)}return i}function o(t,n){return t.map((function(t){return n.map((function(e){return l(t[e])})).join(e)}))}function a(t,n){return null==n&&(n=C(t)),[n.map(l).join(e)].concat(o(t,n)).join("\n")}function s(e,t){return null==t&&(t=C(e)),o(e,t).join("\n")}function u(e){return e.map(c).join("\n")}function c(t){return t.map(l).join(e)}function l(e){return null==e?"":e instanceof Date?P(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:u,formatRow:c,formatValue:l}},R=I(","),L=R.parse,D=(R.parseRows,R.format,R.formatBody,R.formatRows,R.formatRow,R.formatValue,n("KQm4")),N=n("VTBJ"),F=n("Aib3"),z=n.n(F),B=6371008.8,U={centimeters:100*B,centimetres:100*B,degrees:B/111325,feet:3.28084*B,inches:39.37*B,kilometers:B/1e3,kilometres:B/1e3,meters:B,metres:B,miles:B/1609.344,millimeters:1e3*B,millimetres:1e3*B,nauticalmiles:B/1852,radians:1,yards:1.0936*B};function V(e,t,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function H(e,t,n){void 0===n&&(n={});for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return V(s,t,n)}function G(e,t,n){if(void 0===n&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var r={type:"LineString",coordinates:e};return V(r,t,n)}function W(e,t){void 0===t&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function q(e,t,n){void 0===n&&(n={});var r={type:"MultiPolygon",coordinates:e};return V(r,t,n)}function Z(e,t){void 0===t&&(t="kilometers");var n=U[t];if(!n)throw new Error(t+" units is invalid");return e*n}function Y(e){var t=e%360;return t*Math.PI/180}function X(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function K(e){return"Feature"===e.type?e.geometry:e}function $(e,t,n){if(null!==e)for(var r,i,o,a,s,u,c,l,f=0,p=0,h=e.type,d="FeatureCollection"===h,v="Feature"===h,m=d?e.features.length:1,g=0;g<m;g++){c=d?e.features[g].geometry:v?e.geometry:e,l=!!c&&"GeometryCollection"===c.type,s=l?c.geometries.length:1;for(var y=0;y<s;y++){var b=0,_=0;if(a=l?c.geometries[y]:c,null!==a){u=a.coordinates;var x=a.type;switch(f=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===t(u,p,g,b,_))return!1;p++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===t(u[r],p,g,b,_))return!1;p++,"MultiPoint"===x&&b++}"LineString"===x&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-f;i++){if(!1===t(u[r][i],p,g,b,_))return!1;p++}"MultiLineString"===x&&b++,"Polygon"===x&&_++}"Polygon"===x&&b++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(_=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-f;o++){if(!1===t(u[r][i][o],p,g,b,_))return!1;p++}_++}b++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===$(a.geometries[r],t,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Q(e,t){var n,r,i,o,a,s,u,c,l,f,p=0,h="FeatureCollection"===e.type,d="Feature"===e.type,v=h?e.features.length:1;for(n=0;n<v;n++){for(s=h?e.features[n].geometry:d?e.geometry:e,c=h?e.features[n].properties:d?e.properties:{},l=h?e.features[n].bbox:d?e.bbox:void 0,f=h?e.features[n].id:d?e.id:void 0,u=!!s&&"GeometryCollection"===s.type,a=u?s.geometries.length:1,i=0;i<a;i++)if(o=u?s.geometries[i]:s,null!==o)switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(o,p,c,l,f))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===t(o.geometries[r],p,c,l,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,p,c,l,f))return!1;p++}}function J(e,t){Q(e,(function(e,n,r,i,o){var a,s=null===e?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==t(V(e,r,{bbox:i,id:o}),n,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon";break}for(var u=0;u<e.coordinates.length;u++){var c=e.coordinates[u],l={type:a,coordinates:c};if(!1===t(V(l,r),n,u))return!1}}))}function ee(e,t){var n=t.x,r=t.y,i=t.x1,o=t.y1,a=t.coordinates,s=t.geometry,u=[];if(!Array.isArray(e))return{dataArray:[]};if(s)return e.filter((function(e){return e[s]&&e[s].type&&e[s].coordinates&&e[s].coordinates.length>0})).forEach((function(e,t){var n=z()(Object(N["a"])({},e[s]),!0);J(n,(function(n){var r=X(n),i=Object(N["a"])(Object(N["a"])({},e),{},{_id:t,coordinates:r});u.push(i)}))})),{dataArray:u};for(var c=0;c<e.length;c++){var l=e[c],f=[];if(a){var p="Polygon";Array.isArray(a[0])||(p="Point"),Array.isArray(a[0])&&!Array.isArray(a[0][0])&&(p="LineString");var h=z()({type:p,coordinates:Object(D["a"])(l[a])},!0);f=h.coordinates}else if(n&&r&&i&&o){var d=[parseFloat(l[n]),parseFloat(l[r])],v=[parseFloat(l[i]),parseFloat(l[o])];f=[d,v]}else n&&r&&(f=[parseFloat(l[n]),parseFloat(l[r])]);var m=Object(N["a"])(Object(N["a"])({},l),{},{_id:c,coordinates:f});u.push(m)}return{dataArray:u}}function te(e,t){var n=L(e);return ee(n,t)}var ne=n("U8pU");function re(e){var t=e.toString(),n=5381,r=t.length;while(r)n=33*n^t.charCodeAt(--r);return n>>>0}function ie(e,t){return void 0===t?null:1*Object(ne["a"])(e.properties[t])==="number"?1*e.properties[t]:e.properties&&e.properties[t]?re(e.properties[t]+"")%1000019:null}function oe(e,t){var n=[],r={};return e.features?(e.features=e.features.filter((function(e){var t=e.geometry;return null!=e&&t&&t.type&&t.coordinates&&t.coordinates.length>0})),z()(e,!0),0===e.features.length?{dataArray:[],featureKeys:r}:(J(e,(function(e,r){var i=ie(e,null===t||void 0===t?void 0:t.featureId);null===i&&(i=r);var o=i,a=X(e),s=Object(N["a"])(Object(N["a"])({},e.properties),{},{coordinates:a,_id:o});n.push(s)})),{dataArray:n,featureKeys:r})):(e.features=[],{dataArray:[]})}var ae=n("HaE+"),se=n("o0o1"),ue=n.n(se);function ce(e,t,n,r){for(var i,o=r,a=n-t>>1,s=n-t,u=e[t],c=e[t+1],l=e[n],f=e[n+1],p=t+3;p<n;p+=3){var h=le(e[p],e[p+1],u,c,l,f);if(h>o)i=p,o=h;else if(h===o){var d=Math.abs(p-a);d<s&&(i=p,s=d)}}o>r&&(i-t>3&&ce(e,t,i,r),e[i+2]=o,n-i>3&&ce(e,i,n,r))}function le(e,t,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((e-n)*a+(t-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return a=e-n,s=t-r,a*a+s*s}function fe(e,t,n,r){var i={id:"undefined"===typeof e?null:e,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return pe(i),i}function pe(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)he(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)he(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)he(e,t[r][i])}function he(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function de(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)ve(n,e.features[r],t,r);else"Feature"===e.type?ve(n,e,t):ve(n,{geometry:e},t);return n}function ve(e,t,n,r){if(t.geometry){var i=t.geometry.coordinates,o=t.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],u=t.id;if(n.promoteId?u=t.properties[n.promoteId]:n.generateId&&(u=r||0),"Point"===o)me(i,s);else if("MultiPoint"===o)for(var c=0;c<i.length;c++)me(i[c],s);else if("LineString"===o)ge(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(c=0;c<i.length;c++)s=[],ge(i[c],s,a,!1),e.push(fe(u,"LineString",s,t.properties));return}ye(i,s,a,!1)}else if("Polygon"===o)ye(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<t.geometry.geometries.length;c++)ve(e,{id:u,geometry:t.geometry.geometries[c],properties:t.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<i.length;c++){var l=[];ye(i[c],l,a,!0),s.push(l)}}e.push(fe(u,o,s,t.properties))}}function me(e,t){t.push(be(e[0])),t.push(_e(e[1])),t.push(0)}function ge(e,t,n,r){for(var i,o,a=0,s=0;s<e.length;s++){var u=be(e[s][0]),c=_e(e[s][1]);t.push(u),t.push(c),t.push(0),s>0&&(a+=r?(i*c-u*o)/2:Math.sqrt(Math.pow(u-i,2)+Math.pow(c-o,2))),i=u,o=c}var l=t.length-3;t[2]=1,ce(t,0,l,n),t[l+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function ye(e,t,n,r){for(var i=0;i<e.length;i++){var o=[];ge(e[i],o,n,r),t.push(o)}}function be(e){return e/360+.5}function _e(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function xe(e,t,n,r,i,o,a,s){if(n/=t,r/=t,o>=n&&a<r)return e;if(a<n||o>=r)return null;for(var u=[],c=0;c<e.length;c++){var l=e[c],f=l.geometry,p=l.type,h=0===i?l.minX:l.minY,d=0===i?l.maxX:l.maxY;if(h>=n&&d<r)u.push(l);else if(!(d<n||h>=r)){var v=[];if("Point"===p||"MultiPoint"===p)we(f,v,n,r,i);else if("LineString"===p)Oe(f,v,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===p)Se(f,v,n,r,i,!1);else if("Polygon"===p)Se(f,v,n,r,i,!0);else if("MultiPolygon"===p)for(var m=0;m<f.length;m++){var g=[];Se(f[m],g,n,r,i,!0),g.length&&v.push(g)}if(v.length){if(s.lineMetrics&&"LineString"===p){for(m=0;m<v.length;m++)u.push(fe(l.id,p,v[m],l.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===v.length?(p="LineString",v=v[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===v.length?"Point":"MultiPoint"),u.push(fe(l.id,p,v,l.tags))}}}return u.length?u:null}function we(e,t,n,r,i){for(var o=0;o<e.length;o+=3){var a=e[o+i];a>=n&&a<=r&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function Oe(e,t,n,r,i,o,a){for(var s,u,c=Ee(e),l=0===i?Ae:ke,f=e.start,p=0;p<e.length-3;p+=3){var h=e[p],d=e[p+1],v=e[p+2],m=e[p+3],g=e[p+4],y=0===i?h:d,b=0===i?m:g,_=!1;a&&(s=Math.sqrt(Math.pow(h-m,2)+Math.pow(d-g,2))),y<n?b>n&&(u=l(c,h,d,m,g,n),a&&(c.start=f+s*u)):y>r?b<r&&(u=l(c,h,d,m,g,r),a&&(c.start=f+s*u)):je(c,h,d,v),b<n&&y>=n&&(u=l(c,h,d,m,g,n),_=!0),b>r&&y<=r&&(u=l(c,h,d,m,g,r),_=!0),!o&&_&&(a&&(c.end=f+s*u),t.push(c),c=Ee(e)),a&&(f+=s)}var x=e.length-3;h=e[x],d=e[x+1],v=e[x+2],y=0===i?h:d,y>=n&&y<=r&&je(c,h,d,v),x=c.length-3,o&&x>=3&&(c[x]!==c[0]||c[x+1]!==c[1])&&je(c,c[0],c[1],c[2]),c.length&&t.push(c)}function Ee(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function Se(e,t,n,r,i,o){for(var a=0;a<e.length;a++)Oe(e[a],t,n,r,i,o,!1)}function je(e,t,n,r){e.push(t),e.push(n),e.push(r)}function Ae(e,t,n,r,i,o){var a=(o-t)/(r-t);return e.push(o),e.push(n+(i-n)*a),e.push(1),a}function ke(e,t,n,r,i,o){var a=(o-n)/(i-n);return e.push(t+(r-t)*a),e.push(o),e.push(1),a}function Ce(e,t){var n=t.buffer/t.extent,r=e,i=xe(e,1,-1-n,n,0,-1,2,t),o=xe(e,1,1-n,2+n,0,-1,2,t);return(i||o)&&(r=xe(e,1,-n,1+n,0,-1,2,t)||[],i&&(r=Te(i,1).concat(r)),o&&(r=r.concat(Te(o,-1)))),r}function Te(e,t){for(var n=[],r=0;r<e.length;r++){var i,o=e[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=Me(o.geometry,t);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(Me(o.geometry[s],t))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var u=[],c=0;c<o.geometry[s].length;c++)u.push(Me(o.geometry[s][c],t));i.push(u)}n.push(fe(o.id,a,i,o.tags))}return n}function Me(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function Pe(e,t){if(e.transformed)return e;var n,r,i,o=1<<e.z,a=e.x,s=e.y;for(n=0;n<e.features.length;n++){var u=e.features[n],c=u.geometry,l=u.type;if(u.geometry=[],1===l)for(r=0;r<c.length;r+=2)u.geometry.push(Ie(c[r],c[r+1],t,o,a,s));else for(r=0;r<c.length;r++){var f=[];for(i=0;i<c[r].length;i+=2)f.push(Ie(c[r][i],c[r][i+1],t,o,a,s));u.geometry.push(f)}}return e.transformed=!0,e}function Ie(e,t,n,r,i,o){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-o))]}function Re(e,t,n,r,i){for(var o=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,Le(a,e[s],o,i);var u=e[s].minX,c=e[s].minY,l=e[s].maxX,f=e[s].maxY;u<a.minX&&(a.minX=u),c<a.minY&&(a.minY=c),l>a.maxX&&(a.maxX=l),f>a.maxY&&(a.maxY=f)}return a}function Le(e,t,n,r){var i=t.geometry,o=t.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)De(a,i,e,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)De(a,i[s],e,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<i.length;u++){var c=i[u];for(s=0;s<c.length;s++)De(a,c[s],e,n,!0,0===s)}if(a.length){var l=t.tags||null;if("LineString"===o&&r.lineMetrics){for(var f in l={},t.tags)l[f]=t.tags[f];l["mapbox_clip_start"]=i.start/i.size,l["mapbox_clip_end"]=i.end/i.size}var p={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:l};null!==t.id&&(p.id=t.id),e.features.push(p)}}function De(e,t,n,r,i,o){var a=r*r;if(r>0&&t.size<(i?a:r))n.numPoints+=t.length/3;else{for(var s=[],u=0;u<t.length;u+=3)(0===r||t[u+2]>a)&&(n.numSimplified++,s.push(t[u]),s.push(t[u+1])),n.numPoints++;i&&Ne(s,o),e.push(s)}}function Ne(e,t){for(var n=0,r=0,i=e.length,o=i-2;r<i;o=r,r+=2)n+=(e[r]-e[o])*(e[r+1]+e[o+1]);if(n>0===t)for(r=0,i=e.length;r<i/2;r+=2){var a=e[r],s=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=a,e[i-1-r]=s}}function Fe(e,t){return new ze(e,t)}function ze(e,t){t=this.options=Ue(Object.create(this.options),t);var n=t.debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=de(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=Ce(r,t),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Be(e,t,n){return 32*((1<<e)*n+t)+e}function Ue(e,t){for(var n in t)e[n]=t[n];return e}ze.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ze.prototype.splitTile=function(e,t,n,r,i,o,a){var s=[e,t,n,r],u=this.options,c=u.debug;while(s.length){r=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var l=1<<t,f=Be(t,n,r),p=this.tiles[f];if(!p&&(c>1&&console.time("creation"),p=this.tiles[f]=Re(e,t,n,r,u),this.tileCoords.push({z:t,x:n,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var h="z"+t;this.stats[h]=(this.stats[h]||0)+1,this.total++}if(p.source=e,i){if(t===u.maxZoom||t===i)continue;var d=1<<i-t;if(n!==Math.floor(o/d)||r!==Math.floor(a/d))continue}else if(t===u.indexMaxZoom||p.numPoints<=u.indexMaxPoints)continue;if(p.source=null,0!==e.length){c>1&&console.time("clipping");var v,m,g,y,b,_,x=.5*u.buffer/u.extent,w=.5-x,O=.5+x,E=1+x;v=m=g=y=null,b=xe(e,l,n-x,n+O,0,p.minX,p.maxX,u),_=xe(e,l,n+w,n+E,0,p.minX,p.maxX,u),e=null,b&&(v=xe(b,l,r-x,r+O,1,p.minY,p.maxY,u),m=xe(b,l,r+w,r+E,1,p.minY,p.maxY,u),b=null),_&&(g=xe(_,l,r-x,r+O,1,p.minY,p.maxY,u),y=xe(_,l,r+w,r+E,1,p.minY,p.maxY,u),_=null),c>1&&console.timeEnd("clipping"),s.push(v||[],t+1,2*n,2*r),s.push(m||[],t+1,2*n,2*r+1),s.push(g||[],t+1,2*n+1,2*r),s.push(y||[],t+1,2*n+1,2*r+1)}}},ze.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,o=r.debug;if(e<0||e>24)return null;var a=1<<e;t=(t%a+a)%a;var s=Be(e,t,n);if(this.tiles[s])return Pe(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",e,t,n);var u,c=e,l=t,f=n;while(!u&&c>0)c--,l=Math.floor(l/2),f=Math.floor(f/2),u=this.tiles[Be(c,l,f)];return u&&u.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,l,f),o>1&&console.time("drilling down"),this.splitTile(u.source,c,l,f,e,t,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?Pe(this.tiles[s],i):null):null};var Ve=n("1OyB"),He=n("vuIU"),Ge=n("rePB"),We=function(){function e(t,n,r,i){Object(Ve["a"])(this,e),Object(Ge["a"])(this,"vectorLayerCache",{}),this.x=n,this.y=r,this.z=i,this.vectorTile=t}return Object(He["a"])(e,[{key:"getTileData",value:function(e){if(!e||!this.vectorTile.layers[e])return[];if(this.vectorLayerCache[e])return this.vectorLayerCache[e];var t=this.vectorTile.layers[e];return t.features}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),e}(),qe={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0};function Ze(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)t=e[i],n=e[a],r+=(n.x-t.x)*(t.y+n.y);return r}function Ye(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var a=Ze(e[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}return n&&i.push(n),i}var Xe=["Unknown","Point","LineString","Polygon"];function Ke(e,t,n,r,i){var o,a,s=i.geometry,u=i.type,c=i.tags,l=i.id,f=e*Math.pow(2,r),p=e*t,h=e*n,d=Xe[u];function v(e){for(var t=0;t<e.length;t++){var n=e[t];if(n[3])break;var r=180-360*(n[1]+h)/f,i=360*(n[0]+p)/f-180,o=360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90;e[t]=[i,o,0,1]}}switch(u){case 1:var m=[];for(o=0;o<s.length;o++)m[o]=s[o][0];s=m,v(s);break;case 2:for(o=0;o<s.length;o++)v(s[o]);break;case 3:for(s=Ye(s),o=0;o<s.length;o++)for(a=0;a<s[o].length;a++)v(s[o][a]);break}1===s.length?s=s[0]:d="Multi"+d;var g={type:"Feature",geometry:{type:d,coordinates:s},properties:c,id:l,tileOrigin:[0,0],coord:""};return g}var $e=function(){var e=Object(ae["a"])(ue.a.mark((function e(t,n,r,i){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var o=n.getTile(t.z,t.x,t.y),a=o?o.features.map((function(e){return Ke(i,r.x,r.y,r.z,e)})):[],s={layers:{defaultLayer:{features:a}}},u=new We(s,t.x,t.y,t.z);e(u)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}();function Qe(e){var t={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return void 0===e||"undefined"===typeof e.geojsonvtOptions?t:Object(N["a"])(Object(N["a"])({},t),e.geojsonvtOptions)}function Je(e,t){var n=Qe(t),r=n.extent||4096,i=Fe(e,n),o=function(e,t){return $e(t,i,e,r)},a=Object(N["a"])(Object(N["a"])(Object(N["a"])({},qe),t),{},{getTileData:o});return{data:e,dataArray:[],tilesetOptions:a,isTile:!0}}var et=n("Ji7U"),tt=n("md7G"),nt=n("foSv"),rt=n("s4An");function it(e){return-1!==Function.toString.call(e).indexOf("[native code]")}var ot=n("2WcH");function at(e,t,n){return at=Object(ot["a"])()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=Function.bind.apply(e,r),o=new i;return n&&Object(rt["a"])(o,n.prototype),o},at.apply(null,arguments)}function st(e){var t="function"===typeof Map?new Map:void 0;return st=function(e){if(null===e||!it(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return at(e,arguments,Object(nt["a"])(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object(rt["a"])(n,e)},st(e)}var ut="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function ct(e){this.message=e}function lt(e){var t=String(e).replace(/=+$/,"");if(t.length%4===1)throw new ct("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i="",o=0,a=0;r=t.charAt(a++);~r&&(n=o%4?64*n+r:r,o++%4)?i+=String.fromCharCode(255&n>>(-2*o&6)):0)r=ut.indexOf(r);return i}function ft(e){e=String(e);for(var t,n,r,i,o="",a=0,s=e.length%3;a<e.length;){if((n=e.charCodeAt(a++))>255||(r=e.charCodeAt(a++))>255||(i=e.charCodeAt(a++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");t=n<<16|r<<8|i,o+=ut.charAt(t>>18&63)+ut.charAt(t>>12&63)+ut.charAt(t>>6&63)+ut.charAt(63&t)}return s?o.slice(0,s-3)+"===".substring(s):o}ct.prototype=new Error,ct.prototype.name="InvalidCharacterError";var pt=function(){function e(t,n){Object(Ve["a"])(this,e),this.buffers=t,this.type=n}return Object(He["a"])(e,[{key:"arraybuffer",value:function(){return Promise.resolve(this.buffers[0])}},{key:"stream",value:function(){throw new Error("not implemented")}},{key:"text",value:function(){throw new Error("not implemented")}},{key:"slice",value:function(e,t,n){throw new Error("not implemented")}}]),e}(),ht=n("Qo3T"),dt="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,vt=dt?my.getSystemInfoSync().pixelRatio:ht["a"].devicePixelRatio,mt=Object(He["a"])((function e(t,n){Object(Ve["a"])(this,e),this.cancelBubble=!1,this.cancelable=!1,this.target=null,this.currentTarget=null,this.preventDefault=function(){},this.stopPropagation=function(){},this.type=t,this.timeStamp=Date.now()})),gt=n("JX7q");function yt(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=bt(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function bt(e,t){if(e){if("string"===typeof e)return _t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_t(e,t):void 0}}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xt=new WeakMap,wt=function(){function e(){Object(Ve["a"])(this,e),xt.set(this,{})}return Object(He["a"])(e,[{key:"addEventListener",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=xt.get(this);r||(r={}),r[e]||(r[e]=[]),r[e].push(t),xt.set(this,r),n.capture,n.once,n.passive}},{key:"removeEventListener",value:function(e,t){var n=xt.get(this);if(n){var r=n[e];if(r&&r.length>0)for(var i=r.length;i--;i>0)if(r[i]===t){r.splice(i,1);break}}}},{key:"dispatchEvent",value:function(e){var t=xt.get(this)[e.type];if(t){var n,r=yt(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;i(e)}}catch(o){r.e(o)}finally{r.f()}}}}]),e}();function Ot(e){var t=Et();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Et(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var St=function(e){Object(et["a"])(n,e);var t=Ot(n);function n(){var e;return Object(Ve["a"])(this,n),e=t.call(this),e.childNodes=[],e}return Object(He["a"])(n,[{key:"appendChild",value:function(e){this.childNodes.push(e)}},{key:"cloneNode",value:function(){var e=Object.create(this);return Object.assign(e,this),e}},{key:"removeChild",value:function(e){var t=this.childNodes.findIndex((function(t){return t===e}));return t>-1?this.childNodes.splice(t,1):null}}]),n}(wt);function jt(e){var t=At();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function At(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var kt,Ct,Tt,Mt,Pt=function(e){Object(et["a"])(n,e);var t=jt(n);function n(){var e;return Object(Ve["a"])(this,n),e=t.call(this),e.className="",e.children=[],e}return Object(He["a"])(n,[{key:"setAttribute",value:function(e,t){this[e]=t}},{key:"getAttribute",value:function(e){return this[e]}},{key:"setAttributeNS",value:function(e,t){this[e]=t}},{key:"getAttributeNS",value:function(e){return this[e]}}]),n}(St),It="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM;if(It){var Rt=my.getSystemInfoSync();kt=Rt.screenWidth,Ct=Rt.screenHeight,Tt=Rt.windowWidth,Mt=Rt.windowHeight}else{var Lt=ht["a"].innerWidth,Dt=ht["a"].innerHeight;kt=Lt,Ct=Dt,Tt=Lt,Mt=Dt}var Nt={width:kt,height:Ct,availWidth:Tt,availHeight:Mt,availLeft:0,availTop:0},Ft=Nt.availWidth,zt=Nt.availHeight,Bt={style:[]};function Ut(e,t){var n,r;"parentNode"in e||(n=0===t?function(){return null}:1===t?function(){return Bt}:function(){return null},Object.defineProperty(e,"parentNode",{enumerable:!0,get:n}));"parentElement"in e||(r=0===t?function(){return null}:1===t?function(){return Bt}:function(){return null},Object.defineProperty(e,"parentElement",{enumerable:!0,get:r}))}function Vt(e){e.style=e.style||{},Object.assign(e.style,{top:"0px",left:"0px",width:Ft+"px",height:zt+"px",margin:"0px",padding:"0px"})}function Ht(e){"clientLeft"in e||(e.clientLeft=0,e.clientTop=0),"clientWidth"in e||(e.clientWidth=Ft,e.clientHeight=zt),"getBoundingClientRect"in e||(e.getBoundingClientRect=function(){var e={x:0,y:0,top:0,left:0,width:this.clientWidth,height:this.clientHeight,right:this.clientWidth,bottom:this.clientHeight};return e})}function Gt(e){"offsetLeft"in e||(e.offsetLeft=0,e.offsetTop=0),"offsetWidth"in e||(e.offsetWidth=Ft,e.offsetHeight=zt)}function Wt(e){"scrollLeft"in e||(e.scrollLeft=0,e.scrollTop=0),"scrollWidth"in e||(e.scrollWidth=Ft,e.scrollHeight=zt)}function qt(e){var t=function(){return!0};e.classList=[],e.classList.add=t,e.classList.remove=t,e.classList.contains=t,e.classList.toggle=t}function Zt(e){var t=Yt();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Yt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Xt(){}var Kt=function(e){Object(et["a"])(n,e);var t=Zt(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0;return Object(Ve["a"])(this,n),e=t.call(this),e.className="",e.children=[],e.focus=Xt,e.blur=Xt,e.insertBefore=Xt,e.appendChild=Xt,e.removeChild=Xt,e.remove=Xt,e.innerHTML="",e.tagName=r.toUpperCase(),Ut(Object(gt["a"])(e),i),Vt(Object(gt["a"])(e)),qt(Object(gt["a"])(e)),Ht(Object(gt["a"])(e)),Gt(Object(gt["a"])(e)),Wt(Object(gt["a"])(e)),e}return Object(He["a"])(n)}(Pt);function $t(e){var t=Qt();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Qt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Jt=function(e){Object(et["a"])(n,e);var t=$t(n);function n(e){return Object(Ve["a"])(this,n),t.call(this,e)}return Object(He["a"])(n,[{key:"addTextTrack",value:function(){}},{key:"captureStream",value:function(){}},{key:"fastSeek",value:function(){}},{key:"load",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}}]),n}(Kt);function en(e){var t=tn();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function tn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var nn=function(e){Object(et["a"])(n,e);var t=en(n);function n(){return Object(Ve["a"])(this,n),t.call(this,"video")}return Object(He["a"])(n)}(Jt),rn={};function on(){return rn}var an=Object(He["a"])((function e(){Object(Ve["a"])(this,e);var t=on(),n=t.createImage&&t.createImage()||{};return"tagName"in n||(n.tagName="IMG",n.__proto__=e.prototype),Ut(n),qt(n),Object.assign(n,{addEventListener:function(e,t){n["on".concat(e)]=t.bind(n)},removeEventListener:function(e){n["on".concat(e)]=null}}),n})),sn={href:"",protocol:"",host:""};function un(e){var t=cn();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function cn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var ln=function(e){Object(et["a"])(n,e);var t=un(n);function n(){return Object(Ve["a"])(this,n),t.call(this,"body",0)}return Object(He["a"])(n,[{key:"addEventListener",value:function(e,t){}},{key:"removeEventListener",value:function(e,t,n){}},{key:"dispatchEvent",value:function(e){}}]),n}(Kt),fn=function(e){Object(et["a"])(n,e);var t=un(n);function n(){return Object(Ve["a"])(this,n),t.call(this,"html",0)}return Object(He["a"])(n,[{key:"addEventListener",value:function(e,t){}},{key:"removeEventListener",value:function(e,t){}},{key:"dispatchEvent",value:function(e){}}]),n}(Kt),pn={},hn={readyState:"complete",visibilityState:"visible",hidden:!1,fullscreen:!0,scripts:[],style:{},location:sn,ontouchstart:null,ontouchmove:null,ontouchend:null,onvisibilitychange:null,parentNode:null,parentElement:null,head:null,body:null,documentElement:{style:[]},createElement:function(e){return e=e.toLowerCase(),"canvas"===e?my.createOffscreenCanvas(1024,128,"2d"):"img"===e?new an:"video"===e?new nn:new Kt(e)},createElementNS:function(e,t){return this.createElement(t)},createTextNode:function(e){return e},getElementById:function(e){return null},getElementsByTagName:function(e){return e=e.toLowerCase(),[]},getElementsByTagNameNS:function(e,t){return this.getElementsByTagName(t)},getElementsByName:function(e){return[]},querySelector:function(e){return null},querySelectorAll:function(e){return[]},addEventListener:function(e,t,n){pn[e]||(pn[e]=[]),pn[e].push(t)},removeEventListener:function(e,t){var n=pn[e];if(n&&n.length>0)for(var r=n.length;r--;r>0)if(n[r]===t){n.splice(r,1);break}},dispatchEvent:function(e){var t=e.type,n=pn[t];if(n)for(var r=0;r<n.length;r++)n[r](e);e.target&&"function"===typeof e.target["on"+t]&&e.target["on"+t](e)},createEvent:function(e){return new mt(e)}};hn.documentElement=new fn,hn.head=new Kt("head"),hn.body=new ln;var dn,vn,mn,gn=Object,yn=function(){function e(){Object(Ve["a"])(this,e);var t=arguments.length;if(2===t){if("number"===typeof arguments[0]&&"number"===typeof arguments[1])return this._w=arguments[0],this._h=arguments[1],void(this._data=new Uint8ClampedArray(this._w*this._h*4))}else 3===t&&"object"===Object(ne["a"])(arguments[0])&&"number"===typeof arguments[1]&&"number"===typeof arguments[2]&&(this._data=arguments[0],this._w=arguments[1],this._h=arguments[2]);throw new Error("ImageData: params error")}return Object(He["a"])(e,[{key:"width",get:function(){return this._w}},{key:"height",get:function(){return this._h}},{key:"data",get:function(){return this._data}}]),e}(),bn="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM;if(bn){var _n=my.getSystemInfoSync();dn=_n.system,vn=_n.platform,mn=_n.language}else{var xn={versions:function(){var e=ht["a"].navigator.userAgent;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1===e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1===e.indexOf("Safari"),weixin:e.indexOf("MicroMessenger")>-1,qq:" qq"===e.match(/\sQQ/i)}}(),language:(ht["a"].navigator.browserLanguage||ht["a"].navigator.language).toLowerCase()};xn.versions.android?vn="android":xn.versions.trident?vn="IE":xn.versions.presto?vn="Opera":xn.versions.webKit?vn="webKit":xn.versions.gecko?vn="Firefox":xn.versions.mobile?vn="mobile":xn.versions.ios?vn="ios":xn.versions.iPhone?vn="iPhone":xn.versions.iPad?vn="ipad":xn.versions.webApp?vn="webApp":xn.versions.weixin?vn="weixin":xn.versions.qq&&(vn="qq"),dn=ht["a"].navigator.userAgent,mn=xn.language}var wn=-1!==dn.toLowerCase().indexOf("android"),On=wn?"Android; CPU Android 6.0":"iPhone; CPU iPhone OS 10_3_1 like Mac OS X",En="Mozilla/5.0 (".concat(On,") AppleWebKit/603.1.30 (KHTML, like Gecko) Mobile/14E8301 MicroMessenger/6.6.0 MiniGame NetType/WIFI Language/").concat(mn),Sn={platform:vn,language:mn,appVersion:"5.0 (".concat(On,") AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1"),userAgent:En},jn={mark:function(e){return null},clearMeasures:function(e){return null},clearMarks:function(e){return null},measure:function(e,t,n){return{duration:0}},now:function(){}},An=0,kn=0;function Cn(e){var t=Date.now(),n=Math.max(An+23,t);return kn=setTimeout((function(){e(An=n)}),n-t),kn}function Tn(e){var t=on();return t.requestAnimationFrame?t.requestAnimationFrame(e):Cn(e)}function Mn(e){var t=on();return t.cancelAnimationFrame?t.cancelAnimationFrame(e):clearTimeout(e)}var Pn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(Ve["a"])(this,e),0!=t.indexOf("http://")&&0!=t.indexOf("https://")?this.href=n+t:this.href=t}return Object(He["a"])(e,null,[{key:"createObjectURL",value:function(e){var t=e.buffers[0],n=e.type,r=In(t),i="data:".concat(n,";base64, ");return i+r}}]),e}();function In(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return ft(t)}var Rn={GCCSO_SHADER_BINARY_FJ:37472,_3DC_XY_AMD:34810,_3DC_X_AMD:34809,ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_PROGRAM_EXT:33369,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALL_COMPLETED_NV:34034,ALL_SHADER_BITS_EXT:4294967295,ALPHA:6406,ALPHA16F_EXT:34844,ALPHA32F_EXT:34838,ALPHA8_EXT:32828,ALPHA8_OES:32828,ALPHA_BITS:3413,ALPHA_TEST_FUNC_QCOM:3009,ALPHA_TEST_QCOM:3008,ALPHA_TEST_REF_QCOM:3010,ALREADY_SIGNALED_APPLE:37146,ALWAYS:519,AMD_compressed_3DC_texture:1,AMD_compressed_ATC_texture:1,AMD_performance_monitor:1,AMD_program_binary_Z400:1,ANGLE_depth_texture:1,ANGLE_framebuffer_blit:1,ANGLE_framebuffer_multisample:1,ANGLE_instanced_arrays:1,ANGLE_pack_reverse_row_order:1,ANGLE_program_binary:1,ANGLE_texture_compression_dxt3:1,ANGLE_texture_compression_dxt5:1,ANGLE_texture_usage:1,ANGLE_translated_shader_source:1,ANY_SAMPLES_PASSED_CONSERVATIVE_EXT:36202,ANY_SAMPLES_PASSED_EXT:35887,APPLE_copy_texture_levels:1,APPLE_framebuffer_multisample:1,APPLE_rgb_422:1,APPLE_sync:1,APPLE_texture_format_BGRA8888:1,APPLE_texture_max_level:1,ARM_mali_program_binary:1,ARM_mali_shader_binary:1,ARM_rgba8:1,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATC_RGBA_EXPLICIT_ALPHA_AMD:35987,ATC_RGBA_INTERPOLATED_ALPHA_AMD:34798,ATC_RGB_AMD:35986,ATTACHED_SHADERS:35717,BACK:1029,BGRA8_EXT:37793,BGRA_EXT:32993,BGRA_IMG:32993,BINNING_CONTROL_HINT_QCOM:36784,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BUFFER:33504,BUFFER_ACCESS_OES:35003,BUFFER_MAPPED_OES:35004,BUFFER_MAP_POINTER_OES:35005,BUFFER_OBJECT_EXT:37201,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_BORDER_NV:33069,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_ATTACHMENT0_NV:36064,COLOR_ATTACHMENT10_NV:36074,COLOR_ATTACHMENT11_NV:36075,COLOR_ATTACHMENT12_NV:36076,COLOR_ATTACHMENT13_NV:36077,COLOR_ATTACHMENT14_NV:36078,COLOR_ATTACHMENT15_NV:36079,COLOR_ATTACHMENT1_NV:36065,COLOR_ATTACHMENT2_NV:36066,COLOR_ATTACHMENT3_NV:36067,COLOR_ATTACHMENT4_NV:36068,COLOR_ATTACHMENT5_NV:36069,COLOR_ATTACHMENT6_NV:36070,COLOR_ATTACHMENT7_NV:36071,COLOR_ATTACHMENT8_NV:36072,COLOR_ATTACHMENT9_NV:36073,COLOR_ATTACHMENT_EXT:37104,COLOR_BUFFER_BIT:16384,COLOR_BUFFER_BIT0_QCOM:1,COLOR_BUFFER_BIT1_QCOM:2,COLOR_BUFFER_BIT2_QCOM:4,COLOR_BUFFER_BIT3_QCOM:8,COLOR_BUFFER_BIT4_QCOM:16,COLOR_BUFFER_BIT5_QCOM:32,COLOR_BUFFER_BIT6_QCOM:64,COLOR_BUFFER_BIT7_QCOM:128,COLOR_CLEAR_VALUE:3106,COLOR_EXT:6144,COLOR_WRITEMASK:3107,COMPARE_REF_TO_TEXTURE_EXT:34894,COMPILE_STATUS:35713,COMPRESSED_RGBA_ASTC_10x10_KHR:37819,COMPRESSED_RGBA_ASTC_10x5_KHR:37816,COMPRESSED_RGBA_ASTC_10x6_KHR:37817,COMPRESSED_RGBA_ASTC_10x8_KHR:37818,COMPRESSED_RGBA_ASTC_12x10_KHR:37820,COMPRESSED_RGBA_ASTC_12x12_KHR:37821,COMPRESSED_RGBA_ASTC_4x4_KHR:37808,COMPRESSED_RGBA_ASTC_5x4_KHR:37809,COMPRESSED_RGBA_ASTC_5x5_KHR:37810,COMPRESSED_RGBA_ASTC_6x5_KHR:37811,COMPRESSED_RGBA_ASTC_6x6_KHR:37812,COMPRESSED_RGBA_ASTC_8x5_KHR:37813,COMPRESSED_RGBA_ASTC_8x6_KHR:37814,COMPRESSED_RGBA_ASTC_8x8_KHR:37815,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGBA_PVRTC_2BPPV2_IMG:37175,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_4BPPV2_IMG:37176,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_ANGLE:33778,COMPRESSED_RGBA_S3TC_DXT5_ANGLE:33779,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:37853,COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:37847,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_NV:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_NV:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_NV:35919,COMPRESSED_SRGB_S3TC_DXT1_NV:35916,COMPRESSED_TEXTURE_FORMATS:34467,CONDITION_SATISFIED_APPLE:37148,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_FLAG_DEBUG_BIT:2,CONTEXT_ROBUST_ACCESS_EXT:37107,COUNTER_RANGE_AMD:35777,COUNTER_TYPE_AMD:35776,COVERAGE_ALL_FRAGMENTS_NV:36565,COVERAGE_ATTACHMENT_NV:36562,COVERAGE_AUTOMATIC_NV:36567,COVERAGE_BUFFERS_NV:36563,COVERAGE_BUFFER_BIT_NV:32768,COVERAGE_COMPONENT4_NV:36561,COVERAGE_COMPONENT_NV:36560,COVERAGE_EDGE_FRAGMENTS_NV:36566,COVERAGE_SAMPLES_NV:36564,CPU_OPTIMIZED_QCOM:36785,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_QUERY_EXT:34917,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DEBUG_CALLBACK_FUNCTION:33348,DEBUG_CALLBACK_USER_PARAM:33349,DEBUG_GROUP_STACK_DEPTH:33389,DEBUG_LOGGED_MESSAGES:37189,DEBUG_NEXT_LOGGED_MESSAGE_LENGTH:33347,DEBUG_OUTPUT:37600,DEBUG_OUTPUT_SYNCHRONOUS:33346,DEBUG_SEVERITY_HIGH:37190,DEBUG_SEVERITY_LOW:37192,DEBUG_SEVERITY_MEDIUM:37191,DEBUG_SEVERITY_NOTIFICATION:33387,DEBUG_SOURCE_API:33350,DEBUG_SOURCE_APPLICATION:33354,DEBUG_SOURCE_OTHER:33355,DEBUG_SOURCE_SHADER_COMPILER:33352,DEBUG_SOURCE_THIRD_PARTY:33353,DEBUG_SOURCE_WINDOW_SYSTEM:33351,DEBUG_TYPE_DEPRECATED_BEHAVIOR:33357,DEBUG_TYPE_ERROR:33356,DEBUG_TYPE_MARKER:33384,DEBUG_TYPE_OTHER:33361,DEBUG_TYPE_PERFORMANCE:33360,DEBUG_TYPE_POP_GROUP:33386,DEBUG_TYPE_PORTABILITY:33359,DEBUG_TYPE_PUSH_GROUP:33385,DEBUG_TYPE_UNDEFINED_BEHAVIOR:33358,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH24_STENCIL8_OES:35056,DEPTH_ATTACHMENT:36096,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_BUFFER_BIT0_QCOM:256,DEPTH_BUFFER_BIT1_QCOM:512,DEPTH_BUFFER_BIT2_QCOM:1024,DEPTH_BUFFER_BIT3_QCOM:2048,DEPTH_BUFFER_BIT4_QCOM:4096,DEPTH_BUFFER_BIT5_QCOM:8192,DEPTH_BUFFER_BIT6_QCOM:16384,DEPTH_BUFFER_BIT7_QCOM:32768,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_COMPONENT16_NONLINEAR_NV:36396,DEPTH_COMPONENT16_OES:33189,DEPTH_COMPONENT24_OES:33190,DEPTH_COMPONENT32_OES:33191,DEPTH_EXT:6145,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_OES:34041,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DMP_shader_binary:1,DONT_CARE:4352,DRAW_BUFFER0_NV:34853,DRAW_BUFFER10_NV:34863,DRAW_BUFFER11_NV:34864,DRAW_BUFFER12_NV:34865,DRAW_BUFFER13_NV:34866,DRAW_BUFFER14_NV:34867,DRAW_BUFFER15_NV:34868,DRAW_BUFFER1_NV:34854,DRAW_BUFFER2_NV:34855,DRAW_BUFFER3_NV:34856,DRAW_BUFFER4_NV:34857,DRAW_BUFFER5_NV:34858,DRAW_BUFFER6_NV:34859,DRAW_BUFFER7_NV:34860,DRAW_BUFFER8_NV:34861,DRAW_BUFFER9_NV:34862,DRAW_BUFFER_EXT:3073,DRAW_FRAMEBUFFER_ANGLE:36009,DRAW_FRAMEBUFFER_APPLE:36009,DRAW_FRAMEBUFFER_BINDING_ANGLE:36006,DRAW_FRAMEBUFFER_BINDING_APPLE:36006,DRAW_FRAMEBUFFER_BINDING_NV:36006,DRAW_FRAMEBUFFER_NV:36009,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,ES_VERSION_2_0:1,ETC1_RGB8_OES:36196,ETC1_SRGB8_NV:35054,EXTENSIONS:7939,EXT_blend_minmax:1,EXT_color_buffer_half_float:1,EXT_debug_label:1,EXT_debug_marker:1,EXT_discard_framebuffer:1,EXT_map_buffer_range:1,EXT_multi_draw_arrays:1,EXT_multisampled_render_to_texture:1,EXT_multiview_draw_buffers:1,EXT_occlusion_query_boolean:1,EXT_read_format_bgra:1,EXT_robustness:1,EXT_sRGB:1,EXT_separate_shader_objects:1,EXT_shader_framebuffer_fetch:1,EXT_shader_texture_lod:1,EXT_shadow_samplers:1,EXT_texture_compression_dxt1:1,EXT_texture_filter_anisotropic:1,EXT_texture_format_BGRA8888:1,EXT_texture_rg:1,EXT_texture_storage:1,EXT_texture_type_2_10_10_10_REV:1,EXT_unpack_subimage:1,FALSE:0,FASTEST:4353,FENCE_CONDITION_NV:34036,FENCE_STATUS_NV:34035,FIXED:5132,FJ_shader_binary_GCCSO:1,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAGMENT_SHADER_BIT_EXT:2,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,FRAGMENT_SHADER_DISCARDS_SAMPLES_EXT:35410,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_ANGLE:37795,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_3D_ZOFFSET_OES:36052,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_SAMPLES_EXT:36204,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_ANGLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_APPLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_EXT:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_IMG:37172,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_NV:36182,FRAMEBUFFER_UNDEFINED_OES:33305,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GPU_OPTIMIZED_QCOM:36786,GREATER:516,GREEN_BITS:3411,GUILTY_CONTEXT_RESET_EXT:33363,HALF_FLOAT_OES:36193,HIGH_FLOAT:36338,HIGH_INT:36341,IMG_multisampled_render_to_texture:1,IMG_program_binary:1,IMG_read_format:1,IMG_shader_binary:1,IMG_texture_compression_pvrtc:1,IMG_texture_compression_pvrtc2:1,IMPLEMENTATION_COLOR_READ_FORMAT:35739,IMPLEMENTATION_COLOR_READ_TYPE:35738,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INNOCENT_CONTEXT_RESET_EXT:33364,INT:5124,INT_10_10_10_2_OES:36343,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,KHR_debug:1,KHR_texture_compression_astc_ldr:1,LEFT:1030,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOSE_CONTEXT_ON_RESET_EXT:33362,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE16F_EXT:34846,LUMINANCE32F_EXT:34840,LUMINANCE4_ALPHA4_OES:32835,LUMINANCE8_ALPHA8_EXT:32837,LUMINANCE8_ALPHA8_OES:32837,LUMINANCE8_EXT:32832,LUMINANCE8_OES:32832,LUMINANCE_ALPHA:6410,LUMINANCE_ALPHA16F_EXT:34847,LUMINANCE_ALPHA32F_EXT:34841,MALI_PROGRAM_BINARY_ARM:36705,MALI_SHADER_BINARY_ARM:36704,MAP_FLUSH_EXPLICIT_BIT_EXT:16,MAP_INVALIDATE_BUFFER_BIT_EXT:8,MAP_INVALIDATE_RANGE_BIT_EXT:4,MAP_READ_BIT_EXT:1,MAP_UNSYNCHRONIZED_BIT_EXT:32,MAP_WRITE_BIT_EXT:2,MAX_3D_TEXTURE_SIZE_OES:32883,MAX_COLOR_ATTACHMENTS_NV:36063,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_DEBUG_GROUP_STACK_DEPTH:33388,MAX_DEBUG_LOGGED_MESSAGES:37188,MAX_DEBUG_MESSAGE_LENGTH:37187,MAX_DRAW_BUFFERS_NV:34852,MAX_EXT:32776,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_LABEL_LENGTH:33512,MAX_MULTIVIEW_BUFFERS_EXT:37106,MAX_RENDERBUFFER_SIZE:34024,MAX_SAMPLES_ANGLE:36183,MAX_SAMPLES_APPLE:36183,MAX_SAMPLES_EXT:36183,MAX_SAMPLES_IMG:37173,MAX_SAMPLES_NV:36183,MAX_SERVER_WAIT_TIMEOUT_APPLE:37137,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIN_EXT:32775,MIRRORED_REPEAT:33648,MULTISAMPLE_BUFFER_BIT0_QCOM:16777216,MULTISAMPLE_BUFFER_BIT1_QCOM:33554432,MULTISAMPLE_BUFFER_BIT2_QCOM:67108864,MULTISAMPLE_BUFFER_BIT3_QCOM:134217728,MULTISAMPLE_BUFFER_BIT4_QCOM:268435456,MULTISAMPLE_BUFFER_BIT5_QCOM:536870912,MULTISAMPLE_BUFFER_BIT6_QCOM:1073741824,MULTISAMPLE_BUFFER_BIT7_QCOM:2147483648,MULTIVIEW_EXT:37105,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NO_RESET_NOTIFICATION_EXT:33377,NUM_COMPRESSED_TEXTURE_FORMATS:34466,NUM_PROGRAM_BINARY_FORMATS_OES:34814,NUM_SHADER_BINARY_FORMATS:36345,NV_coverage_sample:1,NV_depth_nonlinear:1,NV_draw_buffers:1,NV_draw_instanced:1,NV_fbo_color_attachments:1,NV_fence:1,NV_framebuffer_blit:1,NV_framebuffer_multisample:1,NV_generate_mipmap_sRGB:1,NV_instanced_arrays:1,NV_read_buffer:1,NV_read_buffer_front:1,NV_read_depth:1,NV_read_depth_stencil:1,NV_read_stencil:1,NV_sRGB_formats:1,NV_shadow_samplers_array:1,NV_shadow_samplers_cube:1,NV_texture_border_clamp:1,NV_texture_compression_s3tc_update:1,NV_texture_npot_2D_mipmap:1,OBJECT_TYPE_APPLE:37138,OES_EGL_image:1,OES_EGL_image_external:1,OES_compressed_ETC1_RGB8_texture:1,OES_compressed_paletted_texture:1,OES_depth24:1,OES_depth32:1,OES_depth_texture:1,OES_element_index_uint:1,OES_fbo_render_mipmap:1,OES_fragment_precision_high:1,OES_get_program_binary:1,OES_mapbuffer:1,OES_packed_depth_stencil:1,OES_required_internalformat:1,OES_rgb8_rgba8:1,OES_standard_derivatives:1,OES_stencil1:1,OES_stencil4:1,OES_surfaceless_context:1,OES_texture_3D:1,OES_texture_float:1,OES_texture_float_linear:1,OES_texture_half_float:1,OES_texture_half_float_linear:1,OES_texture_npot:1,OES_vertex_array_object:1,OES_vertex_half_float:1,OES_vertex_type_10_10_10_2:1,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,PACK_REVERSE_ROW_ORDER_ANGLE:37796,PALETTE4_R5_G6_B5_OES:35730,PALETTE4_RGB5_A1_OES:35732,PALETTE4_RGB8_OES:35728,PALETTE4_RGBA4_OES:35731,PALETTE4_RGBA8_OES:35729,PALETTE8_R5_G6_B5_OES:35735,PALETTE8_RGB5_A1_OES:35737,PALETTE8_RGB8_OES:35733,PALETTE8_RGBA4_OES:35736,PALETTE8_RGBA8_OES:35734,PERCENTAGE_AMD:35779,PERFMON_GLOBAL_MODE_QCOM:36768,PERFMON_RESULT_AMD:35782,PERFMON_RESULT_AVAILABLE_AMD:35780,PERFMON_RESULT_SIZE_AMD:35781,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,PROGRAM:33506,PROGRAM_BINARY_ANGLE:37798,PROGRAM_BINARY_FORMATS_OES:34815,PROGRAM_BINARY_LENGTH_OES:34625,PROGRAM_OBJECT_EXT:35648,PROGRAM_PIPELINE_BINDING_EXT:33370,PROGRAM_PIPELINE_OBJECT_EXT:35407,PROGRAM_SEPARABLE_EXT:33368,QCOM_alpha_test:1,QCOM_binning_control:1,QCOM_driver_control:1,QCOM_extended_get:1,QCOM_extended_get2:1,QCOM_perfmon_global_mode:1,QCOM_tiled_rendering:1,QCOM_writeonly_rendering:1,QUERY:33507,QUERY_OBJECT_EXT:37203,QUERY_RESULT_AVAILABLE_EXT:34919,QUERY_RESULT_EXT:34918,R16F_EXT:33325,R32F_EXT:33326,R8_EXT:33321,READ_BUFFER_EXT:3074,READ_BUFFER_NV:3074,READ_FRAMEBUFFER_ANGLE:36008,READ_FRAMEBUFFER_APPLE:36008,READ_FRAMEBUFFER_BINDING_ANGLE:36010,READ_FRAMEBUFFER_BINDING_APPLE:36010,READ_FRAMEBUFFER_BINDING_NV:36010,READ_FRAMEBUFFER_NV:36008,RED_BITS:3410,RED_EXT:6403,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_SAMPLES_ANGLE:36011,RENDERBUFFER_SAMPLES_APPLE:36011,RENDERBUFFER_SAMPLES_EXT:36011,RENDERBUFFER_SAMPLES_IMG:37171,RENDERBUFFER_SAMPLES_NV:36011,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,RENDER_DIRECT_TO_FRAMEBUFFER_QCOM:36787,REPEAT:10497,REPLACE:7681,REQUIRED_TEXTURE_IMAGE_UNITS_OES:36200,RESET_NOTIFICATION_STRATEGY_EXT:33366,RG16F_EXT:33327,RG32F_EXT:33328,RG8_EXT:33323,RGB:6407,RGB10_A2_EXT:32857,RGB10_EXT:32850,RGB16F_EXT:34843,RGB32F_EXT:34837,RGB565:36194,RGB565_OES:36194,RGB5_A1:32855,RGB5_A1_OES:32855,RGB8_OES:32849,RGBA:6408,RGBA16F_EXT:34842,RGBA32F_EXT:34836,RGBA4:32854,RGBA4_OES:32854,RGBA8_OES:32856,RGB_422_APPLE:35359,RG_EXT:33319,RIGHT:1031,SAMPLER:33510,SAMPLER_2D:35678,SAMPLER_2D_ARRAY_SHADOW_NV:36292,SAMPLER_2D_SHADOW_EXT:35682,SAMPLER_3D_OES:35679,SAMPLER_CUBE:35680,SAMPLER_CUBE_SHADOW_NV:36293,SAMPLER_EXTERNAL_OES:36198,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SGX_BINARY_IMG:35850,SGX_PROGRAM_BINARY_IMG:37168,SHADER:33505,SHADER_BINARY_DMP:37456,SHADER_BINARY_FORMATS:36344,SHADER_BINARY_VIV:36804,SHADER_COMPILER:36346,SHADER_OBJECT_EXT:35656,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SIGNALED_APPLE:37145,SLUMINANCE8_ALPHA8_NV:35909,SLUMINANCE8_NV:35911,SLUMINANCE_ALPHA_NV:35908,SLUMINANCE_NV:35910,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,SRGB8_ALPHA8_EXT:35907,SRGB8_NV:35905,SRGB_ALPHA_EXT:35906,SRGB_EXT:35904,STACK_OVERFLOW:1283,STACK_UNDERFLOW:1284,STATE_RESTORE:35804,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_BUFFER_BIT0_QCOM:65536,STENCIL_BUFFER_BIT1_QCOM:131072,STENCIL_BUFFER_BIT2_QCOM:262144,STENCIL_BUFFER_BIT3_QCOM:524288,STENCIL_BUFFER_BIT4_QCOM:1048576,STENCIL_BUFFER_BIT5_QCOM:2097152,STENCIL_BUFFER_BIT6_QCOM:4194304,STENCIL_BUFFER_BIT7_QCOM:8388608,STENCIL_CLEAR_VALUE:2961,STENCIL_EXT:6146,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX1_OES:36166,STENCIL_INDEX4_OES:36167,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,SYNC_CONDITION_APPLE:37139,SYNC_FENCE_APPLE:37142,SYNC_FLAGS_APPLE:37141,SYNC_FLUSH_COMMANDS_BIT_APPLE:1,SYNC_GPU_COMMANDS_COMPLETE_APPLE:37143,SYNC_OBJECT_APPLE:35411,SYNC_STATUS_APPLE:37140,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE2:33986,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE3:33987,TEXTURE30:34014,TEXTURE31:34015,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE_2D:3553,TEXTURE_3D_OES:32879,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_3D_OES:32874,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_BINDING_EXTERNAL_OES:36199,TEXTURE_BORDER_COLOR_NV:4100,TEXTURE_COMPARE_FUNC_EXT:34893,TEXTURE_COMPARE_MODE_EXT:34892,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_DEPTH_QCOM:35796,TEXTURE_EXTERNAL_OES:36197,TEXTURE_FORMAT_QCOM:35798,TEXTURE_HEIGHT_QCOM:35795,TEXTURE_IMAGE_VALID_QCOM:35800,TEXTURE_IMMUTABLE_FORMAT_EXT:37167,TEXTURE_INTERNAL_FORMAT_QCOM:35797,TEXTURE_MAG_FILTER:10240,TEXTURE_MAX_ANISOTROPY_EXT:34046,TEXTURE_MAX_LEVEL_APPLE:33085,TEXTURE_MIN_FILTER:10241,TEXTURE_NUM_LEVELS_QCOM:35801,TEXTURE_OBJECT_VALID_QCOM:35803,TEXTURE_SAMPLES_IMG:37174,TEXTURE_TARGET_QCOM:35802,TEXTURE_TYPE_QCOM:35799,TEXTURE_USAGE_ANGLE:37794,TEXTURE_WIDTH_QCOM:35794,TEXTURE_WRAP_R_OES:32882,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TIMEOUT_EXPIRED_APPLE:37147,TIMEOUT_IGNORED_APPLE:0x10000000000000000,TRANSLATED_SHADER_SOURCE_LENGTH_ANGLE:37792,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,TRUE:1,UNKNOWN_CONTEXT_RESET_EXT:33365,UNPACK_ALIGNMENT:3317,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_PIXELS:3316,UNPACK_SKIP_ROWS:3315,UNSIGNALED_APPLE:37144,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_INT64_AMD:35778,UNSIGNED_INT_10_10_10_2_OES:36342,UNSIGNED_INT_24_8_OES:34042,UNSIGNED_INT_2_10_10_10_REV_EXT:33640,UNSIGNED_NORMALIZED_EXT:35863,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_1_5_5_5_REV_EXT:33638,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_4_4_4_4_REV_EXT:33637,UNSIGNED_SHORT_4_4_4_4_REV_IMG:33637,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,UNSIGNED_SHORT_8_8_APPLE:34234,UNSIGNED_SHORT_8_8_REV_APPLE:34235,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ARRAY_BINDING_OES:34229,VERTEX_ARRAY_OBJECT_EXT:37204,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,VERTEX_ATTRIB_ARRAY_DIVISOR_NV:35070,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VERTEX_SHADER_BIT_EXT:1,VIEWPORT:2978,VIV_shader_binary:1,WAIT_FAILED_APPLE:37149,WRITEONLY_RENDERING_QCOM:34851,WRITE_ONLY_OES:35001,Z400_BINARY_AMD:34624,ZERO:0,RASTERIZER_DISCARD:35977,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444},Ln={};function Dn(e){var t=Nn();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Nn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Fn=new Map,zn=new Map,Bn=new Map;var Un=function(e){Object(et["a"])(n,e);var t=Dn(n);function n(){var e;return Object(Ve["a"])(this,n),e=t.call(this),e.onabort=null,e.onerror=null,e.onload=null,e.onloadstart=null,e.onprogress=null,e.ontimeout=null,e.onloadend=null,e.onreadystatechange=null,e.readyState=0,e.response=null,e.responseText=null,e._responseType="text",e.responseXML=null,e.status=0,e.statusText="",e.upload={},e.withCredentials=!1,Fn.set("requestHeader",{"content-type":"application/x-www-form-urlencoded"}),e}return Object(He["a"])(n,[{key:"responseType",set:function(e){this._responseType=e}},{key:"abort",value:function(){var e=Bn.get("requestTask");e&&e.abort()}},{key:"getAllResponseHeaders",value:function(){var e=zn.get("responseHeader");return Object.keys(e).map((function(t){return"".concat(t,": ").concat(e[t])})).join("\n")}},{key:"getResponseHeader",value:function(e){return zn.get("responseHeader")[e]}},{key:"open",value:function(e,t,n){this._method=e,this._url=t}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){}},{key:"setRequestHeader",value:function(e,t){var n=Fn.get("requestHeader");n[e]=t,Fn.set("requestHeader",n)}},{key:"addEventListener",value:function(e,t){var n=this;"function"===typeof t&&(this["on"+e]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.target=e.target||n,t.call(n,e)})}},{key:"removeEventListener",value:function(e,t){this["on"+e]===t&&(this["on"+e]=null)}}]),n}(wt);Un.UNSEND=0,Un.OPENED=1,Un.HEADERS_RECEIVED=2,Un.LOADING=3,Un.DONE=4;function Vn(e){return function(t){t.type=e,hn.dispatchEvent(t)}}Vn("mousedown"),Vn("mousemove"),Vn("mouseup");function Hn(e){var t=Gn();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Gn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Wn=function(e){Object(et["a"])(n,e);var t=Hn(n);function n(e){var r;return Object(Ve["a"])(this,n),r=t.call(this,e),r.target=on(),r.currentTarget=on(),r}return Object(He["a"])(n)}(mt),qn=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","pageX","pageY","timeStamp"],Zn=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,0,0,0],Yn="touch";function Xn(e,t,n){for(var r=new Wn(e),i=0;i<qn.length;i++){var o=qn[i];r[o]=t[o]||Zn[i]}return r.type=e,r.target=on(),r.currentTarget=on(),r.buttons=Kn(e),r.which=r.buttons,r.pointerId=(t.identifier||0)+2,r.bubbles=!0,r.cancelable=!0,r.button=0,r.width=2*(t.radiusX||.5),r.height=2*(t.radiusY||.5),r.pressure=t.force||.5,r.isPrimary=Qn(t),r.pointerType=Yn,r.altKey=n.altKey,r.ctrlKey=n.ctrlKey,r.metaKey=n.metaKey,r.shiftKey=n.shiftKey,n.preventDefault&&(r.preventDefault=function(){n.preventDefault()}),r}function Kn(e){var t=0;return"touchstart"!==e&&"touchmove"!==e&&"pointerdown"!==e&&"pointermove"!==e||(t=1),t}var $n=null;function Qn(e){return $n===e.identifier}function Jn(e){null===$n&&($n=e.identifier)}function er(e){$n===e.identifier&&($n=null)}function tr(e){return function(t){for(var n=t.changedTouches,r=0;r<n.length;r++){var i=n[r];0===r&&"pointerdown"===e?Jn(i):"pointerup"!==e&&"pointercancel"!==e||er(i);var o=Xn(e,i,t);hn.dispatchEvent(o)}}}tr("pointerdown"),tr("pointermove"),tr("pointerup");function nr(e){var t=rr();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function rr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var ir=function(e){Object(et["a"])(n,e);var t=nr(n);function n(e){var r;return Object(Ve["a"])(this,n),r=t.call(this,e),r.touches=[],r.targetTouches=[],r.changedTouches=[],r.target=on(),r.currentTarget=on(),r}return Object(He["a"])(n)}(mt);function or(e){var t=e||{},n=t.x,r=void 0===n?0:n,i=t.y,o=void 0===i?0:i,a=t.clientX,s=void 0===a?0:a,u=t.clientY,c=void 0===u?0:u;-1!==Object.keys(e).indexOf("x")?(e.pageX=e.clientX=r,e.pageY=e.clientY=o):(e.x=s,e.y=c)}function ar(e){return function(t){var n=new ir(e);n.changedTouches=t.changedTouches,n.touches=t.touches,n.targetTouches=Array.prototype.slice.call(t.touches),n.timeStamp=t.timeStamp,n.changedTouches.forEach((function(e){return or(e)})),n.touches.forEach((function(e){return or(e)})),n.targetTouches.forEach((function(e){return or(e)})),hn.dispatchEvent(n)}}function sr(e){return function(t){t.type=e,hn.dispatchEvent(t)}}ar("touchstart"),ar("touchmove"),ar("touchend"),sr("mapCameaParams");var ur=!1;function cr(e){ur=e}var lr="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,fr="undefined"!==typeof wx&&null!==wx&&("undefined"!==typeof wx.request||"undefined"!==typeof wx.miniProgram),pr=(lr||fr)&&ur,hr={atob:lt,btoa:ft,devicePixelRatio:vt,Blob:pt,document:hn,Element:Pt,Event:mt,EventTarget:wt,HTMLCanvasElement:gn,HTMLElement:Kt,HTMLMediaElement:Jt,HTMLVideoElement:nn,Image:an,ImageData:yn,navigator:Sn,Node:St,requestAnimationFrame:Tn,cancelAnimationFrame:Mn,screen:Nt,XMLHttpRequest:Un,performance:jn,URL:Pn,WebGLRenderingContext:Rn,WebGL2RenderingContext:Ln,addEventListener:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};hn.addEventListener(e,t,n)},removeEventListener:function(e,t,n){hn.removeEventListener(e,t)},dispatchEvent:function(e){hn.dispatchEvent(e)},innerWidth:Nt.availWidth,innerHeight:Nt.availHeight,setTimeout:setTimeout,clearTimeout:clearTimeout,setInterval:setInterval,clearInterval:clearInterval},dr=pr?hr:ht["a"],vr=pr?Un:ht["a"].XMLHttpRequest;pr||ht["a"].location;function mr(e){var t=gr();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function gr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var yr=function(e){Object(et["a"])(n,e);var t=mr(n);function n(e,r,i,o){var a;return Object(Ve["a"])(this,n),a=t.call(this,"AJAXError: ".concat(r," (").concat(e,"): ").concat(i)),a.status=e,a.statusText=r,a.url=i,a.body=o,a}return Object(He["a"])(n)}(st(Error));function br(e,t){var n=new vr,r=Array.isArray(e.url)?e.url[0]:e.url;for(var i in n.open(e.method||"GET",r,!0),"arrayBuffer"===e.type&&(n.responseType="arraybuffer"),e.headers)e.headers.hasOwnProperty(i)&&n.setRequestHeader(i,e.headers[i]);return"json"===e.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===e.credentials,n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var i=n.response;if("json"===e.type)try{i=JSON.parse(n.response)}catch(a){return t(a)}t(null,i,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"),n)}else{var o=new Blob([n.response],{type:n.getResponseHeader("Content-Type")});t(new yr(n.status,n.statusText,r.toString(),o))}},n.send(e.body),n}function _r(e){return new Promise((function(t,n){br(e,(function(e,r,i,o,a){e?n({err:e,data:null,xhr:a}):t({err:null,data:r,cacheControl:i,expires:o,xhr:a})}))}))}function xr(e,t){return br(e,t)}var wr=function(e,t){return xr(Object(N["a"])(Object(N["a"])({},e),{},{type:"json"}),t)},Or=function(e,t){return xr(Object(N["a"])(Object(N["a"])({},e),{},{type:"arrayBuffer"}),t)};var Er="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Sr(e,t){var n=new dr.Image,r=dr.URL||dr.webkitURL;n.crossOrigin="anonymous",n.onload=function(){t(null,n),r.revokeObjectURL(n.src),n.onload=null,window.requestAnimationFrame((function(){n.src=Er}))},n.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var i=new Blob([new Uint8Array(e)],{type:"image/png"});n.src=e.byteLength?r.createObjectURL(i):Er}function jr(e,t){var n=new Blob([new Uint8Array(e)],{type:"image/png"});createImageBitmap(n).then((function(e){t(null,e)}))["catch"]((function(e){t(new Error("Could not load image because of ".concat(e.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))}))}var Ar=function(e,t,n){var r=function(e,r){if(e)t(e);else if(r){var i="function"===typeof createImageBitmap,o=n?n(r):r;i?jr(o,t):Sr(o,t)}};return"json"===e.type?wr(e,r):Or(e,r)},kr=function(e,t){var n="function"===typeof createImageBitmap;n?jr(e,t):Sr(e,t)},Cr=function(e){return e["CENTER"]="center",e["TOP"]="top",e["TOP-LEFT"]="top-left",e["TOP-RIGHT"]="top-right",e["BOTTOM"]="bottom",e["BOTTOM-LEFT"]="bottom-left",e["BOTTOM-RIGHT"]="bottom-right",e["LEFT"]="left",e["RIGHT"]="right",e}({}),Tr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Mr(e,t,n){var r=e.classList;for(var i in Tr)Tr.hasOwnProperty(i)&&r.remove("l7-".concat(n,"-anchor-").concat(i));r.add("l7-".concat(n,"-anchor-").concat(t))}var Pr=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function Ir(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Rr(){}var Lr=.7,Dr=1/Lr,Nr="\\s*([+-]?\\d+)\\s*",Fr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",zr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Br=/^#([0-9a-f]{3,8})$/,Ur=new RegExp("^rgb\\("+[Nr,Nr,Nr]+"\\)$"),Vr=new RegExp("^rgb\\("+[zr,zr,zr]+"\\)$"),Hr=new RegExp("^rgba\\("+[Nr,Nr,Nr,Fr]+"\\)$"),Gr=new RegExp("^rgba\\("+[zr,zr,zr,Fr]+"\\)$"),Wr=new RegExp("^hsl\\("+[Fr,zr,zr]+"\\)$"),qr=new RegExp("^hsla\\("+[Fr,zr,zr,Fr]+"\\)$"),Zr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Yr(){return this.rgb().formatHex()}function Xr(){return si(this).formatHsl()}function Kr(){return this.rgb().formatRgb()}function $r(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Br.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Qr(t):3===n?new ni(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Jr(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Jr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Ur.exec(e))?new ni(t[1],t[2],t[3],1):(t=Vr.exec(e))?new ni(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Hr.exec(e))?Jr(t[1],t[2],t[3],t[4]):(t=Gr.exec(e))?Jr(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Wr.exec(e))?ai(t[1],t[2]/100,t[3]/100,1):(t=qr.exec(e))?ai(t[1],t[2]/100,t[3]/100,t[4]):Zr.hasOwnProperty(e)?Qr(Zr[e]):"transparent"===e?new ni(NaN,NaN,NaN,0):null}function Qr(e){return new ni(e>>16&255,e>>8&255,255&e,1)}function Jr(e,t,n,r){return r<=0&&(e=t=n=NaN),new ni(e,t,n,r)}function ei(e){return e instanceof Rr||(e=$r(e)),e?(e=e.rgb(),new ni(e.r,e.g,e.b,e.opacity)):new ni}function ti(e,t,n,r){return 1===arguments.length?ei(e):new ni(e,t,n,null==r?1:r)}function ni(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function ri(){return"#"+oi(this.r)+oi(this.g)+oi(this.b)}function ii(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(1===e?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function oi(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function ai(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ci(e,t,n,r)}function si(e){if(e instanceof ci)return new ci(e.h,e.s,e.l,e.opacity);if(e instanceof Rr||(e=$r(e)),!e)return new ci;if(e instanceof ci)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new ci(a,s,u,e.opacity)}function ui(e,t,n,r){return 1===arguments.length?si(e):new ci(e,t,n,null==r?1:r)}function ci(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function li(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function fi(e){var t=$r(e),n=[0,0,0,0];return null!=t&&(n[0]=t.r/255,n[1]=t.g/255,n[2]=t.b/255,n[3]=t.opacity),n}function pi(e){var t=e&&e[0],n=e&&e[1],r=e&&e[2],i=t+256*n+65536*r-1;return i}function hi(e){return[e+1&255,e+1>>8&255,e+1>>8>>8&255]}function di(e){var t=dr.document.createElement("canvas"),n=t.getContext("2d");t.width=256,t.height=1;for(var r=null,i=n.createLinearGradient(0,0,256,1),o=e.positions[0],a=e.positions[e.positions.length-1],s=0;s<e.colors.length;++s){var u=(e.positions[s]-o)/(a-o);i.addColorStop(u,e.colors[s])}if(n.fillStyle=i,n.fillRect(0,0,256,1),pr)return r=new Uint8ClampedArray(n.getImageData(0,0,256,1).data),t=null,n=null,{data:r,width:256,height:1};r=n.getImageData(0,0,256,1).data;for(var c=n.createImageData(256,1),l=0;l<c.data.length;l+=4)c.data[l+0]=r[l+0],c.data[l+1]=r[l+1],c.data[l+2]=r[l+2],c.data[l+3]=r[l+3];return t=null,n=null,c}function vi(e,t){var n=dr.document.createElement("canvas"),r=n.getContext("2d");n.width=256,n.height=1;for(var i=r.createLinearGradient(0,0,256,1),o=t[1]-t[0],a=0;a<e.colors.length;++a){var s=Math.max((e.positions[a]-t[0])/o,0);i.addColorStop(s,e.colors[a])}r.fillStyle=i,r.fillRect(0,0,256,1);var u=r.getImageData(0,0,256,1).data,c=bi(r,u);return n=null,r=null,c}function mi(e){var t=dr.document.createElement("canvas"),n=t.getContext("2d");t.width=256,t.height=1;var r=n.createImageData(256,1);return r.data.fill(0),e.positions.forEach((function(t,n){var i=fi(e.colors[n]);r.data[4*t+0]=255*i[0],r.data[4*t+1]=255*i[1],r.data[4*t+2]=255*i[2],r.data[4*t+3]=255*i[3]})),t=null,n=null,r}function gi(e){var t=dr.document.createElement("canvas"),n=t.getContext("2d");n.globalAlpha=1,t.width=256,t.height=1;for(var r=256/e.colors.length,i=0;i<e.colors.length;i++)n.beginPath(),n.lineWidth=2,n.strokeStyle=e.colors[i],n.moveTo(i*r,0),n.lineTo((i+1)*r,0),n.stroke();var o=n.getImageData(0,0,256,1).data,a=bi(n,o);return t=null,n=null,a}function yi(e,t){var n=dr.document.createElement("canvas"),r=n.getContext("2d");r.globalAlpha=1,n.width=256,n.height=1;var i=t[1]-t[0];e.positions.length-e.colors.length!==1&&console.warn("positions \u7684\u6570\u5b57\u4e2a\u6570\u5e94\u5f53\u6bd4 colors \u7684\u6837\u5f0f\u591a\u4e00\u4e2a,poisitions \u7684\u9996\u5c3e\u503c\u4e00\u822c\u4e3a\u6570\u636e\u7684\u6700\u5927\u6700\u65b0\u503c");for(var o=0;o<e.colors.length;o++)r.beginPath(),r.lineWidth=2,r.strokeStyle=e.colors[o],r.moveTo((e.positions[o]-t[0])/i*255,0),r.lineTo((e.positions[o+1]-t[0])/i*255,0),r.stroke();var a=r.getImageData(0,0,256,1).data,s=bi(r,a);return n=null,r=null,s}function bi(e,t){for(var n=e.createImageData(256,1),r=0;r<n.data.length;r+=4)n.data[r+0]=t[r+0],n.data[r+1]=t[r+1],n.data[r+2]=t[r+2],n.data[r+3]=t[r+3];return n}function _i(e){switch(e.type){case"cat":return[0,255];default:return[0,1]}}Pr(Rr,$r,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Yr,formatHex:Yr,formatHsl:Xr,formatRgb:Kr,toString:Kr}),Pr(ni,ti,Ir(Rr,{brighter:function(e){return e=null==e?Dr:Math.pow(Dr,e),new ni(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Lr:Math.pow(Lr,e),new ni(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ri,formatHex:ri,formatRgb:ii,toString:ii})),Pr(ci,ui,Ir(Rr,{brighter:function(e){return e=null==e?Dr:Math.pow(Dr,e),new ci(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Lr:Math.pow(Lr,e),new ci(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ni(li(e>=240?e-240:e+120,i,r),li(e,i,r),li(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(1===e?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var xi={BACK:1029,FRONT:1028};function wi(e){switch(e){case"GAODE1.x":return xi.BACK;case"GAODE2.x":return xi.BACK;case"MAPBOX":return xi.FRONT;case"SIMPLE":return xi.FRONT;case"GLOBEL":return xi.BACK;case"DEBAULT":return xi.FRONT;default:return xi.FRONT}}var Oi=n("ODXe"),Ei=n("LvDl");function Si(e){var t=e;return"string"===typeof e&&(t=dr.document.getElementById(e)),t}function ji(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Ai(e){return ji(e).split(/\s+/)}function ki(e){var t,n,r=null===dr||void 0===dr||null===(t=dr.document)||void 0===t||null===(n=t.documentElement)||void 0===n?void 0:n.style;if(!r)return e[0];for(var i in e)if(e[i]&&e[i]in r)return e[i];return e[0]}function Ci(e,t,n){var r=dr.document.createElement(e);return t&&(r.className=t||""),n&&n.appendChild(r),r}function Ti(e){var t=e.parentNode;t&&t.removeChild(e)}function Mi(e,t){if(void 0!==e.classList)for(var n=Ai(t),r=0,i=n.length;r<i;r++)e.classList.add(n[r]);else if(!Ii(e,t)){var o=Li(e);Ri(e,(o?o+" ":"")+t)}}function Pi(e,t){if(void 0!==e.classList){var n=Ai(t);n.forEach((function(t){e.classList.remove(t)}))}else Ri(e,ji((" "+Li(e)+" ").replace(" "+t+" "," ")))}function Ii(e,t){if(void 0!==e.classList)return e.classList.contains(t);var n=Li(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function Ri(e,t){e instanceof HTMLElement?e.className=t:e.className.baseVal=t}function Li(e){return e instanceof SVGElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function Di(e){while(e&&e.firstChild)e.removeChild(e.firstChild)}var Ni=ki(["transform","WebkitTransform"]);function Fi(e,t){e.style[Ni]=t}function zi(){if("function"===typeof Event)dr.dispatchEvent(new Event("resize"));else{var e=dr.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,dr,0),dr.dispatchEvent(e)}}function Bi(e){var t=["padding: "+(e.height/2-8)+"px "+e.width/2+"px;","line-height: "+e.height+"px;","background-image: url("+e.toDataURL()+");"];console.log("%c\n",t.join(""))}function Ui(){var e,t=dr.document.querySelector('meta[name="viewport"]');if(!t)return 1;var n=null===(e=t.content)||void 0===e?void 0:e.split(","),r=n.find((function(e){var t=e.split("="),n=Object(Oi["a"])(t,1),r=n[0];return"initial-scale"===r}));return r?1*r.split("=")[1]:1}var Vi=Ui()<1?1:dr.devicePixelRatio;function Hi(e,t){e.setAttribute("style","".concat(e.style.cssText).concat(t))}function Gi(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e}))}function Wi(e,t){var n,r=Gi(null!==(n=e.getAttribute("style"))&&void 0!==n?n:""),i=Gi(t),o=Ei["pull"].apply(void 0,[r].concat(Object(D["a"])(i)));e.setAttribute("style",o.join(";"))}function qi(e){return Object.entries(e).map((function(e){var t=Object(Oi["a"])(e,2),n=t[0],r=t[1];return"".concat(n,": ").concat(r)})).join(";")}function Zi(e,t){return{left:e.left-t.left,top:e.top-t.top,right:t.left+t.width-e.left-e.width,bottom:t.top+t.height-e.top-e.height}}function Yi(e,t){e.checked=t,t?e.setAttribute("checked","true"):e.removeAttribute("checked")}function Xi(e){e.innerHTML=""}function Ki(e){e.setAttribute("draggable","false")}function $i(e,t){if("string"===typeof t){var n=document.createElement("div");n.innerHTML=t;while(n.firstChild)e.append(n.firstChild)}else Array.isArray(t)?e.append.apply(e,Object(D["a"])(t)):e.append(t)}function Qi(e){return"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap}function Ji(){return"function"===typeof importScripts}Ji();var eo=navigator.userAgent;eo.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),eo.indexOf("Android")>-1||eo.indexOf("Adr");function to(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=!0,r=0,i=t;r<i.length;r++){var o=i[r];if(e.indexOf(o)>0){n=!1;break}}return n}function no(e,t){e.forEach((function(e){t[e]&&(t[e]=t[e].bind(t))}))}function ro(e){var t=[1/0,1/0,-1/0,-1/0];return $(e,(function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])})),t}ro["default"]=ro;var io=ro;function oo(e){return"number"===typeof e}var ao=2*Math.PI*6378137/2;function so(e,t){var n=Object(Oi["a"])(t,4),r=n[0],i=n[1],o=n[2],a=n[3];return e.lng>r&&e.lng<=o&&e.lat>i&&e.lat<=a}function uo(e){var t=[1/0,1/0,-1/0,-1/0];return e.forEach((function(e){var n=e.coordinates;co(t,n)})),t}function co(e,t){return Array.isArray(t[0])?t.forEach((function(t){co(e,t)})):(e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])),e}function lo(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{enable:!0,decimal:1};e=ho(e,t);var r=e[0],i=e[1],o=r*ao/180,a=Math.log(Math.tan((90+i)*Math.PI/360))/(Math.PI/180);return a=a*ao/180,n.enable&&(o=Number(o.toFixed(n.decimal)),a=Number(a.toFixed(n.decimal))),3===e.length?[o,a,e[2]]:[o,a]}function fo(e){if(void 0===e||null===e)throw new Error("lng is required");return(e>180||e<-180)&&(e%=360,e>180&&(e=-360+e),e<-180&&(e=360+e),0===e&&(e=0)),e}function po(e){if(void 0===e||null===e)throw new Error("lat is required");return(e>90||e<-90)&&(e%=180,e>90&&(e=-180+e),e<-90&&(e=180+e),0===e&&(e=0)),e}function ho(e,t){if(!1===t)return e;var n=fo(e[0]),r=po(e[1]);return r>85&&(r=85),r<-85&&(r=-85),3===e.length?[n,r,e[2]]:[n,r]}function vo(e){var t=85.0511287798,n=Math.max(Math.min(t,e[1]),-t),r=256<<20,i=Math.PI/180,o=e[0]*i,a=n*i;a=Math.log(Math.tan(Math.PI/4+a/2));var s=.5/Math.PI,u=.5,c=-.5/Math.PI;return i=.5,o=r*(s*o+u),a=r*(c*a+i),[Math.floor(o),Math.floor(a)]}function mo(e,t){var n=85.0511287798,r=Math.PI/180,i=6378137;return t=Math.max(Math.min(n,t),-n),e*=r,t*=r,t=Math.log(Math.tan(Math.PI/4+t/2)),[e*i,t*i]}function go(e,t,n){var r=Y(t[1]-e[1]),i=Y(t[0]-e[0]),o=Y(e[1]),a=Y(t[1]),s=Math.pow(Math.sin(r/2),2)+Math.pow(Math.sin(i/2),2)*Math.cos(o)*Math.cos(a);return Z(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)),"meters")}function yo(e,t){var n=Math.abs(e[1][1]-e[0][1])*t,r=Math.abs(e[1][0]-e[0][0])*t;return[[e[0][0]-r,e[0][1]-n],[e[1][0]+r,e[1][1]+n]]}function bo(e,t){return e[0][0]<=t[0][0]&&e[0][1]<=t[0][1]&&e[1][0]>=t[1][0]&&e[1][1]>=t[1][1]}function _o(e){return[[e[0],e[1]],[e[2],e[3]]]}function xo(e){var t=wo(e,[0,0]);return[e[0]/t,e[1]/t]}function wo(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function Oo(e){if(oo(e[0]))return e;if(oo(e[0][0]))throw new Error("\u5f53\u524d\u6570\u636e\u4e0d\u652f\u6301\u6807\u6ce8");if(oo(e[0][0][0])){var t=e,n=0,r=0,i=0;return t.forEach((function(e){e.forEach((function(e){n+=e[0],r+=e[1],i++}))})),[n/i,r/i,0]}throw new Error("\u5f53\u524d\u6570\u636e\u4e0d\u652f\u6301\u6807\u6ce8")}function Eo(e){for(var t=e[0],n=e[1],r=e[0],i=e[1],o=0,a=0,s=0,u=0;u<e.length;u+=2){var c=e[u],l=e[u+1];c&&l&&(t=Math.max(c,t),n=Math.max(l,n),r=Math.min(c,r),i=Math.min(l,i),o+=c,a+=l,s++)}return{center:[o/s,a/s],radius:Math.sqrt(Math.pow(t-r,2)+Math.pow(n-i,2))/2}}function So(e){return io(W([G(e)]))}function jo(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)}))}var Ao=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,n=arguments.length>1?arguments[1]:void 0;Object(Ve["a"])(this,e),this.limit=t,this.destroy=n||this.defaultDestroy,this.order=[],this.clear()}return Object(He["a"])(e,[{key:"clear",value:function(){var e=this;this.order.forEach((function(t){e["delete"](t)})),this.cache={},this.order=[]}},{key:"get",value:function(e){var t=this.cache[e];return t&&(this.deleteOrder(e),this.appendOrder(e)),t}},{key:"set",value:function(e,t){this.cache[e]?(this["delete"](e),this.cache[e]=t,this.appendOrder(e)):(Object.keys(this.cache).length===this.limit&&this["delete"](this.order[0]),this.cache[e]=t,this.appendOrder(e))}},{key:"delete",value:function(e){var t=this.cache[e];t&&(this.deleteCache(e),this.deleteOrder(e),this.destroy(t,e))}},{key:"deleteCache",value:function(e){delete this.cache[e]}},{key:"deleteOrder",value:function(e){var t=this.order.findIndex((function(t){return t===e}));t>=0&&this.order.splice(t,1)}},{key:"appendOrder",value:function(e){this.order.push(e)}},{key:"defaultDestroy",value:function(e,t){return null}}]),e}();function ko(e){if(0===e.length)throw new Error("max requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]>t&&(t=e[n]);return 1*t}function Co(e){if(0===e.length)throw new Error("min requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]<t&&(t=e[n]);return 1*t}function To(e){if(0===e.length)return 0;for(var t=1*e[0],n=1;n<e.length;n++)t+=1*e[n];return t}function Mo(e){if(0===e.length)throw new Error("mean requires at least one data point");return To(e)/e.length}function Po(e){if(0===e.length)throw new Error("mean requires at least one data point");if(e.length<3)return e[0];e.sort();for(var t=e[0],n=NaN,r=0,i=1,o=1;o<e.length+1;o++)e[o]!==t?(i>r&&(r=i,n=t),i=1,t=e[o]):i++;return 1*n}var Io={min:Co,max:ko,mean:Mo,sum:To,mode:Po};function Ro(e,t){return e.map((function(e){return e[t]}))}function Lo(e,t){return Io[e](t)}function Do(e,t){void 0===t&&(t={});var n=Number(e[0]),r=Number(e[1]),i=Number(e[2]),o=Number(e[3]);if(6===e.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[n,r],s=[n,o],u=[i,o],c=[i,r];return H([[a,c,u,s,a]],t.properties,{bbox:e,id:t.id})}var No,Fo=n("uhBA"),zo=n.n(Fo),Bo=function(e){return e["Realtime"]="realtime",e["Overlap"]="overlap",e["Replace"]="replace",e}({}),Uo=function(e){return e["Loading"]="Loading",e["Loaded"]="Loaded",e["Failure"]="Failure",e["Cancelled"]="Cancelled",e}({}),Vo=0,Ho=1,Go=2;function Wo(e){e.forEach((function(e){e.isCurrent&&(e.isVisible=e.isLoaded)}))}function qo(e){e.forEach((function(e){e.properties.state=Vo})),e.forEach((function(e){e.isCurrent&&!Yo(e)&&Xo(e)})),e.forEach((function(e){e.isVisible=Boolean(e.properties.state&Go)}))}function Zo(e){e.forEach((function(e){e.properties.state=Vo})),e.forEach((function(e){e.isCurrent&&Yo(e)}));var t=e.slice().sort((function(e,t){return e.z-t.z}));t.forEach((function(e){e.isVisible=Boolean(e.properties.state&Go),e.children.length&&(e.isVisible||e.properties.state&Ho)?e.children.forEach((function(e){e.properties.state=Ho})):e.isCurrent&&Xo(e)}))}function Yo(e){while(e){if(e.isLoaded)return e.properties.state|=Go,!0;e=e.parent}return!1}function Xo(e){e.children.forEach((function(e){e.isLoaded?e.properties.state|=Go:Xo(e)}))}var Ko=[-1/0,-1/0,1/0,1/0],$o=.2,Qo=5,Jo=(No={},Object(Ge["a"])(No,Bo.Realtime,Wo),Object(Ge["a"])(No,Bo.Overlap,qo),Object(Ge["a"])(No,Bo.Replace,Zo),No),ea=function(){};function ta(e,t,n){var r=Math.floor((e+180)/360*Math.pow(2,n)),i=Math.floor((1-Math.log(Math.tan(t*Math.PI/180)+1/Math.cos(t*Math.PI/180))/Math.PI)/2*Math.pow(2,n));return[r,i]}function na(e,t,n){var r=e/Math.pow(2,n)*360-180,i=Math.PI-2*Math.PI*t/Math.pow(2,n),o=180/Math.PI*Math.atan(.5*(Math.exp(i)-Math.exp(-i)));return[r,o]}var ra=function(e,t,n){var r=na(e,t,n),i=Object(Oi["a"])(r,2),o=i[0],a=i[1],s=na(e+1,t+1,n),u=Object(Oi["a"])(s,2),c=u[0],l=u[1];return[o,l,c,a]};function ia(e){var t=e.zoom,n=e.latLonBounds,r=e.maxZoom,i=void 0===r?1/0:r,o=e.minZoom,a=void 0===o?0:o,s=e.zoomOffset,u=void 0===s?0:s,c=e.extent,l=void 0===c?Ko:c,f=Math.ceil(t)+u;if(Number.isFinite(a)&&f<a)return[];Number.isFinite(i)&&f>i&&(f=i);for(var p=Object(Oi["a"])(n,4),h=p[0],d=p[1],v=p[2],m=p[3],g=[Math.max(h,l[0]),Math.max(d,l[1]),Math.min(v,l[2]),Math.min(m,l[3])],y=[],b=ta(g[0],g[1],f),_=Object(Oi["a"])(b,2),x=_[0],w=_[1],O=ta(g[2],g[3],f),E=Object(Oi["a"])(O,2),S=E[0],j=E[1],A=x;A<=S;A++)for(var k=j;k<=w;k++)y.push({x:A,y:k,z:f});var C=(S+x)/2,T=(w+j)/2,M=function(e,t){return Math.abs(e-C)+Math.abs(t-T)};return y.sort((function(e,t){return M(e.x,e.y)-M(t.x,t.y)})),y}var oa=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=Math.pow(2,n),o=i-1,a=i,s=e,u=t;return r&&(s<0?s+=a:s>o&&(s%=a)),{warpX:s,warpY:u}};function aa(e){var t=sa();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function sa(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var ua=function(e){Object(et["a"])(n,e);var t=aa(n);function n(e){var r;Object(Ve["a"])(this,n),r=t.call(this),Object(Ge["a"])(Object(gt["a"])(r),"tileSize",256),Object(Ge["a"])(Object(gt["a"])(r),"isVisible",!1),Object(Ge["a"])(Object(gt["a"])(r),"isCurrent",!1),Object(Ge["a"])(Object(gt["a"])(r),"isVisibleChange",!1),Object(Ge["a"])(Object(gt["a"])(r),"loadedLayers",0),Object(Ge["a"])(Object(gt["a"])(r),"isLayerLoaded",!1),Object(Ge["a"])(Object(gt["a"])(r),"isLoad",!1),Object(Ge["a"])(Object(gt["a"])(r),"isChildLoad",!1),Object(Ge["a"])(Object(gt["a"])(r),"parent",null),Object(Ge["a"])(Object(gt["a"])(r),"children",[]),Object(Ge["a"])(Object(gt["a"])(r),"data",null),Object(Ge["a"])(Object(gt["a"])(r),"properties",{}),Object(Ge["a"])(Object(gt["a"])(r),"loadDataId",0);var i=e.x,o=e.y,a=e.z,s=e.tileSize,u=e.warp,c=void 0===u||u;return r.x=i,r.y=o,r.z=a,r.warp=c||!0,r.tileSize=s,r}return Object(He["a"])(n,[{key:"isLoading",get:function(){return this.loadStatus===Uo.Loading}},{key:"isLoaded",get:function(){return this.loadStatus===Uo.Loaded}},{key:"isFailure",get:function(){return this.loadStatus===Uo.Failure}},{key:"setTileLayerLoaded",value:function(){this.isLayerLoaded=!0}},{key:"isCancelled",get:function(){return this.loadStatus===Uo.Cancelled}},{key:"isDone",get:function(){return[Uo.Loaded,Uo.Cancelled,Uo.Failure].includes(this.loadStatus)}},{key:"bounds",get:function(){return ra(this.x,this.y,this.z)}},{key:"bboxPolygon",get:function(){var e=Object(Oi["a"])(this.bounds,4),t=e[0],n=e[1],r=e[2],i=e[3],o=[(r-t)/2,(i-n)/2],a=Do(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:o,meta:"\n      ".concat(this.key,"\n      ")}});return a}},{key:"key",get:function(){var e="".concat(this.x,"_").concat(this.y,"_").concat(this.z);return e}},{key:"layerLoad",value:function(){this.loadedLayers++,this.emit("layerLoaded")}},{key:"loadData",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t){var n,r,i,o,a,s,u,c,l,f,p,h,d,v,m,g,y;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.getData,r=t.onLoad,i=t.onError,this.loadDataId++,o=this.loadDataId,this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=Uo.Loading,a=null,e.prev=7,u=this.x,c=this.y,l=this.z,f=this.bounds,p=this.tileSize,h=this.warp,d=oa(u,c,l,h),v=d.warpX,m=d.warpY,g=this.abortController.signal,y={x:v,y:m,z:l,bounds:f,tileSize:p,signal:g,warp:h},e.next=14,n(y,this);case 14:a=e.sent,e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](7),s=e.t0;case 20:if(o===this.loadDataId){e.next=22;break}return e.abrupt("return");case 22:if(!this.isCancelled||a){e.next=24;break}return e.abrupt("return");case 24:if(!s&&a){e.next=28;break}return this.loadStatus=Uo.Failure,i(s,this),e.abrupt("return");case 28:this.loadStatus=Uo.Loaded,this.data=a,r(this);case 31:case"end":return e.stop()}}),e,this,[[7,17]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"reloadData",value:function(e){this.isLoading&&this.abortLoad(),this.loadData(e)}},{key:"abortLoad",value:function(){this.isLoaded||this.isCancelled||(this.loadStatus=Uo.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}}]),n}(Fo["EventEmitter"]),ca=function(e,t){var n=_o(e),r=yo(n,t),i=900,o=85.0511287798065,a=[Math.max(r[0][0],-i),Math.max(r[0][1],-o),Math.min(r[1][0],i),Math.min(r[1][1],o)];return a},la=function(e,t){var n=_o(e),r=_o(t),i=bo(n,r);return i};function fa(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=pa(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function pa(e,t){if(e){if("string"===typeof e)return ha(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ha(e,t):void 0}}function ha(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function da(e){var t=va();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function va(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var ma=function(e){Object(et["a"])(n,e);var t=da(n);function n(e){var r;return Object(Ve["a"])(this,n),r=t.call(this),Object(Ge["a"])(Object(gt["a"])(r),"currentTiles",[]),Object(Ge["a"])(Object(gt["a"])(r),"cacheTiles",new Map),Object(Ge["a"])(Object(gt["a"])(r),"throttleUpdate",Object(Ei["throttle"])((function(e,t){r.update(e,t)}),16)),Object(Ge["a"])(Object(gt["a"])(r),"onTileLoad",(function(e){r.emit("tile-loaded",e),r.updateTileVisible()})),Object(Ge["a"])(Object(gt["a"])(r),"onTileError",(function(e,t){r.emit("tile-error",{error:e,tile:t}),r.updateTileVisible()})),Object(Ge["a"])(Object(gt["a"])(r),"onTileUnload",(function(e){r.emit("tile-unload",e)})),r.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:Ko,getTileData:ea,warp:!0,updateStrategy:Bo.Overlap},r.updateOptions(e),r}return Object(He["a"])(n,[{key:"isLoaded",get:function(){return this.currentTiles.every((function(e){return e.isDone}))}},{key:"tiles",get:function(){var e=Array.from(this.cacheTiles.values()).sort((function(e,t){return e.z-t.z}));return e}},{key:"updateOptions",value:function(e){var t=void 0===e.minZoom?this.options.minZoom:Math.ceil(e.minZoom),n=void 0===e.maxZoom?this.options.maxZoom:Math.floor(e.maxZoom);this.options=Object(N["a"])(Object(N["a"])(Object(N["a"])({},this.options),e),{},{minZoom:t,maxZoom:n})}},{key:"update",value:function(e,t){var n=this,r=Math.max(0,Math.ceil(e));if(!this.lastViewStates||this.lastViewStates.zoom!==r||!la(this.lastViewStates.latLonBoundsBuffer,t)){var i=ca(t,$o);this.lastViewStates={zoom:r,latLonBounds:t,latLonBoundsBuffer:i};var o=!1,a=this.getTileIndices(r,i).filter((function(e){return n.options.warp||e.x>=0&&e.x<Math.pow(2,r)}));this.currentTiles=a.map((function(e){var t=e.x,r=e.y,i=e.z,a=n.getTile(t,r,i);if(a){var s,u,c=(null===(s=a)||void 0===s?void 0:s.isFailure)||(null===(u=a)||void 0===u?void 0:u.isCancelled);return c&&a.loadData({getData:n.options.getTileData,onLoad:n.onTileLoad,onError:n.onTileError}),a}return a=n.createTile(t,r,i),o=!0,a})),o&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests()}}},{key:"reloadAll",value:function(){var e,t=fa(this.cacheTiles);try{for(t.s();!(e=t.n()).done;){var n=Object(Oi["a"])(e.value,2),r=n[0],i=n[1];if(!this.currentTiles.includes(i))return this.cacheTiles["delete"](r),void this.onTileUnload(i);this.onTileUnload(i),i.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}catch(o){t.e(o)}finally{t.f()}}},{key:"reloadTileById",value:function(e,t,n){var r=this.cacheTiles.get("".concat(t,",").concat(n,",").concat(e));r&&(this.onTileUnload(r),r.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}))}},{key:"reloadTileByLnglat",value:function(e,t,n){var r=this.getTileByLngLat(e,t,n);r&&this.reloadTileById(r.z,r.x,r.y)}},{key:"reloadTileByExtent",value:function(e,t){var n=this,r=this.getTileIndices(t,e);r.forEach((function(e){n.reloadTileById(e.z,e.x,e.y)}))}},{key:"pruneRequests",value:function(){var e,t=[],n=fa(this.cacheTiles.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;r.isLoading&&(r.isCurrent||r.isVisible||t.push(r))}}catch(o){n.e(o)}finally{n.f()}while(t.length>0){var i=t.shift();i.abortLoad()}}},{key:"getTileByLngLat",value:function(e,t,n){var r=this.options.zoomOffset,i=Math.ceil(n)+r,o=ta(e,t,i),a=this.tiles.filter((function(e){return e.key==="".concat(o[0],"_").concat(o[1],"_").concat(i)}));return a[0]}},{key:"clear",value:function(){var e,t=fa(this.cacheTiles.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;n.isLoading?n.abortLoad():this.onTileUnload(n)}}catch(r){t.e(r)}finally{t.f()}this.lastViewStates=void 0,this.cacheTiles.clear(),this.currentTiles=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners()}},{key:"updateTileVisible",value:function(){var e,t=this.options.updateStrategy,n=new Map,r=fa(this.cacheTiles.values());try{for(r.s();!(e=r.n()).done;){var i=e.value;n.set(i.key,i.isVisible),i.isCurrent=!1,i.isVisible=!1}}catch(l){r.e(l)}finally{r.f()}var o,a=fa(this.currentTiles);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.isCurrent=!0,s.isVisible=!0}}catch(l){a.e(l)}finally{a.f()}var u=Array.from(this.cacheTiles.values());"function"===typeof t?t(u):Jo[t](u);var c=!1;Array.from(this.cacheTiles.values()).forEach((function(e){e.isVisible!==n.get(e.key)?(e.isVisibleChange=!0,c=!0):e.isVisibleChange=!1})),c&&this.emit("tile-update")}},{key:"getTileIndices",value:function(e,t){var n=this.options,r=n.tileSize,i=n.extent,o=n.zoomOffset,a=Math.floor(this.options.maxZoom),s=Math.ceil(this.options.minZoom),u=ia({maxZoom:a,minZoom:s,zoomOffset:o,tileSize:r,zoom:e,latLonBounds:t,extent:i});return u}},{key:"getTileId",value:function(e,t,n){var r="".concat(e,",").concat(t,",").concat(n);return r}},{key:"getTile",value:function(e,t,n){var r=this.getTileId(e,t,n),i=this.cacheTiles.get(r);return i}},{key:"createTile",value:function(e,t,n){var r=this.getTileId(e,t,n),i=new ua({x:e,y:t,z:n,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(r,i),i.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),i}},{key:"resizeCacheTiles",value:function(){var e=Qo*this.currentTiles.length,t=this.cacheTiles.size>e;if(t){var n,r=fa(this.cacheTiles);try{for(r.s();!(n=r.n()).done;){var i=Object(Oi["a"])(n.value,2),o=i[0],a=i[1];if(a.isVisible||this.currentTiles.includes(a)||(this.cacheTiles["delete"](o),this.onTileUnload(a)),this.cacheTiles.size<=e)break}}catch(s){r.e(s)}finally{r.f()}}this.rebuildTileTree()}},{key:"rebuildTileTree",value:function(){var e,t=fa(this.cacheTiles.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;n.parent=null,n.children.length=0}}catch(s){t.e(s)}finally{t.f()}var r,i=fa(this.cacheTiles.values());try{for(i.s();!(r=i.n()).done;){var o=r.value,a=this.getNearestAncestor(o.x,o.y,o.z);o.parent=a,null!==a&&void 0!==a&&a.children&&a.children.push(o)}}catch(s){i.e(s)}finally{i.f()}}},{key:"getNearestAncestor",value:function(e,t,n){while(n>this.options.minZoom){e=Math.floor(e/2),t=Math.floor(t/2),n-=1;var r=this.getTile(e,t,n);if(r)return r}return null}}]),n}(zo.a);function ga(e){var t=[],n=/\{([a-z])-([a-z])\}/.exec(e);if(n){var r,i=n[1].charCodeAt(0),o=n[2].charCodeAt(0);for(r=i;r<=o;++r)t.push(e.replace(n[0],String.fromCharCode(r)));return t}if(n=/\{(\d+)-(\d+)\}/.exec(e),n){for(var a=parseInt(n[2],10),s=parseInt(n[1],10);s<=a;s++)t.push(e.replace(n[0],s.toString()));return t}return t.push(e),t}function ya(e,t){if(!e||!e.length)throw new Error("url is not allowed to be empty");var n=t.x,r=t.y,i=t.z,o=ga(e),a=Math.abs(n+r)%o.length,s=o[a];return s.replace(/\{x\}/g,n.toString()).replace(/\{y\}/g,r.toString()).replace(/\{z\}/g,i.toString()).replace(/\{bbox\}/g,ra(n,r,i).join(",")).replace(/\{-y\}/g,(Math.pow(2,i)-r-1).toString())}function ba(e,t){var n=t.x,r=t.y,i=t.z,o=t.layer,a=t.version,s=void 0===a?"1.0.0":a,u=t.style,c=void 0===u?"default":u,l=t.format,f=t.service,p=void 0===f?"WMTS":f,h=t.tileMatrixset,d="".concat(e,"&SERVICE=").concat(p,"&REQUEST=GetTile&VERSION=").concat(s,"&LAYER=").concat(o,"&STYLE=").concat(c,"&TILEMATRIXSET=").concat(h,"&FORMAT=").concat(l,"&TILECOL=").concat(n,"&TILEROW=").concat(r,"&TILEMATRIX=").concat(i);return d}function _a(e,t){if(!e)throw new Error(t||"web worker helper assertion failed.")}var xa={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,document:"undefined"!==typeof document&&document},wa=(xa.self||xa.window,xa.window||xa.self,xa.self||xa.window,xa.document,"undefined"!==typeof window&&"undefined"!==typeof window.orientation),Oa=function(){function e(e,t){var n=this;this.name=e,this.workerThread=t,this.isRunning=!0,this.resolve=function(){},this.reject=function(){},this.result=new Promise((function(e,t){n.resolve=e,n.reject=t}))}return e.prototype.postMessage=function(e,t){this.workerThread.postMessage({source:"Main thread",type:e,payload:t})},e.prototype.done=function(e){_a(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.resolve(e)},e.prototype.error=function(e){_a(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.reject(e)},e}(),Ea=Oa,Sa=new Map;function ja(e){_a(e.source&&!e.url||!e.source&&e.url);var t=Sa.get(e.source||e.url);return t||(e.url&&(t=Aa(e.url),Sa.set(e.url,t)),e.source&&(t=ka(e.source),Sa.set(e.source,t))),_a(t),t}function Aa(e){if(!e.startsWith("http"))return e;var t=Ca(e);return ka(t)}function ka(e){var t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function Ca(e){return"try {\n  importScripts('"+e+"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}"}function Ta(e,t,n){void 0===t&&(t=!0);var r=n||new Set;if(e){if(Ma(e))r.add(e);else if(Ma(e.buffer))r.add(e.buffer);else if(ArrayBuffer.isView(e));else if(t&&"object"===typeof e)for(var i in e)Ta(e[i],t,r)}else;return void 0===n?Array.from(r):[]}function Ma(e){return!!e&&(e instanceof ArrayBuffer||("undefined"!==typeof MessagePort&&e instanceof MessagePort||("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas)))}var Pa=function(){},Ia=function(){function e(e){this.terminated=!1,this.loadableURL="";var t=e.name,n=e.source,r=e.url;_a(n||r),this.name=t,this.source=n,this.url=r,this.onMessage=Pa,this.onError=function(e){return console.log(e)},this.worker=this.createBrowserWorker()}return e.isSupported=function(){return"undefined"!==typeof Worker},e.prototype.destroy=function(){this.onMessage=Pa,this.onError=Pa,this.worker.terminate(),this.terminated=!0},Object.defineProperty(e.prototype,"isRunning",{get:function(){return Boolean(this.onMessage)},enumerable:!1,configurable:!0}),e.prototype.postMessage=function(e,t){t=t||Ta(e),this.worker.postMessage(e,t)},e.prototype.getErrorFromErrorEvent=function(e){var t="Failed to load ";return t+="worker "+this.name+" from "+this.url+". ",e.message&&(t+=e.message+" in "),e.lineno&&(t+=":"+e.lineno+":"+e.colno),new Error(t)},e.prototype.createBrowserWorker=function(){var e=this;this.loadableURL=ja({source:this.source,url:this.url});var t=new Worker(this.loadableURL,{name:this.name});return t.onmessage=function(t){t.data?e.onMessage(t.data):e.onError(new Error("No data received"))},t.onerror=function(t){e.onError(e.getErrorFromErrorEvent(t)),e.terminated=!0},t.onmessageerror=function(t){return console.error("worker "+e.name+", message error: "+t)},t},e}(),Ra=Ia,La=function(){return La=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},La.apply(this,arguments)},Da=function(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r["throw"](e))}catch(t){o(t)}}function u(e){e.done?n(e.value):i(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Na=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return u([e,t])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Fa=function(){function e(e){this.name="unnamed",this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=function(){},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=e.source,this.url=e.url,this.setProps(e)}return e.prototype.destroy=function(){this.idleQueue.forEach((function(e){return e.destroy()})),this.isDestroyed=!0},e.prototype.setProps=function(e){this.props=La(La({},this.props),e),void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)},e.prototype.startJob=function(e,t,n){return void 0===t&&(t=function(e,t,n){return e.done(n)}),void 0===n&&(n=function(e,t){return e.error(t)}),Da(this,void 0,void 0,(function(){var r,i=this;return Na(this,(function(o){switch(o.label){case 0:return r=new Promise((function(r){return i.jobQueue.push({name:e,onMessage:t,onError:n,onStart:r}),i})),this.startQueuedJob(),[4,r];case 1:return[2,o.sent()]}}))}))},e.prototype.startQueuedJob=function(){return Da(this,void 0,void 0,(function(){var e,t,n;return Na(this,(function(r){switch(r.label){case 0:if(!this.jobQueue.length)return[2];if(e=this.getAvailableWorker(),!e)return[2];if(t=this.jobQueue.shift(),!t)return[3,4];this.onDebug({message:"Starting job",name:t.name,backlog:this.jobQueue.length,workerThread:e}),n=new Ea(t.name,e),e.onMessage=function(e){return t.onMessage(n,e.type,e.payload)},e.onError=function(e){return t.onError(n,e)},t.onStart(n),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,n.result];case 2:return r.sent(),[3,4];case 3:return this.returnWorkerToQueue(e),[7];case 4:return[2]}}))}))},e.prototype.returnWorkerToQueue=function(e){var t=this.isDestroyed||!this.reuseWorkers||this.count>this.getMaxConcurrency();t?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this.startQueuedJob()},e.prototype.getAvailableWorker=function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this.getMaxConcurrency()){this.count++;var e=this.name.toLowerCase()+" (#"+this.count+" of "+this.maxConcurrency+")";return new Ra({name:e,source:this.source,url:this.url})}return null},e.prototype.getMaxConcurrency=function(){return wa?this.maxMobileConcurrency:this.maxConcurrency},e}(),za=Fa,Ba=function(){return Ba=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ba.apply(this,arguments)},Ua=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Va={maxConcurrency:3,maxMobileConcurrency:1,onDebug:function(){},reuseWorkers:!0},Ha=function(){function e(e){this.workerPools=new Map,this.props=Ba({},Va),this.setProps(e),this.workerPools=new Map}return e.isSupported=function(){return Ra.isSupported()},e.getWorkerFarm=function(t){return void 0===t&&(t={}),e.workerFarm=e.workerFarm||new e({}),e.workerFarm.setProps(t),e.workerFarm},e.prototype.destroy=function(){var e,t;try{for(var n=Ua(this.workerPools.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.destroy()}}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=n["return"])&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.setProps=function(e){var t,n;this.props=Ba(Ba({},this.props),e);try{for(var r=Ua(this.workerPools.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.setProps(this.getWorkerPoolProps())}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.getWorkerPool=function(e){var t=e.name,n=e.source,r=e.url,i=this.workerPools.get(t);return i||(i=new za({name:t,source:n,url:r}),i.setProps(this.getWorkerPoolProps()),this.workerPools.set(t,i)),i},e.prototype.getWorkerPoolProps=function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}},e}(),Ga=Ha,Wa=new Map,qa=function(){function e(){}return Object.defineProperty(e,"onmessage",{set:function(e){self.onmessage=function(t){if(Ya(t)){var n=t.data,r=n.type,i=n.payload;e(r,i)}}},enumerable:!1,configurable:!0}),e.addEventListener=function(e){var t=Wa.get(e);t||(t=function(t){if(Ya(t)){var n=t.data,r=n.type,i=n.payload;e(r,i)}}),self.addEventListener("message",t)},e.removeEventListener=function(e){var t=Wa.get(e);Wa["delete"](e),self.removeEventListener("message",t)},e.postMessage=function(e,t){if(self){var n={source:"Worker thread",type:e,payload:t},r=Ta(t);self.postMessage(n,r)}},e}(),Za=qa;function Ya(e){var t=e.type,n=e.data;return"message"===t&&n&&"string"===typeof n.source&&"Main thread"===n.source}var Xa,Ka,$a=function(){function e(){this._values=[],this._settlers=[],this._closed=!1}return e.prototype[Symbol.asyncIterator]=function(){return this},e.prototype.push=function(e){return this.enqueue(e)},e.prototype.enqueue=function(e){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var t=this._settlers.shift();e instanceof Error?t.reject(e):t.resolve({value:e})}else this._values.push(e)},e.prototype.close=function(){while(this._settlers.length>0){var e=this._settlers.shift();e.resolve({done:!0})}this._closed=!0},e.prototype.next=function(){var e=this;if(this._values.length>0){var t=this._values.shift();return t instanceof Error?Promise.reject(t):Promise.resolve({done:!1,value:t})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0,value:void 0})}return new Promise((function(t,n){e._settlers.push({resolve:t,reject:n})}))},e}(),Qa=$a,Ja=function(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r["throw"](e))}catch(t){o(t)}}function u(e){e.done?n(e.value):i(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},es=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return u([e,t])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},ts=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"===typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){t=e[n](t),i(r,o,t.done,t.value)}))}}function i(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}},ns=0;function rs(e,t){var n=this;if("undefined"!==typeof self){var r={process:is};Za.onmessage=function(i,o){return Ja(n,void 0,void 0,(function(){var n,a,s,u,c,l,f,p,h,d,v;return es(this,(function(m){switch(m.label){case 0:switch(m.trys.push([0,19,,20]),n=i,n){case"process":return[3,1];case"process-in-batches":return[3,3];case"input-batch":return[3,16];case"input-done":return[3,17]}return[3,18];case 1:if(!e)throw new Error("Worker does not support atomic processing");return[4,e(o.input,o.options||{},r)];case 2:return a=m.sent(),Za.postMessage("done",{result:a}),[3,18];case 3:if(!t)throw new Error("Worker does not support batched processing");Xa=new Qa,Ka=o.options||{},s=t(Xa,Ka,r),m.label=4;case 4:m.trys.push([4,9,10,15]),u=ts(s),m.label=5;case 5:return[4,u.next()];case 6:if(c=m.sent(),c.done)return[3,8];l=c.value,Za.postMessage("output-batch",{result:l}),m.label=7;case 7:return[3,5];case 8:return[3,15];case 9:return f=m.sent(),d={error:f},[3,15];case 10:return m.trys.push([10,,13,14]),c&&!c.done&&(v=u["return"])?[4,v.call(u)]:[3,12];case 11:m.sent(),m.label=12;case 12:return[3,14];case 13:if(d)throw d.error;return[7];case 14:return[7];case 15:return Za.postMessage("done",{}),[3,18];case 16:return Xa.push(o.input),[3,18];case 17:return Xa.close(),[3,18];case 18:return[3,20];case 19:return p=m.sent(),h=p instanceof Error?p.message:"",Za.postMessage("error",{error:h}),[3,20];case 20:return[2]}}))}))}}}function is(e,t){return void 0===t&&(t={}),new Promise((function(n,r){var i=ns++,o=function e(t,o){if(o.id===i)switch(t){case"done":Za.removeEventListener(e),n(o.result);break;case"error":Za.removeEventListener(e),r(o.error);break;default:}};Za.addEventListener(o);var a={id:i,input:e,options:t};Za.postMessage("process",a)}))}function os(e){var t=e.color;return t&&t.length?t:[1,1,1,1]}function as(e,t,n){return 2===n.length?[n[0],n[1],0]:[n[0],n[1],n[2]]}function ss(e){var t=e.filter;return t?[1]:[0]}function us(e,t){return[t]}var cs=n("VmRL"),ls=n.n(cs),fs=1e-6,ps="undefined"!==typeof Float32Array?Float32Array:Array,hs=Math.random;Math.PI;function ds(){var e=new ps(4);return ps!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function vs(e){var t=new ps(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function ms(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function gs(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function ys(e,t,n,r){var i=new ps(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function bs(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function _s(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function xs(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*o-i*r;return a?(a=1/a,e[0]=o*a,e[1]=-r*a,e[2]=-i*a,e[3]=n*a,e):null}function ws(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e}function Os(e){return e[0]*e[3]-e[2]*e[1]}function Es(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],u=n[1],c=n[2],l=n[3];return e[0]=r*s+o*u,e[1]=i*s+a*u,e[2]=r*c+o*l,e[3]=i*c+a*l,e}function Ss(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+o*s,e[1]=i*u+a*s,e[2]=r*-s+o*u,e[3]=i*-s+a*u,e}function js(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],u=n[1];return e[0]=r*s,e[1]=i*s,e[2]=o*u,e[3]=a*u,e}function As(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e}function ks(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function Cs(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function Ts(e){return Math.hypot(e[0],e[1],e[2],e[3])}function Ms(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]}function Ps(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function Is(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function Rs(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function Ls(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=t[0],s=t[1],u=t[2],c=t[3];return Math.abs(n-a)<=fs*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=fs*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=fs*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=fs*Math.max(1,Math.abs(o),Math.abs(c))}function Ds(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function Ns(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}Math.hypot||(Math.hypot=function(){var e=0,t=arguments.length;while(t--)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var Fs=Es,zs=Is;function Bs(){var e=new ps(16);return ps!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Us(e){var t=new ps(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Vs(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Hs(e,t,n,r,i,o,a,s,u,c,l,f,p,h,d,v){var m=new ps(16);return m[0]=e,m[1]=t,m[2]=n,m[3]=r,m[4]=i,m[5]=o,m[6]=a,m[7]=s,m[8]=u,m[9]=c,m[10]=l,m[11]=f,m[12]=p,m[13]=h,m[14]=d,m[15]=v,m}function Gs(e,t,n,r,i,o,a,s,u,c,l,f,p,h,d,v,m){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=u,e[8]=c,e[9]=l,e[10]=f,e[11]=p,e[12]=h,e[13]=d,e[14]=v,e[15]=m,e}function Ws(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function qs(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Zs(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],p=t[10],h=t[11],d=t[12],v=t[13],m=t[14],g=t[15],y=n*s-r*a,b=n*u-i*a,_=n*c-o*a,x=r*u-i*s,w=r*c-o*s,O=i*c-o*u,E=l*v-f*d,S=l*m-p*d,j=l*g-h*d,A=f*m-p*v,k=f*g-h*v,C=p*g-h*m,T=y*C-b*k+_*A+x*j-w*S+O*E;return T?(T=1/T,e[0]=(s*C-u*k+c*A)*T,e[1]=(i*k-r*C-o*A)*T,e[2]=(v*O-m*w+g*x)*T,e[3]=(p*w-f*O-h*x)*T,e[4]=(u*j-a*C-c*S)*T,e[5]=(n*C-i*j+o*S)*T,e[6]=(m*_-d*O-g*b)*T,e[7]=(l*O-p*_+h*b)*T,e[8]=(a*k-s*j+c*E)*T,e[9]=(r*j-n*k-o*E)*T,e[10]=(d*w-v*_+g*y)*T,e[11]=(f*_-l*w-h*y)*T,e[12]=(s*S-a*A-u*E)*T,e[13]=(n*A-r*S+i*E)*T,e[14]=(v*b-d*x-m*y)*T,e[15]=(l*x-f*b+p*y)*T,e):null}function Ys(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],p=t[10],h=t[11],d=t[12],v=t[13],m=t[14],g=t[15];return e[0]=s*(p*g-h*m)-f*(u*g-c*m)+v*(u*h-c*p),e[1]=-(r*(p*g-h*m)-f*(i*g-o*m)+v*(i*h-o*p)),e[2]=r*(u*g-c*m)-s*(i*g-o*m)+v*(i*c-o*u),e[3]=-(r*(u*h-c*p)-s*(i*h-o*p)+f*(i*c-o*u)),e[4]=-(a*(p*g-h*m)-l*(u*g-c*m)+d*(u*h-c*p)),e[5]=n*(p*g-h*m)-l*(i*g-o*m)+d*(i*h-o*p),e[6]=-(n*(u*g-c*m)-a*(i*g-o*m)+d*(i*c-o*u)),e[7]=n*(u*h-c*p)-a*(i*h-o*p)+l*(i*c-o*u),e[8]=a*(f*g-h*v)-l*(s*g-c*v)+d*(s*h-c*f),e[9]=-(n*(f*g-h*v)-l*(r*g-o*v)+d*(r*h-o*f)),e[10]=n*(s*g-c*v)-a*(r*g-o*v)+d*(r*c-o*s),e[11]=-(n*(s*h-c*f)-a*(r*h-o*f)+l*(r*c-o*s)),e[12]=-(a*(f*m-p*v)-l*(s*m-u*v)+d*(s*p-u*f)),e[13]=n*(f*m-p*v)-l*(r*m-i*v)+d*(r*p-i*f),e[14]=-(n*(s*m-u*v)-a*(r*m-i*v)+d*(r*u-i*s)),e[15]=n*(s*p-u*f)-a*(r*p-i*f)+l*(r*u-i*s),e}function Xs(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],p=e[11],h=e[12],d=e[13],v=e[14],m=e[15],g=t*a-n*o,y=t*s-r*o,b=t*u-i*o,_=n*s-r*a,x=n*u-i*a,w=r*u-i*s,O=c*d-l*h,E=c*v-f*h,S=c*m-p*h,j=l*v-f*d,A=l*m-p*d,k=f*m-p*v;return g*k-y*A+b*j+_*S-x*E+w*O}function Ks(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],p=t[9],h=t[10],d=t[11],v=t[12],m=t[13],g=t[14],y=t[15],b=n[0],_=n[1],x=n[2],w=n[3];return e[0]=b*r+_*s+x*f+w*v,e[1]=b*i+_*u+x*p+w*m,e[2]=b*o+_*c+x*h+w*g,e[3]=b*a+_*l+x*d+w*y,b=n[4],_=n[5],x=n[6],w=n[7],e[4]=b*r+_*s+x*f+w*v,e[5]=b*i+_*u+x*p+w*m,e[6]=b*o+_*c+x*h+w*g,e[7]=b*a+_*l+x*d+w*y,b=n[8],_=n[9],x=n[10],w=n[11],e[8]=b*r+_*s+x*f+w*v,e[9]=b*i+_*u+x*p+w*m,e[10]=b*o+_*c+x*h+w*g,e[11]=b*a+_*l+x*d+w*y,b=n[12],_=n[13],x=n[14],w=n[15],e[12]=b*r+_*s+x*f+w*v,e[13]=b*i+_*u+x*p+w*m,e[14]=b*o+_*c+x*h+w*g,e[15]=b*a+_*l+x*d+w*y,e}function $s(e,t,n){var r,i,o,a,s,u,c,l,f,p,h,d,v=n[0],m=n[1],g=n[2];return t===e?(e[12]=t[0]*v+t[4]*m+t[8]*g+t[12],e[13]=t[1]*v+t[5]*m+t[9]*g+t[13],e[14]=t[2]*v+t[6]*m+t[10]*g+t[14],e[15]=t[3]*v+t[7]*m+t[11]*g+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],p=t[9],h=t[10],d=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=c,e[7]=l,e[8]=f,e[9]=p,e[10]=h,e[11]=d,e[12]=r*v+s*m+f*g+t[12],e[13]=i*v+u*m+p*g+t[13],e[14]=o*v+c*m+h*g+t[14],e[15]=a*v+l*m+d*g+t[15]),e}function Qs(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Js(e,t,n,r){var i,o,a,s,u,c,l,f,p,h,d,v,m,g,y,b,_,x,w,O,E,S,j,A,k=r[0],C=r[1],T=r[2],M=Math.hypot(k,C,T);return M<fs?null:(M=1/M,k*=M,C*=M,T*=M,i=Math.sin(n),o=Math.cos(n),a=1-o,s=t[0],u=t[1],c=t[2],l=t[3],f=t[4],p=t[5],h=t[6],d=t[7],v=t[8],m=t[9],g=t[10],y=t[11],b=k*k*a+o,_=C*k*a+T*i,x=T*k*a-C*i,w=k*C*a-T*i,O=C*C*a+o,E=T*C*a+k*i,S=k*T*a+C*i,j=C*T*a-k*i,A=T*T*a+o,e[0]=s*b+f*_+v*x,e[1]=u*b+p*_+m*x,e[2]=c*b+h*_+g*x,e[3]=l*b+d*_+y*x,e[4]=s*w+f*O+v*E,e[5]=u*w+p*O+m*E,e[6]=c*w+h*O+g*E,e[7]=l*w+d*O+y*E,e[8]=s*S+f*j+v*A,e[9]=u*S+p*j+m*A,e[10]=c*S+h*j+g*A,e[11]=l*S+d*j+y*A,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function eu(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*r,e[5]=a*i+l*r,e[6]=s*i+f*r,e[7]=u*i+p*r,e[8]=c*i-o*r,e[9]=l*i-a*r,e[10]=f*i-s*r,e[11]=p*i-u*r,e}function tu(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],c=t[8],l=t[9],f=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*r,e[1]=a*i-l*r,e[2]=s*i-f*r,e[3]=u*i-p*r,e[8]=o*r+c*i,e[9]=a*r+l*i,e[10]=s*r+f*i,e[11]=u*r+p*i,e}function nu(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],c=t[4],l=t[5],f=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*r,e[1]=a*i+l*r,e[2]=s*i+f*r,e[3]=u*i+p*r,e[4]=c*i-o*r,e[5]=l*i-a*r,e[6]=f*i-s*r,e[7]=p*i-u*r,e}function ru(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function iu(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ou(e,t,n){var r,i,o,a=n[0],s=n[1],u=n[2],c=Math.hypot(a,s,u);return c<fs?null:(c=1/c,a*=c,s*=c,u*=c,r=Math.sin(t),i=Math.cos(t),o=1-i,e[0]=a*a*o+i,e[1]=s*a*o+u*r,e[2]=u*a*o-s*r,e[3]=0,e[4]=a*s*o-u*r,e[5]=s*s*o+i,e[6]=u*s*o+a*r,e[7]=0,e[8]=a*u*o+s*r,e[9]=s*u*o-a*r,e[10]=u*u*o+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function au(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function su(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function uu(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function cu(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=r+r,u=i+i,c=o+o,l=r*s,f=r*u,p=r*c,h=i*u,d=i*c,v=o*c,m=a*s,g=a*u,y=a*c;return e[0]=1-(h+v),e[1]=f+y,e[2]=p-g,e[3]=0,e[4]=f-y,e[5]=1-(l+v),e[6]=d+m,e[7]=0,e[8]=p+g,e[9]=d-m,e[10]=1-(l+h),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function lu(e,t){var n=new ps(3),r=-t[0],i=-t[1],o=-t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=r*r+i*i+o*o+a*a;return f>0?(n[0]=2*(s*a+l*r+u*o-c*i)/f,n[1]=2*(u*a+l*i+c*r-s*o)/f,n[2]=2*(c*a+l*o+s*i-u*r)/f):(n[0]=2*(s*a+l*r+u*o-c*i),n[1]=2*(u*a+l*i+c*r-s*o),n[2]=2*(c*a+l*o+s*i-u*r)),cu(e,t,n),e}function fu(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function pu(e,t){var n=t[0],r=t[1],i=t[2],o=t[4],a=t[5],s=t[6],u=t[8],c=t[9],l=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(o,a,s),e[2]=Math.hypot(u,c,l),e}function hu(e,t){var n=new ps(3);pu(n,t);var r=1/n[0],i=1/n[1],o=1/n[2],a=t[0]*r,s=t[1]*i,u=t[2]*o,c=t[4]*r,l=t[5]*i,f=t[6]*o,p=t[8]*r,h=t[9]*i,d=t[10]*o,v=a+l+d,m=0;return v>0?(m=2*Math.sqrt(v+1),e[3]=.25*m,e[0]=(f-h)/m,e[1]=(p-u)/m,e[2]=(s-c)/m):a>l&&a>d?(m=2*Math.sqrt(1+a-l-d),e[3]=(f-h)/m,e[0]=.25*m,e[1]=(s+c)/m,e[2]=(p+u)/m):l>d?(m=2*Math.sqrt(1+l-a-d),e[3]=(p-u)/m,e[0]=(s+c)/m,e[1]=.25*m,e[2]=(f+h)/m):(m=2*Math.sqrt(1+d-a-l),e[3]=(s-c)/m,e[0]=(p+u)/m,e[1]=(f+h)/m,e[2]=.25*m),e}function du(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=t[3],u=i+i,c=o+o,l=a+a,f=i*u,p=i*c,h=i*l,d=o*c,v=o*l,m=a*l,g=s*u,y=s*c,b=s*l,_=r[0],x=r[1],w=r[2];return e[0]=(1-(d+m))*_,e[1]=(p+b)*_,e[2]=(h-y)*_,e[3]=0,e[4]=(p-b)*x,e[5]=(1-(f+m))*x,e[6]=(v+g)*x,e[7]=0,e[8]=(h+y)*w,e[9]=(v-g)*w,e[10]=(1-(f+d))*w,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function vu(e,t,n,r,i){var o=t[0],a=t[1],s=t[2],u=t[3],c=o+o,l=a+a,f=s+s,p=o*c,h=o*l,d=o*f,v=a*l,m=a*f,g=s*f,y=u*c,b=u*l,_=u*f,x=r[0],w=r[1],O=r[2],E=i[0],S=i[1],j=i[2],A=(1-(v+g))*x,k=(h+_)*x,C=(d-b)*x,T=(h-_)*w,M=(1-(p+g))*w,P=(m+y)*w,I=(d+b)*O,R=(m-y)*O,L=(1-(p+v))*O;return e[0]=A,e[1]=k,e[2]=C,e[3]=0,e[4]=T,e[5]=M,e[6]=P,e[7]=0,e[8]=I,e[9]=R,e[10]=L,e[11]=0,e[12]=n[0]+E-(A*E+T*S+I*j),e[13]=n[1]+S-(k*E+M*S+R*j),e[14]=n[2]+j-(C*E+P*S+L*j),e[15]=1,e}function mu(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,f=r*s,p=i*a,h=i*s,d=i*u,v=o*a,m=o*s,g=o*u;return e[0]=1-f-d,e[1]=l+g,e[2]=p-m,e[3]=0,e[4]=l-g,e[5]=1-c-d,e[6]=h+v,e[7]=0,e[8]=p+m,e[9]=h-v,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function gu(e,t,n,r,i,o,a){var s=1/(n-t),u=1/(i-r),c=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*u,e[10]=(a+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*c,e[15]=0,e}function yu(e,t,n,r,i){var o,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(o=1/(r-i),e[10]=(i+r)*o,e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e}var bu=yu;function _u(e,t,n,r,i){var o,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(o=1/(r-i),e[10]=i*o,e[14]=i*r*o):(e[10]=-1,e[14]=-r),e}function xu(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(a-s)*u*.5,e[9]=(i-o)*c*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function wu(e,t,n,r,i,o,a){var s=1/(t-n),u=1/(r-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(a+o)*c,e[15]=1,e}var Ou=wu;function Eu(e,t,n,r,i,o,a){var s=1/(t-n),u=1/(r-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=o*c,e[15]=1,e}function Su(e,t,n,r){var i,o,a,s,u,c,l,f,p,h,d=t[0],v=t[1],m=t[2],g=r[0],y=r[1],b=r[2],_=n[0],x=n[1],w=n[2];return Math.abs(d-_)<fs&&Math.abs(v-x)<fs&&Math.abs(m-w)<fs?Ws(e):(l=d-_,f=v-x,p=m-w,h=1/Math.hypot(l,f,p),l*=h,f*=h,p*=h,i=y*p-b*f,o=b*l-g*p,a=g*f-y*l,h=Math.hypot(i,o,a),h?(h=1/h,i*=h,o*=h,a*=h):(i=0,o=0,a=0),s=f*a-p*o,u=p*i-l*a,c=l*o-f*i,h=Math.hypot(s,u,c),h?(h=1/h,s*=h,u*=h,c*=h):(s=0,u=0,c=0),e[0]=i,e[1]=s,e[2]=l,e[3]=0,e[4]=o,e[5]=u,e[6]=f,e[7]=0,e[8]=a,e[9]=c,e[10]=p,e[11]=0,e[12]=-(i*d+o*v+a*m),e[13]=-(s*d+u*v+c*m),e[14]=-(l*d+f*v+p*m),e[15]=1,e)}function ju(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=r[0],u=r[1],c=r[2],l=i-n[0],f=o-n[1],p=a-n[2],h=l*l+f*f+p*p;h>0&&(h=1/Math.sqrt(h),l*=h,f*=h,p*=h);var d=u*p-c*f,v=c*l-s*p,m=s*f-u*l;return h=d*d+v*v+m*m,h>0&&(h=1/Math.sqrt(h),d*=h,v*=h,m*=h),e[0]=d,e[1]=v,e[2]=m,e[3]=0,e[4]=f*m-p*v,e[5]=p*d-l*m,e[6]=l*v-f*d,e[7]=0,e[8]=l,e[9]=f,e[10]=p,e[11]=0,e[12]=i,e[13]=o,e[14]=a,e[15]=1,e}function Au(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function ku(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function Cu(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function Tu(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function Mu(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function Pu(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function Iu(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Ru(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],p=e[10],h=e[11],d=e[12],v=e[13],m=e[14],g=e[15],y=t[0],b=t[1],_=t[2],x=t[3],w=t[4],O=t[5],E=t[6],S=t[7],j=t[8],A=t[9],k=t[10],C=t[11],T=t[12],M=t[13],P=t[14],I=t[15];return Math.abs(n-y)<=fs*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-b)<=fs*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-_)<=fs*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(o-x)<=fs*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-w)<=fs*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-O)<=fs*Math.max(1,Math.abs(s),Math.abs(O))&&Math.abs(u-E)<=fs*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(c-S)<=fs*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(l-j)<=fs*Math.max(1,Math.abs(l),Math.abs(j))&&Math.abs(f-A)<=fs*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(p-k)<=fs*Math.max(1,Math.abs(p),Math.abs(k))&&Math.abs(h-C)<=fs*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(d-T)<=fs*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(v-M)<=fs*Math.max(1,Math.abs(v),Math.abs(M))&&Math.abs(m-P)<=fs*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(g-I)<=fs*Math.max(1,Math.abs(g),Math.abs(I))}var Lu=Ks,Du=Tu;function Nu(){var e=new ps(2);return ps!=Float32Array&&(e[0]=0,e[1]=0),e}function Fu(e){var t=new ps(2);return t[0]=e[0],t[1]=e[1],t}function zu(e,t){var n=new ps(2);return n[0]=e,n[1]=t,n}function Bu(e,t){return e[0]=t[0],e[1]=t[1],e}function Uu(e,t,n){return e[0]=t,e[1]=n,e}function Vu(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function Hu(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function Gu(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function Wu(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function qu(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function Zu(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function Yu(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function Xu(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function Ku(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function $u(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function Qu(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function Ju(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.hypot(n,r)}function ec(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function tc(e){var t=e[0],n=e[1];return Math.hypot(t,n)}function nc(e){var t=e[0],n=e[1];return t*t+n*n}function rc(e,t){return e[0]=-t[0],e[1]=-t[1],e}function ic(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function oc(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e}function ac(e,t){return e[0]*t[0]+e[1]*t[1]}function sc(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}function uc(e,t,n,r){var i=t[0],o=t[1];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e}function cc(e,t){t=t||1;var n=2*hs()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}function lc(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e}function fc(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e}function pc(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e}function hc(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}function dc(e,t,n,r){var i=t[0]-n[0],o=t[1]-n[1],a=Math.sin(r),s=Math.cos(r);return e[0]=i*s-o*a+n[0],e[1]=i*a+o*s+n[1],e}function vc(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+o*o),s=a&&(n*i+r*o)/a;return Math.acos(Math.min(Math.max(s,-1),1))}function mc(e){return e[0]=0,e[1]=0,e}function gc(e){return"vec2("+e[0]+", "+e[1]+")"}function yc(e,t){return e[0]===t[0]&&e[1]===t[1]}function bc(e,t){var n=e[0],r=e[1],i=t[0],o=t[1];return Math.abs(n-i)<=fs*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=fs*Math.max(1,Math.abs(r),Math.abs(o))}var _c=tc,xc=Hu,wc=Gu,Oc=Wu,Ec=Ju,Sc=ec,jc=nc,Ac=function(){var e=Nu();return function(t,n,r,i,o,a){var s,u;for(n||(n=2),r||(r=0),u=i?Math.min(i*n+r,t.length):t.length,s=r;s<u;s+=n)e[0]=t[s],e[1]=t[s+1],o(e,e,a),t[s]=e[0],t[s+1]=e[1];return t}}();function kc(){var e=new ps(3);return ps!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Cc(e){var t=new ps(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Tc(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function Mc(e,t,n){var r=new ps(3);return r[0]=e,r[1]=t,r[2]=n,r}function Pc(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ic(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function Rc(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Lc(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Dc(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function Nc(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function Fc(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function zc(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function Bc(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function Uc(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function Vc(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function Hc(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Gc(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function Wc(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.hypot(n,r,i)}function qc(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function Zc(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function Yc(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Xc(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function Kc(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function $c(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Qc(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],u=n[2];return e[0]=i*u-o*s,e[1]=o*a-r*u,e[2]=r*s-i*a,e}function Jc(e,t,n,r){var i=t[0],o=t[1],a=t[2];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e}function el(e,t,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),l=a*(3-2*o);return e[0]=t[0]*s+n[0]*u+r[0]*c+i[0]*l,e[1]=t[1]*s+n[1]*u+r[1]*c+i[1]*l,e[2]=t[2]*s+n[2]*u+r[2]*c+i[2]*l,e}function tl(e,t,n,r,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,l=3*o*s,f=3*u*a,p=u*o;return e[0]=t[0]*c+n[0]*l+r[0]*f+i[0]*p,e[1]=t[1]*c+n[1]*l+r[1]*f+i[1]*p,e[2]=t[2]*c+n[2]*l+r[2]*f+i[2]*p,e}function nl(e,t){t=t||1;var n=2*hs()*Math.PI,r=2*hs()-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e}function rl(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e}function il(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e}function ol(e,t,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=t[0],u=t[1],c=t[2],l=i*c-o*u,f=o*s-r*c,p=r*u-i*s,h=i*p-o*f,d=o*l-r*p,v=r*f-i*l,m=2*a;return l*=m,f*=m,p*=m,h*=2,d*=2,v*=2,e[0]=s+l+h,e[1]=u+f+d,e[2]=c+p+v,e}function al(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function sl(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function ul(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function cl(e,t){var n=e[0],r=e[1],i=e[2],o=t[0],a=t[1],s=t[2],u=Math.sqrt(n*n+r*r+i*i),c=Math.sqrt(o*o+a*a+s*s),l=u*c,f=l&&$c(e,t)/l;return Math.acos(Math.min(Math.max(f,-1),1))}function ll(e){return e[0]=0,e[1]=0,e[2]=0,e}function fl(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function pl(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function hl(e,t){var n=e[0],r=e[1],i=e[2],o=t[0],a=t[1],s=t[2];return Math.abs(n-o)<=fs*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=fs*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=fs*Math.max(1,Math.abs(i),Math.abs(s))}var dl=Lc,vl=Dc,ml=Nc,gl=Wc,yl=qc,bl=Tc,_l=Zc,xl=function(){var e=kc();return function(t,n,r,i,o,a){var s,u;for(n||(n=3),r||(r=0),u=i?Math.min(i*n+r,t.length):t.length,s=r;s<u;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}();function wl(){var e=new ps(4);return ps!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Ol(e){var t=new ps(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function El(e,t,n,r){var i=new ps(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function Sl(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function jl(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function Al(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function kl(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function Cl(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function Tl(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function Ml(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function Pl(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function Il(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}function Rl(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}function Ll(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function Dl(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function Nl(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}function Fl(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return Math.hypot(n,r,i,o)}function zl(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return n*n+r*r+i*i+o*o}function Bl(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.hypot(t,n,r,i)}function Ul(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}function Vl(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function Hl(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function Gl(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a,e}function Wl(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function ql(e,t,n,r){var i=n[0]*r[1]-n[1]*r[0],o=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],l=t[0],f=t[1],p=t[2],h=t[3];return e[0]=f*c-p*u+h*s,e[1]=-l*c+p*a-h*o,e[2]=l*u-f*a+h*i,e[3]=-l*s+f*o-p*i,e}function Zl(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e[3]=s+r*(n[3]-s),e}function Yl(e,t){var n,r,i,o,a,s;t=t||1;do{n=2*hs()-1,r=2*hs()-1,a=n*n+r*r}while(a>=1);do{i=2*hs()-1,o=2*hs()-1,s=i*i+o*o}while(s>=1);var u=Math.sqrt((1-a)/s);return e[0]=t*n,e[1]=t*r,e[2]=t*i*u,e[3]=t*o*u,e}function Xl(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}function Kl(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*o-u*i,f=c*i+u*r-a*o,p=c*o+a*i-s*r,h=-a*r-s*i-u*o;return e[0]=l*c+h*-a+f*-u-p*-s,e[1]=f*c+h*-s+p*-a-l*-u,e[2]=p*c+h*-u+l*-s-f*-a,e[3]=t[3],e}function $l(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function Ql(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function Jl(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function ef(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=t[0],s=t[1],u=t[2],c=t[3];return Math.abs(n-a)<=fs*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=fs*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=fs*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=fs*Math.max(1,Math.abs(o),Math.abs(c))}var tf=kl,nf=Cl,rf=Tl,of=Fl,af=zl,sf=Bl,uf=Ul,cf=function(){var e=wl();return function(t,n,r,i,o,a){var s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,t.length):t.length,s=r;s<u;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}(),lf=s.create(),ff=(s.create(),s.create()),pf=s.create(),hf=s.create();function df(e,t,n,r,i){s.add(e,n,r),s.normalize(e,e),t=s.fromValues(-e[1],e[0]);var o=s.fromValues(-n[1],n[0]);return[i/s.dot(t,o),t]}function vf(e,t){return s.set(e,-t[1],t[0])}function mf(e,t,n){return s.sub(e,t,n),s.normalize(e,e),e}function gf(e,t){return e[0]===t[0]&&e[1]===t[1]}var yf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(Ve["a"])(this,e),Object(Ge["a"])(this,"lastFlip",-1),Object(Ge["a"])(this,"miter",s.fromValues(0,0)),Object(Ge["a"])(this,"started",!1),Object(Ge["a"])(this,"dash",!1),Object(Ge["a"])(this,"totalDistance",0),Object(Ge["a"])(this,"currentIndex",0),this.join=t.join||"miter",this.cap=t.cap||"butt",this.miterLimit=t.miterLimit||10,this.thickness=t.thickness||1,this.dash=t.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return Object(He["a"])(e,[{key:"extrude_gaode2",value:function(e,t){var n=this.complex;if(e.length<=1)return n;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=e.length,i=n.startIndex,o=1;o<r;o++){var a,s,u,c=e[o-1];c.push(null!==(a=t[o-1][2])&&void 0!==a?a:0);var l=t[o-1],f=e[o];f.push(null!==(s=t[o][2])&&void 0!==s?s:0);var p=t[o],h=o<e.length-1?[].concat(Object(D["a"])(e[o+1]),[null!==(u=t[o+1][2])&&void 0!==u?u:0]):null,d=o<t.length-1?t[o+1]:null,v=this.segment_gaode2(n,i,c,f,h,l,p,d);i+=v}if(this.dash)for(var m=0;m<n.positions.length/6;m++)n.positions[6*m+5]=this.totalDistance;return n.startIndex=n.positions.length/6,n}},{key:"simpleExtrude_gaode2",value:function(e,t){var n=this.complex;if(e.length<=1)return n;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=e.length,i=n.startIndex,o=1;o<r;o++){var a,s,u,c=e[o-1];c.push(null!==(a=t[o-1][2])&&void 0!==a?a:0);var l=t[o-1],f=e[o];f.push(null!==(s=t[o][2])&&void 0!==s?s:0);var p=t[o],h=o<e.length-1?[].concat(Object(D["a"])(e[o+1]),[null!==(u=t[o+1][2])&&void 0!==u?u:0]):null,d=o<t.length-1?t[o+1]:null,v=this.simpleSegment(n,i,c,f,h,l,p,d);i+=v}if(this.dash)for(var m=0;m<n.positions.length/6;m++)n.positions[6*m+5]=this.totalDistance;return n.startIndex=n.positions.length/6,n}},{key:"extrude",value:function(e){var t=this.complex;if(e.length<=1)return t;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=e.length,r=t.startIndex,i=1;i<n;i++){var o=e[i-1],a=e[i],s=i<e.length-1?e[i+1]:null,u=this.segment(t,r,o,a,s);r+=u}if(this.dash)for(var c=0;c<t.positions.length/6;c++)t.positions[6*c+5]=this.totalDistance;return t.startIndex=t.positions.length/6,t}},{key:"simpleExtrude",value:function(e){var t=this.complex;if(e.length<=1)return t;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=e.length,r=t.startIndex,i=1;i<n;i++){var o=e[i-1],a=e[i],s=i<e.length-1?e[i+1]:null,u=this.simpleSegment(t,r,o,a,s);r+=u}if(this.dash)for(var c=0;c<t.positions.length/6;c++)t.positions[6*c+5]=this.totalDistance;return t.startIndex=t.positions.length/6,t}},{key:"segment_gaode2",value:function(e,t,n,r,i,o,a,u){var c=0,l=e.indices,f=e.positions,p=e.normals,h="square"===this.cap,d="bevel"===this.join,v=vo([a[0],a[1]]),m=vo([o[0],o[1]]);mf(ff,r,n);var g=0;if(this.dash&&(g=this.lineSegmentDistance(v,m),this.totalDistance+=g),this.normal||(this.normal=s.create(),vf(this.normal,ff)),!this.started)if(this.started=!0,h){var y=s.create(),b=s.create();s.add(y,this.normal,ff),s.add(b,this.normal,ff),p.push(b[0],b[1],0),p.push(y[0],y[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance-g,-this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),f.push(n[0],n[1],0|n[2],this.totalDistance-g,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(f,p,n,this.normal,this.thickness,this.totalDistance-g);if(l.push(t+0,t+1,t+2),i){gf(r,i)&&s.add(i,r,s.normalize(i,s.subtract(i,r,n))),mf(pf,i,r);var _=df(hf,s.create(),ff,pf,this.thickness),x=Object(Oi["a"])(_,2),w=x[0],O=x[1],E=s.dot(hf,this.normal)<0?-1:1,S=d;if(!S&&"miter"===this.join){var j=w;j>this.miterLimit&&(S=!0)}S?(p.push(this.normal[0],this.normal[1],0),p.push(O[0],O[1],0),f.push(r[0],r[1],0|r[2],this.totalDistance,-this.thickness*E,0|r[2]),this.complex.indexes.push(this.currentIndex),f.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness*E,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,l.push.apply(l,Object(D["a"])(this.lastFlip!==-E?[t,t+2,t+3]:[t+2,t+1,t+3])),l.push(t+2,t+3,t+4),vf(lf,pf),s.copy(this.normal,lf),p.push(this.normal[0],this.normal[1],0),f.push(r[0],r[1],0|r[2],this.totalDistance,-this.thickness*E,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,c+=3):(this.extrusions(f,p,r,O,w,this.totalDistance),l.push.apply(l,Object(D["a"])(1===this.lastFlip?[t,t+2,t+3]:[t+2,t+1,t+3])),E=-1,s.copy(this.normal,O),c+=2),this.lastFlip=E}else{if(vf(this.normal,ff),h){var A=s.create(),k=s.create();s.sub(k,ff,this.normal),s.add(A,ff,this.normal),p.push(k[0],k[1],0),p.push(A[0],A[1],0),f.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),f.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(f,p,r,this.normal,this.thickness,this.totalDistance);l.push.apply(l,Object(D["a"])(1===this.lastFlip?[t,t+2,t+3]:[t+2,t+1,t+3])),c+=2}return c}},{key:"simpleSegment",value:function(e,t,n,r,i){var o=0,a=e.indices,u=e.positions,c=e.normals,l=vo([r[0],r[1]]),f=vo([n[0],n[1]]);mf(ff,l,f);var p=0;if(this.dash&&(p=this.lineSegmentDistance(l,f),this.totalDistance+=p),this.normal||(this.normal=s.create(),vf(this.normal,ff)),this.started||(this.started=!0,this.extrusions(u,c,n,this.normal,this.thickness,this.totalDistance-p)),a.push(t+0,t+1,t+2),i){var h=vo([i[0],i[1]]);gf(l,h)&&s.add(h,l,s.normalize(h,s.subtract(h,l,f))),mf(pf,h,l);var d=df(hf,s.create(),ff,pf,this.thickness),v=Object(Oi["a"])(d,2),m=v[0],g=v[1],y=s.dot(hf,this.normal)<0?-1:1;this.extrusions(u,c,r,g,m,this.totalDistance),a.push.apply(a,Object(D["a"])(1===this.lastFlip?[t,t+2,t+3]:[t+2,t+1,t+3])),y=-1,s.copy(this.normal,g),o+=2,this.lastFlip=y}else vf(this.normal,ff),this.extrusions(u,c,r,this.normal,this.thickness,this.totalDistance),a.push.apply(a,Object(D["a"])(1===this.lastFlip?[t,t+2,t+3]:[t+2,t+1,t+3])),o+=2;return o}},{key:"segment",value:function(e,t,n,r,i){var o=0,a=e.indices,u=e.positions,c=e.normals,l="square"===this.cap,f="bevel"===this.join,p=vo([r[0],r[1]]),h=vo([n[0],n[1]]);mf(ff,p,h);var d=0;if(this.dash&&(d=this.lineSegmentDistance(p,h),this.totalDistance+=d),this.normal||(this.normal=s.create(),vf(this.normal,ff)),!this.started)if(this.started=!0,l){var v=s.create(),m=s.create();s.add(v,this.normal,ff),s.add(m,this.normal,ff),c.push(m[0],m[1],0),c.push(v[0],v[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance-d,-this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),u.push(n[0],n[1],0|n[2],this.totalDistance-d,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,c,n,this.normal,this.thickness,this.totalDistance-d);if(a.push(t+0,t+1,t+2),i){var g=vo([i[0],i[1]]);gf(p,g)&&s.add(g,p,s.normalize(g,s.subtract(g,p,h))),mf(pf,g,p);var y=df(hf,s.create(),ff,pf,this.thickness),b=Object(Oi["a"])(y,2),_=b[0],x=b[1],w=s.dot(hf,this.normal)<0?-1:1,O=f;if(!O&&"miter"===this.join){var E=_;E>this.miterLimit&&(O=!0)}O?(c.push(this.normal[0],this.normal[1],0),c.push(x[0],x[1],0),u.push(r[0],r[1],0|r[2],this.totalDistance,-this.thickness*w,0|r[2]),this.complex.indexes.push(this.currentIndex),u.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness*w,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,a.push.apply(a,Object(D["a"])(this.lastFlip!==-w?[t,t+2,t+3]:[t+2,t+1,t+3])),a.push(t+2,t+3,t+4),vf(lf,pf),s.copy(this.normal,lf),c.push(this.normal[0],this.normal[1],0),u.push(r[0],r[1],0|r[2],this.totalDistance,-this.thickness*w,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,o+=3):(this.extrusions(u,c,r,x,_,this.totalDistance),a.push.apply(a,Object(D["a"])(1===this.lastFlip?[t,t+2,t+3]:[t+2,t+1,t+3])),w=-1,s.copy(this.normal,x),o+=2),this.lastFlip=w}else{if(vf(this.normal,ff),l){var S=s.create(),j=s.create();s.sub(j,ff,this.normal),s.add(S,ff,this.normal),c.push(j[0],j[1],0),c.push(S[0],S[1],0),u.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),u.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,c,r,this.normal,this.thickness,this.totalDistance);a.push.apply(a,Object(D["a"])(1===this.lastFlip?[t,t+2,t+3]:[t+2,t+1,t+3])),o+=2}return o}},{key:"extrusions",value:function(e,t,n,r,i,o){t.push(r[0],r[1],0),t.push(r[0],r[1],0),e.push(n[0],n[1],0|n[2],o,-i,0|n[2]),this.complex.indexes.push(this.currentIndex),e.push(n[0],n[1],0|n[2],o,i,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}}]),e}();function bf(e){var t=e.coordinates,n=e.originCoordinates,r=e.version,i=new yf({dash:!0,join:"bevel"});if("GAODE2.x"===r){var o=t;Array.isArray(o[0][0])||(o=[t]);var a=n;Array.isArray(a[0][0])||(a=[n]);for(var s=0;s<o.length;s++){var u=o[s],c=a[s];i.extrude_gaode2(u,c)}}else{var l=t;l[0]&&!Array.isArray(l[0][0])&&(l=[t]),l.forEach((function(e){i.extrude(e)}))}var f=i.complex;return{vertices:f.positions,indices:f.indices,normals:f.normals,indexes:f.indexes,size:6}}function _f(e){var t=Oo(e.coordinates);return{vertices:[].concat(Object(D["a"])(t),Object(D["a"])(t),Object(D["a"])(t),Object(D["a"])(t)),indices:[0,1,2,2,3,0],size:t.length}}function xf(e){var t=e.coordinates,n=ls.a.flatten(t),r=n.vertices,i=n.dimensions,o=n.holes,a=ls()(r,o,i);return{indices:a,vertices:r,size:i}}var wf=function(){var e=Object(ae["a"])(ue.a.mark((function e(t){var n,r,i,o,a,s,u,c,l;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.descriptors,r=t.features,i=t.enablePicking,o=t.iconMap,a={a_Color:os,a_Position:as,filter:ss,a_vertexId:us,a_PickingColor:function(e){var t=e.id;return i?hi(t):[0,0,0]},a_DistanceAndIndex:function(e,t,n,r,i,o){return void 0===o?[n[3],10]:[n[3],o]},a_Total_Distance:function(e,t,n){return[n[5]]},a_Size:function(e){var t=e.size,n=void 0===t?1:t;return Array.isArray(n)?[n[0],n[1]]:[n,0]},a_Normal:function(e,t,n,r,i){return i},a_Miter:function(e,t,n){return[n[4]]},a_iconMapUV:function(e){var t=e.texture,n=o[t]||{x:0,y:0},r=n.x,i=n.y;return[r,i]}},s={sizePerElement:0,elements:[]},u=0,c=[],l=3,r.forEach((function(e,t){var r=bf(e),i=r.indices,o=r.vertices,f=r.normals,p=r.size,h=r.indexes;i.forEach((function(e){c.push(e+u)})),l=p;var d=o.length/p;s.sizePerElement=l,s.elements.push({featureIdx:t,vertices:o,normals:f,offset:u}),u+=d;for(var v=function(r){var i=(null===f||void 0===f?void 0:f.slice(3*r,3*r+3))||[],s=o.slice(r*p,r*p+p),u=0;h&&void 0!==h[r]&&(u=h[r]),n.forEach((function(n){var o;n&&a[n.name]&&(o=n.buffer.data).push.apply(o,Object(D["a"])(a[n.name](e,t,s,r,i,u)))}))},m=0;m<d;m++)v(m)})),e.abrupt("return",{descriptors:n,featureLayout:s,indices:c});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Of=function(){var e=Object(ae["a"])(ue.a.mark((function e(t){var n,r,i,o,a,s,u,c,l;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.descriptors,r=t.features,i=t.enablePicking,o=t.shape2d,a={a_Color:os,a_Position:as,filter:ss,a_vertexId:us,a_PickingColor:function(e){var t=e.id;return i?hi(t):[0,0,0]},a_Shape:function(e){var t=e.shape,n=void 0===t?2:t,r=o.indexOf(n);return[r]},a_Extrude:function(e,t,n,r){var i=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],o=r%4*3;return[i[o],i[o+1],i[o+2]]},a_Size:function(e){var t=e.size,n=void 0===t?5:t;return Array.isArray(n)?[n[0]]:[n]}},s={sizePerElement:0,elements:[]},u=0,c=[],l=3,r.forEach((function(e,t){var r=_f(e),i=r.indices,o=r.vertices,f=r.normals,p=r.size,h=r.indexes;i.forEach((function(e){c.push(e+u)})),l=p;var d=o.length/p;s.sizePerElement=l,s.elements.push({featureIdx:t,vertices:o,normals:f,offset:u}),u+=d;for(var v=function(r){var i=(null===f||void 0===f?void 0:f.slice(3*r,3*r+3))||[],s=o.slice(r*p,r*p+p),u=0;h&&void 0!==h[r]&&(u=h[r]),n.forEach((function(n){var o;n&&a[n.name]&&(o=n.buffer.data).push.apply(o,Object(D["a"])(a[n.name](e,t,s,r,i,u)))}))},m=0;m<d;m++)v(m)})),e.abrupt("return",{descriptors:n,featureLayout:s,indices:c});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ef=function(){var e=Object(ae["a"])(ue.a.mark((function e(t){var n,r,i,o,a,s,u,c;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.descriptors,r=t.features,i=t.enablePicking,o={a_Color:os,a_Position:as,filter:ss,a_vertexId:us,a_PickingColor:function(e){var t=e.id;return i?hi(t):[0,0,0]}},a={sizePerElement:0,elements:[]},s=0,u=[],c=3,r.forEach((function(e,t){var r=xf(e),i=r.indices,l=r.vertices,f=r.normals,p=r.size,h=r.indexes;i.forEach((function(e){u.push(e+s)})),c=p;var d=l.length/p;a.sizePerElement=c,a.elements.push({featureIdx:t,vertices:l,normals:f,offset:s}),s+=d;for(var v=function(r){var i=(null===f||void 0===f?void 0:f.slice(3*r,3*r+3))||[],a=l.slice(r*p,r*p+p),s=0;h&&void 0!==h[r]&&(s=h[r]),n.forEach((function(n){var u;n&&o[n.name]&&(u=n.buffer.data).push.apply(u,Object(D["a"])(o[n.name](e,t,a,r,i,s)))}))},m=0;m<d;m++)v(m)})),e.abrupt("return",{descriptors:n,featureLayout:a,indices:u});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Sf={pointFill:Of,line:wf,polygonFill:Ef},jf=Object(N["a"])({},Sf);function Af(e){return kf.apply(this,arguments)}function kf(){return kf=Object(ae["a"])(ue.a.mark((function e(t){var n,r;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.workerType,r=t.data,!jf[n]){e.next=3;break}return e.abrupt("return",jf[n](r));case 3:return e.abrupt("return",Promise.reject(new Error('Worker with type "'.concat(n,'" non-existent.'))));case 4:case"end":return e.stop()}}),e)}))),kf.apply(this,arguments)}rs(Af);var Cf=new Map;function Tf(e,t){Cf.set(e,t)}function Mf(e){var t=Cf.get(e);return t}var Pf='var L7=function(t){"use strict";function e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new T(n||[]);return o(a,"_invoke",{value:E(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var h={};function p(){}function v(){}function d(){}var y={};c(y,a,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(k([])));m&&m!==e&&n.call(m,a)&&(y=m);var b=d.prototype=p.prototype=Object.create(y);function x(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var r;o(this,"_invoke",{value:function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return I()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=A(a,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function A(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,A(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a \'"+r+"\' method")),h;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function k(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return v.prototype=d,o(b,"constructor",{value:d,configurable:!0}),o(d,"constructor",{value:v,configurable:!0}),v.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},x(w.prototype),c(w.prototype,u,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(b),c(b,s,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function n(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,s,"next",t)}function s(t){n(a,o,i,u,s,"throw",t)}u(void 0)}))}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b(n.key),n)}}function u(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e,r){return(e=b(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function p(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function b(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function w(t,e){return t(e={exports:{}},e.exports),e.exports}var E,A,O=function(t){return t&&t.Math==Math&&t},S=O("object"==typeof globalThis&&globalThis)||O("object"==typeof window&&window)||O("object"==typeof self&&self)||O("object"==typeof x&&x)||function(){return this}()||Function("return this")(),T=Object.defineProperty,k=function(t,e){try{T(S,t,{value:e,configurable:!0,writable:!0})}catch(r){S[t]=e}return e},I=S["__core-js_shared__"]||k("__core-js_shared__",{}),j=w((function(t){(t.exports=function(t,e){return I[t]||(I[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.30.1",mode:"global",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.1/LICENSE",source:"https://github.com/zloirock/core-js"})})),P=function(t){try{return!!t()}catch(t){return!0}},_=!P((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),M=Function.prototype,L=M.call,R=_&&M.bind.bind(L,L),N=_?R:function(t){return function(){return L.apply(t,arguments)}},C=function(t){return null==t},D=TypeError,F=function(t){if(C(t))throw D("Can\'t call method on "+t);return t},W=Object,z=function(t){return W(F(t))},B=N({}.hasOwnProperty),U=Object.hasOwn||function(t,e){return B(z(t),e)},G=0,V=Math.random(),H=N(1..toString),q=function(t){return"Symbol("+(void 0===t?"":t)+")_"+H(++G+V,36)},Z="undefined"!=typeof navigator&&String(navigator.userAgent)||"",Y=S.process,$=S.Deno,K=Y&&Y.versions||$&&$.version,Q=K&&K.v8;Q&&(A=(E=Q.split("."))[0]>0&&E[0]<4?1:+(E[0]+E[1])),!A&&Z&&(!(E=Z.match(/Edge\\/(\\d+)/))||E[1]>=74)&&(E=Z.match(/Chrome\\/(\\d+)/))&&(A=+E[1]);var X=A,J=!!Object.getOwnPropertySymbols&&!P((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&X&&X<41})),tt=J&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,et=S.Symbol,rt=j("wks"),nt=tt?et.for||et:et&&et.withoutSetter||q,ot=function(t){return U(rt,t)||(rt[t]=J&&U(et,t)?et[t]:nt("Symbol."+t)),rt[t]},it={};it[ot("toStringTag")]="z";var at="[object z]"===String(it),ut="object"==typeof document&&document.all,st={all:ut,IS_HTMLDDA:void 0===ut&&void 0!==ut},ct=st.all,ft=st.IS_HTMLDDA?function(t){return"function"==typeof t||t===ct}:function(t){return"function"==typeof t},lt=!P((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),ht=st.all,pt=st.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:ft(t)||t===ht}:function(t){return"object"==typeof t?null!==t:ft(t)},vt=S.document,dt=pt(vt)&&pt(vt.createElement),yt=function(t){return dt?vt.createElement(t):{}},gt=!lt&&!P((function(){return 7!=Object.defineProperty(yt("div"),"a",{get:function(){return 7}}).a})),mt=lt&&P((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),bt=String,xt=TypeError,wt=function(t){if(pt(t))return t;throw xt(bt(t)+" is not an object")},Et=Function.prototype.call,At=_?Et.bind(Et):function(){return Et.apply(Et,arguments)},Ot=function(t){return ft(t)?t:void 0},St=function(t,e){return arguments.length<2?Ot(S[t]):S[t]&&S[t][e]},Tt=N({}.isPrototypeOf),kt=Object,It=tt?function(t){return"symbol"==typeof t}:function(t){var e=St("Symbol");return ft(e)&&Tt(e.prototype,kt(t))},jt=String,Pt=function(t){try{return jt(t)}catch(t){return"Object"}},_t=TypeError,Mt=function(t){if(ft(t))return t;throw _t(Pt(t)+" is not a function")},Lt=function(t,e){var r=t[e];return C(r)?void 0:Mt(r)},Rt=TypeError,Nt=TypeError,Ct=ot("toPrimitive"),Dt=function(t,e){if(!pt(t)||It(t))return t;var r,n=Lt(t,Ct);if(n){if(void 0===e&&(e="default"),r=At(n,t,e),!pt(r)||It(r))return r;throw Nt("Can\'t convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var r,n;if("string"===e&&ft(r=t.toString)&&!pt(n=At(r,t)))return n;if(ft(r=t.valueOf)&&!pt(n=At(r,t)))return n;if("string"!==e&&ft(r=t.toString)&&!pt(n=At(r,t)))return n;throw Rt("Can\'t convert object to primitive value")}(t,e)},Ft=function(t){var e=Dt(t,"string");return It(e)?e:e+""},Wt=TypeError,zt=Object.defineProperty,Bt=Object.getOwnPropertyDescriptor,Ut={f:lt?mt?function(t,e,r){if(wt(t),e=Ft(e),wt(r),"function"==typeof t&&"prototype"===e&&"value"in r&&"writable"in r&&!r.writable){var n=Bt(t,e);n&&n.writable&&(t[e]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return zt(t,e,r)}:zt:function(t,e,r){if(wt(t),e=Ft(e),wt(r),gt)try{return zt(t,e,r)}catch(t){}if("get"in r||"set"in r)throw Wt("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},Gt=Function.prototype,Vt=lt&&Object.getOwnPropertyDescriptor,Ht=U(Gt,"name"),qt={EXISTS:Ht,PROPER:Ht&&"something"===function(){}.name,CONFIGURABLE:Ht&&(!lt||lt&&Vt(Gt,"name").configurable)},Zt=N(Function.toString);ft(I.inspectSource)||(I.inspectSource=function(t){return Zt(t)});var Yt,$t,Kt,Qt=I.inspectSource,Xt=S.WeakMap,Jt=ft(Xt)&&/native code/.test(String(Xt)),te=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},ee=lt?function(t,e,r){return Ut.f(t,e,te(1,r))}:function(t,e,r){return t[e]=r,t},re=j("keys"),ne=function(t){return re[t]||(re[t]=q(t))},oe={},ie=S.TypeError,ae=S.WeakMap;if(Jt||I.state){var ue=I.state||(I.state=new ae);ue.get=ue.get,ue.has=ue.has,ue.set=ue.set,Yt=function(t,e){if(ue.has(t))throw ie("Object already initialized");return e.facade=t,ue.set(t,e),e},$t=function(t){return ue.get(t)||{}},Kt=function(t){return ue.has(t)}}else{var se=ne("state");oe[se]=!0,Yt=function(t,e){if(U(t,se))throw ie("Object already initialized");return e.facade=t,ee(t,se,e),e},$t=function(t){return U(t,se)?t[se]:{}},Kt=function(t){return U(t,se)}}var ce={set:Yt,get:$t,has:Kt,enforce:function(t){return Kt(t)?$t(t):Yt(t,{})},getterFor:function(t){return function(e){var r;if(!pt(e)||(r=$t(e)).type!==t)throw ie("Incompatible receiver, "+t+" required");return r}}},fe=w((function(t){var e=qt.CONFIGURABLE,r=ce.enforce,n=ce.get,o=String,i=Object.defineProperty,a=N("".slice),u=N("".replace),s=N([].join),c=lt&&!P((function(){return 8!==i((function(){}),"length",{value:8}).length})),f=String(String).split("String"),l=t.exports=function(t,n,l){"Symbol("===a(o(n),0,7)&&(n="["+u(o(n),/^Symbol\\(([^)]*)\\)/,"$1")+"]"),l&&l.getter&&(n="get "+n),l&&l.setter&&(n="set "+n),(!U(t,"name")||e&&t.name!==n)&&(lt?i(t,"name",{value:n,configurable:!0}):t.name=n),c&&l&&U(l,"arity")&&t.length!==l.arity&&i(t,"length",{value:l.arity});try{l&&U(l,"constructor")&&l.constructor?lt&&i(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var h=r(t);return U(h,"source")||(h.source=s(f,"string"==typeof n?n:"")),t};Function.prototype.toString=l((function(){return ft(this)&&n(this).source||Qt(this)}),"toString")})),le=function(t,e,r,n){n||(n={});var o=n.enumerable,i=void 0!==n.name?n.name:e;if(ft(r)&&fe(r,i,n),n.global)o?t[e]=r:k(e,r);else{try{n.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=r:Ut.f(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t},he=N({}.toString),pe=N("".slice),ve=function(t){return pe(he(t),8,-1)},de=ot("toStringTag"),ye=Object,ge="Arguments"==ve(function(){return arguments}()),me=at?ve:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=ye(t),de))?r:ge?ve(e):"Object"==(n=ve(e))&&ft(e.callee)?"Arguments":n},be=at?{}.toString:function(){return"[object "+me(this)+"]"};at||le(Object.prototype,"toString",be,{unsafe:!0});var xe={}.propertyIsEnumerable,we=Object.getOwnPropertyDescriptor,Ee={f:we&&!xe.call({1:2},1)?function(t){var e=we(this,t);return!!e&&e.enumerable}:xe},Ae=Object,Oe=N("".split),Se=P((function(){return!Ae("z").propertyIsEnumerable(0)}))?function(t){return"String"==ve(t)?Oe(t,""):Ae(t)}:Ae,Te=function(t){return Se(F(t))},ke=Object.getOwnPropertyDescriptor,Ie={f:lt?ke:function(t,e){if(t=Te(t),e=Ft(e),gt)try{return ke(t,e)}catch(t){}if(U(t,e))return te(!At(Ee.f,t,e),t[e])}},je=Math.ceil,Pe=Math.floor,_e=Math.trunc||function(t){var e=+t;return(e>0?Pe:je)(e)},Me=function(t){var e=+t;return e!=e||0===e?0:_e(e)},Le=Math.max,Re=Math.min,Ne=function(t,e){var r=Me(t);return r<0?Le(r+e,0):Re(r,e)},Ce=Math.min,De=function(t){return t>0?Ce(Me(t),9007199254740991):0},Fe=function(t){return De(t.length)},We=function(t){return function(e,r,n){var o,i=Te(e),a=Fe(i),u=Ne(n,a);if(t&&r!=r){for(;a>u;)if((o=i[u++])!=o)return!0}else for(;a>u;u++)if((t||u in i)&&i[u]===r)return t||u||0;return!t&&-1}},ze={includes:We(!0),indexOf:We(!1)},Be=ze.indexOf,Ue=N([].push),Ge=function(t,e){var r,n=Te(t),o=0,i=[];for(r in n)!U(oe,r)&&U(n,r)&&Ue(i,r);for(;e.length>o;)U(n,r=e[o++])&&(~Be(i,r)||Ue(i,r));return i},Ve=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],He=Ve.concat("length","prototype"),qe={f:Object.getOwnPropertyNames||function(t){return Ge(t,He)}},Ze={f:Object.getOwnPropertySymbols},Ye=N([].concat),$e=St("Reflect","ownKeys")||function(t){var e=qe.f(wt(t)),r=Ze.f;return r?Ye(e,r(t)):e},Ke=function(t,e,r){for(var n=$e(e),o=Ut.f,i=Ie.f,a=0;a<n.length;a++){var u=n[a];U(t,u)||r&&U(r,u)||o(t,u,i(e,u))}},Qe=/#|\\.prototype\\./,Xe=function(t,e){var r=tr[Je(t)];return r==rr||r!=er&&(ft(e)?P(e):!!e)},Je=Xe.normalize=function(t){return String(t).replace(Qe,".").toLowerCase()},tr=Xe.data={},er=Xe.NATIVE="N",rr=Xe.POLYFILL="P",nr=Xe,or=Ie.f,ir=function(t,e){var r,n,o,i,a,u=t.target,s=t.global,c=t.stat;if(r=s?S:c?S[u]||k(u,{}):(S[u]||{}).prototype)for(n in e){if(i=e[n],o=t.dontCallGetSet?(a=or(r,n))&&a.value:r[n],!nr(s?n:u+(c?".":"#")+n,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;Ke(i,o)}(t.sham||o&&o.sham)&&ee(i,"sham",!0),le(r,n,i,t)}},ar="undefined"!=typeof process&&"process"==ve(process),ur=String,sr=TypeError,cr=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=function(t,e,r){try{return N(Mt(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}}(Object.prototype,"__proto__","set"))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return wt(r),function(t){if("object"==typeof t||ft(t))return t;throw sr("Can\'t set "+ur(t)+" as a prototype")}(n),e?t(r,n):r.__proto__=n,r}}():void 0),fr=Ut.f,lr=ot("toStringTag"),hr=function(t,e,r){t&&!r&&(t=t.prototype),t&&!U(t,lr)&&fr(t,lr,{configurable:!0,value:e})},pr=function(t,e,r){return r.get&&fe(r.get,e,{getter:!0}),r.set&&fe(r.set,e,{setter:!0}),Ut.f(t,e,r)},vr=ot("species"),dr=function(t){var e=St(t);lt&&e&&!e[vr]&&pr(e,vr,{configurable:!0,get:function(){return this}})},yr=TypeError,gr=function(t,e){if(Tt(e,t))return t;throw yr("Incorrect invocation")},mr=function(){},br=[],xr=St("Reflect","construct"),wr=/^\\s*(?:class|function)\\b/,Er=N(wr.exec),Ar=!wr.exec(mr),Or=function(t){if(!ft(t))return!1;try{return xr(mr,br,t),!0}catch(t){return!1}},Sr=function(t){if(!ft(t))return!1;switch(me(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ar||!!Er(wr,Qt(t))}catch(t){return!0}};Sr.sham=!0;var Tr,kr,Ir,jr,Pr=!xr||P((function(){var t;return Or(Or.call)||!Or(Object)||!Or((function(){t=!0}))||t}))?Sr:Or,_r=TypeError,Mr=function(t){if(Pr(t))return t;throw _r(Pt(t)+" is not a constructor")},Lr=ot("species"),Rr=function(t,e){var r,n=wt(t).constructor;return void 0===n||C(r=wt(n)[Lr])?e:Mr(r)},Nr=Function.prototype,Cr=Nr.apply,Dr=Nr.call,Fr="object"==typeof Reflect&&Reflect.apply||(_?Dr.bind(Cr):function(){return Dr.apply(Cr,arguments)}),Wr=function(t){if("Function"===ve(t))return N(t)},zr=Wr(Wr.bind),Br=function(t,e){return Mt(t),void 0===e?t:_?zr(t,e):function(){return t.apply(e,arguments)}},Ur=St("document","documentElement"),Gr=N([].slice),Vr=TypeError,Hr=function(t,e){if(t<e)throw Vr("Not enough arguments");return t},qr=/(?:ipad|iphone|ipod).*applewebkit/i.test(Z),Zr=S.setImmediate,Yr=S.clearImmediate,$r=S.process,Kr=S.Dispatch,Qr=S.Function,Xr=S.MessageChannel,Jr=S.String,tn=0,en={};P((function(){Tr=S.location}));var rn=function(t){if(U(en,t)){var e=en[t];delete en[t],e()}},nn=function(t){return function(){rn(t)}},on=function(t){rn(t.data)},an=function(t){S.postMessage(Jr(t),Tr.protocol+"//"+Tr.host)};Zr&&Yr||(Zr=function(t){Hr(arguments.length,1);var e=ft(t)?t:Qr(t),r=Gr(arguments,1);return en[++tn]=function(){Fr(e,void 0,r)},kr(tn),tn},Yr=function(t){delete en[t]},ar?kr=function(t){$r.nextTick(nn(t))}:Kr&&Kr.now?kr=function(t){Kr.now(nn(t))}:Xr&&!qr?(jr=(Ir=new Xr).port2,Ir.port1.onmessage=on,kr=Br(jr.postMessage,jr)):S.addEventListener&&ft(S.postMessage)&&!S.importScripts&&Tr&&"file:"!==Tr.protocol&&!P(an)?(kr=an,S.addEventListener("message",on,!1)):kr="onreadystatechange"in yt("script")?function(t){Ur.appendChild(yt("script")).onreadystatechange=function(){Ur.removeChild(this),rn(t)}}:function(t){setTimeout(nn(t),0)});var un={set:Zr,clear:Yr},sn=function(){this.head=null,this.tail=null};sn.prototype={add:function(t){var e={item:t,next:null},r=this.tail;r?r.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}};var cn,fn,ln,hn,pn,vn=sn,dn=/ipad|iphone|ipod/i.test(Z)&&"undefined"!=typeof Pebble,yn=/web0s(?!.*chrome)/i.test(Z),gn=Ie.f,mn=un.set,bn=S.MutationObserver||S.WebKitMutationObserver,xn=S.document,wn=S.process,En=S.Promise,An=gn(S,"queueMicrotask"),On=An&&An.value;if(!On){var Sn=new vn,Tn=function(){var t,e;for(ar&&(t=wn.domain)&&t.exit();e=Sn.get();)try{e()}catch(t){throw Sn.head&&cn(),t}t&&t.enter()};qr||ar||yn||!bn||!xn?!dn&&En&&En.resolve?((hn=En.resolve(void 0)).constructor=En,pn=Br(hn.then,hn),cn=function(){pn(Tn)}):ar?cn=function(){wn.nextTick(Tn)}:(mn=Br(mn,S),cn=function(){mn(Tn)}):(fn=!0,ln=xn.createTextNode(""),new bn(Tn).observe(ln,{characterData:!0}),cn=function(){ln.data=fn=!fn}),On=function(t){Sn.head||cn(),Sn.add(t)}}var kn,In,jn,Pn=On,_n=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Mn=S.Promise,Ln="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Rn=!Ln&&!ar&&"object"==typeof window&&"object"==typeof document,Nn=(Mn&&Mn.prototype,ot("species")),Cn=!1,Dn=ft(S.PromiseRejectionEvent),Fn={CONSTRUCTOR:nr("Promise",(function(){var t=Qt(Mn),e=t!==String(Mn);if(!e&&66===X)return!0;if(!X||X<51||!/native code/.test(t)){var r=new Mn((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};if((r.constructor={})[Nn]=n,!(Cn=r.then((function(){}))instanceof n))return!0}return!e&&(Rn||Ln)&&!Dn})),REJECTION_EVENT:Dn,SUBCLASSING:Cn},Wn=TypeError,zn=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw Wn("Bad Promise constructor");e=t,r=n})),this.resolve=Mt(e),this.reject=Mt(r)},Bn={f:function(t){return new zn(t)}},Un=un.set,Gn=Fn.CONSTRUCTOR,Vn=Fn.REJECTION_EVENT,Hn=Fn.SUBCLASSING,qn=ce.getterFor("Promise"),Zn=ce.set,Yn=Mn&&Mn.prototype,$n=Mn,Kn=Yn,Qn=S.TypeError,Xn=S.document,Jn=S.process,to=Bn.f,eo=to,ro=!!(Xn&&Xn.createEvent&&S.dispatchEvent),no=function(t){var e;return!(!pt(t)||!ft(e=t.then))&&e},oo=function(t,e){var r,n,o,i=e.value,a=1==e.state,u=a?t.ok:t.fail,s=t.resolve,c=t.reject,f=t.domain;try{u?(a||(2===e.rejection&&co(e),e.rejection=1),!0===u?r=i:(f&&f.enter(),r=u(i),f&&(f.exit(),o=!0)),r===t.promise?c(Qn("Promise-chain cycle")):(n=no(r))?At(n,r,s,c):s(r)):c(i)}catch(t){f&&!o&&f.exit(),c(t)}},io=function(t,e){t.notified||(t.notified=!0,Pn((function(){for(var r,n=t.reactions;r=n.get();)oo(r,t);t.notified=!1,e&&!t.rejection&&uo(t)})))},ao=function(t,e,r){var n,o;ro?((n=Xn.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),S.dispatchEvent(n)):n={promise:e,reason:r},!Vn&&(o=S["on"+t])?o(n):"unhandledrejection"===t&&function(t,e){try{1==arguments.length?console.error(t):console.error(t,e)}catch(t){}}("Unhandled promise rejection",r)},uo=function(t){At(Un,S,(function(){var e,r=t.facade,n=t.value;if(so(t)&&(e=_n((function(){ar?Jn.emit("unhandledRejection",n,r):ao("unhandledrejection",r,n)})),t.rejection=ar||so(t)?2:1,e.error))throw e.value}))},so=function(t){return 1!==t.rejection&&!t.parent},co=function(t){At(Un,S,(function(){var e=t.facade;ar?Jn.emit("rejectionHandled",e):ao("rejectionhandled",e,t.value)}))},fo=function(t,e,r){return function(n){t(e,n,r)}},lo=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,io(t,!0))},ho=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw Qn("Promise can\'t be resolved itself");var n=no(e);n?Pn((function(){var r={done:!1};try{At(n,e,fo(ho,r,t),fo(lo,r,t))}catch(e){lo(r,e,t)}})):(t.value=e,t.state=1,io(t,!1))}catch(e){lo({done:!1},e,t)}}};if(Gn&&(Kn=($n=function(t){gr(this,Kn),Mt(t),At(kn,this);var e=qn(this);try{t(fo(ho,e),fo(lo,e))}catch(t){lo(e,t)}}).prototype,(kn=function(t){Zn(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new vn,rejection:!1,state:0,value:void 0})}).prototype=le(Kn,"then",(function(t,e){var r=qn(this),n=to(Rr(this,$n));return r.parent=!0,n.ok=!ft(t)||t,n.fail=ft(e)&&e,n.domain=ar?Jn.domain:void 0,0==r.state?r.reactions.add(n):Pn((function(){oo(n,r)})),n.promise})),In=function(){var t=new kn,e=qn(t);this.promise=t,this.resolve=fo(ho,e),this.reject=fo(lo,e)},Bn.f=to=function(t){return t===$n||void 0===t?new In(t):eo(t)},ft(Mn)&&Yn!==Object.prototype)){jn=Yn.then,Hn||le(Yn,"then",(function(t,e){var r=this;return new $n((function(t,e){At(jn,r,t,e)})).then(t,e)}),{unsafe:!0});try{delete Yn.constructor}catch(t){}cr&&cr(Yn,Kn)}ir({global:!0,constructor:!0,wrap:!0,forced:Gn},{Promise:$n}),hr($n,"Promise",!1),dr("Promise");var po={},vo=ot("iterator"),yo=Array.prototype,go=function(t){return void 0!==t&&(po.Array===t||yo[vo]===t)},mo=ot("iterator"),bo=function(t){if(!C(t))return Lt(t,mo)||Lt(t,"@@iterator")||po[me(t)]},xo=TypeError,wo=function(t,e){var r=arguments.length<2?bo(t):e;if(Mt(r))return wt(At(r,t));throw xo(Pt(t)+" is not iterable")},Eo=function(t,e,r){var n,o;wt(t);try{if(!(n=Lt(t,"return"))){if("throw"===e)throw r;return r}n=At(n,t)}catch(t){o=!0,n=t}if("throw"===e)throw r;if(o)throw n;return wt(n),r},Ao=TypeError,Oo=function(t,e){this.stopped=t,this.result=e},So=Oo.prototype,To=function(t,e,r){var n,o,i,a,u,s,c,f=r&&r.that,l=!(!r||!r.AS_ENTRIES),h=!(!r||!r.IS_RECORD),p=!(!r||!r.IS_ITERATOR),v=!(!r||!r.INTERRUPTED),d=Br(e,f),y=function(t){return n&&Eo(n,"normal",t),new Oo(!0,t)},g=function(t){return l?(wt(t),v?d(t[0],t[1],y):d(t[0],t[1])):v?d(t,y):d(t)};if(h)n=t.iterator;else if(p)n=t;else{if(!(o=bo(t)))throw Ao(Pt(t)+" is not iterable");if(go(o)){for(i=0,a=Fe(t);a>i;i++)if((u=g(t[i]))&&Tt(So,u))return u;return new Oo(!1)}n=wo(t,o)}for(s=h?t.next:n.next;!(c=At(s,n)).done;){try{u=g(c.value)}catch(t){Eo(n,"throw",t)}if("object"==typeof u&&u&&Tt(So,u))return u}return new Oo(!1)},ko=ot("iterator"),Io=!1;try{var jo=0,Po={next:function(){return{done:!!jo++}},return:function(){Io=!0}};Po[ko]=function(){return this},Array.from(Po,(function(){throw 2}))}catch(t){}var _o=function(t,e){if(!e&&!Io)return!1;var r=!1;try{var n={};n[ko]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r},Mo=Fn.CONSTRUCTOR||!_o((function(t){Mn.all(t).then(void 0,(function(){}))}));ir({target:"Promise",stat:!0,forced:Mo},{all:function(t){var e=this,r=Bn.f(e),n=r.resolve,o=r.reject,i=_n((function(){var r=Mt(e.resolve),i=[],a=0,u=1;To(t,(function(t){var s=a++,c=!1;u++,At(r,e,t).then((function(t){c||(c=!0,i[s]=t,--u||n(i))}),o)})),--u||n(i)}));return i.error&&o(i.value),r.promise}});var Lo=Fn.CONSTRUCTOR,Ro=Mn&&Mn.prototype;if(ir({target:"Promise",proto:!0,forced:Lo,real:!0},{catch:function(t){return this.then(void 0,t)}}),ft(Mn)){var No=St("Promise").prototype.catch;Ro.catch!==No&&le(Ro,"catch",No,{unsafe:!0})}ir({target:"Promise",stat:!0,forced:Mo},{race:function(t){var e=this,r=Bn.f(e),n=r.reject,o=_n((function(){var o=Mt(e.resolve);To(t,(function(t){At(o,e,t).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}}),ir({target:"Promise",stat:!0,forced:Fn.CONSTRUCTOR},{reject:function(t){var e=Bn.f(this);return At(e.reject,void 0,t),e.promise}});var Co=Fn.CONSTRUCTOR;St("Promise");function Do(t,e){if(!t)throw new Error(e||"web worker helper assertion failed.")}ir({target:"Promise",stat:!0,forced:Co},{resolve:function(t){return function(t,e){if(wt(t),pt(e)&&e.constructor===t)return e;var r=Bn.f(t);return(0,r.resolve)(e),r.promise}(this,t)}});var Fo="undefined"!=typeof window&&void 0!==window.orientation,Wo=function(){function t(t,e){var r=this;this.name=t,this.workerThread=e,this.isRunning=!0,this.resolve=function(){},this.reject=function(){},this.result=new Promise((function(t,e){r.resolve=t,r.reject=e}))}return t.prototype.postMessage=function(t,e){this.workerThread.postMessage({source:"Main thread",type:t,payload:e})},t.prototype.done=function(t){Do(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.resolve(t)},t.prototype.error=function(t){Do(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.reject(t)},t}(),zo=new Map;function Bo(t){Do(t.source&&!t.url||!t.source&&t.url);var e=zo.get(t.source||t.url);return e||(t.url&&(e=function(t){if(!t.startsWith("http"))return t;return Uo((e=t,"try {\\n  importScripts(\'"+e+"\');\\n} catch (error) {\\n  console.error(error);\\n  throw error;\\n}"));var e}(t.url),zo.set(t.url,e)),t.source&&(e=Uo(t.source),zo.set(t.source,e))),Do(e),e}function Uo(t){var e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function Go(t,e,r){void 0===e&&(e=!0);var n=r||new Set;if(t){if(Vo(t))n.add(t);else if(Vo(t.buffer))n.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"==typeof t)for(var o in t)Go(t[o],e,n)}else;return void 0===r?Array.from(n):[]}function Vo(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&t instanceof MessagePort||("undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}var Ho=function(){},qo=function(){function t(t){this.terminated=!1,this.loadableURL="";var e=t.name,r=t.source,n=t.url;Do(r||n),this.name=e,this.source=r,this.url=n,this.onMessage=Ho,this.onError=function(t){return console.log(t)},this.worker=this.createBrowserWorker()}return t.isSupported=function(){return"undefined"!=typeof Worker},t.prototype.destroy=function(){this.onMessage=Ho,this.onError=Ho,this.worker.terminate(),this.terminated=!0},Object.defineProperty(t.prototype,"isRunning",{get:function(){return Boolean(this.onMessage)},enumerable:!1,configurable:!0}),t.prototype.postMessage=function(t,e){e=e||Go(t),this.worker.postMessage(t,e)},t.prototype.getErrorFromErrorEvent=function(t){var e="Failed to load ";return e+="worker "+this.name+" from "+this.url+". ",t.message&&(e+=t.message+" in "),t.lineno&&(e+=":"+t.lineno+":"+t.colno),new Error(e)},t.prototype.createBrowserWorker=function(){var t=this;this.loadableURL=Bo({source:this.source,url:this.url});var e=new Worker(this.loadableURL,{name:this.name});return e.onmessage=function(e){e.data?t.onMessage(e.data):t.onError(new Error("No data received"))},e.onerror=function(e){t.onError(t.getErrorFromErrorEvent(e)),t.terminated=!0},e.onmessageerror=function(e){return console.error("worker "+t.name+", message error: "+e)},e},t}(),Zo=self&&self.__assign||function(){return(Zo=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Yo=self&&self.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(t){i(t)}}function u(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},$o=self&&self.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},Ko=function(){function t(t){this.name="unnamed",this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=function(){},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=t.source,this.url=t.url,this.setProps(t)}return t.prototype.destroy=function(){this.idleQueue.forEach((function(t){return t.destroy()})),this.isDestroyed=!0},t.prototype.setProps=function(t){this.props=Zo(Zo({},this.props),t),void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)},t.prototype.startJob=function(t,e,r){return void 0===e&&(e=function(t,e,r){return t.done(r)}),void 0===r&&(r=function(t,e){return t.error(e)}),Yo(this,void 0,void 0,(function(){var n,o=this;return $o(this,(function(i){switch(i.label){case 0:return n=new Promise((function(n){return o.jobQueue.push({name:t,onMessage:e,onError:r,onStart:n}),o})),this.startQueuedJob(),[4,n];case 1:return[2,i.sent()]}}))}))},t.prototype.startQueuedJob=function(){return Yo(this,void 0,void 0,(function(){var t,e,r;return $o(this,(function(n){switch(n.label){case 0:if(!this.jobQueue.length)return[2];if(!(t=this.getAvailableWorker()))return[2];if(!(e=this.jobQueue.shift()))return[3,4];this.onDebug({message:"Starting job",name:e.name,backlog:this.jobQueue.length,workerThread:t}),r=new Wo(e.name,t),t.onMessage=function(t){return e.onMessage(r,t.type,t.payload)},t.onError=function(t){return e.onError(r,t)},e.onStart(r),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,r.result];case 2:return n.sent(),[3,4];case 3:return this.returnWorkerToQueue(t),[7];case 4:return[2]}}))}))},t.prototype.returnWorkerToQueue=function(t){this.isDestroyed||!this.reuseWorkers||this.count>this.getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this.startQueuedJob()},t.prototype.getAvailableWorker=function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this.getMaxConcurrency()){this.count++;var t=this.name.toLowerCase()+" (#"+this.count+" of "+this.maxConcurrency+")";return new qo({name:t,source:this.source,url:this.url})}return null},t.prototype.getMaxConcurrency=function(){return Fo?this.maxMobileConcurrency:this.maxConcurrency},t}(),Qo=self&&self.__assign||function(){return(Qo=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Xo=self&&self.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jo={maxConcurrency:3,maxMobileConcurrency:1,onDebug:function(){},reuseWorkers:!0},ti=(function(){function t(t){this.workerPools=new Map,this.props=Qo({},Jo),this.setProps(t),this.workerPools=new Map}t.isSupported=function(){return qo.isSupported()},t.getWorkerFarm=function(e){return void 0===e&&(e={}),t.workerFarm=t.workerFarm||new t({}),t.workerFarm.setProps(e),t.workerFarm},t.prototype.destroy=function(){var t,e;try{for(var r=Xo(this.workerPools.values()),n=r.next();!n.done;n=r.next()){n.value.destroy()}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t.prototype.setProps=function(t){var e,r;this.props=Qo(Qo({},this.props),t);try{for(var n=Xo(this.workerPools.values()),o=n.next();!o.done;o=n.next()){o.value.setProps(this.getWorkerPoolProps())}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.getWorkerPool=function(t){var e=t.name,r=t.source,n=t.url,o=this.workerPools.get(e);return o||((o=new Ko({name:e,source:r,url:n})).setProps(this.getWorkerPoolProps()),this.workerPools.set(e,o)),o},t.prototype.getWorkerPoolProps=function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}(),new Map),ei=function(){function t(){}return Object.defineProperty(t,"onmessage",{set:function(t){self.onmessage=function(e){if(ri(e)){var r=e.data,n=r.type,o=r.payload;t(n,o)}}},enumerable:!1,configurable:!0}),t.addEventListener=function(t){var e=ti.get(t);e||(e=function(e){if(ri(e)){var r=e.data,n=r.type,o=r.payload;t(n,o)}}),self.addEventListener("message",e)},t.removeEventListener=function(t){var e=ti.get(t);ti.delete(t),self.removeEventListener("message",e)},t.postMessage=function(t,e){if(self){var r={source:"Worker thread",type:t,payload:e},n=Go(e);self.postMessage(r,n)}},t}();function ri(t){var e=t.type,r=t.data;return"message"===e&&r&&"string"==typeof r.source&&"Main thread"===r.source}self&&self.__awaiter,self&&self.__generator;var ni,oi,ii=function(){function t(){this._values=[],this._settlers=[],this._closed=!1}return t.prototype[Symbol.asyncIterator]=function(){return this},t.prototype.push=function(t){return this.enqueue(t)},t.prototype.enqueue=function(t){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var e=this._settlers.shift();t instanceof Error?e.reject(t):e.resolve({value:t})}else this._values.push(t)},t.prototype.close=function(){for(;this._settlers.length>0;){this._settlers.shift().resolve({done:!0})}this._closed=!0},t.prototype.next=function(){var t=this;if(this._values.length>0){var e=this._values.shift();return e instanceof Error?Promise.reject(e):Promise.resolve({done:!1,value:e})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0,value:void 0})}return new Promise((function(e,r){t._settlers.push({resolve:e,reject:r})}))},t}(),ai=self&&self.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(t){i(t)}}function u(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},ui=self&&self.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},si=self&&self.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,o){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,o,(e=t[r](e)).done,e.value)}))}}},ci=0;function fi(t,e){var r=this;if("undefined"!=typeof self){var n={process:li};ei.onmessage=function(o,i){return ai(r,void 0,void 0,(function(){var r,a,u,s,c,f,l,h,p,v;return ui(this,(function(d){switch(d.label){case 0:switch(d.trys.push([0,19,,20]),o){case"process":return[3,1];case"process-in-batches":return[3,3];case"input-batch":return[3,16];case"input-done":return[3,17]}return[3,18];case 1:if(!t)throw new Error("Worker does not support atomic processing");return[4,t(i.input,i.options||{},n)];case 2:return r=d.sent(),ei.postMessage("done",{result:r}),[3,18];case 3:if(!e)throw new Error("Worker does not support batched processing");ni=new ii,oi=i.options||{},a=e(ni,oi,n),d.label=4;case 4:d.trys.push([4,9,10,15]),u=si(a),d.label=5;case 5:return[4,u.next()];case 6:if((s=d.sent()).done)return[3,8];c=s.value,ei.postMessage("output-batch",{result:c}),d.label=7;case 7:return[3,5];case 8:return[3,15];case 9:return f=d.sent(),p={error:f},[3,15];case 10:return d.trys.push([10,,13,14]),s&&!s.done&&(v=u.return)?[4,v.call(u)]:[3,12];case 11:d.sent(),d.label=12;case 12:return[3,14];case 13:if(p)throw p.error;return[7];case 14:return[7];case 15:return ei.postMessage("done",{}),[3,18];case 16:return ni.push(i.input),[3,18];case 17:return ni.close(),[3,18];case 18:return[3,20];case 19:return l=d.sent(),h=l instanceof Error?l.message:"",ei.postMessage("error",{error:h}),[3,20];case 20:return[2]}}))}))}}}function li(t,e){return void 0===e&&(e={}),new Promise((function(r,n){var o=ci++,i=function(t,e){if(e.id===o)switch(t){case"done":ei.removeEventListener(i),r(e.result);break;case"error":ei.removeEventListener(i),n(e.error)}};ei.addEventListener(i);var a={id:o,input:t,options:e};ei.postMessage("process",a)}))}self&&self.__awaiter,self&&self.__generator;var hi={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},pi=yt("span").classList,vi=pi&&pi.constructor&&pi.constructor.prototype,di=vi===Object.prototype?void 0:vi,yi=Array.isArray||function(t){return"Array"==ve(t)},gi=ot("species"),mi=Array,bi=function(t,e){return new(function(t){var e;return yi(t)&&(e=t.constructor,(Pr(e)&&(e===mi||yi(e.prototype))||pt(e)&&null===(e=e[gi]))&&(e=void 0)),void 0===e?mi:e}(t))(0===e?0:e)},xi=N([].push),wi=function(t){var e=1==t,r=2==t,n=3==t,o=4==t,i=6==t,a=7==t,u=5==t||i;return function(s,c,f,l){for(var h,p,v=z(s),d=Se(v),y=Br(c,f),g=Fe(d),m=0,b=l||bi,x=e?b(s,g):r||a?b(s,0):void 0;g>m;m++)if((u||m in d)&&(p=y(h=d[m],m,v),t))if(e)x[m]=p;else if(p)switch(t){case 3:return!0;case 5:return h;case 6:return m;case 2:xi(x,h)}else switch(t){case 4:return!1;case 7:xi(x,h)}return i?-1:n||o?o:x}},Ei={forEach:wi(0),map:wi(1),filter:wi(2),some:wi(3),every:wi(4),find:wi(5),findIndex:wi(6),filterReject:wi(7)},Ai=function(t,e){var r=[][t];return!!r&&P((function(){r.call(null,e||function(){return 1},1)}))},Oi=Ei.forEach,Si=Ai("forEach")?[].forEach:function(t){return Oi(this,t,arguments.length>1?arguments[1]:void 0)},Ti=function(t){if(t&&t.forEach!==Si)try{ee(t,"forEach",Si)}catch(e){t.forEach=Si}};for(var ki in hi)hi[ki]&&Ti(S[ki]&&S[ki].prototype);Ti(di);var Ii=function(t,e,r){var n=Ft(e);n in t?Ut.f(t,n,te(0,r)):t[n]=r},ji=ot("species"),Pi=function(t){return X>=51||!P((function(){var e=[];return(e.constructor={})[ji]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},_i=Pi("slice"),Mi=ot("species"),Li=Array,Ri=Math.max;ir({target:"Array",proto:!0,forced:!_i},{slice:function(t,e){var r,n,o,i=Te(this),a=Fe(i),u=Ne(t,a),s=Ne(void 0===e?a:e,a);if(yi(i)&&(r=i.constructor,(Pr(r)&&(r===Li||yi(r.prototype))||pt(r)&&null===(r=r[Mi]))&&(r=void 0),r===Li||void 0===r))return Gr(i,u,s);for(n=new(void 0===r?Li:r)(Ri(s-u,0)),o=0;u<s;u++,o++)u in i&&Ii(n,o,i[u]);return n.length=o,n}});var Ni=qt.EXISTS,Ci=Function.prototype,Di=N(Ci.toString),Fi=/function\\b(?:\\s|\\/\\*[\\S\\s]*?\\*\\/|\\/\\/[^\\n\\r]*[\\n\\r]+)*([^\\s(/]*)/,Wi=N(Fi.exec);lt&&!Ni&&pr(Ci,"name",{configurable:!0,get:function(){try{return Wi(Fi,Di(this))[1]}catch(t){return""}}});var zi,Bi=Object.keys||function(t){return Ge(t,Ve)},Ui={f:lt&&!mt?Object.defineProperties:function(t,e){wt(t);for(var r,n=Te(e),o=Bi(e),i=o.length,a=0;i>a;)Ut.f(t,r=o[a++],n[r]);return t}},Gi=ne("IE_PROTO"),Vi=function(){},Hi=function(t){return"<script>"+t+"<\\/script>"},qi=function(t){t.write(Hi("")),t.close();var e=t.parentWindow.Object;return t=null,e},Zi=function(){try{zi=new ActiveXObject("htmlfile")}catch(t){}var t,e;Zi="undefined"!=typeof document?document.domain&&zi?qi(zi):((e=yt("iframe")).style.display="none",Ur.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Hi("document.F=Object")),t.close(),t.F):qi(zi);for(var r=Ve.length;r--;)delete Zi.prototype[Ve[r]];return Zi()};oe[Gi]=!0;var Yi=Object.create||function(t,e){var r;return null!==t?(Vi.prototype=wt(t),r=new Vi,Vi.prototype=null,r[Gi]=t):r=Zi(),void 0===e?r:Ui.f(r,e)},$i=Ut.f,Ki=ot("unscopables"),Qi=Array.prototype;null==Qi[Ki]&&$i(Qi,Ki,{configurable:!0,value:Yi(null)});var Xi,Ji,ta,ea=function(t){Qi[Ki][t]=!0},ra=!P((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),na=ne("IE_PROTO"),oa=Object,ia=oa.prototype,aa=ra?oa.getPrototypeOf:function(t){var e=z(t);if(U(e,na))return e[na];var r=e.constructor;return ft(r)&&e instanceof r?r.prototype:e instanceof oa?ia:null},ua=ot("iterator"),sa=!1;[].keys&&("next"in(ta=[].keys())?(Ji=aa(aa(ta)))!==Object.prototype&&(Xi=Ji):sa=!0),(!pt(Xi)||P((function(){var t={};return Xi[ua].call(t)!==t})))&&(Xi={}),ft(Xi[ua])||le(Xi,ua,(function(){return this}));var ca={IteratorPrototype:Xi,BUGGY_SAFARI_ITERATORS:sa},fa=ca.IteratorPrototype,la=function(){return this},ha=qt.PROPER,pa=qt.CONFIGURABLE,va=ca.IteratorPrototype,da=ca.BUGGY_SAFARI_ITERATORS,ya=ot("iterator"),ga=function(){return this},ma=function(t,e,r,n,o,i,a){!function(t,e,r,n){var o=e+" Iterator";t.prototype=Yi(fa,{next:te(+!n,r)}),hr(t,o,!1),po[o]=la}(r,e,n);var u,s,c,f=function(t){if(t===o&&d)return d;if(!da&&t in p)return p[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},l=e+" Iterator",h=!1,p=t.prototype,v=p[ya]||p["@@iterator"]||o&&p[o],d=!da&&v||f(o),y="Array"==e&&p.entries||v;if(y&&(u=aa(y.call(new t)))!==Object.prototype&&u.next&&(aa(u)!==va&&(cr?cr(u,va):ft(u[ya])||le(u,ya,ga)),hr(u,l,!0)),ha&&"values"==o&&v&&"values"!==v.name&&(pa?ee(p,"name","values"):(h=!0,d=function(){return At(v,this)})),o)if(s={values:f("values"),keys:i?d:f("keys"),entries:f("entries")},a)for(c in s)(da||h||!(c in p))&&le(p,c,s[c]);else ir({target:e,proto:!0,forced:da||h},s);return p[ya]!==d&&le(p,ya,d,{name:o}),po[e]=d,s},ba=function(t,e){return{value:t,done:e}},xa=Ut.f,wa=ce.set,Ea=ce.getterFor("Array Iterator"),Aa=ma(Array,"Array",(function(t,e){wa(this,{type:"Array Iterator",target:Te(t),index:0,kind:e})}),(function(){var t=Ea(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,ba(void 0,!0)):ba("keys"==r?n:"values"==r?e[n]:[n,e[n]],!1)}),"values"),Oa=po.Arguments=po.Array;if(ea("keys"),ea("values"),ea("entries"),lt&&"values"!==Oa.name)try{xa(Oa,"name",{value:"values"})}catch(t){}var Sa,Ta,ka,Ia="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,ja=ce.enforce,Pa=ce.get,_a=S.Int8Array,Ma=_a&&_a.prototype,La=S.Uint8ClampedArray,Ra=La&&La.prototype,Na=_a&&aa(_a),Ca=Ma&&aa(Ma),Da=Object.prototype,Fa=S.TypeError,Wa=ot("toStringTag"),za=q("TYPED_ARRAY_TAG"),Ba=Ia&&!!cr&&"Opera"!==me(S.opera),Ua=!1,Ga={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Va={BigInt64Array:8,BigUint64Array:8},Ha=function(t){var e=aa(t);if(pt(e)){var r=Pa(e);return r&&U(r,"TypedArrayConstructor")?r.TypedArrayConstructor:Ha(e)}},qa=function(t){if(!pt(t))return!1;var e=me(t);return U(Ga,e)||U(Va,e)};for(Sa in Ga)(ka=(Ta=S[Sa])&&Ta.prototype)?ja(ka).TypedArrayConstructor=Ta:Ba=!1;for(Sa in Va)(ka=(Ta=S[Sa])&&Ta.prototype)&&(ja(ka).TypedArrayConstructor=Ta);if((!Ba||!ft(Na)||Na===Function.prototype)&&(Na=function(){throw Fa("Incorrect invocation")},Ba))for(Sa in Ga)S[Sa]&&cr(S[Sa],Na);if((!Ba||!Ca||Ca===Da)&&(Ca=Na.prototype,Ba))for(Sa in Ga)S[Sa]&&cr(S[Sa].prototype,Ca);if(Ba&&aa(Ra)!==Ca&&cr(Ra,Ca),lt&&!U(Ca,Wa))for(Sa in Ua=!0,pr(Ca,Wa,{configurable:!0,get:function(){return pt(this)?this[za]:void 0}}),Ga)S[Sa]&&ee(S[Sa],za,Sa);var Za={NATIVE_ARRAY_BUFFER_VIEWS:Ba,TYPED_ARRAY_TAG:Ua&&za,aTypedArray:function(t){if(qa(t))return t;throw Fa("Target is not a typed array")},aTypedArrayConstructor:function(t){if(ft(t)&&(!cr||Tt(Na,t)))return t;throw Fa(Pt(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,r,n){if(lt){if(r)for(var o in Ga){var i=S[o];if(i&&U(i.prototype,t))try{delete i.prototype[t]}catch(r){try{i.prototype[t]=e}catch(t){}}}Ca[t]&&!r||le(Ca,t,r?e:Ba&&Ma[t]||e,n)}},exportTypedArrayStaticMethod:function(t,e,r){var n,o;if(lt){if(cr){if(r)for(n in Ga)if((o=S[n])&&U(o,t))try{delete o[t]}catch(t){}if(Na[t]&&!r)return;try{return le(Na,t,r?e:Ba&&Na[t]||e)}catch(t){}}for(n in Ga)!(o=S[n])||o[t]&&!r||le(o,t,e)}},getTypedArrayConstructor:Ha,isView:function(t){if(!pt(t))return!1;var e=me(t);return"DataView"===e||U(Ga,e)||U(Va,e)},isTypedArray:qa,TypedArray:Na,TypedArrayPrototype:Ca},Ya=Za.NATIVE_ARRAY_BUFFER_VIEWS,$a=S.ArrayBuffer,Ka=S.Int8Array,Qa=!Ya||!P((function(){Ka(1)}))||!P((function(){new Ka(-1)}))||!_o((function(t){new Ka,new Ka(null),new Ka(1.5),new Ka(t)}),!0)||P((function(){return 1!==new Ka(new $a(2),1,void 0).length})),Xa=function(t,e,r){for(var n in e)le(t,n,e[n],r);return t},Ja=RangeError,tu=function(t){if(void 0===t)return 0;var e=Me(t),r=De(e);if(e!==r)throw Ja("Wrong length or index");return r},eu=Array,ru=Math.abs,nu=Math.pow,ou=Math.floor,iu=Math.log,au=Math.LN2,uu=function(t,e,r){var n,o,i,a=eu(r),u=8*r-e-1,s=(1<<u)-1,c=s>>1,f=23===e?nu(2,-24)-nu(2,-77):0,l=t<0||0===t&&1/t<0?1:0,h=0;for((t=ru(t))!=t||t===1/0?(o=t!=t?1:0,n=s):(n=ou(iu(t)/au),t*(i=nu(2,-n))<1&&(n--,i*=2),(t+=n+c>=1?f/i:f*nu(2,1-c))*i>=2&&(n++,i/=2),n+c>=s?(o=0,n=s):n+c>=1?(o=(t*i-1)*nu(2,e),n+=c):(o=t*nu(2,c-1)*nu(2,e),n=0));e>=8;)a[h++]=255&o,o/=256,e-=8;for(n=n<<e|o,u+=e;u>0;)a[h++]=255&n,n/=256,u-=8;return a[--h]|=128*l,a},su=function(t,e){var r,n=t.length,o=8*n-e-1,i=(1<<o)-1,a=i>>1,u=o-7,s=n-1,c=t[s--],f=127&c;for(c>>=7;u>0;)f=256*f+t[s--],u-=8;for(r=f&(1<<-u)-1,f>>=-u,u+=e;u>0;)r=256*r+t[s--],u-=8;if(0===f)f=1-a;else{if(f===i)return r?NaN:c?-1/0:1/0;r+=nu(2,e),f-=a}return(c?-1:1)*r*nu(2,f-e)},cu=function(t){for(var e=z(this),r=Fe(e),n=arguments.length,o=Ne(n>1?arguments[1]:void 0,r),i=n>2?arguments[2]:void 0,a=void 0===i?r:Ne(i,r);a>o;)e[o++]=t;return e},fu=Array,lu=Math.max,hu=function(t,e,r){for(var n=Fe(t),o=Ne(e,n),i=Ne(void 0===r?n:r,n),a=fu(lu(i-o,0)),u=0;o<i;o++,u++)Ii(a,u,t[o]);return a.length=u,a},pu=qe.f,vu=qt.PROPER,du=qt.CONFIGURABLE,yu=ce.getterFor("ArrayBuffer"),gu=ce.getterFor("DataView"),mu=ce.set,bu=S.ArrayBuffer,xu=bu,wu=xu&&xu.prototype,Eu=S.DataView,Au=Eu&&Eu.prototype,Ou=Object.prototype,Su=S.Array,Tu=S.RangeError,ku=N(cu),Iu=N([].reverse),ju=uu,Pu=su,_u=function(t){return[255&t]},Mu=function(t){return[255&t,t>>8&255]},Lu=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},Ru=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},Nu=function(t){return ju(t,23,4)},Cu=function(t){return ju(t,52,8)},Du=function(t,e,r){pr(t.prototype,e,{configurable:!0,get:function(){return r(this)[e]}})},Fu=function(t,e,r,n){var o=tu(r),i=gu(t);if(o+e>i.byteLength)throw Tu("Wrong index");var a=i.bytes,u=o+i.byteOffset,s=hu(a,u,u+e);return n?s:Iu(s)},Wu=function(t,e,r,n,o,i){var a=tu(r),u=gu(t);if(a+e>u.byteLength)throw Tu("Wrong index");for(var s=u.bytes,c=a+u.byteOffset,f=n(+o),l=0;l<e;l++)s[c+l]=f[i?l:e-l-1]};if(Ia){var zu=vu&&"ArrayBuffer"!==bu.name;if(P((function(){bu(1)}))&&P((function(){new bu(-1)}))&&!P((function(){return new bu,new bu(1.5),new bu(NaN),1!=bu.length||zu&&!du})))zu&&du&&ee(bu,"name","ArrayBuffer");else{(xu=function(t){return gr(this,wu),new bu(tu(t))}).prototype=wu;for(var Bu,Uu=pu(bu),Gu=0;Uu.length>Gu;)(Bu=Uu[Gu++])in xu||ee(xu,Bu,bu[Bu]);wu.constructor=xu}cr&&aa(Au)!==Ou&&cr(Au,Ou);var Vu=new Eu(new xu(2)),Hu=N(Au.setInt8);Vu.setInt8(0,2147483648),Vu.setInt8(1,2147483649),!Vu.getInt8(0)&&Vu.getInt8(1)||Xa(Au,{setInt8:function(t,e){Hu(this,t,e<<24>>24)},setUint8:function(t,e){Hu(this,t,e<<24>>24)}},{unsafe:!0})}else wu=(xu=function(t){gr(this,wu);var e=tu(t);mu(this,{type:"ArrayBuffer",bytes:ku(Su(e),0),byteLength:e}),lt||(this.byteLength=e,this.detached=!1)}).prototype,Au=(Eu=function(t,e,r){gr(this,Au),gr(t,wu);var n=yu(t),o=n.byteLength,i=Me(e);if(i<0||i>o)throw Tu("Wrong offset");if(i+(r=void 0===r?o-i:De(r))>o)throw Tu("Wrong length");mu(this,{type:"DataView",buffer:t,byteLength:r,byteOffset:i,bytes:n.bytes}),lt||(this.buffer=t,this.byteLength=r,this.byteOffset=i)}).prototype,lt&&(Du(xu,"byteLength",yu),Du(Eu,"buffer",gu),Du(Eu,"byteLength",gu),Du(Eu,"byteOffset",gu)),Xa(Au,{getInt8:function(t){return Fu(this,1,t)[0]<<24>>24},getUint8:function(t){return Fu(this,1,t)[0]},getInt16:function(t){var e=Fu(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Fu(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return Ru(Fu(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return Ru(Fu(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return Pu(Fu(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return Pu(Fu(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){Wu(this,1,t,_u,e)},setUint8:function(t,e){Wu(this,1,t,_u,e)},setInt16:function(t,e){Wu(this,2,t,Mu,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){Wu(this,2,t,Mu,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){Wu(this,4,t,Lu,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){Wu(this,4,t,Lu,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){Wu(this,4,t,Nu,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){Wu(this,8,t,Cu,e,arguments.length>2?arguments[2]:void 0)}});hr(xu,"ArrayBuffer"),hr(Eu,"DataView");var qu={ArrayBuffer:xu,DataView:Eu},Zu=Math.floor,Yu=Number.isInteger||function(t){return!pt(t)&&isFinite(t)&&Zu(t)===t},$u=RangeError,Ku=RangeError,Qu=function(t,e){var r=function(t){var e=Me(t);if(e<0)throw $u("The argument can\'t be less than 0");return e}(t);if(r%e)throw Ku("Wrong offset");return r},Xu=function(t){var e=me(t);return"BigInt64Array"==e||"BigUint64Array"==e},Ju=TypeError,ts=function(t){var e=Dt(t,"number");if("number"==typeof e)throw Ju("Can\'t convert number to bigint");return BigInt(e)},es=Za.aTypedArrayConstructor,rs=function(t){var e,r,n,o,i,a,u,s,c=Mr(this),f=z(t),l=arguments.length,h=l>1?arguments[1]:void 0,p=void 0!==h,v=bo(f);if(v&&!go(v))for(s=(u=wo(f,v)).next,f=[];!(a=At(s,u)).done;)f.push(a.value);for(p&&l>2&&(h=Br(h,arguments[2])),r=Fe(f),n=new(es(c))(r),o=Xu(n),e=0;r>e;e++)i=p?h(f[e],e):f[e],n[e]=o?ts(i):+i;return n},ns=function(t,e,r){var n,o;return cr&&ft(n=e.constructor)&&n!==r&&pt(o=n.prototype)&&o!==r.prototype&&cr(t,o),t},os=w((function(t){var e=qe.f,r=Ei.forEach,n=ce.get,o=ce.set,i=ce.enforce,a=Ut.f,u=Ie.f,s=Math.round,c=S.RangeError,f=qu.ArrayBuffer,l=f.prototype,h=qu.DataView,p=Za.NATIVE_ARRAY_BUFFER_VIEWS,v=Za.TYPED_ARRAY_TAG,d=Za.TypedArray,y=Za.TypedArrayPrototype,g=Za.aTypedArrayConstructor,m=Za.isTypedArray,b=function(t,e){g(t);for(var r=0,n=e.length,o=new t(n);n>r;)o[r]=e[r++];return o},x=function(t,e){pr(t,e,{configurable:!0,get:function(){return n(this)[e]}})},w=function(t){var e;return Tt(l,t)||"ArrayBuffer"==(e=me(t))||"SharedArrayBuffer"==e},E=function(t,e){return m(t)&&!It(e)&&e in t&&Yu(+e)&&e>=0},A=function(t,e){return e=Ft(e),E(t,e)?te(2,t[e]):u(t,e)},O=function(t,e,r){return e=Ft(e),!(E(t,e)&&pt(r)&&U(r,"value"))||U(r,"get")||U(r,"set")||r.configurable||U(r,"writable")&&!r.writable||U(r,"enumerable")&&!r.enumerable?a(t,e,r):(t[e]=r.value,t)};lt?(p||(Ie.f=A,Ut.f=O,x(y,"buffer"),x(y,"byteOffset"),x(y,"byteLength"),x(y,"length")),ir({target:"Object",stat:!0,forced:!p},{getOwnPropertyDescriptor:A,defineProperty:O}),t.exports=function(t,u,l){var g=t.match(/\\d+/)[0]/8,x=t+(l?"Clamped":"")+"Array",E="get"+t,A="set"+t,O=S[x],T=O,k=T&&T.prototype,I={},j=function(t,e){a(t,e,{get:function(){return function(t,e){var r=n(t);return r.view[E](e*g+r.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){var o=n(t);l&&(r=(r=s(r))<0?0:r>255?255:255&r),o.view[A](e*g+o.byteOffset,r,!0)}(this,e,t)},enumerable:!0})};p?Qa&&(T=u((function(t,e,r,n){return gr(t,k),ns(pt(e)?w(e)?void 0!==n?new O(e,Qu(r,g),n):void 0!==r?new O(e,Qu(r,g)):new O(e):m(e)?b(T,e):At(rs,T,e):new O(tu(e)),t,T)})),cr&&cr(T,d),r(e(O),(function(t){t in T||ee(T,t,O[t])})),T.prototype=k):(T=u((function(t,e,r,n){gr(t,k);var i,a,u,s=0,l=0;if(pt(e)){if(!w(e))return m(e)?b(T,e):At(rs,T,e);i=e,l=Qu(r,g);var p=e.byteLength;if(void 0===n){if(p%g)throw c("Wrong length");if((a=p-l)<0)throw c("Wrong length")}else if((a=De(n)*g)+l>p)throw c("Wrong length");u=a/g}else u=tu(e),i=new f(a=u*g);for(o(t,{buffer:i,byteOffset:l,byteLength:a,length:u,view:new h(i)});s<u;)j(t,s++)})),cr&&cr(T,d),k=T.prototype=Yi(y)),k.constructor!==T&&ee(k,"constructor",T),i(k).TypedArrayConstructor=T,v&&ee(k,v,x);var P=T!=O;I[x]=T,ir({global:!0,constructor:!0,forced:P,sham:!p},I),"BYTES_PER_ELEMENT"in T||ee(T,"BYTES_PER_ELEMENT",g),"BYTES_PER_ELEMENT"in k||ee(k,"BYTES_PER_ELEMENT",g),dr(x)}):t.exports=function(){}}));os("Uint8",(function(t){return function(e,r,n){return t(this,e,r,n)}}),!0);var is=TypeError,as=function(t,e){if(!delete t[e])throw is("Cannot delete property "+Pt(e)+" of "+Pt(t))},us=Math.min,ss=N([].copyWithin||function(t,e){var r=z(this),n=Fe(r),o=Ne(t,n),i=Ne(e,n),a=arguments.length>2?arguments[2]:void 0,u=us((void 0===a?n:Ne(a,n))-i,n-o),s=1;for(i<o&&o<i+u&&(s=-1,i+=u-1,o+=u-1);u-- >0;)i in r?r[o]=r[i]:as(r,o),o+=s,i+=s;return r}),cs=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("copyWithin",(function(t,e){return ss(cs(this),t,e,arguments.length>2?arguments[2]:void 0)}));var fs=Ei.every,ls=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("every",(function(t){return fs(ls(this),t,arguments.length>1?arguments[1]:void 0)}));var hs=Za.aTypedArray,ps=Za.exportTypedArrayMethod,vs=N("".slice);ps("fill",(function(t){var e=arguments.length;hs(this);var r="Big"===vs(me(this),0,3)?ts(t):+t;return At(cu,this,r,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}),P((function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),1!==t})));var ds=Za.aTypedArrayConstructor,ys=Za.getTypedArrayConstructor,gs=function(t){return ds(Rr(t,ys(t)))},ms=function(t,e){return function(t,e){for(var r=0,n=Fe(e),o=new t(n);n>r;)o[r]=e[r++];return o}(gs(t),e)},bs=Ei.filter,xs=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("filter",(function(t){var e=bs(xs(this),t,arguments.length>1?arguments[1]:void 0);return ms(this,e)}));var ws=Ei.find,Es=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("find",(function(t){return ws(Es(this),t,arguments.length>1?arguments[1]:void 0)}));var As=Ei.findIndex,Os=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("findIndex",(function(t){return As(Os(this),t,arguments.length>1?arguments[1]:void 0)}));var Ss=Ei.forEach,Ts=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("forEach",(function(t){Ss(Ts(this),t,arguments.length>1?arguments[1]:void 0)}));var ks=ze.includes,Is=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("includes",(function(t){return ks(Is(this),t,arguments.length>1?arguments[1]:void 0)}));var js=ze.indexOf,Ps=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("indexOf",(function(t){return js(Ps(this),t,arguments.length>1?arguments[1]:void 0)}));var _s=ot("iterator"),Ms=S.Uint8Array,Ls=N(Aa.values),Rs=N(Aa.keys),Ns=N(Aa.entries),Cs=Za.aTypedArray,Ds=Za.exportTypedArrayMethod,Fs=Ms&&Ms.prototype,Ws=!P((function(){Fs[_s].call([1])})),zs=!!Fs&&Fs.values&&Fs[_s]===Fs.values&&"values"===Fs.values.name,Bs=function(){return Ls(Cs(this))};Ds("entries",(function(){return Ns(Cs(this))}),Ws),Ds("keys",(function(){return Rs(Cs(this))}),Ws),Ds("values",Bs,Ws||!zs,{name:"values"}),Ds(_s,Bs,Ws||!zs,{name:"values"});var Us=Za.aTypedArray,Gs=Za.exportTypedArrayMethod,Vs=N([].join);Gs("join",(function(t){return Vs(Us(this),t)}));var Hs=Math.min,qs=[].lastIndexOf,Zs=!!qs&&1/[1].lastIndexOf(1,-0)<0,Ys=Ai("lastIndexOf"),$s=Zs||!Ys?function(t){if(Zs)return Fr(qs,this,arguments)||0;var e=Te(this),r=Fe(e),n=r-1;for(arguments.length>1&&(n=Hs(n,Me(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}:qs,Ks=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("lastIndexOf",(function(t){var e=arguments.length;return Fr($s,Ks(this),e>1?[t,arguments[1]]:[t])}));var Qs=Ei.map,Xs=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("map",(function(t){return Qs(Xs(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(gs(t))(e)}))}));var Js=TypeError,tc=function(t){return function(e,r,n,o){Mt(r);var i=z(e),a=Se(i),u=Fe(i),s=t?u-1:0,c=t?-1:1;if(n<2)for(;;){if(s in a){o=a[s],s+=c;break}if(s+=c,t?s<0:u<=s)throw Js("Reduce of empty array with no initial value")}for(;t?s>=0:u>s;s+=c)s in a&&(o=r(o,a[s],s,i));return o}},ec={left:tc(!1),right:tc(!0)},rc=ec.left,nc=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("reduce",(function(t){var e=arguments.length;return rc(nc(this),t,e,e>1?arguments[1]:void 0)}));var oc=ec.right,ic=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("reduceRight",(function(t){var e=arguments.length;return oc(ic(this),t,e,e>1?arguments[1]:void 0)}));var ac=Za.aTypedArray,uc=Za.exportTypedArrayMethod,sc=Math.floor;uc("reverse",(function(){for(var t,e=ac(this).length,r=sc(e/2),n=0;n<r;)t=this[n],this[n++]=this[--e],this[e]=t;return this}));var cc=S.RangeError,fc=S.Int8Array,lc=fc&&fc.prototype,hc=lc&&lc.set,pc=Za.aTypedArray,vc=Za.exportTypedArrayMethod,dc=!P((function(){var t=new Uint8ClampedArray(2);return At(hc,t,{length:1,0:3},1),3!==t[1]})),yc=dc&&Za.NATIVE_ARRAY_BUFFER_VIEWS&&P((function(){var t=new fc(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));vc("set",(function(t){pc(this);var e=Qu(arguments.length>1?arguments[1]:void 0,1),r=z(t);if(dc)return At(hc,this,r,e);var n=this.length,o=Fe(r),i=0;if(o+e>n)throw cc("Wrong length");for(;i<o;)this[e+i]=r[i++]}),!dc||yc);var gc=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("slice",(function(t,e){for(var r=Gr(gc(this),t,e),n=gs(this),o=0,i=r.length,a=new n(i);i>o;)a[o]=r[o++];return a}),P((function(){new Int8Array(1).slice()})));var mc=Ei.some,bc=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("some",(function(t){return mc(bc(this),t,arguments.length>1?arguments[1]:void 0)}));var xc=Math.floor,wc=function(t,e){var r=t.length,n=xc(r/2);return r<8?Ec(t,e):Ac(t,wc(hu(t,0,n),e),wc(hu(t,n),e),e)},Ec=function(t,e){for(var r,n,o=t.length,i=1;i<o;){for(n=i,r=t[i];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==i++&&(t[n]=r)}return t},Ac=function(t,e,r,n){for(var o=e.length,i=r.length,a=0,u=0;a<o||u<i;)t[a+u]=a<o&&u<i?n(e[a],r[u])<=0?e[a++]:r[u++]:a<o?e[a++]:r[u++];return t},Oc=wc,Sc=Z.match(/firefox\\/(\\d+)/i),Tc=!!Sc&&+Sc[1],kc=/MSIE|Trident/.test(Z),Ic=Z.match(/AppleWebKit\\/(\\d+)\\./),jc=!!Ic&&+Ic[1],Pc=Za.aTypedArray,_c=Za.exportTypedArrayMethod,Mc=S.Uint16Array,Lc=Mc&&Wr(Mc.prototype.sort),Rc=!(!Lc||P((function(){Lc(new Mc(2),null)}))&&P((function(){Lc(new Mc(2),{})}))),Nc=!!Lc&&!P((function(){if(X)return X<74;if(Tc)return Tc<67;if(kc)return!0;if(jc)return jc<602;var t,e,r=new Mc(516),n=Array(516);for(t=0;t<516;t++)e=t%4,r[t]=515-t,n[t]=t-2*e+3;for(Lc(r,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(r[t]!==n[t])return!0}));_c("sort",(function(t){return void 0!==t&&Mt(t),Nc?Lc(this,t):Oc(Pc(this),function(t){return function(e,r){return void 0!==t?+t(e,r)||0:r!=r?-1:e!=e?1:0===e&&0===r?1/e>0&&1/r<0?1:-1:e>r}}(t))}),!Nc||Rc);var Cc=Za.aTypedArray;(0,Za.exportTypedArrayMethod)("subarray",(function(t,e){var r=Cc(this),n=r.length,o=Ne(t,n);return new(gs(r))(r.buffer,r.byteOffset+o*r.BYTES_PER_ELEMENT,De((void 0===e?n:Ne(e,n))-o))}));var Dc=S.Int8Array,Fc=Za.aTypedArray,Wc=Za.exportTypedArrayMethod,zc=[].toLocaleString,Bc=!!Dc&&P((function(){zc.call(new Dc(1))}));Wc("toLocaleString",(function(){return Fr(zc,Bc?Gr(Fc(this)):Fc(this),Gr(arguments))}),P((function(){return[1,2].toLocaleString()!=new Dc([1,2]).toLocaleString()}))||!P((function(){Dc.prototype.toLocaleString.call([1,2])})));var Uc=Za.exportTypedArrayMethod,Gc=S.Uint8Array,Vc=Gc&&Gc.prototype||{},Hc=[].toString,qc=N([].join);P((function(){Hc.call({})}))&&(Hc=function(){return qc(this)});var Zc=Vc.toString!=Hc;Uc("toString",Hc,Zc),ir({target:"Array",proto:!0},{fill:cu}),ea("fill");var Yc,$c,Kc=String,Qc=function(t){if("Symbol"===me(t))throw TypeError("Cannot convert a Symbol value to a string");return Kc(t)},Xc=function(){var t=wt(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e},Jc=S.RegExp,tf=P((function(){var t=Jc("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),ef=tf||P((function(){return!Jc("a","y").sticky})),rf={BROKEN_CARET:tf||P((function(){var t=Jc("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:ef,UNSUPPORTED_Y:tf},nf=S.RegExp,of=P((function(){var t=nf(".","s");return!(t.dotAll&&t.exec("\\n")&&"s"===t.flags)})),af=S.RegExp,uf=P((function(){var t=af("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),sf=ce.get,cf=j("native-string-replace",String.prototype.replace),ff=RegExp.prototype.exec,lf=ff,hf=N("".charAt),pf=N("".indexOf),vf=N("".replace),df=N("".slice),yf=($c=/b*/g,At(ff,Yc=/a/,"a"),At(ff,$c,"a"),0!==Yc.lastIndex||0!==$c.lastIndex),gf=rf.BROKEN_CARET,mf=void 0!==/()??/.exec("")[1];(yf||mf||gf||of||uf)&&(lf=function(t){var e,r,n,o,i,a,u,s=this,c=sf(s),f=Qc(t),l=c.raw;if(l)return l.lastIndex=s.lastIndex,e=At(lf,l,f),s.lastIndex=l.lastIndex,e;var h=c.groups,p=gf&&s.sticky,v=At(Xc,s),d=s.source,y=0,g=f;if(p&&(v=vf(v,"y",""),-1===pf(v,"g")&&(v+="g"),g=df(f,s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\\n"!==hf(f,s.lastIndex-1))&&(d="(?: "+d+")",g=" "+g,y++),r=new RegExp("^(?:"+d+")",v)),mf&&(r=new RegExp("^"+d+"$(?!\\\\s)",v)),yf&&(n=s.lastIndex),o=At(ff,p?r:s,g),p?o?(o.input=df(o.input,y),o[0]=df(o[0],y),o.index=s.lastIndex,s.lastIndex+=o[0].length):s.lastIndex=0:yf&&o&&(s.lastIndex=s.global?o.index+o[0].length:n),mf&&o&&o.length>1&&At(cf,o[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&h)for(o.groups=a=Yi(null),i=0;i<h.length;i++)a[(u=h[i])[0]]=o[u[1]];return o});var bf=lf;ir({target:"RegExp",proto:!0,forced:/./.exec!==bf},{exec:bf});var xf,wf=ot("species"),Ef=RegExp.prototype,Af=function(t,e,r,n){var o=ot(t),i=!P((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),a=i&&!P((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[wf]=function(){return r},r.flags="",r[o]=/./[o]),r.exec=function(){return e=!0,null},r[o](""),!e}));if(!i||!a||r){var u=Wr(/./[o]),s=e(o,""[t],(function(t,e,r,n,o){var a=Wr(t),s=e.exec;return s===bf||s===Ef.exec?i&&!o?{done:!0,value:u(e,r,n)}:{done:!0,value:a(r,e,n)}:{done:!1}}));le(String.prototype,t,s[0]),le(Ef,o,s[1])}n&&ee(Ef[o],"sham",!0)},Of=N("".charAt),Sf=N("".charCodeAt),Tf=N("".slice),kf=function(t){return function(e,r){var n,o,i=Qc(F(e)),a=Me(r),u=i.length;return a<0||a>=u?t?"":void 0:(n=Sf(i,a))<55296||n>56319||a+1===u||(o=Sf(i,a+1))<56320||o>57343?t?Of(i,a):n:t?Tf(i,a,a+2):o-56320+(n-55296<<10)+65536}},If={codeAt:kf(!1),charAt:kf(!0)},jf=If.charAt,Pf=function(t,e,r){return e+(r?jf(t,e).length:1)},_f=Math.floor,Mf=N("".charAt),Lf=N("".replace),Rf=N("".slice),Nf=/\\$([$&\'`]|\\d{1,2}|<[^>]*>)/g,Cf=/\\$([$&\'`]|\\d{1,2})/g,Df=function(t,e,r,n,o,i){var a=r+t.length,u=n.length,s=Cf;return void 0!==o&&(o=z(o),s=Nf),Lf(i,s,(function(i,s){var c;switch(Mf(s,0)){case"$":return"$";case"&":return t;case"`":return Rf(e,0,r);case"\'":return Rf(e,a);case"<":c=o[Rf(s,1,-1)];break;default:var f=+s;if(0===f)return i;if(f>u){var l=_f(f/10);return 0===l?i:l<=u?void 0===n[l-1]?Mf(s,1):n[l-1]+Mf(s,1):i}c=n[f-1]}return void 0===c?"":c}))},Ff=TypeError,Wf=function(t,e){var r=t.exec;if(ft(r)){var n=At(r,t,e);return null!==n&&wt(n),n}if("RegExp"===ve(t))return At(bf,t,e);throw Ff("RegExp#exec called on incompatible receiver")},zf=ot("replace"),Bf=Math.max,Uf=Math.min,Gf=N([].concat),Vf=N([].push),Hf=N("".indexOf),qf=N("".slice),Zf="$0"==="a".replace(/./,"$0"),Yf=!!/./[zf]&&""===/./[zf]("a","$0");function $f(t){this.message=t}Af("replace",(function(t,e,r){var n=Yf?"$":"$0";return[function(t,r){var n=F(this),o=C(t)?void 0:Lt(t,zf);return o?At(o,t,n,r):At(e,Qc(n),t,r)},function(t,o){var i=wt(this),a=Qc(t);if("string"==typeof o&&-1===Hf(o,n)&&-1===Hf(o,"$<")){var u=r(e,i,a,o);if(u.done)return u.value}var s=ft(o);s||(o=Qc(o));var c=i.global;if(c){var f=i.unicode;i.lastIndex=0}for(var l=[];;){var h=Wf(i,a);if(null===h)break;if(Vf(l,h),!c)break;""===Qc(h[0])&&(i.lastIndex=Pf(a,De(i.lastIndex),f))}for(var p,v="",d=0,y=0;y<l.length;y++){for(var g=Qc((h=l[y])[0]),m=Bf(Uf(Me(h.index),a.length),0),b=[],x=1;x<h.length;x++)Vf(b,void 0===(p=h[x])?p:String(p));var w=h.groups;if(s){var E=Gf([g],b,m,a);void 0!==w&&Vf(E,w);var A=Qc(Fr(o,void 0,E))}else A=Df(g,a,m,b,w,o);m>=d&&(v+=qf(a,d,m)+A,d=m+g.length)}return v+qf(a,d)}]}),!!P((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!Zf||Yf),$f.prototype=new Error,$f.prototype.name="InvalidCharacterError",ir({global:!0,forced:S.globalThis!==S},{globalThis:S}),xf="undefined"==typeof window?{devicePixelRatio:1,navigator:{userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36",browserLanguage:"zh-CN",language:"zh-CN",platform:""},location:"",document:{documentElement:{style:{}},createEvent:function(){return!0},getElementById:function(t){return!0},createElement:function(){return{className:"",classList:{add:function(){return""}}}},createElementNS:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},querySelector:function(){return!1}},performance:{mark:function(t){return null},clearMeasures:function(t){return null},clearMarks:function(t){return null},measure:function(t,e,r){return{duration:0}},now:function(){return(new Date).getTime()}},Blob:"",dispatchEvent:function(t){return!0},Event:function(t,e){return!0},createElement:function(){return!0},createElementNS:function(){return!0},XMLHttpRequest:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},requestAnimationFrame:function(){return!0},cancelAnimationFrame:function(){return!0},clearTimeout:function(){return!0}}:window,"undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM?my.getSystemInfoSync().pixelRatio:xf.devicePixelRatio;var Kf=TypeError,Qf=Object.getOwnPropertyDescriptor,Xf=lt&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}()?function(t,e){if(yi(t)&&!Qf(t,"length").writable)throw Kf("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e},Jf=TypeError,tl=function(t){if(t>9007199254740991)throw Jf("Maximum allowed index exceeded");return t},el=Pi("splice"),rl=Math.max,nl=Math.min;ir({target:"Array",proto:!0,forced:!el},{splice:function(t,e){var r,n,o,i,a,u,s=z(this),c=Fe(s),f=Ne(t,c),l=arguments.length;for(0===l?r=n=0:1===l?(r=0,n=c-f):(r=l-2,n=nl(rl(Me(e),0),c-f)),tl(c+r-n),o=bi(s,n),i=0;i<n;i++)(a=f+i)in s&&Ii(o,i,s[a]);if(o.length=n,r<n){for(i=f;i<c-n;i++)u=i+r,(a=i+n)in s?s[u]=s[a]:as(s,u);for(i=c;i>c-n+r;i--)as(s,i-1)}else if(r>n)for(i=c-n;i>f;i--)u=i+r-1,(a=i+n-1)in s?s[u]=s[a]:as(s,u);for(i=0;i<r;i++)s[i+f]=arguments[i+2];return Xf(s,c-n+r),o}});var ol=u((function t(e,r){i(this,t),s(this,"cancelBubble",void 0),s(this,"cancelable",void 0),s(this,"target",void 0),s(this,"currentTarget",void 0),s(this,"preventDefault",void 0),s(this,"stopPropagation",void 0),s(this,"type",void 0),s(this,"timeStamp",void 0),this.cancelBubble=!1,this.cancelable=!1,this.target=null,this.currentTarget=null,this.preventDefault=function(){},this.stopPropagation=function(){},this.type=e,this.timeStamp=Date.now()})),il=Object.assign,al=Object.defineProperty,ul=N([].concat),sl=!il||P((function(){if(lt&&1!==il({b:1},il(al({},"a",{enumerable:!0,get:function(){al(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol();return t[r]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=il({},t)[r]||"abcdefghijklmnopqrst"!=Bi(il({},e)).join("")}))?function(t,e){for(var r=z(t),n=arguments.length,o=1,i=Ze.f,a=Ee.f;n>o;)for(var u,s=Se(arguments[o++]),c=i?ul(Bi(s),i(s)):Bi(s),f=c.length,l=0;f>l;)u=c[l++],lt&&!At(a,s,u)||(r[u]=s[u]);return r}:il;ir({target:"Object",stat:!0,arity:2,forced:Object.assign!==sl},{assign:sl});var cl=Ei.findIndex,fl=!0;"findIndex"in[]&&Array(1).findIndex((function(){fl=!1})),ir({target:"Array",proto:!0,forced:fl},{findIndex:function(t){return cl(this,t,arguments.length>1?arguments[1]:void 0)}}),ea("findIndex");var ll=If.charAt,hl=ce.set,pl=ce.getterFor("String Iterator");ma(String,"String",(function(t){hl(this,{type:"String Iterator",string:Qc(t),index:0})}),(function(){var t,e=pl(this),r=e.string,n=e.index;return n>=r.length?ba(void 0,!0):(t=ll(r,n),e.index+=t.length,ba(t,!1))}));var vl=!P((function(){return Object.isExtensible(Object.preventExtensions({}))})),dl=qe.f,yl="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],gl={f:function(t){return yl&&"Window"==ve(t)?function(t){try{return dl(t)}catch(t){return hu(yl)}}(t):dl(Te(t))}},ml=P((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})),bl=Object.isExtensible,xl=P((function(){bl(1)}))||ml?function(t){return!!pt(t)&&((!ml||"ArrayBuffer"!=ve(t))&&(!bl||bl(t)))}:bl,wl=w((function(t){var e=Ut.f,r=!1,n=q("meta"),o=0,i=function(t){e(t,n,{value:{objectID:"O"+o++,weakData:{}}})},a=t.exports={enable:function(){a.enable=function(){},r=!0;var t=qe.f,e=N([].splice),o={};o[n]=1,t(o).length&&(qe.f=function(r){for(var o=t(r),i=0,a=o.length;i<a;i++)if(o[i]===n){e(o,i,1);break}return o},ir({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:gl.f}))},fastKey:function(t,e){if(!pt(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!U(t,n)){if(!xl(t))return"F";if(!e)return"E";i(t)}return t[n].objectID},getWeakData:function(t,e){if(!U(t,n)){if(!xl(t))return!0;if(!e)return!1;i(t)}return t[n].weakData},onFreeze:function(t){return vl&&r&&xl(t)&&!U(t,n)&&i(t),t}};oe[n]=!0})),El=(wl.enable,wl.fastKey,wl.getWeakData,wl.onFreeze,function(t,e,r){var n=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),i=n?"set":"add",a=S[t],u=a&&a.prototype,s=a,c={},f=function(t){var e=N(u[t]);le(u,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(o&&!pt(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return o&&!pt(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!pt(t))&&e(this,0===t?0:t)}:function(t,r){return e(this,0===t?0:t,r),this})};if(nr(t,!ft(a)||!(o||u.forEach&&!P((function(){(new a).entries().next()})))))s=r.getConstructor(e,t,n,i),wl.enable();else if(nr(t,!0)){var l=new s,h=l[i](o?{}:-0,1)!=l,p=P((function(){l.has(1)})),v=_o((function(t){new a(t)})),d=!o&&P((function(){for(var t=new a,e=5;e--;)t[i](e,e);return!t.has(-0)}));v||((s=e((function(t,e){gr(t,u);var r=ns(new a,t,s);return C(e)||To(e,r[i],{that:r,AS_ENTRIES:n}),r}))).prototype=u,u.constructor=s),(p||d)&&(f("delete"),f("has"),n&&f("get")),(d||h)&&f(i),o&&u.clear&&delete u.clear}return c[t]=s,ir({global:!0,constructor:!0,forced:s!=a},c),hr(s,t),o||r.setStrong(s,t,n),s}),Al=wl.getWeakData,Ol=ce.set,Sl=ce.getterFor,Tl=Ei.find,kl=Ei.findIndex,Il=N([].splice),jl=0,Pl=function(t){return t.frozen||(t.frozen=new _l)},_l=function(){this.entries=[]},Ml=function(t,e){return Tl(t.entries,(function(t){return t[0]===e}))};_l.prototype={get:function(t){var e=Ml(this,t);if(e)return e[1]},has:function(t){return!!Ml(this,t)},set:function(t,e){var r=Ml(this,t);r?r[1]=e:this.entries.push([t,e])},delete:function(t){var e=kl(this.entries,(function(e){return e[0]===t}));return~e&&Il(this.entries,e,1),!!~e}};var Ll,Rl={getConstructor:function(t,e,r,n){var o=t((function(t,o){gr(t,i),Ol(t,{type:e,id:jl++,frozen:void 0}),C(o)||To(o,t[n],{that:t,AS_ENTRIES:r})})),i=o.prototype,a=Sl(e),u=function(t,e,r){var n=a(t),o=Al(wt(e),!0);return!0===o?Pl(n).set(e,r):o[n.id]=r,t};return Xa(i,{delete:function(t){var e=a(this);if(!pt(t))return!1;var r=Al(t);return!0===r?Pl(e).delete(t):r&&U(r,e.id)&&delete r[e.id]},has:function(t){var e=a(this);if(!pt(t))return!1;var r=Al(t);return!0===r?Pl(e).has(t):r&&U(r,e.id)}}),Xa(i,r?{get:function(t){var e=a(this);if(pt(t)){var r=Al(t);return!0===r?Pl(e).get(t):r?r[e.id]:void 0}},set:function(t,e){return u(this,t,e)}}:{add:function(t){return u(this,t,!0)}}),o}},Nl=ce.enforce,Cl=Object,Dl=Array.isArray,Fl=Cl.isExtensible,Wl=Cl.isFrozen,zl=Cl.isSealed,Bl=Cl.freeze,Ul=Cl.seal,Gl={},Vl={},Hl=!S.ActiveXObject&&"ActiveXObject"in S,ql=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Zl=El("WeakMap",ql,Rl),Yl=Zl.prototype,$l=N(Yl.set);if(Jt)if(Hl){Ll=Rl.getConstructor(ql,"WeakMap",!0),wl.enable();var Kl=N(Yl.delete),Ql=N(Yl.has),Xl=N(Yl.get);Xa(Yl,{delete:function(t){if(pt(t)&&!Fl(t)){var e=Nl(this);return e.frozen||(e.frozen=new Ll),Kl(this,t)||e.frozen.delete(t)}return Kl(this,t)},has:function(t){if(pt(t)&&!Fl(t)){var e=Nl(this);return e.frozen||(e.frozen=new Ll),Ql(this,t)||e.frozen.has(t)}return Ql(this,t)},get:function(t){if(pt(t)&&!Fl(t)){var e=Nl(this);return e.frozen||(e.frozen=new Ll),Ql(this,t)?Xl(this,t):e.frozen.get(t)}return Xl(this,t)},set:function(t,e){if(pt(t)&&!Fl(t)){var r=Nl(this);r.frozen||(r.frozen=new Ll),Ql(this,t)?$l(this,t,e):r.frozen.set(t,e)}else $l(this,t,e);return this}})}else vl&&P((function(){var t=Bl([]);return $l(new Zl,t,1),!Wl(t)}))&&Xa(Yl,{set:function(t,e){var r;return Dl(t)&&(Wl(t)?r=Gl:zl(t)&&(r=Vl)),$l(this,t,e),r==Gl&&Bl(t),r==Vl&&Ul(t),this}});var Jl=ot("iterator"),th=ot("toStringTag"),eh=Aa.values,rh=function(t,e){if(t){if(t[Jl]!==eh)try{ee(t,Jl,eh)}catch(e){t[Jl]=eh}if(t[th]||ee(t,th,e),hi[e])for(var r in Aa)if(t[r]!==Aa[r])try{ee(t,r,Aa[r])}catch(e){t[r]=Aa[r]}}};for(var nh in hi)rh(S[nh]&&S[nh].prototype,nh);rh(di,"DOMTokenList");var oh,ih,ah,uh,sh=new WeakMap,ch=function(){function t(){i(this,t),sh.set(this,{})}return u(t,[{key:"addEventListener",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=sh.get(this);n||(n={}),n[t]||(n[t]=[]),n[t].push(e),sh.set(this,n),r.capture,r.once,r.passive}},{key:"removeEventListener",value:function(t,e){var r=sh.get(this);if(r){var n=r[t];if(n&&n.length>0)for(var o=n.length;o--;o>0)if(n[o]===e){n.splice(o,1);break}}}},{key:"dispatchEvent",value:function(t){var e=sh.get(this)[t.type];if(e){var r,n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=g(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(e);try{for(n.s();!(r=n.n()).done;){(0,r.value)(t)}}catch(t){n.e(t)}finally{n.f()}}}}]),t}(),fh=function(t){c(r,t);var e=v(r);function r(){var t;return i(this,r),s(h(t=e.call(this)),"className",void 0),s(h(t),"children",void 0),t.className="",t.children=[],t}return u(r,[{key:"setAttribute",value:function(t,e){this[t]=e}},{key:"getAttribute",value:function(t){return this[t]}},{key:"setAttributeNS",value:function(t,e){this[t]=e}},{key:"getAttributeNS",value:function(t){return this[t]}}]),r}(function(t){c(r,t);var e=v(r);function r(){var t;return i(this,r),s(h(t=e.call(this)),"childNodes",void 0),t.childNodes=[],t}return u(r,[{key:"appendChild",value:function(t){this.childNodes.push(t)}},{key:"cloneNode",value:function(){var t=Object.create(this);return Object.assign(t,this),t}},{key:"removeChild",value:function(t){var e=this.childNodes.findIndex((function(e){return e===t}));return e>-1?this.childNodes.splice(e,1):null}}]),r}(ch));if("undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM){var lh=my.getSystemInfoSync();oh=lh.screenWidth,ih=lh.screenHeight,ah=lh.windowWidth,uh=lh.windowHeight}else{var hh=xf.innerWidth,ph=xf.innerHeight;oh=hh,ih=ph,ah=hh,uh=ph}var vh={width:oh,height:ih,availWidth:ah,availHeight:uh,availLeft:0,availTop:0},dh=vh.availWidth,yh=vh.availHeight,gh={style:[]};function mh(t,e){var r,n;"parentNode"in t||(r=0===e?function(){return null}:1===e?function(){return gh}:function(){return null},Object.defineProperty(t,"parentNode",{enumerable:!0,get:r}));"parentElement"in t||(n=0===e?function(){return null}:1===e?function(){return gh}:function(){return null},Object.defineProperty(t,"parentElement",{enumerable:!0,get:n}))}function bh(t){t.style=t.style||{},Object.assign(t.style,{top:"0px",left:"0px",width:dh+"px",height:yh+"px",margin:"0px",padding:"0px"})}function xh(t){"clientLeft"in t||(t.clientLeft=0,t.clientTop=0),"clientWidth"in t||(t.clientWidth=dh,t.clientHeight=yh),"getBoundingClientRect"in t||(t.getBoundingClientRect=function(){return{x:0,y:0,top:0,left:0,width:this.clientWidth,height:this.clientHeight,right:this.clientWidth,bottom:this.clientHeight}})}function wh(t){"offsetLeft"in t||(t.offsetLeft=0,t.offsetTop=0),"offsetWidth"in t||(t.offsetWidth=dh,t.offsetHeight=yh)}function Eh(t){"scrollLeft"in t||(t.scrollLeft=0,t.scrollTop=0),"scrollWidth"in t||(t.scrollWidth=dh,t.scrollHeight=yh)}function Ah(t){var e=function(){return!0};t.classList=[],t.classList.add=e,t.classList.remove=e,t.classList.contains=e,t.classList.toggle=e}function Oh(){}var Sh=function(t){c(r,t);var e=v(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1?arguments[1]:void 0;return i(this,r),s(h(t=e.call(this)),"className",void 0),s(h(t),"children",void 0),s(h(t),"focus",void 0),s(h(t),"blur",void 0),s(h(t),"insertBefore",void 0),s(h(t),"appendChild",void 0),s(h(t),"removeChild",void 0),s(h(t),"remove",void 0),s(h(t),"innerHTML",void 0),s(h(t),"tagName",void 0),t.className="",t.children=[],t.focus=Oh,t.blur=Oh,t.insertBefore=Oh,t.appendChild=Oh,t.removeChild=Oh,t.remove=Oh,t.innerHTML="",t.tagName=n.toUpperCase(),mh(h(t),o),bh(h(t)),Ah(h(t)),xh(h(t)),wh(h(t)),Eh(h(t)),t}return u(r)}(fh),Th=function(t){c(r,t);var e=v(r);function r(){return i(this,r),e.call(this,"video")}return u(r)}(function(t){c(r,t);var e=v(r);function r(t){return i(this,r),e.call(this,t)}return u(r,[{key:"addTextTrack",value:function(){}},{key:"captureStream",value:function(){}},{key:"fastSeek",value:function(){}},{key:"load",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}}]),r}(Sh)),kh={};function Ih(){return kh}var jh=u((function t(){i(this,t);var e=Ih(),r=e.createImage&&e.createImage()||{};return"tagName"in r||(r.tagName="IMG",r.__proto__=t.prototype),mh(r),Ah(r),Object.assign(r,{addEventListener:function(t,e){r["on".concat(t)]=e.bind(r)},removeEventListener:function(t){r["on".concat(t)]=null}}),r})),Ph={href:"",protocol:"",host:""},_h=function(t){c(r,t);var e=v(r);function r(){return i(this,r),e.call(this,"body",0)}return u(r,[{key:"addEventListener",value:function(t,e){}},{key:"removeEventListener",value:function(t,e,r){}},{key:"dispatchEvent",value:function(t){}}]),r}(Sh),Mh=function(t){c(r,t);var e=v(r);function r(){return i(this,r),e.call(this,"html",0)}return u(r,[{key:"addEventListener",value:function(t,e){}},{key:"removeEventListener",value:function(t,e){}},{key:"dispatchEvent",value:function(t){}}]),r}(Sh),Lh={},Rh={readyState:"complete",visibilityState:"visible",hidden:!1,fullscreen:!0,scripts:[],style:{},location:Ph,ontouchstart:null,ontouchmove:null,ontouchend:null,onvisibilitychange:null,parentNode:null,parentElement:null,head:null,body:null,documentElement:{style:[]},createElement:function(t){return"canvas"===(t=t.toLowerCase())?my.createOffscreenCanvas(1024,128,"2d"):"img"===t?new jh:"video"===t?new Th:new Sh(t)},createElementNS:function(t,e){return this.createElement(e)},createTextNode:function(t){return t},getElementById:function(t){return null},getElementsByTagName:function(t){return t=t.toLowerCase(),[]},getElementsByTagNameNS:function(t,e){return this.getElementsByTagName(e)},getElementsByName:function(t){return[]},querySelector:function(t){return null},querySelectorAll:function(t){return[]},addEventListener:function(t,e,r){Lh[t]||(Lh[t]=[]),Lh[t].push(e)},removeEventListener:function(t,e){var r=Lh[t];if(r&&r.length>0)for(var n=r.length;n--;n>0)if(r[n]===e){r.splice(n,1);break}},dispatchEvent:function(t){var e=t.type,r=Lh[e];if(r)for(var n=0;n<r.length;n++)r[n](t);t.target&&"function"==typeof t.target["on"+e]&&t.target["on"+e](t)},createEvent:function(t){return new ol(t)}};Rh.documentElement=new Mh,Rh.head=new Sh("head"),Rh.body=new _h,Af("match",(function(t,e,r){return[function(e){var r=F(this),n=C(e)?void 0:Lt(e,t);return n?At(n,e,r):new RegExp(e)[t](Qc(r))},function(t){var n=wt(this),o=Qc(t),i=r(e,n,o);if(i.done)return i.value;if(!n.global)return Wf(n,o);var a=n.unicode;n.lastIndex=0;for(var u,s=[],c=0;null!==(u=Wf(n,o));){var f=Qc(u[0]);s[c]=f,""===f&&(n.lastIndex=Pf(o,De(n.lastIndex),a)),c++}return 0===c?null:s}]}));var Nh,Ch,Dh=ot("isConcatSpreadable"),Fh=X>=51||!P((function(){var t=[];return t[Dh]=!1,t.concat()[0]!==t})),Wh=function(t){if(!pt(t))return!1;var e=t[Dh];return void 0!==e?!!e:yi(t)},zh=!Fh||!Pi("concat");if(ir({target:"Array",proto:!0,arity:1,forced:zh},{concat:function(t){var e,r,n,o,i,a=z(this),u=bi(a,0),s=0;for(e=-1,n=arguments.length;e<n;e++)if(Wh(i=-1===e?a:arguments[e]))for(o=Fe(i),tl(s+o),r=0;r<o;r++,s++)r in i&&Ii(u,s,i[r]);else tl(s+1),Ii(u,s++,i);return u.length=s,u}}),"undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM){var Bh=my.getSystemInfoSync();Nh=Bh.system,Bh.platform,Bh.language}else{var Uh={versions:(Ch=xf.navigator.userAgent,{trident:Ch.indexOf("Trident")>-1,presto:Ch.indexOf("Presto")>-1,webKit:Ch.indexOf("AppleWebKit")>-1,gecko:Ch.indexOf("Gecko")>-1&&-1===Ch.indexOf("KHTML"),mobile:!!Ch.match(/AppleWebKit.*Mobile.*/),ios:!!Ch.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/),android:Ch.indexOf("Android")>-1||Ch.indexOf("Linux")>-1,iPhone:Ch.indexOf("iPhone")>-1,iPad:Ch.indexOf("iPad")>-1,webApp:-1===Ch.indexOf("Safari"),weixin:Ch.indexOf("MicroMessenger")>-1,qq:" qq"===Ch.match(/\\sQQ/i)}),language:(xf.navigator.browserLanguage||xf.navigator.language).toLowerCase()};Uh.versions.android?"android":Uh.versions.trident?"IE":Uh.versions.presto?"Opera":Uh.versions.webKit?"webKit":Uh.versions.gecko?"Firefox":Uh.versions.mobile?"mobile":Uh.versions.ios?"ios":Uh.versions.iPhone?"iPhone":Uh.versions.iPad?"ipad":Uh.versions.webApp?"webApp":Uh.versions.weixin?"weixin":Uh.versions.qq&&"qq",Nh=xf.navigator.userAgent,Uh.language}Nh.toLowerCase().indexOf("android");os("Uint8",(function(t){return function(e,r,n){return t(this,e,r,n)}}));var Gh=wl.fastKey,Vh=ce.set,Hh=ce.getterFor;El("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,r,n){var o=t((function(t,o){gr(t,i),Vh(t,{type:e,index:Yi(null),first:void 0,last:void 0,size:0}),lt||(t.size=0),C(o)||To(o,t[n],{that:t,AS_ENTRIES:r})})),i=o.prototype,a=Hh(e),u=function(t,e,r){var n,o,i=a(t),u=s(t,e);return u?u.value=r:(i.last=u={index:o=Gh(e,!0),key:e,value:r,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=u),n&&(n.next=u),lt?i.size++:t.size++,"F"!==o&&(i.index[o]=u)),t},s=function(t,e){var r,n=a(t),o=Gh(e);if("F"!==o)return n.index[o];for(r=n.first;r;r=r.next)if(r.key==e)return r};return Xa(i,{clear:function(){for(var t=a(this),e=t.index,r=t.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete e[r.index],r=r.next;t.first=t.last=void 0,lt?t.size=0:this.size=0},delete:function(t){var e=a(this),r=s(this,t);if(r){var n=r.next,o=r.previous;delete e.index[r.index],r.removed=!0,o&&(o.next=n),n&&(n.previous=o),e.first==r&&(e.first=n),e.last==r&&(e.last=o),lt?e.size--:this.size--}return!!r},forEach:function(t){for(var e,r=a(this),n=Br(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:r.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),Xa(i,r?{get:function(t){var e=s(this,t);return e&&e.value},set:function(t,e){return u(this,0===t?0:t,e)}}:{add:function(t){return u(this,t=0===t?0:t,t)}}),lt&&pr(i,"size",{configurable:!0,get:function(){return a(this).size}}),o},setStrong:function(t,e,r){var n=e+" Iterator",o=Hh(e),i=Hh(n);ma(t,e,(function(t,e){Vh(this,{type:n,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?ba("keys"==e?r.key:"values"==e?r.value:[r.key,r.value],!1):(t.target=void 0,ba(void 0,!0))}),r?"entries":"values",!r,!0),dr(e)}});var qh=N([].join),Zh=Se!=Object||!Ai("join",",");ir({target:"Array",proto:!0,forced:Zh},{join:function(t){return qh(Te(this),void 0===t?",":t)}});var Yh=Ei.map,$h=Pi("map");ir({target:"Array",proto:!0,forced:!$h},{map:function(t){return Yh(this,t,arguments.length>1?arguments[1]:void 0)}});var Kh=P((function(){Bi(1)}));ir({target:"Object",stat:!0,forced:Kh},{keys:function(t){return Bi(z(t))}});var Qh=new Map,Xh=new Map,Jh=new Map,tp=function(t){c(r,t);var e=v(r);function r(){var t;return i(this,r),s(h(t=e.call(this)),"onabort",void 0),s(h(t),"onerror",void 0),s(h(t),"onload",void 0),s(h(t),"onloadstart",void 0),s(h(t),"onprogress",void 0),s(h(t),"ontimeout",void 0),s(h(t),"onloadend",void 0),s(h(t),"onreadystatechange",void 0),s(h(t),"readyState",void 0),s(h(t),"response",void 0),s(h(t),"responseText",void 0),s(h(t),"_responseType",void 0),s(h(t),"responseXML",void 0),s(h(t),"status",void 0),s(h(t),"statusText",void 0),s(h(t),"upload",void 0),s(h(t),"withCredentials",void 0),s(h(t),"timeout",void 0),s(h(t),"_url",void 0),s(h(t),"_method",void 0),t.onabort=null,t.onerror=null,t.onload=null,t.onloadstart=null,t.onprogress=null,t.ontimeout=null,t.onloadend=null,t.onreadystatechange=null,t.readyState=0,t.response=null,t.responseText=null,t._responseType="text",t.responseXML=null,t.status=0,t.statusText="",t.upload={},t.withCredentials=!1,Qh.set("requestHeader",{"content-type":"application/x-www-form-urlencoded"}),t}return u(r,[{key:"responseType",set:function(t){this._responseType=t}},{key:"abort",value:function(){var t=Jh.get("requestTask");t&&t.abort()}},{key:"getAllResponseHeaders",value:function(){var t=Xh.get("responseHeader");return Object.keys(t).map((function(e){return"".concat(e,": ").concat(t[e])})).join("\\n")}},{key:"getResponseHeader",value:function(t){return Xh.get("responseHeader")[t]}},{key:"open",value:function(t,e,r){this._method=t,this._url=e}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){}},{key:"setRequestHeader",value:function(t,e){var r=Qh.get("requestHeader");r[t]=e,Qh.set("requestHeader",r)}},{key:"addEventListener",value:function(t,e){var r=this;"function"==typeof e&&(this["on"+t]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.target=t.target||r,e.call(r,t)})}},{key:"removeEventListener",value:function(t,e){this["on"+t]===e&&(this["on"+t]=null)}}]),r}(ch);s(tp,"UNSEND",void 0),s(tp,"OPENED",void 0),s(tp,"HEADERS_RECEIVED",void 0),s(tp,"LOADING",void 0),s(tp,"DONE",void 0),tp.UNSEND=0,tp.OPENED=1,tp.HEADERS_RECEIVED=2,tp.LOADING=3,tp.DONE=4;var ep="undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM,rp="undefined"!=typeof wx&&null!==wx&&(void 0!==wx.request||void 0!==wx.miniProgram),np=(ep||rp)&&!1;np||xf.XMLHttpRequest,np||xf.location;function op(t){return[t+1&255,t+1>>8&255,t+1>>8>>8&255]}var ip=Ei.filter,ap=Pi("filter");function up(t){var e=t.color;return e&&e.length?e:[1,1,1,1]}function sp(t,e,r){return 2===r.length?[r[0],r[1],0]:[r[0],r[1],r[2]]}function cp(t){return t.filter?[1]:[0]}function fp(t,e){return[e]}ir({target:"Array",proto:!0,forced:!ap},{filter:function(t){return ip(this,t,arguments.length>1?arguments[1]:void 0)}});var lp=pp,hp=pp;function pp(t,e,r){r=r||2;var n,o,i,a,u,s,c,f=e&&e.length,l=f?e[0]*r:t.length,h=vp(t,0,l,r,!0),p=[];if(!h||h.next===h.prev)return p;if(f&&(h=function(t,e,r,n){var o,i,a,u,s,c=[];for(o=0,i=e.length;o<i;o++)a=e[o]*n,u=o<i-1?e[o+1]*n:t.length,(s=vp(t,a,u,n,!1))===s.next&&(s.steiner=!0),c.push(Sp(s));for(c.sort(wp),o=0;o<c.length;o++)r=Ep(c[o],r);return r}(t,e,h,r)),t.length>80*r){n=i=t[0],o=a=t[1];for(var v=r;v<l;v+=r)(u=t[v])<n&&(n=u),(s=t[v+1])<o&&(o=s),u>i&&(i=u),s>a&&(a=s);c=0!==(c=Math.max(i-n,a-o))?32767/c:0}return yp(h,p,r,n,o,c,0),p}function vp(t,e,r,n,o){var i,a;if(o===Fp(t,e,r,n)>0)for(i=e;i<r;i+=n)a=Np(i,t[i],t[i+1],a);else for(i=r-n;i>=e;i-=n)a=Np(i,t[i],t[i+1],a);return a&&jp(a,a.next)&&(Cp(a),a=a.next),a}function dp(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!jp(n,n.next)&&0!==Ip(n.prev,n,n.next))n=n.next;else{if(Cp(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function yp(t,e,r,n,o,i,a){if(t){!a&&i&&function(t,e,r,n){var o=t;do{0===o.z&&(o.z=Op(o.x,o.y,e,r,n)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==t);o.prevZ.nextZ=null,o.prevZ=null,function(t){var e,r,n,o,i,a,u,s,c=1;do{for(r=t,t=null,i=null,a=0;r;){for(a++,n=r,u=0,e=0;e<c&&(u++,n=n.nextZ);e++);for(s=c;u>0||s>0&&n;)0!==u&&(0===s||!n||r.z<=n.z)?(o=r,r=r.nextZ,u--):(o=n,n=n.nextZ,s--),i?i.nextZ=o:t=o,o.prevZ=i,i=o;r=n}i.nextZ=null,c*=2}while(a>1)}(o)}(t,n,o,i);for(var u,s,c=t;t.prev!==t.next;)if(u=t.prev,s=t.next,i?mp(t,n,o,i):gp(t))e.push(u.i/r|0),e.push(t.i/r|0),e.push(s.i/r|0),Cp(t),t=s.next,c=s.next;else if((t=s)===c){a?1===a?yp(t=bp(dp(t),e,r),e,r,n,o,i,2):2===a&&xp(t,e,r,n,o,i):yp(dp(t),e,r,n,o,i,1);break}}}function gp(t){var e=t.prev,r=t,n=t.next;if(Ip(e,r,n)>=0)return!1;for(var o=e.x,i=r.x,a=n.x,u=e.y,s=r.y,c=n.y,f=o<i?o<a?o:a:i<a?i:a,l=u<s?u<c?u:c:s<c?s:c,h=o>i?o>a?o:a:i>a?i:a,p=u>s?u>c?u:c:s>c?s:c,v=n.next;v!==e;){if(v.x>=f&&v.x<=h&&v.y>=l&&v.y<=p&&Tp(o,u,i,s,a,c,v.x,v.y)&&Ip(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function mp(t,e,r,n){var o=t.prev,i=t,a=t.next;if(Ip(o,i,a)>=0)return!1;for(var u=o.x,s=i.x,c=a.x,f=o.y,l=i.y,h=a.y,p=u<s?u<c?u:c:s<c?s:c,v=f<l?f<h?f:h:l<h?l:h,d=u>s?u>c?u:c:s>c?s:c,y=f>l?f>h?f:h:l>h?l:h,g=Op(p,v,e,r,n),m=Op(d,y,e,r,n),b=t.prevZ,x=t.nextZ;b&&b.z>=g&&x&&x.z<=m;){if(b.x>=p&&b.x<=d&&b.y>=v&&b.y<=y&&b!==o&&b!==a&&Tp(u,f,s,l,c,h,b.x,b.y)&&Ip(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,x.x>=p&&x.x<=d&&x.y>=v&&x.y<=y&&x!==o&&x!==a&&Tp(u,f,s,l,c,h,x.x,x.y)&&Ip(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;b&&b.z>=g;){if(b.x>=p&&b.x<=d&&b.y>=v&&b.y<=y&&b!==o&&b!==a&&Tp(u,f,s,l,c,h,b.x,b.y)&&Ip(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;x&&x.z<=m;){if(x.x>=p&&x.x<=d&&x.y>=v&&x.y<=y&&x!==o&&x!==a&&Tp(u,f,s,l,c,h,x.x,x.y)&&Ip(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function bp(t,e,r){var n=t;do{var o=n.prev,i=n.next.next;!jp(o,i)&&Pp(o,n,n.next,i)&&Lp(o,i)&&Lp(i,o)&&(e.push(o.i/r|0),e.push(n.i/r|0),e.push(i.i/r|0),Cp(n),Cp(n.next),n=t=i),n=n.next}while(n!==t);return dp(n)}function xp(t,e,r,n,o,i){var a=t;do{for(var u=a.next.next;u!==a.prev;){if(a.i!==u.i&&kp(a,u)){var s=Rp(a,u);return a=dp(a,a.next),s=dp(s,s.next),yp(a,e,r,n,o,i,0),void yp(s,e,r,n,o,i,0)}u=u.next}a=a.next}while(a!==t)}function wp(t,e){return t.x-e.x}function Ep(t,e){var r=function(t,e){var r,n=e,o=t.x,i=t.y,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var u=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(u<=o&&u>a&&(a=u,r=n.x<n.next.x?n:n.next,u===o))return r}n=n.next}while(n!==e);if(!r)return null;var s,c=r,f=r.x,l=r.y,h=1/0;n=r;do{o>=n.x&&n.x>=f&&o!==n.x&&Tp(i<l?o:a,i,f,l,i<l?a:o,i,n.x,n.y)&&(s=Math.abs(i-n.y)/(o-n.x),Lp(n,t)&&(s<h||s===h&&(n.x>r.x||n.x===r.x&&Ap(r,n)))&&(r=n,h=s)),n=n.next}while(n!==c);return r}(t,e);if(!r)return e;var n=Rp(r,t);return dp(n,n.next),dp(r,r.next)}function Ap(t,e){return Ip(t.prev,t,e.prev)<0&&Ip(e.next,t,t.next)<0}function Op(t,e,r,n,o){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*o|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*o|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Sp(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function Tp(t,e,r,n,o,i,a,u){return(o-a)*(e-u)>=(t-a)*(i-u)&&(t-a)*(n-u)>=(r-a)*(e-u)&&(r-a)*(i-u)>=(o-a)*(n-u)}function kp(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Pp(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(Lp(t,e)&&Lp(e,t)&&function(t,e){var r=t,n=!1,o=(t.x+e.x)/2,i=(t.y+e.y)/2;do{r.y>i!=r.next.y>i&&r.next.y!==r.y&&o<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)&&(Ip(t.prev,t,e.prev)||Ip(t,e.prev,e))||jp(t,e)&&Ip(t.prev,t,t.next)>0&&Ip(e.prev,e,e.next)>0)}function Ip(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function jp(t,e){return t.x===e.x&&t.y===e.y}function Pp(t,e,r,n){var o=Mp(Ip(t,e,r)),i=Mp(Ip(t,e,n)),a=Mp(Ip(r,n,t)),u=Mp(Ip(r,n,e));return o!==i&&a!==u||(!(0!==o||!_p(t,r,e))||(!(0!==i||!_p(t,n,e))||(!(0!==a||!_p(r,t,n))||!(0!==u||!_p(r,e,n)))))}function _p(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Mp(t){return t>0?1:t<0?-1:0}function Lp(t,e){return Ip(t.prev,t,t.next)<0?Ip(t,e,t.next)>=0&&Ip(t,t.prev,e)>=0:Ip(t,e,t.prev)<0||Ip(t,t.next,e)<0}function Rp(t,e){var r=new Dp(t.i,t.x,t.y),n=new Dp(e.i,e.x,e.y),o=t.next,i=e.prev;return t.next=e,e.prev=t,r.next=o,o.prev=r,n.next=r,r.prev=n,i.next=n,n.prev=i,n}function Np(t,e,r,n){var o=new Dp(t,e,r);return n?(o.next=n.next,o.prev=n,n.next.prev=o,n.next=o):(o.prev=o,o.next=o),o}function Cp(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Dp(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Fp(t,e,r,n){for(var o=0,i=e,a=r-n;i<r;i+=n)o+=(t[a]-t[i])*(t[i+1]+t[a+1]),a=i;return o}pp.deviation=function(t,e,r,n){var o=e&&e.length,i=o?e[0]*r:t.length,a=Math.abs(Fp(t,0,i,r));if(o)for(var u=0,s=e.length;u<s;u++){var c=e[u]*r,f=u<s-1?e[u+1]*r:t.length;a-=Math.abs(Fp(t,c,f,r))}var l=0;for(u=0;u<n.length;u+=3){var h=n[u]*r,p=n[u+1]*r,v=n[u+2]*r;l+=Math.abs((t[h]-t[v])*(t[p+1]-t[h+1])-(t[h]-t[p])*(t[v+1]-t[h+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},pp.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,o=0;o<t.length;o++){for(var i=0;i<t[o].length;i++)for(var a=0;a<e;a++)r.vertices.push(t[o][i][a]);o>0&&(n+=t[o-1].length,r.holes.push(n))}return r},lp.default=hp;var Wp=S,zp=N(1..valueOf),Bp="\\t\\n\\v\\f\\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\\u2028\\u2029\\ufeff",Up=N("".replace),Gp=RegExp("^["+Bp+"]+"),Vp=RegExp("(^|[^"+Bp+"])["+Bp+"]+$"),Hp=function(t){return function(e){var r=Qc(F(e));return 1&t&&(r=Up(r,Gp,"")),2&t&&(r=Up(r,Vp,"$1")),r}},qp={start:Hp(1),end:Hp(2),trim:Hp(3)},Zp=qe.f,Yp=Ie.f,$p=Ut.f,Kp=qp.trim,Qp=S.Number,Xp=(Wp.Number,Qp.prototype),Jp=S.TypeError,tv=N("".slice),ev=N("".charCodeAt),rv=function(t){var e=Dt(t,"number");return"bigint"==typeof e?e:nv(e)},nv=function(t){var e,r,n,o,i,a,u,s,c=Dt(t,"number");if(It(c))throw Jp("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=Kp(c),43===(e=ev(c,0))||45===e){if(88===(r=ev(c,2))||120===r)return NaN}else if(48===e){switch(ev(c,1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+c}for(a=(i=tv(c,2)).length,u=0;u<a;u++)if((s=ev(i,u))<48||s>o)return NaN;return parseInt(i,n)}return+c},ov=nr("Number",!Qp(" 0o1")||!Qp("0b1")||Qp("+0x1")),iv=function(t){return Tt(Xp,t)&&P((function(){zp(t)}))},av=function(t){var e=arguments.length<1?0:Qp(rv(t));return iv(this)?ns(Object(e),this,av):e};av.prototype=Xp,ov&&(Xp.constructor=av),ir({global:!0,constructor:!0,wrap:!0,forced:ov},{Number:av});ov&&function(t,e){for(var r,n=lt?Zp(e):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),o=0;n.length>o;o++)U(e,r=n[o])&&!U(t,r)&&$p(t,r,Yp(e,r))}(Wp.Number,Qp);var uv=RangeError,sv=RangeError,cv=String,fv=Math.floor,lv=N((function(t){var e=Qc(F(this)),r="",n=Me(t);if(n<0||n==1/0)throw uv("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(r+=e);return r})),hv=N("".slice),pv=N(1..toFixed),vv=function(t,e,r){return 0===e?r:e%2==1?vv(t,e-1,r*t):vv(t*t,e/2,r)},dv=function(t,e,r){for(var n=-1,o=r;++n<6;)o+=e*t[n],t[n]=o%1e7,o=fv(o/1e7)},yv=function(t,e){for(var r=6,n=0;--r>=0;)n+=t[r],t[r]=fv(n/e),n=n%e*1e7},gv=function(t){for(var e=6,r="";--e>=0;)if(""!==r||0===e||0!==t[e]){var n=cv(t[e]);r=""===r?n:r+lv("0",7-n.length)+n}return r},mv=P((function(){return"0.000"!==pv(8e-5,3)||"1"!==pv(.9,0)||"1.25"!==pv(1.255,2)||"1000000000000000128"!==pv(0xde0b6b3a7640080,0)}))||!P((function(){pv({})}));function bv(t){return"number"==typeof t}function xv(t){var e=Math.max(Math.min(85.0511287798,t[1]),-85.0511287798),r=Math.PI/180,n=t[0]*r,o=e*r;o=Math.log(Math.tan(Math.PI/4+o/2));return n=(256<<20)*(.5/Math.PI*n+.5),o=(256<<20)*(-.5/Math.PI*o+(r=.5)),[Math.floor(n),Math.floor(o)]}ir({target:"Number",proto:!0,forced:mv},{toFixed:function(t){var e,r,n,o,i=zp(this),a=Me(t),u=[0,0,0,0,0,0],s="",c="0";if(a<0||a>20)throw sv("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return cv(i);if(i<0&&(s="-",i=-i),i>1e-21)if(r=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(i*vv(2,69,1))-69)<0?i*vv(2,-e,1):i/vv(2,e,1),r*=4503599627370496,(e=52-e)>0){for(dv(u,0,r),n=a;n>=7;)dv(u,1e7,0),n-=7;for(dv(u,vv(10,n,1),0),n=e-1;n>=23;)yv(u,1<<23),n-=23;yv(u,1<<n),dv(u,1,1),yv(u,2),c=gv(u)}else dv(u,0,r),dv(u,1<<-e,0),c=gv(u)+lv("0",a);return c=a>0?s+((o=c.length)<=a?"0."+lv("0",a-o)+c:hv(c,0,o-a)+"."+hv(c,o-a)):s+c}});var wv,Ev=/"/g,Av=N("".replace);ir({target:"String",proto:!0,forced:(wv="sub",P((function(){var t=""[wv](\'"\');return t!==t.toLowerCase()||t.split(\'"\').length>3})))},{sub:function(){return t="sub",e="",r="",n=Qc(F(this)),o="<"+t,""!==e&&(o+=" "+e+\'="\'+Av(Qc(r),Ev,"&quot;")+\'"\'),o+">"+n+"</"+t+">";var t,e,r,n,o}});var Ov=RegExp.prototype,Sv=qt.PROPER,Tv=RegExp.prototype.toString,kv=P((function(){return"/a/b"!=Tv.call({source:"a",flags:"b"})})),Iv=Sv&&"toString"!=Tv.name;(kv||Iv)&&le(RegExp.prototype,"toString",(function(){var t=wt(this);return"/"+Qc(t.source)+"/"+Qc(function(t){var e=t.flags;return void 0!==e||"flags"in Ov||U(t,"flags")||!Tt(Ov,t)?e:At(Xc,t)}(t))}),{unsafe:!0});var jv="undefined"!=typeof Float32Array?Float32Array:Array;function Pv(){var t=new jv(2);return jv!=Float32Array&&(t[0]=0,t[1]=0),t}function _v(t,e){var r=new jv(2);return r[0]=t,r[1]=e,r}function Mv(t,e){return t[0]=e[0],t[1]=e[1],t}function Lv(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function Rv(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function Nv(t,e){var r=e[0],n=e[1],o=r*r+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t}function Cv(t,e){return t[0]*e[0]+t[1]*e[1]}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Dv,Fv=Rv,Wv=(Dv=Pv(),Pv()),zv=(Pv(),Pv()),Bv=Pv(),Uv=Pv();function Gv(t,e,r,n,o){return Lv(t,r,n),Nv(t,t),[o/Cv(e=_v(-t[1],t[0]),_v(-r[1],r[0])),e]}function Vv(t,e){return function(t,e,r){return t[0]=e,t[1]=r,t}(t,-e[1],e[0])}function Hv(t,e,r){return Fv(t,e,r),Nv(t,t),t}function qv(t,e){return t[0]===e[0]&&t[1]===e[1]}var Zv=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),s(this,"complex",void 0),s(this,"join",void 0),s(this,"cap",void 0),s(this,"miterLimit",void 0),s(this,"thickness",void 0),s(this,"normal",void 0),s(this,"lastFlip",-1),s(this,"miter",_v(0,0)),s(this,"started",!1),s(this,"dash",!1),s(this,"totalDistance",0),s(this,"currentIndex",0),this.join=e.join||"miter",this.cap=e.cap||"butt",this.miterLimit=e.miterLimit||10,this.thickness=e.thickness||1,this.dash=e.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return u(t,[{key:"extrude_gaode2",value:function(t,e){var r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,o=r.startIndex,i=1;i<n;i++){var a,u,s,c=t[i-1];c.push(null!==(a=e[i-1][2])&&void 0!==a?a:0);var f=e[i-1],l=t[i];l.push(null!==(u=e[i][2])&&void 0!==u?u:0);var h=e[i],p=i<t.length-1?[].concat(y(t[i+1]),[null!==(s=e[i+1][2])&&void 0!==s?s:0]):null,v=i<e.length-1?e[i+1]:null;o+=this.segment_gaode2(r,o,c,l,p,f,h,v)}if(this.dash)for(var d=0;d<r.positions.length/6;d++)r.positions[6*d+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"simpleExtrude_gaode2",value:function(t,e){var r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,o=r.startIndex,i=1;i<n;i++){var a,u,s,c=t[i-1];c.push(null!==(a=e[i-1][2])&&void 0!==a?a:0);var f=e[i-1],l=t[i];l.push(null!==(u=e[i][2])&&void 0!==u?u:0);var h=e[i],p=i<t.length-1?[].concat(y(t[i+1]),[null!==(s=e[i+1][2])&&void 0!==s?s:0]):null,v=i<e.length-1?e[i+1]:null;o+=this.simpleSegment(r,o,c,l,p,f,h,v)}if(this.dash)for(var d=0;d<r.positions.length/6;d++)r.positions[6*d+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"extrude",value:function(t){var e=this.complex;if(t.length<=1)return e;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,n=e.startIndex,o=1;o<r;o++){var i=t[o-1],a=t[o],u=o<t.length-1?t[o+1]:null;n+=this.segment(e,n,i,a,u)}if(this.dash)for(var s=0;s<e.positions.length/6;s++)e.positions[6*s+5]=this.totalDistance;return e.startIndex=e.positions.length/6,e}},{key:"simpleExtrude",value:function(t){var e=this.complex;if(t.length<=1)return e;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,n=e.startIndex,o=1;o<r;o++){var i=t[o-1],a=t[o],u=o<t.length-1?t[o+1]:null;n+=this.simpleSegment(e,n,i,a,u)}if(this.dash)for(var s=0;s<e.positions.length/6;s++)e.positions[6*s+5]=this.totalDistance;return e.startIndex=e.positions.length/6,e}},{key:"segment_gaode2",value:function(t,e,r,n,o,i,a,u){var s=0,c=t.indices,f=t.positions,l=t.normals,h="square"===this.cap,p="bevel"===this.join,v=xv([a[0],a[1]]),g=xv([i[0],i[1]]);Hv(zv,n,r);var m=0;if(this.dash&&(m=this.lineSegmentDistance(v,g),this.totalDistance+=m),this.normal||(this.normal=Pv(),Vv(this.normal,zv)),!this.started)if(this.started=!0,h){var b=Pv(),x=Pv();Lv(b,this.normal,zv),Lv(x,this.normal,zv),l.push(x[0],x[1],0),l.push(b[0],b[1],0),f.push(r[0],r[1],0|r[2],this.totalDistance-m,-this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),f.push(r[0],r[1],0|r[2],this.totalDistance-m,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(f,l,r,this.normal,this.thickness,this.totalDistance-m);if(c.push(e+0,e+1,e+2),o){qv(n,o)&&Lv(o,n,Nv(o,Rv(o,n,r))),Hv(Bv,o,n);var w=d(Gv(Uv,Pv(),zv,Bv,this.thickness),2),E=w[0],A=w[1],O=Cv(Uv,this.normal)<0?-1:1,S=p;if(!S&&"miter"===this.join)E>this.miterLimit&&(S=!0);S?(l.push(this.normal[0],this.normal[1],0),l.push(A[0],A[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*O,0|n[2]),this.complex.indexes.push(this.currentIndex),f.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness*O,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,c.push.apply(c,y(this.lastFlip!==-O?[e,e+2,e+3]:[e+2,e+1,e+3])),c.push(e+2,e+3,e+4),Vv(Wv,Bv),Mv(this.normal,Wv),l.push(this.normal[0],this.normal[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*O,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,s+=3):(this.extrusions(f,l,n,A,E,this.totalDistance),c.push.apply(c,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),O=-1,Mv(this.normal,A),s+=2),this.lastFlip=O}else{if(Vv(this.normal,zv),h){var T=Pv(),k=Pv();Fv(k,zv,this.normal),Lv(T,zv,this.normal),l.push(k[0],k[1],0),l.push(T[0],T[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),f.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(f,l,n,this.normal,this.thickness,this.totalDistance);c.push.apply(c,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),s+=2}return s}},{key:"simpleSegment",value:function(t,e,r,n,o){var i=0,a=t.indices,u=t.positions,s=t.normals,c=xv([n[0],n[1]]),f=xv([r[0],r[1]]);Hv(zv,c,f);var l=0;if(this.dash&&(l=this.lineSegmentDistance(c,f),this.totalDistance+=l),this.normal||(this.normal=Pv(),Vv(this.normal,zv)),this.started||(this.started=!0,this.extrusions(u,s,r,this.normal,this.thickness,this.totalDistance-l)),a.push(e+0,e+1,e+2),o){var h=xv([o[0],o[1]]);qv(c,h)&&Lv(h,c,Nv(h,Rv(h,c,f))),Hv(Bv,h,c);var p=d(Gv(Uv,Pv(),zv,Bv,this.thickness),2),v=p[0],g=p[1];Cv(Uv,this.normal);this.extrusions(u,s,n,g,v,this.totalDistance),a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),-1,Mv(this.normal,g),i+=2,this.lastFlip=-1}else Vv(this.normal,zv),this.extrusions(u,s,n,this.normal,this.thickness,this.totalDistance),a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),i+=2;return i}},{key:"segment",value:function(t,e,r,n,o){var i=0,a=t.indices,u=t.positions,s=t.normals,c="square"===this.cap,f="bevel"===this.join,l=xv([n[0],n[1]]),h=xv([r[0],r[1]]);Hv(zv,l,h);var p=0;if(this.dash&&(p=this.lineSegmentDistance(l,h),this.totalDistance+=p),this.normal||(this.normal=Pv(),Vv(this.normal,zv)),!this.started)if(this.started=!0,c){var v=Pv(),g=Pv();Lv(v,this.normal,zv),Lv(g,this.normal,zv),s.push(g[0],g[1],0),s.push(v[0],v[1],0),u.push(r[0],r[1],0|r[2],this.totalDistance-p,-this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),u.push(r[0],r[1],0|r[2],this.totalDistance-p,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,s,r,this.normal,this.thickness,this.totalDistance-p);if(a.push(e+0,e+1,e+2),o){var m=xv([o[0],o[1]]);qv(l,m)&&Lv(m,l,Nv(m,Rv(m,l,h))),Hv(Bv,m,l);var b=d(Gv(Uv,Pv(),zv,Bv,this.thickness),2),x=b[0],w=b[1],E=Cv(Uv,this.normal)<0?-1:1,A=f;if(!A&&"miter"===this.join)x>this.miterLimit&&(A=!0);A?(s.push(this.normal[0],this.normal[1],0),s.push(w[0],w[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*E,0|n[2]),this.complex.indexes.push(this.currentIndex),u.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness*E,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,a.push.apply(a,y(this.lastFlip!==-E?[e,e+2,e+3]:[e+2,e+1,e+3])),a.push(e+2,e+3,e+4),Vv(Wv,Bv),Mv(this.normal,Wv),s.push(this.normal[0],this.normal[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*E,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,i+=3):(this.extrusions(u,s,n,w,x,this.totalDistance),a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),E=-1,Mv(this.normal,w),i+=2),this.lastFlip=E}else{if(Vv(this.normal,zv),c){var O=Pv(),S=Pv();Fv(S,zv,this.normal),Lv(O,zv,this.normal),s.push(S[0],S[1],0),s.push(O[0],O[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),u.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,s,n,this.normal,this.thickness,this.totalDistance);a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),i+=2}return i}},{key:"extrusions",value:function(t,e,r,n,o,i){e.push(n[0],n[1],0),e.push(n[0],n[1],0),t.push(r[0],r[1],0|r[2],i,-o,0|r[2]),this.complex.indexes.push(this.currentIndex),t.push(r[0],r[1],0|r[2],i,o,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}}]),t}();function Yv(t){var e=t.coordinates,r=t.originCoordinates,n=t.version,o=new Zv({dash:!0,join:"bevel"});if("GAODE2.x"===n){var i=e;Array.isArray(i[0][0])||(i=[e]);var a=r;Array.isArray(a[0][0])||(a=[r]);for(var u=0;u<i.length;u++){var s=i[u],c=a[u];o.extrude_gaode2(s,c)}}else{var f=e;f[0]&&!Array.isArray(f[0][0])&&(f=[e]),f.forEach((function(t){o.extrude(t)}))}var l=o.complex;return{vertices:l.positions,indices:l.indices,normals:l.normals,indexes:l.indexes,size:6}}function $v(t){var e=function(t){if(bv(t[0]))return t;if(bv(t[0][0]))throw new Error("\u5f53\u524d\u6570\u636e\u4e0d\u652f\u6301\u6807\u6ce8");if(bv(t[0][0][0])){var e=0,r=0,n=0;return t.forEach((function(t){t.forEach((function(t){e+=t[0],r+=t[1],n++}))})),[e/n,r/n,0]}throw new Error("\u5f53\u524d\u6570\u636e\u4e0d\u652f\u6301\u6807\u6ce8")}(t.coordinates);return{vertices:[].concat(y(e),y(e),y(e),y(e)),indices:[0,1,2,2,3,0],size:e.length}}function Kv(t){var e=t.coordinates,r=lp.flatten(e),n=r.vertices,o=r.dimensions,i=r.holes;return{indices:lp(n,i,o),vertices:n,size:o}}var Qv=function(){var t=o(r().mark((function t(e){var n,o,i,a,u,s,c,f,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,o=e.features,i=e.enablePicking,a=e.iconMap,u={a_Color:up,a_Position:sp,filter:cp,a_vertexId:fp,a_PickingColor:function(t){var e=t.id;return i?op(e):[0,0,0]},a_DistanceAndIndex:function(t,e,r,n,o,i){return void 0===i?[r[3],10]:[r[3],i]},a_Total_Distance:function(t,e,r){return[r[5]]},a_Size:function(t){var e=t.size,r=void 0===e?1:e;return Array.isArray(r)?[r[0],r[1]]:[r,0]},a_Normal:function(t,e,r,n,o){return o},a_Miter:function(t,e,r){return[r[4]]},a_iconMapUV:function(t){var e=t.texture,r=a[e]||{x:0,y:0};return[r.x,r.y]}},s={sizePerElement:0,elements:[]},c=0,f=[],l=3,o.forEach((function(t,e){var r=Yv(t),o=r.indices,i=r.vertices,a=r.normals,h=r.size,p=r.indexes;o.forEach((function(t){f.push(t+c)})),l=h;var v=i.length/h;s.sizePerElement=l,s.elements.push({featureIdx:e,vertices:i,normals:a,offset:c}),c+=v;for(var d=function(r){var o=(null==a?void 0:a.slice(3*r,3*r+3))||[],s=i.slice(r*h,r*h+h),c=0;p&&void 0!==p[r]&&(c=p[r]),n.forEach((function(n){var i;n&&u[n.name]&&(i=n.buffer.data).push.apply(i,y(u[n.name](t,e,s,r,o,c)))}))},g=0;g<v;g++)d(g)})),t.abrupt("return",{descriptors:n,featureLayout:s,indices:f});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Xv={pointFill:function(){var t=o(r().mark((function t(e){var n,o,i,a,u,s,c,f,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,o=e.features,i=e.enablePicking,a=e.shape2d,u={a_Color:up,a_Position:sp,filter:cp,a_vertexId:fp,a_PickingColor:function(t){var e=t.id;return i?op(e):[0,0,0]},a_Shape:function(t){var e=t.shape,r=void 0===e?2:e;return[a.indexOf(r)]},a_Extrude:function(t,e,r,n){var o=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],i=n%4*3;return[o[i],o[i+1],o[i+2]]},a_Size:function(t){var e=t.size,r=void 0===e?5:e;return Array.isArray(r)?[r[0]]:[r]}},s={sizePerElement:0,elements:[]},c=0,f=[],l=3,o.forEach((function(t,e){var r=$v(t),o=r.indices,i=r.vertices,a=r.normals,h=r.size;o.forEach((function(t){f.push(t+c)})),l=h;var p=i.length/h;s.sizePerElement=l,s.elements.push({featureIdx:e,vertices:i,normals:a,offset:c}),c+=p;for(var v=function(r){var o=[],a=i.slice(r*h,r*h+h);n.forEach((function(n){var i;n&&u[n.name]&&(i=n.buffer.data).push.apply(i,y(u[n.name](t,e,a,r,o,0)))}))},d=0;d<p;d++)v(d)})),t.abrupt("return",{descriptors:n,featureLayout:s,indices:f});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),line:Qv,polygonFill:function(){var t=o(r().mark((function t(e){var n,o,i,a,u,s,c,f;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,o=e.features,i=e.enablePicking,a={a_Color:up,a_Position:sp,filter:cp,a_vertexId:fp,a_PickingColor:function(t){var e=t.id;return i?op(e):[0,0,0]}},u={sizePerElement:0,elements:[]},s=0,c=[],f=3,o.forEach((function(t,e){var r=Kv(t),o=r.indices,i=r.vertices,l=r.normals,h=r.size;o.forEach((function(t){c.push(t+s)})),f=h;var p=i.length/h;u.sizePerElement=f,u.elements.push({featureIdx:e,vertices:i,normals:l,offset:s}),s+=p;for(var v=function(r){var o=[],u=i.slice(r*h,r*h+h);n.forEach((function(n){var i;n&&a[n.name]&&(i=n.buffer.data).push.apply(i,y(a[n.name](t,e,u,r,o,0)))}))},d=0;d<p;d++)v(d)})),t.abrupt("return",{descriptors:n,featureLayout:u,indices:c});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Jv=function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Xv);function td(t){return ed.apply(this,arguments)}function ed(){return(ed=o(r().mark((function t(e){var n,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.workerType,o=e.data,!Jv[n]){t.next=3;break}return t.abrupt("return",Jv[n](o));case 3:return t.abrupt("return",Promise.reject(new Error(\'Worker with type "\'.concat(n,\'" non-existent.\'))));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return fi(td),t.WorkerSourceMap=Xv,t.createWorker=fi,t.worker=td,t}({});\n',If="l7-worker",Rf=3,Lf=!0;function Df(e){Tf(If,e)}function Nf(){var e=Mf(If);if(!e)throw new Error("get worker failed by workerName: ".concat(If,"."));return e}function Ff(e,t){return zf.apply(this,arguments)}function zf(){return zf=Object(ae["a"])(ue.a.mark((function e(t,n){var r,i,o,a,s;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=Nf(),i=Ga.getWorkerFarm({maxConcurrency:Rf,reuseWorkers:Lf}),o=i.getWorkerPool({name:If,source:r}),e.next=5,o.startJob(If,(function(e,t,n){return e.done(n)}));case 5:return a=e.sent,a.postMessage("process",{input:{workerType:t,data:n}}),e.next=9,a.result;case 9:return s=e.sent,e.abrupt("return",s.result);case 11:case"end":return e.stop()}}),e)}))),zf.apply(this,arguments)}function Bf(e,t){var n=t.extent,r=void 0===n?[121.168,30.2828,121.384,30.4219]:n,i=new Promise((function(t){e instanceof HTMLImageElement||Qi(e)?t([e]):Uf(e,(function(e){t(e)}))})),o={originData:e,images:i,_id:1,dataArray:[{_id:0,coordinates:[[r[0],r[1]],[r[2],r[3]]]}]};return o}function Uf(e,t){var n=e,r=[];if("string"===typeof n)Ar({url:n},(function(e,n){n&&(r.push(n),t(r))}));else{var i=n.length,o=0;n.forEach((function(e){Ar({url:e},(function(e,n){o++,n&&r.push(n),o===i&&t(r)}))}))}return Bf}Df(Pf);var Vf=n("dA7e"),Hf=n("eRUA"),Gf=n.n(Hf),Wf=function(){function e(t,n,r,i){Object(Ve["a"])(this,e),Object(Ge["a"])(this,"vectorLayerCache",{}),this.x=n,this.y=r,this.z=i,this.vectorTile=new Vf["VectorTile"](new Gf.a(t))}return Object(He["a"])(e,[{key:"getTileData",value:function(e){if(!e||!this.vectorTile.layers[e])return[];if(this.vectorLayerCache[e])return this.vectorLayerCache[e];var t=this.vectorTile.layers[e];if(Array.isArray(t.features))return this.vectorLayerCache[e]=t.features,t.features;for(var n=[],r=0;r<t.length;r++){var i=t.feature(r),o=i.toGeoJSON(this.x,this.y,this.z);n.push(Object(N["a"])(Object(N["a"])({},o),{},{properties:Object(N["a"])({id:o.id},o.properties)}))}return this.vectorLayerCache[e]=n,n}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),e}(),qf={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},Zf=function(){var e=Object(ae["a"])(ue.a.mark((function e(t,n,r,i,o){var a;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=ya(t,n),e.abrupt("return",new Promise((function(e){if(o)o({x:r.x,y:r.y,z:r.z},(function(t,n){if(t||!n)e(void 0);else{var i=new Wf(n,r.x,r.y,r.z);e(i)}}));else{var t=Or(Object(N["a"])(Object(N["a"])({},i),{},{url:a}),(function(t,n){if(t||!n)e(void 0);else{var i=new Wf(n,r.x,r.y,r.z);e(i)}}));r.xhrCancel=function(){return t.abort()}}})));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}();function Yf(e,t){var n=Array.isArray(e)?e[0]:e,r=function(e,r){return Zf(n,e,r,null===t||void 0===t?void 0:t.requestParameters,null===t||void 0===t?void 0:t.getCustomData)},i=Object(N["a"])(Object(N["a"])(Object(N["a"])({},qf),t),{},{getTileData:r});return{data:n,dataArray:[],tilesetOptions:i,isTile:!0}}function Xf(e,t,n){switch(e){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return t/n;case"%":return t%n;case"^":return Math.pow(t,n);case"abs":return Math.abs(t);case"floor":return Math.floor(t);case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"sin":return Math.sin(t);case"cos":return Math.cos(t);case"atan":return-1===n?Math.atan(t):Math.atan2(t,n);case"min":return Math.min(t,n);case"max":return Math.max(t,n);case"log10":return Math.log(t);case"log2":return Math.log2(t);default:return console.warn("Calculate symbol err! Return default 0"),0}}function Kf(e,t){for(var n=t[0],r=n.width,i=n.height,o=t.map((function(e){return e.rasterData})),a=r*i,s=[],u=JSON.stringify(e),c=0;c<a;c++){var l=JSON.parse(u),f=$f(l,o,c);if("number"===typeof f)s.push(f);else{var p=Jf(l);s.push(p)}}return s}function $f(e,t,n){if(2===e.length&&"band"===e[0]&&"number"===typeof e[1])try{return t[e[1]][n]}catch(r){return console.warn("Raster Data err!"),0}e.map((function(i,o){if(Array.isArray(i)&&i.length>0)switch(i[0]){case"band":try{e[o]=t[i[1]][n]}catch(r){console.warn("Raster Data err!"),e[o]=0}break;default:$f(i,t,n)}}))}function Qf(e){var t=Object(Oi["a"])(e,3),n=t[0],r=t[1],i=void 0===r?-1:r,o=t[2],a=void 0===o?-1:o;if(void 0===n)return console.warn("Express err!"),["+",0,0];var s=n.replace(/\s+/g,"");return[s,i,a]}function Jf(e){var t=Qf(e),n=t[0],r=t[1],i=t[2];return Array.isArray(r)&&(r=Jf(e[1])),Array.isArray(i)&&(i=Jf(e[2])),Xf(n,r,i)}var ep={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:tp}};function tp(e,t){for(var n=e[0].rasterData,r=e[1].rasterData,i=e[2].rasterData,o=[],a=(null===t||void 0===t?void 0:t.countCut)||[2,98],s=Object(Oi["a"])(a,2),u=s[0],c=s[1],l=(null===t||void 0===t?void 0:t.RMinMax)||np(n,u,c),f=(null===t||void 0===t?void 0:t.GMinMax)||np(r,u,c),p=(null===t||void 0===t?void 0:t.BMinMax)||np(i,u,c),h=0;h<n.length;h++)o.push(Math.max(0,n[h]-l[0])),o.push(Math.max(0,r[h]-f[0])),o.push(Math.max(0,i[h]-p[0]));return{rasterData:o,rMinMax:l,gMinMax:f,bMinMax:p}}function np(e,t,n){var r=e.slice().sort((function(e,t){return e-t})),i=r.length,o=r[Math.ceil(i*t/100)],a=r[Math.ceil(i*n/100)];return[o,a]}function rp(e,t,n){return ip.apply(this,arguments)}function ip(){return ip=Object(ae["a"])(ue.a.mark((function e(t,n,r){var i,o,a,s,u,c;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",{rasterData:[0],width:1,heigh:1});case 2:return e.next=4,Promise.all(t.map((function(e){var t=e.data,r=e.bands,i=void 0===r?[0]:r;return n(t,i)})));case 4:i=e.sent,o=[],i.forEach((function(e){Array.isArray(e)?o.push.apply(o,Object(D["a"])(e)):o.push(e)})),a=o[0],s=a.width,u=a.height,e.t0=Object(ne["a"])(r),e.next="function"===e.t0?11:"object"===e.t0?13:15;break;case 11:return c=r(o),e.abrupt("break",16);case 13:return c=Array.isArray(r)?{rasterData:Kf(r,o)}:op(r,o),e.abrupt("break",16);case 15:c={rasterData:o[0].rasterData};case 16:return e.abrupt("return",Object(N["a"])(Object(N["a"])({},c),{},{width:s,height:u}));case 17:case"end":return e.stop()}}),e)}))),ip.apply(this,arguments)}function op(e,t){var n=ep[e.type];return"function"===n.type?n.method(t,null===e||void 0===e?void 0:e.options):"operation"===n.type?"rgb"===e.type?ap(n.expression,t):{rasterData:Kf(n.expression,t)}:void 0}function ap(e,t){void 0===e.r&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),void 0===e.g&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),void 0===e.b&&console.warn("Channel B lost in Operation! Use band[0] to fill!");var n=Kf(e.r||["band",0],t),r=Kf(e.g||["band",0],t),i=Kf(e.b||["band",0],t);return[n,r,i]}function sp(e,t,n,r){return up.apply(this,arguments)}function up(){return up=Object(ae["a"])(ue.a.mark((function e(t,n,r,i){var o;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,rp(t,n,r);case 2:o=e.sent,i(null,{data:o});case 4:case"end":return e.stop()}}),e)}))),up.apply(this,arguments)}function cp(e,t){return e.map((function(e){return 1*e[t]}))}function lp(e){return!!Array.isArray(e)&&(0===e.length||"number"===typeof e[0])}function fp(e,t){var n,r,i,o=t.extent,a=t.width,s=t.height,u=t.min,c=t.max,l=t.format,f=t.operation;if(void 0===l||lp(e))n=Array.from(e),r=a,i=s;else{var p=Array.isArray(e)?e:[e];n=rp(p,l,f)}var h={_id:1,dataArray:[{_id:1,data:n,width:r,height:i,min:u,max:c,coordinates:[[o[0],o[1]],[o[2],o[3]]]}]};return h}n("mNvP");var pp=n("4cb6"),hp=n("APxj"),dp=n.n(hp),vp={IEventEmitter:Symbol["for"]("IEventEmitter"),ISceneService:Symbol["for"]("ISceneService"),IGlobalConfigService:Symbol["for"]("IGlobalConfigService"),ICameraService:Symbol["for"]("ICameraService"),ICoordinateSystemService:Symbol["for"]("ICoordinateSystemService"),ILayerService:Symbol["for"]("ILayerService"),IDebugService:Symbol["for"]("IDebugService"),ILayerMappingService:Symbol["for"]("ILayerMappingService"),ILayerStyleService:Symbol["for"]("ILayerStyleService"),IMapService:Symbol["for"]("IMapService"),IMarkerService:Symbol["for"]("IMarkerService"),IPopupService:Symbol["for"]("PopupService"),IFactoryMapService:Symbol["for"]("Factory<IMapService>"),IRendererService:Symbol["for"]("IRendererService"),IShaderModuleService:Symbol["for"]("IShaderModuleService"),IIconService:Symbol["for"]("IIconService"),IFontService:Symbol["for"]("IFontService"),IInteractionService:Symbol["for"]("IInteractionService"),IPickingService:Symbol["for"]("IPickingService"),IControlService:Symbol["for"]("IControlService"),IStyleAttributeService:Symbol["for"]("IStyleAttributeService"),ILayer:Symbol["for"]("ILayer"),ILayerPlugin:Symbol["for"]("ILayerPlugin"),INormalPass:Symbol["for"]("INormalPass"),IPostProcessor:Symbol["for"]("IPostProcessor"),IPostProcessingPass:Symbol["for"]("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol["for"]("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol["for"]("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol["for"]("IMultiPassRenderer"),SceneID:Symbol["for"]("SceneID"),MapConfig:Symbol["for"]("MapConfig")},mp=n("TIQr"),gp=n.n(mp);function yp(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=bp(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function bp(e,t){if(e){if("string"===typeof e)return _p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_p(e,t):void 0}}function _p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xp,wp,Op=30;function Ep(e){var t=e.characterSet,n=e.getFontWidth,r=e.fontHeight,i=e.buffer,o=e.maxCanvasWidth,a=e.mapping,s=void 0===a?{}:a,u=e.xOffset,c=void 0===u?0:u,l=e.yOffset,f=void 0===l?0:l,p=0,h=c;Array.from(t).forEach((function(e,t){if(!s[e]){var r=n(e,t);h+Op>o&&(h=0,p++),s[e]={x:h,y:f+p*Op,width:Op,height:Op,advance:r},h+=Op}}));var d=r+2*i;return{mapping:s,xOffset:h,yOffset:f+p*d,canvasHeight:Ap(f+(p+1)*d)}}function Sp(e,t,n){var r,i=0,o=0,a=0,s=[],u={},c=yp(e);try{for(c.s();!(r=c.n()).done;){var l=r.value;if(!u[l.id]){var f=l.size;i+f+t>n&&(jp(u,s,o),i=0,o=a+o+t,a=0,s=[]),s.push({icon:l,xOffset:i}),i=i+f+t,a=Math.max(a,f)}}}catch(h){c.e(h)}finally{c.f()}s.length>0&&jp(u,s,o);var p=Ap(a+o+t);return{mapping:u,canvasHeight:p}}function jp(e,t,n){var r,i=yp(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.icon,s=o.xOffset;e[a.id]=Object(N["a"])(Object(N["a"])({},a),{},{x:s,y:n,image:a.image,width:a.width,height:a.height})}}catch(u){i.e(u)}finally{i.f()}}function Ap(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function kp(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Cp(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function Cp(e,t){if(e){if("string"===typeof e)return Tp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tp(e,t):void 0}}function Tp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mp(e){var t=Pp();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Pp(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Ip=Gp(),Rp="sans-serif",Lp="normal",Dp=24,Np=3,Fp=.25,zp=8,Bp=1024,Up=1,Vp=1,Hp=3;function Gp(){for(var e=[],t=32;t<128;t++)e.push(String.fromCharCode(t));return e}function Wp(e,t,n,r){e.font="".concat(r," ").concat(n,"px ").concat(t),e.fillStyle="black",e.textBaseline="middle"}function qp(e,t){for(var n=0;n<e.length;n++)t.data[4*n+3]=e[n]}var Zp,Yp,Xp=(xp=Object(pp["injectable"])(),xp(wp=function(e){Object(et["a"])(n,e);var t=Mp(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"fontAtlas",void 0),Object(Ge["a"])(Object(gt["a"])(e),"iconFontMap",void 0),Object(Ge["a"])(Object(gt["a"])(e),"iconFontGlyphs",{}),Object(Ge["a"])(Object(gt["a"])(e),"fontOptions",void 0),Object(Ge["a"])(Object(gt["a"])(e),"key",void 0),Object(Ge["a"])(Object(gt["a"])(e),"cache",new Ao(Hp)),e}return Object(He["a"])(n,[{key:"scale",get:function(){return Vp}},{key:"canvas",get:function(){var e=this.cache.get(this.key);return e&&e.data}},{key:"mapping",get:function(){var e=this.cache.get(this.key);return e&&e.mapping||{}}},{key:"getCanvasByKey",value:function(e){var t=this.cache.get(e);return t&&t.data}},{key:"getMappingByKey",value:function(e){var t=this.cache.get(e);return t&&t.mapping||{}}},{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:Rp,fontWeight:Lp,characterSet:Ip,fontSize:Dp,buffer:Np,sdf:!0,cutoff:Fp,radius:zp,iconfont:!1},this.key="",this.iconFontMap=new Map}},{key:"addIconGlyphs",value:function(e){var t=this;e.forEach((function(e){t.iconFontGlyphs[e.name]=e.unicode}))}},{key:"addIconFont",value:function(e,t){this.iconFontMap.set(e,t)}},{key:"getIconFontKey",value:function(e){return this.iconFontMap.get(e)||e}},{key:"getGlyph",value:function(e){return this.iconFontGlyphs[e]?String.fromCharCode(parseInt(this.iconFontGlyphs[e],16)):""}},{key:"setFontOptions",value:function(e){this.fontOptions=Object(N["a"])(Object(N["a"])({},this.fontOptions),e),this.key=this.getKey();var t=this.getNewChars(this.key,this.fontOptions.characterSet),n=this.cache.get(this.key);if(!n||0!==t.length){var r=this.generateFontAtlas(this.key,t,n);this.fontAtlas=r,this.cache.set(this.key,r)}}},{key:"addFontFace",value:function(e,t){var n=this,r=document.createElement("style");r.type="text/css",r.innerText="\n        @font-face{\n            font-family: '".concat(e,"';\n            src: url('").concat(t,"') format('woff2'),\n            url('").concat(t,"') format('woff'),\n            url('").concat(t,"') format('truetype');\n        }"),r.onload=function(){if(document.fonts)try{document.fonts.load("24px ".concat(e),"L7text"),document.fonts.ready.then((function(){n.emit("fontloaded",{fontFamily:e})}))}catch(t){console.warn("\u5f53\u524d\u73af\u5883\u4e0d\u652f\u6301 document.fonts !"),console.warn("\u5f53\u524d\u73af\u5883\u4e0d\u652f\u6301 iconfont !"),console.warn(t)}},document.getElementsByTagName("head")[0].appendChild(r)}},{key:"destroy",value:function(){this.cache.clear(),this.iconFontMap.clear()}},{key:"generateFontAtlas",value:function(e,t,n){var r=this.fontOptions,i=r.fontFamily,o=r.fontWeight,a=r.fontSize,s=r.buffer,u=r.sdf,c=r.radius,l=r.cutoff,f=r.iconfont,p=n&&n.data;p||(p=dr.document.createElement("canvas"),p.width=Bp);var h=p.getContext("2d",{willReadFrequently:!0});Wp(h,i,a,o);var d=Ep(Object(N["a"])({getFontWidth:function(e){return h.measureText(e).width},fontHeight:a*Vp,buffer:s,characterSet:t,maxCanvasWidth:Bp},n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset})),v=d.mapping,m=d.canvasHeight,g=d.xOffset,y=d.yOffset,b=h.getImageData(0,0,p.width,p.height);if(p.height=m,h.putImageData(b,0,0),Wp(h,i,a,o),u){var _,x=new gp.a(a,s,c,l,i,o),w=h.getImageData(0,0,x.size,x.size),O=kp(t);try{for(O.s();!(_=O.n()).done;){var E=_.value;if(f){var S=String.fromCharCode(parseInt(E.replace("&#x","").replace(";",""),16)),j=x.draw(S);qp(j,w)}else qp(x.draw(E),w);h.putImageData(w,v[E].x,v[E].y)}}catch(T){O.e(T)}finally{O.f()}}else{var A,k=kp(t);try{for(k.s();!(A=k.n()).done;){var C=A.value;h.fillText(C,v[C].x,v[C].y+a*Up)}}catch(T){k.e(T)}finally{k.f()}}return{xOffset:g,yOffset:y,mapping:v,data:p,width:p.width,height:p.height}}},{key:"getKey",value:function(){var e=this.fontOptions,t=e.fontFamily,n=e.fontWeight;return"".concat(t,"_").concat(n)}},{key:"getNewChars",value:function(e,t){var n=this.cache.get(e);if(!n)return t;var r=[],i=n.mapping,o=new Set(Object.keys(i)),a=new Set(t);return a.forEach((function(e){o.has(e)||r.push(e)})),r}}]),n}(Fo["EventEmitter"]))||wp);function Kp(e){var t=$p();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function $p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Qp,Jp,eh,th,nh,rh=3,ih=1024,oh=64,ah=(Zp=Object(pp["injectable"])(),Zp(Yp=function(e){Object(et["a"])(n,e);var t=Kp(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"canvasHeight",128),Object(Ge["a"])(Object(gt["a"])(e),"texture",void 0),Object(Ge["a"])(Object(gt["a"])(e),"canvas",void 0),Object(Ge["a"])(Object(gt["a"])(e),"iconData",void 0),Object(Ge["a"])(Object(gt["a"])(e),"iconMap",void 0),Object(Ge["a"])(Object(gt["a"])(e),"ctx",void 0),Object(Ge["a"])(Object(gt["a"])(e),"loadingImageCount",0),e}return Object(He["a"])(n,[{key:"isLoading",value:function(){return 0===this.loadingImageCount}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=dr.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t,n){var r,i;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=new Image,this.loadingImageCount++,this.hasImage(t)?console.warn("Image Id already exists"):this.iconData.push({id:t,size:oh}),this.updateIconMap(),e.next=6,this.loadImage(n);case 6:r=e.sent,i=this.iconData.find((function(e){return e.id===t})),i&&(i.image=r,i.width=r.width,i.height=r.height),this.update();case 10:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"addImageMini",value:function(e,t,n){var r=this,i=n.getSceneConfig().canvas,o=i.createImage();if(this.loadingImageCount++,this.hasImage(e))throw new Error("Image Id already exists");this.iconData.push({id:e,size:oh}),this.updateIconMap(),this.loadImageMini(t,i).then((function(t){o=t;var n=r.iconData.find((function(t){return t.id===e}));n&&(n.image=o,n.width=o.width,n.height=o.height),r.update()}))}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(e){return this.iconMap.hasOwnProperty(e)}},{key:"removeImage",value:function(e){this.hasImage(e)&&(this.iconData=this.iconData.filter((function(t){return t.id!==e})),delete this.iconMap[e],this.update())}},{key:"destroy",value:function(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}},{key:"loadImage",value:function(e){return new Promise((function(t,n){if(e instanceof HTMLImageElement)t(e);else{var r=new Image;r.crossOrigin="anonymous",r.onload=function(){t(r)},r.onerror=function(){n(new Error("Could not load image at "+e))},r.src=e instanceof File?URL.createObjectURL(e):e}}))}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,0===this.loadingImageCount&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var e=this;this.canvas.width=ih,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach((function(t){var n=e.iconMap[t],r=n.x,i=n.y,o=n.image,a=n.width,s=void 0===a?64:a,u=n.height,c=void 0===u?64:u,l=Math.max(s,c),f=l/oh,p=c/f,h=s/f;o&&e.ctx.drawImage(o,r+(oh-h)/2,i+(oh-p)/2,h,p)}))}},{key:"updateIconMap",value:function(){var e=Sp(this.iconData,rh,ih),t=e.mapping,n=e.canvasHeight;this.iconMap=t,this.canvasHeight=n}},{key:"loadImageMini",value:function(e,t){return new Promise((function(n,r){var i=t.createImage();i.crossOrigin="anonymous",i.onload=function(){n(i)},i.onerror=function(){r(new Error("Could not load image at "+e))},i.src=e}))}}]),n}(Fo["EventEmitter"]))||Yp),sh=(Qp=Object(pp["injectable"])(),Qp(Jp=function(){function e(){Object(Ve["a"])(this,e),Object(Ge["a"])(this,"viewport",void 0),Object(Ge["a"])(this,"overridedViewProjectionMatrix",void 0),Object(Ge["a"])(this,"jitteredViewProjectionMatrix",void 0),Object(Ge["a"])(this,"jitteredProjectionMatrix",void 0),Object(Ge["a"])(this,"viewMatrixInverse",void 0),Object(Ge["a"])(this,"cameraPosition",void 0)}return Object(He["a"])(e,[{key:"init",value:function(){}},{key:"update",value:function(e){this.viewport=e,this.viewMatrixInverse=a.create(),a.invert(this.viewMatrixInverse,e.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getModelMatrix",value:function(){return this.viewport.getModelMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var e=this.viewport.getCenter(),t=Object(Oi["a"])(e,2),n=t[0],r=t[1];return[n,r]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(e,t){return this.viewport.projectFlat(e,t)}},{key:"setViewProjectionMatrix",value:function(e){this.overridedViewProjectionMatrix=e}},{key:"jitterProjectionMatrix",value:function(e,t){var n=a.fromTranslation(a.create(),[e,t,0]);this.jitteredProjectionMatrix=a.multiply(a.create(),n,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=a.multiply(a.create(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),e}())||Jp);function uh(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ch(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function ch(e,t){if(e){if("string"===typeof e)return lh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lh(e,t):void 0}}function lh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(function(e){e["TOPRIGHT"]="topright",e["TOPLEFT"]="topleft",e["BOTTOMRIGHT"]="bottomright",e["BOTTOMLEFT"]="bottomleft",e["TOPCENTER"]="topcenter",e["BOTTOMCENTER"]="bottomcenter",e["LEFTCENTER"]="leftcenter",e["RIGHTCENTER"]="rightcenter",e["LEFTTOP"]="lefttop",e["RIGHTTOP"]="righttop",e["LEFTBOTTOM"]="leftbottom",e["RIGHTBOTTOM"]="rightbottom"})(eh||(eh={}));var fh,ph,hh,dh,vh,mh,gh,yh,bh={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"},_h=(th=Object(pp["injectable"])(),th(nh=function(){function e(){Object(Ve["a"])(this,e),Object(Ge["a"])(this,"container",void 0),Object(Ge["a"])(this,"controlCorners",void 0),Object(Ge["a"])(this,"controlContainer",void 0),Object(Ge["a"])(this,"scene",void 0),Object(Ge["a"])(this,"mapsService",void 0),Object(Ge["a"])(this,"controls",[]),Object(Ge["a"])(this,"unAddControls",[])}return Object(He["a"])(e,[{key:"init",value:function(e,t){this.container=e.container,this.scene=t,this.mapsService=t.get(vp.IMapService),this.initControlPos()}},{key:"addControl",value:function(e,t){var n=t.get(vp.IMapService);n.map?(e.addTo(this.scene),this.controls.push(e)):this.unAddControls.push(e)}},{key:"getControlByName",value:function(e){return this.controls.find((function(t){return t.controlOption.name===e}))}},{key:"removeControl",value:function(e){var t=this.controls.indexOf(e);return t>-1&&this.controls.splice(t,1),e.remove(),this}},{key:"addControls",value:function(){var e=this;this.unAddControls.forEach((function(t){t.addTo(e.scene),e.controls.push(t)})),this.unAddControls=[]}},{key:"destroy",value:function(){var e,t=uh(this.controls);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.remove()}}catch(r){t.e(r)}finally{t.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var e=this.controlCorners={},t="l7-",n=this.controlContainer=r.create("div",t+"control-container",this.container);function i(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=i.map((function(e){return t+e})).join(" ");e[i.filter((function(e){return!["row","column"].includes(e)})).join("")]=r.create("div",o,n)}function o(e){var t=e.replace(/^(top|bottom|left|right|center)/,"$1-").split("-");return[].concat(Object(D["a"])(t),[bh[e]])}Object.values(eh).forEach((function(e){i(o(e))}))}},{key:"clearControlPos",value:function(){for(var e in this.controlCorners)this.controlCorners[e]&&r.remove(this.controlCorners[e]);this.controlContainer&&r.remove(this.controlContainer)}}]),e}())||nh),xh=(fh=Object(pp["injectable"])(),fh(ph=function(){function e(){Object(Ve["a"])(this,e),Object(Ge["a"])(this,"container",void 0),Object(Ge["a"])(this,"scene",void 0),Object(Ge["a"])(this,"mapsService",void 0),Object(Ge["a"])(this,"markers",[]),Object(Ge["a"])(this,"markerLayers",[]),Object(Ge["a"])(this,"unAddMarkers",[]),Object(Ge["a"])(this,"unAddMarkerLayers",[])}return Object(He["a"])(e,[{key:"addMarkerLayer",value:function(e){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(e),e.addTo(this.scene)):this.unAddMarkerLayers.push(e)}},{key:"removeMarkerLayer",value:function(e){e.destroy(),this.markerLayers.indexOf(e);var t=this.markerLayers.indexOf(e);t>-1&&this.markerLayers.splice(t,1)}},{key:"addMarker",value:function(e){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(e),e.addTo(this.scene)):this.unAddMarkers.push(e)}},{key:"addMarkers",value:function(){var e=this;this.unAddMarkers.forEach((function(t){t.addTo(e.scene),e.markers.push(t)})),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var e=this;this.unAddMarkerLayers.forEach((function(t){e.markerLayers.push(t),t.addTo(e.scene)})),this.unAddMarkers=[]}},{key:"removeMarker",value:function(e){e.remove(),this.markers.indexOf(e);var t=this.markers.indexOf(e);t>-1&&this.markers.splice(t,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(e){this.scene=e,this.mapsService=e.get(vp.IMapService)}},{key:"destroy",value:function(){this.markers.forEach((function(e){e.remove()})),this.markers=[],this.markerLayers.forEach((function(e){e.destroy()})),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(e){e.destroy()}}]),e}())||ph),wh=(hh=Object(pp["injectable"])(),hh(dh=function(){function e(){Object(Ve["a"])(this,e),Object(Ge["a"])(this,"scene",void 0),Object(Ge["a"])(this,"mapsService",void 0),Object(Ge["a"])(this,"popups",[]),Object(Ge["a"])(this,"unAddPopups",[])}return Object(He["a"])(e,[{key:"isMarkerReady",get:function(){return this.mapsService.map&&this.mapsService.getMarkerContainer()}},{key:"removePopup",value:function(e){null!==e&&void 0!==e&&e.isOpen()&&e.remove();var t=this.popups.indexOf(e);t>-1&&this.popups.splice(t,1);var n=this.unAddPopups.indexOf(e);n>-1&&this.unAddPopups.splice(n,1)}},{key:"destroy",value:function(){this.popups.forEach((function(e){return e.remove()}))}},{key:"addPopup",value:function(e){var t=this;e&&e.getOptions().autoClose&&[].concat(Object(D["a"])(this.popups),Object(D["a"])(this.unAddPopups)).forEach((function(e){e.getOptions().autoClose&&t.removePopup(e)})),this.isMarkerReady?(e.addTo(this.scene),this.popups.push(e)):this.unAddPopups.push(e),e.on("close",(function(){t.removePopup(e)}))}},{key:"initPopup",value:function(){var e=this;this.unAddPopups.length&&this.unAddPopups.forEach((function(t){e.addPopup(t),e.unAddPopups=[]}))}},{key:"init",value:function(e){this.scene=e,this.mapsService=e.get(vp.IMapService)}}]),e}())||dh);(function(e){e["normal"]="normal",e["additive"]="additive",e["subtractive"]="subtractive",e["min"]="min",e["max"]="max",e["none"]="none"})(vh||(vh={})),function(e){e["MULTIPLE"]="MULTIPLE",e["SINGLE"]="SINGLE"}(mh||(mh={})),function(e){e["AND"]="and",e["OR"]="or"}(gh||(gh={})),function(e){e["INIT"]="init",e["UPDATE"]="update"}(yh||(yh={}));var Oh,Eh,Sh={MapToken:"\u60a8\u6b63\u5728\u4f7f\u7528 Demo \u6d4b\u8bd5 Token, \u751f\u4ea7\u73af\u5883\u52a1\u5fc5\u81ea\u884c\u6ce8\u518c Token \u786e\u4fdd\u670d\u52a1\u7a33\u5b9a",SDK:"\u8bf7\u786e\u8ba4\u5f15\u5165\u4e86mapbox-gl api\u4e14\u5728L7\u4e4b\u524d\u5f15\u5165"},jh=Sh,Ah={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,isMini:!1,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},kh={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",maskLayers:[],enableMask:!0,maskOperation:gh.AND,pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0},Ch=(Oh=Object(pp["injectable"])(),Oh(Eh=function(){function e(){Object(Ve["a"])(this,e),Object(Ge["a"])(this,"sceneConfigCache",{}),Object(Ge["a"])(this,"layerConfigCache",{}),Object(Ge["a"])(this,"layerAttributeConfigCache",{})}return Object(He["a"])(e,[{key:"getSceneConfig",value:function(e){return this.sceneConfigCache[e]}},{key:"getSceneWarninfo",value:function(e){return jh[e]}},{key:"setSceneConfig",value:function(e,t){this.sceneConfigCache[e]=Object(N["a"])(Object(N["a"])({},Ah),t)}},{key:"getLayerConfig",value:function(e){return this.layerConfigCache[e]}},{key:"setLayerConfig",value:function(e,t,n){this.layerConfigCache[t]=Object(N["a"])({},Object(Ei["merge"])({},this.sceneConfigCache[e],kh,n))}},{key:"getAttributeConfig",value:function(e){return this.layerAttributeConfigCache[e]}},{key:"setAttributeConfig",value:function(e,t){this.layerAttributeConfigCache[e]=Object(N["a"])(Object(N["a"])({},this.layerAttributeConfigCache[e]),t)}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),e}())||Eh);function Th(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Mh(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var Ph,Ih=Math.PI/180,Rh=512,Lh=4003e4;function Dh(e){var t=e.latitude,n=void 0===t?0:t,r=e.zoom,i=void 0===r?0:r,o=e.scale,a=e.highPrecision,s=void 0!==a&&a,u=e.flipY,c=void 0!==u&&u;o=void 0!==o?o:Math.pow(2,i);var l={},f=Rh*o,p=Math.cos(n*Ih),h=f/360,d=h/p,v=f/Lh/p;if(l.pixelsPerMeter=[v,-v,v],l.metersPerPixel=[1/v,-1/v,1/v],l.pixelsPerDegree=[h,-d,v],l.degreesPerPixel=[1/h,-1/d,1/v],s){var m=Ih*Math.tan(n*Ih)/p,g=h*m/2,y=f/Lh*m,b=y/d*v;l.pixelsPerDegree2=[0,-g,y],l.pixelsPerMeter2=[b,0,b],c&&(l.pixelsPerDegree2[1]=-l.pixelsPerDegree2[1],l.pixelsPerMeter2[1]=-l.pixelsPerMeter2[1])}return c&&(l.pixelsPerMeter[1]=-l.pixelsPerMeter[1],l.metersPerPixel[1]=-l.metersPerPixel[1],l.pixelsPerDegree[1]=-l.pixelsPerDegree[1],l.degreesPerPixel[1]=-l.degreesPerPixel[1]),l}(function(e){e[e["LNGLAT"]=1]="LNGLAT",e[e["LNGLAT_OFFSET"]=2]="LNGLAT_OFFSET",e[e["VECTOR_TILE"]=3]="VECTOR_TILE",e[e["IDENTITY"]=4]="IDENTITY",e[e["P20"]=5]="P20",e[e["P20_OFFSET"]=6]="P20_OFFSET",e[e["METER_OFFSET"]=7]="METER_OFFSET",e[e["P20_2"]=8]="P20_2"})(Ph||(Ph={}));var Nh,Fh,zh,Bh,Uh,Vh,Hh,Gh={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",Mvp:"u_Mvp"},Wh=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],qh=(Nh=Object(pp["injectable"])(),Fh=Object(pp["inject"])(vp.ICameraService),Nh((Bh=function(){function e(){Object(Ve["a"])(this,e),Object(Ge["a"])(this,"needRefresh",!0),Th(this,"cameraService",Uh,this),Object(Ge["a"])(this,"coordinateSystem",void 0),Object(Ge["a"])(this,"viewportCenter",void 0),Object(Ge["a"])(this,"viewportCenterProjection",void 0),Object(Ge["a"])(this,"pixelsPerDegree",void 0),Object(Ge["a"])(this,"pixelsPerDegree2",void 0),Object(Ge["a"])(this,"pixelsPerMeter",void 0)}return Object(He["a"])(e,[{key:"refresh",value:function(e){var t=this.cameraService.getZoom(),n=this.cameraService.getZoomScale(),r=e||this.cameraService.getCenter(),i=Dh({latitude:r[1],zoom:t}),o=i.pixelsPerMeter,a=i.pixelsPerDegree;this.viewportCenter=r,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=o,this.pixelsPerDegree=a,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===Ph.LNGLAT||this.coordinateSystem===Ph.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===Ph.LNGLAT_OFFSET?this.calculateLnglatOffset(r,t):this.coordinateSystem===Ph.P20_OFFSET&&this.calculateLnglatOffset(r,t,n,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(e){this.coordinateSystem=e}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(e,t,n,r){var i=Dh({latitude:e[1],zoom:t,scale:n,flipY:r,highPrecision:!0}),o=i.pixelsPerMeter,s=i.pixelsPerDegree,u=i.pixelsPerDegree2,l=this.cameraService.getViewMatrix(),f=this.cameraService.getProjectionMatrix(),p=a.multiply([],f,l),h=this.cameraService.projectFlat([Math.fround(e[0]),Math.fround(e[1])],Math.pow(2,t));this.viewportCenterProjection=c.transformMat4([],[h[0],h[1],0,1],p),l=this.cameraService.getViewMatrixUncentered()||l,p=a.multiply([],f,l),p=a.multiply([],p,Wh),this.cameraService.setViewProjectionMatrix(p),this.pixelsPerMeter=o,this.pixelsPerDegree=s,this.pixelsPerDegree2=u}}]),e}(),Uh=Mh(Bh.prototype,"cameraService",[Fh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zh=Bh))||zh);function Zh(e){var t=Yh();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Yh(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Xh,Kh,$h,Qh,Jh,ed,td=(Vh=Object(pp["injectable"])(),Vh(Hh=function(e){Object(et["a"])(n,e);var t=Zh(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"renderMap",new Map),Object(Ge["a"])(Object(gt["a"])(e),"enable",!1),Object(Ge["a"])(Object(gt["a"])(e),"renderEnable",!1),Object(Ge["a"])(Object(gt["a"])(e),"cacheLogs",{}),e}return Object(He["a"])(n,[{key:"setEnable",value:function(e){this.enable=!!e}},{key:"log",value:function(e,t){var n=this;if(this.enable){var r=e.split("."),i=null;r.forEach((function(e,o){null!==i?(i[e]||(i[e]={}),o!==r.length-1&&(i=i[e])):(n.cacheLogs[e]||(n.cacheLogs[e]={}),o!==r.length-1&&(i=n.cacheLogs[e])),o===r.length-1&&(i[e]=Object(N["a"])(Object(N["a"])({time:Date.now()},i[e]),t))}))}}},{key:"getLog",value:function(e){var t=this;switch(Object(ne["a"])(e)){case"string":return this.cacheLogs[e];case"object":return e.map((function(e){return t.cacheLogs[e]})).filter((function(e){return void 0!==e}));case"undefined":return this.cacheLogs}}},{key:"removeLog",value:function(e){delete this.cacheLogs[e]}},{key:"generateRenderUid",value:function(){return this.renderEnable?jo():""}},{key:"renderDebug",value:function(e){this.renderEnable=e}},{key:"renderStart",value:function(e){if(this.renderEnable&&this.enable){var t=this.renderMap.get(e)||{};this.renderMap.set(e,Object(N["a"])(Object(N["a"])({},t),{},{renderUid:e,renderStart:Date.now()}))}}},{key:"renderEnd",value:function(e){if(this.renderEnable&&this.enable){var t=this.renderMap.get(e);if(t){var n=t.renderStart,r=Date.now();this.emit("renderEnd",Object(N["a"])(Object(N["a"])({},t),{},{renderEnd:r,renderDuration:r-n})),this.renderMap["delete"](e)}}}},{key:"destroy",value:function(){this.cacheLogs=null,this.renderMap.clear()}}]),n}(Fo["EventEmitter"]))||Hh),nd=n("AfwI"),rd=n.n(nd);function id(e){var t=od();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function od(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(function(e){e["Hover"]="hover",e["Click"]="click",e["Select"]="select",e["Active"]="active",e["Drag"]="drag"})(Xh||(Xh={}));var ad,sd,ud,cd,ld,fd,pd,hd,dd,vd,md,gd,yd,bd,_d={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"},xd=(Kh=Object(pp["injectable"])(),$h=Object(pp["inject"])(vp.IMapService),Kh((Jh=function(e){Object(et["a"])(n,e);var t=id(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"indragging",!1),Th(Object(gt["a"])(e),"mapService",ed,Object(gt["a"])(e)),Object(Ge["a"])(Object(gt["a"])(e),"hammertime",void 0),Object(Ge["a"])(Object(gt["a"])(e),"lastClickTime",0),Object(Ge["a"])(Object(gt["a"])(e),"lastClickXY",[-1,-1]),Object(Ge["a"])(Object(gt["a"])(e),"clickTimer",void 0),Object(Ge["a"])(Object(gt["a"])(e),"$containter",void 0),Object(Ge["a"])(Object(gt["a"])(e),"onDrag",(function(t){var n=e.interactionEvent(t);n.type=_d[n.type],"dragging"===n.type?e.indragging=!0:e.indragging=!1,e.emit(Xh.Drag,n)})),Object(Ge["a"])(Object(gt["a"])(e),"onHammer",(function(t){t.srcEvent.stopPropagation();var n=e.interactionEvent(t);e.emit(Xh.Hover,n)})),Object(Ge["a"])(Object(gt["a"])(e),"onTouch",(function(t){var n=t.touches[0];e.onHover({x:n.pageX,y:n.pageY,type:"touch"})})),Object(Ge["a"])(Object(gt["a"])(e),"onHover",(function(t){var n=t.clientX,r=t.clientY,i=n,o=r,a=t.type,s=e.mapService.getMapContainer();if(s)if(pr)i=i-s.left-0,o=o-s.top-0;else{var u=s.getBoundingClientRect(),c=u.top,l=u.left;i=i-l-s.clientLeft,o=o-c-s.clientTop}var f=e.mapService.containerToLngLat([i,o]);if("click"!==a)"touch"!==a?"click"!==a&&"dblclick"!==a&&e.emit(Xh.Hover,{x:i,y:o,lngLat:f,type:a,target:t}):e.isDoubleTap(i,o,f);else{if(!pr&&"ontouchstart"in document.documentElement===!0)return;e.isDoubleTap(i,o,f)}})),e}return Object(He["a"])(n,[{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(Xh.Hover)}},{key:"triggerHover",value:function(e){var t=e.x,n=e.y;this.emit(Xh.Hover,{x:t,y:n})}},{key:"triggerSelect",value:function(e){this.emit(Xh.Select,{featureId:e})}},{key:"triggerActive",value:function(e){this.emit(Xh.Active,{featureId:e})}},{key:"handleMiniEvent",value:function(e){this.onHover({clientX:e.touches[0].pageX,clientY:e.touches[0].pageY,type:"touch"})}},{key:"addEventListenerOnMap",value:function(){var e=this.mapService.getMapContainer();if(e)if(pr)dr.document.addEventListener("touchstart",this.handleMiniEvent.bind(this));else{var t=new rd.a.Manager(e);t.add(new rd.a.Tap({event:"dblclick",taps:2})),t.add(new rd.a.Tap({event:"click"})),t.add(new rd.a.Pan({threshold:0,pointers:0})),t.add(new rd.a.Press({})),t.on("dblclick click",this.onHammer),t.on("panstart panmove panend pancancel",this.onDrag),e.addEventListener("mousemove",this.onHover),e.addEventListener("mousedown",this.onHover,!0),e.addEventListener("mouseup",this.onHover),e.addEventListener("contextmenu",this.onHover),this.hammertime=t}}},{key:"removeEventListenerOnMap",value:function(){if(pr)dr.document.removeEventListener("touchstart",this.handleMiniEvent.bind(this));else{var e=this.mapService.getMapContainer();e&&(e.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),e.removeEventListener("mousedown",this.onHover),e.removeEventListener("mouseup",this.onHover),e.removeEventListener("contextmenu",this.onHover))}}},{key:"interactionEvent",value:function(e){var t,n,r=e.type,i=e.pointerType;"touch"===i?(n=Math.floor(e.pointers[0].clientY),t=Math.floor(e.pointers[0].clientX)):(n=Math.floor(e.srcEvent.y),t=Math.floor(e.srcEvent.x));var o=this.mapService.getMapContainer();if(o){var a=o.getBoundingClientRect(),s=a.top,u=a.left;t-=u,n-=s}var c=this.mapService.containerToLngLat([t,n]);return{x:t,y:n,lngLat:c,type:r,target:e.srcEvent}}},{key:"isDoubleTap",value:function(e,t,n){var r=this,i=(new Date).getTime(),o="click";i-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-e)<10&&Math.abs(this.lastClickXY[1]-t)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),o="dblclick",this.emit(Xh.Hover,{x:e,y:t,lngLat:n,type:o})):(this.lastClickTime=i,this.lastClickXY=[e,t],this.clickTimer=setTimeout((function(){o="click",r.emit(Xh.Hover,{x:e,y:t,lngLat:n,type:o})}),400))}}]),n}(zo.a),ed=Mh(Jh.prototype,"mapService",[$h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qh=Jh))||Qh),wd=0;function Od(e){if(pr)return null;var t=e;if("string"===typeof e&&(t=document.getElementById(e)),t){var n=document.createElement("div");return n.style.cssText+="\n      position: absolute;\n      z-index:2;\n      height: 100%;\n      width: 100%;\n      pointer-events: none;\n    ",n.id="l7-scene-".concat(wd++),n.classList.add("l7-scene"),t.appendChild(n),n}return null}function Ed(e){var t,n=!0;if((null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.target)instanceof HTMLElement){var r,i=null===e||void 0===e||null===(r=e.target)||void 0===r?void 0:r.target;while(i){var o,a=Array.from(i.classList);if(a.includes("l7-marker")||a.includes("l7-popup")){n=!1;break}i=null===(o=i)||void 0===o?void 0:o.parentElement}}return n}(function(e){e[e["DEPTH_BUFFER_BIT"]=256]="DEPTH_BUFFER_BIT",e[e["STENCIL_BUFFER_BIT"]=1024]="STENCIL_BUFFER_BIT",e[e["COLOR_BUFFER_BIT"]=16384]="COLOR_BUFFER_BIT",e[e["POINTS"]=0]="POINTS",e[e["LINES"]=1]="LINES",e[e["LINE_LOOP"]=2]="LINE_LOOP",e[e["LINE_STRIP"]=3]="LINE_STRIP",e[e["TRIANGLES"]=4]="TRIANGLES",e[e["TRIANGLE_STRIP"]=5]="TRIANGLE_STRIP",e[e["TRIANGLE_FAN"]=6]="TRIANGLE_FAN",e[e["ZERO"]=0]="ZERO",e[e["ONE"]=1]="ONE",e[e["SRC_COLOR"]=768]="SRC_COLOR",e[e["ONE_MINUS_SRC_COLOR"]=769]="ONE_MINUS_SRC_COLOR",e[e["SRC_ALPHA"]=770]="SRC_ALPHA",e[e["ONE_MINUS_SRC_ALPHA"]=771]="ONE_MINUS_SRC_ALPHA",e[e["DST_ALPHA"]=772]="DST_ALPHA",e[e["ONE_MINUS_DST_ALPHA"]=773]="ONE_MINUS_DST_ALPHA",e[e["DST_COLOR"]=774]="DST_COLOR",e[e["ONE_MINUS_DST_COLOR"]=775]="ONE_MINUS_DST_COLOR",e[e["SRC_ALPHA_SATURATE"]=776]="SRC_ALPHA_SATURATE",e[e["FUNC_ADD"]=32774]="FUNC_ADD",e[e["BLEND_EQUATION"]=32777]="BLEND_EQUATION",e[e["BLEND_EQUATION_RGB"]=32777]="BLEND_EQUATION_RGB",e[e["BLEND_EQUATION_ALPHA"]=34877]="BLEND_EQUATION_ALPHA",e[e["FUNC_SUBTRACT"]=32778]="FUNC_SUBTRACT",e[e["FUNC_REVERSE_SUBTRACT"]=32779]="FUNC_REVERSE_SUBTRACT",e[e["MAX_EXT"]=32776]="MAX_EXT",e[e["MIN_EXT"]=32775]="MIN_EXT",e[e["BLEND_DST_RGB"]=32968]="BLEND_DST_RGB",e[e["BLEND_SRC_RGB"]=32969]="BLEND_SRC_RGB",e[e["BLEND_DST_ALPHA"]=32970]="BLEND_DST_ALPHA",e[e["BLEND_SRC_ALPHA"]=32971]="BLEND_SRC_ALPHA",e[e["CONSTANT_COLOR"]=32769]="CONSTANT_COLOR",e[e["ONE_MINUS_CONSTANT_COLOR"]=32770]="ONE_MINUS_CONSTANT_COLOR",e[e["CONSTANT_ALPHA"]=32771]="CONSTANT_ALPHA",e[e["ONE_MINUS_CONSTANT_ALPHA"]=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e["BLEND_COLOR"]=32773]="BLEND_COLOR",e[e["ARRAY_BUFFER"]=34962]="ARRAY_BUFFER",e[e["ELEMENT_ARRAY_BUFFER"]=34963]="ELEMENT_ARRAY_BUFFER",e[e["ARRAY_BUFFER_BINDING"]=34964]="ARRAY_BUFFER_BINDING",e[e["ELEMENT_ARRAY_BUFFER_BINDING"]=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e["STREAM_DRAW"]=35040]="STREAM_DRAW",e[e["STATIC_DRAW"]=35044]="STATIC_DRAW",e[e["DYNAMIC_DRAW"]=35048]="DYNAMIC_DRAW",e[e["BUFFER_SIZE"]=34660]="BUFFER_SIZE",e[e["BUFFER_USAGE"]=34661]="BUFFER_USAGE",e[e["CURRENT_VERTEX_ATTRIB"]=34342]="CURRENT_VERTEX_ATTRIB",e[e["FRONT"]=1028]="FRONT",e[e["BACK"]=1029]="BACK",e[e["FRONT_AND_BACK"]=1032]="FRONT_AND_BACK",e[e["CULL_FACE"]=2884]="CULL_FACE",e[e["BLEND"]=3042]="BLEND",e[e["DITHER"]=3024]="DITHER",e[e["STENCIL_TEST"]=2960]="STENCIL_TEST",e[e["DEPTH_TEST"]=2929]="DEPTH_TEST",e[e["SCISSOR_TEST"]=3089]="SCISSOR_TEST",e[e["POLYGON_OFFSET_FILL"]=32823]="POLYGON_OFFSET_FILL",e[e["SAMPLE_ALPHA_TO_COVERAGE"]=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e["SAMPLE_COVERAGE"]=32928]="SAMPLE_COVERAGE",e[e["NO_ERROR"]=0]="NO_ERROR",e[e["INVALID_ENUM"]=1280]="INVALID_ENUM",e[e["INVALID_VALUE"]=1281]="INVALID_VALUE",e[e["INVALID_OPERATION"]=1282]="INVALID_OPERATION",e[e["OUT_OF_MEMORY"]=1285]="OUT_OF_MEMORY",e[e["CW"]=2304]="CW",e[e["CCW"]=2305]="CCW",e[e["LINE_WIDTH"]=2849]="LINE_WIDTH",e[e["ALIASED_POINT_SIZE_RANGE"]=33901]="ALIASED_POINT_SIZE_RANGE",e[e["ALIASED_LINE_WIDTH_RANGE"]=33902]="ALIASED_LINE_WIDTH_RANGE",e[e["CULL_FACE_MODE"]=2885]="CULL_FACE_MODE",e[e["FRONT_FACE"]=2886]="FRONT_FACE",e[e["DEPTH_RANGE"]=2928]="DEPTH_RANGE",e[e["DEPTH_WRITEMASK"]=2930]="DEPTH_WRITEMASK",e[e["DEPTH_CLEAR_VALUE"]=2931]="DEPTH_CLEAR_VALUE",e[e["DEPTH_FUNC"]=2932]="DEPTH_FUNC",e[e["STENCIL_CLEAR_VALUE"]=2961]="STENCIL_CLEAR_VALUE",e[e["STENCIL_FUNC"]=2962]="STENCIL_FUNC",e[e["STENCIL_FAIL"]=2964]="STENCIL_FAIL",e[e["STENCIL_PASS_DEPTH_FAIL"]=2965]="STENCIL_PASS_DEPTH_FAIL",e[e["STENCIL_PASS_DEPTH_PASS"]=2966]="STENCIL_PASS_DEPTH_PASS",e[e["STENCIL_REF"]=2967]="STENCIL_REF",e[e["STENCIL_VALUE_MASK"]=2963]="STENCIL_VALUE_MASK",e[e["STENCIL_WRITEMASK"]=2968]="STENCIL_WRITEMASK",e[e["STENCIL_BACK_FUNC"]=34816]="STENCIL_BACK_FUNC",e[e["STENCIL_BACK_FAIL"]=34817]="STENCIL_BACK_FAIL",e[e["STENCIL_BACK_PASS_DEPTH_FAIL"]=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e["STENCIL_BACK_PASS_DEPTH_PASS"]=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e["STENCIL_BACK_REF"]=36003]="STENCIL_BACK_REF",e[e["STENCIL_BACK_VALUE_MASK"]=36004]="STENCIL_BACK_VALUE_MASK",e[e["STENCIL_BACK_WRITEMASK"]=36005]="STENCIL_BACK_WRITEMASK",e[e["VIEWPORT"]=2978]="VIEWPORT",e[e["SCISSOR_BOX"]=3088]="SCISSOR_BOX",e[e["COLOR_CLEAR_VALUE"]=3106]="COLOR_CLEAR_VALUE",e[e["COLOR_WRITEMASK"]=3107]="COLOR_WRITEMASK",e[e["UNPACK_ALIGNMENT"]=3317]="UNPACK_ALIGNMENT",e[e["PACK_ALIGNMENT"]=3333]="PACK_ALIGNMENT",e[e["MAX_TEXTURE_SIZE"]=3379]="MAX_TEXTURE_SIZE",e[e["MAX_VIEWPORT_DIMS"]=3386]="MAX_VIEWPORT_DIMS",e[e["SUBPIXEL_BITS"]=3408]="SUBPIXEL_BITS",e[e["RED_BITS"]=3410]="RED_BITS",e[e["GREEN_BITS"]=3411]="GREEN_BITS",e[e["BLUE_BITS"]=3412]="BLUE_BITS",e[e["ALPHA_BITS"]=3413]="ALPHA_BITS",e[e["DEPTH_BITS"]=3414]="DEPTH_BITS",e[e["STENCIL_BITS"]=3415]="STENCIL_BITS",e[e["POLYGON_OFFSET_UNITS"]=10752]="POLYGON_OFFSET_UNITS",e[e["POLYGON_OFFSET_FACTOR"]=32824]="POLYGON_OFFSET_FACTOR",e[e["TEXTURE_BINDING_2D"]=32873]="TEXTURE_BINDING_2D",e[e["SAMPLE_BUFFERS"]=32936]="SAMPLE_BUFFERS",e[e["SAMPLES"]=32937]="SAMPLES",e[e["SAMPLE_COVERAGE_VALUE"]=32938]="SAMPLE_COVERAGE_VALUE",e[e["SAMPLE_COVERAGE_INVERT"]=32939]="SAMPLE_COVERAGE_INVERT",e[e["COMPRESSED_TEXTURE_FORMATS"]=34467]="COMPRESSED_TEXTURE_FORMATS",e[e["DONT_CARE"]=4352]="DONT_CARE",e[e["FASTEST"]=4353]="FASTEST",e[e["NICEST"]=4354]="NICEST",e[e["GENERATE_MIPMAP_HINT"]=33170]="GENERATE_MIPMAP_HINT",e[e["BYTE"]=5120]="BYTE",e[e["UNSIGNED_BYTE"]=5121]="UNSIGNED_BYTE",e[e["SHORT"]=5122]="SHORT",e[e["UNSIGNED_SHORT"]=5123]="UNSIGNED_SHORT",e[e["INT"]=5124]="INT",e[e["UNSIGNED_INT"]=5125]="UNSIGNED_INT",e[e["FLOAT"]=5126]="FLOAT",e[e["DEPTH_COMPONENT"]=6402]="DEPTH_COMPONENT",e[e["ALPHA"]=6406]="ALPHA",e[e["RGB"]=6407]="RGB",e[e["RGBA"]=6408]="RGBA",e[e["LUMINANCE"]=6409]="LUMINANCE",e[e["LUMINANCE_ALPHA"]=6410]="LUMINANCE_ALPHA",e[e["UNSIGNED_SHORT_4_4_4_4"]=32819]="UNSIGNED_SHORT_4_4_4_4",e[e["UNSIGNED_SHORT_5_5_5_1"]=32820]="UNSIGNED_SHORT_5_5_5_1",e[e["UNSIGNED_SHORT_5_6_5"]=33635]="UNSIGNED_SHORT_5_6_5",e[e["FRAGMENT_SHADER"]=35632]="FRAGMENT_SHADER",e[e["VERTEX_SHADER"]=35633]="VERTEX_SHADER",e[e["MAX_VERTEX_ATTRIBS"]=34921]="MAX_VERTEX_ATTRIBS",e[e["MAX_VERTEX_UNIFORM_VECTORS"]=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e["MAX_VARYING_VECTORS"]=36348]="MAX_VARYING_VECTORS",e[e["MAX_COMBINED_TEXTURE_IMAGE_UNITS"]=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e["MAX_VERTEX_TEXTURE_IMAGE_UNITS"]=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e["MAX_TEXTURE_IMAGE_UNITS"]=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e["MAX_FRAGMENT_UNIFORM_VECTORS"]=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e["SHADER_TYPE"]=35663]="SHADER_TYPE",e[e["DELETE_STATUS"]=35712]="DELETE_STATUS",e[e["LINK_STATUS"]=35714]="LINK_STATUS",e[e["VALIDATE_STATUS"]=35715]="VALIDATE_STATUS",e[e["ATTACHED_SHADERS"]=35717]="ATTACHED_SHADERS",e[e["ACTIVE_UNIFORMS"]=35718]="ACTIVE_UNIFORMS",e[e["ACTIVE_ATTRIBUTES"]=35721]="ACTIVE_ATTRIBUTES",e[e["SHADING_LANGUAGE_VERSION"]=35724]="SHADING_LANGUAGE_VERSION",e[e["CURRENT_PROGRAM"]=35725]="CURRENT_PROGRAM",e[e["NEVER"]=512]="NEVER",e[e["LESS"]=513]="LESS",e[e["EQUAL"]=514]="EQUAL",e[e["LEQUAL"]=515]="LEQUAL",e[e["GREATER"]=516]="GREATER",e[e["NOTEQUAL"]=517]="NOTEQUAL",e[e["GEQUAL"]=518]="GEQUAL",e[e["ALWAYS"]=519]="ALWAYS",e[e["KEEP"]=7680]="KEEP",e[e["REPLACE"]=7681]="REPLACE",e[e["INCR"]=7682]="INCR",e[e["DECR"]=7683]="DECR",e[e["INVERT"]=5386]="INVERT",e[e["INCR_WRAP"]=34055]="INCR_WRAP",e[e["DECR_WRAP"]=34056]="DECR_WRAP",e[e["VENDOR"]=7936]="VENDOR",e[e["RENDERER"]=7937]="RENDERER",e[e["VERSION"]=7938]="VERSION",e[e["NEAREST"]=9728]="NEAREST",e[e["LINEAR"]=9729]="LINEAR",e[e["NEAREST_MIPMAP_NEAREST"]=9984]="NEAREST_MIPMAP_NEAREST",e[e["LINEAR_MIPMAP_NEAREST"]=9985]="LINEAR_MIPMAP_NEAREST",e[e["NEAREST_MIPMAP_LINEAR"]=9986]="NEAREST_MIPMAP_LINEAR",e[e["LINEAR_MIPMAP_LINEAR"]=9987]="LINEAR_MIPMAP_LINEAR",e[e["TEXTURE_MAG_FILTER"]=10240]="TEXTURE_MAG_FILTER",e[e["TEXTURE_MIN_FILTER"]=10241]="TEXTURE_MIN_FILTER",e[e["TEXTURE_WRAP_S"]=10242]="TEXTURE_WRAP_S",e[e["TEXTURE_WRAP_T"]=10243]="TEXTURE_WRAP_T",e[e["TEXTURE_2D"]=3553]="TEXTURE_2D",e[e["TEXTURE"]=5890]="TEXTURE",e[e["TEXTURE_CUBE_MAP"]=34067]="TEXTURE_CUBE_MAP",e[e["TEXTURE_BINDING_CUBE_MAP"]=34068]="TEXTURE_BINDING_CUBE_MAP",e[e["TEXTURE_CUBE_MAP_POSITIVE_X"]=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e["TEXTURE_CUBE_MAP_NEGATIVE_X"]=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e["TEXTURE_CUBE_MAP_POSITIVE_Y"]=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e["TEXTURE_CUBE_MAP_NEGATIVE_Y"]=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e["TEXTURE_CUBE_MAP_POSITIVE_Z"]=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e["TEXTURE_CUBE_MAP_NEGATIVE_Z"]=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e["MAX_CUBE_MAP_TEXTURE_SIZE"]=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e["TEXTURE0"]=33984]="TEXTURE0",e[e["TEXTURE1"]=33985]="TEXTURE1",e[e["TEXTURE2"]=33986]="TEXTURE2",e[e["TEXTURE3"]=33987]="TEXTURE3",e[e["TEXTURE4"]=33988]="TEXTURE4",e[e["TEXTURE5"]=33989]="TEXTURE5",e[e["TEXTURE6"]=33990]="TEXTURE6",e[e["TEXTURE7"]=33991]="TEXTURE7",e[e["TEXTURE8"]=33992]="TEXTURE8",e[e["TEXTURE9"]=33993]="TEXTURE9",e[e["TEXTURE10"]=33994]="TEXTURE10",e[e["TEXTURE11"]=33995]="TEXTURE11",e[e["TEXTURE12"]=33996]="TEXTURE12",e[e["TEXTURE13"]=33997]="TEXTURE13",e[e["TEXTURE14"]=33998]="TEXTURE14",e[e["TEXTURE15"]=33999]="TEXTURE15",e[e["TEXTURE16"]=34e3]="TEXTURE16",e[e["TEXTURE17"]=34001]="TEXTURE17",e[e["TEXTURE18"]=34002]="TEXTURE18",e[e["TEXTURE19"]=34003]="TEXTURE19",e[e["TEXTURE20"]=34004]="TEXTURE20",e[e["TEXTURE21"]=34005]="TEXTURE21",e[e["TEXTURE22"]=34006]="TEXTURE22",e[e["TEXTURE23"]=34007]="TEXTURE23",e[e["TEXTURE24"]=34008]="TEXTURE24",e[e["TEXTURE25"]=34009]="TEXTURE25",e[e["TEXTURE26"]=34010]="TEXTURE26",e[e["TEXTURE27"]=34011]="TEXTURE27",e[e["TEXTURE28"]=34012]="TEXTURE28",e[e["TEXTURE29"]=34013]="TEXTURE29",e[e["TEXTURE30"]=34014]="TEXTURE30",e[e["TEXTURE31"]=34015]="TEXTURE31",e[e["ACTIVE_TEXTURE"]=34016]="ACTIVE_TEXTURE",e[e["REPEAT"]=10497]="REPEAT",e[e["CLAMP_TO_EDGE"]=33071]="CLAMP_TO_EDGE",e[e["MIRRORED_REPEAT"]=33648]="MIRRORED_REPEAT",e[e["FLOAT_VEC2"]=35664]="FLOAT_VEC2",e[e["FLOAT_VEC3"]=35665]="FLOAT_VEC3",e[e["FLOAT_VEC4"]=35666]="FLOAT_VEC4",e[e["INT_VEC2"]=35667]="INT_VEC2",e[e["INT_VEC3"]=35668]="INT_VEC3",e[e["INT_VEC4"]=35669]="INT_VEC4",e[e["BOOL"]=35670]="BOOL",e[e["BOOL_VEC2"]=35671]="BOOL_VEC2",e[e["BOOL_VEC3"]=35672]="BOOL_VEC3",e[e["BOOL_VEC4"]=35673]="BOOL_VEC4",e[e["FLOAT_MAT2"]=35674]="FLOAT_MAT2",e[e["FLOAT_MAT3"]=35675]="FLOAT_MAT3",e[e["FLOAT_MAT4"]=35676]="FLOAT_MAT4",e[e["SAMPLER_2D"]=35678]="SAMPLER_2D",e[e["SAMPLER_CUBE"]=35680]="SAMPLER_CUBE",e[e["VERTEX_ATTRIB_ARRAY_ENABLED"]=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e["VERTEX_ATTRIB_ARRAY_SIZE"]=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e["VERTEX_ATTRIB_ARRAY_STRIDE"]=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e["VERTEX_ATTRIB_ARRAY_TYPE"]=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e["VERTEX_ATTRIB_ARRAY_NORMALIZED"]=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e["VERTEX_ATTRIB_ARRAY_POINTER"]=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e["VERTEX_ATTRIB_ARRAY_BUFFER_BINDING"]=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e["COMPILE_STATUS"]=35713]="COMPILE_STATUS",e[e["LOW_FLOAT"]=36336]="LOW_FLOAT",e[e["MEDIUM_FLOAT"]=36337]="MEDIUM_FLOAT",e[e["HIGH_FLOAT"]=36338]="HIGH_FLOAT",e[e["LOW_INT"]=36339]="LOW_INT",e[e["MEDIUM_INT"]=36340]="MEDIUM_INT",e[e["HIGH_INT"]=36341]="HIGH_INT",e[e["FRAMEBUFFER"]=36160]="FRAMEBUFFER",e[e["RENDERBUFFER"]=36161]="RENDERBUFFER",e[e["RGBA4"]=32854]="RGBA4",e[e["RGB5_A1"]=32855]="RGB5_A1",e[e["RGB565"]=36194]="RGB565",e[e["DEPTH_COMPONENT16"]=33189]="DEPTH_COMPONENT16",e[e["STENCIL_INDEX"]=6401]="STENCIL_INDEX",e[e["STENCIL_INDEX8"]=36168]="STENCIL_INDEX8",e[e["DEPTH_STENCIL"]=34041]="DEPTH_STENCIL",e[e["RENDERBUFFER_WIDTH"]=36162]="RENDERBUFFER_WIDTH",e[e["RENDERBUFFER_HEIGHT"]=36163]="RENDERBUFFER_HEIGHT",e[e["RENDERBUFFER_INTERNAL_FORMAT"]=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e["RENDERBUFFER_RED_SIZE"]=36176]="RENDERBUFFER_RED_SIZE",e[e["RENDERBUFFER_GREEN_SIZE"]=36177]="RENDERBUFFER_GREEN_SIZE",e[e["RENDERBUFFER_BLUE_SIZE"]=36178]="RENDERBUFFER_BLUE_SIZE",e[e["RENDERBUFFER_ALPHA_SIZE"]=36179]="RENDERBUFFER_ALPHA_SIZE",e[e["RENDERBUFFER_DEPTH_SIZE"]=36180]="RENDERBUFFER_DEPTH_SIZE",e[e["RENDERBUFFER_STENCIL_SIZE"]=36181]="RENDERBUFFER_STENCIL_SIZE",e[e["FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE"]=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e["FRAMEBUFFER_ATTACHMENT_OBJECT_NAME"]=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e["FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL"]=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e["FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE"]=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e["COLOR_ATTACHMENT0"]=36064]="COLOR_ATTACHMENT0",e[e["DEPTH_ATTACHMENT"]=36096]="DEPTH_ATTACHMENT",e[e["STENCIL_ATTACHMENT"]=36128]="STENCIL_ATTACHMENT",e[e["DEPTH_STENCIL_ATTACHMENT"]=33306]="DEPTH_STENCIL_ATTACHMENT",e[e["NONE"]=0]="NONE",e[e["FRAMEBUFFER_COMPLETE"]=36053]="FRAMEBUFFER_COMPLETE",e[e["FRAMEBUFFER_INCOMPLETE_ATTACHMENT"]=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e["FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT"]=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e["FRAMEBUFFER_INCOMPLETE_DIMENSIONS"]=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e["FRAMEBUFFER_UNSUPPORTED"]=36061]="FRAMEBUFFER_UNSUPPORTED",e[e["FRAMEBUFFER_BINDING"]=36006]="FRAMEBUFFER_BINDING",e[e["RENDERBUFFER_BINDING"]=36007]="RENDERBUFFER_BINDING",e[e["MAX_RENDERBUFFER_SIZE"]=34024]="MAX_RENDERBUFFER_SIZE",e[e["INVALID_FRAMEBUFFER_OPERATION"]=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e["UNPACK_FLIP_Y_WEBGL"]=37440]="UNPACK_FLIP_Y_WEBGL",e[e["UNPACK_PREMULTIPLY_ALPHA_WEBGL"]=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e["CONTEXT_LOST_WEBGL"]=37442]="CONTEXT_LOST_WEBGL",e[e["UNPACK_COLORSPACE_CONVERSION_WEBGL"]=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e["BROWSER_DEFAULT_WEBGL"]=37444]="BROWSER_DEFAULT_WEBGL"})(ad||(ad={}));var Sd,jd,Ad,kd,Cd,Td,Md,Pd,Id,Rd=(sd=Object(pp["injectable"])(),ud=Object(pp["inject"])(vp.IMapService),cd=Object(pp["inject"])(vp.IRendererService),ld=Object(pp["inject"])(vp.IGlobalConfigService),fd=Object(pp["inject"])(vp.IInteractionService),pd=Object(pp["inject"])(vp.ILayerService),sd((dd=function(){function e(){var t=this;Object(Ve["a"])(this,e),Object(Ge["a"])(this,"pickedColors",void 0),Object(Ge["a"])(this,"pickedTileLayers",[]),Th(this,"mapService",vd,this),Th(this,"rendererService",md,this),Th(this,"configService",gd,this),Th(this,"interactionService",yd,this),Th(this,"layerService",bd,this),Object(Ge["a"])(this,"pickingFBO",void 0),Object(Ge["a"])(this,"width",0),Object(Ge["a"])(this,"height",0),Object(Ge["a"])(this,"alreadyInPicking",!1),Object(Ge["a"])(this,"pickBufferScale",1),Object(Ge["a"])(this,"pickFromPickingFBO",(function(e,n){var i=n.x,o=n.y,a=n.lngLat,s=n.type,u=n.target,c=!1,l=t.rendererService,f=l.readPixels,p=l.getContainer,h=t.getContainerSize(p()),d=h.width,v=h.height;d*=r.DPR,v*=r.DPR;var m=e.getLayerConfig(),g=m.enableHighlight,y=m.enableSelect,b=i*r.DPR,_=o*r.DPR;if(b>d-1*r.DPR||b<0||_>v-1*r.DPR||_<0)return!1;var x=f({x:Math.floor(b/t.pickBufferScale),y:Math.floor((v-(o+1)*r.DPR)/t.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:t.pickingFBO});if(t.pickedColors=x,0!==x[0]||0!==x[1]||0!==x[2]){var w=pi(x),O=e.layerPickService.getFeatureById(w);w!==e.getCurrentPickId()&&"mousemove"===s&&(s="mouseenter");var E={x:i,y:o,type:s,lngLat:a,featureId:w,feature:O,target:u};O&&(c=!0,e.setCurrentPickId(w),t.triggerHoverOnLayer(e,E))}else{var S={x:i,y:o,lngLat:a,type:null!==e.getCurrentPickId()&&"mousemove"===s?"mouseout":"un"+s,featureId:null,target:u,feature:null};t.triggerHoverOnLayer(e,Object(N["a"])(Object(N["a"])({},S),{},{type:"unpick"})),t.triggerHoverOnLayer(e,S),e.setCurrentPickId(null)}if(g&&e.layerPickService.highlightPickedFeature(x),y&&"click"===s&&(null===x||void 0===x?void 0:x.toString())!==[0,0,0,0].toString()){var j=pi(x);null===e.getCurrentSelectedId()||j!==e.getCurrentSelectedId()?(e.layerPickService.selectFeature(x),e.setCurrentSelectedId(j)):(e.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),e.setCurrentSelectedId(null))}return c}))}return Object(He["a"])(e,[{key:"init",value:function(e){var t=this.rendererService,n=t.createTexture2D,i=t.createFramebuffer,o=t.getContainer,a=this.getContainerSize(o()),s=a.width,u=a.height;s*=r.DPR,u*=r.DPR,this.pickBufferScale=this.configService.getSceneConfig(e).pickBufferScale||1,this.pickingFBO=i({color:n({width:Math.round(s/this.pickBufferScale),height:Math.round(u/this.pickBufferScale),wrapS:ad.CLAMP_TO_EDGE,wrapT:ad.CLAMP_TO_EDGE})}),this.interactionService.on(Xh.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t,n,r){var i,o,a,s=this;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=this.rendererService,o=i.useFramebuffer,a=i.clear,this.resizePickingFBO(),o(this.pickingFBO,(function(){a({framebuffer:s.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),t.hooks.beforePickingEncode.call(),t.renderModels({ispick:!0}),t.hooks.afterPickingEncode.call();var e=s.pickBox(t,n);r(e)}));case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"pickBox",value:function(e,t){var n=this,i=t.map((function(e){var t=e<0?0:e;return Math.floor(t*r.DPR/n.pickBufferScale)})),o=Object(Oi["a"])(i,4),a=o[0],s=o[1],u=o[2],c=o[3],l=this.rendererService,f=l.readPixels,p=l.getContainer,h=this.getContainerSize(p()),d=h.width,v=h.height;if(d*=r.DPR,v*=r.DPR,a>(d-1)*r.DPR/this.pickBufferScale||u<0||s>(v-1)*r.DPR/this.pickBufferScale||c<0)return[];for(var m=Math.min(d/this.pickBufferScale,u)-a,g=Math.min(v/this.pickBufferScale,c)-s,y=f({x:a,y:Math.floor(v/this.pickBufferScale-(c+1)),width:m,height:g,data:new Uint8Array(m*g*4),framebuffer:this.pickingFBO}),b=[],_={},x=0;x<y.length/4;x+=1){var w=y.slice(4*x,4*x+4),O=pi(w);if(-1!==O&&!_[O]){var E=e.layerPickService.getFeatureById(O);b.push(Object(N["a"])(Object(N["a"])({},E),{},{pickedFeatureIdx:O})),_[O]=!0}}return b}},{key:"handleCursor",value:function(e,t){var n=e.getLayerConfig(),r=n.cursor,i=void 0===r?"":r,o=n.cursorEnabled;if(o){var a=this.mapService.version,s="GAODE2.x"===a?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),u=null===s||void 0===s?void 0:s.style.getPropertyValue("cursor");"unmousemove"===t&&""!==u?null===s||void 0===s||s.style.setProperty("cursor",""):"mousemove"===t&&(null===s||void 0===s||s.style.setProperty("cursor",i))}}},{key:"destroy",value:function(){this.pickingFBO.destroy(),this.pickingFBO=null}},{key:"getContainerSize",value:function(e){return e.getContext?{width:e.width/r.DPR,height:e.height/r.DPR}:e.getBoundingClientRect()}},{key:"pickingAllLayer",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.layerService.needPick(t.type)&&this.isPickingAllLayer()){e.next=2;break}return e.abrupt("return");case 2:return this.alreadyInPicking=!0,e.next=5,this.pickingLayers(t);case 5:this.layerService.renderLayers(),this.alreadyInPicking=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isPickingAllLayer",value:function(){return!this.alreadyInPicking&&(!this.layerService.alreadyInRendering&&(!this.interactionService.indragging&&!!this.layerService.getShaderPickStat()))}},{key:"resizePickingFBO",value:function(){var e=this.rendererService.getContainer,t=this.getContainerSize(e()),n=t.width,i=t.height;n*=r.DPR,i*=r.DPR,this.width===n&&this.height===i||(this.pickingFBO.resize({width:Math.round(n/this.pickBufferScale),height:Math.round(i/this.pickBufferScale)}),this.width=n,this.height=i)}},{key:"pickingLayers",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t){var n,r,i,o=this;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=this.rendererService,r=n.useFramebuffer,i=n.clear,this.resizePickingFBO(),r(this.pickingFBO,(function(){var e=o.layerService.getRenderList();e.filter((function(e){return e.needPick(t.type)})).reverse().some((function(e){i({framebuffer:o.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),e.layerPickService.pickRender(t);var n=o.pickFromPickingFBO(e,t);return o.layerService.pickedLayerId=n?+e.id:-1,n&&!e.getLayerConfig().enablePropagation}))}));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"triggerHoverOnLayer",value:function(e,t){Ed(t)&&(this.handleCursor(e,t.type),e.emit(t.type,t))}}]),e}(),vd=Mh(dd.prototype,"mapService",[ud],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),md=Mh(dd.prototype,"rendererService",[cd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gd=Mh(dd.prototype,"configService",[ld],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yd=Mh(dd.prototype,"interactionService",[fd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bd=Mh(dd.prototype,"layerService",[pd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hd=dd))||hd),Ld=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Object(Ve["a"])(this,e),Object(Ge["a"])(this,"autoStart",void 0),Object(Ge["a"])(this,"startTime",0),Object(Ge["a"])(this,"oldTime",0),Object(Ge["a"])(this,"running",!1),Object(Ge["a"])(this,"elapsedTime",0),this.autoStart=t}return Object(He["a"])(e,[{key:"start",value:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"===typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}();function Dd(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Nd(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function Nd(e,t){if(e){if("string"===typeof e)return Fd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fd(e,t):void 0}}function Fd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zd(e){var t=Bd();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Bd(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Ud,Vd,Hd,Gd,Wd,qd,Zd,Yd,Xd,Kd,$d,Qd,Jd,ev,tv,nv,rv,iv,ov,av,sv,uv,cv,lv,fv,pv,hv,dv,vv,mv,gv,yv,bv,_v,xv,wv,Ov,Ev,Sv,jv,Av,kv=(Sd=Object(pp["injectable"])(),jd=Object(pp["inject"])(vp.IRendererService),Ad=Object(pp["inject"])(vp.IMapService),kd=Object(pp["inject"])(vp.IDebugService),Sd((Td=function(e){Object(et["a"])(n,e);var t=zd(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"pickedLayerId",-1),Object(Ge["a"])(Object(gt["a"])(e),"clock",new Ld),Object(Ge["a"])(Object(gt["a"])(e),"alreadyInRendering",!1),Object(Ge["a"])(Object(gt["a"])(e),"layers",[]),Object(Ge["a"])(Object(gt["a"])(e),"layerList",[]),Object(Ge["a"])(Object(gt["a"])(e),"layerRenderID",void 0),Object(Ge["a"])(Object(gt["a"])(e),"sceneInited",!1),Object(Ge["a"])(Object(gt["a"])(e),"animateInstanceCount",0),Object(Ge["a"])(Object(gt["a"])(e),"shaderPicking",!0),Object(Ge["a"])(Object(gt["a"])(e),"enableRender",!0),Th(Object(gt["a"])(e),"renderService",Md,Object(gt["a"])(e)),Th(Object(gt["a"])(e),"mapService",Pd,Object(gt["a"])(e)),Th(Object(gt["a"])(e),"debugService",Id,Object(gt["a"])(e)),Object(Ge["a"])(Object(gt["a"])(e),"reRender",Object(Ei["throttle"])((function(){e.renderLayers()}),32)),Object(Ge["a"])(Object(gt["a"])(e),"throttleRenderLayers",Object(Ei["throttle"])((function(){e.renderLayers()}),16)),e}return Object(He["a"])(n,[{key:"needPick",value:function(e){return this.layerList.some((function(t){return t.needPick(e)}))}},{key:"add",value:function(e){var t=this;this.layers.push(e),this.sceneInited&&e.init().then((function(){t.renderLayers()}))}},{key:"addMask",value:function(e){var t=this;this.sceneInited&&e.init().then((function(){t.renderLayers()}))}},{key:"initLayers",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t=this;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.sceneInited=!0,this.layers.forEach(function(){var e=Object(ae["a"])(ue.a.mark((function e(n){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.startInit){e.next=4;break}return e.next=3,n.init();case 3:t.updateLayerRenderList();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSceneInited",value:function(){return this.sceneInited}},{key:"getRenderList",value:function(){return this.layerList}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(e){return this.layers.find((function(t){return t.id===e}))}},{key:"getLayerByName",value:function(e){return this.layers.find((function(t){return t.name===e}))}},{key:"remove",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t,n){var r,i;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n?(r=n.layerChildren.indexOf(t),r>-1&&n.layerChildren.splice(r,1)):(i=this.layers.indexOf(t),i>-1&&this.layers.splice(i,1)),t.destroy(),this.reRender(),this.emit("layerChange",this.layers);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"removeAllLayers",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.destroy(),this.reRender();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setEnableRender",value:function(e){this.enableRender=e}},{key:"renderLayers",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o,a;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.alreadyInRendering&&this.enableRender){e.next=2;break}return e.abrupt("return");case 2:this.updateLayerRenderList(),t=this.debugService.generateRenderUid(),this.debugService.renderStart(t),this.alreadyInRendering=!0,this.clear(),n=Dd(this.layerList),e.prev=8,n.s();case 10:if((r=n.n()).done){e.next=23;break}if(i=r.value,o=i.getLayerConfig(),a=o.enableMask,i.masks.filter((function(e){return e.inited})).length>0&&a&&this.renderMask(i.masks),!i.getLayerConfig().enableMultiPassRenderer){e.next=19;break}return e.next=17,i.renderMultiPass();case 17:e.next=21;break;case 19:return e.next=21,i.render();case 21:e.next=10;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e["catch"](8),n.e(e.t0);case 28:return e.prev=28,n.f(),e.finish(28);case 31:this.debugService.renderEnd(t),this.alreadyInRendering=!1;case 33:case"end":return e.stop()}}),e,this,[[8,25,28,31]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"renderMask",value:function(e){var t=0;this.renderService.clear({stencil:0,depth:1,framebuffer:null});var n,r=e.length>1?mh.MULTIPLE:mh.SINGLE,i=Dd(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.render({isStencil:!0,stencilType:r,stencilIndex:t++})}}catch(a){i.e(a)}finally{i.f()}}},{key:"beforeRenderData",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t){var n;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.hooks.beforeRenderData.promise();case 2:n=e.sent,n&&this.renderLayers();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"renderTileLayerMask",value:function(e){var t=0,n=e.getLayerConfig(),r=n.enableMask,i=void 0===r||r,o=e.tileMask?1:0,a=e.masks.filter((function(e){return e.inited}));o+=i?a.length:1;var s=o>1?mh.MULTIPLE:mh.SINGLE;if((e.tileMask||a.length&&i)&&this.renderService.clear({stencil:0,depth:1,framebuffer:null}),a.length&&i){var u,c=Dd(a);try{for(c.s();!(u=c.n()).done;){var l=u.value;l.render({isStencil:!0,stencilType:s,stencilIndex:t++})}}catch(f){c.e(f)}finally{c.f()}}e.tileMask&&e.tileMask.render({isStencil:!0,stencilType:s,stencilIndex:t++,stencilOperation:gh.OR})}},{key:"renderTileLayer",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.renderTileLayerMask(t),!t.getLayerConfig().enableMultiPassRenderer){e.next=6;break}return e.next=4,t.renderMultiPass();case 4:e.next=8;break;case 6:return e.next=8,t.render();case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateLayerRenderList",value:function(){var e=this;this.layerList=[],this.layers.filter((function(e){return e.inited})).filter((function(e){return e.isVisible()})).sort((function(e,t){return e.zIndex-t.zIndex})).forEach((function(t){e.layerList.push(t)}))}},{key:"destroy",value:function(){this.layers.forEach((function(e){e.destroy()})),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers)}},{key:"startAnimate",value:function(){0===this.animateInstanceCount++&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){0===--this.animateInstanceCount&&(this.stopRender(),this.clock.stop())}},{key:"getOESTextureFloat",value:function(){return this.renderService.extensionObject.OES_texture_float}},{key:"enableShaderPick",value:function(){this.shaderPicking=!0}},{key:"disableShaderPick",value:function(){this.shaderPicking=!1}},{key:"getShaderPickStat",value:function(){return this.shaderPicking}},{key:"clear",value:function(){var e=fi(this.mapService.bgColor);this.renderService.clear({color:e,depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=dr.requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){dr.cancelAnimationFrame(this.layerRenderID)}}]),n}(Fo["EventEmitter"]),Md=Mh(Td.prototype,"renderService",[jd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pd=Mh(Td.prototype,"mapService",[Ad],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Id=Mh(Td.prototype,"debugService",[kd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cd=Td))||Cd),Cv=n("Ff2n"),Tv=function(){function e(t){var n=this;Object(Ve["a"])(this,e),Object(Ge["a"])(this,"name",void 0),Object(Ge["a"])(this,"type",void 0),Object(Ge["a"])(this,"scale",void 0),Object(Ge["a"])(this,"descriptor",void 0),Object(Ge["a"])(this,"featureBufferLayout",[]),Object(Ge["a"])(this,"needRescale",!1),Object(Ge["a"])(this,"needRemapping",!1),Object(Ge["a"])(this,"needRegenerateVertices",!1),Object(Ge["a"])(this,"featureRange",{startIndex:0,endIndex:1/0}),Object(Ge["a"])(this,"vertexAttribute",void 0),Object(Ge["a"])(this,"defaultCallback",(function(e){var t;return 0===e.length?(null===(t=n.scale)||void 0===t?void 0:t.defaultValues)||[]:e.map((function(e,t){var r,i=null===(r=n.scale)||void 0===r?void 0:r.scalers[t].func,o=i(e);return o}))})),this.setProps(t)}return Object(He["a"])(e,[{key:"setProps",value:function(e){Object.assign(this,e)}},{key:"mapping",value:function(e){var t;if(null!==(t=this.scale)&&void 0!==t&&t.callback){var n,r=null===(n=this.scale)||void 0===n?void 0:n.callback.apply(n,Object(D["a"])(e));if(!Object(Ei["isNil"])(r))return[r]}return this.defaultCallback(e)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),e}(),Mv=["modelType"],Pv=["buffer","update","name"],Iv=["buffer","update","name"],Rv=["buffer","update","name"],Lv=(Ud={},Object(Ge["a"])(Ud,ad.FLOAT,4),Object(Ge["a"])(Ud,ad.UNSIGNED_BYTE,1),Object(Ge["a"])(Ud,ad.UNSIGNED_SHORT,2),Ud),Dv=(Vd=Object(pp["injectable"])(),Hd=Object(pp["inject"])(vp.IRendererService),Vd((Wd=function(){function e(){Object(Ve["a"])(this,e),Object(Ge["a"])(this,"attributesAndIndices",void 0),Th(this,"rendererService",qd,this),Object(Ge["a"])(this,"attributes",[]),Object(Ge["a"])(this,"triangulation",void 0),Object(Ge["a"])(this,"featureLayout",{sizePerElement:0,elements:[]})}return Object(He["a"])(e,[{key:"registerStyleAttribute",value:function(e){var t=this.getLayerStyleAttribute(e.name||"");return t?t.setProps(e):(t=new Tv(e),this.attributes.push(t)),t}},{key:"updateScaleAttribute",value:function(e){this.attributes.forEach((function(t){var n,r=t.name,i=null===(n=t.scale)||void 0===n?void 0:n.field;(e[r]||i&&e[i])&&(t.needRescale=!0,t.needRemapping=!0,t.needRegenerateVertices=!0)}))}},{key:"updateStyleAttribute",value:function(e,t,n){var r=this.getLayerStyleAttribute(e);r||(r=this.registerStyleAttribute(Object(N["a"])(Object(N["a"])({},t),{},{name:e})));var i=t.scale;i&&r&&(r.scale=i,r.needRescale=!0,r.needRemapping=!0,r.needRegenerateVertices=!0,n&&n.featureRange&&(r.featureRange=n.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(e){return this.attributes.find((function(t){return t.name===e}))}},{key:"getLayerAttributeScale",value:function(e){var t,n=this.getLayerStyleAttribute(e),r=null===n||void 0===n||null===(t=n.scale)||void 0===t?void 0:t.scalers;return r&&r[0]?r[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=this.attributes.find((function(t){return t.name===e}));if(o&&o.descriptor){var a=o.descriptor,s=a.update,u=a.buffer,c=a.size,l=void 0===c?0:c,f=Lv[u.type||ad.FLOAT];if(s){var p=this.featureLayout,h=p.elements,d=p.sizePerElement,v=h.slice(n,r);if(!v.length)return;var m=v[0].offset,g=m*l*f,y=v.map((function(e,n){for(var r=e.featureIdx,i=e.vertices,o=e.normals,a=i.length/d,u=[],c=0;c<a;c++){var l=o?o.slice(3*c,3*c+3):[];u.push.apply(u,Object(D["a"])(s(t[r],r,i.slice(c*d,c*d+d),n,l)))}return u})).reduce((function(e,t){return e.push.apply(e,Object(D["a"])(t)),e}),[]);o.vertexAttribute.updateBuffer({data:y,offset:g}),null===i||void 0===i||i.emit("legend:".concat(e),{type:e,attr:o})}}}},{key:"createAttributesAndIndicesAscy",value:function(e,t,n){var r=this;this.featureLayout={sizePerElement:0,elements:[]};var i=this.attributes.map((function(e){return e.resetDescriptor(),e.descriptor})).filter((function(e){return e})),o=n.modelType,a=Object(Cv["a"])(n,Mv),s=this.rendererService,u=s.createAttribute,c=s.createBuffer,l=s.createElements,f={};return new Promise((function(n,s){Ff(o,Object(N["a"])({descriptors:r.getDescriptorsWithOutFunc(i),features:e,segmentNumber:t},a)).then((function(e){e.descriptors.forEach((function(e,t){if(e){var n=e.buffer,i=(e.update,e.name,Object(Cv["a"])(e,Pv)),o=u(Object(N["a"])({buffer:c(n)},i));f[e.name||""]=o,r.attributes[t].vertexAttribute=o}})),r.featureLayout=e.featureLayout;var t=l({data:e.indices,type:ad.UNSIGNED_INT,count:e.indices.length});r.attributesAndIndices={attributes:f,elements:t,count:null},n(r.attributesAndIndices)}))["catch"]((function(e){console.warn(e),s(e)}))}))}},{key:"createAttributesAndIndices",value:function(e,t,n){var r=this;this.featureLayout={sizePerElement:0,elements:[]},t&&(this.triangulation=t);var i=this.attributes.map((function(e){return e.resetDescriptor(),e.descriptor})),o=0,a=0,s=[],u=3;e.forEach((function(e,t){var c=r.triangulation(e,n),l=c.indices,f=c.vertices,p=c.normals,h=c.size,d=c.indexes,v=c.count;"number"===typeof v&&(a+=v),l.forEach((function(e){s.push(e+o)})),u=h;var m=f.length/h;r.featureLayout.sizePerElement=u,r.featureLayout.elements.push({featureIdx:t,vertices:f,normals:p,offset:o}),o+=m;for(var g=function(n){var r=(null===p||void 0===p?void 0:p.slice(3*n,3*n+3))||[],o=f.slice(n*h,n*h+h),a=0;d&&void 0!==d[n]&&(a=d[n]),i.forEach((function(i,s){var u;i&&i.update&&(u=i.buffer.data).push.apply(u,Object(D["a"])(i.update(e,t,o,n,r,a)))}))},y=0;y<m;y++)g(y)}));var c=this.rendererService,l=c.createAttribute,f=c.createBuffer,p=c.createElements,h={};i.forEach((function(e,t){if(e){var n=e.buffer,i=(e.update,e.name,Object(Cv["a"])(e,Iv)),o=l(Object(N["a"])({buffer:f(n)},i));h[e.name||""]=o,r.attributes[t].vertexAttribute=o}}));var d=p({data:s,type:ad.UNSIGNED_INT,count:s.length});return this.attributesAndIndices={attributes:h,elements:d,count:a},this.attributesAndIndices}},{key:"createAttributes",value:function(e,t){var n=this;this.featureLayout={sizePerElement:0,elements:[]},t&&(this.triangulation=t);var r=this.attributes.map((function(e){return e.resetDescriptor(),e.descriptor})),i=0,o=[],a=3;e.forEach((function(e,t){var s=n.triangulation(e),u=s.indices,c=s.vertices,l=s.normals,f=s.size,p=s.indexes;u.forEach((function(e){o.push(e+i)})),a=f;var h=c.length/f;n.featureLayout.sizePerElement=a,n.featureLayout.elements.push({featureIdx:t,vertices:c,normals:l,offset:i}),i+=h;for(var d=function(n){var i=(null===l||void 0===l?void 0:l.slice(3*n,3*n+3))||[],o=c.slice(n*f,n*f+f),a=0;p&&void 0!==p[n]&&(a=p[n]),r.forEach((function(r,s){var u;r&&r.update&&(u=r.buffer.data).push.apply(u,Object(D["a"])(r.update(e,t,o,n,i,a)))}))},v=0;v<h;v++)d(v)}));var s=this.rendererService,u=s.createAttribute,c=s.createBuffer,l={};return r.forEach((function(e,t){if(e){var r=e.buffer,i=(e.update,e.name,Object(Cv["a"])(e,Rv)),o=u(Object(N["a"])({buffer:c(r)},i));l[e.name||""]=o,n.attributes[t].vertexAttribute=o}})),{attributes:l}}},{key:"clearAllAttributes",value:function(){var e;this.attributes.forEach((function(e){e.vertexAttribute&&e.vertexAttribute.destroy()})),null===(e=this.attributesAndIndices)||void 0===e||e.elements.destroy(),this.attributes=[]}},{key:"getDescriptorsWithOutFunc",value:function(e){return e.map((function(e){return{buffer:e.buffer,name:e.name,size:e.size}}))}}]),e}(),qd=Mh(Wd.prototype,"rendererService",[Hd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gd=Wd))||Gd),Nv=n("xp6e"),Fv=n("iegG"),zv=n.n(Fv);function Bv(e){var t=Uv();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Uv(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Vv=(Zd=Object(pp["injectable"])(),Yd=Object(pp["inject"])(vp.SceneID),Xd=Object(pp["inject"])(vp.IIconService),Kd=Object(pp["inject"])(vp.IFontService),$d=Object(pp["inject"])(vp.IControlService),Qd=Object(pp["inject"])(vp.IGlobalConfigService),Jd=Object(pp["inject"])(vp.IMapService),ev=Object(pp["inject"])(vp.ICoordinateSystemService),tv=Object(pp["inject"])(vp.IRendererService),nv=Object(pp["inject"])(vp.ILayerService),rv=Object(pp["inject"])(vp.IDebugService),iv=Object(pp["inject"])(vp.ICameraService),ov=Object(pp["inject"])(vp.IInteractionService),av=Object(pp["inject"])(vp.IPickingService),sv=Object(pp["inject"])(vp.IShaderModuleService),uv=Object(pp["inject"])(vp.IMarkerService),cv=Object(pp["inject"])(vp.IPopupService),Zd((fv=function(e){Object(et["a"])(n,e);var t=Bv(n);function n(){var e;return Object(Ve["a"])(this,n),e=t.call(this),Object(Ge["a"])(Object(gt["a"])(e),"destroyed",!1),Object(Ge["a"])(Object(gt["a"])(e),"loaded",!1),Th(Object(gt["a"])(e),"id",pv,Object(gt["a"])(e)),Th(Object(gt["a"])(e),"iconService",hv,Object(gt["a"])(e)),Th(Object(gt["a"])(e),"fontService",dv,Object(gt["a"])(e)),Th(Object(gt["a"])(e),"controlService",vv,Object(gt["a"])(e)),Th(Object(gt["a"])(e),"configService",mv,Object(gt["a"])(e)),Th(Object(gt["a"])(e),"map",gv,Object(gt["a"])(e)),Th(Object(gt["a"])(e),"coordinateSystemService",yv,Object(gt["a"])(e)),Th(Object(gt["a"])(e),"rendererService",bv,Object(gt["a"])(e)),Th(Object(gt["a"])(e),"layerService",_v,Object(gt["a"])(e)),Th(Object(gt["a"])(e),"debugService",xv,Object(gt["a"])(e)),Th(Object(gt["a"])(e),"cameraService",wv,Object(gt["a"])(e)),Th(Object(gt["a"])(e),"interactionService",Ov,Object(gt["a"])(e)),Th(Object(gt["a"])(e),"pickingService",Ev,Object(gt["a"])(e)),Th(Object(gt["a"])(e),"shaderModuleService",Sv,Object(gt["a"])(e)),Th(Object(gt["a"])(e),"markerService",jv,Object(gt["a"])(e)),Th(Object(gt["a"])(e),"popupService",Av,Object(gt["a"])(e)),Object(Ge["a"])(Object(gt["a"])(e),"inited",!1),Object(Ge["a"])(Object(gt["a"])(e),"initPromise",void 0),Object(Ge["a"])(Object(gt["a"])(e),"rendering",!1),Object(Ge["a"])(Object(gt["a"])(e),"$container",void 0),Object(Ge["a"])(Object(gt["a"])(e),"canvas",void 0),Object(Ge["a"])(Object(gt["a"])(e),"markerContainer",void 0),Object(Ge["a"])(Object(gt["a"])(e),"hooks",void 0),Object(Ge["a"])(Object(gt["a"])(e),"handleWindowResized",(function(){e.emit("resize"),e.$container&&(e.initContainer(),r.triggerResize(),e.coordinateSystemService.needRefresh=!0,e.render())})),Object(Ge["a"])(Object(gt["a"])(e),"handleMapCameraChanged",(function(t){e.cameraService.update(t),e.render()})),e.hooks={init:new Nv["b"]},e}return Object(He["a"])(n,[{key:"init",value:function(e){var t=this;this.configService.setSceneConfig(this.id,e),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",(function(){return t.render()})),this.fontService.init(),this.hooks.init.tapPromise("initMap",Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.debugService.log("map.mapInitStart",{type:t.map.version}),e.next=3,new Promise((function(e){t.map.onCameraChanged((function(n){t.cameraService.init(),t.cameraService.update(n),e()})),t.map.init()}));case 3:t.map.onCameraChanged(t.handleMapCameraChanged),t.map.addMarkerContainer(),t.markerService.addMarkers(),t.markerService.addMarkerLayers(),t.popupService.initPopup(),t.interactionService.init(),t.interactionService.on(Xh.Drag,t.addSceneEvent.bind(t));case 10:case"end":return e.stop()}}),e)})))),this.hooks.init.tapPromise("initRenderer",Object(ae["a"])(ue.a.mark((function n(){var i,o;return ue.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=t.map.getOverlayContainer(),t.$container=i||Od(t.configService.getSceneConfig(t.id).id||""),!t.$container){n.next=13;break}return t.canvas=r.create("canvas","",t.$container),t.setCanvas(),n.next=7,t.rendererService.init(t.canvas,t.configService.getSceneConfig(t.id),e.gl);case 7:t.registerContextLost(),t.initContainer(),zv()(t.$container,t.handleWindowResized),dr.matchMedia&&(null===(o=dr.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))||void 0===o||o.addListener(t.handleWindowResized)),n.next=14;break;case 13:console.error("\u5bb9\u5668 id \u4e0d\u5b58\u5728");case 14:t.pickingService.init(t.id);case 15:case"end":return n.stop()}}),n)})))),this.render()}},{key:"registerContextLost",value:function(){var e=this,t=this.rendererService.getCanvas();t&&t.addEventListener("webglcontextlost",(function(){return e.emit("webglcontextlost")}))}},{key:"initMiniScene",value:function(e){var t=this;this.configService.setSceneConfig(this.id,e),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",(function(){return t.render()})),this.fontService.init(),this.hooks.init.tapPromise("initMap",Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){t.map.onCameraChanged((function(n){t.cameraService.init(),t.cameraService.update(n),"GAODE2.x"!==t.map.version&&e()})),t.map.initMiniMap()}));case 2:t.map.onCameraChanged(t.handleMapCameraChanged),t.interactionService.init(),t.interactionService.on(Xh.Drag,t.addSceneEvent.bind(t));case 5:case"end":return e.stop()}}),e)})))),this.hooks.init.tapPromise("initRenderer",Object(ae["a"])(ue.a.mark((function n(){var r;return ue.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.canvas,t.$container=r||null,!t.$container){n.next=7;break}return n.next=5,t.rendererService.init(e.canvas,t.configService.getSceneConfig(t.id),void 0);case 5:n.next=8;break;case 7:console.error("\u5bb9\u5668 id \u4e0d\u5b58\u5728");case 8:t.pickingService.init(t.id);case 9:case"end":return n.stop()}}),n)})))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"addLayer",value:function(e){this.layerService.sceneService=this,this.layerService.add(e)}},{key:"addMask",value:function(e){this.layerService.sceneService=this,this.layerService.addMask(e)}},{key:"render",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.rendering&&!this.destroyed){e.next=2;break}return e.abrupt("return");case 2:if(this.rendering=!0,this.inited){e.next=16;break}return e.next=6,this.hooks.init.promise();case 6:return this.destroyed&&this.destroy(),e.next=9,this.layerService.initLayers();case 9:this.layerService.renderLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0,e.next=20;break;case 16:return e.next=18,this.layerService.initLayers();case 18:return e.next=20,this.layerService.renderLayers();case 20:this.rendering=!1;case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"addFontFace",value:function(e,t){this.fontService.addFontFace(e,t)}},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t){var n,r,i;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=null===(n=this.$container)||void 0===n?void 0:n.getElementsByTagName("canvas")[0],e.next=3,this.render();case 3:return i="jpg"===t?null===r||void 0===r?void 0:r.toDataURL("image/jpeg"):null===r||void 0===r?void 0:r.toDataURL("image/png"),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"getPointSizeRange",value:function(){return this.rendererService.getPointSizeRange()}},{key:"addMarkerContainer",value:function(){var e=this.$container.parentElement;null!==e&&(this.markerContainer=r.create("div","l7-marker-container",e))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){var e,t,n=this;if(this.inited){var r;if(Object(Fv["unbind"])(this.$container,this.handleWindowResized),dr.matchMedia)null===(r=dr.matchMedia("screen and (min-resolution: 2dppx)"))||void 0===r||r.removeListener(this.handleWindowResized);this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout((function(){var e;null===(e=n.$container)||void 0===e||e.removeChild(n.canvas),n.canvas=null,n.rendererService.destroy()})),null===(e=this.$container)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(this.$container),this.emit("destroy")}else this.destroyed=!0}},{key:"initContainer",value:function(){var e,t,n=r.DPR,i=(null===(e=this.$container)||void 0===e?void 0:e.clientWidth)||400,o=(null===(t=this.$container)||void 0===t?void 0:t.clientHeight)||300,a=this.canvas;a&&(a.width=i*n,a.height=o*n),this.rendererService.viewport({x:0,y:0,width:n*i,height:n*o})}},{key:"setCanvas",value:function(){var e,t,n=r.DPR,i=(null===(e=this.$container)||void 0===e?void 0:e.clientWidth)||400,o=(null===(t=this.$container)||void 0===t?void 0:t.clientHeight)||300,a=this.canvas;a.width=i*n,a.height=o*n,a.style.width="100%",a.style.height="100%"}},{key:"addSceneEvent",value:function(e){this.emit(e.type,e)}}]),n}(Fo["EventEmitter"]),pv=Mh(fv.prototype,"id",[Yd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hv=Mh(fv.prototype,"iconService",[Xd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dv=Mh(fv.prototype,"fontService",[Kd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vv=Mh(fv.prototype,"controlService",[$d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mv=Mh(fv.prototype,"configService",[Qd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gv=Mh(fv.prototype,"map",[Jd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yv=Mh(fv.prototype,"coordinateSystemService",[ev],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bv=Mh(fv.prototype,"rendererService",[tv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_v=Mh(fv.prototype,"layerService",[nv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xv=Mh(fv.prototype,"debugService",[rv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wv=Mh(fv.prototype,"cameraService",[iv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ov=Mh(fv.prototype,"interactionService",[ov],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ev=Mh(fv.prototype,"pickingService",[av],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sv=Mh(fv.prototype,"shaderModuleService",[sv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jv=Mh(fv.prototype,"markerService",[uv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Av=Mh(fv.prototype,"popupService",[cv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lv=fv))||lv);function Hv(e){var t=0;switch(e){case"vec2":case"ivec2":t=2;break;case"vec3":case"ivec3":t=3;break;case"vec4":case"ivec4":case"mat2":t=4;break;case"mat3":t=9;break;case"mat4":t=16;break;default:}return t}var Gv,Wv,qv=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Zv(e){var t={};return e=e.replace(qv,(function(e,n,r){var i=r.split(":"),o=i[0].trim(),a="";switch(i.length>1&&(a=i[1].trim()),n){case"bool":a="true"===a;break;case"float":case"int":a=Number(a);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":a=a?a.replace("[","").replace("]","").split(",").reduce((function(e,t){return e.push(Number(t.trim())),e}),[]):new Array(Hv(n)).fill(0);break;default:}return t[o]=a,"uniform ".concat(n," ").concat(o,";\n")})),{content:e,uniforms:t}}var Yv,Xv,Kv,$v="#define PI 3.14159265359",Qv="#define SHIFT_RIGHT17 1.0 / 131072.0\n#define SHIFT_RIGHT18 1.0 / 262144.0\n#define SHIFT_RIGHT19 1.0 / 524288.0\n#define SHIFT_RIGHT20 1.0 / 1048576.0\n#define SHIFT_RIGHT21 1.0 / 2097152.0\n#define SHIFT_RIGHT22 1.0 / 4194304.0\n#define SHIFT_RIGHT23 1.0 / 8388608.0\n#define SHIFT_RIGHT24 1.0 / 16777216.0\n\n#define SHIFT_LEFT17 131072.0\n#define SHIFT_LEFT18 262144.0\n#define SHIFT_LEFT19 524288.0\n#define SHIFT_LEFT20 1048576.0\n#define SHIFT_LEFT21 2097152.0\n#define SHIFT_LEFT22 4194304.0\n#define SHIFT_LEFT23 8388608.0\n#define SHIFT_LEFT24 16777216.0\n\nvec2 unpack_float(float packedValue) {\n  int packedIntValue = int(packedValue);\n  int v0 = packedIntValue / 256;\n  return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec4 decode_color(vec2 encodedColor) {\n  return vec4(\n    unpack_float(encodedColor[0]) / 255.0,\n    unpack_float(encodedColor[1]) / 255.0\n  );\n}\n",Jv="#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\n\nfloat calc_lighting(vec4 pos) {\n\n    vec3 worldPos = vec3(pos * u_ModelMatrix);\n\n    vec3 worldNormal = a_Normal;\n      // //cal light weight\n    vec3 viewDir = normalize(u_CameraPosition - worldPos);\n\n    vec3 lightDir = normalize(vec3(1, -10.5, 12));\n\n    vec3 halfDir = normalize(viewDir+lightDir);\n      // //lambert\n    float lambert = dot(worldNormal, lightDir);\n        //specular\n    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);\n        //sum to light weight\n    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;\n\n    return lightWeight;\n}\n",em="// Blinn-Phong model\n// apply lighting in vertex shader instead of fragment shader\n// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting\nuniform float u_Ambient : 1.0;\nuniform float u_Diffuse : 1.0;\nuniform float u_Specular : 1.0;\nuniform int u_NumOfDirectionalLights : 1;\nuniform int u_NumOfSpotLights : 0;\n\n#define SHININESS 32.0\n#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3\n#define MAX_NUM_OF_SPOT_LIGHTS 3\n\nstruct DirectionalLight {\n  vec3 direction;\n  vec3 ambient;\n  vec3 diffuse;\n  vec3 specular;\n};\n\nstruct SpotLight {\n  vec3 position;\n  vec3 direction;\n  vec3 ambient;\n  vec3 diffuse;\n  vec3 specular;\n  float constant;\n  float linear;\n  float quadratic;\n  float angle;\n  float blur;\n  float exponent;\n};\n\nuniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];\nuniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];\n\nvec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {\n  vec3 lightDir = normalize(light.direction);\n  // diffuse shading\n  float diff = max(dot(normal, lightDir), 0.0);\n  // Blinn-Phong specular shading\n  vec3 halfwayDir = normalize(lightDir + viewDir);\n  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);\n\n  vec3 ambient = light.ambient * u_Ambient;\n  vec3 diffuse = light.diffuse * diff * u_Diffuse;\n  vec3 specular = light.specular * spec * u_Specular;\n\n  return ambient + diffuse + specular;\n}\n\n// vec3 calc_spot_light(SpotLight light, vec3 normal, vec3 fragPos, vec3 viewDir) {\n//   vec3 lightDir = normalize(light.position - fragPos);\n//   // diffuse shading\n//   float diff = max(dot(normal, lightDir), 0.0);\n//   // specular shading\n//   vec3 reflectDir = reflect(-lightDir, normal);\n//   float spec = pow(max(dot(viewDir, reflectDir), 0.0), SHININESS);\n//   // attenuation\n//   float distance = length(light.position - fragPos);\n//   float attenuation = 1.0 / (light.constant + light.linear * distance +\n//           light.quadratic * (distance * distance));\n\n//   vec3 ambient = light.ambient * u_Ambient;\n//   vec3 diffuse = light.diffuse * diff * u_Diffuse;\n//   vec3 specular = light.specular * spec * u_Specular;\n\n//   float spotEffect = dot(normalize(light.direction), -lightDir);\n//   float spotCosCutoff = cos(light.angle / 180.0 * PI);\n//   float spotCosOuterCutoff = cos((light.angle + light.blur) / 180.0 * PI);\n//   float spotCosInnerCutoff = cos((light.angle - light.blur) / 180.0 * PI);\n//   if (spotEffect > spotCosCutoff) {\n//     spotEffect = pow(smoothstep(spotCosOuterCutoff, spotCosInnerCutoff, spotEffect), light.exponent);\n//   } else {\n//     spotEffect = 0.0;\n//   }\n\n//   return ambient + attenuation * (spotEffect * diffuse + specular);\n// }\n\nvec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {\n  vec3 weight = vec3(0.0);\n  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {\n    if (i >= u_NumOfDirectionalLights) {\n      break;\n    }\n    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);\n  }\n  // for (int i = 0; i < MAX_NUM_OF_SPOT_LIGHTS; i++) {\n  //   if (i >= u_NumOfSpotLights) {\n  //     break;\n  //   }\n  //   weight += calc_spot_light(u_SpotLights[i], normal, position, viewDir);\n  // }\n  return weight;\n}\n",tm="varying vec4 v_PickingResult;\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform vec4 u_SelectColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\nuniform float u_shaderPick;\n\nuniform float u_activeMix: 0;\n\n#define PICKING_NONE 0.0\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\n#define HIGHLIGHT 1.0\n#define SELECT 2.0\n\n/*\n * Returns highlight color if this item is selected.\n */\nvec4 filterHighlightColor(vec4 color, float weight) {\n  // float selected = v_PickingResult.a;\n  bool selected = bool(v_PickingResult.a);\n\n  // if (selected == SELECT) {\n  if (selected) {\n  //   // \u70b9\u51fb\u9009\u4e2d\u72b6\u6001\n  //   vec4 selectColor = u_SelectColor * COLOR_SCALE;\n  //   return selectColor;\n  // } else if (selected == HIGHLIGHT) {\n  //   // hover \u9ad8\u4eae\u72b6\u6001\n    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;\n\n    float highLightAlpha = highLightColor.a;\n    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));\n\n    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);\n  } else {\n    return color;\n  }\n}\n\n/*\n * Returns picking color if picking enabled else unmodified argument.\n */\nvec4 filterPickingColor(vec4 color) {\n  vec3 pickingColor = v_PickingResult.rgb;\n  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;\n}\n\n/*\n * Returns picking color if picking is enabled if not\n * highlight color if this item is selected, otherwise unmodified argument.\n */\nvec4 filterColor(vec4 color) {\n  // \u8fc7\u6ee4\u591a\u4f59\u7684 shader \u8ba1\u7b97\n  // return color;\n  if(u_shaderPick < 0.5) {\n    return color; // \u6682\u65f6\u53bb\u9664 \u76f4\u63a5\u53d6\u6d88\u8ba1\u7b97\u5728\u9009\u4e2d\u65f6\u62d6\u62fd\u5730\u56fe\u4f1a\u6709\u95ee\u9898\n  } else {\n    return filterPickingColor(filterHighlightColor(color, 1.0));\n  }\n  \n}\n\nvec4 filterColorAlpha(vec4 color, float alpha) {\n  // \u8fc7\u6ee4\u591a\u4f59\u7684 shader \u8ba1\u7b97\n  // return color;\n  if(u_shaderPick < 0.5) {\n    return color; // \u6682\u65f6\u53bb\u9664 \u76f4\u63a5\u53d6\u6d88\u8ba1\u7b97\u5728\u9009\u4e2d\u65f6\u62d6\u62fd\u5730\u56fe\u4f1a\u6709\u95ee\u9898\n  } else {\n    return filterPickingColor(filterHighlightColor(color, alpha));\n  }\n}\n\n",nm="attribute vec3 a_PickingColor;\nvarying vec4 v_PickingResult;\n\nuniform vec3 u_PickingColor : [0, 0, 0];\nuniform vec3 u_CurrentSelectedId : [0, 0, 0];\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform vec4 u_SelectColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\nuniform float u_PickingThreshold : 1.0;\nuniform float u_PickingBuffer: 0.0;\nuniform float u_shaderPick;\nuniform float u_EnableSelect: 0.0;\n\n#define PICKING_NONE 0.0\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\n#define NORMAL 0.0\n#define HIGHLIGHT 1.0\n#define SELECT 2.0\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&\n    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&\n    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;\n}\n\n// \u5224\u65ad\u5f53\u524d\u70b9\u662f\u5426\u5df2\u7ecf\u88ab select \u9009\u4e2d\nbool isVertexSelected(vec3 vertexColor) {\n  return\n    abs(vertexColor.r - u_CurrentSelectedId.r) < u_PickingThreshold &&\n    abs(vertexColor.g - u_CurrentSelectedId.g) < u_PickingThreshold &&\n    abs(vertexColor.b - u_CurrentSelectedId.b) < u_PickingThreshold;\n}\n\nvoid setPickingColor(vec3 pickingColor) {\n  if(u_shaderPick < 0.5) {\n    return;\n  }\n  // compares only in highlight stage\n\n  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));\n\n  // if (u_EnableSelect == 1.0 && u_PickingStage == PICKING_HIGHLIGHT && isVertexSelected(pickingColor)) {\n  //   // \u9009\u4e2d\u6001\n  //   v_PickingResult.a = SELECT;\n  // } else if (u_PickingStage == PICKING_HIGHLIGHT && isVertexPicked(pickingColor)) {\n  //   // \u9ad8\u4eae\u6001\n  //   v_PickingResult.a = HIGHLIGHT;\n  // } else {\n  //   v_PickingResult.a = NORMAL;\n  // }\n\n  // Stores the picking color so that the fragment shader can render it during picking\n  v_PickingResult.rgb = pickingColor * COLOR_SCALE;\n}\n\nfloat setPickingSize(float x) {\n   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;\n}\n\nfloat setPickingOrder(float z) {\n   bool selected = bool(v_PickingResult.a);\n   return selected ? z + 1. : 0.;\n}\n",rm="\n#define E 2.718281828459045\nvec2 ProjectFlat(vec2 lnglat){\n  float maxs=85.0511287798;\n  float lat=max(min(maxs,lnglat.y),-maxs);\n  float scale= 268435456.;\n  float d=PI/180.;\n  float x=lnglat.x*d;\n  float y=lat*d;\n  y=log(tan((PI/4.)+(y/2.)));\n\n  float a=.5/PI,\n  b=.5,\n  c=-.5/PI;\n  d=.5;\n  x=scale*(a*x+b);\n  y=scale*(c*y+d);\n  return vec2(x,y);\n}\n\nvec2 unProjectFlat(vec2 px){\n  float a=.5/PI;\n  float b=.5;\n  float c=-.5/PI;\n  float d=.5;\n  float scale = 268435456.;\n  float x=(px.x/scale-b)/a;\n  float y=(px.y/scale-d)/c;\n  y=(atan(pow(E,y))-(PI/4.))*2.;\n  d=PI/180.;\n  float lat=y/d;\n  float lng=x/d;\n  return vec2(lng,lat);\n}\n\nfloat pixelDistance(vec2 from, vec2 to) {\n vec2 a1 = ProjectFlat(from);\n vec2 b1 = ProjectFlat(to);\n return distance(a1, b1);\n}\n\n// gaode2.0\nvec2 customProject(vec2 lnglat) { // \u7ecf\u7eac\u5ea6 => \u5e73\u9762\u5750\u6807\n  float t = lnglat.x;\n  float e = lnglat.y;\n  float Sm = 180.0 / PI;\n  float Tm = 6378137.0;\n  float Rm = PI / 180.0;\n  float r = 85.0511287798;\n  e = max(min(r, e), -r);\n  t *= Rm;\n  e *= Rm;\n  e = log(tan(PI / 4.0 + e / 2.0));\n  return vec2(t * Tm, e * Tm);\n}\n\nvec2 unProjCustomCoord(vec2 point) { // \u5e73\u9762\u5750\u6807 => \u7ecf\u7eac\u5ea6\n  float Sm = 57.29577951308232; //180 / Math.PI\n  float Tm = 6378137.0;\n  float t = point.x;\n  float e = point.y;\n  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);\n}\n\n\nfloat customPixelDistance(vec2 from, vec2 to) {\n vec2 a1 = ProjectFlat(from);\n vec2 b1 = ProjectFlat(to);\n return distance(a1, b1);\n}",im="#define TILE_SIZE 512.0\n#define PI 3.1415926536\n#define WORLD_SCALE TILE_SIZE / (PI * 2.0)\n\n#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox\n#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset\n#define COORDINATE_SYSTEM_VECTOR_TILE 3.0\n#define COORDINATE_SYSTEM_IDENTITY 4.0\n#define COORDINATE_SYSTEM_P20 5.0           // amap\n#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset\n#define COORDINATE_SYSTEM_METER_OFFSET 7.0\n\n#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0\n\nuniform mat4 u_ViewMatrix;\nuniform mat4 u_ProjectionMatrix;\nuniform mat4 u_ViewProjectionMatrix;\nuniform float u_Zoom : 1;\nuniform float u_ZoomScale : 1;\n\nuniform float u_CoordinateSystem;\nuniform vec2 u_ViewportCenter;\nuniform vec4 u_ViewportCenterProjection;\nuniform vec3 u_PixelsPerDegree;\nuniform vec3 u_PixelsPerDegree2;\nuniform vec3 u_PixelsPerMeter;\n\nuniform vec2 u_ViewportSize;\nuniform float u_DevicePixelRatio;\nuniform float u_FocalDistance;\nuniform vec3 u_CameraPosition;\n\n// uniform mat4 u_Mvp;\n\n// web mercator coords -> world coords\nvec2 project_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  return vec2(\n    radians(x) + PI,\n    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\n\nfloat project_scale(float meters) {\n  return meters * u_PixelsPerMeter.z;\n}\n\n\n// offset coords -> world coords\nvec4 project_offset(vec4 offset) {\n  float dy = offset.y;\n  dy = clamp(dy, -1., 1.);\n  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;\n  return vec4(offset.xyz * pixels_per_unit, offset.w);\n}\n\nvec3 project_normal(vec3 normal) {\n  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);\n  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);\n}\n\nvec3 project_offset_normal(vec3 vector) {\n  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01\n    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // normals generated by the polygon tesselator are in lnglat offsets instead of meters\n    return normalize(vector * u_PixelsPerDegree);\n  }\n  return project_normal(vector);\n}\n// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01\n// reverse Y\nvec3 reverse_offset_normal(vec3 vector) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {\n    return vector * vec3(1.0, -1.0, 1.0);\n  }\n\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0\n    return vector;\n  }\n  return vector;\n}\n\nvec4 project_mvt_offset_position(vec4 position) {\n  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;\n  float b = COORDINATE_SYSTEM_P20_OFFSET;\n  float c = COORDINATE_SYSTEM_LNGLAT;\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    return project_offset(vec4(0.0, 0.0, position.z, position.w));\n  }\n  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {\n    return vec4(\n      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,\n      project_scale(position.z),\n      position.w\n    );\n  }\n  return position;\n}\n\nvec4 project_position(vec4 position) {\n  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;\n  float b = COORDINATE_SYSTEM_P20_OFFSET;\n  float c = COORDINATE_SYSTEM_LNGLAT;\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET\n    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    float X = position.x - u_ViewportCenter.x;\n    float Y = position.y - u_ViewportCenter.y;\n    return project_offset(vec4(X, Y, position.z, position.w));\n  }\n  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {\n    return vec4(\n      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,\n      project_scale(position.z),\n      position.w\n    );\n  }\n\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {\n    return vec4(\n      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),\n      project_scale(position.z),\n      position.w\n    );\n  }\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // return vec4(\n    //   (position.xy * WORLD_SCALE * u_ZoomScale) * vec2(1., -1.), \n    //   project_scale(position.z), \n    //   position.w);\n\n     return vec4(\n      position.xy, \n      project_scale(position.z), \n      position.w);\n  }\n  return position;\n\n  // TODO: \u74e6\u7247\u5750\u6807\u7cfb & \u5e38\u89c4\u4e16\u754c\u5750\u6807\u7cfb\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;\n  return offset * u_FocalDistance;\n}\n\nfloat project_pixel_allmap(float pixel) {\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    return pixel * pow(2.0, u_Zoom);\n  }\n  return pixel * u_FocalDistance ;\n}\n\n// \u9002\u914d\u7eb9\u7406\u8d34\u56fe\u7684\u7b49\u50cf\u7d20\u5927\u5c0f\nfloat project_pixel_texture(float pixel) {\n  // mapbox zoom > 12\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    return pixel * pow(0.5, u_Zoom) * u_FocalDistance ;\n  }\n\n  // amap2 zoom > 12\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;\n  }\n\n  // amap zoom > 12\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    return pixel * pow(0.5, u_Zoom)* u_FocalDistance ;\n  }\n  \n  // amap zoom < 12\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {\n    return pixel * pow(2.0, (20.0 - u_Zoom))* u_FocalDistance ;\n  }\n  return pixel * 2.0 *  u_FocalDistance;;\n}\n\n// \u5728\u4e0d\u8bba\u4ec0\u4e48\u5e95\u56fe\u4e0b\u9700\u8981\u7edf\u4e00\u5904\u7406\u7684\u65f6\u5019\u4f7f\u7528\nfloat project_float_pixel(float pixel) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // mapbox P20 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf1\n    return pixel * pow(2.0, (19.0 - u_Zoom))  * u_FocalDistance ;\n  }\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    // amap P20 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf1\n    return pixel * pow(2.0, (19.0 - u_Zoom));\n  }\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // amap2 P20_2 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf3\n    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;\n  }\n  return pixel * u_FocalDistance;\n}\n\nfloat project_pixel(float pixel) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    // amap P20 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf1\n    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;\n  }\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // amap2 P20_2 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf3\n    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;\n  }\n  return pixel * u_FocalDistance;\n}\nvec2 project_pixel(vec2 pixel) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    // P20 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf1\n    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;\n  }\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // P20_2 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf3\n    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;\n  }\n  return pixel * -1. * u_FocalDistance;\n}\nvec3 project_pixel(vec3 pixel) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    // P20 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf1\n    return pixel * pow(2.0, (19.0 - u_Zoom)) *  u_FocalDistance ;\n  }\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // P20_2 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf3\n    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))  * u_FocalDistance ;\n  }\n  return pixel * -1. * u_FocalDistance;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // Needs to be divided with project_uCommonUnitsPerMeter\n    position.w *= u_PixelsPerMeter.z;\n  }\n\n  return viewProjectionMatrix * position + center;\n}\n\n// Projects from common space coordinates to clip space\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(\n    position,\n    u_ViewProjectionMatrix,\n    u_ViewportCenterProjection\n  );\n}\n\nvec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {\n  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);\n\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // Needs to be divided with project_uCommonUnitsPerMeter\n     pos.w = pos.w / u_PixelsPerMeter.z;\n  }\n  return pos;\n}\n\n\nbool isEqual( float a,  float b) {\n    return  a< b + 0.001 && a > b - 0.001;\n}",om="/**\n * 2D signed distance field functions\n * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n */\n\nfloat ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(vec2 p) {\n  float k = sqrt(3.0);\n  p.x = abs(p.x) - 1.0;\n  p.y = p.y + 1.0/k;\n  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\n  p.x -= clamp( p.x, -2.0, 0.0 );\n  return -length(p)*sign(p.y);\n}\n\nfloat sdBox(vec2 p, vec2 b) {\n  vec2 d = abs(p)-b;\n  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);\n}\n\nfloat sdPentagon(vec2 p, float r) {\n  vec3 k = vec3(0.809016994,0.587785252,0.726542528);\n  p.x = abs(p.x);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagon(vec2 p, float r) {\n  vec3 k = vec3(-0.866025404,0.5,0.577350269);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdOctogon(vec2 p, float r) {\n  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );\n  p = abs(p);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagram(vec2 p, float r) {\n  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;\n  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdRhombus(vec2 p, vec2 b) {\n  vec2 q = abs(p);\n  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);\n  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );\n  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );\n}\n\nfloat sdVesica(vec2 p, float r, float d) {\n  p = abs(p);\n  float b = sqrt(r*r-d*d); // can delay this sqrt\n  return ((p.y-b)*d>p.x*b)\n          ? length(p-vec2(0.0,b))\n          : length(p-vec2(-d,0.0))-r;\n}\n",am="attribute float a_vertexId;\n\nuniform mat4 u_cellTypeLayout;      // \u63cf\u8ff0\u6570\u636e\u7eb9\u7406 cell \u7ed3\u6784\u7684\u77e9\u9635\nuniform sampler2D u_dataTexture;    // \u6570\u636e\u7eb9\u7406\n\nbool hasOpacity() { // \u5224\u65ad cell \u4e2d\u662f\u5426\u5b58\u5728 opacity \u7684\u6570\u636e\n  return u_cellTypeLayout[1][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;\n}\n\nbool hasStrokeOpacity() { // \u5224\u65ad cell \u4e2d\u662f\u5426\u5b58\u5728 strokeOpacity \u7684\u6570\u636e\n  return u_cellTypeLayout[1][1] > 0.0 && u_cellTypeLayout[3][3] > 0.0;\n}\n\nbool hasStrokeWidth() { // \u5224\u65ad cell \u4e2d\u662f\u5426\u5b58\u5728 strokeWidth \u7684\u6570\u636e\n  return u_cellTypeLayout[1][2] > 0.0 && u_cellTypeLayout[3][3] > 0.0;\n}\n\nbool hasStroke() { // \u5224\u65ad cell \u4e2d\u662f\u5426\u5b58\u5728 stroke \u7684\u6570\u636e\n  return u_cellTypeLayout[1][3] > 0.0 && u_cellTypeLayout[3][3] > 0.0;\n}\n\nbool hasOffsets() { // \u5224\u65ad cell \u4e2d\u662f\u5426\u5b58\u5728 offsets \u7684\u6570\u636e\n  return u_cellTypeLayout[2][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;\n}\n\nbool hasThetaOffset() { // \u5224\u65ad cell \u4e2d\u662f\u5426\u5b58\u5728 thetaOffset \u7684\u6570\u636e\n  return u_cellTypeLayout[2][1] > 0.0 && u_cellTypeLayout[3][3] > 0.0;\n}\n\n// \u6839\u636e\u5750\u6807\u4f4d\u7f6e\u5148\u662f\u8ba1\u7b97 uv \uff0c\u7136\u540e\u6839\u636e uv \u4ece\u6570\u636e\u7eb9\u7406\u4e2d\u53d6\u503c\nfloat pos2value(vec2 pos, float columnWidth, float rowHeight) {\n  float u = (pos.r - 1.0) * columnWidth + columnWidth/2.0;\n  float v = 1.0 - ((pos.g - 1.0) * rowHeight + rowHeight/2.0);\n  return texture2D(u_dataTexture, vec2(u, v)).r;\n}\n\n/*\n  currentRow \u5f53\u524d\u884c\n  currentColumn \u5f53\u524d\u5217\n  columnCount \u6709\u591a\u5c11\u5217\n  nextStep \u9700\u8981\u8ba1\u7b97\u5f53\u524d cell \u540e\u7684\u7b2c\u51e0\u4e2a cell \uff08\u5f53\u524d cell \u5219 nextStep = 0\uff09\n*/\nvec2 nextPos(float currentRow, float currentColumn, float columnCount, float nextStep) {\n  float nextColumn = currentColumn;\n  float nextRow = currentRow;\n  if(currentColumn + nextStep <= columnCount){\n    nextColumn = currentColumn + nextStep;\n  } else {\n    nextColumn = mod(currentColumn + nextStep, columnCount); // \u4e0d\u4f1a\u51fa\u73b0\u8de8\u4e24\u884c\n    nextRow = currentRow + 1.0;\n  }\n  return vec2(nextColumn, nextRow);\n}\n\n// \u8ba1\u7b97\u5f53\u524d\u5355\u4e2a cell \u7684\u5927\u5c0f\nfloat calCellCount() { \n  //   u_cellTypeLayout\n  //   cal_height, WIDTH, 0.0, 0.0, // rowCount columnCount - \u51e0\u884c\u51e0\u5217\n  //   1.0, 1.0, 1.0, 0.0, // opacity strokeOpacity strokeWidth stroke - 1.0 \u8868\u793a\u6709\u6570\u636e\u6620\u5c04\u30010.0 \u8868\u793a\u6ca1\u6709\n  //   1.0, 1.0, 0.0, 0.0, // offsets thetaOffset\n  //   0.0, 0.0, 0.0, 0.0\n  \n  return  u_cellTypeLayout[1][0] +        // opacity\n          u_cellTypeLayout[1][1] +        // strokeOpacity\n          u_cellTypeLayout[1][2] +        // strokeWidth\n          u_cellTypeLayout[1][3] * 4.0 +  // stroke\n          u_cellTypeLayout[2][0] * 2.0 +  // offsets\n          u_cellTypeLayout[2][1];         // thetaOffset\n}",sm="\n// \u8ba1\u7b97 opacity \u548c\u6807\u793a\u5728 cell \u4e2d\u53d6\u503c\u4f4d\u7f6e\u7684\u504f\u79fb\u91cf textureOffset\nvec2 calOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {\n  if(!hasOpacity()) { // \u6570\u636e\u7eb9\u7406\u4e2d\u4e0d\u5b58\u5728 opacity \u7684\u65f6\u5019\u53d6\u9ed8\u8ba4\u503c\uff08\u7528\u6237\u5728 style \u4e2d\u4f20\u5165\u7684\u662f\u5e38\u91cf\uff09\n    return vec2(u_opacity, textureOffset);\n  } else {\n    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    float textureOpacity = pos2value(valuePos, columnWidth, rowHeight);\n    return vec2(textureOpacity, textureOffset + 1.0);\n  }\n}\n",um="\n// \u8ba1\u7b97 strokeOpaicty \u548c\u6807\u793a\u5728 cell \u4e2d\u53d6\u503c\u4f4d\u7f6e\u7684\u504f\u79fb\u91cf textureOffset\nvec2 calStrokeOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {\n  if(!hasStrokeOpacity()) {\n    return vec2(u_stroke_opacity, textureOffset);\n  } else {\n    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    float textureStrokeOpacity = pos2value(valuePos, columnWidth, rowHeight);\n    return vec2(textureStrokeOpacity, textureOffset + 1.0);\n  }\n}\n",cm="\n// \u8ba1\u7b97 strokeWidth \u548c\u6807\u793a\u5728 cell \u4e2d\u53d6\u503c\u4f4d\u7f6e\u7684\u504f\u79fb\u91cf textureOffset\nvec2 calStrokeWidthAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {\n  if(!hasStrokeWidth()) {\n    return vec2(u_stroke_width, textureOffset);\n  } else {\n    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    float textureStrokeWidth = pos2value(valuePos, columnWidth, rowHeight);\n    return vec2(textureStrokeWidth, textureOffset + 1.0);\n  }\n}\n",lm="\n// \u8ba1\u7b97 thetaOffset \u548c\u6807\u793a\u5728 cell \u4e2d\u53d6\u503c\u4f4d\u7f6e\u7684\u504f\u79fb\u91cf textureOffset\nvec2 calThetaOffsetAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {\n  if(!hasThetaOffset()) { // \u6570\u636e\u7eb9\u7406\u4e2d\u4e0d\u5b58\u5728 thetaOffset \u7684\u65f6\u5019\u53d6\u9ed8\u8ba4\u503c\uff08\u7528\u6237\u5728 style \u4e2d\u4f20\u5165\u7684\u662f\u5e38\u91cf\uff09\n    return vec2(u_thetaOffset, textureOffset);\n  } else {\n    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    float textureThetaOffset = pos2value(valuePos, columnWidth, rowHeight);\n    return vec2(textureThetaOffset, textureOffset + 1.0);\n  }\n}\n",fm=/precision\s+(high|low|medium)p\s+float/,pm="#ifdef GL_FRAGMENT_PRECISION_HIGH\n precision highp float;\n #else\n precision mediump float;\n#endif\n",hm=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,dm=(Gv=Object(pp["injectable"])(),Gv(Wv=function(){function e(){Object(Ve["a"])(this,e),Object(Ge["a"])(this,"moduleCache",{}),Object(Ge["a"])(this,"rawContentCache",{})}return Object(He["a"])(e,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:$v,fs:$v}),this.registerModule("decode",{vs:Qv,fs:""}),this.registerModule("projection",{vs:im,fs:""}),this.registerModule("project",{vs:rm,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:om}),this.registerModule("lighting",{vs:em,fs:""}),this.registerModule("light",{vs:Jv,fs:""}),this.registerModule("picking",{vs:nm,fs:tm}),this.registerModule("styleMapping",{vs:am,fs:""}),this.registerModule("styleMappingCalThetaOffset",{vs:lm,fs:""}),this.registerModule("styleMappingCalOpacity",{vs:sm,fs:""}),this.registerModule("styleMappingCalStrokeOpacity",{vs:um,fs:""}),this.registerModule("styleMappingCalStrokeWidth",{vs:cm,fs:""})}},{key:"registerModule",value:function(e,t){if(!this.rawContentCache[e]){var n=t.vs,r=t.fs,i=t.uniforms,o=Zv(n),a=o.content,s=o.uniforms,u=Zv(r),c=u.content,l=u.uniforms;this.rawContentCache[e]={fs:c,uniforms:Object(N["a"])(Object(N["a"])(Object(N["a"])({},s),l),i),vs:a}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(e){var t=this;if(this.moduleCache[e])return this.moduleCache[e];var n=this.rawContentCache[e].vs,r=this.rawContentCache[e].fs,i=this.processModule(n,[],"vs"),o=i.content,a=i.includeList,s=this.processModule(r,[],"fs"),u=s.content,c=s.includeList,l=u,f=Object(Ei["uniq"])(a.concat(c).concat(e)).reduce((function(e,n){return Object(N["a"])(Object(N["a"])({},e),t.rawContentCache[n].uniforms)}),{});return fm.test(u)||(l=pm+u),this.moduleCache[e]={fs:l.trim(),uniforms:f,vs:o.trim()},this.moduleCache[e]}},{key:"processModule",value:function(e,t,n){var r=this,i=e.replace(hm,(function(e,i){var o=i.split(" "),a=o[0].replace(/"/g,"");if(t.indexOf(a)>-1)return"";var s=r.rawContentCache[a][n];t.push(a);var u=r.processModule(s,t,n),c=u.content;return c}));return{content:i,includeList:t}}}]),e}())||Wv);function vm(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=Object(nt["a"])(e),null===e)break;return e}function mm(){return mm="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=vm(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},mm.apply(this,arguments)}(function(e){e["Normal"]="normal",e["PostProcessing"]="post-processing"})(Yv||(Yv={}));var gm,ym,bm=(Xv=Object(pp["injectable"])(),Xv(Kv=function(){function e(){Object(Ve["a"])(this,e),Object(Ge["a"])(this,"shaderModuleService",void 0),Object(Ge["a"])(this,"rendererService",void 0),Object(Ge["a"])(this,"cameraService",void 0),Object(Ge["a"])(this,"mapService",void 0),Object(Ge["a"])(this,"interactionService",void 0),Object(Ge["a"])(this,"layerService",void 0),Object(Ge["a"])(this,"config",void 0)}return Object(He["a"])(e,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return Yv.Normal}},{key:"init",value:function(e,t){this.config=t,this.rendererService=e.getContainer().get(vp.IRendererService),this.cameraService=e.getContainer().get(vp.ICameraService),this.mapService=e.getContainer().get(vp.IMapService),this.interactionService=e.getContainer().get(vp.IInteractionService),this.layerService=e.getContainer().get(vp.ILayerService),this.shaderModuleService=e.getContainer().get(vp.IShaderModuleService)}},{key:"render",value:function(e){}}]),e}())||Kv);function _m(e){var t=xm();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function xm(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var wm,Om,Em,Sm,jm,Am=(gm=Object(pp["injectable"])(),gm(ym=function(e){Object(et["a"])(n,e);var t=_m(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(e,t){mm(Object(nt["a"])(n.prototype),"init",this).call(this,e,t)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),n}(bm))||ym);function km(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Cm(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function Cm(e,t){if(e){if("string"===typeof e)return Tm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tm(e,t):void 0}}function Tm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Mm,Pm,Im=(wm=Object(pp["injectable"])(),Om=Object(pp["inject"])(vp.IPostProcessor),wm((Sm=function(){function e(){Object(Ve["a"])(this,e),Object(Ge["a"])(this,"passes",[]),Th(this,"postProcessor",jm,this),Object(Ge["a"])(this,"layer",void 0),Object(Ge["a"])(this,"renderFlag",void 0),Object(Ge["a"])(this,"width",0),Object(Ge["a"])(this,"height",0)}return Object(He["a"])(e,[{key:"setLayer",value:function(e){this.layer=e}},{key:"setRenderFlag",value:function(e){this.renderFlag=e}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=km(this.passes),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return r=n.value,e.next=7,r.render(this.layer);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:return e.next=19,this.postProcessor.render(this.layer);case 19:case"end":return e.stop()}}),e,this,[[1,11,14,17]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"resize",value:function(e,t){this.width===e&&this.height===t||(this.postProcessor.resize(e,t),this.width=e,this.height=t)}},{key:"add",value:function(e,t){e.getType()===Yv.PostProcessing?this.postProcessor.add(e,this.layer,t):(e.init(this.layer,t),this.passes.push(e))}},{key:"insert",value:function(e,t,n){e.init(this.layer,t),this.passes.splice(n,0,e)}},{key:"destroy",value:function(){this.passes.length=0}}]),e}(),jm=Mh(Sm.prototype,"postProcessor",[Om],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Em=Sm))||Em);function Rm(e){var t=Lm();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Lm(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Dm,Nm,Fm,zm,Bm,Um,Vm,Hm=(Mm=Object(pp["injectable"])(),Mm(Pm=function(e){Object(et["a"])(n,e);var t=Rm(n);function n(){var e;Object(Ve["a"])(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),Object(Ge["a"])(Object(gt["a"])(e),"pickingFBO",void 0),Object(Ge["a"])(Object(gt["a"])(e),"layer",void 0),Object(Ge["a"])(Object(gt["a"])(e),"width",0),Object(Ge["a"])(Object(gt["a"])(e),"height",0),Object(Ge["a"])(Object(gt["a"])(e),"alreadyInRendering",!1),Object(Ge["a"])(Object(gt["a"])(e),"pickFromPickingFBO",(function(t){var n=t.x,i=t.y,o=t.lngLat,a=t.type;if(e.layer.isVisible()&&e.layer.needPick(a)){var s,u=e.rendererService,c=u.getViewportSize,l=u.readPixels,f=u.useFramebuffer,p=c(),h=p.width,d=p.height,v=e.layer.getLayerConfig(),m=v.enableHighlight,g=v.enableSelect,y=n*r.DPR,b=i*r.DPR;if(!(y>h||y<0||b>d||b<0))f(e.pickingFBO,(function(){var t;if(s=l({x:Math.round(y),y:Math.round(d-(i+1)*r.DPR),width:1,height:1,data:new Uint8Array(4),framebuffer:e.pickingFBO}),0!==s[0]||0!==s[1]||0!==s[2]){var u=pi(s),c=e.layer.getSource().getFeatureById(u),f={x:n,y:i,type:a,lngLat:o,featureId:u,feature:c};c&&(e.layer.setCurrentPickId(u),e.triggerHoverOnLayer(f))}else{var p={x:n,y:i,lngLat:o,type:null===e.layer.getCurrentPickId()?"un"+a:"mouseout",featureId:null,feature:null};e.triggerHoverOnLayer(Object(N["a"])(Object(N["a"])({},p),{},{type:"unpick"})),e.triggerHoverOnLayer(p),e.layer.setCurrentPickId(null)}m&&e.highlightPickedFeature(s),g&&"click"===a&&(null===(t=s)||void 0===t?void 0:t.toString())!==[0,0,0,0].toString()&&e.selectFeature(s)}))}})),e}return Object(He["a"])(n,[{key:"getType",value:function(){return Yv.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(e,t){mm(Object(nt["a"])(n.prototype),"init",this).call(this,e,t),this.layer=e;var r=this.rendererService,i=r.createTexture2D,o=r.createFramebuffer,a=r.getViewportSize,s=a(),u=s.width,c=s.height;this.pickingFBO=o({color:i({width:u,height:c,wrapS:ad.CLAMP_TO_EDGE,wrapT:ad.CLAMP_TO_EDGE})}),this.interactionService.on(Xh.Hover,this.pickFromPickingFBO),this.interactionService.on(Xh.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(Xh.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(e){var t=this;if(!this.alreadyInRendering){var n=this.rendererService,r=n.getViewportSize,i=n.useFramebuffer,o=n.clear,a=r(),s=a.width,u=a.height;this.alreadyInRendering=!0,this.width===s&&this.height===u||(this.pickingFBO.resize({width:s,height:u}),this.width=s,this.height=u),i(this.pickingFBO,(function(){o({framebuffer:t.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var n=t.layer.multiPassRenderer.getRenderFlag();t.layer.multiPassRenderer.setRenderFlag(!1),e.hooks.beforePickingEncode.call(),e.render(),e.hooks.afterPickingEncode.call(),t.layer.multiPassRenderer.setRenderFlag(n),t.alreadyInRendering=!1}))}}},{key:"triggerHoverOnLayer",value:function(e){this.layer.emit(e.type,e)}},{key:"highlightPickedFeature",value:function(e){var t=Object(Oi["a"])(e,3),n=t[0],r=t[1],i=t[2];this.layer.hooks.beforeHighlight.call([n,r,i]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(e){var t=Object(Oi["a"])(e,3),n=t[0],r=t[1],i=t[2];this.layer.hooks.beforeSelect.call([n,r,i]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(e){var t=e.featureId,n=hi(t);this.selectFeature(new Uint8Array(n))}},{key:"highlightFeatureHandle",value:function(e){var t=e.featureId,n=hi(t);this.highlightPickedFeature(new Uint8Array(n))}}]),n}(bm))||Pm),Gm="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",Wm=(Dm=Object(pp["injectable"])(),Nm=Object(pp["inject"])(vp.IShaderModuleService),Dm((zm=function(){function e(){Object(Ve["a"])(this,e),Th(this,"shaderModuleService",Bm,this),Object(Ge["a"])(this,"rendererService",void 0),Object(Ge["a"])(this,"config",void 0),Object(Ge["a"])(this,"quad",Gm),Object(Ge["a"])(this,"enabled",!0),Object(Ge["a"])(this,"renderToScreen",!1),Object(Ge["a"])(this,"model",void 0),Object(Ge["a"])(this,"name",void 0),Object(Ge["a"])(this,"optionsToUpdate",{})}return Object(He["a"])(e,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(e){this.name=e}},{key:"getType",value:function(){return Yv.PostProcessing}},{key:"init",value:function(e,t){this.config=t,this.rendererService=e.getContainer().get(vp.IRendererService),this.shaderModuleService=e.getContainer().get(vp.IShaderModuleService);var n=this.rendererService,r=n.createAttribute,i=n.createBuffer,o=n.createModel,a=this.setupShaders(),s=a.vs,u=a.fs,c=a.uniforms;this.model=o({vs:s,fs:u,attributes:{a_Position:r({buffer:i({data:[-4,-4,4,-4,0,4],type:ad.FLOAT}),size:2})},uniforms:Object(N["a"])(Object(N["a"])({u_Texture:null},c),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:"copy"===this.getName()}})}},{key:"render",value:function(e,t){var n=this,r=e.multiPassRenderer.getPostProcessor(),i=this.rendererService,o=i.useFramebuffer,a=i.getViewportSize,s=i.clear,u=a(),c=u.width,l=u.height;o(this.renderToScreen?null:r.getWriteFBO(),(function(){s({framebuffer:r.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});var e=Object(N["a"])({u_BloomFinal:0,u_Texture:r.getReadFBO(),u_ViewportSize:[c,l]},n.convertOptionsToUniforms(n.optionsToUpdate));t&&(e.u_BloomFinal=1,e.u_Texture2=t),n.model.draw({uniforms:e})}))}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(e){this.enabled=e}},{key:"setRenderToScreen",value:function(e){this.renderToScreen=e}},{key:"updateOptions",value:function(e){this.optionsToUpdate=Object(N["a"])(Object(N["a"])({},this.optionsToUpdate),e)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(e){var t={};return Object.keys(e).forEach((function(n){Object(Ei["isNil"])(e[n])||(t["u_".concat(Object(Ei["upperFirst"])(Object(Ei["camelCase"])(n)))]=e[n])})),t}}]),e}(),Bm=Mh(zm.prototype,"shaderModuleService",[Nm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fm=zm))||Fm);function qm(e){var t=Zm();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Zm(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Ym,Xm,Km="varying vec2 v_UV;\n\nuniform float u_BloomFinal: 0.0;\nuniform sampler2D u_Texture;\nuniform sampler2D u_Texture2;\n\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform float u_radius: 5.0;\nuniform float u_intensity: 0.3;\nuniform float u_baseRadio: 0.5;\n\n// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nfloat luminance(vec4 color) {\n  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;\n}\n\nvoid main() {\n  // vec4 baseColor = texture2D(u_Texture, v_UV);\n\n  float r = sqrt(u_radius);\n\n  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));\n  // c1 *= luminance(c1);\n  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));\n  // c2 *= luminance(c2);\n  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));\n  // c3 *= luminance(c3);\n  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));\n  // c4 *= luminance(c4);\n  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;\n\n  // float lum = luminance(inbloomColor);\n  // inbloomColor.rgb *= lum;\n\n  if(u_BloomFinal > 0.0) {\n    vec4 baseColor = texture2D(u_Texture2, v_UV);\n    float baselum = luminance(baseColor);\n    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);\n    if(baselum <= 0.2) {\n      gl_FragColor = inbloomColor * u_intensity;\n    }\n  } else {\n    gl_FragColor = inbloomColor;\n  }\n}",$m="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",Qm=(Um=Object(pp["injectable"])(),Um(Vm=function(e){Object(et["a"])(n,e);var t=qm(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:$m,fs:Km});var e=this.shaderModuleService.getModule("blur-pass"),t=e.vs,n=e.fs,r=e.uniforms,i=this.rendererService.getViewportSize(),o=i.width,a=i.height;return{vs:t,fs:n,uniforms:Object(N["a"])(Object(N["a"])({},r),{},{u_ViewportSize:[o,a]})}}},{key:"convertOptionsToUniforms",value:function(e){var t={};return Object(Ei["isNil"])(e.bloomRadius)||(t.u_radius=e.bloomRadius),Object(Ei["isNil"])(e.bloomIntensity)||(t.u_intensity=e.bloomIntensity),Object(Ei["isNil"])(e.bloomBaseRadio)||(t.u_baseRadio=e.bloomBaseRadio),t}}]),n}(Wm))||Vm);function Jm(e){var t=eg();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function eg(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var tg,ng,rg="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_BlurDir: [1.0, 0.0];\n\n// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);\n}",ig="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",og=(Ym=Object(pp["injectable"])(),Ym(Xm=function(e){Object(et["a"])(n,e);var t=Jm(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:ig,fs:rg});var e=this.shaderModuleService.getModule("blur-pass"),t=e.vs,n=e.fs,r=e.uniforms,i=this.rendererService.getViewportSize(),o=i.width,a=i.height;return{vs:t,fs:n,uniforms:Object(N["a"])(Object(N["a"])({},r),{},{u_ViewportSize:[o,a]})}}},{key:"convertOptionsToUniforms",value:function(e){var t={};return Object(Ei["isNil"])(e.blurRadius)||(t.u_BlurDir=[e.blurRadius,0]),t}}]),n}(Wm))||Xm);function ag(e){var t=sg();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function sg(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var ug,cg,lg="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_BlurDir: [1.0, 0.0];\n\n// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);\n}",fg="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",pg=(tg=Object(pp["injectable"])(),tg(ng=function(e){Object(et["a"])(n,e);var t=ag(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:fg,fs:lg});var e=this.shaderModuleService.getModule("blur-pass"),t=e.vs,n=e.fs,r=e.uniforms,i=this.rendererService.getViewportSize(),o=i.width,a=i.height;return{vs:t,fs:n,uniforms:Object(N["a"])(Object(N["a"])({},r),{},{u_ViewportSize:[o,a]})}}},{key:"convertOptionsToUniforms",value:function(e){var t={};return Object(Ei["isNil"])(e.blurRadius)||(t.u_BlurDir=[0,e.blurRadius]),t}}]),n}(Wm))||ng);function hg(e){var t=dg();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function dg(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var vg,mg,gg='varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_Center : [0.5, 0.5];\nuniform float u_Angle : 0;\nuniform float u_Size : 8;\n\n#pragma include "common"\n\nfloat scale = PI / u_Size;\n\nfloat pattern(float u_Angle, vec2 texSize, vec2 texCoord) {\n  float s = sin(u_Angle), c = cos(u_Angle);\n  vec2 tex = texCoord * texSize - u_Center * texSize;\n  vec2 point = vec2(\n    c * tex.x - s * tex.y,\n    s * tex.x + c * tex.y\n  ) * scale;\n  return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js\nvec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  vec3 cmy = 1.0 - color.rgb;\n  float k = min(cmy.x, min(cmy.y, cmy.z));\n  cmy = (cmy - k) / (1.0 - k);\n  cmy = clamp(\n    cmy * 10.0 - 3.0 + vec3(\n      pattern(u_Angle + 0.26179, texSize, texCoord),\n      pattern(u_Angle + 1.30899, texSize, texCoord),\n      pattern(u_Angle, texSize, texCoord)\n    ),\n    0.0,\n    1.0\n  );\n  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);\n  return vec4(1.0 - cmy - k, color.a);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);\n}',yg="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",bg=(ug=Object(pp["injectable"])(),ug(cg=function(e){Object(et["a"])(n,e);var t=hg(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:yg,fs:gg});var e=this.shaderModuleService.getModule("colorhalftone-pass"),t=e.vs,n=e.fs,r=e.uniforms,i=this.rendererService.getViewportSize(),o=i.width,a=i.height;return{vs:t,fs:n,uniforms:Object(N["a"])(Object(N["a"])({},r),{},{u_ViewportSize:[o,a]})}}}]),n}(Wm))||cg);function _g(e){var t=xg();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function xg(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var wg,Og,Eg="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n}",Sg="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",jg=(vg=Object(pp["injectable"])(),vg(mg=function(e){Object(et["a"])(n,e);var t=_g(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:Sg,fs:Eg}),this.shaderModuleService.getModule("copy-pass")}}]),n}(Wm))||mg);function Ag(e){var t=kg();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function kg(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Cg,Tg,Mg="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_Center : [0.5, 0.5];\nuniform float u_Scale : 10;\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js\nvec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;\n  tex.y /= 0.866025404;\n  tex.x -= tex.y * 0.5;\n  vec2 a;\n  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {\n    a = vec2(floor(tex.x), floor(tex.y));\n  }\n  else a = vec2(ceil(tex.x), ceil(tex.y));\n  vec2 b = vec2(ceil(tex.x), floor(tex.y));\n  vec2 c = vec2(floor(tex.x), ceil(tex.y));\n  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);\n  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);\n  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);\n  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);\n  float alen = length(TEX - A);\n  float blen = length(TEX - B);\n  float clen = length(TEX - C);\n  vec2 choice;\n  if (alen < blen) {\n    if (alen < clen) choice = a;\n    else choice = c;\n  } else {\n    if (blen < clen) choice = b;\n    else choice = c;\n  }\n  choice.x += choice.y * 0.5;\n  choice.y *= 0.866025404;\n  choice *= u_Scale / texSize;\n  return texture2D(texture, choice + u_Center);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);\n}",Pg="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",Ig=(wg=Object(pp["injectable"])(),wg(Og=function(e){Object(et["a"])(n,e);var t=Ag(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:Pg,fs:Mg});var e=this.shaderModuleService.getModule("hexagonalpixelate-pass"),t=e.vs,n=e.fs,r=e.uniforms,i=this.rendererService.getViewportSize(),o=i.width,a=i.height;return{vs:t,fs:n,uniforms:Object(N["a"])(Object(N["a"])({},r),{},{u_ViewportSize:[o,a]})}}}]),n}(Wm))||Og);function Rg(e){var t=Lg();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Lg(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Dg,Ng,Fg="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform float u_Strength : 0.6;\n\nvec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 dx = vec2(1.0 / texSize.x, 0.0);\n  vec2 dy = vec2(0.0, 1.0 / texSize.y);\n  vec4 color = texture2D(texture, texCoord);\n  float bigTotal = 0.0;\n  float smallTotal = 0.0;\n  vec3 bigAverage = vec3(0.0);\n  vec3 smallAverage = vec3(0.0);\n  for (float x = -2.0; x <= 2.0; x += 1.0) {\n    for (float y = -2.0; y <= 2.0; y += 1.0) {\n      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;\n      bigAverage += sample;\n      bigTotal += 1.0;\n      if (abs(x) + abs(y) < 2.0) {\n        smallAverage += sample;\n        smallTotal += 1.0;\n      }\n    }\n  }\n  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);\n  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;\n  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);\n}",zg="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",Bg=(Cg=Object(pp["injectable"])(),Cg(Tg=function(e){Object(et["a"])(n,e);var t=Rg(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:zg,fs:Fg});var e=this.shaderModuleService.getModule("ink-pass"),t=e.vs,n=e.fs,r=e.uniforms,i=this.rendererService.getViewportSize(),o=i.width,a=i.height;return{vs:t,fs:n,uniforms:Object(N["a"])(Object(N["a"])({},r),{},{u_ViewportSize:[o,a]})}}}]),n}(Wm))||Tg);function Ug(e){var t=Vg();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Vg(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Hg,Gg,Wg="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform float u_Amount : 0.5;\n\nfloat rand(vec2 co) {\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js\nvec4 noise_filterColor(vec4 color, vec2 texCoord) {\n  float diff = (rand(texCoord) - 0.5) * u_Amount;\n  color.r += diff;\n  color.g += diff;\n  color.b += diff;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);\n}",qg="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",Zg=(Dg=Object(pp["injectable"])(),Dg(Ng=function(e){Object(et["a"])(n,e);var t=Ug(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:qg,fs:Wg}),this.shaderModuleService.getModule("noise-pass")}}]),n}(Wm))||Ng);function Yg(e){var t=Xg();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Xg(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Kg,$g,Qg,Jg,ey,ty,ny,ry,iy="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",oy="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform float u_Amount : 0.5;\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js\nvec4 sepia_filterColor(vec4 color) {\n  float r = color.r;\n  float g = color.g;\n  float b = color.b;\n  color.r =\n    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));\n  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));\n  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = sepia_filterColor(gl_FragColor);\n}",ay=(Hg=Object(pp["injectable"])(),Hg(Gg=function(e){Object(et["a"])(n,e);var t=Yg(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:iy,fs:oy}),this.shaderModuleService.getModule("sepia-pass")}}]),n}(Wm))||Gg),sy=(Kg=Object(pp["injectable"])(),$g=Object(pp["inject"])(vp.IRendererService),Qg=Object(pp["postConstruct"])(),Kg((ey=function(){function e(){Object(Ve["a"])(this,e),Th(this,"rendererService",ty,this),Object(Ge["a"])(this,"passes",[]),Object(Ge["a"])(this,"readFBO",void 0),Object(Ge["a"])(this,"writeFBO",void 0)}return Object(He["a"])(e,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"getCurrentFBOTex",value:function(){var e=this.rendererService,t=e.getViewportSize,n=e.createTexture2D,r=t(),i=r.width,o=r.height;return n({x:0,y:0,width:i,height:o,copy:!0})}},{key:"getReadFBOTex",value:function(){var e=this,t=this.rendererService.useFramebuffer;return new Promise((function(n){t(e.readFBO,Object(ae["a"])(ue.a.mark((function t(){return ue.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n(e.getCurrentFBOTex());case 1:case"end":return t.stop()}}),t)}))))}))}},{key:"renderBloomPass",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t,n){var r,i;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getReadFBOTex();case 2:r=e.sent,i=0;case 4:if(!(i<4)){e.next=11;break}return e.next=7,n.render(t,r);case 7:this.swap(),i++,e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"render",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t){var n,r;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<this.passes.length)){e.next=15;break}if(r=this.passes[n],r.setRenderToScreen(this.isLastEnabledPass(n)),"bloom"!==r.getName()){e.next=9;break}return e.next=7,this.renderBloomPass(t,r);case 7:e.next=12;break;case 9:return e.next=11,r.render(t);case 11:n!==this.passes.length-1&&this.swap();case 12:n++,e.next=1;break;case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"resize",value:function(e,t){this.readFBO.resize({width:e,height:t}),this.writeFBO.resize({width:e,height:t})}},{key:"add",value:function(e,t,n){e.init(t,n),this.passes.push(e)}},{key:"insert",value:function(e,t,n,r){e.init(n,r),this.passes.splice(t,0,e)}},{key:"getPostProcessingPassByName",value:function(e){return this.passes.find((function(t){return t.getName()===e}))}},{key:"init",value:function(){var e=this.rendererService,t=e.createFramebuffer,n=e.createTexture2D;this.readFBO=t({color:n({width:1,height:1,wrapS:ad.CLAMP_TO_EDGE,wrapT:ad.CLAMP_TO_EDGE})}),this.writeFBO=t({color:n({width:1,height:1,wrapS:ad.CLAMP_TO_EDGE,wrapT:ad.CLAMP_TO_EDGE})})}},{key:"isLastEnabledPass",value:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].isEnabled())return!1;return!0}},{key:"swap",value:function(){var e=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=e}}]),e}(),ty=Mh(ey.prototype,"rendererService",[$g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mh(ey.prototype,"init",[Qg],Object.getOwnPropertyDescriptor(ey.prototype,"init"),ey.prototype),Jg=ey))||Jg);function uy(e){var t=cy();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function cy(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var ly,fy,py,hy,dy,vy=(ny=Object(pp["injectable"])(),ny(ry=function(e){Object(et["a"])(n,e);var t=uy(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getType",value:function(){return Yv.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(e,t){mm(Object(nt["a"])(n.prototype),"init",this).call(this,e,t)}},{key:"render",value:function(e){var t=this.rendererService,n=t.useFramebuffer,r=t.clear,i=e.multiPassRenderer.getPostProcessor().getReadFBO();n(i,(function(){r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:i}),e.multiPassRenderer.setRenderFlag(!1),e.models.forEach((function(t){t.draw({uniforms:e.layerModel.getUninforms()})})),e.multiPassRenderer.setRenderFlag(!0)}))}}]),n}(bm))||ry);function gy(e){var t=yy();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function yy(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var by="uniform float u_opacity : 1.0;\nuniform float u_MixRatio : 0.5;\n\nuniform sampler2D u_Diffuse1;\nuniform sampler2D u_Diffuse2;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  vec4 texel1 = texture2D(u_Diffuse1, v_UV);\n  vec4 texel2 = texture2D(u_Diffuse2, v_UV);\n  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);\n}\n",_y="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n}",xy="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}";function wy(e,t){var n=0,r=1/t,i=e;while(i>0)n+=r*(i%t),i=Math.floor(i/t),r/=t;return n}var Oy=1,Ey=(ly=Object(pp["injectable"])(),fy=Object(pp["inject"])(vp.IShaderModuleService),ly((hy=function(e){Object(et["a"])(n,e);var t=gy(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Th(Object(gt["a"])(e),"shaderModuleService",dy,Object(gt["a"])(e)),Object(Ge["a"])(Object(gt["a"])(e),"haltonSequence",[]),Object(Ge["a"])(Object(gt["a"])(e),"accumulatingId",0),Object(Ge["a"])(Object(gt["a"])(e),"frame",0),Object(Ge["a"])(Object(gt["a"])(e),"timer",void 0),Object(Ge["a"])(Object(gt["a"])(e),"sampleRenderTarget",void 0),Object(Ge["a"])(Object(gt["a"])(e),"prevRenderTarget",void 0),Object(Ge["a"])(Object(gt["a"])(e),"outputRenderTarget",void 0),Object(Ge["a"])(Object(gt["a"])(e),"copyRenderTarget",void 0),Object(Ge["a"])(Object(gt["a"])(e),"blendModel",void 0),Object(Ge["a"])(Object(gt["a"])(e),"outputModel",void 0),Object(Ge["a"])(Object(gt["a"])(e),"copyModel",void 0),e}return Object(He["a"])(n,[{key:"getType",value:function(){return Yv.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(e,t){mm(Object(nt["a"])(n.prototype),"init",this).call(this,e,t);var r=this.rendererService,i=r.createFramebuffer,o=r.createTexture2D;this.sampleRenderTarget=i({color:o({width:1,height:1,wrapS:ad.CLAMP_TO_EDGE,wrapT:ad.CLAMP_TO_EDGE})}),this.prevRenderTarget=i({color:o({width:1,height:1,wrapS:ad.CLAMP_TO_EDGE,wrapT:ad.CLAMP_TO_EDGE})}),this.outputRenderTarget=i({color:o({width:1,height:1,wrapS:ad.CLAMP_TO_EDGE,wrapT:ad.CLAMP_TO_EDGE})}),this.copyRenderTarget=i({color:o({width:1,height:1,wrapS:ad.CLAMP_TO_EDGE,wrapT:ad.CLAMP_TO_EDGE})});for(var a=0;a<30;a++)this.haltonSequence.push([wy(a,2),wy(a,3)]);this.blendModel=this.createTriangleModel("blend-pass",by),this.outputModel=this.createTriangleModel("copy-pass",_y,{blend:{enable:!0,func:{srcRGB:ad.ONE,dstRGB:ad.ONE_MINUS_SRC_ALPHA,srcAlpha:ad.ONE,dstAlpha:ad.ONE_MINUS_SRC_ALPHA},equation:{rgb:ad.FUNC_ADD,alpha:ad.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",_y)}},{key:"render",value:function(e){var t=this,n=this.rendererService,r=n.clear,i=n.getViewportSize,o=n.useFramebuffer,a=i(),s=a.width,u=a.height;this.sampleRenderTarget.resize({width:s,height:u}),this.prevRenderTarget.resize({width:s,height:u}),this.outputRenderTarget.resize({width:s,height:u}),this.copyRenderTarget.resize({width:s,height:u}),this.resetFrame(),this.stopAccumulating();var c=e.multiPassRenderer.getPostProcessor().getReadFBO();o(c,(function(){r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:c}),e.multiPassRenderer.setRenderFlag(!1),e.render(),e.multiPassRenderer.setRenderFlag(!0)}));var l=function n(r){t.accumulatingId&&r===t.accumulatingId&&(t.isFinished()||(t.doRender(e),dr.requestAnimationFrame((function(){n(r)}))))};this.accumulatingId=Oy++,this.timer=dr.setTimeout((function(){l(t.accumulatingId)}),50)}},{key:"doRender",value:function(e){var t=this,n=this.rendererService,r=n.clear,i=n.getViewportSize,o=n.useFramebuffer,a=i(),s=a.width,u=a.height,c=e.getLayerConfig(),l=c.jitterScale,f=void 0===l?1:l,p=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((2*p[0]-1)/s*f,(2*p[1]-1)/u*f),e.multiPassRenderer.setRenderFlag(!1),e.hooks.beforeRender.call(),o(this.sampleRenderTarget,(function(){r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:t.sampleRenderTarget}),e.render()})),e.hooks.afterRender.call(),e.multiPassRenderer.setRenderFlag(!0);var h=e.getLayerConfig();o(this.outputRenderTarget,(function(){t.blendModel.draw({uniforms:{u_opacity:h.opacity||1,u_MixRatio:0===t.frame?1:.9,u_Diffuse1:t.sampleRenderTarget,u_Diffuse2:0===t.frame?e.multiPassRenderer.getPostProcessor().getReadFBO():t.prevRenderTarget}})})),0===this.frame&&r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(o(this.copyRenderTarget,(function(){t.outputModel.draw({uniforms:{u_Texture:t.outputRenderTarget}})})),o(e.multiPassRenderer.getPostProcessor().getReadFBO(),(function(){t.copyModel.draw({uniforms:{u_Texture:t.copyRenderTarget}})})),e.multiPassRenderer.getPostProcessor().render(e));var d=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=d,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,dr.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(e,t,n){this.shaderModuleService.registerModule(e,{vs:xy,fs:t});var r=this.shaderModuleService.getModule(e),i=r.vs,o=r.fs,a=r.uniforms,s=this.rendererService,u=s.createAttribute,c=s.createBuffer,l=s.createModel;return l(Object(N["a"])({vs:i,fs:o,attributes:{a_Position:u({buffer:c({data:[-4,-4,4,-4,0,4],type:ad.FLOAT}),size:2})},uniforms:Object(N["a"])({},a),depth:{enable:!1},count:3},n))}}]),n}(bm),dy=Mh(hy.prototype,"shaderModuleService",[fy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),py=hy))||py),Sy=new pp["Container"];Sy.bind(vp.IGlobalConfigService).to(Ch).inSingletonScope(),Object(pp["decorate"])(Object(pp["injectable"])(),Fo["EventEmitter"]),Sy.bind(vp.IEventEmitter).to(Fo["EventEmitter"]);var jy=dp()(Sy,!1),Ay=function(e){var t=jy.lazyInject(e);return function(e,n,r){t.call(this,e,n),r&&(r.initializer=function(){return e[n]})}},ky=Sy,Cy=0;function Ty(){var e=new pp["Container"];return e.parent=Sy,e.bind(vp.SceneID).toConstantValue("".concat(Cy++)),e.bind(vp.IShaderModuleService).to(dm).inSingletonScope(),e.bind(vp.ILayerService).to(kv).inSingletonScope(),e.bind(vp.IDebugService).to(td).inSingletonScope(),e.bind(vp.ISceneService).to(Vv).inSingletonScope(),e.bind(vp.ICameraService).to(sh).inSingletonScope(),e.bind(vp.ICoordinateSystemService).to(qh).inSingletonScope(),e.bind(vp.IInteractionService).to(xd).inSingletonScope(),e.bind(vp.IPickingService).to(Rd).inSingletonScope(),e.bind(vp.IControlService).to(_h).inSingletonScope(),e.bind(vp.IMarkerService).to(xh).inSingletonScope(),e.bind(vp.IIconService).to(ah).inSingletonScope(),e.bind(vp.IFontService).to(Xp).inSingletonScope(),e.bind(vp.IPopupService).to(wh).inSingletonScope(),e.bind(vp.INormalPass).to(Am).whenTargetNamed("clear"),e.bind(vp.INormalPass).to(Hm).whenTargetNamed("pixelPicking"),e.bind(vp.INormalPass).to(vy).whenTargetNamed("render"),e.bind(vp.INormalPass).to(Ey).whenTargetNamed("taa"),e.bind(vp.IFactoryNormalPass).toFactory((function(e){return function(t){return e.container.getNamed(vp.INormalPass,t)}})),e.bind(vp.IPostProcessingPass).to(jg).whenTargetNamed("copy"),e.bind(vp.IPostProcessingPass).to(Qm).whenTargetNamed("bloom"),e.bind(vp.IPostProcessingPass).to(og).whenTargetNamed("blurH"),e.bind(vp.IPostProcessingPass).to(pg).whenTargetNamed("blurV"),e.bind(vp.IPostProcessingPass).to(Zg).whenTargetNamed("noise"),e.bind(vp.IPostProcessingPass).to(ay).whenTargetNamed("sepia"),e.bind(vp.IPostProcessingPass).to(bg).whenTargetNamed("colorHalftone"),e.bind(vp.IPostProcessingPass).to(Ig).whenTargetNamed("hexagonalPixelate"),e.bind(vp.IPostProcessingPass).to(Bg).whenTargetNamed("ink"),e.bind(vp.IFactoryPostProcessingPass).toFactory((function(e){return function(t){var n=e.container.getNamed(vp.IPostProcessingPass,t);return n.setName(t),n}})),e}function My(e){var t=new pp["Container"];return t.parent=e,t.bind(vp.IStyleAttributeService).to(Dv).inSingletonScope(),t.bind(vp.IMultiPassRenderer).to(Im).inSingletonScope(),t.bind(vp.IPostProcessor).to(sy).inSingletonScope(),t}var Py,Iy,Ry,Ly={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"},Dy={MapInitStart:"mapInitStart",LayerInitStart:"layerInitStart",LayerInitEnd:"layerInitEnd",SourceInitStart:"sourceInitStart",SourceInitEnd:"sourceInitEnd",ScaleInitStart:"scaleInitStart",ScaleInitEnd:"scaleInitEnd",MappingStart:"mappingStart",MappingEnd:"mappingEnd",BuildModelStart:"buildModelStart",BuildModelEnd:"buildModelEnd"};(function(e){e["LINEAR"]="linear",e["SEQUENTIAL"]="sequential",e["POWER"]="power",e["LOG"]="log",e["IDENTITY"]="identity",e["TIME"]="time",e["QUANTILE"]="quantile",e["QUANTIZE"]="quantize",e["THRESHOLD"]="threshold",e["CAT"]="cat",e["DIVERGING"]="diverging"})(Py||(Py={})),function(e){e["CONSTANT"]="constant",e["VARIABLE"]="variable"}(Iy||(Iy={})),function(e){e[e["Attribute"]=0]="Attribute",e[e["InstancedAttribute"]=1]="InstancedAttribute",e[e["Uniform"]=2]="Uniform"}(Ry||(Ry={}));var Ny,Fy=["mapload","mapchange","mapAfterFrameChange"],zy=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"];(function(e){e["IMAGE"]="image",e["CUSTOMIMAGE"]="customImage",e["ARRAYBUFFER"]="arraybuffer",e["RGB"]="rgb",e["TERRAINRGB"]="terrainRGB",e["CUSTOMRGB"]="customRGB",e["CUSTOMARRAYBUFFER"]="customArrayBuffer",e["CUSTOMTERRAINRGB"]="customTerrainRGB"})(Ny||(Ny={}));var By=function(){var e=Object(ae["a"])(ue.a.mark((function e(t,n,r,i){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){n({x:t.x,y:t.y,z:t.z},(function(t,n){t||0===n.length?o(t):n&&sp([{data:n,bands:[0]}],r,i,(function(t,n){t?o(t):n&&e(n)}))}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),Uy=function(){var e=Object(ae["a"])(ue.a.mark((function e(t,n){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){n({x:t.x,y:t.y,z:t.z},(function(t,n){!t&&n?n instanceof ArrayBuffer?kr(n,(function(t,n){t&&r(t),e(n)})):n instanceof HTMLImageElement?e(n):r(t):r(t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function Vy(e,t){return Array.isArray(e)?"string"===typeof e[0]?e.map((function(e){return ya(e,t)})):e.map((function(e){return{url:ya(e.url,t),bands:e.bands||[0]}})):ya(e,t)}function Hy(e){return"string"===typeof e?[{url:e,bands:[0]}]:"string"===typeof e[0]?e.map((function(e){return{url:e,bands:[0]}})):e}function Gy(e,t){e.xhrCancel=function(){t.map((function(e){e.abort()}))}}var Wy=function(){var e=Object(ae["a"])(ue.a.mark((function e(t,n,r,i,o){var a,s,u,c,l,f;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=Hy(n.url),!(a.length>1)){e.next=15;break}return e.next=4,qy(a,n);case 4:if(s=e.sent,u=s.rasterFiles,c=s.xhrList,l=s.errList,Gy(t,c),!(l.length>0)){e.next=12;break}return r(l,null),e.abrupt("return");case 12:sp(u,i,o,r),e.next=17;break;case 15:f=Or(n,(function(e,t){if(e)r(e);else if(t){var n=[{data:t,bands:a[0].bands}];sp(n,i,o,r)}})),Gy(t,[f]);case 17:case"end":return e.stop()}}),e)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}();function qy(e,t){return Zy.apply(this,arguments)}function Zy(){return Zy=Object(ae["a"])(ue.a.mark((function e(t,n){var r,i,o,a,s,u,c,l,f,p,h;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=[],i=[],o=[],a=0;case 4:if(!(a<t.length)){e.next=20;break}return s=t[a],u=Object(N["a"])(Object(N["a"])({},n),{},{url:s.url}),c=s.bands,e.next=10,_r(Object(N["a"])(Object(N["a"])({},u),{},{type:"arrayBuffer"}));case 10:l=e.sent,f=l.err,p=l.data,h=l.xhr,f&&o.push(f),i.push(h),r.push({data:p,bands:c});case 17:a++,e.next=4;break;case 20:return e.abrupt("return",{rasterFiles:r,xhrList:i,errList:o});case 21:case"end":return e.stop()}}),e)}))),Zy.apply(this,arguments)}var Yy=function(){var e=Object(ae["a"])(ue.a.mark((function e(t,n,r,i,o){var a;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={url:Vy(t,n)},e.abrupt("return",new Promise((function(e,t){Wy(r,a,(function(n,r){n?t(n):r&&e(r)}),i,o)})));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}(),Xy=function(){var e=Object(ae["a"])(ue.a.mark((function e(t,n,r,i){var o,a,s,u;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Array.isArray(t)?t[0]:t,i.wmtsOptions?(s=(null===i||void 0===i?void 0:i.getURLFromTemplate)||ba,o=s(a,Object(N["a"])(Object(N["a"])({},n),i.wmtsOptions))):(u=(null===i||void 0===i?void 0:i.getURLFromTemplate)||ya,o=u(a,n)),e.abrupt("return",new Promise((function(e,t){var n,a=Ar({url:o,type:(null===i||void 0===i||null===(n=i.requestParameters)||void 0===n?void 0:n.type)||"arrayBuffer"},(function(n,r){n?t(n):r&&e(r)}),i.transformResponse);r.xhrCancel=function(){return a.abort()}})));case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),Ky=function(){return{rasterData:new Uint8Array([0]),width:1,height:1}},$y={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0};Ny.ARRAYBUFFER,Ny.RGB;function Qy(e){return!(!Array.isArray(e)||0!==e.length)||!Array.isArray(e)&&"string"!==typeof e}function Jy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Qy(e))throw new Error("tile server url is error");var n=(null===t||void 0===t?void 0:t.dataType)||Ny.IMAGE;n===Ny.RGB&&(n=Ny.ARRAYBUFFER);var r=function(r,i){switch(n){case Ny.IMAGE:return Xy(e,r,i,t);case Ny.CUSTOMIMAGE:case Ny.CUSTOMTERRAINRGB:return Uy(i,null===t||void 0===t?void 0:t.getCustomData);case Ny.ARRAYBUFFER:return Yy(e,r,i,(null===t||void 0===t?void 0:t.format)||Ky,null===t||void 0===t?void 0:t.operation);case Ny.CUSTOMARRAYBUFFER:case Ny.CUSTOMRGB:return By(i,null===t||void 0===t?void 0:t.getCustomData,(null===t||void 0===t?void 0:t.format)||Ky,null===t||void 0===t?void 0:t.operation);default:return Xy(e,r,i,t)}},i=Object(N["a"])(Object(N["a"])(Object(N["a"])({},$y),t),{},{getTileData:r});return{data:e,dataArray:[],tilesetOptions:i,isTile:!0}}var eb=["extent","min","max","width","height","format","operation"];function tb(e,t){var n,r=t.extent,i=t.min,o=t.max,a=t.width,s=t.height,u=t.format,c=t.operation,l=Object(Cv["a"])(t,eb);if(void 0===u||lp(e))n=Array.from(e);else{var f=Array.isArray(e)?e:[e];n=rp(f,u,c)}var p={_id:1,dataArray:[Object(N["a"])(Object(N["a"])({_id:1,data:n,width:a,height:s},l),{},{min:i,max:o,coordinates:[[r[0],r[1]],[r[2],r[3]]]})]};return p}var nb={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},rb=function(){var e=Object(ae["a"])(ue.a.mark((function e(t){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=Object(Oi["a"])(t.bounds,4),r=n[0],i=n[1],o=n[2],a=n[3],s={layers:{testTile:{features:[{type:"Feature",properties:{key:t.x+"/"+t.y+"/"+t.z,textLng:(r+o)/2,textLat:(i+a)/2},geometry:{type:"LineString",coordinates:[[o,a],[o,i],[r,i],[r,i]]}}]}}};e(s)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ib(e,t){var n=function(e){return rb(e)},r=Object(N["a"])(Object(N["a"])(Object(N["a"])({},nb),t),{},{getTileData:n});return{data:e,dataArray:[],tilesetOptions:r,isTile:!0}}var ob=n("mpbz"),ab=n.n(ob);function sb(e,t){var n=t.radius,r=void 0===n?40:n,i=t.maxZoom,o=void 0===i?18:i,a=t.minZoom,s=void 0===a?0:a,u=t.zoom,c=void 0===u?2:u;if(e.pointIndex){var l=e.pointIndex.getClusters(e.extent,Math.floor(c));return e.dataArray=ub(l),e}var f=new ab.a({radius:r,minZoom:s,maxZoom:o}),p={type:"FeatureCollection",features:[]};return p.features=e.dataArray.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e.coordinates},properties:Object(N["a"])({},e)}})),f.load(p.features),f}function ub(e){return e.map((function(e,t){return Object(N["a"])({coordinates:e.geometry.coordinates,_id:t+1},e.properties)}))}function cb(e){if(0===e.length)throw new Error("max requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]>t&&(t=e[n]);return t}function lb(e){if(0===e.length)throw new Error("min requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]<t&&(t=e[n]);return t}function fb(e){if(0===e.length)return 0;for(var t,n=e[0],r=0,i=1;i<e.length;i++)t=n+1*e[i],Math.abs(n)>=Math.abs(e[i])?r+=n-t+e[i]:r+=e[i]-t+n,n=t;return n+1*r}function pb(e){if(0===e.length)throw new Error("mean requires at least one data point");return fb(e)/e.length}var hb={min:lb,max:cb,mean:pb,sum:fb};function db(e){var t=vb();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function vb(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function mb(e,t){if(Array.isArray(t))return t}var gb=function(e){Object(et["a"])(n,e);var t=db(n);function n(e,r){var i;return Object(Ve["a"])(this,n),i=t.call(this),Object(Ge["a"])(Object(gt["a"])(i),"type","source"),Object(Ge["a"])(Object(gt["a"])(i),"isTile",!1),Object(Ge["a"])(Object(gt["a"])(i),"inited",!1),Object(Ge["a"])(Object(gt["a"])(i),"hooks",{init:new Nv["e"]}),Object(Ge["a"])(Object(gt["a"])(i),"parser",{type:"geojson"}),Object(Ge["a"])(Object(gt["a"])(i),"transforms",[]),Object(Ge["a"])(Object(gt["a"])(i),"cluster",!1),Object(Ge["a"])(Object(gt["a"])(i),"clusterOptions",{enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"}),Object(Ge["a"])(Object(gt["a"])(i),"invalidExtent",!1),Object(Ge["a"])(Object(gt["a"])(i),"dataArrayChanged",!1),Object(Ge["a"])(Object(gt["a"])(i),"cfg",{autoRender:!0}),i.originData=e,i.initCfg(r),i.init().then((function(){i.inited=!0,i.emit("update",{type:"inited"})})),i}return Object(He["a"])(n,[{key:"getSourceCfg",value:function(){return this.cfg}},{key:"getClusters",value:function(e){return this.clusterIndex.getClusters(this.caculClusterExtent(2),e)}},{key:"getClustersLeaves",value:function(e){return this.clusterIndex.getLeaves(e,1/0)}},{key:"getParserType",value:function(){return this.parser.type}},{key:"updateClusterData",value:function(e){var t=this,n=this.clusterOptions,r=n.method,i=void 0===r?"sum":r,o=n.field,a=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(e));this.clusterOptions.zoom=e,a.forEach((function(e){e.id||(e.properties.point_count=1)})),(o||Object(Ei["isFunction"])(i))&&(a=a.map((function(e){var n=e.id;if(n){var r,a=t.clusterIndex.getLeaves(n,1/0),s=a.map((function(e){return e.properties}));if(Object(Ei["isString"])(i)&&o){var u=cp(s,o);r=hb[i](u)}Object(Ei["isFunction"])(i)&&(r=i(s)),e.properties.stat=r}else e.properties.point_count=1;return e}))),this.data=y("geojson")({type:"FeatureCollection",features:a}),this.executeTrans()}},{key:"getFeatureById",value:function(e){var t=this.parser,n=t.type,r=void 0===n?"geojson":n,i=t.geometry;if("geojson"!==r||this.cluster)return"json"===r&&i?this.data.dataArray.find((function(t){return t._id===e})):e<this.data.dataArray.length?this.data.dataArray[e]:"null";var o=e<this.originData.features.length?this.originData.features[e]:"null",a=Object(Ei["cloneDeep"])(o);if(null!==a&&void 0!==a&&a.properties&&(0!==this.transforms.length||this.dataArrayChanged)){var s=this.data.dataArray.find((function(t){return t._id===e}));a.properties=s}return a}},{key:"updateFeaturePropertiesById",value:function(e,t){this.data.dataArray=this.data.dataArray.map((function(n){return n._id===e?Object(N["a"])(Object(N["a"])({},n),t):n})),this.dataArrayChanged=!0,this.emit("update",{type:"update"})}},{key:"getFeatureId",value:function(e,t){var n=this.data.dataArray.find((function(n){return n[e]===t}));return null===n||void 0===n?void 0:n._id}},{key:"setData",value:function(e,t){var n=this;this.originData=e,this.dataArrayChanged=!1,this.initCfg(t),this.init().then((function(){n.emit("update",{type:"update"})}))}},{key:"reloadAllTile",value:function(){var e;null===(e=this.tileset)||void 0===e||e.reloadAll()}},{key:"reloadTilebyId",value:function(e,t,n){var r;null===(r=this.tileset)||void 0===r||r.reloadTileById(e,t,n)}},{key:"reloadTileByLnglat",value:function(e,t,n){var r;null===(r=this.tileset)||void 0===r||r.reloadTileByLnglat(e,t,n)}},{key:"reloadTileByExtent",value:function(e,t){var n;null===(n=this.tileset)||void 0===n||n.reloadTileByExtent(e,t)}},{key:"destroy",value:function(){var e;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,null===(e=this.tileset)||void 0===e||e.destroy()}},{key:"processData",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t=this;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){try{t.excuteParser(),t.initCluster(),t.executeTrans(),e({})}catch(r){n(r)}})));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"initCfg",value:function(e){this.cfg=Object(Ei["mergeWith"])(this.cfg,e,mb);var t=this.cfg;t&&(t.parser&&(this.parser=t.parser),t.transforms&&(this.transforms=t.transforms),this.cluster=t.cluster||!1,t.clusterOptions&&(this.cluster=!0,this.clusterOptions=Object(N["a"])(Object(N["a"])({},this.clusterOptions),t.clusterOptions)))}},{key:"init",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.inited=!1,e.next=3,this.processData();case 3:this.inited=!0;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"excuteParser",value:function(){var e=this.parser,t=e.type||"geojson",n=y(t);this.data=n(this.originData,e),this.tileset=this.initTileset(),e.cancelExtent||(this.extent=uo(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3])}},{key:"setCenter",value:function(e){this.center=[(e[0]+e[2])/2,(e[1]+e[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}},{key:"initTileset",value:function(){var e=this.data.tilesetOptions;if(e){if(this.isTile=!0,this.tileset)return this.tileset.updateOptions(e),this.tileset;var t=new ma(Object(N["a"])({},e));return t}}},{key:"executeTrans",value:function(){var e=this,t=this.transforms;t.forEach((function(t){var n=t.type,r=_(n)(e.data,t);Object.assign(e.data,r)}))}},{key:"initCluster",value:function(){if(this.cluster){var e=this.clusterOptions||{};this.clusterIndex=sb(this.data,e)}}},{key:"caculClusterExtent",value:function(e){var t=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(t=yo(_o(this.extent),e)),t[0].concat(t[1])}}]),n}(Fo["EventEmitter"]);function yb(e,t){var n=t.callback;return n&&(e.dataArray=e.dataArray.filter(n)),e}function bb(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_b(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function _b(e,t){if(e){if("string"===typeof e)return xb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xb(e,t):void 0}}function xb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wb=6378e3;function Ob(e,t){var n=e.dataArray,r=t.size,i=void 0===r?10:r,o=i/(2*Math.PI*wb)*(256<<20)/2,a=Eb(n,i),s=a.gridHash,u=a.gridOffset,c=kb(s,u,t);return{yOffset:o,xOffset:o,radius:o,type:"grid",dataArray:c}}function Eb(e,t){var n,r,i=1/0,o=-1/0,a=bb(e);try{for(a.s();!(r=a.n()).done;){var s=r.value;n=s.coordinates[1],Number.isFinite(n)&&(i=n<i?n:i,o=n>o?n:o)}}catch(b){a.e(b)}finally{a.f()}var u=(i+o)/2,c=Sb(t,u);if(c.xOffset<=0||c.yOffset<=0)return{gridHash:{},gridOffset:c};var l,f={},p=bb(e);try{for(p.s();!(l=p.n()).done;){var h=l.value,d=h.coordinates[1],v=h.coordinates[0];if(Number.isFinite(d)&&Number.isFinite(v)){var m=Math.floor((d+90)/c.yOffset),g=Math.floor((v+180)/c.xOffset),y="".concat(m,"-").concat(g);f[y]=f[y]||{count:0,points:[]},f[y].count+=1,f[y].points.push(h)}}}catch(b){p.e(b)}finally{p.f()}return{gridHash:f,gridOffset:c}}function Sb(e,t){var n=jb(e),r=Ab(t,e);return{yOffset:n,xOffset:r}}function jb(e){return e/wb*(180/Math.PI)}function Ab(e,t){return t/wb*(180/Math.PI)/Math.cos(e*Math.PI/180)}function kb(e,t,n){return Object.keys(e).reduce((function(r,o,a){var s=o.split("-"),u=parseInt(s[0],10),c=parseInt(s[1],10),l={};if(n.field&&n.method){var f=i.getColumn(e[o].points,n.field);l[n.method]=i.statMap[n.method](f)}return Object.assign(l,{_id:a,coordinates:vo([t.xOffset*(c+.5)-180,t.yOffset*(u+.5)-90]),rawData:e[o].points,count:e[o].count}),r.push(l),r}),[])}var Cb=Math.PI/3,Tb=[0,Cb,2*Cb,3*Cb,4*Cb,5*Cb];function Mb(e){return e[0]}function Pb(e){return e[1]}var Ib=function(){var e,t,n,r=0,i=0,o=1,a=1,s=Mb,u=Pb;function c(e){var r,i={},o=[],a=e.length;for(r=0;r<a;++r)if(!isNaN(l=+s.call(null,c=e[r],r,e))&&!isNaN(f=+u.call(null,c,r,e))){var c,l,f,p=Math.round(f/=n),h=Math.round(l=l/t-(1&p)/2),d=f-p;if(3*Math.abs(d)>1){var v=l-h,m=h+(l<h?-1:1)/2,g=p+(f<p?-1:1),y=l-m,b=f-g;v*v+d*d>y*y+b*b&&(h=m+(1&p?1:-1)/2,p=g)}var _=h+"-"+p,x=i[_];x?x.push(c):(o.push(x=i[_]=[c]),x.x=(h+(1&p)/2)*t,x.y=p*n)}return o}function l(e){var t=0,n=0;return Tb.map((function(r){var i=Math.sin(r)*e,o=-Math.cos(r)*e,a=i-t,s=o-n;return t=i,n=o,[a,s]}))}return c.hexagon=function(t){return"m"+l(null==t?e:+t).join("l")+"z"},c.centers=function(){for(var s=[],u=Math.round(i/n),c=Math.round(r/t),l=u*n;l<a+e;l+=n,++u)for(var f=c*t+(1&u)*t/2;f<o+t/2;f+=t)s.push([f,l]);return s},c.mesh=function(){var t=l(e).slice(0,4).join("l");return c.centers().map((function(e){return"M"+e+"m"+t})).join("")},c.x=function(e){return arguments.length?(s=e,c):s},c.y=function(e){return arguments.length?(u=e,c):u},c.radius=function(r){return arguments.length?(e=+r,t=2*e*Math.sin(Cb),n=1.5*e,c):e},c.size=function(e){return arguments.length?(r=i=0,o=+e[0],a=+e[1],c):[o-r,a-i]},c.extent=function(e){return arguments.length?(r=+e[0][0],i=+e[0][1],o=+e[1][0],a=+e[1][1],c):[[r,i],[o,a]]},c.radius(1)},Rb=6378e3;function Lb(e,t){var n=e.dataArray,r=t.size,o=void 0===r?10:r,a=t.method,s=void 0===a?"sum":a,u=o/(2*Math.PI*Rb)*(256<<20)/2,c=n.map((function(e){var t=vo(e.coordinates),n=Object(Oi["a"])(t,2),r=n[0],i=n[1];return Object(N["a"])(Object(N["a"])({},e),{},{coordinates:[r,i]})})),l=Ib().radius(u).x((function(e){return e.coordinates[0]})).y((function(e){return e.coordinates[1]})),f=l(c),p={dataArray:f.map((function(e,n){var r;if(t.field&&s){var o=i.getColumn(e,t.field);e[s]=i.statMap[s](o)}return r={},Object(Ge["a"])(r,t.method,e[s]),Object(Ge["a"])(r,"count",e.length),Object(Ge["a"])(r,"rawData",e),Object(Ge["a"])(r,"coordinates",[e.x,e.y]),Object(Ge["a"])(r,"_id",n),r})),radius:u,xOffset:u,yOffset:u,type:"hexagon"};return p}function Db(e,t){var n=t.sourceField,r=t.targetField,i=t.data,o={};return i.forEach((function(e){o[e[n]]=e})),e.dataArray=e.dataArray.map((function(e){var t=e[r];return Object(N["a"])(Object(N["a"])({},e),o[t])})),e}function Nb(e,t){var n=t.callback;return n&&(e.dataArray=e.dataArray.map(n)),e}b("rasterTile",Jy),b("mvt",Yf),b("geojsonvt",Je),b("testTile",ib),b("geojson",oe),b("image",Bf),b("csv",te),b("json",ee),b("raster",fp),b("rasterRgb",tb),x("cluster",sb),x("filter",yb),x("join",Db),x("map",Nb),x("grid",Ob),x("hexagon",Lb);var Fb=gb;function zb(e){var t=Bb();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Bb(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Ub=function(e){Object(et["a"])(n,e);var t=zb(n);function n(e){var r;return Object(Ve["a"])(this,n),r=t.call(this),Object(Ge["a"])(Object(gt["a"])(r),"added",!1),Object(Ge["a"])(Object(gt["a"])(r),"eventHandle",(function(e){r.polyfillEvent(e),r.emit(e.type,{target:e,data:r.markerOption.extData,lngLat:r.lngLat})})),r.markerOption=Object(N["a"])(Object(N["a"])({},r.getDefault()),e),no(["update","onMove","onMapClick"],Object(gt["a"])(r)),r.init(),r}return Object(He["a"])(n,[{key:"getMarkerLayerContainerSize",value:function(){}},{key:"getDefault",value:function(){return{element:void 0,anchor:Cr.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(e){this.scene=e,this.mapsService=e.get(vp.IMapService),this.sceneSerive=e.get(vp.ISceneService);var t=this.markerOption.element;return this.mapsService.getMarkerContainer().appendChild(t),this.registerMarkerEvent(t),this.mapsService.on("camerachange",this.update),this.update(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("camerachange",this.update)),this.unRegisterMarkerEvent(),this.removeAllListeners();var e=this.markerOption.element;return e&&r.remove(e),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(e){return this.lngLat=e,Array.isArray(e)&&(this.lngLat={lng:e[0],lat:e[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(e){var t=this;if(!this.added)return this.once("added",(function(){t.setElement(e)})),this;var n=this.markerOption.element;return n&&r.remove(n),this.markerOption.element=e,this.init(),this.mapsService.getMarkerContainer().appendChild(e),this.registerMarkerEvent(e),this.update(),this}},{key:"openPopup",value:function(){var e=this;if(!this.added)return this.once("added",(function(){e.openPopup()})),this;var t=this.popup;return t?(t.isOpen()||t.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var e=this;this.added||this.once("added",(function(){e.closePopup()}));var t=this.popup;return t&&t.remove(),this}},{key:"setPopup",value:function(e){return this.popup=e,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var e=this.popup;return e?(e.isOpen()?e.remove():e.addTo(this.scene),this):this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(e){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(e){this.markerOption.extData=e}},{key:"update",value:function(){if(this.mapsService){var e=this.markerOption,t=e.element,n=e.anchor;this.updatePosition(),r.setTransform(t,"".concat(Tr[n]))}}},{key:"onMapClick",value:function(e){var t=this.markerOption.element;this.popup&&t&&this.togglePopup()}},{key:"getCurrentContainerSize",value:function(){var e=this.mapsService.getContainer();return{containerHeight:(null===e||void 0===e?void 0:e.scrollHeight)||0,containerWidth:(null===e||void 0===e?void 0:e.scrollWidth)||0,bounds:this.mapsService.getBounds()}}},{key:"updatePosition",value:function(){if(this.mapsService){var e=this.markerOption,t=e.element,n=e.offsets,r=this.lngLat,i=r.lng,o=r.lat,a=this.mapsService.lngLatToContainer([i,o]);if(t){t.style.display="block",t.style.whiteSpace="nowrap";var s=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize(),u=s.containerHeight,c=s.containerWidth,l=s.bounds;if(!l)return;if(Math.abs(l[0][0])>180||Math.abs(l[1][0])>180){if(a.x>c){var f=this.mapsService.lngLatToContainer([i-360,o]);a.x=f.x}if(a.x<0){var p=this.mapsService.lngLatToContainer([i+360,o]);a.x=p.x}}(a.x>c||a.x<0||a.y>u||a.y<0)&&(t.style.display="none"),t.style.left=a.x+n[0]+"px",t.style.top=a.y-n[1]+"px"}}}},{key:"init",value:function(){var e=this,t=this.markerOption.element,n=this.markerOption,i=n.color,o=n.anchor;if(!t){this.defaultMarker=!0,t=r.create("div"),this.markerOption.element=t;var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height","48px"),a.setAttributeNS(null,"width","48px"),a.setAttributeNS(null,"viewBox","0 0 1024 1024");var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),s.setAttributeNS(null,"fill",i),a.appendChild(s),t.appendChild(a)}r.addClass(t,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach((function(n){var r,i,o=(null===(r=e.markerOption)||void 0===r?void 0:r.style)&&(null===(i=e.markerOption)||void 0===i?void 0:i.style[n]);t&&(t.style[n]=o)})),Mr(t,o,"marker")}},{key:"registerMarkerEvent",value:function(e){e.addEventListener("click",this.onMapClick),e.addEventListener("mousemove",this.eventHandle),e.addEventListener("click",this.eventHandle),e.addEventListener("mousedown",this.eventHandle),e.addEventListener("mouseup",this.eventHandle),e.addEventListener("dblclick",this.eventHandle),e.addEventListener("contextmenu",this.eventHandle),e.addEventListener("mouseover",this.eventHandle),e.addEventListener("mouseout",this.eventHandle),e.addEventListener("touchstart",this.eventHandle),e.addEventListener("touchend",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var e=this.getElement();e.removeEventListener("click",this.onMapClick),e.removeEventListener("mousemove",this.eventHandle),e.removeEventListener("click",this.eventHandle),e.removeEventListener("mousedown",this.eventHandle),e.removeEventListener("mouseup",this.eventHandle),e.removeEventListener("dblclick",this.eventHandle),e.removeEventListener("contextmenu",this.eventHandle),e.removeEventListener("mouseover",this.eventHandle),e.removeEventListener("mouseout",this.eventHandle),e.removeEventListener("touchstart",this.eventHandle),e.removeEventListener("touchend",this.eventHandle)}},{key:"polyfillEvent",value:function(e){this.mapsService&&"GAODE2.x"===this.mapsService.version&&(to()||("touchstart"===e.type&&(this.touchStartTime=Date.now()),"touchend"===e.type&&Date.now()-this.touchStartTime<300&&this.emit("click",{target:e,data:this.markerOption.extData,lngLat:this.lngLat})))}},{key:"addDragHandler",value:function(e){return null}},{key:"onUp",value:function(e){throw new Error("Method not implemented.")}}]),n}(Fo["EventEmitter"]);function Vb(e){var t=Hb();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Hb(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}Fo["EventEmitter"],n("bpoo");function Gb(e){var t=Wb();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Wb(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var qb=function(e){Object(et["a"])(n,e);var t=Gb(n);function n(e){var r;return Object(Ve["a"])(this,n),r=t.call(this),n.controlCount++,r.controlOption=Object(N["a"])(Object(N["a"])({},r.getDefault(e)),e||{}),r}return Object(He["a"])(n,[{key:"getOptions",value:function(){return this.controlOption}},{key:"setOptions",value:function(e){var t=this.getDefault(e);Object.entries(e).forEach((function(n){var r=Object(Oi["a"])(n,2),i=r[0],o=r[1];void 0===o&&(e[i]=t[i])})),"position"in e&&this.setPosition(e.position),"className"in e&&this.setClassName(e.className),"style"in e&&this.setStyle(e.style),this.controlOption=Object(N["a"])(Object(N["a"])({},this.controlOption),e)}},{key:"addTo",value:function(e){this.mapsService=e.get(vp.IMapService),this.renderService=e.get(vp.IRendererService),this.layerService=e.get(vp.ILayerService),this.controlService=e.get(vp.IControlService),this.configService=e.get(vp.IGlobalConfigService),this.scene=e.get(vp.ISceneService),this.sceneContainer=e,this.isShow=!0,this.container=this.onAdd(),r.addClass(this.container,"l7-control");var t=this.controlOption,n=t.className,i=t.style;return n&&this.setClassName(n),i&&this.setStyle(i),this.insertContainer(),this.emit("add",this),this}},{key:"remove",value:function(){if(!this.mapsService)return this;r.remove(this.container),this.onRemove(),this.emit("remove",this)}},{key:"onAdd",value:function(){return r.create("div")}},{key:"onRemove",value:function(){}},{key:"show",value:function(){var e=this.container;r.removeClass(e,"l7-control--hide"),this.isShow=!0,this.emit("show",this)}},{key:"hide",value:function(){var e=this.container;r.addClass(e,"l7-control--hide"),this.isShow=!1,this.emit("hide",this)}},{key:"getDefault",value:function(e){return{position:eh.TOPRIGHT,name:"".concat(n.controlCount)}}},{key:"getContainer",value:function(){return this.container}},{key:"getIsShow",value:function(){return this.isShow}},{key:"_refocusOnMap",value:function(e){if(this.mapsService&&e&&e.screenX>0&&e.screenY>0){var t=this.mapsService.getContainer();null!==t&&t.focus()}}},{key:"setPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eh.TOPLEFT,t=this.controlService;return t&&t.removeControl(this),this.controlOption.position=e,t&&t.addControl(this,this.sceneContainer),this}},{key:"setClassName",value:function(e){var t=this.container,n=this.controlOption.className;n&&r.removeClass(t,n),e&&r.addClass(t,e)}},{key:"setStyle",value:function(e){var t=this.container;e?t.setAttribute("style",e):t.removeAttribute("style")}},{key:"insertContainer",value:function(){var e=this.controlOption.position,t=this.container;if(e instanceof Element)e.appendChild(t);else{var n=this.controlService.controlCorners[e];-1!==e.indexOf("bottom")?n.insertBefore(t,n.firstChild):n.appendChild(t)}}},{key:"checkUpdateOption",value:function(e,t){return t.some((function(t){return t in e}))}}]),n}(zo.a);function Zb(e){var t=Yb();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Yb(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}Object(Ge["a"])(qb,"controlCount",0);var Xb=function(e){Object(et["a"])(n,e);var t=Zb(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"isDisable",!1),e}return Object(He["a"])(n,[{key:"setIsDisable",value:function(e){var t,n;(this.isDisable=e,e)?null===(t=this.button)||void 0===t||t.setAttribute("disabled","true"):null===(n=this.button)||void 0===n||n.removeAttribute("disabled")}},{key:"createButton",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.create("button","l7-button-control ".concat(e))}},{key:"onAdd",value:function(){this.button=this.createButton(),this.isDisable=!1;var e=this.controlOption,t=e.title,n=e.btnText,r=e.btnIcon;return this.setBtnTitle(t),this.setBtnText(n),this.setBtnIcon(r),this.button}},{key:"onRemove",value:function(){this.button=this.buttonIcon=this.buttonText=void 0,this.isDisable=!1}},{key:"setOptions",value:function(e){var t=e.title,r=e.btnText,i=e.btnIcon;this.checkUpdateOption(e,["title"])&&this.setBtnTitle(t),this.checkUpdateOption(e,["btnIcon"])&&this.setBtnIcon(i),this.checkUpdateOption(e,["btnText"])&&this.setBtnText(r),mm(Object(nt["a"])(n.prototype),"setOptions",this).call(this,e)}},{key:"setBtnTitle",value:function(e){var t;null===(t=this.button)||void 0===t||t.setAttribute("title",null!==e&&void 0!==e?e:"")}},{key:"setBtnIcon",value:function(e){if(this.buttonIcon&&r.remove(this.buttonIcon),e){var t,n,i,o=null===(t=this.button)||void 0===t?void 0:t.firstChild;if(o)null===(n=this.button)||void 0===n||n.insertBefore(e,o);else null===(i=this.button)||void 0===i||i.appendChild(e);this.buttonIcon=e}}},{key:"setBtnText",value:function(e){if(this.button)if(r.removeClass(this.button,"l7-button-control--row"),r.removeClass(this.button,"l7-button-control--column"),e){var t,n=this.buttonText;if(!n)n=r.create("div","l7-button-control__text"),null===(t=this.button)||void 0===t||t.appendChild(n),this.buttonText=n;n.innerText=e,r.addClass(this.button,this.controlOption.vertical?"l7-button-control--column":"l7-button-control--row")}else!e&&this.buttonText&&(r.remove(this.buttonText),this.buttonText=void 0)}}]),n}(qb);function Kb(e){var t=$b();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function $b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Qb=function(e){Object(et["a"])(n,e);var t=Kb(n);function n(e,i){var o;return Object(Ve["a"])(this,n),o=t.call(this),Object(Ge["a"])(Object(gt["a"])(o),"isShow",!1),Object(Ge["a"])(Object(gt["a"])(o),"timeout",null),Object(Ge["a"])(Object(gt["a"])(o),"show",(function(){return o.isShow||!o.contentDOM.innerHTML||(o.resetPopperPosition(),r.removeClass(o.popperDOM,"l7-popper-hide"),o.isShow=!0,o.option.unique&&n.conflictPopperList.forEach((function(e){e!==Object(gt["a"])(o)&&e.isShow&&e.hide()})),o.emit("show")),Object(gt["a"])(o)})),Object(Ge["a"])(Object(gt["a"])(o),"hide",(function(){return o.isShow?(r.addClass(o.popperDOM,"l7-popper-hide"),o.isShow=!1,o.emit("hide"),Object(gt["a"])(o)):Object(gt["a"])(o)})),Object(Ge["a"])(Object(gt["a"])(o),"setHideTimeout",(function(){o.timeout||(o.timeout=window.setTimeout((function(){o.isShow&&(o.hide(),o.timeout=null)}),300))})),Object(Ge["a"])(Object(gt["a"])(o),"clearHideTimeout",(function(){o.timeout&&(window.clearTimeout(o.timeout),o.timeout=null)})),Object(Ge["a"])(Object(gt["a"])(o),"onBtnClick",(function(){o.isShow?o.hide():o.show()})),Object(Ge["a"])(Object(gt["a"])(o),"onBtnMouseLeave",(function(){o.setHideTimeout()})),Object(Ge["a"])(Object(gt["a"])(o),"onBtnMouseMove",(function(){o.clearHideTimeout(),o.isShow||o.show()})),o.button=e,o.option=i,o.init(),i.unique&&n.conflictPopperList.push(Object(gt["a"])(o)),o}return Object(He["a"])(n,[{key:"buttonRect",get:function(){return this.button.getBoundingClientRect()}},{key:"getPopperDOM",value:function(){return this.popperDOM}},{key:"getIsShow",value:function(){return this.isShow}},{key:"getContent",value:function(){return this.content}},{key:"setContent",value:function(e){"string"===typeof e?this.contentDOM.innerHTML=e:e instanceof HTMLElement&&(r.clearChildren(this.contentDOM),this.contentDOM.appendChild(e)),this.content=e}},{key:"init",value:function(){var e=this.option.trigger;this.popperDOM=this.createPopper(),"click"===e?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave))}},{key:"destroy",value:function(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),r.remove(this.popperDOM)}},{key:"resetPopperPosition",value:function(){var e={},t=this.option,n=t.container,i=t.offset,o=void 0===i?[0,0]:i,a=t.placement,s=Object(Oi["a"])(o,2),u=s[0],c=s[1],l=this.button.getBoundingClientRect(),f=n.getBoundingClientRect(),p=r.getDiffRect(l,f),h=p.left,d=p.right,v=p.top,m=p.bottom,g=!1,y=!1;/^(left|right)/.test(a)?(a.includes("left")?e.right="".concat(l.width+d,"px"):a.includes("right")&&(e.left="".concat(l.width+h,"px")),a.includes("start")?e.top="".concat(v,"px"):a.includes("end")?e.bottom="".concat(m,"px"):(e.top="".concat(v+l.height/2,"px"),y=!0,e.transform="translate(".concat(u,"px, calc(").concat(c,"px - 50%))"))):/^(top|bottom)/.test(a)&&(a.includes("top")?e.bottom="".concat(l.height+m,"px"):a.includes("bottom")&&(e.top="".concat(l.height+v,"px")),a.includes("start")?e.left="".concat(h,"px"):a.includes("end")?e.right="".concat(d,"px"):(e.left="".concat(h+l.width/2,"px"),g=!0,e.transform="translate(calc(".concat(u,"px - 50%), ").concat(c,"px)"))),e.transform="translate(calc(".concat(u,"px - ").concat(g?"50%":"0%","), calc(").concat(c,"px - ").concat(y?"50%":"0%",")");var b=a.split("-");b.length&&r.addClass(this.popperDOM,b.map((function(e){return"l7-popper-".concat(e)})).join(" ")),r.addStyle(this.popperDOM,r.css2Style(e))}},{key:"createPopper",value:function(){var e=this.option,t=e.container,n=e.className,i=void 0===n?"":n,o=e.content,a=r.create("div","l7-popper l7-popper-hide ".concat(i)),s=r.create("div","l7-popper-content"),u=r.create("div","l7-popper-arrow");return a.appendChild(s),a.appendChild(u),t.appendChild(a),this.popperDOM=a,this.contentDOM=s,o&&this.setContent(o),a}}]),n}(Fo["EventEmitter"]);function Jb(e){var t=e_();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function e_(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}Object(Ge["a"])(Qb,"conflictPopperList",[]);var t_={topleft:"right-start",topcenter:"bottom",topright:"left-start",bottomleft:"right-end",bottomcenter:"top",bottomright:"left-end",lefttop:"bottom-start",leftcenter:"right",leftbottom:"top-start",righttop:"bottom-end",rightcenter:"left",rightbottom:"top-end"},n_=function(e){Object(et["a"])(n,e);var t=Jb(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getPopper",value:function(){return this.popper}},{key:"hide",value:function(){this.popper.hide(),mm(Object(nt["a"])(n.prototype),"hide",this).call(this)}},{key:"getDefault",value:function(e){var t,r=mm(Object(nt["a"])(n.prototype),"getDefault",this).call(this,e),i=null!==(t=null===e||void 0===e?void 0:e.position)&&void 0!==t?t:r.position;return Object(N["a"])(Object(N["a"])({},mm(Object(nt["a"])(n.prototype),"getDefault",this).call(this,e)),{},{popperPlacement:i instanceof Element?"bottom":t_[i],popperTrigger:"click"})}},{key:"onAdd",value:function(){var e=mm(Object(nt["a"])(n.prototype),"onAdd",this).call(this);return this.initPopper(),e}},{key:"onRemove",value:function(){this.popper.destroy()}},{key:"initPopper",value:function(){var e=this,t=this.controlOption,n=t.popperClassName,r=t.popperPlacement,i=t.popperTrigger,o=this.mapsService.getMapContainer();return this.popper=new Qb(this.button,{className:n,placement:r,trigger:i,container:o,unique:!0}),this.popper.on("show",(function(){e.emit("popperShow",e)})).on("hide",(function(){e.emit("popperHide",e)})),this.popper}},{key:"setOptions",value:function(e){if(mm(Object(nt["a"])(n.prototype),"setOptions",this).call(this,e),this.checkUpdateOption(e,["popperPlacement","popperTrigger","popperClassName"])){var t=this.popper.getContent();this.popper.destroy(),this.initPopper(),this.popper.setContent(t)}}}]),n}(Xb);function r_(e){var t=i_();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function i_(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var o_=function(e){return e["ActiveOptionClassName"]="l7-select-control-item-active",e["OptionValueAttrKey"]="data-option-value",e["OptionIndexAttrKey"]="data-option-index",e}(o_||{}),a_=function(e){Object(et["a"])(n,e);var t=r_(n);function n(){var e;Object(Ve["a"])(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),Object(Ge["a"])(Object(gt["a"])(e),"selectValue",[]),Object(Ge["a"])(Object(gt["a"])(e),"createNormalOption",(function(t){var n=e.selectValue.includes(t.value),i=r.create("div","l7-select-control-item ".concat(n?o_.ActiveOptionClassName:""));e.getIsMultiple()&&i.appendChild(e.createCheckbox(n)),t.icon&&i.appendChild(t.icon);var o=r.create("span");return o.innerText=t.text,i.appendChild(o),i})),Object(Ge["a"])(Object(gt["a"])(e),"onItemClick",(function(t){if(e.getIsMultiple()){var n=e.selectValue.findIndex((function(e){return e===t.value}));n>-1?e.selectValue.splice(n,1):e.selectValue=[].concat(Object(D["a"])(e.selectValue),[t.value])}else e.selectValue=[t.value];e.setSelectValue(e.selectValue)})),e}return Object(He["a"])(n,[{key:"setOptions",value:function(e){mm(Object(nt["a"])(n.prototype),"setOptions",this).call(this,e);var t=e.options;t&&this.popper.setContent(this.getPopperContent(t))}},{key:"onAdd",value:function(){var e=mm(Object(nt["a"])(n.prototype),"onAdd",this).call(this),t=this.controlOption.defaultValue;return t&&(this.selectValue=this.transSelectValue(t)),this.popper.setContent(this.getPopperContent(this.controlOption.options)),e}},{key:"getSelectValue",value:function(){return this.getIsMultiple()?this.selectValue:this.selectValue[0]}},{key:"setSelectValue",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.transSelectValue(e);this.optionDOMList.forEach((function(e){var n=e.getAttribute(o_.OptionValueAttrKey),o=t.getIsMultiple()?e.querySelector("input[type=checkbox]"):void 0;i.includes(n)?(r.addClass(e,o_.ActiveOptionClassName),o&&r.setChecked(o,!0)):(r.removeClass(e,o_.ActiveOptionClassName),o&&r.setChecked(o,!1))})),this.selectValue=i,n&&this.emit("selectChange",this.getIsMultiple()?i:i[0])}},{key:"getIsMultiple",value:function(){return!1}},{key:"getPopperContent",value:function(e){var t=this,n=this.isImageOptions(),i=r.create("div",n?"l7-select-control--image":"l7-select-control--normal");this.getIsMultiple()&&r.addClass(i,"l7-select-control--multiple");var o=e.map((function(e,r){var i=n?t.createImageOption(e):t.createNormalOption(e);return i.setAttribute(o_.OptionValueAttrKey,e.value),i.setAttribute(o_.OptionIndexAttrKey,window.String(r)),i.addEventListener("click",t.onItemClick.bind(t,e)),i}));return i.append.apply(i,Object(D["a"])(o)),this.optionDOMList=o,i}},{key:"createImageOption",value:function(e){var t=this.selectValue.includes(e.value),n=r.create("div","l7-select-control-item ".concat(t?o_.ActiveOptionClassName:"")),i=r.create("img");i.setAttribute("src",e.img),r.setUnDraggable(i),n.appendChild(i);var o=r.create("div","l7-select-control-item-row");this.getIsMultiple()&&n.appendChild(this.createCheckbox(t));var a=r.create("span");return a.innerText=e.text,o.appendChild(a),n.appendChild(o),n}},{key:"createCheckbox",value:function(e){var t=r.create("input");return t.setAttribute("type","checkbox"),e&&r.setChecked(t,!0),t}},{key:"isImageOptions",value:function(){return!!this.controlOption.options.find((function(e){return e.img}))}},{key:"transSelectValue",value:function(e){return Array.isArray(e)?e:[e]}}]),n}(n_),s_=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.classList.add("l7-iconfont"),t.setAttribute("aria-hidden","true");var n=document.createElementNS("http://www.w3.org/2000/svg","use");return n.setAttributeNS("http://www.w3.org/1999/xlink","href","#".concat(e)),t.appendChild(n),t};function u_(e){var t=c_();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function c_(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var l_=function(e){Object(et["a"])(n,e);var t=u_(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"onClick",Object(ae["a"])(ue.a.mark((function t(){var n;return ue.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.controlOption.onExport,null!==n&&void 0!==n){t.next=5;break}t.next=10;break;case 5:return t.t0=n,t.next=8,e.getImage();case 8:t.t1=t.sent,(0,t.t0)(t.t1);case 10:case"end":return t.stop()}}),t)})))),Object(Ge["a"])(Object(gt["a"])(e),"mergeImage",Object(ae["a"])(ue.a.mark((function t(){var n,r,i,o,a,s,u,c,l,f,p,h,d,v,m=arguments;return ue.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(i=e.controlOption.imageType,o=null!==(n=null===(r=e.mapsService.getContainer())||void 0===r?void 0:r.getBoundingClientRect())&&void 0!==n?n:{},a=o.width,s=void 0===a?0:a,u=o.height,c=void 0===u?0:u,l=document.createElement("canvas"),l.width=s,l.height=c,f=l.getContext("2d"),p=m.length,h=new Array(p),d=0;d<p;d++)h[d]=m[d];return t.next=9,Promise.all(h.map((function(e){return new Promise((function(t){var n=new Image;n.onload=function(){t(n)},n.src=e}))})));case 9:return v=t.sent,v.forEach((function(e){null===f||void 0===f||f.drawImage(e,0,0,s,c)})),t.abrupt("return",l.toDataURL("image/".concat(i)));case 12:case"end":return t.stop()}}),t)})))),e}return Object(He["a"])(n,[{key:"onAdd",value:function(){var e=mm(Object(nt["a"])(n.prototype),"onAdd",this).call(this);return e.addEventListener("click",this.onClick),e}},{key:"getDefault",value:function(e){return Object(N["a"])(Object(N["a"])({},mm(Object(nt["a"])(n.prototype),"getDefault",this).call(this,e)),{},{title:"\u5bfc\u51fa\u56fe\u7247",btnIcon:s_("l7-icon-export-picture"),imageType:"png"})}},{key:"getImage",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.mapsService.exportMap("png");case 2:return t=e.sent,e.next=5,this.scene.exportPng("png");case 5:return n=e.sent,e.abrupt("return",this.mergeImage.apply(this,Object(D["a"])([t,n].filter((function(e){return e})))));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(Xb);function f_(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=p_(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function p_(e,t){if(e){if("string"===typeof e)return h_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h_(e,t):void 0}}function h_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d_=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],v_=function(){if("undefined"===typeof document)return!1;for(var e=d_[0],t={},n=0,r=d_;n<r.length;n++){var i=r[n],o=null===i||void 0===i?void 0:i[1];if(o in document){var a,s=f_(i.entries());try{for(s.s();!(a=s.n()).done;){var u=Object(Oi["a"])(a.value,2),c=u[0],l=u[1];t[e[c]]=l}}catch(f){s.e(f)}finally{s.f()}return t}}return!1}(),m_={change:v_.fullscreenchange,error:v_.fullscreenerror},g_={request:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement,t=arguments.length>1?arguments[1]:void 0;return new Promise((function(n,r){var i=function e(){g_.off("change",e),n()};g_.on("change",i);var o=e[v_.requestFullscreen](t);o instanceof Promise&&o.then(i)["catch"](r)}))},exit:function(){return new Promise((function(e,t){if(g_.isFullscreen){var n=function t(){g_.off("change",t),e()};g_.on("change",n);var r=document[v_.exitFullscreen]();r instanceof Promise&&r.then(n)["catch"](t)}else e()}))},toggle:function(e,t){return g_.isFullscreen?g_.exit():g_.request(e,t)},onchange:function(e){g_.on("change",e)},onerror:function(e){g_.on("error",e)},on:function(e,t){var n=m_[e];n&&document.addEventListener(n,t,!1)},off:function(e,t){var n=m_[e];n&&document.removeEventListener(n,t,!1)},raw:v_};Object.defineProperties(g_,{isFullscreen:{get:function(){return Boolean(document[v_.fullscreenElement])}},element:{enumerable:!0,get:function(){var e;return null!==(e=document[v_.fullscreenElement])&&void 0!==e?e:void 0}},isEnabled:{enumerable:!0,get:function(){return Boolean(document[v_.fullscreenEnabled])}}}),v_||(g_={isEnabled:!1});var y_=g_;function b_(e){var t=__();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function __(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var x_=function(e){Object(et["a"])(n,e);var t=b_(n);function n(e){var r;return Object(Ve["a"])(this,n),r=t.call(this,e),Object(Ge["a"])(Object(gt["a"])(r),"isFullscreen",!1),Object(Ge["a"])(Object(gt["a"])(r),"toggleFullscreen",Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!y_.isEnabled){e.next=3;break}return e.next=3,y_.toggle(r.mapContainer);case 3:case"end":return e.stop()}}),e)})))),Object(Ge["a"])(Object(gt["a"])(r),"onClick",(function(){r.toggleFullscreen()})),Object(Ge["a"])(Object(gt["a"])(r),"onFullscreenChange",(function(){r.isFullscreen=!!document.fullscreenElement;var e=r.controlOption,t=e.btnText,n=e.btnIcon,i=e.title,o=e.exitBtnText,a=e.exitBtnIcon,s=e.exitTitle;r.isFullscreen?(r.setBtnTitle(s),r.setBtnText(o),r.setBtnIcon(a)):(r.setBtnTitle(i),r.setBtnText(t),r.setBtnIcon(n)),r.emit("fullscreenChange",r.isFullscreen)})),y_.isEnabled||console.warn("\u5f53\u524d\u6d4f\u89c8\u5668\u73af\u5883\u4e0d\u652f\u6301\u5bf9\u5730\u56fe\u5168\u5c4f\u5316"),r}return Object(He["a"])(n,[{key:"setOptions",value:function(e){var t=e.exitBtnText,r=e.exitBtnIcon,i=e.exitTitle;this.isFullscreen&&(this.checkUpdateOption(e,["exitBtnIcon"])&&this.setBtnIcon(r),this.checkUpdateOption(e,["exitBtnText"])&&this.setBtnText(t),this.checkUpdateOption(e,["exitTitle"])&&this.setBtnTitle(i)),mm(Object(nt["a"])(n.prototype),"setOptions",this).call(this,e)}},{key:"onAdd",value:function(){var e=mm(Object(nt["a"])(n.prototype),"onAdd",this).call(this);return e.addEventListener("click",this.onClick),this.mapContainer=r.getContainer(this.scene.getSceneConfig().id),this.mapContainer.addEventListener("fullscreenchange",this.onFullscreenChange),e}},{key:"onRemove",value:function(){mm(Object(nt["a"])(n.prototype),"onRemove",this).call(this),this.mapContainer.removeEventListener("fullscreenchange",this.onFullscreenChange)}},{key:"getDefault",value:function(e){return Object(N["a"])(Object(N["a"])({},mm(Object(nt["a"])(n.prototype),"getDefault",this).call(this,e)),{},{title:"\u5168\u5c4f",btnIcon:s_("l7-icon-fullscreen"),exitTitle:"\u9000\u51fa\u5168\u5c4f",exitBtnIcon:s_("l7-icon-exit-fullscreen")})}}]),n}(Xb);function w_(e){var t=O_();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function O_(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var E_=function(e){Object(et["a"])(n,e);var t=w_(n);function n(e){var r;return Object(Ve["a"])(this,n),r=t.call(this,e),Object(Ge["a"])(Object(gt["a"])(r),"getGeoLocation",(function(){return new Promise((function(e,t){window.navigator.geolocation.getCurrentPosition((function(n){var r=n.coords,i=null!==r&&void 0!==r?r:{},o=i.longitude,a=i.latitude;Object(Ei["isNaN"])(o)||Object(Ei["isNaN"])(a)?t():e([o,a])}),(function(e){t(e)}))}))})),Object(Ge["a"])(Object(gt["a"])(r),"onClick",Object(ae["a"])(ue.a.mark((function e(){var t,n,i;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.navigator.geolocation){e.next=2;break}return e.abrupt("return");case 2:return t=r.controlOption.transform,e.next=5,r.getGeoLocation();case 5:if(n=e.sent,i=r.mapsService.getZoom(),e.t0=r.mapsService,e.t1=i>15?i:15,!t){e.next=15;break}return e.next=12,t(n);case 12:e.t2=e.sent,e.next=16;break;case 15:e.t2=n;case 16:e.t3=e.t2,e.t0.setZoomAndCenter.call(e.t0,e.t1,e.t3);case 18:case"end":return e.stop()}}),e)})))),window.navigator.geolocation||console.warn("\u5f53\u524d\u6d4f\u89c8\u5668\u73af\u5883\u4e0d\u652f\u6301\u83b7\u53d6\u5730\u7406\u5b9a\u4f4d"),r}return Object(He["a"])(n,[{key:"getDefault",value:function(e){return Object(N["a"])(Object(N["a"])({},mm(Object(nt["a"])(n.prototype),"getDefault",this).call(this,e)),{},{title:"\u5b9a\u4f4d",btnIcon:s_("l7-icon-reposition")})}},{key:"onAdd",value:function(){var e=mm(Object(nt["a"])(n.prototype),"onAdd",this).call(this);return e.addEventListener("click",this.onClick),e}}]),n}(Xb);function S_(e){var t=j_();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function j_(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var A_=function(e){Object(et["a"])(n,e);var t=S_(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"onLayerChange",(function(){var t;null!==(t=e.controlOption.layers)&&void 0!==t&&t.length||(e.selectValue=e.getLayerVisible(),e.setOptions({options:e.getLayerOptions()}))})),Object(Ge["a"])(Object(gt["a"])(e),"onLayerVisibleChane",(function(){e.setSelectValue(e.getLayerVisible())})),Object(Ge["a"])(Object(gt["a"])(e),"onSelectChange",(function(){e.layers.forEach((function(t){var n=e.selectValue.includes(t.name),r=t.isVisible();n&&!r&&t.show(),!n&&r&&t.hide()}))})),e}return Object(He["a"])(n,[{key:"layers",get:function(){var e=this.layerService,t=this.controlOption.layers;if(Array.isArray(t)&&t.length){var n=[];return t.forEach((function(t){if(t instanceof Object&&n.push(t),"string"===typeof t){var r=e.getLayer(t)||e.getLayerByName(t);r&&n.push(r)}})),n}return e.getLayers()||[]}},{key:"getDefault",value:function(e){return Object(N["a"])(Object(N["a"])({},mm(Object(nt["a"])(n.prototype),"getDefault",this).call(this,e)),{},{title:"\u56fe\u5c42\u63a7\u5236",btnIcon:s_("l7-icon-layer"),options:[]})}},{key:"getLayerVisible",value:function(){return this.layers.filter((function(e){return e.isVisible()})).map((function(e){return e.name}))}},{key:"getLayerOptions",value:function(){return this.layers.map((function(e){return{text:e.name,value:e.name}}))}},{key:"setOptions",value:function(e){var t=this.checkUpdateOption(e,["layers"]);mm(Object(nt["a"])(n.prototype),"setOptions",this).call(this,e),t&&(this.selectValue=this.getLayerVisible(),this.controlOption.options=this.getLayerOptions(),this.popper.setContent(this.getPopperContent(this.controlOption.options)))}},{key:"onAdd",value:function(){var e;return null!==(e=this.controlOption.options)&&void 0!==e&&e.length||(this.controlOption.options=this.getLayerOptions()),this.controlOption.defaultValue||(this.controlOption.defaultValue=this.getLayerVisible()),this.on("selectChange",this.onSelectChange),this.layerService.on("layerChange",this.onLayerChange),mm(Object(nt["a"])(n.prototype),"onAdd",this).call(this)}},{key:"onRemove",value:function(){this.off("selectChange",this.onSelectChange),this.layerService.off("layerChange",this.onLayerChange)}},{key:"getIsMultiple",value:function(){return!0}}]),n}(a_);function k_(e){var t=C_();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function C_(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var T_=function(e){Object(et["a"])(n,e);var t=k_(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getDefault",value:function(){return{position:eh.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"}}},{key:"onAdd",value:function(){var e=r.create("div","l7-control-logo");return this.setLogoContent(e),e}},{key:"onRemove",value:function(){return null}},{key:"setOptions",value:function(e){mm(Object(nt["a"])(n.prototype),"setOptions",this).call(this,e),this.checkUpdateOption(e,["img","href"])&&(r.clearChildren(this.container),this.setLogoContent(this.container))}},{key:"setLogoContent",value:function(e){var t=this.controlOption,n=t.href,i=t.img,o=r.create("img");if(o.setAttribute("src",i),o.setAttribute("aria-label","AntV logo"),r.setUnDraggable(o),n){var a=r.create("a","l7-control-logo-link");a.target="_blank",a.href=n,a.rel="noopener nofollow",a.setAttribute("rel","noopener nofollow"),a.appendChild(o),e.appendChild(a)}else e.appendChild(o)}}]),n}(qb),M_={normal:{text:"\u6807\u51c6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*qdFDSbvIalgAAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u6708\u5149\u94f6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d-vcRLzu8WIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u5e7b\u5f71\u9ed1",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*HMbRTI3XnpIAAAAAAAAAAAAADmJ7AQ/original"},fresh:{text:"\u8349\u8272\u9752",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kqaGQ5kjSiAAAAAAAAAAAAAADmJ7AQ/original"},grey:{text:"\u96c5\u58eb\u7070",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*XegrTpZIbqAAAAAAAAAAAAAADmJ7AQ/original"},graffiti:{text:"\u6d82\u9e26",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*G5g9SZ_Jg4cAAAAAAAAAAAAADmJ7AQ/original"},macaron:{text:"\u9a6c\u5361\u9f99",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*irVvQbDpQMwAAAAAAAAAAAAADmJ7AQ/original"},darkblue:{text:"\u6781\u591c\u84dd",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*lKRzQYB4iR0AAAAAAAAAAAAADmJ7AQ/original"},wine:{text:"\u9171\u7c7d",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*orY0T7QL-lwAAAAAAAAAAAAADmJ7AQ/original"}},P_={normal:{text:"\u6807\u51c6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kIyZTok4Uk0AAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u4eae",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Z3JRQKDI-cIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u6697",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d7HCQbfmyaoAAAAAAAAAAAAADmJ7AQ/original"},satellite:{text:"\u536b\u661f",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*TytUT6pS9okAAAAAAAAAAAAADmJ7AQ/original"},outdoors:{text:"\u6237\u5916",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*hWwFSYJEFWsAAAAAAAAAAAAADmJ7AQ/original"}};function I_(e){var t=R_();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function R_(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var L_=function(e){Object(et["a"])(n,e);var t=I_(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"onMapThemeChange",(function(){e.mapsService.setMapStyle(e.selectValue[0])})),e}return Object(He["a"])(n,[{key:"getDefault",value:function(e){return Object(N["a"])(Object(N["a"])({},mm(Object(nt["a"])(n.prototype),"getDefault",this).call(this,e)),{},{title:"\u5730\u56fe\u6837\u5f0f",btnIcon:s_("l7-icon-color"),options:[]})}},{key:"getStyleOptions",value:function(){var e="mapbox"===this.mapsService.getType()?P_:M_;return Object.entries(this.mapsService.getMapStyleConfig()).filter((function(e){var t=Object(Oi["a"])(e,2),n=t[0],r=t[1];return"string"===typeof r&&"blank"!==n})).map((function(t){var n,r=Object(Oi["a"])(t,2),i=r[0],o=r[1],a=null!==(n=e[i])&&void 0!==n?n:{},s=a.text,u=a.img;return{text:null!==s&&void 0!==s?s:i,value:o,img:u,key:i}}))}},{key:"getMapStyle",value:function(){return this.mapsService.getMapStyle()}},{key:"onAdd",value:function(){var e,t=this;if(null!==(e=this.controlOption.options)&&void 0!==e&&e.length||(this.controlOption.options=this.getStyleOptions()),this.controlOption.defaultValue){var r,i,o=this.controlOption.defaultValue;this.controlOption.defaultValue=null!==(r=null===(i=this.controlOption.options.find((function(e){return e.key===o})))||void 0===i?void 0:i.value)&&void 0!==r?r:o}else{var a=this.getMapStyle();a?this.controlOption.defaultValue=a:this.mapsService.map.once("styledata",(function(){var e=t.mapsService.getMapStyle();t.controlOption.defaultValue=e,t.setSelectValue(e,!1)}))}return this.on("selectChange",this.onMapThemeChange),mm(Object(nt["a"])(n.prototype),"onAdd",this).call(this)}},{key:"getIsMultiple",value:function(){return!1}}]),n}(a_);function D_(e){var t=N_();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function N_(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var F_=function(e){Object(et["a"])(n,e);var t=D_(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"location",[0,0]),Object(Ge["a"])(Object(gt["a"])(e),"onMouseMove",(function(t){var n=e.location,r=t.lngLat||t.lnglat,i=e.controlOption.transform;r&&(n=[r.lng,r.lat]),e.location=n,i&&(n=i(n)),e.insertLocation2HTML(n),e.emit("locationChange",n)})),e}return Object(He["a"])(n,[{key:"getLocation",value:function(){return this.location}},{key:"getDefault",value:function(e){return Object(N["a"])(Object(N["a"])({},mm(Object(nt["a"])(n.prototype),"getDefault",this).call(this,e)),{},{position:eh.BOTTOMLEFT,transform:function(e){var t=Object(Oi["a"])(e,2),n=t[0],r=t[1];return[+(+n).toFixed(6),+(+r).toFixed(6)]}})}},{key:"onAdd",value:function(){var e=r.create("div","l7-control-mouse-location");return e.innerHTML="&nbsp;",this.mapsService.on("mousemove",this.onMouseMove),e}},{key:"onRemove",value:function(){this.mapsService.off("mousemove",this.onMouseMove)}},{key:"insertLocation2HTML",value:function(e){this.container.innerText=e.join(", ")}}]),n}(qb);function z_(e){var t=B_();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function B_(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var U_=function(e){Object(et["a"])(n,e);var t=z_(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"update",(function(){var t=e.mapsService,n=e.controlOption.maxWidth,r=t.getSize()[1]/2,i=t.containerToLngLat([0,r]),o=t.containerToLngLat([n,r]),a=go([i.lng,i.lat],[o.lng,o.lat]);e.updateScales(a)})),e}return Object(He["a"])(n,[{key:"getDefault",value:function(e){return Object(N["a"])(Object(N["a"])({},mm(Object(nt["a"])(n.prototype),"getDefault",this).call(this,e)),{},{name:"scale",position:eh.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,lockWidth:!0})}},{key:"onAdd",value:function(){var e="l7-control-scale",t=r.create("div",e);this.resetScaleLines(t);var n=this.controlOption.updateWhenIdle;return this.mapsService.on(n?"moveend":"mapmove",this.update),this.mapsService.on(n?"zoomend":"zoomchange",this.update),t}},{key:"onRemove",value:function(){var e=this.controlOption.updateWhenIdle;this.mapsService.off(e?"zoomend":"zoomchange",this.update),this.mapsService.off(e?"moveend":"mapmove",this.update)}},{key:"setOptions",value:function(e){mm(Object(nt["a"])(n.prototype),"setOptions",this).call(this,e),this.checkUpdateOption(e,["lockWidth","maxWidth","metric","updateWhenIdle","imperial"])&&this.resetScaleLines(this.container)}},{key:"updateScales",value:function(e){var t=this.controlOption,n=t.metric,r=t.imperial;n&&e&&this.updateMetric(e),r&&e&&this.updateImperial(e)}},{key:"resetScaleLines",value:function(e){r.clearChildren(e);var t=this.controlOption,n=t.metric,i=t.imperial,o=t.maxWidth,a=t.lockWidth;a&&r.addStyle(e,"width: ".concat(o,"px")),n&&(this.mScale=r.create("div","l7-control-scale-line",e)),i&&(this.iScale=r.create("div","l7-control-scale-line",e)),this.update()}},{key:"updateScale",value:function(e,t,n){var r=this.controlOption.maxWidth;e.style.width=Math.round(r*n)+"px",e.innerHTML=t}},{key:"getRoundNum",value:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,t*n}},{key:"updateMetric",value:function(e){var t=this.getRoundNum(e),n=t<1e3?t+" m":t/1e3+" km";this.updateScale(this.mScale,n,t/e)}},{key:"updateImperial",value:function(e){var t,n,r,i=3.2808399*e;i>5280?(t=i/5280,n=this.getRoundNum(t),this.updateScale(this.iScale,n+" mi",n/t)):(r=this.getRoundNum(i),this.updateScale(this.iScale,r+" ft",r/i))}}]),n}(qb);function V_(e){var t=H_();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function H_(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var G_=function(e){Object(et["a"])(n,e);var t=V_(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"zoomIn",(function(){!e.disabled&&e.mapsService.getZoom()<e.mapsService.getMaxZoom()&&e.mapsService.zoomIn()})),Object(Ge["a"])(Object(gt["a"])(e),"zoomOut",(function(){!e.disabled&&e.mapsService.getZoom()>e.mapsService.getMinZoom()&&e.mapsService.zoomOut()})),Object(Ge["a"])(Object(gt["a"])(e),"updateDisabled",(function(){var t=e.mapsService;e.zoomInButton.removeAttribute("disabled"),e.zoomOutButton.removeAttribute("disabled"),(e.disabled||t.getZoom()<=t.getMinZoom())&&e.zoomOutButton.setAttribute("disabled","true"),(e.disabled||t.getZoom()>=t.getMaxZoom())&&e.zoomInButton.setAttribute("disabled","true")})),e}return Object(He["a"])(n,[{key:"getDefault",value:function(e){return Object(N["a"])(Object(N["a"])({},mm(Object(nt["a"])(n.prototype),"getDefault",this).call(this,e)),{},{position:eh.BOTTOMRIGHT,name:"zoom",zoomInText:s_("l7-icon-enlarge"),zoomInTitle:"Zoom in",zoomOutText:s_("l7-icon-narrow"),zoomOutTitle:"Zoom out"})}},{key:"setOptions",value:function(e){mm(Object(nt["a"])(n.prototype),"setOptions",this).call(this,e),this.checkUpdateOption(e,["zoomInText","zoomInTitle","zoomOutText","zoomOutTitle"])&&this.resetButtonGroup(this.container)}},{key:"onAdd",value:function(){var e=r.create("div","l7-control-zoom");return this.resetButtonGroup(e),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),e}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"resetButtonGroup",value:function(e){r.clearChildren(e),this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,"l7-button-control",e,this.zoomIn),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,"l7-button-control",e,this.zoomOut),this.updateDisabled()}},{key:"createButton",value:function(e,t,n,i,o){var a=r.create("button",n,i);return"string"===typeof e?a.innerHTML=e:a.append(e),a.title=t,a.addEventListener("click",o),a}}]),n}(qb);function W_(e){var t=q_();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function q_(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Z_=function(e){Object(et["a"])(n,e);var t=W_(n);function n(e){var i;Object(Ve["a"])(this,n),i=t.call(this),Object(Ge["a"])(Object(gt["a"])(i),"isShow",!0),Object(Ge["a"])(Object(gt["a"])(i),"onMouseMove",(function(e){var t,n=i.mapsService.getMapContainer(),r=null!==(t=null===n||void 0===n?void 0:n.getBoundingClientRect())&&void 0!==t?t:{},o=r.left,a=void 0===o?0:o,s=r.top,u=void 0===s?0:s;i.setPopupPosition(e.clientX-a,e.clientY-u)})),Object(Ge["a"])(Object(gt["a"])(i),"updateLngLatPosition",(function(){if(i.mapsService&&!i.popupOption.followCursor){var e=i.lngLat,t=e.lng,n=e.lat,r=i.mapsService.lngLatToContainer([t,n]),o=r.x,a=r.y;i.setPopupPosition(o,a)}})),Object(Ge["a"])(Object(gt["a"])(i),"onKeyDown",(function(e){27===e.keyCode&&i.remove()})),Object(Ge["a"])(Object(gt["a"])(i),"onCloseButtonClick",(function(e){e.stopPropagation&&e.stopPropagation(),i.hide()})),Object(Ge["a"])(Object(gt["a"])(i),"update",(function(){var e=!!i.lngLat,t=i.popupOption,n=t.className,o=t.style,a=t.maxWidth,s=t.anchor,u=t.stopPropagation;if(i.mapsService&&e&&i.content){var c=i.mapsService.getMarkerContainer();if(!i.container&&c&&(i.container=r.create("div","l7-popup ".concat(null!==n&&void 0!==n?n:""," ").concat(i.isShow?"":"l7-popup-hide"),c),o&&i.container.setAttribute("style",o),i.tip=r.create("div","l7-popup-tip",i.container),i.container.appendChild(i.content),u&&["mousemove","mousedown","mouseup","click","dblclick"].forEach((function(e){i.container.addEventListener(e,(function(e){e.stopPropagation()}))})),i.container.style.whiteSpace="nowrap"),i.updateLngLatPosition(),r.setTransform(i.container,"".concat(Tr[s])),Mr(i.container,s,"popup"),a){var l=i.container.getBoundingClientRect(),f=l.width;f>parseFloat(a)&&(i.container.style.width=a)}else i.container.style.removeProperty("width")}})),i.popupOption=Object(N["a"])(Object(N["a"])({},i.getDefault(null!==e&&void 0!==e?e:{})),e);var o=i.popupOption.lngLat;return o&&(i.lngLat=o),i}return Object(He["a"])(n,[{key:"lngLat",get:function(){var e;return null!==(e=this.popupOption.lngLat)&&void 0!==e?e:{lng:0,lat:0}},set:function(e){this.popupOption.lngLat=e}},{key:"getIsShow",value:function(){return this.isShow}},{key:"addTo",value:function(e){this.mapsService=e.get(vp.IMapService),this.sceneService=e.get(vp.ISceneService),this.layerService=e.get(vp.ILayerService),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=e,this.update(),this.updateCloseOnClick(),this.updateCloseOnEsc(),this.updateFollowCursor();var t=this.popupOption,n=t.html,r=t.text,i=t.title;return n?this.setHTML(n):r&&this.setText(r),i&&this.setTitle(i),this.emit("open"),this}},{key:"remove",value:function(){if(null!==this&&void 0!==this&&this.isOpen())return this.content&&r.remove(this.content),this.container&&(r.remove(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.updateCloseOnClick(!0),this.updateCloseOnEsc(!0),this.updateFollowCursor(!0),delete this.mapsService),this.emit("close"),this}},{key:"getOptions",value:function(){return this.popupOption}},{key:"setOptions",value:function(e){return this.show(),this.popupOption=Object(N["a"])(Object(N["a"])({},this.popupOption),e),this.checkUpdateOption(e,["html","text","title","closeButton","closeButtonOffsets","maxWidth","anchor","stopPropagation","className","style","lngLat","offsets"])&&(this.container&&(r.remove(this.container),this.container=void 0),this.popupOption.html?this.setHTML(this.popupOption.html):this.popupOption.text&&this.setText(this.popupOption.text),this.popupOption.title&&this.setTitle(this.popupOption.title)),this.checkUpdateOption(e,["closeOnEsc"])&&this.updateCloseOnEsc(),this.checkUpdateOption(e,["closeOnClick"])&&this.updateCloseOnClick(),this.checkUpdateOption(e,["followCursor"])&&this.updateFollowCursor(),this.checkUpdateOption(e,["html"])&&e.html?this.setHTML(e.html):this.checkUpdateOption(e,["text"])&&e.text&&this.setText(e.text),this.checkUpdateOption(e,["lngLat"])&&e.lngLat&&this.setLnglat(e.lngLat),this}},{key:"open",value:function(){return this.addTo(this.scene),this}},{key:"close",value:function(){return this.remove(),this}},{key:"show",value:function(){if(!this.isShow)return this.container&&r.removeClass(this.container,"l7-popup-hide"),this.isShow=!0,this.emit("show"),this}},{key:"hide",value:function(){if(this.isShow)return this.container&&r.addClass(this.container,"l7-popup-hide"),this.isShow=!1,this.emit("hide"),this}},{key:"setHTML",value:function(e){return this.popupOption.html=e,this.setDOMContent(e)}},{key:"setText",value:function(e){return this.popupOption.text=e,this.setDOMContent(window.document.createTextNode(e))}},{key:"setTitle",value:function(e){this.show(),this.popupOption.title=e,e?(this.contentTitle||(this.contentTitle=r.create("div","l7-popup-content__title"),this.content.firstChild?this.content.insertBefore(this.contentTitle,this.content.firstChild):this.content.append(this.contentTitle)),r.clearChildren(this.contentTitle),r.appendElementType(this.contentTitle,e)):this.contentTitle&&(r.remove(this.contentTitle),this.contentTitle=void 0)}},{key:"panToPopup",value:function(){var e=this.lngLat,t=e.lng,n=e.lat;return this.popupOption.autoPan&&this.mapsService.panTo([t,n]),this}},{key:"setLngLat",value:function(e){return this.setLnglat(e)}},{key:"setLnglat",value:function(e){var t=this;return this.show(),this.lngLat=e,Array.isArray(e)&&(this.lngLat={lng:e[0],lat:e[1]}),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this.popupOption.autoPan&&setTimeout((function(){t.panToPopup()}),0),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"setMaxWidth",value:function(e){return this.popupOption.maxWidth=e,this.update(),this}},{key:"isOpen",value:function(){return!!this.mapsService}},{key:"getDefault",value:function(e){return{closeButton:!0,closeOnClick:!1,maxWidth:"240px",offsets:[0,0],anchor:Cr.BOTTOM,stopPropagation:!0,autoPan:!1,autoClose:!0,closeOnEsc:!1,followCursor:!1}}},{key:"setDOMContent",value:function(e){return this.show(),this.createContent(),r.appendElementType(this.contentPanel,e),this.update(),this}},{key:"updateCloseOnClick",value:function(e){var t=this,n=this.mapsService;n&&(null===n||void 0===n||n.off("click",this.onCloseButtonClick),this.popupOption.closeOnClick&&!e&&requestAnimationFrame((function(){null===n||void 0===n||n.on("click",t.onCloseButtonClick)})))}},{key:"updateCloseOnEsc",value:function(e){window.removeEventListener("keydown",this.onKeyDown),this.popupOption.closeOnEsc&&!e&&window.addEventListener("keydown",this.onKeyDown)}},{key:"updateFollowCursor",value:function(e){var t,n=null===(t=this.mapsService)||void 0===t?void 0:t.getContainer();n&&(null===n||void 0===n||n.removeEventListener("mousemove",this.onMouseMove),this.popupOption.followCursor&&!e&&(null===n||void 0===n||n.addEventListener("mousemove",this.onMouseMove)))}},{key:"createContent",value:function(){var e=this;if(this.content&&r.remove(this.content),this.contentTitle=void 0,this.content=r.create("div","l7-popup-content",this.container),this.setTitle(this.popupOption.title),this.popupOption.closeButton){var t=s_("l7-icon-guanbi");r.addClass(t,"l7-popup-close-button"),this.content.appendChild(t),this.popupOption.closeButtonOffsets&&(t.style.right=this.popupOption.closeButtonOffsets[0]+"px",t.style.top=this.popupOption.closeButtonOffsets[1]+"px"),t.setAttribute("aria-label","Close popup"),t.addEventListener("click",(function(){e.hide()})),this.closeButton=t}else this.closeButton=void 0;this.contentPanel=r.create("div","l7-popup-content__panel",this.content)}},{key:"setPopupPosition",value:function(e,t){if(this.container){var n=this.popupOption.offsets;this.container.style.left=e+n[0]+"px",this.container.style.top=t-n[1]+"px"}}},{key:"checkUpdateOption",value:function(e,t){return t.some((function(t){return t in e}))}}]),n}(Fo["EventEmitter"]);var Y_;function X_(e,t){var n="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,r="undefined"!==typeof wx&&null!==wx&&("undefined"!==typeof wx.request||"undefined"!==typeof wx.miniProgram);if(!n&&!r&&(t||(t=document),t)){var i=t.head||t.getElementsByTagName("head")[0];if(!i){i=t.createElement("head");var o=t.body||t.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(i,o):t.documentElement.appendChild(i)}var a=t.createElement("style");return a.type="text/css",a.styleSheet?a.styleSheet.cssText=e:a.appendChild(t.createTextNode(e)),i.appendChild(a),a}}X_(".l7-marker-container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n.l7-marker {\n  position: absolute !important;\n  top: 0;\n  left: 0;\n  z-index: 5;\n  cursor: pointer;\n}\n.l7-marker-cluster {\n  width: 40px;\n  height: 40px;\n  background-color: rgba(181, 226, 140, 0.6);\n  background-clip: padding-box;\n  border-radius: 20px;\n}\n.l7-marker-cluster div {\n  width: 30px;\n  height: 30px;\n  margin-top: 5px;\n  margin-left: 5px;\n  font: 12px 'Helvetica Neue', Arial, Helvetica, sans-serif;\n  text-align: center;\n  background-color: rgba(110, 204, 57, 0.6);\n  border-radius: 15px;\n}\n.l7-marker-cluster span {\n  line-height: 30px;\n}\n.l7-touch .l7-control-attribution,\n.l7-touch .l7-control-layers,\n.l7-touch .l7-bar {\n  -webkit-box-shadow: none;\n          box-shadow: none;\n}\n.l7-touch .l7-control-layers,\n.l7-touch .l7-bar {\n  background-clip: padding-box;\n  border: 2px solid rgba(0, 0, 0, 0.2);\n}\n.mapboxgl-ctrl-logo,\n.amap-logo {\n  display: none !important;\n}\n.l7-select-box {\n  border: 3px dashed gray;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 1000;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.l7-control-container {\n  font: 12px/1.5 'Helvetica Neue', Arial, Helvetica, sans-serif;\n}\n.l7-control-container .l7-control {\n  position: relative;\n  z-index: 800;\n  float: left;\n  clear: both;\n  color: #595959;\n  font-size: 12px;\n  pointer-events: visiblePainted;\n  /* IE 9-10 doesn't have auto */\n  pointer-events: auto;\n}\n.l7-control-container .l7-control.l7-control--hide {\n  display: none;\n}\n.l7-control-container .l7-top {\n  top: 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  position: absolute;\n  z-index: 1000;\n  pointer-events: none;\n}\n.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {\n  margin-top: 8px;\n}\n.l7-control-container .l7-right {\n  right: 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  position: absolute;\n  z-index: 1000;\n  pointer-events: none;\n}\n.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {\n  margin-right: 8px;\n}\n.l7-control-container .l7-bottom {\n  bottom: 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  position: absolute;\n  z-index: 1000;\n  pointer-events: none;\n}\n.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {\n  margin-bottom: 8px;\n}\n.l7-control-container .l7-left {\n  left: 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  position: absolute;\n  z-index: 1000;\n  pointer-events: none;\n}\n.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {\n  margin-left: 8px;\n}\n.l7-control-container .l7-center {\n  position: absolute;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.l7-control-container .l7-center.l7-top,\n.l7-control-container .l7-center.l7-bottom {\n  width: 100%;\n}\n.l7-control-container .l7-center.l7-left,\n.l7-control-container .l7-center.l7-right {\n  height: 100%;\n}\n.l7-control-container .l7-center .l7-control {\n  margin-right: 8px;\n  margin-bottom: 8px;\n}\n.l7-control-container .l7-row {\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n}\n.l7-control-container .l7-row.l7-top {\n  -webkit-box-align: start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n}\n.l7-control-container .l7-row.l7-bottom {\n  -webkit-box-align: end;\n      -ms-flex-align: end;\n          align-items: flex-end;\n}\n.l7-control-container .l7-column {\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.l7-control-container .l7-column.l7-left {\n  -webkit-box-align: start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n}\n.l7-control-container .l7-column.l7-right {\n  -webkit-box-align: end;\n      -ms-flex-align: end;\n          align-items: flex-end;\n}\n.l7-button-control {\n  min-width: 28px;\n  height: 28px;\n  background-color: #fff;\n  border-width: 0;\n  border-radius: 2px;\n  outline: 0;\n  cursor: pointer;\n  -webkit-transition: all 0.2s;\n  transition: all 0.2s;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  padding: 0 6px;\n  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n  line-height: 16px;\n}\n.l7-button-control .l7-iconfont {\n  fill: #595959;\n  color: #595959;\n  width: 16px;\n  height: 16px;\n}\n.l7-button-control.l7-button-control--row {\n  padding: 0 16px 0 13px;\n}\n.l7-button-control.l7-button-control--row * + .l7-button-control__text {\n  margin-left: 8px;\n}\n.l7-button-control.l7-button-control--column {\n  height: 44px;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.l7-button-control.l7-button-control--column .l7-iconfont {\n  margin-top: 3px;\n}\n.l7-button-control.l7-button-control--column .l7-button-control__text {\n  margin-top: 3px;\n  font-size: 10px;\n  -webkit-transform: scale(0.83333);\n          transform: scale(0.83333);\n}\n.l7-button-control:not(:disabled):hover {\n  background-color: #f3f3f3;\n}\n.l7-button-control:not(:disabled):active {\n  background-color: #f3f3f3;\n}\n.l7-button-control:disabled {\n  background-color: #fafafa;\n  color: #bdbdbd;\n  cursor: not-allowed;\n}\n.l7-button-control:disabled .l7-iconfont {\n  fill: #bdbdbd;\n  color: #bdbdbd;\n}\n.l7-button-control:disabled:hover {\n  background-color: #fafafa;\n}\n.l7-button-control:disabled:active {\n  background-color: #fafafa;\n}\n.l7-popper {\n  position: absolute;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  z-index: 5;\n  color: #595959;\n}\n.l7-popper.l7-popper-hide {\n  display: none;\n}\n.l7-popper .l7-popper-content {\n  min-height: 28px;\n  background: #fff;\n  border-radius: 2px;\n  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n}\n.l7-popper .l7-popper-arrow {\n  width: 0;\n  height: 0;\n  border-width: 4px;\n  border-style: solid;\n  border-top-color: transparent;\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-right-color: transparent;\n  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n}\n.l7-popper.l7-popper-left {\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n}\n.l7-popper.l7-popper-left .l7-popper-arrow {\n  border-left-color: #fff;\n  margin: 10px 0;\n}\n.l7-popper.l7-popper-right {\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: reverse;\n      -ms-flex-direction: row-reverse;\n          flex-direction: row-reverse;\n}\n.l7-popper.l7-popper-right .l7-popper-arrow {\n  border-right-color: #fff;\n  margin: 10px 0;\n}\n.l7-popper.l7-popper-top {\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.l7-popper.l7-popper-top .l7-popper-arrow {\n  border-top-color: #fff;\n  margin: 0 10px;\n}\n.l7-popper.l7-popper-bottom {\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: reverse;\n      -ms-flex-direction: column-reverse;\n          flex-direction: column-reverse;\n}\n.l7-popper.l7-popper-bottom .l7-popper-arrow {\n  border-bottom-color: #fff;\n  margin: 0 10px;\n}\n.l7-popper.l7-popper-start {\n  -webkit-box-align: start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n}\n.l7-popper.l7-popper-end {\n  -webkit-box-align: end;\n      -ms-flex-align: end;\n          align-items: flex-end;\n}\n.l7-select-control--normal {\n  padding: 4px 0;\n}\n.l7-select-control--normal .l7-select-control-item {\n  height: 24px;\n  line-height: 24px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  padding: 0 16px;\n  font-size: 12px;\n}\n.l7-select-control--normal .l7-select-control-item > * + * {\n  margin-left: 6px;\n}\n.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {\n  height: 14px;\n  width: 14px;\n}\n.l7-select-control--normal .l7-select-control-item:hover {\n  background-color: #f3f3f3;\n}\n.l7-select-control--image {\n  padding: 12px 12px 0 12px;\n  width: 474px;\n  height: 320px;\n  overflow: auto;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  -webkit-box-align: start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n}\n.l7-select-control--image .l7-select-control-item {\n  margin-right: 12px;\n  border-radius: 2px;\n  overflow: hidden;\n  border: 1px solid #fff;\n  -webkit-box-sizing: content-box;\n          box-sizing: content-box;\n  width: calc((100% - 36px) / 3);\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  margin-bottom: 12px;\n  position: relative;\n  font-size: 12px;\n}\n.l7-select-control--image .l7-select-control-item img {\n  width: 142px;\n  height: 80px;\n}\n.l7-select-control--image .l7-select-control-item input[type='checkbox'] {\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  line-height: 26px;\n}\n.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {\n  margin-left: 8px;\n}\n.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {\n  border-color: #0370fe;\n}\n.l7-select-control--image .l7-select-control-item:nth-child(3n) {\n  margin-right: 0;\n}\n.l7-select-control-item {\n  cursor: pointer;\n}\n.l7-select-control-item input[type='checkbox'] {\n  margin: 0;\n  cursor: pointer;\n}\n.l7-select-control--multiple .l7-select-control-item:hover {\n  background-color: transparent;\n}\n.l7-control-logo {\n  width: 89px;\n  height: 16px;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.l7-control-logo img {\n  height: 100%;\n  width: 100%;\n}\n.l7-control-logo .l7-control-logo-link {\n  display: block;\n  cursor: pointer;\n}\n.l7-control-logo .l7-control-logo-link img {\n  cursor: pointer;\n}\n.l7-control-mouse-location {\n  background-color: #fff;\n  border-radius: 2px;\n  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n  padding: 2px 4px;\n  min-width: 130px;\n}\n.l7-control-zoom {\n  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n  border-radius: 2px;\n  overflow: hidden;\n}\n.l7-control-zoom .l7-button-control {\n  -webkit-box-shadow: 0 0 0;\n          box-shadow: 0 0 0;\n  border-radius: 0;\n  font-size: 16px;\n}\n.l7-control-zoom .l7-button-control .l7-iconfont {\n  width: 14px;\n  height: 14px;\n}\n.l7-control-zoom .l7-button-control:first-child {\n  border-bottom: 1px solid #f0f0f0;\n}\n.l7-control-scale {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.l7-control-scale .l7-control-scale-line {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  padding: 2px 5px 1px;\n  overflow: hidden;\n  color: #595959;\n  font-size: 10px;\n  line-height: 1.1;\n  white-space: nowrap;\n  background: #fff;\n  border: 2px solid #000;\n  border-top: 0;\n  -webkit-transition: width 0.1s;\n  transition: width 0.1s;\n}\n.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {\n  margin-top: -2px;\n  border-top: 2px solid #777;\n  border-bottom: none;\n}\n.l7-right .l7-control-scale {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: end;\n      -ms-flex-align: end;\n          align-items: flex-end;\n}\n.l7-right .l7-control-scale .l7-control-scale-line {\n  text-align: right;\n}\n.l7-popup {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 5;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  will-change: transform;\n  pointer-events: none;\n}\n.l7-popup.l7-popup-hide {\n  display: none;\n}\n.l7-popup .l7-popup-content {\n  position: relative;\n  padding: 16px;\n  font-size: 14px;\n  background: #fff;\n  border-radius: 3px;\n  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n.l7-popup .l7-popup-content .l7-popup-content__title {\n  margin-bottom: 8px;\n  font-weight: bold;\n}\n.l7-popup .l7-popup-content .l7-popup-close-button,\n.l7-popup .l7-popup-content .l7-popup-content__title,\n.l7-popup .l7-popup-content .l7-popup-content__panel {\n  white-space: normal;\n  -webkit-user-select: text;\n     -moz-user-select: text;\n      -ms-user-select: text;\n          user-select: text;\n  pointer-events: initial;\n}\n.l7-popup .l7-popup-content .l7-popup-close-button {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 18px;\n  height: 18px;\n  padding: 0;\n  font-size: 14px;\n  line-height: 18px;\n  text-align: center;\n  background-color: transparent;\n  border: 0;\n  border-radius: 0 3px 0 0;\n  cursor: pointer;\n}\n.l7-popup .l7-popup-tip {\n  position: relative;\n  z-index: 1;\n  width: 0;\n  height: 0;\n  border: 10px solid transparent;\n}\n.l7-popup.l7-popup-anchor-bottom,\n.l7-popup.l7-popup-anchor-bottom-left,\n.l7-popup.l7-popup-anchor-bottom-right {\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: reverse;\n      -ms-flex-direction: column-reverse;\n          flex-direction: column-reverse;\n}\n.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,\n.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,\n.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {\n  bottom: 1px;\n}\n.l7-popup.l7-popup-anchor-top,\n.l7-popup.l7-popup-anchor-top-left,\n.l7-popup.l7-popup-anchor-top-right {\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.l7-popup.l7-popup-anchor-top .l7-popup-tip,\n.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,\n.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {\n  top: 1px;\n}\n.l7-popup.l7-popup-anchor-left {\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n}\n.l7-popup.l7-popup-anchor-right {\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: reverse;\n      -ms-flex-direction: row-reverse;\n          flex-direction: row-reverse;\n}\n.l7-popup-anchor-top .l7-popup-tip {\n  position: relative;\n  -webkit-align-self: center;\n  -ms-flex-item-align: center;\n      align-self: center;\n  border-top: none;\n  border-bottom-color: #fff;\n}\n.l7-popup-anchor-top-left .l7-popup-tip {\n  -webkit-align-self: flex-start;\n  -ms-flex-item-align: start;\n      align-self: flex-start;\n  border-top: none;\n  border-bottom-color: #fff;\n  border-left: none;\n}\n.l7-popup-anchor-top-right .l7-popup-tip {\n  -webkit-align-self: flex-end;\n  -ms-flex-item-align: end;\n      align-self: flex-end;\n  border-top: none;\n  border-right: none;\n  border-bottom-color: #fff;\n}\n.l7-popup-anchor-bottom .l7-popup-tip {\n  -webkit-align-self: center;\n  -ms-flex-item-align: center;\n      align-self: center;\n  border-top-color: #fff;\n  border-bottom: none;\n}\n.l7-popup-anchor-bottom-left .l7-popup-tip {\n  -webkit-align-self: flex-start;\n  -ms-flex-item-align: start;\n      align-self: flex-start;\n  border-top-color: #fff;\n  border-bottom: none;\n  border-left: none;\n}\n.l7-popup-anchor-bottom-right .l7-popup-tip {\n  -webkit-align-self: flex-end;\n  -ms-flex-item-align: end;\n      align-self: flex-end;\n  border-top-color: #fff;\n  border-right: none;\n  border-bottom: none;\n}\n.l7-popup-anchor-left .l7-popup-tip {\n  -webkit-align-self: center;\n  -ms-flex-item-align: center;\n      align-self: center;\n  border-right-color: #fff;\n  border-left: none;\n}\n.l7-popup-anchor-right .l7-popup-tip {\n  right: 1px;\n  -webkit-align-self: center;\n  -ms-flex-item-align: center;\n      align-self: center;\n  border-right: none;\n  border-left-color: #fff;\n}\n.l7-popup-anchor-top-left .l7-popup-content {\n  border-top-left-radius: 0;\n}\n.l7-popup-anchor-top-right .l7-popup-content {\n  border-top-right-radius: 0;\n}\n.l7-popup-anchor-bottom-left .l7-popup-content {\n  border-bottom-left-radius: 0;\n}\n.l7-popup-anchor-bottom-right .l7-popup-content {\n  border-bottom-right-radius: 0;\n}\n.l7-popup-track-pointer {\n  display: none;\n}\n.l7-popup-track-pointer * {\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  pointer-events: none;\n}\n.l7-map:hover .l7-popup-track-pointer {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.l7-map:active .l7-popup-track-pointer {\n  display: none;\n}\n.l7-layer-popup__row {\n  font-size: 12px;\n}\n.l7-layer-popup__row + .l7-layer-popup__row {\n  margin-top: 4px;\n}\n");var K_=(Y_={},Object(Ge["a"])(Y_,vh.additive,{enable:!0,func:{srcRGB:ad.ONE,dstRGB:ad.ONE,srcAlpha:1,dstAlpha:1}}),Object(Ge["a"])(Y_,vh.none,{enable:!1}),Object(Ge["a"])(Y_,vh.normal,{enable:!0,func:{srcRGB:ad.SRC_ALPHA,dstRGB:ad.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),Object(Ge["a"])(Y_,vh.subtractive,{enable:!0,func:{srcRGB:ad.ONE,dstRGB:ad.ONE,srcAlpha:ad.ZERO,dstAlpha:ad.ONE_MINUS_SRC_COLOR},equation:{rgb:ad.FUNC_SUBTRACT,alpha:ad.FUNC_SUBTRACT}}),Object(Ge["a"])(Y_,vh.max,{enable:!0,func:{srcRGB:ad.ONE,dstRGB:ad.ONE},equation:{rgb:ad.MAX_EXT}}),Object(Ge["a"])(Y_,vh.min,{enable:!0,func:{srcRGB:ad.ONE,dstRGB:ad.ONE},equation:{rgb:ad.MIN_EXT}}),Y_);function $_(e,t,n,r,i){t.updateStyleAttribute(e,n,r,i)}function Q_(e,t){t.tileLayer||t.isTileLayer||(e.opacity&&J_("opacity",t,e.opacity),e.strokeWidth&&J_("strokeWidth",t,e.strokeWidth),e.strokeOpacity&&J_("strokeOpacity",t,e.strokeOpacity),e.stroke&&tx("stroke",t,e.stroke),e.offsets&&ex("offsets",t,e.offsets),e.textOffset&&ex("textOffset",t,e.textOffset),e.thetaOffset&&J_("thetaOffset",t,e.thetaOffset))}function J_(e,t,n){Object(Ei["isString"])(n)?$_(e,t,n,(function(e){return e})):Object(Ei["isNumber"])(n)||(Array.isArray(n)&&2===n.length&&(Object(Ei["isString"])(n[0])&&Object(Ei["isFunction"])(n[1])||Object(Ei["isString"])(n[0])&&Array.isArray(n[1])&&Object(Ei["isNumber"])(n[1][0])&&Object(Ei["isNumber"])(n[1][1]))?$_(e,t,n[0],n[1]):$_(e,t,[1],void 0))}function ex(e,t,n){Object(Ei["isString"])(n)?$_(e,t,n,(function(e){return e})):Array.isArray(n)&&2===n.length&&Object(Ei["isString"])(n[0])&&Object(Ei["isFunction"])(n[1])?$_(e,t,n[0],n[1]):Array.isArray(n)&&2===n.length&&Object(Ei["isNumber"])(n[0])&&Object(Ei["isNumber"])(n[1])?$_(e,t,n,void 0):$_(e,t,[0,0],void 0)}function tx(e,t,n){Object(Ei["isString"])(n)||(Array.isArray(n)&&2===n.length&&(Object(Ei["isString"])(n[0])&&Object(Ei["isFunction"])(n[1])||Object(Ei["isString"])(n[0])&&Array.isArray(n[1])&&n[1].length>0)?$_(e,t,n[0],n[1]):$_(e,t,"#fff",void 0))}var nx=function(e){return e["GAODE1.x"]="GAODE1.x",e["GAODE2.x"]="GAODE2.x",e["MAPBOX"]="MAPBOX",e["DEFUALT"]="DEFUALTMAP",e["SIMPLE"]="SIMPLE",e["GLOBEL"]="GLOBEL",e}({});function rx(e,t){var n=[t[0]-e[0],t[1]-e[1]],r=xo(n),i=[e[0]+1e-4*r[0],e[1]+1e-4*r[1]];return i}function ix(e,t,n){if(e.length>0&&t.version===nx["GAODE2.x"]){var r=n.coordCenter;"number"===typeof e[0].coordinates[0]?e.filter((function(e){return!e.originCoordinates})).map((function(e){e.version=nx["GAODE2.x"],e.originCoordinates=Object(Ei["cloneDeep"])(e.coordinates),e.coordinates=t.lngLatToCoordByLayer(e.coordinates,r)})):e.filter((function(e){return!e.originCoordinates})).map((function(e){e.version=nx["GAODE2.x"],e.originCoordinates=Object(Ei["cloneDeep"])(e.coordinates),e.coordinates=t.lngLatToCoordsByLayer(e.coordinates,r)}))}}function ox(e,t){e.length>0&&t.version===nx.SIMPLE&&e.map((function(e){e.simpleCoordinate||(e.coordinates=ax(e.coordinates,t),e.simpleCoordinate=!0)}))}function ax(e,t){if("number"===typeof e[0])return t.simpleMapCoord.unproject(e);if(e[0]&&e[0][0]instanceof Array){var n=[];return e.map((function(e){var r=[];e.map((function(e){r.push(t.simpleMapCoord.unproject(e))})),n.push(r)})),n}var r=[];return e.map((function(e){r.push(t.simpleMapCoord.unproject(e))})),r}function sx(e,t){var n;if(!e.scale)return[];var r=(null===e||void 0===e||null===(n=e.scale)||void 0===n?void 0:n.scalers)||[],i=[];r.forEach((function(n){var r,o=n.field;(t.hasOwnProperty(o)||"variable"===(null===(r=e.scale)||void 0===r?void 0:r.type))&&i.push(t[o])}));var o=e.mapping?e.mapping(i):[];return o}function ux(e,t,n,r,i){var o=null===i||void 0===i?void 0:i.getLayerConfig(),a=o.arrow,s=void 0===a?{enable:!1}:a,u=t.map((function(t){var r={id:t._id,coordinates:t.coordinates};if(e.filter((function(e){return void 0!==e.scale})).forEach((function(e){var i=sx(e,t);e.needRemapping=!1,"color"===e.name&&(i=i.map((function(e){return fi(e)}))),r[e.name]=Array.isArray(i)&&1===i.length?i[0]:i,"shape"===e.name&&(r.shape=n.getIconFontKey(r[e.name]))})),"line"===r.shape&&s.enable){var i=r.coordinates,o=rx(i[0],i[1]);r.coordinates.splice(1,0,o,o)}return r}));return ix(u,r,i),ox(u,r),u}function cx(e,t,n,r,i,o){var a=new Fb(i,o),s=r.getLayerStyleAttributes()||[],u=a.data.dataArray,c=u,l=ux(s,c,t,n,e);return a.destroy(),l}function lx(e){return e.map((function(e){return"string"===typeof e&&(e=[e,{}]),e}))}function fx(e,t,n,r){var i=e.multiPassRenderer,o=e.getLayerConfig(),a=o.enableTAA;return a?i.add(r("taa")):i.add(r("render")),lx(t).forEach((function(e){var t=Object(Oi["a"])(e,2),r=t[0],o=t[1];i.add(n(r),o)})),i.add(n("copy")),i}var px,hx,dx,vx=function(){function e(t){Object(Ve["a"])(this,e),this.layer=t}return Object(He["a"])(e,[{key:"pickRender",value:function(e){var t=this.layer.getContainer(),n=t.get(vp.ILayerService),r=this.layer;if(r.tileLayer)return r.tileLayer.pickRender(e);r.hooks.beforePickingEncode.call(),n.renderTileLayerMask(r),r.renderModels({ispick:!0}),r.hooks.afterPickingEncode.call()}},{key:"pick",value:function(e,t){var n=this.layer.getContainer(),r=n.get(vp.IPickingService);return"RasterLayer"===e.type?this.pickRasterLayer(e,t):(this.pickRender(t),r.pickFromPickingFBO(e,t))}},{key:"pickRasterLayer",value:function(e,t,n){var r=this.layer.getContainer(),i=r.get(vp.IPickingService),o=r.get(vp.IMapService),a=this.layer.getSource().extent,s=so(t.lngLat,a),u={x:t.x,y:t.y,type:t.type,lngLat:t.lngLat,target:t,rasterValue:null},c=n||e;if(s){var l=this.readRasterValue(e,a,o,t.x,t.y);return u.rasterValue=l,i.triggerHoverOnLayer(c,u),!0}return u.type="mousemove"===t.type?"mouseout":"un"+t.type,i.triggerHoverOnLayer(c,Object(N["a"])(Object(N["a"])({},u),{},{type:"unpick"})),i.triggerHoverOnLayer(c,u),!1}},{key:"readRasterValue",value:function(e,t,n,r,i){var o=e.getSource().data.dataArray[0],a=Object(Oi["a"])(t,4),s=a[0],u=void 0===s?0:s,c=a[1],l=void 0===c?0:c,f=a[2],p=void 0===f?10:f,h=a[3],d=void 0===h?-10:h,v=n.lngLatToContainer([u,l]),m=n.lngLatToContainer([p,d]),g=m.x-v.x,y=v.y-m.y,b=[(r-v.x)/g,(i-m.y)/y],_=o.width||1,x=o.height||1,w=Math.floor(b[0]*_),O=Math.floor(b[1]*x),E=Math.max(0,O-1)*_+w,S=o.data[E];return S}},{key:"selectFeature",value:function(e){var t=this.layer,n=Object(Oi["a"])(e,3),r=n[0],i=n[1],o=n[2];t.hooks.beforeSelect.call([r,i,o])}},{key:"highlightPickedFeature",value:function(e){var t=Object(Oi["a"])(e,3),n=t[0],r=t[1],i=t[2];this.layer.hooks.beforeHighlight.call([n,r,i])}},{key:"getFeatureById",value:function(e){return this.layer.getSource().getFeatureById(e)}}]),e}(),mx=function(){function e(t){Object(Ve["a"])(this,e),this.layer=t;var n=this.layer.getContainer();this.rendererService=n.get(vp.IRendererService)}return Object(He["a"])(e,[{key:"getColorTexture",value:function(e,t){var n=this.getTextureKey(e,t);return this.key===n||(this.createColorTexture(e,t),this.key=n),this.colorTexture}},{key:"createColorTexture",value:function(e,t){var n=this.rendererService.createTexture2D,r=this.getColorRampBar(e,t),i=n({data:new Uint8Array(r.data),width:r.width,height:r.height,flipY:!1});return this.colorTexture=i,i}},{key:"setColorTexture",value:function(e,t,n){this.key=this.getTextureKey(t,n),this.colorTexture=e}},{key:"destroy",value:function(){var e;null===(e=this.colorTexture)||void 0===e||e.destroy()}},{key:"getColorRampBar",value:function(e,t){switch(e.type){case"cat":return mi(e);case"quantize":return gi(e);case"custom":return yi(e,t);case"linear":return vi(e,t);default:return di(e)}}},{key:"getTextureKey",value:function(e,t){var n;return"".concat(e.colors.join("_"),"_").concat(null===e||void 0===e||null===(n=e.positions)||void 0===n?void 0:n.join("_"),"_").concat(e.type,"_").concat(null===t||void 0===t?void 0:t.join("_"))}}]),e}(),gx=["passes"],yx=["moduleName","vertexShader","fragmentShader","triangulation","segmentNumber","workerEnabled","workerOptions"];function bx(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_x(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function _x(e,t){if(e){if("string"===typeof e)return xx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xx(e,t):void 0}}function xx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ox(e){var t=Ex();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Ex(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Sx,jx,Ax,kx=0,Cx=(px=Ay(vp.IGlobalConfigService),hx=function(e){Object(et["a"])(n,e);var t=Ox(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(Ve["a"])(this,n),e=t.call(this),Object(Ge["a"])(Object(gt["a"])(e),"id","".concat(kx++)),Object(Ge["a"])(Object(gt["a"])(e),"name","".concat(kx)),Object(Ge["a"])(Object(gt["a"])(e),"visible",!0),Object(Ge["a"])(Object(gt["a"])(e),"zIndex",0),Object(Ge["a"])(Object(gt["a"])(e),"inited",!1),Object(Ge["a"])(Object(gt["a"])(e),"layerModelNeedUpdate",!1),Object(Ge["a"])(Object(gt["a"])(e),"pickedFeatureID",null),Object(Ge["a"])(Object(gt["a"])(e),"selectedFeatureID",null),Object(Ge["a"])(Object(gt["a"])(e),"styleNeedUpdate",!1),Object(Ge["a"])(Object(gt["a"])(e),"forceRender",!1),Object(Ge["a"])(Object(gt["a"])(e),"clusterZoom",0),Object(Ge["a"])(Object(gt["a"])(e),"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),Object(Ge["a"])(Object(gt["a"])(e),"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),Object(Ge["a"])(Object(gt["a"])(e),"hooks",{init:new Nv["a"],afterInit:new Nv["d"],beforeRender:new Nv["d"],beforeRenderData:new Nv["c"],afterRender:new Nv["e"],beforePickingEncode:new Nv["e"],afterPickingEncode:new Nv["e"],beforeHighlight:new Nv["e"](["pickedColor"]),afterHighlight:new Nv["e"],beforeSelect:new Nv["e"](["pickedColor"]),afterSelect:new Nv["e"],beforeDestroy:new Nv["e"],afterDestroy:new Nv["e"]}),Object(Ge["a"])(Object(gt["a"])(e),"models",[]),Object(Ge["a"])(Object(gt["a"])(e),"startInit",!1),Object(Ge["a"])(Object(gt["a"])(e),"layerChildren",[]),Object(Ge["a"])(Object(gt["a"])(e),"masks",[]),Th(Object(gt["a"])(e),"configService",dx,Object(gt["a"])(e)),Object(Ge["a"])(Object(gt["a"])(e),"animateOptions",{enable:!1}),Object(Ge["a"])(Object(gt["a"])(e),"currentPickId",null),Object(Ge["a"])(Object(gt["a"])(e),"pendingStyleAttributes",[]),Object(Ge["a"])(Object(gt["a"])(e),"scaleOptions",{}),Object(Ge["a"])(Object(gt["a"])(e),"animateStatus",!1),Object(Ge["a"])(Object(gt["a"])(e),"isDestroyed",!1),Object(Ge["a"])(Object(gt["a"])(e),"encodeDataLength",0),Object(Ge["a"])(Object(gt["a"])(e),"sourceEvent",(function(){e.dataState.dataSourceNeedUpdate=!0;var t=e.getLayerConfig();t&&t.autoFit&&e.fitBounds(t.fitBoundsOptions);var n=e.layerSource.getSourceCfg().autoRender;n&&e.reRender()})),e.name=r.name||e.id,e.zIndex=r.zIndex||0,e.rawConfig=r,e}return Object(He["a"])(n,[{key:"addMask",value:function(e){this.masks.push(e),this.enableMask()}},{key:"removeMask",value:function(e){var t=this.masks.indexOf(e);t>-1&&this.masks.splice(t,1)}},{key:"disableMask",value:function(){this.updateLayerConfig({enableMask:!1})}},{key:"enableMask",value:function(){this.updateLayerConfig({enableMask:!0})}},{key:"addMaskLayer",value:function(e){this.masks.push(e)}},{key:"removeMaskLayer",value:function(e){var t=this.masks.indexOf(e);t>-1&&this.masks.splice(t,1),e.destroy()}},{key:"getAttribute",value:function(e){return this.styleAttributeService.getLayerStyleAttribute(e)}},{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(e){var t=this;if(Object.keys(e).map((function(n){n in t.rawConfig&&(t.rawConfig[n]=e[n])})),this.startInit){var n=this.container.get(vp.SceneID);Q_(e,this),this.configService.setLayerConfig(n,this.id,Object(N["a"])(Object(N["a"])(Object(N["a"])({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),e)),this.needUpdateConfig={}}else this.needUpdateConfig=Object(N["a"])(Object(N["a"])({},this.needUpdateConfig),e)}},{key:"setContainer",value:function(e,t){this.container=e,this.sceneContainer=t}},{key:"getContainer",value:function(){return this.container}},{key:"addPlugin",value:function(e){return this.plugins.push(e),this}},{key:"init",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o,a,s,u=this;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.container.get(vp.SceneID),this.startInit=!0,this.configService.setLayerConfig(t,this.id,this.rawConfig),this.layerType=this.rawConfig.layerType,this.iconService=this.container.get(vp.IIconService),this.fontService=this.container.get(vp.IFontService),this.rendererService=this.container.get(vp.IRendererService),this.layerService=this.container.get(vp.ILayerService),this.debugService=this.container.get(vp.IDebugService),this.interactionService=this.container.get(vp.IInteractionService),this.pickingService=this.container.get(vp.IPickingService),this.mapService=this.container.get(vp.IMapService),n=this.getLayerConfig(),r=n.enableMultiPassRenderer,i=n.passes,r&&null!==i&&void 0!==i&&i.length&&i.length>0&&this.mapService.on("mapAfterFrameChange",(function(){u.renderLayers()})),this.cameraService=this.container.get(vp.ICameraService),this.coordinateService=this.container.get(vp.ICoordinateSystemService),this.shaderModuleService=this.container.get(vp.IShaderModuleService),this.postProcessingPassFactory=this.container.get(vp.IFactoryPostProcessingPass),this.normalPassFactory=this.container.get(vp.IFactoryNormalPass),this.styleAttributeService=this.container.get(vp.IStyleAttributeService),r&&(this.multiPassRenderer=this.container.get(vp.IMultiPassRenderer),this.multiPassRenderer.setLayer(this)),this.pendingStyleAttributes.forEach((function(e){var t=e.attributeName,n=e.attributeField,r=e.attributeValues,i=e.updateOptions;u.styleAttributeService.updateStyleAttribute(t,{scale:Object(N["a"])({field:n},u.splitValuesAndCallbackInAttribute(r,u.getLayerConfig()[t]))},i)})),this.pendingStyleAttributes=[],this.plugins=this.container.getAll(vp.ILayerPlugin),o=bx(this.plugins);try{for(o.s();!(a=o.n()).done;)s=a.value,s.apply(this,{rendererService:this.rendererService,mapService:this.mapService,styleAttributeService:this.styleAttributeService,normalPassFactory:this.normalPassFactory,postProcessingPassFactory:this.postProcessingPassFactory})}catch(c){o.e(c)}finally{o.f()}return this.layerPickService=new vx(this),this.textureService=new mx(this),this.log(Dy.LayerInitStart),e.next=31,this.hooks.init.promise();case 31:this.log(Dy.LayerInitEnd),this.inited=!0,this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this.hooks.afterInit.call();case 36:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"log",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"init";if(!this.tileLayer&&!this.isTileLayer){var r="".concat(this.id,".").concat(n,".").concat(e),i={id:this.id,type:this.type};null===(t=this.debugService)||void 0===t||t.log(r,i)}}},{key:"updateModelData",value:function(e){e.attributes&&e.elements?this.models.map((function(t){t.updateAttributesAndElements(e.attributes,e.elements)})):console.warn("data error")}},{key:"createModelData",value:function(e,t){var n;if(null!==(n=this.layerModel)&&void 0!==n&&n.createModelData)return this.layerModel.createModelData(t);var r=this.calculateEncodeData(e,t),i=this.triangulation;return r&&i?this.styleAttributeService.createAttributesAndIndices(r,i):{attributes:void 0,elements:void 0}}},{key:"setLayerPickService",value:function(e){this.layerPickService=e}},{key:"calculateEncodeData",value:function(e,t){return this.inited?cx(this,this.fontService,this.mapService,this.styleAttributeService,e,t):(console.warn("layer not inited!"),null)}},{key:"prepareBuildModel",value:function(){this.updateLayerConfig(Object(N["a"])(Object(N["a"])(Object(N["a"])({},this.getDefaultConfig()),this.rawConfig),this.needUpdateConfig));var e=this.getLayerConfig(),t=e.animateOption;null!==t&&void 0!==t&&t.enable&&(this.layerService.startAnimate(),this.animateStatus=!0)}},{key:"color",value:function(e,t,n){return this.updateStyleAttribute("color",e,t,n),this}},{key:"texture",value:function(e,t,n){return this.updateStyleAttribute("texture",e,t,n),this}},{key:"rotate",value:function(e,t,n){return this.updateStyleAttribute("rotate",e,t,n),this}},{key:"size",value:function(e,t,n){return this.updateStyleAttribute("size",e,t,n),this}},{key:"filter",value:function(e,t,n){var r=this.updateStyleAttribute("filter",e,t,n);return this.dataState.dataSourceNeedUpdate=r&&this.inited,this}},{key:"shape",value:function(e,t,n){this.shapeOption={field:e,values:t};var r=this.updateStyleAttribute("shape",e,t,n);return this.dataState.dataSourceNeedUpdate=r&&this.inited,this}},{key:"label",value:function(e,t,n){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:e,attributeValues:t,updateOptions:n}),this}},{key:"animate",value:function(e){var t={};return Object(Ei["isObject"])(e)?(t.enable=!0,t=Object(N["a"])(Object(N["a"])({},t),e)):t.enable=e,this.updateLayerConfig({animateOption:t}),this}},{key:"source",value:function(e,t){return"source"===(null===e||void 0===e?void 0:e.type)?(this.setSource(e),this):(this.sourceOption={data:e,options:t},this.clusterZoom=0,this)}},{key:"setData",value:function(e,t){var n=this;return this.inited?(this.log(Dy.SourceInitStart,yh.UPDATE),this.layerSource.setData(e,t),this.log(Dy.SourceInitEnd,yh.UPDATE)):this.on("inited",(function(){n.log(Dy.SourceInitStart,yh.UPDATE);var r=n.getSource();r?n.layerSource.setData(e,t):n.source(new Fb(e,t)),n.layerSource.once("update",(function(){n.log(Dy.SourceInitEnd,yh.UPDATE)}))})),this}},{key:"style",value:function(e){var t=this,n=e.passes,r=Object(Cv["a"])(e,gx);return n&&lx(n).forEach((function(e){var n=t.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(e[0]);n&&n.updateOptions(e[1])})),this.rawConfig=Object(N["a"])(Object(N["a"])({},this.rawConfig),r),this.container&&(this.updateLayerConfig(this.rawConfig),this.styleNeedUpdate=!0),this}},{key:"scale",value:function(e,t){var n=Object(N["a"])({},this.scaleOptions);if(Object(Ei["isObject"])(e)?this.scaleOptions=Object(N["a"])(Object(N["a"])({},this.scaleOptions),e):this.scaleOptions[e]=t,this.styleAttributeService&&!Object(Ei["isEqual"])(n,this.scaleOptions)){var r=Object(Ei["isObject"])(e)?e:Object(Ge["a"])({},e,t);this.styleAttributeService.updateScaleAttribute(r)}return this}},{key:"renderLayers",value:function(){this.rendering=!0,this.layerService.renderLayers(),this.rendering=!1}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.tileLayer?(this.tileLayer.render(),this):(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender||this.renderModels(e),this)}},{key:"renderMultiPass",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.encodeDataLength<=0)||this.forceRender){e.next=2;break}return e.abrupt("return");case 2:if(!this.multiPassRenderer||!this.multiPassRenderer.getRenderFlag()){e.next=7;break}return e.next=5,this.multiPassRenderer.render();case 5:e.next=8;break;case 7:this.multiPassRenderer,this.renderModels();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"active",value:function(e){var t={};return t.enableHighlight=!!Object(Ei["isObject"])(e)||e,Object(Ei["isObject"])(e)?(t.enableHighlight=!0,e.color&&(t.highlightColor=e.color),e.mix&&(t.activeMix=e.mix)):t.enableHighlight=!!e,this.updateLayerConfig(t),this}},{key:"setActive",value:function(e,t){var n=this;if(Object(Ei["isObject"])(e)){var r=e.x,i=void 0===r?0:r,o=e.y,a=void 0===o?0:o;this.updateLayerConfig({highlightColor:Object(Ei["isObject"])(t)?t.color:this.getLayerConfig().highlightColor,activeMix:Object(Ei["isObject"])(t)?t.mix:this.getLayerConfig().activeMix}),this.pick({x:i,y:a})}else this.updateLayerConfig({pickedFeatureID:e,highlightColor:Object(Ei["isObject"])(t)?t.color:this.getLayerConfig().highlightColor,activeMix:Object(Ei["isObject"])(t)?t.mix:this.getLayerConfig().activeMix}),this.hooks.beforeHighlight.call(hi(e)).then((function(){setTimeout((function(){n.reRender()}),1)}))}},{key:"select",value:function(e){var t={};return t.enableSelect=!!Object(Ei["isObject"])(e)||e,Object(Ei["isObject"])(e)?(t.enableSelect=!0,e.color&&(t.selectColor=e.color),e.mix&&(t.selectMix=e.mix)):t.enableSelect=!!e,this.updateLayerConfig(t),this}},{key:"setSelect",value:function(e,t){var n=this;if(Object(Ei["isObject"])(e)){var r=e.x,i=void 0===r?0:r,o=e.y,a=void 0===o?0:o;this.updateLayerConfig({selectColor:Object(Ei["isObject"])(t)?t.color:this.getLayerConfig().selectColor,selectMix:Object(Ei["isObject"])(t)?t.mix:this.getLayerConfig().selectMix}),this.pick({x:i,y:a})}else this.updateLayerConfig({pickedFeatureID:e,selectColor:Object(Ei["isObject"])(t)?t.color:this.getLayerConfig().selectColor,selectMix:Object(Ei["isObject"])(t)?t.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call(hi(e)).then((function(){setTimeout((function(){n.reRender()}),1)}))}},{key:"setBlend",value:function(e){return this.updateLayerConfig({blend:e}),this.reRender(),this}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this}},{key:"hide",value:function(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this}},{key:"setIndex",value:function(e){return this.zIndex=e,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}},{key:"setCurrentPickId",value:function(e){this.currentPickId=e}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(e){this.selectedFeatureID=e}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var e=this.mapService.getZoom(),t=this.getLayerConfig(),n=t.visible,r=t.minZoom,i=void 0===r?-1/0:r,o=t.maxZoom,a=void 0===o?1/0:o;return!!n&&e>=i&&e<a}},{key:"setMultiPass",value:function(e,t){if(this.updateLayerConfig({enableMultiPassRenderer:e}),t&&this.updateLayerConfig({passes:t}),e){var n=this.getLayerConfig(),r=n.passes,i=void 0===r?[]:r;this.multiPassRenderer=fx(this,i,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);var o=this.rendererService.getViewportSize(),a=o.width,s=o.height;this.multiPassRenderer.resize(a,s)}return this}},{key:"setMinZoom",value:function(e){return this.updateLayerConfig({minZoom:e}),this}},{key:"getMinZoom",value:function(){var e=this.getLayerConfig(),t=e.minZoom;return t}},{key:"getMaxZoom",value:function(){var e=this.getLayerConfig(),t=e.maxZoom;return t}},{key:"get",value:function(e){var t=this.getLayerConfig();return t[e]}},{key:"setMaxZoom",value:function(e){return this.updateLayerConfig({maxZoom:e}),this}},{key:"setAutoFit",value:function(e){return this.updateLayerConfig({autoFit:e}),this}},{key:"fitBounds",value:function(e){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var t=this.getSource(),n=t.extent,r=n.some((function(e){return Math.abs(e)===1/0}));return r||this.mapService.fitBounds([[n[0],n[1]],[n[2],n[3]]],e),this}},{key:"destroy",value:function(){var e,t,n,r,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.isDestroyed){this.layerChildren.map((function(e){return e.destroy(!1)})),this.layerChildren=[];var o=this.getLayerConfig(),a=o.maskfence;a&&(this.masks.map((function(e){return e.destroy(!1)})),this.masks=[]),this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),null===(e=this.multiPassRenderer)||void 0===e||e.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),null===(t=this.layerModel)||void 0===t||t.clearModels(i),null===(n=this.tileLayer)||void 0===n||n.destroy(),this.models=[],null===(r=this.debugService)||void 0===r||r.removeLog(this.id),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0}}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes()}},{key:"clearModels",value:function(){var e;this.models.forEach((function(e){return e.destroy()})),null===(e=this.layerModel)||void 0===e||e.clearModels(),this.models=[]}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter((function(e){return e.needRescale||e.needRemapping||e.needRegenerateVertices})).length}},{key:"setSource",value:function(e){var t=this;if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=e,this.clusterZoom=0,this.inited&&this.layerSource.cluster){var n=this.mapService.getZoom();this.layerSource.updateClusterData(n)}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",(function(e){var n=e.type;if(void 0===t.coordCenter){var r,i=t.layerSource.center;t.coordCenter=i,null!==(r=t.mapService)&&void 0!==r&&r.setCoordCenter&&t.mapService.setCoordCenter(i)}if("update"===n){if(t.tileLayer)return void t.tileLayer.reload();t.sourceEvent()}}))}},{key:"getSource",value:function(){return this.layerSource}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(e){this.encodedData=e,this.encodeDataLength=e.length}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getScale",value:function(e){return this.styleAttributeService.getLayerAttributeScale(e)}},{key:"getLegend",value:function(e){var t,n,r,i=this.styleAttributeService.getLayerStyleAttribute(e),o=(null===i||void 0===i||null===(t=i.scale)||void 0===t?void 0:t.scalers)||[];return{type:null===(n=o[0].option)||void 0===n?void 0:n.type,field:null===i||void 0===i||null===(r=i.scale)||void 0===r?void 0:r.field,items:this.getLegendItems(e)}}},{key:"getLegendItems",value:function(e){var t=this.styleAttributeService.getLayerAttributeScale(e);if(!t)return[];if(t.invertExtent){var n=t.range().map((function(n){return Object(Ge["a"])({value:t.invertExtent(n)},e,n)}));return n}if(t.ticks){var r=t.ticks().map((function(n){return Object(Ge["a"])({value:n},e,t(n))}));return r}if(null!==t&&void 0!==t&&t.domain){var i=t.domain().filter((function(e){return!Object(Ei["isUndefined"])(e)})).map((function(n){return Object(Ge["a"])({value:n},e,t(n))}));return i}return[]}},{key:"pick",value:function(e){var t=e.x,n=e.y;this.interactionService.triggerHover({x:t,y:n})}},{key:"boxSelect",value:function(e,t){this.pickingService.boxPickLayer(this,e,t)}},{key:"buildLayerModel",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t){var n,r,i,o,a,s,u,c,l,f,p,h,d,v,m=this;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.moduleName,r=t.vertexShader,i=t.fragmentShader,o=t.triangulation,a=t.segmentNumber,s=t.workerEnabled,u=void 0!==s&&s,c=t.workerOptions,l=Object(Cv["a"])(t,yx),this.shaderModuleService.registerModule(n,{vs:r,fs:i}),f=this.shaderModuleService.getModule(n),p=f.vs,h=f.fs,d=f.uniforms,v=this.rendererService.createModel,e.abrupt("return",new Promise((function(e,t){if(c&&c.modelType in Sf&&u)m.styleAttributeService.createAttributesAndIndicesAscy(m.encodedData,a,c).then((function(t){var n=t.attributes,r=t.elements,i=v(Object(N["a"])({attributes:n,uniforms:d,fs:h,vs:p,elements:r,blend:K_[vh.normal]},l));e(i)}))["catch"]((function(e){return t(e)}));else{var n=m.styleAttributeService.createAttributesAndIndices(m.encodedData,o,a),r=n.attributes,i=n.elements,s=n.count,f=Object(N["a"])({attributes:r,uniforms:d,fs:h,vs:p,elements:i,blend:K_[vh.normal]},l);s&&(f.count=s);var g=v(f);e(g)}})));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createAttributes",value:function(e){var t=e.triangulation,n=this.styleAttributeService.createAttributes(this.encodedData,t),r=n.attributes;return r}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(e){var t=this.getLayerConfig(),n=t.enableHighlight,r=void 0===n||n,i=t.enableSelect,o=void 0===i||i,a=-1!==this.eventNames().indexOf(e)||-1!==this.eventNames().indexOf("un"+e);return"click"!==e&&"dblclick"!==e||!o||(a=!0),"mousemove"!==e||!r&&-1===this.eventNames().indexOf("mouseenter")&&-1===this.eventNames().indexOf("unmousemove")&&-1===this.eventNames().indexOf("mouseout")||(a=!0),this.isVisible()&&a}},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"rebuildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.buildModels();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"renderMulPass",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.render();case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"renderModels",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.encodeDataLength<=0&&!this.forceRender||(this.hooks.beforeRender.call(),this.models.forEach((function(n){n.draw({uniforms:e.layerModel.getUninforms(),blend:e.layerModel.getBlend(),stencil:e.layerModel.getStencil(t)},(null===t||void 0===t?void 0:t.ispick)||!1)})),this.hooks.afterRender.call()),this}},{key:"updateStyleAttribute",value:function(e,t,n,r){var i=this.configService.getAttributeConfig(this.id)||{};return!Object(Ei["isEqual"])(i[e],{field:t,values:n})&&(-1!==["color","size","texture","rotate","filter","label","shape"].indexOf(e)&&this.configService.setAttributeConfig(this.id,Object(Ge["a"])({},e,{field:t,values:n})),this.startInit?this.styleAttributeService.updateStyleAttribute(e,{scale:Object(N["a"])({field:t},this.splitValuesAndCallbackInAttribute(n,this.getLayerConfig()[t]))},r):this.pendingStyleAttributes.push({attributeName:e,attributeField:t,attributeValues:n,updateOptions:r}),!0)}},{key:"getLayerAttributeConfig",value:function(){return this.configService.getAttributeConfig(this.id)}},{key:"getShaderPickStat",value:function(){return this.layerService.getShaderPickStat()}},{key:"setEarthTime",value:function(e){console.warn("empty fn")}},{key:"processData",value:function(e){return e}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"initLayerModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.models.forEach((function(e){return e.destroy()})),this.models=[],e.next=4,this.layerModel.initModels();case 4:this.models=e.sent;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"reRender",value:function(){this.inited&&this.layerService.reRender()}},{key:"splitValuesAndCallbackInAttribute",value:function(e,t){return{values:Object(Ei["isFunction"])(e)?void 0:e||t,callback:Object(Ei["isFunction"])(e)?e:void 0}}}]),n}(Fo["EventEmitter"]),dx=Mh(hx.prototype,"configService",[px],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hx);function Tx(e,t){return{enable:e,mask:255,func:{cmp:ad.EQUAL,ref:t?1:0,mask:1}}}function Mx(e){return e.maskOperation===gh.OR?{enable:!0,mask:255,func:{cmp:ad.ALWAYS,ref:1,mask:255},opFront:{fail:ad.KEEP,zfail:ad.REPLACE,zpass:ad.REPLACE}}:{enable:!0,mask:255,func:{cmp:e.stencilType===mh.SINGLE||0===e.stencilIndex?ad.ALWAYS:ad.LESS,ref:e.stencilType===mh.SINGLE?1:0===e.stencilIndex?2:1,mask:255},opFront:{fail:ad.KEEP,zfail:ad.REPLACE,zpass:ad.REPLACE}}}function Px(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ix(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function Ix(e,t){if(e){if("string"===typeof e)return Rx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rx(e,t):void 0}}function Rx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Lx=(Sx=Ay(vp.IGlobalConfigService),jx=function(){function e(t){Object(Ve["a"])(this,e),Th(this,"configService",Ax,this),this.layer=t,this.rendererService=t.getContainer().get(vp.IRendererService),this.pickingService=t.getContainer().get(vp.IPickingService),this.shaderModuleService=t.getContainer().get(vp.IShaderModuleService),this.styleAttributeService=t.getContainer().get(vp.IStyleAttributeService),this.mapService=t.getContainer().get(vp.IMapService),this.iconService=t.getContainer().get(vp.IIconService),this.fontService=t.getContainer().get(vp.IFontService),this.cameraService=t.getContainer().get(vp.ICameraService),this.layerService=t.getContainer().get(vp.ILayerService),this.registerBuiltinAttributes(),this.startModelAnimate();var n=this.rendererService.createTexture2D;this.createTexture2D=n,this.DATA_TEXTURE_WIDTH=1024,this.rowCount=1,this.cellLength=0,this.cellProperties=[],this.cacheStyleProperties={thetaOffset:void 0,opacity:void 0,strokeOpacity:void 0,strokeWidth:void 0,stroke:void 0,offsets:void 0},this.stylePropertiesExist={hasThetaOffset:0,hasOpacity:0,hasStrokeOpacity:0,hasStrokeWidth:0,hasStroke:0,hasOffsets:0},this.dataTextureTest=this.layerService.getOESTextureFloat(),this.dataTextureTest||(this.dataTexture=this.createTexture2D({data:new Uint8Array(4),mag:ad.NEAREST,min:ad.NEAREST,width:1,height:1}))}return Object(He["a"])(e,[{key:"clearLastCalRes",value:function(){this.cellProperties=[],this.cellLength=0,this.stylePropertiesExist={hasThetaOffset:0,hasOpacity:0,hasStrokeOpacity:0,hasStrokeWidth:0,hasStroke:0,hasOffsets:0}}},{key:"getCellTypeLayout",value:function(){return this.dataTextureTest?[this.rowCount,this.DATA_TEXTURE_WIDTH,0,0,this.stylePropertiesExist.hasOpacity,this.stylePropertiesExist.hasStrokeOpacity,this.stylePropertiesExist.hasStrokeWidth,this.stylePropertiesExist.hasStroke,this.stylePropertiesExist.hasOffsets,this.stylePropertiesExist.hasThetaOffset,0,0,0,0,0,1]:[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,-1]}},{key:"dataTextureNeedUpdate",value:function(e){var t=!1;return Object(Ei["isEqual"])(e.thetaOffset,this.cacheStyleProperties.thetaOffset)||(t=!0,this.cacheStyleProperties.thetaOffset=e.thetaOffset),Object(Ei["isEqual"])(e.opacity,this.cacheStyleProperties.opacity)||(t=!0,this.cacheStyleProperties.opacity=e.opacity),Object(Ei["isEqual"])(e.strokeOpacity,this.cacheStyleProperties.strokeOpacity)||(t=!0,this.cacheStyleProperties.strokeOpacity=e.strokeOpacity),Object(Ei["isEqual"])(e.strokeWidth,this.cacheStyleProperties.strokeWidth)||(t=!0,this.cacheStyleProperties.strokeWidth=e.strokeWidth),Object(Ei["isEqual"])(e.stroke,this.cacheStyleProperties.stroke)||(t=!0,this.cacheStyleProperties.stroke=e.stroke),Object(Ei["isEqual"])(e.offsets,this.cacheStyleProperties.offsets)||(t=!0,this.cacheStyleProperties.offsets=e.offsets),void 0===this.dataTexture&&(t=!0),t}},{key:"judgeStyleAttributes",value:function(e){this.clearLastCalRes(),void 0===e.opacity||Object(Ei["isNumber"])(e.opacity)||(this.cellProperties.push({attr:"opacity",count:1}),this.stylePropertiesExist.hasOpacity=1,this.cellLength+=1),void 0===e.strokeOpacity||Object(Ei["isNumber"])(e.strokeOpacity)||(this.cellProperties.push({attr:"strokeOpacity",count:1}),this.stylePropertiesExist.hasStrokeOpacity=1,this.cellLength+=1),void 0===e.strokeWidth||Object(Ei["isNumber"])(e.strokeWidth)||(this.cellProperties.push({attr:"strokeWidth",count:1}),this.stylePropertiesExist.hasStrokeWidth=1,this.cellLength+=1),void 0===e.stroke||this.isStaticColor(e.stroke)||(this.cellProperties.push({attr:"stroke",count:4}),this.stylePropertiesExist.hasStroke=1,this.cellLength+=4),void 0===e.offsets||this.isOffsetStatic(e.offsets)||(this.cellProperties.push({attr:"offsets",count:2}),this.stylePropertiesExist.hasOffsets=1,this.cellLength+=2),void 0===e.thetaOffset||Object(Ei["isNumber"])(e.thetaOffset)||(this.cellProperties.push({attr:"thetaOffset",count:1}),this.stylePropertiesExist.hasThetaOffset=1,this.cellLength+=1)}},{key:"isStaticColor",value:function(e){return!!Object(Ei["isString"])(e)&&!!$r(e)}},{key:"getStrokeColor",value:function(e){if(this.isStaticColor(e)){var t=fi(e);return t[0]=t[0]?t[0]:0,t[1]=t[1]?t[1]:0,t[2]=t[2]?t[2]:0,t[3]=t[3]?t[3]:0,t}return[0,0,0,0]}},{key:"isOffsetStatic",value:function(e){return!!(Array.isArray(e)&&2===e.length&&Object(Ei["isNumber"])(e[0])&&Object(Ei["isNumber"])(e[1]))}},{key:"patchMod",value:function(e,t){for(var n=0;n<t;n++)e.push(-1)}},{key:"patchData",value:function(e,t,n){var r,i=Px(n);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.attr,s=o.count,u=t[a];void 0!==u?"stroke"===a?e.push.apply(e,Object(D["a"])(fi(u))):"offsets"===a?this.isOffsetStatic(u)?e.push(-u[0],u[1]):e.push(0,0):e.push(Object(Ei["isNumber"])(u)?u:1):this.patchMod(e,s)}}catch(c){i.e(c)}finally{i.f()}}},{key:"calDataFrame",value:function(e,t,n){for(var r=t.length,i=Math.ceil(r*e/this.DATA_TEXTURE_WIDTH),o=i*this.DATA_TEXTURE_WIDTH,a=[],s=0;s<r;s++){var u=t[s];this.patchData(a,u,n)}for(var c=a.length;c<o;c++)a.push(-1);return{data:a,width:this.DATA_TEXTURE_WIDTH,height:i}}},{key:"getBlend",value:function(){var e=this.layer.getLayerConfig(),t=e.blend,n=void 0===t?"normal":t;return K_[vh[n]]}},{key:"getStencil",value:function(e){var t=this.layer.getLayerConfig(),n=t.mask,r=void 0!==n&&n,i=t.maskInside,o=void 0===i||i,a=t.enableMask,s=t.maskOperation,u=void 0===s?gh.AND:s;if("MaskLayer"===this.layer.type)return Mx({isStencil:!0,stencilType:mh.SINGLE});if(e.isStencil)return Mx(Object(N["a"])(Object(N["a"])({},e),{},{maskOperation:u}));var c=r||a&&0!==this.layer.masks.length||void 0!==this.layer.tileMask;return Tx(c,o)}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"render",value:function(e){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(e){return[e.enable?0:1,e.duration||4,e.interval||.2,e.trailLength||.1]}},{key:"startModelAnimate",value:function(){var e=this.layer.getLayerConfig(),t=e.animateOption;t.enable&&this.layer.setAnimateStartTime()}}]),e}(),Ax=Mh(jx.prototype,"configService",[Sx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jx),Dx=100;function Nx(e){return e/180*Math.acos(-1)}function Fx(e){var t=Nx(e[0])+Math.PI/2,n=Nx(e[1]),r=Dx+.4*Math.random(),i=r*Math.cos(n)*Math.cos(t),o=r*Math.cos(n)*Math.sin(t),a=r*Math.sin(n);return[o,a,i]}var zx=s.create(),Bx=(s.create(),s.create()),Ux=s.create(),Vx=s.create();function Hx(e,t,n,r,i){s.add(e,n,r),s.normalize(e,e),t=s.fromValues(-e[1],e[0]);var o=s.fromValues(-n[1],n[0]);return[i/s.dot(t,o),t]}function Gx(e,t){return s.set(e,-t[1],t[0])}function Wx(e,t,n){return s.sub(e,t,n),s.normalize(e,e),e}function qx(e,t){return e[0]===t[0]&&e[1]===t[1]}var Zx,Yx=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(Ve["a"])(this,e),Object(Ge["a"])(this,"lastFlip",-1),Object(Ge["a"])(this,"miter",s.fromValues(0,0)),Object(Ge["a"])(this,"started",!1),Object(Ge["a"])(this,"dash",!1),Object(Ge["a"])(this,"totalDistance",0),Object(Ge["a"])(this,"currentIndex",0),this.join=t.join||"miter",this.cap=t.cap||"butt",this.miterLimit=t.miterLimit||10,this.thickness=t.thickness||1,this.dash=t.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return Object(He["a"])(e,[{key:"simpleExtrude",value:function(e){var t=this.complex;if(e.length<=1)return t;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=e.length,r=t.startIndex,i=1;i<n;i++){var o=e[i-1],a=e[i],s=i<e.length-1?e[i+1]:null,u=this.simpleSegment(t,r,o,a,s);r+=u}if(this.dash)for(var c=0;c<t.positions.length/6;c++)t.positions[6*c+5]=this.totalDistance;return t.startIndex=t.positions.length/6,t}},{key:"simpleExtrude_gaode2",value:function(e,t){var n=this.complex;if(e.length<=1)return n;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=e.length,i=n.startIndex,o=1;o<r;o++){var a,s,u,c=e[o-1];c.push(null!==(a=t[o-1][2])&&void 0!==a?a:0);var l=t[o-1],f=e[o];f.push(null!==(s=t[o][2])&&void 0!==s?s:0);var p=t[o],h=o<e.length-1?[].concat(Object(D["a"])(e[o+1]),[null!==(u=t[o+1][2])&&void 0!==u?u:0]):null,d=o<t.length-1?t[o+1]:null,v=this.simpleSegment(n,i,c,f,h,l,p,d);i+=v}if(this.dash)for(var m=0;m<n.positions.length/6;m++)n.positions[6*m+5]=this.totalDistance;return n.startIndex=n.positions.length/6,n}},{key:"extrude_gaode2",value:function(e,t){var n=this.complex;if(e.length<=1)return n;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=e.length,i=n.startIndex,o=1;o<r;o++){var a,s,u,c=e[o-1];c.push(null!==(a=t[o-1][2])&&void 0!==a?a:0);var l=t[o-1],f=e[o];f.push(null!==(s=t[o][2])&&void 0!==s?s:0);var p=t[o],h=o<e.length-1?[].concat(Object(D["a"])(e[o+1]),[null!==(u=t[o+1][2])&&void 0!==u?u:0]):null,d=o<t.length-1?t[o+1]:null,v=this.segment_gaode2(n,i,c,f,h,l,p,d);i+=v}if(this.dash)for(var m=0;m<n.positions.length/6;m++)n.positions[6*m+5]=this.totalDistance;return n.startIndex=n.positions.length/6,n}},{key:"extrude",value:function(e){var t=this.complex;if(e.length<=1)return t;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=e.length,r=t.startIndex,i=1;i<n;i++){var o=e[i-1],a=e[i],s=i<e.length-1?e[i+1]:null,u=this.segment(t,r,o,a,s);r+=u}if(this.dash)for(var c=0;c<t.positions.length/6;c++)t.positions[6*c+5]=this.totalDistance;return t.startIndex=t.positions.length/6,t}},{key:"simpleSegment",value:function(e,t,n,r,i){var o=0,a=e.indices,u=e.positions,c=e.normals,l=vo([r[0],r[1]]),f=vo([n[0],n[1]]);Wx(Bx,l,f);var p=0;if(this.dash&&(p=this.lineSegmentDistance(l,f),this.totalDistance+=p),this.normal||(this.normal=s.create(),Gx(this.normal,Bx)),this.started||(this.started=!0,this.extrusions(u,c,n,this.normal,this.thickness,this.totalDistance-p)),a.push(t+0,t+1,t+2),i){var h=vo([i[0],i[1]]);qx(l,h)&&s.add(h,l,s.normalize(h,s.subtract(h,l,f))),Wx(Ux,h,l);var d=Hx(Vx,s.create(),Bx,Ux,this.thickness),v=Object(Oi["a"])(d,2),m=v[0],g=v[1],y=s.dot(Vx,this.normal)<0?-1:1;this.extrusions(u,c,r,g,m,this.totalDistance),a.push.apply(a,Object(D["a"])(1===this.lastFlip?[t,t+2,t+3]:[t+2,t+1,t+3])),y=-1,s.copy(this.normal,g),o+=2,this.lastFlip=y}else Gx(this.normal,Bx),this.extrusions(u,c,r,this.normal,this.thickness,this.totalDistance),a.push.apply(a,Object(D["a"])(1===this.lastFlip?[t,t+2,t+3]:[t+2,t+1,t+3])),o+=2;return o}},{key:"segment_gaode2",value:function(e,t,n,r,i,o,a,u){var c=0,l=e.indices,f=e.positions,p=e.normals,h="square"===this.cap,d="bevel"===this.join,v=vo([a[0],a[1]]),m=vo([o[0],o[1]]);Wx(Bx,r,n);var g=0;if(this.dash&&(g=this.lineSegmentDistance(v,m),this.totalDistance+=g),this.normal||(this.normal=s.create(),Gx(this.normal,Bx)),!this.started)if(this.started=!0,h){var y=s.create(),b=s.create();s.add(y,this.normal,Bx),s.add(b,this.normal,Bx),p.push(b[0],b[1],0),p.push(y[0],y[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance-g,-this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),f.push(n[0],n[1],0|n[2],this.totalDistance-g,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(f,p,n,this.normal,this.thickness,this.totalDistance-g);if(l.push(t+0,t+1,t+2),i){qx(r,i)&&s.add(i,r,s.normalize(i,s.subtract(i,r,n))),Wx(Ux,i,r);var _=Hx(Vx,s.create(),Bx,Ux,this.thickness),x=Object(Oi["a"])(_,2),w=x[0],O=x[1],E=s.dot(Vx,this.normal)<0?-1:1,S=d;if(!S&&"miter"===this.join){var j=w;j>this.miterLimit&&(S=!0)}S?(p.push(this.normal[0],this.normal[1],0),p.push(O[0],O[1],0),f.push(r[0],r[1],0|r[2],this.totalDistance,-this.thickness*E,0|r[2]),this.complex.indexes.push(this.currentIndex),f.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness*E,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,l.push.apply(l,Object(D["a"])(this.lastFlip!==-E?[t,t+2,t+3]:[t+2,t+1,t+3])),l.push(t+2,t+3,t+4),Gx(zx,Ux),s.copy(this.normal,zx),p.push(this.normal[0],this.normal[1],0),f.push(r[0],r[1],0|r[2],this.totalDistance,-this.thickness*E,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,c+=3):(this.extrusions(f,p,r,O,w,this.totalDistance),l.push.apply(l,Object(D["a"])(1===this.lastFlip?[t,t+2,t+3]:[t+2,t+1,t+3])),E=-1,s.copy(this.normal,O),c+=2),this.lastFlip=E}else{if(Gx(this.normal,Bx),h){var A=s.create(),k=s.create();s.sub(k,Bx,this.normal),s.add(A,Bx,this.normal),p.push(k[0],k[1],0),p.push(A[0],A[1],0),f.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),f.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(f,p,r,this.normal,this.thickness,this.totalDistance);l.push.apply(l,Object(D["a"])(1===this.lastFlip?[t,t+2,t+3]:[t+2,t+1,t+3])),c+=2}return c}},{key:"segment",value:function(e,t,n,r,i){var o=0,a=e.indices,u=e.positions,c=e.normals,l="square"===this.cap,f="bevel"===this.join,p=vo([r[0],r[1]]),h=vo([n[0],n[1]]);Wx(Bx,p,h);var d=0;if(this.dash&&(d=this.lineSegmentDistance(p,h),this.totalDistance+=d),this.normal||(this.normal=s.create(),Gx(this.normal,Bx)),!this.started)if(this.started=!0,l){var v=s.create(),m=s.create();s.add(v,this.normal,Bx),s.add(m,this.normal,Bx),c.push(m[0],m[1],0),c.push(v[0],v[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance-d,-this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),u.push(n[0],n[1],0|n[2],this.totalDistance-d,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,c,n,this.normal,this.thickness,this.totalDistance-d);if(a.push(t+0,t+1,t+2),i){var g=vo([i[0],i[1]]);qx(p,g)&&s.add(g,p,s.normalize(g,s.subtract(g,p,h))),Wx(Ux,g,p);var y=Hx(Vx,s.create(),Bx,Ux,this.thickness),b=Object(Oi["a"])(y,2),_=b[0],x=b[1],w=s.dot(Vx,this.normal)<0?-1:1,O=f;if(!O&&"miter"===this.join){var E=_;E>this.miterLimit&&(O=!0)}O?(c.push(this.normal[0],this.normal[1],0),c.push(x[0],x[1],0),u.push(r[0],r[1],0|r[2],this.totalDistance,-this.thickness*w,0|r[2]),this.complex.indexes.push(this.currentIndex),u.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness*w,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,a.push.apply(a,Object(D["a"])(this.lastFlip!==-w?[t,t+2,t+3]:[t+2,t+1,t+3])),a.push(t+2,t+3,t+4),Gx(zx,Ux),s.copy(this.normal,zx),c.push(this.normal[0],this.normal[1],0),u.push(r[0],r[1],0|r[2],this.totalDistance,-this.thickness*w,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,o+=3):(this.extrusions(u,c,r,x,_,this.totalDistance),a.push.apply(a,Object(D["a"])(1===this.lastFlip?[t,t+2,t+3]:[t+2,t+1,t+3])),w=-1,s.copy(this.normal,x),o+=2),this.lastFlip=w}else{if(Gx(this.normal,Bx),l){var S=s.create(),j=s.create();s.sub(j,Bx,this.normal),s.add(S,Bx,this.normal),c.push(j[0],j[1],0),c.push(S[0],S[1],0),u.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),u.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,c,r,this.normal,this.thickness,this.totalDistance);a.push.apply(a,Object(D["a"])(1===this.lastFlip?[t,t+2,t+3]:[t+2,t+1,t+3])),o+=2}return o}},{key:"extrusions",value:function(e,t,n,r,i,o){t.push(r[0],r[1],0),t.push(r[0],r[1],0),e.push(n[0],n[1],0|n[2],o,-i,0|n[2]),this.complex.indexes.push(this.currentIndex),e.push(n[0],n[1],0|n[2],o,i,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}}]),e}();function Xx(e){var t=e[0][0],n=e[0][e[0].length-1];t[0]===n[0]&&t[1]===n[1]&&(e[0]=e[0].slice(0,e[0].length-1));for(var r=e[0].length,i=ls.a.flatten(e),o=i.vertices,a=i.dimensions,s=[],u=[],c=0;c<o.length/a;c++)2===a?s.push(o[2*c],o[2*c+1],1):s.push(o[3*c],o[3*c+1],1);var l=ls()(i.vertices,i.holes,i.dimensions);u.push.apply(u,Object(D["a"])(l));for(var f=function(){var e=i.vertices.slice(p*a,(p+1)*a),t=i.vertices.slice((p+1)*a,(p+2)*a);0===t.length&&(t=i.vertices.slice(0,a));var n=s.length/3;s.push(e[0],e[1],1,t[0],t[1],1,e[0],e[1],0,t[0],t[1],0),u.push.apply(u,Object(D["a"])([0,2,1,2,3,1].map((function(e){return e+n}))))},p=0;p<r;p++)f();return{positions:s,index:u}}function Kx(e){var t=ls.a.flatten(e),n=ls()(t.vertices,t.holes,t.dimensions);return{positions:t.vertices,index:n}}function $x(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e[0][0],r=e[0][e[0].length-1];n[0]===r[0]&&n[1]===r[1]&&(e[0]=e[0].slice(0,e[0].length-1));for(var i=e[0].length,o=ls.a.flatten(e),a=o.vertices,s=o.dimensions,u=[],c=[],l=[],f=0;f<a.length/s;f++)2===s?u.push(a[2*f],a[2*f+1],1,-1,-1):u.push(a[3*f],a[3*f+1],1,-1,-1),l.push(0,0,1);var p=ls()(o.vertices,o.holes,o.dimensions);c.push.apply(c,Object(D["a"])(p));for(var h=function(){var e=o.vertices.slice(d*s,(d+1)*s),n=o.vertices.slice((d+1)*s,(d+2)*s);0===n.length&&(n=o.vertices.slice(0,s));var r=u.length/5;u.push(e[0],e[1],1,0,0,n[0],n[1],1,.1,0,e[0],e[1],0,0,.8,n[0],n[1],0,.1,.8);var i=Qx([n[0],n[1],1],[e[0],e[1],0],[e[0],e[1],1],t);l.push.apply(l,Object(D["a"])(i).concat(Object(D["a"])(i),Object(D["a"])(i),Object(D["a"])(i))),c.push.apply(c,Object(D["a"])([1,2,0,3,2,1].map((function(e){return e+r}))))},d=0;d<i;d++)h();return{positions:u,index:c,normals:l}}function Qx(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=u.create(),o=u.create(),a=u.create();r&&(e=lo(e),t=lo(t),n=lo(n));var s=u.fromValues.apply(u,Object(D["a"])(e)),c=u.fromValues.apply(u,Object(D["a"])(t)),l=u.fromValues.apply(u,Object(D["a"])(n));u.sub(i,l,c),u.sub(o,s,c),u.cross(a,i,o);var f=u.create();return u.normalize(f,a),f}var Jx=function(e){return e["CYLINDER"]="cylinder",e["SQUARECOLUMN"]="squareColumn",e["TRIANGLECOLUMN"]="triangleColumn",e["HEXAGONCOLUMN"]="hexagonColumn",e["PENTAGONCOLUMN"]="pentagonColumn",e}({}),ew=function(e){return e["CIRCLE"]="circle",e["SQUARE"]="square",e["TRIANGLE"]="triangle",e["HEXAGON"]="hexagon",e["PENTAGON"]="pentagon",e}({});function tw(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=2*Math.PI/e,r=[],i=0;i<e;i++)r.push(n*i+t*Math.PI/12);var o=r.map((function(e){var t=Math.sin(e+Math.PI/4),n=Math.cos(e+Math.PI/4);return[t,n,0]}));return o}function nw(){return tw(30)}function rw(){return tw(4)}function iw(){return tw(3)}function ow(){return tw(6,1)}function aw(){return tw(5)}var sw=(Zx={},Object(Ge["a"])(Zx,ew.CIRCLE,nw),Object(Ge["a"])(Zx,ew.HEXAGON,ow),Object(Ge["a"])(Zx,ew.TRIANGLE,iw),Object(Ge["a"])(Zx,ew.SQUARE,rw),Object(Ge["a"])(Zx,ew.PENTAGON,aw),Object(Ge["a"])(Zx,Jx.CYLINDER,nw),Object(Ge["a"])(Zx,Jx.HEXAGONCOLUMN,ow),Object(Ge["a"])(Zx,Jx.TRIANGLECOLUMN,iw),Object(Ge["a"])(Zx,Jx.SQUARECOLUMN,rw),Object(Ge["a"])(Zx,Jx.PENTAGONCOLUMN,aw),Zx),uw={};function cw(e){var t=Oo(e.coordinates);return{vertices:[].concat(Object(D["a"])(t),Object(D["a"])(t),Object(D["a"])(t),Object(D["a"])(t)),indices:[0,1,2,2,3,0],size:t.length}}function lw(e){var t=Oo(e.coordinates),n=Fx(t);return{vertices:[].concat(Object(D["a"])(n),Object(D["a"])(n),Object(D["a"])(n),Object(D["a"])(n)),indices:[0,1,2,2,3,0],size:n.length}}function fw(e){var t=e.shape,n=jw(t,!1),r=n.positions,i=n.index,o=n.normals;return{vertices:r,indices:i,normals:o,size:5}}function pw(e){var t=Oo(e.coordinates);return{vertices:Object(D["a"])(t),indices:[0],size:t.length}}function hw(e){var t=e.coordinates,n=e.originCoordinates,r=e.version,i=new Yx({dash:!0,join:"bevel"});if("GAODE2.x"===r){var o=t;Array.isArray(o[0][0])||(o=[t]);var a=n;Array.isArray(a[0][0])||(a=[n]);for(var s=0;s<o.length;s++){var u=o[s],c=a[s];i.extrude_gaode2(u,c)}}else{var l=t;l[0]&&!Array.isArray(l[0][0])&&(l=[t]),l.forEach((function(e){i.extrude(e)}))}var f=i.complex;return{vertices:f.positions,indices:f.indices,normals:f.normals,indexes:f.indexes,size:6}}function dw(e){var t=e.coordinates,n=[];if(!Array.isArray(t[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};var r=gw(t),i=r.results,o=r.totalDistance;return i.map((function(e){n.push(e[0],e[1],e[2],e[3],0,o)})),{vertices:n,indices:[],normals:[],size:6,count:i.length}}function vw(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}function mw(e,t){return e.length<3&&e.push(0),void 0!==t&&e.push(t),e}function gw(e){var t=e;Array.isArray(t)&&Array.isArray(t[0])&&Array.isArray(t[0][0])&&(t=e.flat());var n=0;if(t.length<2)return{results:t,totalDistance:0};var r=[],i=mw(t[0],n);r.push(i);for(var o=1;o<t.length-1;o++){var a=vw(t[o-1],t[o]);n+=a;var s=mw(t[o],n);r.push(s),r.push(s)}var u=vw(t[t.length-2],t[t.length-1]);return n+=u,r.push(mw(t[t.length-1],n)),{results:r,totalDistance:n}}function yw(e){var t=e.coordinates,n=ls.a.flatten(t),r=n.vertices,i=n.dimensions,o=n.holes;return{indices:ls()(r,o,i),vertices:r,size:i}}function bw(e){var t=e.coordinates,n=ls.a.flatten(t),r=n.vertices,i=n.dimensions,o=n.holes;return{indices:ls()(r,o,i),vertices:_w(r),size:i+4}}function _w(e){for(var t=[],n=Eo(e),r=n.center,i=n.radius,o=0;o<e.length;o+=2){var a=e[o],s=e[o+1];t.push.apply(t,[a,s,0].concat(Object(D["a"])(r),[i]))}return t}function xw(e){var t=e.coordinates,n=$x(t,!0),r=n.positions,i=n.index,o=n.normals;return{vertices:r,indices:i,normals:o,size:5}}function ww(e){var t=e.shape,n=Aw(t),r=n.positions,i=n.index;return{vertices:r,indices:i,size:3}}function Ow(e){var t=e.coordinates,n=[].concat(Object(D["a"])(t[0]),[0,0,1,t[1][0],t[0][1],0,1,1],Object(D["a"])(t[1]),[0,1,0],Object(D["a"])(t[0]),[0,0,1],Object(D["a"])(t[1]),[0,1,0,t[0][0],t[1][1],0,0,0]),r=[0,1,2,3,4,5];return{vertices:n,indices:r,size:5}}function Ew(e,t){for(var n=t||30,r=e.coordinates,i=[],o=[],a=function(e){i.push(e,1,e,r[0][0],r[0][1],r[1][0],r[1][1],e,-1,e,r[0][0],r[0][1],r[1][0],r[1][1]),e!==n-1&&o.push.apply(o,Object(D["a"])([0,1,2,1,3,2].map((function(t){return 2*e+t}))))},s=0;s<n;s++)a(s);return{vertices:i,indices:o,size:7}}function Sw(e){var t=e.coordinates;2===t.length&&t.push(0);var n=kw(-1,1),r=kw(1,1),i=kw(-1,-1),o=kw(1,-1),a=[].concat(Object(D["a"])(t),Object(D["a"])(n),Object(D["a"])(t),Object(D["a"])(i),Object(D["a"])(t),Object(D["a"])(o),Object(D["a"])(t),Object(D["a"])(r)),s=[0,1,2,3,0,2];return{vertices:a,indices:s,size:5}}function jw(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(uw&&uw[e])return uw[e];var n=sw[e]?sw[e]():sw.cylinder(),r=$x([n],t);return uw[e]=r,r}function Aw(e){var t=["cylinder","triangleColumn","hexagonColumn","squareColumn"],n=sw[e]?sw[e]():sw.circle(),r=-1===t.indexOf(e)?Kx([n]):Xx([n]);return r}function kw(e,t){var n=(e+1)/2,r=(t+1)/2;return[n,r]}function Cw(e){var t=Tw();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Tw(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Mw='uniform float u_opacity: 1.0;\nuniform vec4 u_baseColor : [ 1.0, 0, 0, 1.0 ];\nuniform vec4 u_brightColor : [ 1.0, 0, 0, 1.0 ];\nuniform vec4 u_windowColor : [ 1.0, 0, 0, 1.0 ];\nuniform float u_near : 0;\nuniform float u_far : 1;\nvarying vec4 v_Color;\nvarying vec2 v_texCoord;\nuniform float u_Zoom : 1;\nuniform float u_time;\n\nuniform float u_circleSweep;\nuniform float u_cityMinSize;\nuniform vec3 u_circleSweepColor;\nuniform float u_circleSweepSpeed;\n\nvarying float v_worldDis;\n\n#pragma include "picking"\n\nvec3 getWindowColor(float n, float hot, vec3 brightColor, vec3 darkColor) {\n    float s = step(hot, n);\n    vec3 color = mix(brightColor,vec3(0.9,0.9,1.0),n);\n\n    return mix(darkColor, color, s);\n}\nfloat random (vec2 st) {\n    return fract(sin(dot(st.xy, vec2(12.9898,78.233)))* 43758.5453123);\n}\n\nfloat LinearizeDepth()\n{\n    float z = gl_FragCoord.z * 2.0 - 1.0;\n    return (2.0 * u_near * u_far) / (u_far + u_near - z * (u_far - u_near));\n}\n\nvec3 fog(vec3 color, vec3 fogColor, float depth){\n    float fogFactor=clamp(depth,0.0,1.0);\n    vec3 output_color=mix(fogColor,color,fogFactor);\n    return output_color;\n}\n\nfloat sdRect(vec2 p, vec2 sz) {\n  vec2 d = abs(p) - sz;\n  float outside = length(max(d, 0.));\n  float inside = min(max(d.x, d.y), 0.);\n  return outside + inside;\n}\n\nvoid main() {\n  gl_FragColor = v_Color;\n  vec3 baseColor = u_baseColor.xyz;\n  vec3 brightColor = u_brightColor.xyz;\n  vec3 windowColor = u_windowColor.xyz;\n  float targetColId = 5.;\n  float depth = 1.0 - LinearizeDepth() / u_far * u_Zoom;\n  vec3 fogColor = vec3(23.0/255.0,31.0/255.0,51.0/255.0);\n  if(v_texCoord.x < 0.) { //\u9876\u90e8\u989c\u8272\n       vec3 foggedColor = fog(baseColor.xyz + vec3(0.12*0.9,0.2*0.9,0.3*0.9),fogColor,depth);\n       gl_FragColor = vec4( foggedColor, v_Color.w);\n  }else { // \u4fa7\u9762\u989c\u8272\n        vec2 st = v_texCoord;\n        vec2  UvScale = v_texCoord;\n        float tStep = min(0.08,max(0.05* (18.0-u_Zoom),0.02));\n        float tStart = 0.25 * tStep;\n        float tEnd = 0.75 * tStep;\n        float u = mod(UvScale.x, tStep);\n        float v = mod(UvScale.y, tStep);\n        float ux = floor(UvScale.x/tStep);\n        float uy = floor(UvScale.y/tStep);\n        float n = random(vec2(ux,uy));\n        float lightP = u_time;\n        float head = 1.0- step(0.005,st.y);\n        /*step3*/\n        // \u5c06\u7a97\u6237\u989c\u8272\u548c\u5899\u9762\u989c\u8272\u533a\u522b\u5f00\u6765\n        float sU = step(tStart, u) - step(tEnd, u);\n        float sV = step(tStart, v) - step(tEnd, v);\n        vec2 windowSize = vec2(abs(tEnd-tStart),abs(tEnd-tStart));\n        float dist = sdRect(vec2(u,v), windowSize);\n        float s = sU * sV;\n\n        float curColId = floor(UvScale.x / tStep);\n        float sCol = step(targetColId - 0.2, curColId) - step(targetColId + 0.2, curColId);\n\n        float mLightP = mod(lightP, 2.);\n        float sRow = step(mLightP - 0.2, st.y) - step(mLightP, st.y);\n        if(ux == targetColId){\n            n =0.;\n        }\n        float timeP = min(0.75, abs ( sin(u_time/3.0) ) );\n        float hot = smoothstep(1.0,0.0,timeP);\n        vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), s);\n        //vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), 1.0);\n        float sFinal = s * sCol * sRow;\n        color += mix(baseColor, brightColor, sFinal*n);\n        if (st.y<0.01){\n        color = baseColor;\n         }\n        if(head ==1.0) { // \u9876\u90e8\u4eae\u7ebf\n            color = brightColor;\n        }\n        color = color * v_Color.rgb;\n\n        vec3 foggedColor = fog(color,fogColor,depth);\n\n        gl_FragColor = vec4(foggedColor,1.0);\n  }\n\n\n  if(u_circleSweep > 0.0 && v_worldDis < u_cityMinSize) {\n    float r = fract(((v_worldDis/u_cityMinSize) - u_time * u_circleSweepSpeed) * 2.0);\n    gl_FragColor.rgb += r * r * u_circleSweepColor;\n  }\n   \n  gl_FragColor.a *= u_opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',Pw='precision highp float;\n\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\n\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n\nvarying vec4 v_Color;\nuniform mat4 u_Mvp;\n\nuniform float u_circleSweep;\nuniform vec2 u_cityCenter;\n\nvarying float v_worldDis;\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\n\nvoid main() {\n  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);\n  vec4 project_pos = project_position(pos);\n\n   v_texCoord = a_Uv;\n\n  if(u_circleSweep > 0.0) {\n     vec2 lnglatscale = vec2(0.0);\n    if(u_CoordinateSystem != COORDINATE_SYSTEM_P20_2) {\n      lnglatscale = (a_Position.xy - u_cityCenter) * vec2(0.0, 0.135);\n    }\n    v_worldDis = length(a_Position.xy + lnglatscale - u_cityCenter);\n  }\n \n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n\n  float lightWeight = calc_lighting(pos);\n  // v_Color = a_Color;\n  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  setPickingColor(a_PickingColor);\n}\n',Iw=function(e){Object(et["a"])(n,e);var t=Cw(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t,r=e.baseColor,i=void 0===r?"rgb(16,16,16)":r,o=e.brightColor,a=void 0===o?"rgb(255,176,38)":o,s=e.windowColor,u=void 0===s?"rgb(30,60,89)":s,c=e.time,l=void 0===c?0:c,f=e.sweep,p=void 0===f?{enable:!1,sweepRadius:1,sweepColor:"rgb(255, 255, 255)",sweepSpeed:.4,sweepCenter:this.cityCenter}:f;return{u_cityCenter:p.sweepCenter||this.cityCenter,u_cityMinSize:this.cityMinSize*p.sweepRadius,u_circleSweep:p.enable?1:0,u_circleSweepColor:fi(p.sweepColor).slice(0,3),u_circleSweepSpeed:p.sweepSpeed,u_opacity:n,u_baseColor:fi(i),u_brightColor:fi(a),u_windowColor:fi(u),u_time:this.layer.getLayerAnimateTime()||l}}},{key:"calCityGeo",value:function(){var e=Object(Oi["a"])(this.layer.getSource().extent,4),t=e[0],n=e[1],r=e[2],i=e[3];if("GAODE2.x"===this.mapService.version){this.cityCenter=this.mapService.lngLatToCoord([(r+t)/2,(i+n)/2]);var o=this.mapService.lngLatToCoord([r,i]),a=this.mapService.lngLatToCoord([t,n]);this.cityMinSize=Math.sqrt(Math.pow(o[0]-a[0],2)+Math.pow(o[1]-a[1],2))/4}else{var s=r-t,u=i-n;this.cityCenter=[(r+t)/2,(i+n)/2],this.cityMinSize=Math.sqrt(Math.pow(s,2)+Math.pow(u,2))/4}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.calCityGeo(),this.startModelAnimate(),e.abrupt("return",this.buildModels());case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.layer.buildLayerModel({moduleName:"cityBuilding",vertexShader:Pw,fragmentShader:Mw,triangulation:xw,depth:{enable:!0},cull:{enable:!0,face:ad.BACK}});case 2:return t=e.sent,e.abrupt("return",[t]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ry.Attribute,descriptor:{name:"a_Normal",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:3,update:function(e,t,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ry.Attribute,descriptor:{name:"a_Size",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e){var t=e.size,n=void 0===t?10:t;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ry.Attribute,descriptor:{name:"a_Uv",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(e,t,n){return[n[3],n[4]]}}})}}]),n}(Lx);function Rw(e){var t=Lw();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Lw(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Dw=function(e){Object(et["a"])(n,e);var t=Rw(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"type","CityBuildingLayer"),e}return Object(He["a"])(n,[{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.layerModel=new Iw(this),e.next=3,this.initLayerModels();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setLight",value:function(e){this.updateLayerConfig({time:e})}},{key:"getModelType",value:function(){return"citybuilding"}}]),n}(Cx);function Nw(e){var t=Fw();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Fw(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var zw='precision highp float;\r\n// \u591a\u8fb9\u5f62\u9876\u70b9\u5750\u6807\r\nattribute vec3 a_Position;\r\n// \u591a\u8fb9\u5f62\u7ecf\u7eac\u5ea6\u5750\u6807\r\nattribute vec3 a_Pos;\r\nattribute float a_Size;\r\nattribute vec4 a_Color;\r\nuniform vec2 u_radius;\r\nuniform float u_coverage: 0.9;\r\nuniform float u_angle: 0;\r\nuniform mat4 u_ModelMatrix;\r\nuniform mat4 u_Mvp;\r\nvarying vec4 v_color;\r\n\r\nuniform vec2 u_SceneCenterMKT;\r\n\r\n#pragma include "projection"\r\n#pragma include "project"\r\n#pragma include "picking"\r\n\r\nvoid main() {\r\n  v_color = a_Color;\r\n\r\n  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\r\n  vec2 offset = a_Position.xy * u_radius * rotationMatrix * u_coverage ;\r\n  // vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r\n  // vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\r\n  // gl_Position = project_common_position_to_clipspace(project_pos);\r\n\r\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\r\n    vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r\n    vec2 customLnglat = customProject(lnglat) - u_SceneCenterMKT; // \u5c06\u7ecf\u7eac\u5ea6\u8f6c\u6362\u4e3a\u9ad8\u5fb72.0\u9700\u8981\u7684\u5e73\u9762\u5750\u6807\r\n    vec4 project_pos = project_position(vec4(customLnglat, 0, 1.0));\r\n    gl_Position = u_Mvp * (project_pos);\r\n  } else {\r\n     vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r\n    vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\r\n    gl_Position = project_common_position_to_clipspace(project_pos);\r\n  }\r\n\r\n  setPickingColor(a_PickingColor);\r\n}\r\n',Bw='precision highp float;\nvarying vec4 v_color;\nuniform float u_opacity: 1;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a *= u_opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',Uw=function(e){Object(et["a"])(n,e);var t=Nw(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=e.coverage,r=e.angle;return{u_opacity:t||1,u_coverage:n||.9,u_angle:r||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.buildModels());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.layer.buildLayerModel({moduleName:"heatmapGrid",vertexShader:zw,fragmentShader:Bw,triangulation:ww,primitive:ad.TRIANGLES,depth:{enable:!1}});case 2:return t=e.sent,e.abrupt("return",[t]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:Ry.Attribute,descriptor:{name:"a_Pos",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:3,update:function(e){var t="GAODE2.x"===e.version?e.originCoordinates:e.coordinates;return[t[0],t[1],0]}}})}}]),n}(Lx);function Vw(e){var t=Hw();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Hw(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Gw,Ww,qw='precision highp float;\n// \u591a\u8fb9\u5f62\u9876\u70b9\u5750\u6807\nattribute vec3 a_Position;\n// \u591a\u8fb9\u5f62\u7ecf\u7eac\u5ea6\u5750\u6807\nattribute vec3 a_Pos;\n\nattribute vec3 a_Normal;\nattribute float a_Size;\nattribute vec4 a_Color;\nuniform vec2 u_radius;\nuniform float u_coverage: 0.9;\nuniform float u_angle: 0;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nvarying vec4 v_color;\n\nuniform vec2 u_SceneCenterMKT;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "light"\n#pragma include "picking"\n\n\nvoid main() {\n  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\n  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));\n\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n \n    vec2 lnglat = unProjectFlat(a_Pos.xy + offset); // \u7ecf\u7eac\u5ea6\n    vec2 customLnglat = customProject(lnglat) - u_SceneCenterMKT; // \u5c06\u7ecf\u7eac\u5ea6\u8f6c\u6362\u4e3a\u9ad8\u5fb72.0\u9700\u8981\u7684\u5e73\u9762\u5750\u6807\n    vec4 project_pos = project_position(vec4(customLnglat, a_Position.z * a_Size, 1.0));\n\n    float lightWeight = calc_lighting(project_pos);\n    v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);\n  \n    gl_Position = u_Mvp * vec4(customLnglat , a_Position.z * a_Size, 1.0);\n  } else {\n    vec2 lnglat = unProjectFlat(a_Pos.xy + offset); // \u5b9e\u9645\u7684\u7ecf\u7eac\u5ea6\n    vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));\n    \n    float lightWeight = calc_lighting(project_pos);\n    v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);\n    \n    gl_Position = project_common_position_to_clipspace(project_pos);\n  }\n\n\n\n  setPickingColor(a_PickingColor);\n}\n',Zw='precision highp float;\nvarying vec4 v_color;\nuniform float u_opacity: 1;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a *= u_opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',Yw=function(e){Object(et["a"])(n,e);var t=Vw(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=e.coverage,r=e.angle;return{u_opacity:t||1,u_coverage:n||1,u_angle:r||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.buildModels());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.layer.buildLayerModel({moduleName:"heatmapGrid3d",vertexShader:qw,fragmentShader:Zw,triangulation:fw,primitive:ad.TRIANGLES,depth:{enable:!0}});case 2:return t=e.sent,e.abrupt("return",[t]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Ry.Attribute,descriptor:{name:"a_Size",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e){var t=e.size;return Array.isArray(t)?[t[0]]:[t]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ry.Attribute,descriptor:{name:"a_Normal",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:3,update:function(e,t,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:Ry.Attribute,descriptor:{name:"a_Pos",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:3,update:function(e){var t="GAODE2.x"===e.version?e.originCoordinates:e.coordinates;return[t[0],t[1],0]}}})}}]),n}(Lx);function Xw(e,t){for(var n=[],r=[],i=[],o=e+1,a=t+1,s=e/2,u=t/2,c=0;c<a;c++)for(var l=c-u,f=0;f<o;f++){var p=f-s;r.push(p/s,-l/u,0),i.push(f/e),i.push(1-c/t)}for(var h=0;h<t;h++)for(var d=0;d<e;d++){var v=d+o*h,m=d+o*(h+1),g=d+1+o*(h+1),y=d+1+o*h;n.push(v,m,y),n.push(m,g,y)}return{vertices:r,indices:n,uvs:i}}function Kw(e){var t=$w();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function $w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Qw="uniform sampler2D u_texture;\nuniform sampler2D u_colorTexture;\nuniform float u_opacity;\nvarying vec2 v_texCoord;\nvarying float v_intensity;\n\nvoid main(){\n   \n     float intensity = texture2D(u_texture, v_texCoord).r;\n    vec4 color = texture2D(u_colorTexture,vec2(intensity, 0));\n    gl_FragColor = color;\n    // gl_FragColor.a = color.a * smoothstep(0.1,0.2,intensity)* u_opacity;\n     gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;\n}\n",Jw='precision highp float;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nuniform sampler2D u_texture;\nvarying vec2 v_texCoord;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_InverseViewProjectionMatrix;\nuniform mat4 u_ViewProjectionMatrixUncentered;\nvarying float v_intensity;\n\n\nvec2 toBezier(float t, vec2 P0, vec2 P1, vec2 P2, vec2 P3) {\n    float t2 = t * t;\n    float one_minus_t = 1.0 - t;\n    float one_minus_t2 = one_minus_t * one_minus_t;\n    return (P0 * one_minus_t2 * one_minus_t + P1 * 3.0 * t * one_minus_t2 + P2 * 3.0 * t2 * one_minus_t + P3 * t2 * t);\n}\nvec2 toBezier(float t, vec4 p){\n    return toBezier(t, vec2(0.0, 0.0), vec2(p.x, p.y), vec2(p.z, p.w), vec2(1.0, 1.0));\n}\n#pragma include "projection"\nvoid main() {\n  v_texCoord = a_Uv;\n\n  vec2 pos = a_Uv * vec2(2.0) - vec2(1.0); // \u5c06\u539f\u672c 0 -> 1 \u7684 uv \u8f6c\u6362\u4e3a -1 -> 1 \u7684\u6807\u51c6\u5750\u6807\u7a7a\u95f4\uff08NDC\uff09\n\n  vec4 p1 = vec4(pos, 0.0, 1.0); // x/y \u5e73\u9762\u4e0a\u7684\u70b9\uff08z == 0\uff09\u53ef\u4ee5\u8ba4\u4e3a\u662f\u4e09\u7ef4\u4e0a\u7684\u70b9\u88ab\u6295\u5f71\u5230\u5e73\u9762\u540e\u7684\u70b9\n\tvec4 p2 = vec4(pos, 1.0, 1.0); // \u5e73\u884c\u4e8ex/y\u5e73\u9762\u3001z==1 \u7684\u5e73\u9762\u4e0a\u7684\u70b9\n\n\tvec4 inverseP1 = u_InverseViewProjectionMatrix * p1; // \u6839\u636e\u89c6\u56fe\u6295\u5f71\u77e9\u9635\u7684\u9006\u77e9\u9635\u5e73\u9762\u4e0a\u7684\u53cd\u7b97\u51fa\u4e09\u7ef4\u7a7a\u95f4\u4e2d\u7684\u70b9\uff08p1\u5e73\u9762\u4e0a\u7684\u70b9\uff09\n\tvec4 inverseP2 = u_InverseViewProjectionMatrix * p2;\n\n  inverseP1 = inverseP1 / inverseP1.w; // \u5f52\u4e00\u5316\u64cd\u4f5c\uff08\u5f52\u4e00\u5316\u540e\u4e3a\u4e16\u754c\u5750\u6807\uff09\n\tinverseP2 = inverseP2 / inverseP2.w;\n\n\tfloat zPos = (0.0 - inverseP1.z) / (inverseP2.z - inverseP1.z); // ??\n\tvec4 position = inverseP1 + zPos * (inverseP2 - inverseP1);\n\n  vec4 b= vec4(0.5000, 0.0, 1.0, 0.5000);\n  float fh;\n\n  v_intensity = texture2D(u_texture, v_texCoord).r;\n  fh = toBezier(v_intensity, b).y;\n  gl_Position = u_ViewProjectionMatrixUncentered * vec4(position.xy, fh * project_pixel(50.), 1.0);\n \n}\n',eO="uniform sampler2D u_texture;        // \u70ed\u529b\u5f3a\u5ea6\u56fe\nuniform sampler2D u_colorTexture;   // \u6839\u636e\u5f3a\u5ea6\u5206\u5e03\u7684\u8272\u5e26\nuniform float u_opacity;\nvarying vec2 v_texCoord;\n\nuniform vec2 u_ViewportSize;\n\nfloat getBlurIndusty() {\n    float vW = 2.0/u_ViewportSize.x;\n    float vH = 2.0/u_ViewportSize.y;\n    vec2 vUv = v_texCoord;\n    float i11 = texture2D( u_texture, vec2( vUv.x - 1.0 * vW, vUv.y + 1.0 * vH) ).r;\n    float i12 = texture2D( u_texture, vec2( vUv.x - 0.0 * vW, vUv.y + 1.0 * vH) ).r;\n    float i13 = texture2D( u_texture, vec2( vUv.x + 1.0 * vW, vUv.y + 1.0 * vH) ).r;\n\n    float i21 = texture2D( u_texture, vec2( vUv.x - 1.0 * vW, vUv.y) ).r;\n    float i22 = texture2D( u_texture, vec2( vUv.x , vUv.y) ).r;\n    float i23 = texture2D( u_texture, vec2( vUv.x + 1.0 * vW, vUv.y) ).r;\n\n    float i31 = texture2D( u_texture, vec2( vUv.x - 1.0 * vW, vUv.y-1.0*vH) ).r;\n    float i32 = texture2D( u_texture, vec2( vUv.x - 0.0 * vW, vUv.y-1.0*vH) ).r;\n    float i33 = texture2D( u_texture, vec2( vUv.x + 1.0 * vW, vUv.y-1.0*vH) ).r;\n\n    return(\n        i11 + \n        i12 + \n        i13 + \n        i21 + \n        i21 + \n        i22 + \n        i23 + \n        i31 + \n        i32 + \n        i33\n        )/9.0;\n}\n\n\nvoid main(){\n    // float intensity = texture2D(u_texture, v_texCoord).r;\n    float intensity = getBlurIndusty();\n    vec4 color = texture2D(u_colorTexture, vec2(intensity, 0.0));\n\n    gl_FragColor =color;\n    gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;\n\n}\n",tO="precision highp float;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n\nvoid main() {\n  v_texCoord = a_Uv;\n\n  gl_Position = vec4(a_Position.xy, 0, 1.);\n}\n",nO="precision highp float;\nuniform float u_intensity;\nvarying float v_weight;\nvarying vec2 v_extrude;\n#define GAUSS_COEF  0.3989422804014327\nvoid main(){\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = v_weight * u_intensity * GAUSS_COEF * exp(d);\n    gl_FragColor = vec4(val, 1., 1., 1.);\n}\n",rO='precision highp float;\nattribute vec3 a_Position;\nattribute float a_Size;\nattribute vec2 a_Dir;\nuniform float u_intensity;\nuniform float u_radius;\nvarying vec2 v_extrude;\nvarying float v_weight;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\n#define GAUSS_COEF  0.3989422804014327\n\n#pragma include "projection"\n\nvoid main(){\n    v_weight = a_Size;\n    float ZERO = 1.0 / 255.0 / 16.0;\n    float extrude_x = a_Dir.x * 2.0 -1.0;\n    float extrude_y = a_Dir.y * 2.0 -1.0;\n    vec2 extrude_dir = normalize(vec2(extrude_x,extrude_y));\n    float S = sqrt(-2.0 * log(ZERO / a_Size / u_intensity / GAUSS_COEF)) / 2.5;\n    v_extrude = extrude_dir * S;\n\n    vec2 offset = project_pixel(v_extrude * u_radius);\n    vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));\n\n    // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));\n\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n        gl_Position = u_Mvp * (vec4(project_pos.xy + offset, 0.0, 1.0));\n    } else {\n        gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));\n    }\n}\n',iO=(Gw=Object(pp["injectable"])(),Gw(Ww=function(e){Object(et["a"])(n,e);var t=Kw(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"render",value:function(e){var t=this,n=this.rendererService,r=n.clear,i=n.useFramebuffer;i(this.heatmapFramerBuffer,(function(){r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:t.heatmapFramerBuffer}),t.drawIntensityMode()})),this.layer.styleNeedUpdate&&this.updateColorTexture(),"heatmap"===this.shapeType?this.drawColorMode(e):this.draw3DHeatMap(e)}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o,a,s,u,c,l;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.rendererService,r=n.createFramebuffer,i=n.getViewportSize,o=n.createTexture2D,a=this.styleAttributeService.getLayerStyleAttribute("shape"),s=(null===a||void 0===a||null===(t=a.scale)||void 0===t?void 0:t.field)||"heatmap",this.shapeType=s,e.next=6,this.buildHeatMapIntensity();case 6:return this.intensityModel=e.sent,this.colorModel="heatmap"===s?this.buildHeatmapColor():this.build3dHeatMap(),u=i(),c=u.width,l=u.height,this.heatmapFramerBuffer=r({color:o({width:Math.floor(c/4),height:Math.floor(l/4),wrapS:ad.CLAMP_TO_EDGE,wrapT:ad.CLAMP_TO_EDGE,min:ad.LINEAR,mag:ad.LINEAR}),depth:!1}),this.updateColorTexture(),e.abrupt("return",[this.intensityModel,this.colorModel]);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.initModels());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"dir",type:Ry.Attribute,descriptor:{name:"a_Dir",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(e,t,n){return[n[3],n[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ry.Attribute,descriptor:{name:"a_Size",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e){var t=e.size,n=void 0===t?1:t;return[n]}}})}},{key:"buildHeatMapIntensity",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.layer.triangulation=Sw,e.next=3,this.layer.buildLayerModel({moduleName:"heatmapIntensity",vertexShader:rO,fragmentShader:nO,triangulation:Sw,depth:{enable:!1},cull:{enable:!0,face:wi(this.mapService.version)}});case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildHeatmapColor",value:function(){this.shaderModuleService.registerModule("heatmapColor",{vs:tO,fs:eO});var e=this.shaderModuleService.getModule("heatmapColor"),t=e.vs,n=e.fs,r=e.uniforms,i=this.rendererService,o=i.createAttribute,a=i.createElements,s=i.createBuffer,u=i.createModel;return u({vs:t,fs:n,attributes:{a_Position:o({buffer:s({data:[-1,1,0,1,1,0,-1,-1,0,1,-1,0],type:ad.FLOAT}),size:3}),a_Uv:o({buffer:s({data:[0,1,1,1,0,0,1,0],type:ad.FLOAT}),size:2})},uniforms:Object(N["a"])({},r),depth:{enable:!1},elements:a({data:[0,2,1,2,3,1],type:ad.UNSIGNED_INT,count:6})})}},{key:"drawIntensityMode",value:function(){var e,t=this.layer.getLayerConfig(),n=t.opacity,r=t.intensity,i=void 0===r?10:r,o=t.radius,a=void 0===o?5:o;this.layerService.beforeRenderData(this.layer),this.layer.hooks.beforeRender.call(),null===(e=this.intensityModel)||void 0===e||e.draw({uniforms:{u_opacity:n||1,u_radius:a,u_intensity:i},blend:{enable:!0,func:{srcRGB:ad.ONE,srcAlpha:1,dstRGB:ad.ONE,dstAlpha:1}},stencil:{enable:!1,mask:255,func:{cmp:514,ref:1,mask:255}}}),this.layer.hooks.afterRender.call()}},{key:"drawColorMode",value:function(e){var t,n=this.layer.getLayerConfig(),r=n.opacity;null===(t=this.colorModel)||void 0===t||t.draw({uniforms:{u_opacity:r||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer},blend:this.getBlend(),stencil:this.getStencil(e)})}},{key:"draw3DHeatMap",value:function(e){var t,n=this.layer.getLayerConfig(),r=n.opacity,i=a.create();a.invert(i,this.cameraService.getViewProjectionMatrixUncentered()),null===(t=this.colorModel)||void 0===t||t.draw({uniforms:{u_opacity:r||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer,u_ViewProjectionMatrixUncentered:this.cameraService.getViewProjectionMatrixUncentered(),u_InverseViewProjectionMatrix:Object(D["a"])(i)},blend:{enable:!0,func:{srcRGB:ad.SRC_ALPHA,srcAlpha:1,dstRGB:ad.ONE_MINUS_SRC_ALPHA,dstAlpha:1}},stencil:this.getStencil(e)})}},{key:"build3dHeatMap",value:function(){var e=this.rendererService.getViewportSize,t=e(),n=t.width,r=t.height,i=Xw(n/4,r/4);this.shaderModuleService.registerModule("heatmap3dColor",{vs:Jw,fs:Qw});var o=this.shaderModuleService.getModule("heatmap3dColor"),a=o.vs,s=o.fs,u=o.uniforms,c=this.rendererService,l=c.createAttribute,f=c.createElements,p=c.createBuffer,h=c.createModel;return h({vs:a,fs:s,attributes:{a_Position:l({buffer:p({data:i.vertices,type:ad.FLOAT}),size:3}),a_Uv:l({buffer:p({data:i.uvs,type:ad.FLOAT}),size:2})},primitive:ad.TRIANGLES,uniforms:Object(N["a"])({},u),depth:{enable:!0},blend:{enable:!0,func:{srcRGB:ad.SRC_ALPHA,srcAlpha:1,dstRGB:ad.ONE_MINUS_SRC_ALPHA,dstAlpha:1}},elements:f({data:i.indices,type:ad.UNSIGNED_INT,count:i.indices.length})})}},{key:"updateStyle",value:function(){this.updateColorTexture()}},{key:"updateColorTexture",value:function(){var e=this.rendererService.createTexture2D;this.texture&&this.texture.destroy();var t=this.layer.getLayerConfig(),n=t.rampColors,r=di(n);this.colorTexture=e({data:new Uint8Array(r.data),width:r.width,height:r.height,wrapS:ad.CLAMP_TO_EDGE,wrapT:ad.CLAMP_TO_EDGE,min:ad.NEAREST,mag:ad.NEAREST,flipY:!1})}}]),n}(Lx))||Ww);function oO(e){var t=aO();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function aO(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var sO='precision highp float;\nvarying vec4 v_color;\nuniform float u_opacity: 1;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a *= u_opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',uO='precision highp float;\n// \u591a\u8fb9\u5f62\u9876\u70b9\u5750\u6807\nattribute vec3 a_Position;\n// \u591a\u8fb9\u5f62\u7ecf\u7eac\u5ea6\u5750\u6807\nattribute vec3 a_Pos;\nattribute float a_Size;\nattribute vec4 a_Color;\nuniform vec2 u_radius;\nuniform float u_coverage: 0.9;\nuniform float u_angle: 0;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nvarying vec4 v_color;\n\nuniform vec2 u_SceneCenterMKT;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nvoid main() {\n  v_color = a_Color;\n    \n  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\n  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));\n  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\n \n  // vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0., 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // gl_Position = u_Mvp * (vec4(project_pos.xy, 0., 1.0));\n    // gl_Position = u_Mvp * (vec4(a_Pos.xy + offset, 0., 1.0));\n    vec2 customLnglat = customProject(lnglat) - u_SceneCenterMKT;\n    vec4 project_pos = project_position(vec4(customLnglat, 0, 1.0));\n    gl_Position = u_Mvp * vec4(project_pos.xy, 0.0, 1.0);\n  } else {\n    vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0., 1.0));\n  }\n  setPickingColor(a_PickingColor);\n}\n',cO=function(e){Object(et["a"])(n,e);var t=oO(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=e.coverage,r=e.angle;return{u_opacity:t||1,u_coverage:n||.9,u_angle:r||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.buildModels());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.layer.buildLayerModel({moduleName:"heatmapHexagon",vertexShader:uO,fragmentShader:sO,triangulation:ww,depth:{enable:!1},primitive:ad.TRIANGLES});case 2:return t=e.sent,e.abrupt("return",[t]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:Ry.Attribute,descriptor:{name:"a_Pos",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:3,update:function(e){var t="GAODE2.x"===e.version?e.originCoordinates:e.coordinates;return[t[0],t[1],0]}}})}}]),n}(Lx),lO={heatmap:iO,heatmap3d:iO,grid:Uw,grid3d:Yw,hexagon:cO},fO=lO;function pO(e){var t=hO();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function hO(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var dO=function(e){Object(et["a"])(n,e);var t=pO(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"type","HeatMapLayer"),e}return Object(He["a"])(n,[{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.getModelType(),this.layerModel=new fO[t](this),e.next=4,this.initLayerModels();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"renderModels",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.getModelType();return"heatmap"===n?(this.layerModel&&this.layerModel.render(t),this):(this.encodeDataLength<=0&&!this.forceRender||(this.hooks.beforeRender.call(),this.models.forEach((function(n){return n.draw({uniforms:e.layerModel.getUninforms(),blend:e.layerModel.getBlend(),stencil:e.layerModel.getStencil(t)})})),this.hooks.afterRender.call()),this)}},{key:"updateModelData",value:function(e){e.attributes&&e.elements?this.models[0].updateAttributesAndElements(e.attributes,e.elements):console.warn("data error")}},{key:"getModelType",value:function(){var e,t=this.styleAttributeService.getLayerStyleAttribute("shape"),n=this.getLayerConfig(),r=n.shape3d,i=this.getSource(),o=i.data.type,a=(null===t||void 0===t||null===(e=t.scale)||void 0===e?void 0:e.field)||"heatmap";return"heatmap"===a||"heatmap3d"===a?"heatmap":"hexagon"===o?-1===(null===r||void 0===r?void 0:r.indexOf(a))?"hexagon":"grid3d":"grid"===o?-1===(null===r||void 0===r?void 0:r.indexOf(a))?"grid":"grid3d":"heatmap"}}]),n}(Cx);function vO(e){var t=mO();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function mO(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var gO="precision mediump float;\nuniform float u_opacity: 1.0;\nuniform sampler2D u_texture;\nvarying vec2 v_texCoord;\nvoid main() {\n  vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));\n  gl_FragColor = color;\n  gl_FragColor.a *= u_opacity;\n  if(gl_FragColor.a < 0.01)\n    discard;\n}\n",yO='precision highp float;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n#pragma include "projection"\nvoid main() {\n   v_texCoord = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n   // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));\n   } else {\n      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n   }\n}\n',bO=function(e){Object(et["a"])(n,e);var t=vO(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity;return{u_opacity:t||1,u_texture:this.texture}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o,a,s=this;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.layer.getSource(),n=this.rendererService.createTexture2D,this.texture=n({height:0,width:0}),!pr){e.next=11;break}r=this.layerService.sceneService.getSceneConfig().canvas,i=r.createImage(),i.crossOrigin="anonymous",i.src=t.data.originData,i.onload=function(){s.texture=n({data:i,width:i.width,height:i.height}),s.layerService.reRender()},e.next=15;break;case 11:return e.next=13,t.data.images;case 13:o=e.sent,this.texture=n({data:o[0],width:o[0].width,height:o[0].height,mag:ad.LINEAR,min:ad.LINEAR});case 15:return e.next=17,this.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:yO,fragmentShader:gO,triangulation:Ow,primitive:ad.TRIANGLES,blend:{enable:!0},depth:{enable:!1}});case 17:return a=e.sent,e.abrupt("return",[a]);case 19:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e;null===(e=this.texture)||void 0===e||e.destroy()}},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.initModels());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ry.Attribute,descriptor:{name:"a_Uv",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(e,t,n){return[n[3],n[4]]}}})}}]),n}(Lx),_O={image:bO},xO=_O;function wO(e){var t=OO();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function OO(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var EO=function(e){Object(et["a"])(n,e);var t=wO(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"type","ImageLayer"),e}return Object(He["a"])(n,[{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.getModelType(),this.layerModel=new xO[t](this),e.next=4,this.initLayerModels();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getDefaultConfig",value:function(){var e=this.getModelType(),t={image:{}};return t[e]}},{key:"getModelType",value:function(){return"image"}}]),n}(Cx);function SO(e){var t=jO();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function jO(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var AO='\nuniform float u_opacity;\n\nvarying vec4 v_dash_array;\nvarying vec4 v_color;\n\nuniform float segmentNumber;\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float d_distance_ratio = styleMappingMat[3].b; // \u5f53\u524d\u9876\u70b9\u5728\u5f27\u7ebf\u4e2d\u6240\u5904\u7684\u5206\u6bb5\u6bd4\u4f8b\n\n  gl_FragColor = v_color;\n  gl_FragColor.a *= opacity;\n\n  float flag = 0.;\n  float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n  if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {\n    flag = 1.;\n  };\n  gl_FragColor.a *=flag;\n  \n  gl_FragColor = filterColor(gl_FragColor);\n}',kO='\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nvarying vec4 v_color;\n\n\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\nuniform float u_lineDir: 1.0;\nvarying vec4 v_dash_array;\n\nuniform float u_thetaOffset: 0.314;\n\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n#pragma include "styleMappingCalThetaOffset"\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat bezier3(vec3 arr, float t) {\n  float ut = 1. - t;\n  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;\n}\nvec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {\n  vec2 center = target - source;\n  float r = length(center);\n  float theta = atan(center.y, center.x);\n  float thetaOffset = arcThetaOffset;\n  float r2 = r / 2.0 / cos(thetaOffset);\n  float theta2 = theta + thetaOffset;\n  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);\n  if(u_lineDir == 1.0) { // \u6b63\u5411\n    return mid;\n  } else { // \u9006\u5411\n    // (mid + vmin)/2 = (s + t)/2\n    vec2 vmid = source + target - mid;\n    return vmid;\n  }\n  // return mid;\n}\nfloat getSegmentRatio(float index) {\n  // dash: index / (segmentNumber - 1.);\n  // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));\n  return index / (segmentNumber - 1.);\n}\nvec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {\n  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation\n  vec2 mid = midPoint(source, target, arcThetaOffset);\n  vec3 x = vec3(source.x, mid.x, target.x);\n  vec3 y = vec3(source.y, mid.y, target.y);\n  return vec2(bezier3(x ,t), bezier3(y,t));\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nvoid main() {\n  v_color = a_Color;\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636e\u96c6\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke -> thetaOffset... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n\n  vec2 thetaOffsetAndOffset = calThetaOffsetAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][1] = thetaOffsetAndOffset.r;\n  textureOffset = thetaOffsetAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  \n  vec2 source = a_Instance.rg;  // \u8d77\u59cb\u70b9\n  vec2 target =  a_Instance.ba; // \u7ec8\u70b9\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n\n  vec2 s = source;\n  vec2 t = target;\n  \n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    s = unProjCustomCoord(source);\n    t = unProjCustomCoord(target);\n  }\n  float total_Distance = pixelDistance(s, t) / 2.0 * PI;\n  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;\n\n  styleMappingMat[3].b = segmentIndex / segmentNumber;\n\n  // styleMappingMat[0][1] - arcThetaOffset\n  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, styleMappingMat[0][1]), 0.0, 1.0));\n  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, styleMappingMat[0][1]), 0.0, 1.0));\n  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n  //unProjCustomCoord\n  \n  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));\n  \n\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));\n    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));\n  }\n  gl_PointSize = 5.0;\n  setPickingColor(a_PickingColor);\n}\n',CO='\n#define Animate 0.0\n#define LineTexture 1.0\n\nuniform float u_opacity;\nuniform float u_textureBlend;\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\n// varying vec2 v_normal;\nvarying vec4 v_dash_array;\nvarying vec4 v_color;\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\nuniform float u_line_texture;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\n\nuniform float segmentNumber;\nvarying vec2 v_iconMapUV;\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  float d_segmentIndex = styleMappingMat[3].r;   // \u5f53\u524d\u9876\u70b9\u5728\u5f27\u7ebf\u4e2d\u6240\u5904\u7684\u5206\u6bb5\u4f4d\u7f6e\n  float d_distance_ratio = styleMappingMat[3].b; // \u5f53\u524d\u9876\u70b9\u5728\u5f27\u7ebf\u4e2d\u6240\u5904\u7684\u5206\u6bb5\u6bd4\u4f8b\n\n  gl_FragColor = v_color;\n  \n  gl_FragColor.a *= opacity;\n\n  if(u_animate.x == Animate && u_line_texture != LineTexture) {\n      animateSpeed = u_time / u_animate.y;\n      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      // alpha = smoothstep(0., 1., alpha);\n      alpha = clamp(alpha, 0.0, 1.0);\n      gl_FragColor.a *= alpha;\n  }\n\n  // \u5f53\u5b58\u5728\u8d34\u56fe\u65f6\u5728\u5e95\u8272\u4e0a\u8d34\u4e0a\u8d34\u56fe\n  if(u_line_texture == LineTexture) { // while load texture\n    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / segmentNumber));\n    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);\n\n    float count = styleMappingMat[3].g; // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n\n    float time = 0.0;\n    if(u_animate.x == Animate) {\n      time = u_time / u_animate.y;\n    }\n    float redioCount = arcRadio * count;\n\n    float u = fract(redioCount - time);\n    float v = styleMappingMat[3].a; // \u6a2a\u5411 v\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n\n    vec4 pattern = texture2D(u_texture, uv);\n\n    if(u_animate.x == Animate) {\n      float currentPlane = floor(redioCount - time);\n      float textureStep = floor(count * u_animate.z);\n      float a = mod(currentPlane, textureStep);\n      if(a < textureStep - 1.0) {\n        pattern = vec4(0.0);\n      }\n    }\n\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      gl_FragColor = filterColor(gl_FragColor + pattern);\n    } else { // replace\n        pattern.a *= opacity;\n        if(gl_FragColor.a <= 0.0) {\n          pattern.a = 0.0;\n        }\n        gl_FragColor = filterColor(pattern);\n    }\n    \n  } else {\n     gl_FragColor = filterColor(gl_FragColor);\n  }\n}',TO='#define Animate 0.0\n#define LineTexture 1.0\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\nvarying vec4 v_color;\n\nuniform float u_lineDir: 1.0;\n\nuniform float u_thetaOffset: 0.314;\nuniform float u_icon_step: 100;\nuniform float u_line_texture: 0.0;\nattribute vec2 a_iconMapUV;\nvarying vec2 v_iconMapUV;\n\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n#pragma include "styleMappingCalThetaOffset"\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat bezier3(vec3 arr, float t) {\n  float ut = 1. - t;\n  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;\n}\nvec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {\n  vec2 center = target - source;\n  float r = length(center);\n  float theta = atan(center.y, center.x);\n  float thetaOffset = arcThetaOffset;\n  float r2 = r / 2.0 / cos(thetaOffset);\n  float theta2 = theta + thetaOffset;\n  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);\n  if(u_lineDir == 1.0) { // \u6b63\u5411\n    return mid;\n  } else { // \u9006\u5411\n    // (mid + vmin)/2 = (s + t)/2\n    vec2 vmid = source + target - mid;\n    return vmid;\n  }\n  // return mid;\n}\nfloat getSegmentRatio(float index) {\n    // dash: index / (segmentNumber - 1.);\n    // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));\n    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));\n    //  return index / (segmentNumber - 1.);\n}\nvec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {\n  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation\n  vec2 mid = midPoint(source, target, arcThetaOffset);\n  vec3 x = vec3(source.x, mid.x, target.x);\n  vec3 y = vec3(source.y, mid.y, target.y);\n  return vec2(bezier3(x ,t), bezier3(y,t));\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nvoid main() {\n  v_color = a_Color;\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636e\u96c6\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke -> thetaOffset... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n\n  vec2 thetaOffsetAndOffset = calThetaOffsetAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][1] = thetaOffsetAndOffset.r;\n  textureOffset = thetaOffsetAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  \n  vec2 source = a_Instance.rg;  // \u8d77\u59cb\u70b9\n  vec2 target =  a_Instance.ba; // \u7ec8\u70b9\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  float d_distance_ratio;\n  \n  if(u_animate.x == Animate) {\n      d_distance_ratio = segmentIndex / segmentNumber;\n      if(u_lineDir != 1.0) {\n        d_distance_ratio = 1.0 - d_distance_ratio;\n      }\n  }\n\n   styleMappingMat[3].b = d_distance_ratio;\n\n  // styleMappingMat[0][1] - arcThetaOffset\n  float arcThetaOffset = styleMappingMat[0][1];\n  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, arcThetaOffset), 0.0, 1.0));\n  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, arcThetaOffset), 0.0, 1.0));\n  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n  //unProjCustomCoord\n  \n  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));\n\n\n  float d_segmentIndex = a_Position.x + 1.0; // \u5f53\u524d\u9876\u70b9\u5728\u5f27\u7ebf\u4e2d\u6240\u5904\u7684\u5206\u6bb5\u4f4d\u7f6e\n  styleMappingMat[3].r = d_segmentIndex;\n\n  if(LineTexture == u_line_texture) { // \u5f00\u542f\u8d34\u56fe\u6a21\u5f0f\n\n    float arcDistrance = length(source - target); // \u8d77\u59cb\u70b9\u548c\u7ec8\u70b9\u7684\u8ddd\u79bb\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap\n      arcDistrance *= 1000000.0;\n    }\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox\n      // arcDistrance *= 8.0;\n      arcDistrance = project_pixel_allmap(arcDistrance);\n    }\n    v_iconMapUV = a_iconMapUV;\n\n    float pixelLen = project_pixel_texture(u_icon_step); // \u8d34\u56fe\u6cbf\u5f27\u7ebf\u65b9\u5411\u7684\u957f\u5ea6 - \u968f\u5730\u56fe\u7f29\u653e\u6539\u53d8\n    float texCount = floor(arcDistrance/pixelLen); // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n     styleMappingMat[3].g = texCount;\n\n    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\n    float linePixelSize = project_pixel(a_Size); // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\n     styleMappingMat[3].a = lineOffsetWidth/linePixelSize; // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n  }\n  \n\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));\n    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));\n  }\n  setPickingColor(a_PickingColor);\n}\n',MO='#define Animate 0.0\n#define LineTexture 1.0\n\nuniform float u_opacity;\nuniform float u_textureBlend;\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\n// varying vec2 v_normal;\nvarying vec4 v_dash_array;\nvarying vec4 v_color;\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\nuniform float u_line_texture;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\n\nuniform float segmentNumber;\nvarying vec2 v_iconMapUV;\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float d_segmentIndex = styleMappingMat[3].r;   // \u5f53\u524d\u9876\u70b9\u5728\u5f27\u7ebf\u4e2d\u6240\u5904\u7684\u5206\u6bb5\u4f4d\u7f6e\n\n  // \u8bbe\u7f6e\u5f27\u7ebf\u7684\u5e95\u8272\n  gl_FragColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);\n  gl_FragColor.a *= opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}',PO='\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nvarying vec4 v_color;\n\nuniform float u_lineDir: 1.0;\n\nuniform float u_thetaOffset: 0.314;\n\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n#pragma include "styleMappingCalThetaOffset"\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat bezier3(vec3 arr, float t) {\n  float ut = 1. - t;\n  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;\n}\nvec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {\n  vec2 center = target - source;\n  float r = length(center);\n  float theta = atan(center.y, center.x);\n  float thetaOffset = arcThetaOffset;\n  float r2 = r / 2.0 / cos(thetaOffset);\n  float theta2 = theta + thetaOffset;\n  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);\n  if(u_lineDir == 1.0) { // \u6b63\u5411\n    return mid;\n  } else { // \u9006\u5411\n    // (mid + vmin)/2 = (s + t)/2\n    vec2 vmid = source + target - mid;\n    return vmid;\n  }\n  // return mid;\n}\nfloat getSegmentRatio(float index) {\n    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));\n}\nvec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {\n  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation\n  vec2 mid = midPoint(source, target, arcThetaOffset);\n  vec3 x = vec3(source.x, mid.x, target.x);\n  vec3 y = vec3(source.y, mid.y, target.y);\n  return vec2(bezier3(x ,t), bezier3(y,t));\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nvoid main() {\n  v_color = a_Color;\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636e\u96c6\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke -> thetaOffset... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n\n  vec2 thetaOffsetAndOffset = calThetaOffsetAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][1] = thetaOffsetAndOffset.r;\n  textureOffset = thetaOffsetAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  \n  vec2 source = a_Instance.rg;  // \u8d77\u59cb\u70b9\n  vec2 target =  a_Instance.ba; // \u7ec8\u70b9\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  float d_distance_ratio;\n\n   styleMappingMat[3].b = d_distance_ratio;\n\n  // styleMappingMat[0][1] - arcThetaOffset\n  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, styleMappingMat[0][1]), 0.0, 1.0));\n  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, styleMappingMat[0][1]), 0.0, 1.0));\n  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n  //unProjCustomCoord\n  \n  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));\n\n\n  float d_segmentIndex = a_Position.x + 1.0; // \u5f53\u524d\u9876\u70b9\u5728\u5f27\u7ebf\u4e2d\u6240\u5904\u7684\u5206\u6bb5\u4f4d\u7f6e\n  styleMappingMat[3].r = d_segmentIndex;\n\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));\n    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));\n  }\n  setPickingColor(a_PickingColor);\n}\n',IO={solid:0,dash:1},RO=function(e){Object(et["a"])(n,e);var t=SO(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"updateTexture",(function(){var t=e.rendererService.createTexture2D;if(e.texture)return e.texture.update({data:e.iconService.getCanvas()}),void e.layer.render();e.texture=t({data:e.iconService.getCanvas(),mag:ad.NEAREST,min:ad.NEAREST,premultiplyAlpha:!1,width:1024,height:e.iconService.canvasHeight||128})})),e}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t,r=e.sourceColor,i=e.targetColor,o=e.textureBlend,a=void 0===o?"normal":o,s=e.lineType,u=void 0===s?"solid":s,c=e.dashArray,l=void 0===c?[10,5]:c,f=e.forward,p=void 0===f||f,h=e.lineTexture,d=void 0!==h&&h,v=e.iconStep,m=void 0===v?100:v,g=e.segmentNumber,y=void 0===g?30:g,b=e.thetaOffset,_=void 0===b?.314:b;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n,thetaOffset:_})){this.judgeStyleAttributes({opacity:n,thetaOffset:_});var x=this.layer.getEncodedData(),w=this.calDataFrame(this.cellLength,x,this.cellProperties),O=w.data,E=w.width,S=w.height;this.rowCount=S,this.dataTexture=this.cellLength>0&&O.length>0?this.createTexture2D({flipY:!0,data:O,format:ad.LUMINANCE,type:ad.FLOAT,width:E,height:S}):this.createTexture2D({flipY:!0,data:[1],format:ad.LUMINANCE,type:ad.FLOAT,width:1,height:1})}2===l.length&&l.push(0,0);var j=0,A=[0,0,0,0],k=[0,0,0,0];return r&&i&&(A=fi(r),k=fi(i),j=1),this.rendererService.getDirty()&&this.texture.bind(),{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_thetaOffset:Object(Ei["isNumber"])(_)?_:0,u_opacity:Object(Ei["isNumber"])(n)?n:1,u_textureBlend:"normal"===a?0:1,segmentNumber:y,u_line_type:IO[u||"solid"],u_dash_array:l,u_blur:.9,u_lineDir:p?1:-1,u_texture:this.texture,u_line_texture:d?1:0,u_icon_step:m,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:j,u_sourceColor:A,u_targetColor:k}}},{key:"getAnimateUniforms",value:function(){var e=this.layer.getLayerConfig(),t=e.animateOption;return{u_animate:this.animateOption2Array(t),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),e.abrupt("return",this.buildModels());case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e,t;null===(e=this.texture)||void 0===e||e.destroy(),null===(t=this.dataTexture)||void 0===t||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var e=this.layer.getLayerConfig(),t=e.sourceColor,n=e.targetColor,r=e.lineType;return"dash"===r?{frag:AO,vert:kO,type:"Dash"}:t&&n?{frag:MO,vert:PO,type:"Linear"}:{frag:CO,vert:TO,type:""}}},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o,a,s,u;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.layer.getLayerConfig(),n=t.segmentNumber,r=void 0===n?30:n,i=this.getShaders(),o=i.frag,a=i.vert,s=i.type,e.next=4,this.layer.buildLayerModel({moduleName:"lineArc2d"+s,vertexShader:a,fragmentShader:o,triangulation:Ew,depth:{enable:!1},segmentNumber:r});case 4:return u=e.sent,e.abrupt("return",[u]);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){var e=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Ry.Attribute,descriptor:{name:"a_Size",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e){var t=e.size,n=void 0===t?1:t;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Ry.Attribute,descriptor:{name:"a_Instance",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:4,update:function(e,t,n){return[n[3],n[4],n[5],n[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ry.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(t){var n=e.iconService.getIconMap(),r=t.texture,i=n[r]||{x:0,y:0},o=i.x,a=i.y;return[o,a]}}})}}]),n}(Lx);function LO(e){var t=DO();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function DO(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var NO='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\n\nuniform float u_opacity;\nuniform float u_textureBlend;\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\n// varying vec2 v_normal;\nvarying vec4 v_dash_array;\nvarying vec4 v_color;\n\nuniform float u_line_texture: 0.0;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\nvarying float v_segmentIndex;\nuniform float segmentNumber;\n\nvarying vec2 v_iconMapUV;\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\nvarying mat4 styleMappingMat;\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  float d_distance_ratio = styleMappingMat[3].g; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  gl_FragColor = v_color;\n\n  gl_FragColor.a *= opacity;\n  if(u_line_type == LineTypeDash) {\n    float flag = 0.;\n    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {\n      flag = 1.;\n    }\n    gl_FragColor.a *=flag;\n  }\n\n  if(u_animate.x == Animate && u_line_texture != LineTexture) {\n      animateSpeed = u_time / u_animate.y;\n      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);\n\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      // alpha = smoothstep(0., 1., alpha);\n      alpha = clamp(alpha, 0.0, 1.0);\n      gl_FragColor.a *= alpha;\n\n      // u_animate \n      // x enable\n      // y duration\n      // z interval\n      // w trailLength\n  }\n\n  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture\n    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));\n    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);\n    float count = styleMappingMat[3].b; // // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n\n    float time = 0.0;\n    if(u_animate.x == Animate) {\n      time = u_time / u_animate.y;\n    }\n    float redioCount = arcRadio * count;\n\n    float u = fract(redioCount - time);\n\n    float v = styleMappingMat[3].a;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n    vec4 pattern = texture2D(u_texture, uv);\n\n    if(u_animate.x == Animate) {\n      float currentPlane = floor(redioCount - time);\n      float textureStep = floor(count * u_animate.z);\n      float a = mod(currentPlane, textureStep);\n      if(a < textureStep - 1.0) {\n        pattern = vec4(0.0);\n      }\n    }\n\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      gl_FragColor = filterColor(gl_FragColor + pattern);\n    } else { // replace\n        pattern.a *= opacity;\n        if(gl_FragColor.a <= 0.0) {\n          pattern.a = 0.0;\n          discard;\n        } else {\n          gl_FragColor = filterColor(pattern);\n        }\n    }\n\n  } else {\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n}\n',FO='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute vec4 a_Color;\nattribute float a_Size;\n\nuniform float u_globel;\nuniform float u_globel_radius;\nuniform float u_global_height: 10;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\nvarying vec4 v_color;\n\nuniform float u_line_type: 0.0;\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\nvarying vec4 v_dash_array;\n\nuniform float u_icon_step: 100;\nuniform float u_line_texture: 0.0;\nvarying float v_segmentIndex;\n\nattribute vec2 a_iconMapUV;\nvarying vec2 v_iconMapUV;\n\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat maps (float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));\n}\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertex_height = paraboloid(source, target, segmentRatio);\n\n  return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n  );\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nfloat torad(float deg) {\n  return (deg / 180.0) * acos(-1.0);\n}\n\nvec3 lglt2xyz(vec2 lnglat) {\n  float pi = 3.1415926;\n  // + Math.PI/2 \u662f\u4e3a\u4e86\u5bf9\u9f50\u5750\u6807\n  float lng = torad(lnglat.x) + pi / 2.0;\n  float lat = torad(lnglat.y);\n\n  // \u624b\u52a8\u589e\u52a0\u4e00\u4e9b\u504f\u79fb\uff0c\u51cf\u8f7b\u9762\u7684\u51b2\u7a81\n  float radius = u_globel_radius;\n\n  float z = radius * cos(lat) * cos(lng);\n  float x = radius * cos(lat) * sin(lng);\n  float y = radius * sin(lat);\n  return vec3(x, y, z);\n}\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636e\u96c6\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_color = a_Color;\n  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;\n  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n\n  float d_distance_ratio;\n   if(u_line_type == LineTypeDash) {\n    d_distance_ratio = segmentIndex / segmentNumber;\n    vec2 s = source;\n    vec2 t = target;\n    \n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      s = unProjCustomCoord(source);\n      t = unProjCustomCoord(target);\n    }\n    float total_Distance = pixelDistance(s, t) / 2.0 * PI;\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);\n  }\n    if(u_animate.x == Animate) {\n      d_distance_ratio = segmentIndex / segmentNumber;\n  }\n  styleMappingMat[3].g = d_distance_ratio; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  vec3 curr = getPos(source, target, segmentRatio);\n  vec3 next = getPos(source, target, nextSegmentRatio);\n  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);\n  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n\n\n  v_segmentIndex = a_Position.x;\n  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5f00\u542f\u8d34\u56fe\u6a21\u5f0f  \n\n    float arcDistrance = length(source - target);\n    float pixelLen =  project_pixel_texture(u_icon_step);\n    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n\n    vec2 projectOffset = project_pixel(offset);\n    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\n    float linePixelSize = project_pixel(a_Size);  // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\uff0c\u6309\u5730\u56fe\u7b49\u7ea7\u7f29\u653e\u540e\u7684\u8ddd\u79bb\n    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n    v_iconMapUV = a_iconMapUV;\n  }\n  \n\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  }\n\n  // \u5730\u7403\u6a21\u5f0f\n  if(u_globel > 0.0) {\n    vec3 startLngLat = lglt2xyz(a_Instance.rg);\n    vec3 endLngLat = lglt2xyz(a_Instance.ba);\n    float globalRadius = length(startLngLat);\n\n    vec3 lineDir = normalize(endLngLat - startLngLat);\n    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);\n\n    // \u7ebf\u7684\u504f\u79fb\n    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;\n    // \u8ba1\u7b97\u8d77\u59cb\u70b9\u548c\u7ec8\u6b62\u70b9\u7684\u8ddd\u79bb\n    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;\n    // \u8ba1\u7b97\u98de\u7ebf\u5404\u4e2a\u8282\u70b9\u76f8\u5e94\u7684\u9ad8\u5ea6\n    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;\n    // \u5730\u7403\u70b9\u4f4d\n    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;\n    \n    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);\n  }\n \n\n  setPickingColor(a_PickingColor);\n}\n',zO='\n#define Animate 0.0\n\nuniform float u_opacity;\nuniform float u_blur : 0.9;\nvarying float v_segmentIndex;\nuniform float segmentNumber;\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\nvarying mat4 styleMappingMat;\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  float d_distance_ratio = styleMappingMat[3].g; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n\n  gl_FragColor = mix(u_sourceColor, u_targetColor, v_segmentIndex/segmentNumber);\n\n  gl_FragColor.a *= opacity;\n\n  if(u_animate.x == Animate) {\n      animateSpeed = u_time / u_animate.y;\n      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);\n\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      // alpha = smoothstep(0., 1., alpha);\n      alpha = clamp(alpha, 0.0, 1.0);\n      gl_FragColor.a *= alpha;\n\n      // u_animate \n      // x enable\n      // y duration\n      // z interval\n      // w trailLength\n  }\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',BO='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute vec4 a_Color;\nattribute float a_Size;\nattribute vec2 a_iconMapUV;\n\nuniform float u_globel;\nuniform float u_globel_radius;\nuniform float u_global_height: 10;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\nuniform float u_line_type: 0.0;\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\nuniform float u_icon_step: 100;\nuniform float u_line_texture: 0.0;\nuniform float u_opacity: 1.0;\n\nvarying vec4 v_dash_array;\nvarying vec4 v_color;\nvarying float v_segmentIndex;\nvarying vec2 v_iconMapUV;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat maps (float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));\n}\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertex_height = paraboloid(source, target, segmentRatio);\n\n  return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n  );\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nfloat torad(float deg) {\n  return (deg / 180.0) * acos(-1.0);\n}\n\nvec3 lglt2xyz(vec2 lnglat) {\n  float pi = 3.1415926;\n  // + Math.PI/2 \u662f\u4e3a\u4e86\u5bf9\u9f50\u5750\u6807\n  float lng = torad(lnglat.x) + pi / 2.0;\n  float lat = torad(lnglat.y);\n\n  // \u624b\u52a8\u589e\u52a0\u4e00\u4e9b\u504f\u79fb\uff0c\u51cf\u8f7b\u9762\u7684\u51b2\u7a81\n  float radius = u_globel_radius;\n\n  float z = radius * cos(lat) * cos(lng);\n  float x = radius * cos(lat) * sin(lng);\n  float y = radius * sin(lat);\n  return vec3(x, y, z);\n}\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636e\u96c6\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_color = a_Color;\n  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;\n  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n\n  float d_distance_ratio;\n   if(u_line_type == LineTypeDash) {\n    d_distance_ratio = segmentIndex / segmentNumber;\n    // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;\n    vec2 s = source;\n    vec2 t = target;\n    \n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      s = unProjCustomCoord(source);\n      t = unProjCustomCoord(target);\n    }\n    float total_Distance = pixelDistance(s, t) / 2.0 * PI;\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);\n  }\n    if(u_animate.x == Animate) {\n      d_distance_ratio = segmentIndex / segmentNumber;\n  }\n  styleMappingMat[3].g = d_distance_ratio; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  vec3 curr = getPos(source, target, segmentRatio);\n  vec3 next = getPos(source, target, nextSegmentRatio);\n  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);\n  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n\n\n  v_segmentIndex = a_Position.x;\n  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5f00\u542f\u8d34\u56fe\u6a21\u5f0f  \n\n    float arcDistrance = length(source - target);\n    float pixelLen =  project_pixel_texture(u_icon_step);\n    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n\n    vec2 projectOffset = project_pixel(offset);\n    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\n    float linePixelSize = project_pixel(a_Size);  // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\uff0c\u6309\u5730\u56fe\u7b49\u7ea7\u7f29\u653e\u540e\u7684\u8ddd\u79bb\n    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n    v_iconMapUV = a_iconMapUV;\n  }\n  \n\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  }\n\n  // \u5730\u7403\u6a21\u5f0f\n  if(u_globel > 0.0) {\n    vec3 startLngLat = lglt2xyz(a_Instance.rg);\n    vec3 endLngLat = lglt2xyz(a_Instance.ba);\n    float globalRadius = length(startLngLat);\n\n    vec3 lineDir = normalize(endLngLat - startLngLat);\n    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);\n\n    // \u7ebf\u7684\u504f\u79fb\n    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;\n    // \u8ba1\u7b97\u8d77\u59cb\u70b9\u548c\u7ec8\u6b62\u70b9\u7684\u8ddd\u79bb\n    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;\n    // \u8ba1\u7b97\u98de\u7ebf\u5404\u4e2a\u8282\u70b9\u76f8\u5e94\u7684\u9ad8\u5ea6\n    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;\n    // \u5730\u7403\u70b9\u4f4d\n    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;\n    \n    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);\n  }\n \n\n  setPickingColor(a_PickingColor);\n}\n',UO={solid:0,dash:1},VO=function(e){Object(et["a"])(n,e);var t=LO(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"updateTexture",(function(){var t=e.rendererService.createTexture2D;if(e.texture)return e.texture.update({data:e.iconService.getCanvas()}),void e.layer.render();e.texture=t({data:e.iconService.getCanvas(),mag:ad.NEAREST,min:ad.NEAREST,premultiplyAlpha:!1,width:1024,height:e.iconService.canvasHeight||128})})),e}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t,r=e.sourceColor,i=e.targetColor,o=e.textureBlend,a=void 0===o?"normal":o,s=e.lineType,u=void 0===s?"solid":s,c=e.dashArray,l=void 0===c?[10,5]:c,f=e.lineTexture,p=void 0!==f&&f,h=e.iconStep,d=void 0===h?100:h,v=e.segmentNumber,m=void 0===v?30:v,g=e.globalArcHeight,y=void 0===g?10:g;2===l.length&&l.push(0,0);var b=0,_=[0,0,0,0],x=[0,0,0,0];if(r&&i&&(_=fi(r),x=fi(i),b=1),this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n})){this.judgeStyleAttributes({opacity:n});var w=this.layer.getEncodedData(),O=this.calDataFrame(this.cellLength,w,this.cellProperties),E=O.data,S=O.width,j=O.height;this.rowCount=j,this.dataTexture=this.cellLength>0&&E.length>0?this.createTexture2D({flipY:!0,data:E,format:ad.LUMINANCE,type:ad.FLOAT,width:S,height:j}):this.createTexture2D({flipY:!0,data:[1],format:ad.LUMINANCE,type:ad.FLOAT,width:1,height:1})}return{u_globel:"GLOBEL"===this.mapService.version?1:0,u_globel_radius:Dx,u_global_height:y,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Object(Ei["isNumber"])(n)?n:1,u_textureBlend:"normal"===a?0:1,segmentNumber:m,u_line_type:UO[u]||0,u_dash_array:l,u_texture:this.texture,u_line_texture:p?1:0,u_icon_step:d,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:b,u_sourceColor:_,u_targetColor:x}}},{key:"getAnimateUniforms",value:function(){var e=this.layer.getLayerConfig(),t=e.animateOption;return{u_animate:this.animateOption2Array(t),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),e.abrupt("return",this.buildModels());case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e,t;null===(e=this.texture)||void 0===e||e.destroy(),null===(t=this.dataTexture)||void 0===t||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var e=this.layer.getLayerConfig(),t=e.sourceColor,n=e.targetColor;return t&&n?{frag:zO,vert:BO,type:"Linear"}:{frag:NO,vert:FO,type:""}}},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o,a,s,u;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.layer.getLayerConfig(),n=t.segmentNumber,r=void 0===n?30:n,i=this.getShaders(),o=i.frag,a=i.vert,s=i.type,e.next=4,this.layer.buildLayerModel({moduleName:"lineArc3d"+s,vertexShader:a,fragmentShader:o,triangulation:Ew,segmentNumber:r});case 4:return u=e.sent,e.abrupt("return",[u]);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){var e=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Ry.Attribute,descriptor:{name:"a_Size",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e){var t=e.size,n=void 0===t?1:t;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Ry.Attribute,descriptor:{name:"a_Instance",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:4,update:function(e,t,n){return[n[3],n[4],n[5],n[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ry.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(t){var n=e.iconService.getIconMap(),r=t.texture,i=n[r]||{x:0,y:0},o=i.x,a=i.y;return[o,a]}}})}}]),n}(Lx);function HO(e){var t=GO();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function GO(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var WO='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\n\nuniform float u_opacity;\nuniform float u_textureBlend;\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\n// varying vec2 v_normal;\nvarying vec4 v_dash_array;\nvarying vec4 v_color;\n\nuniform float u_line_texture: 0.0;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\nvarying float v_segmentIndex;\nuniform float segmentNumber;\n\nvarying vec2 v_iconMapUV;\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\nvarying mat4 styleMappingMat;\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  float d_distance_ratio = styleMappingMat[3].g; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  gl_FragColor = v_color;\n\n  gl_FragColor.a *= opacity;\n  if(u_line_type == LineTypeDash) {\n    float flag = 0.;\n    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {\n      flag = 1.;\n    }\n    gl_FragColor.a *=flag;\n  }\n\n  if(u_animate.x == Animate && u_line_texture != LineTexture) {\n      animateSpeed = u_time / u_animate.y;\n      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);\n\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      // alpha = smoothstep(0., 1., alpha);\n      alpha = clamp(alpha, 0.0, 1.0);\n      gl_FragColor.a *= alpha;\n\n      // u_animate \n      // x enable\n      // y duration\n      // z interval\n      // w trailLength\n  }\n\n  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture\n    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));\n    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);\n    float count = styleMappingMat[3].b; // // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n\n    float time = 0.0;\n    if(u_animate.x == Animate) {\n      time = u_time / u_animate.y;\n    }\n    float redioCount = arcRadio * count;\n\n    float u = fract(redioCount - time);\n\n    float v = styleMappingMat[3].a;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n    vec4 pattern = texture2D(u_texture, uv);\n\n    if(u_animate.x == Animate) {\n      float currentPlane = floor(redioCount - time);\n      float textureStep = floor(count * u_animate.z);\n      float a = mod(currentPlane, textureStep);\n      if(a < textureStep - 1.0) {\n        pattern = vec4(0.0);\n      }\n    }\n\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      gl_FragColor = filterColor(gl_FragColor + pattern);\n    } else { // replace\n        pattern.a *= opacity;\n        if(gl_FragColor.a <= 0.0) {\n          pattern.a = 0.0;\n          discard;\n        } else {\n          gl_FragColor = filterColor(pattern);\n        }\n    }\n\n  } else {\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n}\n',qO='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute vec4 a_Color;\nattribute float a_Size;\n\nuniform float u_globel;\nuniform float u_globel_radius;\nuniform float u_global_height: 10;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\nvarying vec4 v_color;\n\nuniform float u_line_type: 0.0;\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\nvarying vec4 v_dash_array;\n\nuniform float u_icon_step: 100;\nuniform float u_line_texture: 0.0;\nvarying float v_segmentIndex;\n\nattribute vec2 a_iconMapUV;\nvarying vec2 v_iconMapUV;\n\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat maps (float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));\n}\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertex_height = paraboloid(source, target, segmentRatio);\n\n  return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n  );\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nfloat torad(float deg) {\n  return (deg / 180.0) * acos(-1.0);\n}\n\nvec3 lglt2xyz(vec2 lnglat) {\n  float pi = 3.1415926;\n  // + Math.PI/2 \u662f\u4e3a\u4e86\u5bf9\u9f50\u5750\u6807\n  float lng = torad(lnglat.x) + pi / 2.0;\n  float lat = torad(lnglat.y);\n\n  // \u624b\u52a8\u589e\u52a0\u4e00\u4e9b\u504f\u79fb\uff0c\u51cf\u8f7b\u9762\u7684\u51b2\u7a81\n  float radius = u_globel_radius;\n\n  float z = radius * cos(lat) * cos(lng);\n  float x = radius * cos(lat) * sin(lng);\n  float y = radius * sin(lat);\n  return vec3(x, y, z);\n}\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636e\u96c6\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_color = a_Color;\n  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;\n  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n\n  float d_distance_ratio;\n   if(u_line_type == LineTypeDash) {\n    d_distance_ratio = segmentIndex / segmentNumber;\n    vec2 s = source;\n    vec2 t = target;\n    \n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      s = unProjCustomCoord(source);\n      t = unProjCustomCoord(target);\n    }\n    float total_Distance = pixelDistance(s, t) / 2.0 * PI;\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);\n  }\n    if(u_animate.x == Animate) {\n      d_distance_ratio = segmentIndex / segmentNumber;\n  }\n  styleMappingMat[3].g = d_distance_ratio; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  vec3 curr = getPos(source, target, segmentRatio);\n  vec3 next = getPos(source, target, nextSegmentRatio);\n  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);\n  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n\n\n  v_segmentIndex = a_Position.x;\n  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5f00\u542f\u8d34\u56fe\u6a21\u5f0f  \n\n    float arcDistrance = length(source - target);\n    float pixelLen =  project_pixel_texture(u_icon_step);\n    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n\n    vec2 projectOffset = project_pixel(offset);\n    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\n    float linePixelSize = project_pixel(a_Size);  // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\uff0c\u6309\u5730\u56fe\u7b49\u7ea7\u7f29\u653e\u540e\u7684\u8ddd\u79bb\n    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n    v_iconMapUV = a_iconMapUV;\n  }\n  \n\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  }\n\n  // \u5730\u7403\u6a21\u5f0f\n  if(u_globel > 0.0) {\n    vec3 startLngLat = lglt2xyz(a_Instance.rg);\n    vec3 endLngLat = lglt2xyz(a_Instance.ba);\n    float globalRadius = length(startLngLat);\n\n    vec3 lineDir = normalize(endLngLat - startLngLat);\n    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);\n\n    // \u7ebf\u7684\u504f\u79fb\n    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;\n    // \u8ba1\u7b97\u8d77\u59cb\u70b9\u548c\u7ec8\u6b62\u70b9\u7684\u8ddd\u79bb\n    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;\n    // \u8ba1\u7b97\u98de\u7ebf\u5404\u4e2a\u8282\u70b9\u76f8\u5e94\u7684\u9ad8\u5ea6\n    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;\n    // \u5730\u7403\u70b9\u4f4d\n    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;\n    \n    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);\n  }\n \n\n  setPickingColor(a_PickingColor);\n}\n',ZO='\n#define Animate 0.0\n\nuniform float u_opacity;\nuniform float u_blur : 0.9;\nvarying float v_segmentIndex;\nuniform float segmentNumber;\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\nvarying mat4 styleMappingMat;\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  float d_distance_ratio = styleMappingMat[3].g; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n\n  gl_FragColor = mix(u_sourceColor, u_targetColor, v_segmentIndex/segmentNumber);\n\n  gl_FragColor.a *= opacity;\n\n  if(u_animate.x == Animate) {\n      animateSpeed = u_time / u_animate.y;\n      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);\n\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      // alpha = smoothstep(0., 1., alpha);\n      alpha = clamp(alpha, 0.0, 1.0);\n      gl_FragColor.a *= alpha;\n\n      // u_animate \n      // x enable\n      // y duration\n      // z interval\n      // w trailLength\n  }\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',YO='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute vec4 a_Color;\nattribute float a_Size;\nattribute vec2 a_iconMapUV;\n\nuniform float u_globel;\nuniform float u_globel_radius;\nuniform float u_global_height: 10;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\nuniform float u_line_type: 0.0;\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\nuniform float u_icon_step: 100;\nuniform float u_line_texture: 0.0;\nuniform float u_opacity: 1.0;\n\nvarying vec4 v_dash_array;\nvarying vec4 v_color;\nvarying float v_segmentIndex;\nvarying vec2 v_iconMapUV;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat maps (float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));\n}\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertex_height = paraboloid(source, target, segmentRatio);\n\n  return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n  );\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nfloat torad(float deg) {\n  return (deg / 180.0) * acos(-1.0);\n}\n\nvec3 lglt2xyz(vec2 lnglat) {\n  float pi = 3.1415926;\n  // + Math.PI/2 \u662f\u4e3a\u4e86\u5bf9\u9f50\u5750\u6807\n  float lng = torad(lnglat.x) + pi / 2.0;\n  float lat = torad(lnglat.y);\n\n  // \u624b\u52a8\u589e\u52a0\u4e00\u4e9b\u504f\u79fb\uff0c\u51cf\u8f7b\u9762\u7684\u51b2\u7a81\n  float radius = u_globel_radius;\n\n  float z = radius * cos(lat) * cos(lng);\n  float x = radius * cos(lat) * sin(lng);\n  float y = radius * sin(lat);\n  return vec3(x, y, z);\n}\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636e\u96c6\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_color = a_Color;\n  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;\n  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n\n  float d_distance_ratio;\n   if(u_line_type == LineTypeDash) {\n    d_distance_ratio = segmentIndex / segmentNumber;\n    // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;\n    vec2 s = source;\n    vec2 t = target;\n    \n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      s = unProjCustomCoord(source);\n      t = unProjCustomCoord(target);\n    }\n    float total_Distance = pixelDistance(s, t) / 2.0 * PI;\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);\n  }\n    if(u_animate.x == Animate) {\n      d_distance_ratio = segmentIndex / segmentNumber;\n  }\n  styleMappingMat[3].g = d_distance_ratio; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  vec3 curr = getPos(source, target, segmentRatio);\n  vec3 next = getPos(source, target, nextSegmentRatio);\n  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);\n  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n\n\n  v_segmentIndex = a_Position.x;\n  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5f00\u542f\u8d34\u56fe\u6a21\u5f0f  \n\n    float arcDistrance = length(source - target);\n    float pixelLen =  project_pixel_texture(u_icon_step);\n    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n\n    vec2 projectOffset = project_pixel(offset);\n    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\n    float linePixelSize = project_pixel(a_Size);  // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\uff0c\u6309\u5730\u56fe\u7b49\u7ea7\u7f29\u653e\u540e\u7684\u8ddd\u79bb\n    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n    v_iconMapUV = a_iconMapUV;\n  }\n  \n\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  }\n\n  // \u5730\u7403\u6a21\u5f0f\n  if(u_globel > 0.0) {\n    vec3 startLngLat = lglt2xyz(a_Instance.rg);\n    vec3 endLngLat = lglt2xyz(a_Instance.ba);\n    float globalRadius = length(startLngLat);\n\n    vec3 lineDir = normalize(endLngLat - startLngLat);\n    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);\n\n    // \u7ebf\u7684\u504f\u79fb\n    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;\n    // \u8ba1\u7b97\u8d77\u59cb\u70b9\u548c\u7ec8\u6b62\u70b9\u7684\u8ddd\u79bb\n    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;\n    // \u8ba1\u7b97\u98de\u7ebf\u5404\u4e2a\u8282\u70b9\u76f8\u5e94\u7684\u9ad8\u5ea6\n    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;\n    // \u5730\u7403\u70b9\u4f4d\n    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;\n    \n    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);\n  }\n \n\n  setPickingColor(a_PickingColor);\n}\n',XO={solid:0,dash:1},KO=function(e){Object(et["a"])(n,e);var t=HO(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"updateTexture",(function(){var t=e.rendererService.createTexture2D;if(e.texture)return e.texture.update({data:e.iconService.getCanvas()}),void e.layer.render();e.texture=t({data:e.iconService.getCanvas(),mag:ad.NEAREST,min:ad.NEAREST,premultiplyAlpha:!1,width:1024,height:e.iconService.canvasHeight||128})})),e}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t,r=e.sourceColor,i=e.targetColor,o=e.textureBlend,a=void 0===o?"normal":o,s=e.lineType,u=void 0===s?"solid":s,c=e.dashArray,l=void 0===c?[10,5]:c,f=e.lineTexture,p=void 0!==f&&f,h=e.iconStep,d=void 0===h?100:h,v=e.segmentNumber,m=void 0===v?30:v,g=e.globalArcHeight,y=void 0===g?10:g;2===l.length&&l.push(0,0);var b=0,_=[0,0,0,0],x=[0,0,0,0];if(r&&i&&(_=fi(r),x=fi(i),b=1),this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n})){this.judgeStyleAttributes({opacity:n});var w=this.layer.getEncodedData(),O=this.calDataFrame(this.cellLength,w,this.cellProperties),E=O.data,S=O.width,j=O.height;this.rowCount=j,this.dataTexture=this.cellLength>0&&E.length>0?this.createTexture2D({flipY:!0,data:E,format:ad.LUMINANCE,type:ad.FLOAT,width:S,height:j}):this.createTexture2D({flipY:!0,data:[1],format:ad.LUMINANCE,type:ad.FLOAT,width:1,height:1})}return{u_globel:1,u_globel_radius:Dx,u_global_height:y,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Object(Ei["isNumber"])(n)?n:1,u_textureBlend:"normal"===a?0:1,segmentNumber:m,u_line_type:XO[u]||0,u_dash_array:l,u_texture:this.texture,u_line_texture:p?1:0,u_icon_step:d,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:b,u_sourceColor:_,u_targetColor:x}}},{key:"getAnimateUniforms",value:function(){var e=this.layer.getLayerConfig(),t=e.animateOption;return{u_animate:this.animateOption2Array(t),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),e.abrupt("return",this.buildModels());case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e,t;null===(e=this.texture)||void 0===e||e.destroy(),null===(t=this.dataTexture)||void 0===t||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var e=this.layer.getLayerConfig(),t=e.sourceColor,n=e.targetColor;return t&&n?{frag:ZO,vert:YO,type:"Linear"}:{frag:WO,vert:qO,type:""}}},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o,a,s,u;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.layer.getLayerConfig(),n=t.segmentNumber,r=void 0===n?30:n,i=this.getShaders(),o=i.frag,a=i.vert,s=i.type,e.next=4,this.layer.buildLayerModel({moduleName:"lineEarthArc3d"+s,vertexShader:a,fragmentShader:o,triangulation:Ew,depth:{enable:!0},segmentNumber:r});case 4:return u=e.sent,e.abrupt("return",[u]);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){var e=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Ry.Attribute,descriptor:{name:"a_Size",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e){var t=e.size,n=void 0===t?1:t;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Ry.Attribute,descriptor:{name:"a_Instance",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:4,update:function(e,t,n){return[n[3],n[4],n[5],n[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ry.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(t){var n=e.iconService.getIconMap(),r=t.texture,i=n[r]||{x:0,y:0},o=i.x,a=i.y;return[o,a]}}})}}]),n}(Lx);function $O(e){var t=QO();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function QO(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var JO='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\n\nuniform float u_opacity;\nuniform float u_textureBlend;\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\n// varying vec2 v_normal;\nvarying vec4 v_dash_array;\nvarying float v_distance_ratio;\nvarying vec4 v_color;\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\nuniform float u_line_texture: 0.0;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\nuniform float segmentNumber;\n\nvarying vec2 v_iconMapUV;\n\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\nvarying mat4 styleMappingMat;\n\n#pragma include "picking"\n#pragma include "project"\n#pragma include "projection"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float animateSpeed = 0.0;\n  float d_segmentIndex = styleMappingMat[3].g;\n  \n  // \u8bbe\u7f6e\u5f27\u7ebf\u7684\u5e95\u8272\n  if(u_linearColor == 1.0) { // \u4f7f\u7528\u6e10\u53d8\u989c\u8272\n    gl_FragColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);\n  } else { // \u4f7f\u7528 color \u65b9\u6cd5\u4f20\u5165\u7684\u989c\u8272\n     gl_FragColor = v_color;\n  }\n\n  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));\n  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));\n  gl_FragColor.a *= opacity;\n  if(u_line_type == LineTypeDash) {\n    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {\n      // \u5b9e\u7ebf\u90e8\u5206\n    } else {\n      // \u865a\u7ebf\u90e8\u5206\n      discard;\n    };\n  }\n\n  // \u8bbe\u7f6e\u5f27\u7ebf\u7684\u52a8\u753b\u6a21\u5f0f\n  if(u_animate.x == Animate) {\n      animateSpeed = u_time / u_animate.y;\n      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      alpha = smoothstep(0., 1., alpha);\n      gl_FragColor.a *= alpha;\n  }\n\n  // \u8bbe\u7f6e\u5f27\u7ebf\u7684\u8d34\u56fe\n  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { \n    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));\n    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);\n    float count = styleMappingMat[3].b; // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n    float u = fract(arcRadio * count - animateSpeed * count);\n    // float u = fract(arcRadio * count - animateSpeed);\n    if(u_animate.x == Animate) {\n      u = gl_FragColor.a/opacity;\n    }\n\n    float v = styleMappingMat[3].a; // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n    vec4 pattern = texture2D(u_texture, uv);\n    \n    // \u8bbe\u7f6e\u8d34\u56fe\u548c\u5e95\u8272\u7684\u53e0\u52a0\u6a21\u5f0f\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      gl_FragColor = filterColor(gl_FragColor + pattern);\n    } else { // replace\n        pattern.a *= opacity;\n        if(gl_FragColor.a <= 0.0) {\n          pattern.a = 0.0;\n        }\n        gl_FragColor = filterColor(pattern);\n    }\n  } else {\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n\n  // gl_FragColor = filterColor(gl_FragColor);\n}',eE='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\nvarying vec4 v_color;\n\nvarying float v_distance_ratio;\nuniform float u_line_type: 0.0;\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\nvarying vec4 v_dash_array;\n\nuniform float u_icon_step: 100;\nuniform float u_line_texture: 0.0;\n\nattribute vec2 a_iconMapUV;\nvarying vec2 v_iconMapUV;\n\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat maps (float value, float start1, float stop1, float start2, float stop2) {\n    return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat getSegmentRatio(float index) {\n    return index / (segmentNumber - 1.);\n}\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n    vec2 x = mix(source, target, ratio);\n    vec2 center = mix(source, target, 0.5);\n    float dSourceCenter = distance(source, center);\n    float dXCenter = distance(x, center);\n    return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n     float vertex_height = paraboloid(source, target, segmentRatio);\n\n    return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n    );\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size)/ 2.0;\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\nfloat getAngularDist (vec2 source, vec2 target) {\n  vec2 delta = source - target;\n  vec2 sin_half_delta = sin(delta / 2.0);\n  float a =\n    sin_half_delta.y * sin_half_delta.y +\n    cos(source.y) * cos(target.y) *\n    sin_half_delta.x * sin_half_delta.x;\n  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));\n}\n\nvec2 midPoint(vec2 source, vec2 target) {\n  vec2 center = target - source;\n  float r = length(center);\n  float theta = atan(center.y, center.x);\n  float thetaOffset = 0.314;\n  float r2 = r / 2.0 / cos(thetaOffset);\n  float theta2 = theta + thetaOffset;\n  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);\n  return mid;\n}\nfloat bezier3(vec3 arr, float t) {\n  float ut = 1. - t;\n  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;\n}\n\nvec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {\n  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    vec2 mid = midPoint(source, target);\n    vec3 x = vec3(source.x, mid.x, target.x);\n    vec3 y = vec3(source.y, mid.y, target.y);\n    return vec2(bezier3(x ,t), bezier3(y,t));\n  }else {\n    if(abs(angularDist - PI) < 0.001) {\n      return (1.0 - t) * source + t * target;\n    }\n    float a = sin((1.0 - t) * angularDist) / sin(angularDist);\n    float b = sin(t * angularDist) / sin(angularDist);\n    vec2 sin_source = sin(source);\n    vec2 cos_source = cos(source);\n    vec2 sin_target = sin(target);\n    vec2 cos_target = cos(target);\n    float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;\n    float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;\n    float z = a * sin_source.y + b * sin_target.y;\n    return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));\n  }\n}\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636e\u96c6\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_color = a_Color;\n  vec2 source = radians(a_Instance.rg);\n  vec2 target = radians(a_Instance.ba);\n  float angularDist = getAngularDist(source, target);\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n\n  if(u_line_type == LineTypeDash) {\n    v_distance_ratio = segmentIndex / segmentNumber;\n    vec2 s = source;\n    vec2 t = target;\n    \n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      s = unProjCustomCoord(source);\n      t = unProjCustomCoord(target);\n    }\n    float total_Distance = pixelDistance(s, t) / 2.0 * PI;\n    total_Distance = total_Distance*16.0; // total_Distance*16.0 \u8c03\u6574\u9ed8\u8ba4\u7684\u6548\u679c\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;\n  }\n\n  if(u_animate.x == Animate) {\n      v_distance_ratio = segmentIndex / segmentNumber;\n  }\n\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  v_distance_ratio = segmentIndex / segmentNumber;\n  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));\n  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));\n  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));\n  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));\n\n  styleMappingMat[3].g = a_Position.x; // \u8be5\u9876\u70b9\u5728\u5f27\u7ebf\u4e0a\u7684\u5206\u6bb5\u6392\u5e8f\n  if(LineTexture == u_line_texture) { // \u5f00\u542f\u8d34\u56fe\u6a21\u5f0f  \n    // float mapZoomScale = u_CoordinateSystem !== COORDINATE_SYSTEM_P20_2?10000000.0:1.0;\n    float d_arcDistrance = length(source - target);\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap\n      d_arcDistrance = d_arcDistrance * 1000000.0;\n    }\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox\n      d_arcDistrance = project_pixel_allmap(d_arcDistrance);\n    }\n    float d_pixelLen = project_pixel(u_icon_step)/8.0;\n    styleMappingMat[3].b = floor(d_arcDistrance/d_pixelLen); // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n\n    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\n    float linePixelSize = project_pixel(a_Size);  // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\uff0c\u6309\u5730\u56fe\u7b49\u7ea7\u7f29\u653e\u540e\u7684\u8ddd\u79bb\n    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n    v_iconMapUV = a_iconMapUV;\n  }\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(curr.xy + offset, curr.z, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));\n  }\n  setPickingColor(a_PickingColor);\n}\n\n',tE={solid:0,dash:1},nE=function(e){Object(et["a"])(n,e);var t=$O(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"updateTexture",(function(){var t=e.rendererService.createTexture2D;if(e.texture)return e.texture.update({data:e.iconService.getCanvas()}),void e.layer.render();e.texture=t({data:e.iconService.getCanvas(),mag:ad.NEAREST,min:ad.NEAREST,premultiplyAlpha:!1,width:1024,height:e.iconService.canvasHeight||128})})),e}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t,r=e.sourceColor,i=e.targetColor,o=e.textureBlend,a=void 0===o?"normal":o,s=e.lineType,u=void 0===s?"solid":s,c=e.dashArray,l=void 0===c?[10,5]:c,f=e.lineTexture,p=void 0!==f&&f,h=e.iconStep,d=void 0===h?100:h,v=e.segmentNumber,m=void 0===v?30:v;2===l.length&&l.push(0,0),this.rendererService.getDirty()&&this.texture.bind();var g=0,y=[0,0,0,0],b=[0,0,0,0];if(r&&i&&(y=fi(r),b=fi(i),g=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n})){this.judgeStyleAttributes({opacity:n});var _=this.layer.getEncodedData(),x=this.calDataFrame(this.cellLength,_,this.cellProperties),w=x.data,O=x.width,E=x.height;this.rowCount=E,this.dataTexture=this.cellLength>0&&w.length>0?this.createTexture2D({flipY:!0,data:w,format:ad.LUMINANCE,type:ad.FLOAT,width:O,height:E}):this.createTexture2D({flipY:!0,data:[1],format:ad.LUMINANCE,type:ad.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Object(Ei["isNumber"])(n)?n:1,u_textureBlend:"normal"===a?0:1,segmentNumber:m,u_line_type:tE[u]||0,u_dash_array:l,u_texture:this.texture,u_line_texture:p?1:0,u_icon_step:d,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:g,u_sourceColor:y,u_targetColor:b}}},{key:"getAnimateUniforms",value:function(){var e=this.layer.getLayerConfig(),t=e.animateOption;return{u_animate:this.animateOption2Array(t),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),e.abrupt("return",this.buildModels());case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e,t;null===(e=this.texture)||void 0===e||e.destroy(),null===(t=this.dataTexture)||void 0===t||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:eE,fragmentShader:JO,triangulation:Ew,depth:{enable:!1}});case 2:return t=e.sent,e.abrupt("return",[t]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){var e=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Ry.Attribute,descriptor:{name:"a_Size",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e){var t=e.size,n=void 0===t?1:t;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Ry.Attribute,descriptor:{name:"a_Instance",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:4,update:function(e,t,n){return[n[3],n[4],n[5],n[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ry.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(t){var n=e.iconService.getIconMap(),r=t.texture,i=n[r]||{x:0,y:0},o=i.x,a=i.y;return[o,a]}}})}}]),n}(Lx);function rE(e){var t=iE();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function iE(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var oE='#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox\n#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset\n#define COORDINATE_SYSTEM_VECTOR_TILE 3.0\n#define COORDINATE_SYSTEM_IDENTITY 4.0\n#define COORDINATE_SYSTEM_P20 5.0           // amap\n#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset\n#define COORDINATE_SYSTEM_METER_OFFSET 7.0\n\n#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0\nuniform float u_CoordinateSystem;\nvarying vec4 v_color;\nuniform float u_arrow: 0.0;\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\n#pragma include "picking"\n\nvarying mat4 styleMappingMat;\nvoid main() {\n  float distanceAndIndex = styleMappingMat[0][3];\n  float miter = styleMappingMat[0][2];\n\n  float opacity = styleMappingMat[0][0];\n  float d_distance_ratio = styleMappingMat[3].r; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n\n\n  if(u_arrow > 0.0 && distanceAndIndex < 2.0) { // arrow\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) { \n      if(cross(vec3(styleMappingMat[1].rg, 0.0), vec3(styleMappingMat[1].ba, 0.0)).z < 0.0) { // amap\n        discard;\n      }\n    } else { // amap2 mapbox map\n      if(cross(vec3(styleMappingMat[1].rg, 0.0), vec3(styleMappingMat[1].ba, 0.0)).z > 0.0) { \n        discard;\n      }\n    }\n  } else { // line body\n    if(miter < 0.0) {\n      discard;\n    }\n  }\n\n\n  if(u_linearColor == 1.0) { // \u4f7f\u7528\u6e10\u53d8\u989c\u8272\n    gl_FragColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);\n  } else { // \u4f7f\u7528 color \u65b9\u6cd5\u4f20\u5165\u7684\u989c\u8272\n    gl_FragColor = v_color;\n  }\n\n  gl_FragColor.a *= opacity; // \u5168\u5c40\u900f\u660e\u5ea6\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',aE='attribute float a_Miter;\nattribute vec4 a_Color;\nattribute vec2 a_Size;\nattribute vec3 a_Normal;\nattribute vec3 a_Position;\n\n// dash line\nattribute vec4 a_dirPoints;\nattribute vec3 a_DistanceAndIndex;\n\nuniform vec4 u_lineDir;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvarying vec4 v_color;\n\nuniform float u_linearColor: 0;\nuniform float u_arrow: 0.0;\nuniform float u_arrowHeight: 3.0;\nuniform float u_arrowWidth: 2.0;\nuniform float u_tailWidth: 1.0;\n\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\nvec2 calculateArrow(vec2 offset) {\n  /*\n  * \u5728\u652f\u6301\u7bad\u5934\u7684\u65f6\u5019\uff0c\u7b2c\u4e8c\u3001\u7b2c\u4e09\u7ec4\u9876\u70b9\u662f\u989d\u5916\u63d2\u5165\u7528\u4e8e\u6784\u5efa\u9876\u70b9\u7684\n  */\n  float arrowFlag = -1.0;\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // \u9ad8\u5fb7 2.0 \u7684\u65cb\u8f6c\u89d2\u5ea6\u4e0d\u540c\n    arrowFlag = 1.0;\n  }\n  float pi = arrowFlag * 3.1415926/2.;\n  if(a_Miter < 0.) {\n    // \u6839\u636e\u7ebf\u7684\u4e24\u4fa7\u504f\u79fb\u4e0d\u540c\u3001\u65cb\u8f6c\u7684\u65b9\u5411\u76f8\u53cd\n    pi = -pi;\n  }\n  highp float angle_sin = sin(pi);\n  highp float angle_cos = cos(pi);\n  // \u8ba1\u7b97\u5782\u76f4\u4e0e\u7ebf\u65b9\u5411\u7684\u65cb\u8f6c\u77e9\u9635\n  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n  float arrowWidth = u_arrowWidth;\n  float arrowHeight = u_arrowHeight;\n\n  vec2 arrowOffset = vec2(0.0);\n  /*\n  * a_DistanceAndIndex.y \u7528\u4e8e\u6807\u8bb0\u5f53\u524d\u9876\u70b9\u5c5e\u4e8e\u54ea\u4e00\u7ec4\uff08\u4e24\u4e2a\u9876\u70b9\u4e00\u7ec4\uff0c\u6784\u6210\u7ebf\u7684\u5176\u5b9e\u662f\u77e9\u5f62\uff0c\u6700\u7b80\u9700\u8981\u56db\u4e2a\u9876\u70b9\u3001\u4e24\u7ec4\u9876\u70b9\u6784\u6210\uff09\n  */\n  if(a_DistanceAndIndex.y == 0.0) {\n    // \u7bad\u5934\u5c16\u90e8\n    offset = vec2(0.0);\n  } else if(a_DistanceAndIndex.y == 1.0) {\n    // \u7bad\u5934\u4e24\u4fa7\n    arrowOffset = rotation_matrix*(offset * arrowHeight);\n    offset += arrowOffset; // \u6cbf\u7ebf\u504f\u79fb\n    offset = offset * arrowWidth; // \u5782\u76f4\u7ebf\u5411\u5916\u504f\u79fb\uff08\u662f\u6784\u5efa\u7bad\u5934\u4e24\u4fa7\u7684\u9876\u70b9\uff09\n  } else if(a_DistanceAndIndex.y == 2.0 || a_DistanceAndIndex.y == 3.0 || a_DistanceAndIndex.y == 4.0) {\n    // \u504f\u79fb\u5176\u4f59\u7684\u70b9\u4f4d\uff08\u5c06\u957f\u5ea6\u8ba9\u4f4d\u7ed9\u7bad\u5934\uff09\n    arrowOffset = rotation_matrix*(offset * arrowHeight) * arrowWidth;\n    offset += arrowOffset;// \u6cbf\u7ebf\u504f\u79fb\n  }\n\n  return offset;\n}\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - a_Miter - a_DistanceAndIndex\n    0.0, 0.0, 0.0, 0.0, // originX - originY - vectorX - vectorY\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV\n  );\n  styleMappingMat[0][3] = a_DistanceAndIndex.y;\n  styleMappingMat[0][2] = a_Miter;\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n\n  v_color = a_Color;\n\n  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);\n  \n  vec2 offset = project_pixel(size.xy);\n\n  // styleMappingMat[1].rg = a_Position.xy + offset;\n\n  vec2 copyOffset = vec2(offset.x, offset.y);\n\n  float lineDistance = a_DistanceAndIndex.x;\n  float total_Distance = a_DistanceAndIndex.z;\n  float currentLinePointRatio = lineDistance / total_Distance;\n \n  if(u_arrow > 0.0) {\n      //  \u8ba1\u7b97\u7bad\u5934\n    offset = calculateArrow(offset);\n\n    if(a_DistanceAndIndex.y > 4.0) {\n      offset *= mix(1.0, u_tailWidth, currentLinePointRatio);\n    }\n  }\n\n  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\uff08\u5411\u4e24\u4fa7\u504f\u79fb\u7684\u548c\uff09\n  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\uff0c\u6309\u5730\u56fe\u7b49\u7ea7\u7f29\u653e\u540e\u7684\u8ddd\u79bb \u5355\u4fa7 * 2\n\n  // \u8bbe\u7f6e\u6570\u636e\u96c6\u7684\u53c2\u6570\n  styleMappingMat[3][0] = currentLinePointRatio; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  styleMappingMat[3][1] = lineDistance;       // \u5f53\u524d\u9876\u70b9\u7684\u8ddd\u79bb\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));\n\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));\n\n  float h = float(a_Position.z); // \u7ebf\u9876\u70b9\u7684\u9ad8\u5ea6 - \u517c\u5bb9\u4e0d\u5b58\u5728\u7b2c\u4e09\u4e2a\u6570\u503c\u7684\u60c5\u51b5 vertex height\n  float lineHeight = a_Size.y; // size \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4ee3\u8868\u7684\u9ad8\u5ea6 [linewidth, lineheight]\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    lineHeight *= 0.2; // \u4fdd\u6301\u548c amap/mapbox \u4e00\u81f4\u7684\u6548\u679c\n    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight, 1.0));\n  }\n  \n  if(u_arrow > 0.0 && a_DistanceAndIndex.y < 2.0) {\n    vec2 startPoint = a_dirPoints.rg;\n    vec2 endPoint = a_dirPoints.ba;\n    vec4 t1 = project_position(vec4(startPoint, 0, 1.0));\n    vec4 t2 = project_position(vec4(endPoint, 0, 1.0));\n    // TODO\uff1a \u540e\u7eed\u4f18\u5316\u53ef\u4ee5\u628a\u4f4d\u7f6e\u8ba1\u7b97\u653e\u5728 cpu \u4e2d\u5b8c\u6210\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      vec2 p1 = (u_Mvp * vec4(t1.xy, 0.0, 1.0)).xy;\n      vec2 p2 = (u_Mvp * vec4(t2.xy, 0.0, 1.0)).xy;\n      styleMappingMat[1].rg = normalize(p1 - p2);\n      styleMappingMat[1].ba = normalize(gl_Position.xy - p2);\n    } else {\n      vec2 p1 = project_common_position_to_clipspace(vec4(t1.xy, 0.0, 1.0)).xy;\n      vec2 p2 = project_common_position_to_clipspace(vec4(t2.xy, 0.0, 1.0)).xy;\n      styleMappingMat[1].rg = normalize(p1 - p2);\n      styleMappingMat[1].ba = normalize(gl_Position.xy - p2);\n    }\n  }\n\n  setPickingColor(a_PickingColor);\n}\n',sE=function(e){Object(et["a"])(n,e);var t=rE(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t,r=e.sourceColor,i=e.targetColor,o=e.arrow,a=void 0===o?{enable:!1,arrowWidth:2,arrowHeight:3,tailWidth:1}:o,s=0,u=[0,0,0,0],c=[0,0,0,0];if(r&&i&&(u=fi(r),c=fi(i),s=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n})){this.judgeStyleAttributes({opacity:n});var l=this.layer.getEncodedData(),f=this.calDataFrame(this.cellLength,l,this.cellProperties),p=f.data,h=f.width,d=f.height;this.rowCount=d,this.dataTexture=this.cellLength>0&&p.length>0?this.createTexture2D({flipY:!0,data:p,format:ad.LUMINANCE,type:ad.FLOAT,width:h,height:d}):this.createTexture2D({flipY:!0,data:[1],format:ad.LUMINANCE,type:ad.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Object(Ei["isNumber"])(n)?n:1,u_linearColor:s,u_sourceColor:u,u_targetColor:c,u_arrow:Number(a.enable),u_arrowHeight:a.arrowHeight||3,u_arrowWidth:a.arrowWidth||2,u_tailWidth:void 0===a.tailWidth?1:a.tailWidth}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.buildModels());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e;null===(e=this.dataTexture)||void 0===e||e.destroy()}},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o,a,s;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.layer.getLayerConfig(),n=t.depth,r=void 0!==n&&n,i=this.getShaders(),o=i.frag,a=i.vert,this.layer.triangulation=hw,e.next=5,this.layer.buildLayerModel({moduleName:"lineHalf",vertexShader:a,fragmentShader:o,triangulation:hw,depth:{enable:r}});case 5:return s=e.sent,e.abrupt("return",[s]);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getShaders",value:function(){return{frag:oE,vert:aE,type:"normal"}}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:Ry.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:3,update:function(e,t,n,r,i,o){return void 0===o?[n[3],10,n[5]]:[n[3],o,n[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"dirPoints",type:Ry.Attribute,descriptor:{name:"a_dirPoints",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:4,update:function(e){var t=e.coordinates[0]||[0,0],n=e.coordinates[3]||[0,0];return[t[0],t[1],n[0],n[1]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ry.Attribute,descriptor:{name:"a_Size",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(e){var t=e.size,n=void 0===t?1:t;return Array.isArray(n)?[n[0],n[1]]:[n,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ry.Attribute,descriptor:{name:"a_Normal",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:3,update:function(e,t,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:Ry.Attribute,descriptor:{name:"a_Miter",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e,t,n){return[n[4]]}}})}}]),n}(Lx),uE=function(e){return e["VERTICAL"]="vertical",e["HORIZONTAL"]="horizontal",e}({}),cE=function(e){return e["NORMAL"]="normal",e["REPLACE"]="replace",e}({}),lE=function(e){return e[e["pixel"]=0]="pixel",e[e["meter"]=1]="meter",e}({});function fE(e){var t=pE();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function pE(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var hE='#define LineTypeSolid 0.0\nuniform float u_opacity : 1.0;\n\nvarying vec4 v_color;\n\n// dash\nvarying vec4 v_dash_array;\n\n#pragma include "picking"\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ]; // \u63a7\u5236\u8fd0\u52a8\n\nvarying mat4 styleMappingMat;\n// [animate, duration, interval, trailLength],\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float d_distance_ratio = styleMappingMat[3].r; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  gl_FragColor = v_color;\n  gl_FragColor.a *= opacity; // \u5168\u5c40\u900f\u660e\u5ea6\n \n  float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n  if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {\n    // \u5b9e\u7ebf\u90e8\u5206\n  } else {\n    // \u865a\u7ebf\u90e8\u5206\n    discard;\n  };\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',dE='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n\nattribute float a_Miter;\nattribute vec4 a_Color;\nattribute vec2 a_Size;\nattribute vec3 a_Normal;\nattribute vec3 a_Position;\n\nattribute vec2 a_iconMapUV;\n\n// dash line\nattribute float a_Total_Distance;\nattribute vec2 a_DistanceAndIndex;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\n\nuniform float u_vertexScale: 1.0;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvarying vec4 v_color;\nvarying vec4 v_dash_array;\n\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;\n  v_color = a_Color;\n\n  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);\n  vec2 offset = project_pixel(size.xy);\n\n  // \u8bbe\u7f6e\u6570\u636e\u96c6\u7684\u53c2\u6570\n  styleMappingMat[3][0] = a_DistanceAndIndex.x / a_Total_Distance; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  styleMappingMat[3][1] = a_DistanceAndIndex.x;       // \u5f53\u524d\u9876\u70b9\u7684\u8ddd\u79bb\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));\n\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, project_pixel(a_Size.y), 1.0));\n  } else {\n    float lineHeight = a_Size.y;\n \n    // #define COORDINATE_SYSTEM_P20 5.0\n    // #define COORDINATE_SYSTEM_P20_OFFSET 6.0\n    // amap1.x\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n      // \u4fdd\u6301\u9ad8\u5ea6\u76f8\u5bf9\u4e0d\u53d8\n      lineHeight *= pow(2.0, 20.0 - u_Zoom);\n    }\n\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight, 1.0));\n  }\n\n  setPickingColor(a_PickingColor);\n}\n',vE='#define Animate 0.0\n#define LineTexture 1.0\nuniform float u_opacity : 1.0;\nuniform float u_textureBlend;\n\nuniform float u_borderWidth: 0.0;\n\nuniform vec3 u_blur;\nuniform vec4 u_borderColor;\nvarying vec4 v_color;\n\n// line texture\nuniform float u_line_texture;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\n\nvarying vec2 v_iconMapUV;\n\n#pragma include "picking"\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1, 2., 1.0, 0.2 ]; // \u63a7\u5236\u8fd0\u52a8\n\nvarying mat4 styleMappingMat;\n// [animate, duration, interval, trailLength],\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  float d_distance_ratio = styleMappingMat[3].r; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  gl_FragColor = v_color;\n  // anti-alias\n  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));\n  gl_FragColor.a *= opacity; // \u5168\u5c40\u900f\u660e\u5ea6\n  if(u_animate.x == Animate) {\n      animateSpeed = u_time / u_animate.y;\n       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      alpha = smoothstep(0., 1., alpha);\n      gl_FragColor.a *= alpha;\n  }\n\n  if(u_line_texture == LineTexture) { // while load texture\n    float aDistance = styleMappingMat[3].g;      // \u5f53\u524d\u9876\u70b9\u7684\u8ddd\u79bb\n    float d_texPixelLen = styleMappingMat[3].b;  // \u8d34\u56fe\u7684\u50cf\u7d20\u957f\u5ea6\uff0c\u6839\u636e\u5730\u56fe\u5c42\u7ea7\u7f29\u653e\n    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);\n    float v = styleMappingMat[3].a;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n    // v = max(smoothstep(0.95, 1.0, v), v);\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n    \n    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, vec2(u, v)));\n    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, uv));\n     vec4 pattern = texture2D(u_texture, uv);\n\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      gl_FragColor += pattern;\n    } else { // replace\n        pattern.a *= opacity;\n        if(gl_FragColor.a <= 0.0) {\n          pattern.a = 0.0;\n        }\n        gl_FragColor = pattern;\n    }\n  } \n\n  float v = styleMappingMat[3].a;\n  float borderWidth = min(0.5, u_borderWidth);\n  // \u7ed8\u5236 border\n  if(borderWidth > 0.01) {\n    float borderOuterWidth = borderWidth/2.0;\n\n    if(v >= 1.0 - borderWidth || v <= borderWidth) {\n      if(v > borderWidth) {\n        float linear = smoothstep(0.0, 1.0, (v - (1.0 - borderWidth))/borderWidth);\n        gl_FragColor.rgb = mix(gl_FragColor.rgb, u_borderColor.rgb, linear);\n      } else if(v <= borderWidth) {\n        float linear = smoothstep(0.0, 1.0, v/borderWidth);\n        gl_FragColor.rgb = mix(u_borderColor.rgb, gl_FragColor.rgb, linear);\n      }\n    }\n\n    if(v < borderOuterWidth) {\n      gl_FragColor.a = mix(0.0, gl_FragColor.a, v/borderOuterWidth);\n    } else if(v > 1.0 - borderOuterWidth) {\n      gl_FragColor.a = mix(gl_FragColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);\n    }\n  }\n\n  // blur\n  float blurV = styleMappingMat[3][3];\n  if(blurV < 0.5) {\n    gl_FragColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);\n  } else {\n    gl_FragColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);\n  }\n  \n  gl_FragColor = filterColor(gl_FragColor);\n}\n',mE='\n#define Animate 0.0\n\nattribute float a_Miter;\nattribute vec4 a_Color;\nattribute vec2 a_Size;\nattribute vec3 a_Normal;\nattribute vec3 a_Position;\n\nattribute vec2 a_iconMapUV;\n\n// dash line\nattribute float a_Total_Distance;\nattribute vec2 a_DistanceAndIndex;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\nuniform float u_icon_step: 100;\n\nuniform float u_heightfixed: 0.0;\nuniform float u_vertexScale: 1.0;\nuniform float u_raisingHeight: 0.0;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvarying vec4 v_color;\n\n// texV \u7ebf\u56fe\u5c42 - \u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\uff08\u7ebf\u7684\u5bbd\u5ea6\u65b9\u5411\uff09\nvarying vec2 v_iconMapUV;\n\n\nuniform float u_linearColor: 0;\nuniform float u_arrow: 0.0;\nuniform float u_arrowHeight: 3.0;\nuniform float u_arrowWidth: 2.0;\nuniform float u_tailWidth: 1.0;\n\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\nvec2 calculateArrow(vec2 offset) {\n  /*\n  * \u5728\u652f\u6301\u7bad\u5934\u7684\u65f6\u5019\uff0c\u7b2c\u4e8c\u3001\u7b2c\u4e09\u7ec4\u9876\u70b9\u662f\u989d\u5916\u63d2\u5165\u7528\u4e8e\u6784\u5efa\u9876\u70b9\u7684\n  */\n  float arrowFlag = -1.0;\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // \u9ad8\u5fb7 2.0 \u7684\u65cb\u8f6c\u89d2\u5ea6\u4e0d\u540c\n    arrowFlag = 1.0;\n  }\n  float pi = arrowFlag * 3.1415926/2.;\n  if(a_Miter < 0.) {\n    // \u6839\u636e\u7ebf\u7684\u4e24\u4fa7\u504f\u79fb\u4e0d\u540c\u3001\u65cb\u8f6c\u7684\u65b9\u5411\u76f8\u53cd\n    pi = -pi;\n  }\n  highp float angle_sin = sin(pi);\n  highp float angle_cos = cos(pi);\n  // \u8ba1\u7b97\u5782\u76f4\u4e0e\u7ebf\u65b9\u5411\u7684\u65cb\u8f6c\u77e9\u9635\n  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n  float arrowWidth = u_arrowWidth;\n  float arrowHeight = u_arrowHeight;\n\n  vec2 arrowOffset = vec2(0.0);\n  /*\n  * a_DistanceAndIndex.y \u7528\u4e8e\u6807\u8bb0\u5f53\u524d\u9876\u70b9\u5c5e\u4e8e\u54ea\u4e00\u7ec4\uff08\u4e24\u4e2a\u9876\u70b9\u4e00\u7ec4\uff0c\u6784\u6210\u7ebf\u7684\u5176\u5b9e\u662f\u77e9\u5f62\uff0c\u6700\u7b80\u9700\u8981\u56db\u4e2a\u9876\u70b9\u3001\u4e24\u7ec4\u9876\u70b9\u6784\u6210\uff09\n  */\n  if(a_DistanceAndIndex.y == 0.0) {\n    // \u7bad\u5934\u5c16\u90e8\n    offset = vec2(0.0);\n  } else if(a_DistanceAndIndex.y == 1.0) {\n    // \u7bad\u5934\u4e24\u4fa7\n    arrowOffset = rotation_matrix*(offset * arrowHeight);\n    offset += arrowOffset; // \u6cbf\u7ebf\u504f\u79fb\n    offset = offset * arrowWidth; // \u5782\u76f4\u7ebf\u5411\u5916\u504f\u79fb\uff08\u662f\u6784\u5efa\u7bad\u5934\u4e24\u4fa7\u7684\u9876\u70b9\uff09\n  } else if(a_DistanceAndIndex.y == 2.0 || a_DistanceAndIndex.y == 3.0 || a_DistanceAndIndex.y == 4.0) {\n    // \u504f\u79fb\u5176\u4f59\u7684\u70b9\u4f4d\uff08\u5c06\u957f\u5ea6\u8ba9\u4f4d\u7ed9\u7bad\u5934\uff09\n    arrowOffset = rotation_matrix*(offset * arrowHeight) * arrowWidth;\n    offset += arrowOffset;// \u6cbf\u7ebf\u504f\u79fb\n  }\n\n  return offset;\n}\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  float d_texPixelLen;    // \u8d34\u56fe\u7684\u50cf\u7d20\u957f\u5ea6\uff0c\u6839\u636e\u5730\u56fe\u5c42\u7ea7\u7f29\u653e\n\n  v_iconMapUV = a_iconMapUV;\n  d_texPixelLen = project_float_pixel(u_icon_step);\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    d_texPixelLen *= 10.0;\n  }\n\n  v_color = a_Color;\n\n  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);\n  \n  vec2 offset = project_pixel(size.xy);\n\n  float lineDistance = a_DistanceAndIndex.x;\n  float currentLinePointRatio = lineDistance / a_Total_Distance;\n \n  if(u_arrow > 0.0) {\n      //  \u8ba1\u7b97\u7bad\u5934\n    offset = calculateArrow(offset);\n\n    if(a_DistanceAndIndex.y > 4.0) {\n      offset *= mix(1.0, u_tailWidth, currentLinePointRatio);\n    }\n  }\n\n  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\uff08\u5411\u4e24\u4fa7\u504f\u79fb\u7684\u548c\uff09\n  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\uff0c\u6309\u5730\u56fe\u7b49\u7ea7\u7f29\u653e\u540e\u7684\u8ddd\u79bb \u5355\u4fa7 * 2\n  float texV = lineOffsetWidth/linePixelSize; // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n  // \u8bbe\u7f6e\u6570\u636e\u96c6\u7684\u53c2\u6570\n  styleMappingMat[3][0] = currentLinePointRatio; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  styleMappingMat[3][1] = lineDistance;       // \u5f53\u524d\u9876\u70b9\u7684\u8ddd\u79bb\n  styleMappingMat[3][2] = d_texPixelLen;    // \u8d34\u56fe\u7684\u50cf\u7d20\u957f\u5ea6\uff0c\u6839\u636e\u5730\u56fe\u5c42\u7ea7\u7f29\u653e\n  styleMappingMat[3][3] = texV;             // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));\n\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));\n\n  float h = float(a_Position.z) * u_vertexScale; // \u7ebf\u9876\u70b9\u7684\u9ad8\u5ea6 - \u517c\u5bb9\u4e0d\u5b58\u5728\u7b2c\u4e09\u4e2a\u6570\u503c\u7684\u60c5\u51b5 vertex height\n  float lineHeight = a_Size.y; // size \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4ee3\u8868\u7684\u9ad8\u5ea6 [linewidth, lineheight]\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    lineHeight *= 0.2; // \u4fdd\u6301\u548c amap/mapbox \u4e00\u81f4\u7684\u6548\u679c\n    h *= 0.2;\n    if(u_heightfixed < 1.0) {\n      lineHeight = project_pixel(a_Size.y);\n    }\n    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));\n  } else {\n    // mapbox -  amap\n    \n    // \u517c\u5bb9 mapbox \u5728\u7ebf\u9ad8\u5ea6\u4e0a\u7684\u6548\u679c\u8868\u73b0\u57fa\u672c\u4e00\u81f4\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      // mapbox\n      // \u4fdd\u6301\u9ad8\u5ea6\u76f8\u5bf9\u4e0d\u53d8\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      h *= mapboxZoomScale;\n      h += u_raisingHeight * mapboxZoomScale;\n      if(u_heightfixed > 0.0) {\n        lineHeight *= mapboxZoomScale;\n      }\n      \n    } else {\n      // amap\n      h += u_raisingHeight;\n      // lineHeight \u9876\u70b9\u504f\u79fb\u9ad8\u5ea6\n      if(u_heightfixed < 1.0) {\n        lineHeight *= pow(2.0, 20.0 - u_Zoom);\n      }\n    }\n\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));\n  }\n\n  setPickingColor(a_PickingColor);\n}\n',gE='varying vec4 v_color;\nuniform float u_linearDir: 1.0;\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\n#pragma include "picking"\n\n\nvarying mat4 styleMappingMat;\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float linearRadio = styleMappingMat[3][0]; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  if(u_linearDir < 1.0) {\n    linearRadio = styleMappingMat[3][3];\n  }\n\n  if(u_linearColor == 1.0) { // \u4f7f\u7528\u6e10\u53d8\u989c\u8272\n    gl_FragColor = mix(u_sourceColor, u_targetColor, linearRadio);\n  } else { // \u4f7f\u7528 color \u65b9\u6cd5\u4f20\u5165\u7684\u989c\u8272\n     gl_FragColor = v_color;\n  }\n\n  gl_FragColor.a *= opacity; // \u5168\u5c40\u900f\u660e\u5ea6\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',yE={solid:0,dash:1},bE=function(e){Object(et["a"])(n,e);var t=fE(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"textureEventFlag",!1),Object(Ge["a"])(Object(gt["a"])(e),"texture",e.createTexture2D({data:[0,0,0,0],mag:ad.NEAREST,min:ad.NEAREST,premultiplyAlpha:!1,width:1,height:1})),Object(Ge["a"])(Object(gt["a"])(e),"updateTexture",(function(){var t=e.rendererService.createTexture2D;if(e.texture)return e.texture.update({data:e.iconService.getCanvas()}),void e.layer.render();e.texture=t({data:e.iconService.getCanvas(),mag:ad.NEAREST,min:ad.NEAREST,premultiplyAlpha:!1,width:1024,height:e.iconService.canvasHeight||128})})),e}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t,r=e.sourceColor,i=e.targetColor,o=e.textureBlend,a=void 0===o?"normal":o,s=e.lineType,u=void 0===s?"solid":s,c=e.dashArray,l=void 0===c?[10,5,0,0]:c,f=e.lineTexture,p=void 0!==f&&f,h=e.iconStep,d=void 0===h?100:h,v=e.vertexHeightScale,m=void 0===v?20:v,g=e.borderWidth,y=void 0===g?0:g,b=e.borderColor,_=void 0===b?"#ccc":b,x=e.raisingHeight,w=void 0===x?0:x,O=e.heightfixed,E=void 0!==O&&O,S=e.linearDir,j=void 0===S?uE.VERTICAL:S,A=e.blur,k=void 0===A?[1,1,1]:A,C=e.arrow,T=void 0===C?{enable:!1,arrowWidth:2,arrowHeight:3,tailWidth:1}:C;2===l.length&&l.push(0,0),this.rendererService.getDirty()&&this.texture&&this.texture.bind();var M=0,P=[0,0,0,0],I=[0,0,0,0];if(r&&i&&(P=fi(r),I=fi(i),M=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n})){this.judgeStyleAttributes({opacity:n});var R=this.layer.getEncodedData(),L=this.calDataFrame(this.cellLength,R,this.cellProperties),D=L.data,N=L.width,F=L.height;this.rowCount=F,this.dataTexture=this.cellLength>0&&D.length>0?this.createTexture2D({flipY:!0,data:D,format:ad.LUMINANCE,type:ad.FLOAT,width:N,height:F}):this.createTexture2D({flipY:!0,data:[1],format:ad.LUMINANCE,type:ad.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Object(Ei["isNumber"])(n)?n:1,u_textureBlend:a===cE.NORMAL?0:1,u_line_type:yE[u],u_dash_array:l,u_blur:k,u_texture:this.texture,u_line_texture:p?1:0,u_icon_step:d,u_textSize:[1024,this.iconService.canvasHeight||128],u_borderWidth:y,u_borderColor:fi(_),u_linearDir:j===uE.VERTICAL?1:0,u_linearColor:M,u_sourceColor:P,u_targetColor:I,u_heightfixed:Number(E),u_vertexScale:m,u_raisingHeight:Number(w),u_arrow:Number(T.enable),u_arrowHeight:T.arrowHeight||3,u_arrowWidth:T.arrowWidth||2,u_tailWidth:void 0===T.tailWidth?1:T.tailWidth}}},{key:"getAnimateUniforms",value:function(){var e=this.layer.getLayerConfig(),t=e.animateOption;return{u_animate:this.animateOption2Array(t),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.textureEventFlag||(this.textureEventFlag=!0,this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture)),e.abrupt("return",this.buildModels());case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e,t;null===(e=this.texture)||void 0===e||e.destroy(),null===(t=this.dataTexture)||void 0===t||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o,a,s,u,c,l,f;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.layer.getLayerConfig(),n=t.depth,r=void 0!==n&&n,i=t.workerEnabled,o=void 0!==i&&i,a=t.enablePicking,s=this.getShaders(),u=s.frag,c=s.vert,l=s.type,this.layer.triangulation=bf,e.next=5,this.layer.buildLayerModel({moduleName:"line"+l,vertexShader:c,fragmentShader:u,triangulation:bf,depth:{enable:r},workerEnabled:o,workerOptions:{modelType:"line"+l,enablePicking:a,iconMap:this.iconService.getIconMap()}});case 5:return f=e.sent,e.abrupt("return",[f]);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getShaders",value:function(){var e=this.layer.getLayerConfig(),t=e.sourceColor,n=e.targetColor,r=e.lineType;return"dash"===r?{frag:hE,vert:dE,type:"Dash"}:t&&n?{frag:gE,vert:mE,type:"Linear"}:{frag:vE,vert:mE,type:""}}},{key:"registerBuiltinAttributes",value:function(){var e=this;this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:Ry.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(e,t,n,r,i,o){return void 0===o?[n[3],10]:[n[3],o]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:Ry.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e,t,n){return[n[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ry.Attribute,descriptor:{name:"a_Size",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(e){var t=e.size,n=void 0===t?1:t;return Array.isArray(n)?[n[0],n[1]]:[n,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ry.Attribute,descriptor:{name:"a_Normal",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:3,update:function(e,t,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:Ry.Attribute,descriptor:{name:"a_Miter",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e,t,n){return[n[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ry.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(t){var n=e.iconService.getIconMap(),r=t.texture,i=n[r]||{x:0,y:0},o=i.x,a=i.y;return[o,a]}}})}}]),n}(Lx);function _E(e){var t=xE();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function xE(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var wE='uniform float u_opacity : 1.0;\nuniform sampler2D u_texture;\nuniform float u_linearDir: 1.0;\n\n#pragma include "picking"\n\nvarying mat4 styleMappingMat;\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float linearRadio = styleMappingMat[3].r; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  if(u_linearDir < 1.0) {\n    linearRadio = styleMappingMat[3][3];\n  }\n\n  gl_FragColor = texture2D(u_texture, vec2(linearRadio, 0.5));\n\n  gl_FragColor.a *= opacity; // \u5168\u5c40\u900f\u660e\u5ea6\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',OE='\nattribute float a_Miter;\nattribute vec2 a_Size;\nattribute vec3 a_Normal;\nattribute vec3 a_Position;\n\n// dash line\nattribute float a_Total_Distance;\nattribute vec2 a_DistanceAndIndex;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nuniform float u_heightfixed: 0.0;\nuniform float u_vertexScale: 1.0;\nuniform float u_raisingHeight: 0.0;\n\nuniform float u_opacity: 1.0;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);\n  \n  vec2 offset = project_pixel(size.xy);\n\n  float lineDistance = a_DistanceAndIndex.x;\n  float currentLinePointRatio = lineDistance / a_Total_Distance;\n \n\n  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\uff08\u5411\u4e24\u4fa7\u504f\u79fb\u7684\u548c\uff09\n  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\uff0c\u6309\u5730\u56fe\u7b49\u7ea7\u7f29\u653e\u540e\u7684\u8ddd\u79bb \u5355\u4fa7 * 2\n  float texV = lineOffsetWidth/linePixelSize; // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n  // \u8bbe\u7f6e\u6570\u636e\u96c6\u7684\u53c2\u6570\n  styleMappingMat[3][0] = currentLinePointRatio; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  styleMappingMat[3][3] = texV;             // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));\n\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));\n\n  float h = float(a_Position.z) * u_vertexScale; // \u7ebf\u9876\u70b9\u7684\u9ad8\u5ea6 - \u517c\u5bb9\u4e0d\u5b58\u5728\u7b2c\u4e09\u4e2a\u6570\u503c\u7684\u60c5\u51b5 vertex height\n  float lineHeight = a_Size.y; // size \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4ee3\u8868\u7684\u9ad8\u5ea6 [linewidth, lineheight]\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    lineHeight *= 0.2; // \u4fdd\u6301\u548c amap/mapbox \u4e00\u81f4\u7684\u6548\u679c\n    h *= 0.2;\n    if(u_heightfixed < 1.0) {\n      lineHeight = project_pixel(a_Size.y);\n    }\n    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));\n  } else {\n    // mapbox -  amap\n    \n    // \u517c\u5bb9 mapbox \u5728\u7ebf\u9ad8\u5ea6\u4e0a\u7684\u6548\u679c\u8868\u73b0\u57fa\u672c\u4e00\u81f4\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      // mapbox\n      // \u4fdd\u6301\u9ad8\u5ea6\u76f8\u5bf9\u4e0d\u53d8\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      h *= mapboxZoomScale;\n      h += u_raisingHeight * mapboxZoomScale;\n      if(u_heightfixed > 0.0) {\n        lineHeight *= mapboxZoomScale;\n      }\n      \n    } else {\n      // amap\n      h += u_raisingHeight;\n      // lineHeight \u9876\u70b9\u504f\u79fb\u9ad8\u5ea6\n      if(u_heightfixed < 1.0) {\n        lineHeight *= pow(2.0, 20.0 - u_Zoom);\n      }\n    }\n\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));\n  }\n\n  setPickingColor(a_PickingColor);\n}\n',EE=function(e){Object(et["a"])(n,e);var t=_E(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"updateTexture",(function(){var t=e.rendererService.createTexture2D;e.colorTexture&&e.colorTexture.destroy();var n=e.layer.getLayerConfig(),r=n.rampColors,i=di(r);e.colorTexture=t({data:new Uint8Array(i.data),width:i.width,height:i.height,wrapS:ad.CLAMP_TO_EDGE,wrapT:ad.CLAMP_TO_EDGE,min:ad.NEAREST,mag:ad.NEAREST,flipY:!1})})),e}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t,r=e.vertexHeightScale,i=void 0===r?20:r,o=e.raisingHeight,a=void 0===o?0:o,s=e.heightfixed,u=void 0!==s&&s,c=e.linearDir,l=void 0===c?uE.VERTICAL:c;if(this.rendererService.getDirty()&&this.colorTexture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n})){this.judgeStyleAttributes({opacity:n});var f=this.layer.getEncodedData(),p=this.calDataFrame(this.cellLength,f,this.cellProperties),h=p.data,d=p.width,v=p.height;this.rowCount=v,this.dataTexture=this.cellLength>0&&h.length>0?this.createTexture2D({flipY:!0,data:h,format:ad.LUMINANCE,type:ad.FLOAT,width:d,height:v}):this.createTexture2D({flipY:!0,data:[1],format:ad.LUMINANCE,type:ad.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_linearDir:l===uE.VERTICAL?1:0,u_opacity:Object(Ei["isNumber"])(n)?n:1,u_texture:this.colorTexture,u_heightfixed:Number(u),u_vertexScale:i,u_raisingHeight:Number(a)}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.updateTexture(),e.abrupt("return",this.buildModels());case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e,t;null===(e=this.colorTexture)||void 0===e||e.destroy(),null===(t=this.dataTexture)||void 0===t||t.destroy()}},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.layer.getLayerConfig(),n=t.depth,r=void 0!==n&&n,this.layer.triangulation=hw,e.next=4,this.layer.buildLayerModel({moduleName:"lineRampColors",vertexShader:OE,fragmentShader:wE,triangulation:hw,depth:{enable:r}});case 4:return i=e.sent,e.abrupt("return",[i]);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:Ry.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(e,t,n,r,i,o){return void 0===o?[n[3],10]:[n[3],o]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:Ry.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e,t,n){return[n[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ry.Attribute,descriptor:{name:"a_Size",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(e){var t=e.size,n=void 0===t?1:t;return Array.isArray(n)?[n[0],n[1]]:[n,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ry.Attribute,descriptor:{name:"a_Normal",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:3,update:function(e,t,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:Ry.Attribute,descriptor:{name:"a_Miter",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e,t,n){return[n[4]]}}})}}]),n}(Lx);function SE(e){var t=jE();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function jE(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var AE="\nvarying vec4 v_color;\nvarying mat4 styleMappingMat;\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float d_distance_ratio = styleMappingMat[3].r; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n\n  gl_FragColor = v_color;\n  gl_FragColor.a *= opacity; // \u5168\u5c40\u900f\u660e\u5ea6\n}\n",kE="uniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\nvarying mat4 styleMappingMat;\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n\n  // styleMappingMat[3][0] \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  gl_FragColor = mix(u_sourceColor, u_targetColor, styleMappingMat[3][0]);\n  gl_FragColor.a *= opacity; // \u5168\u5c40\u900f\u660e\u5ea6\n}\n",CE='attribute vec4 a_Color;\nattribute vec2 a_Size;\nattribute vec3 a_Position;\n\nattribute float a_Total_Distance;\nattribute float a_Distance;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nuniform float u_opacity: 1.0;\nuniform float u_vertexScale: 1.0;\n\n#pragma include "projection"\n\nvarying vec4 v_color;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  \n  v_color = a_Color; \n  styleMappingMat[3][0] = a_Distance / a_Total_Distance;\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));\n\n  float h = float(a_Position.z) * u_vertexScale; // \u7ebf\u9876\u70b9\u7684\u9ad8\u5ea6 - \u517c\u5bb9\u4e0d\u5b58\u5728\u7b2c\u4e09\u4e2a\u6570\u503c\u7684\u60c5\u51b5\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xy, project_pixel(a_Size.y) + h * 0.2, 1.0));\n  } else {\n    float lineHeight = a_Size.y;\n    // \u517c\u5bb9 mapbox \u5728\u7ebf\u9ad8\u5ea6\u4e0a\u7684\u6548\u679c\u8868\u73b0\u57fa\u672c\u4e00\u81f4\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      // \u4fdd\u6301\u9ad8\u5ea6\u76f8\u5bf9\u4e0d\u53d8\n      h *= 2.0/pow(2.0, 20.0 - u_Zoom);\n    }\n\n    // #define COORDINATE_SYSTEM_P20 5.0\n    // #define COORDINATE_SYSTEM_P20_OFFSET 6.0\n    // amap1.x\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n      // \u4fdd\u6301\u9ad8\u5ea6\u76f8\u5bf9\u4e0d\u53d8\n      lineHeight *= pow(2.0, 20.0 - u_Zoom);\n    }\n\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));\n    gl_PointSize = 10.0;\n  }\n}\n',TE=function(e){Object(et["a"])(n,e);var t=SE(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t,r=e.sourceColor,i=e.targetColor,o=e.vertexHeightScale,a=void 0===o?20:o,s=0,u=[0,0,0,0],c=[0,0,0,0];if(r&&i&&(u=fi(r),c=fi(i),s=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n})){this.judgeStyleAttributes({opacity:n});var l=this.layer.getEncodedData(),f=this.calDataFrame(this.cellLength,l,this.cellProperties),p=f.data,h=f.width,d=f.height;this.rowCount=d,this.dataTexture=this.cellLength>0&&p.length>0?this.createTexture2D({flipY:!0,data:p,format:ad.LUMINANCE,type:ad.FLOAT,width:h,height:d}):this.createTexture2D({flipY:!0,data:[1],format:ad.LUMINANCE,type:ad.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Object(Ei["isNumber"])(n)?n:1,u_linearColor:s,u_sourceColor:u,u_targetColor:c,u_vertexScale:a}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.buildModels());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e;null===(e=this.dataTexture)||void 0===e||e.destroy()}},{key:"getShaders",value:function(){var e=this.layer.getLayerConfig(),t=e.sourceColor,n=e.targetColor;return t&&n?{frag:kE,vert:CE,type:"lineSimpleLinear"}:{frag:AE,vert:CE,type:"lineSimpleNormal"}}},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.getShaders(),n=t.frag,r=t.vert,i=t.type,e.next=3,this.layer.buildLayerModel({moduleName:i,vertexShader:r,fragmentShader:n,triangulation:dw,primitive:ad.LINES,depth:{enable:!1},pick:!1});case 3:return o=e.sent,e.abrupt("return",[o]);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"distance",type:Ry.Attribute,descriptor:{name:"a_Distance",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e,t,n){return[n[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:Ry.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e,t,n){return[n[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ry.Attribute,descriptor:{name:"a_Size",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(e){var t=e.size,n=void 0===t?1:t;return Array.isArray(n)?[n[0],n[1]]:[n,0]}}})}}]),n}(Lx);function ME(e){var t=PE();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function PE(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var IE='#define Animate 0.0\n#define LineTexture 1.0\n\n// line texture\nuniform float u_line_texture;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\nuniform float u_opacity : 1.0;\nuniform float u_textureBlend;\nuniform float u_iconStepCount;\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ]; // \u63a7\u5236\u8fd0\u52a8\n\nvarying vec2 v_iconMapUV;\nvarying float v_blur;\nvarying float v_radio;\nvarying vec4 v_color;\nvarying vec4 v_dataset;\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = u_opacity;\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  float d_distance_ratio = v_dataset.r; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  float v = v_dataset.a;\n\n  if(u_linearColor == 1.0) { // \u4f7f\u7528\u6e10\u53d8\u989c\u8272\n    gl_FragColor = mix(u_sourceColor, u_targetColor, v);\n  } else { // \u4f7f\u7528 color \u65b9\u6cd5\u4f20\u5165\u7684\u989c\u8272\n     gl_FragColor = v_color;\n  }\n\n  gl_FragColor.a *= opacity; // \u5168\u5c40\u900f\u660e\u5ea6\n  if(u_animate.x == Animate) {\n      animateSpeed = u_time / u_animate.y;\n       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      alpha = smoothstep(0., 1., alpha);\n      gl_FragColor.a *= alpha;\n  }\n\n  if(u_line_texture == LineTexture) { // while load texture\n    float aDistance = v_dataset.g;      // \u5f53\u524d\u9876\u70b9\u7684\u8ddd\u79bb\n    float d_texPixelLen = v_dataset.b;  // \u8d34\u56fe\u7684\u50cf\u7d20\u957f\u5ea6\uff0c\u6839\u636e\u5730\u56fe\u5c42\u7ea7\u7f29\u653e\n    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);\n    float v = v_dataset.a;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n    // \u8ba1\u7b97\u7eb9\u7406\u95f4\u9694 start\n    float flag = 0.0;\n    if(u > 1.0/u_iconStepCount) {\n      flag = 1.0;\n    }\n    u = fract(u*u_iconStepCount);\n    // \u8ba1\u7b97\u7eb9\u7406\u95f4\u9694 end\n\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n    vec4 pattern = texture2D(u_texture, uv);\n\n    // Tip: \u5224\u65ad\u7eb9\u7406\u95f4\u9694\n    if(flag > 0.0) {\n      pattern = vec4(0.0);\n    }\n\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      gl_FragColor = filterColor(gl_FragColor + pattern);\n    } else { // replace\n        pattern.a *= opacity;\n        if(gl_FragColor.a <= 0.0) {\n          pattern.a = 0.0;\n        }\n        gl_FragColor = filterColor(pattern);\n    }\n  }\n  \n\n  // blur - AA\n  if(v < v_blur) {\n    gl_FragColor.a = mix(0.0, gl_FragColor.a, v/v_blur);\n  } else if(v > 1.0 - v_blur) {\n    gl_FragColor.a = mix(gl_FragColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);\n  }\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',RE='#define Animate 0.0\n\nattribute float a_Miter;\nattribute vec4 a_Color;\nattribute vec2 a_Size;\nattribute vec3 a_Normal;\nattribute vec3 a_Position;\nattribute vec2 a_iconMapUV;\nattribute float a_Total_Distance;\nattribute float a_Distance;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\nuniform float u_icon_step: 100;\nuniform float u_heightfixed;\nuniform float u_linearColor: 0;\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\n// texV \u7ebf\u56fe\u5c42 - \u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\uff08\u7ebf\u7684\u5bbd\u5ea6\u65b9\u5411\uff09\nvarying vec2 v_iconMapUV;\nvarying vec4 v_color;\nvarying float v_blur;\nvarying float v_radio;\nvarying vec4 v_dataset;\n\nvoid main() {\n\n\n  float d_distance_ratio; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  float d_texPixelLen;    // \u8d34\u56fe\u7684\u50cf\u7d20\u957f\u5ea6\uff0c\u6839\u636e\u5730\u56fe\u5c42\u7ea7\u7f29\u653e\n\n  v_iconMapUV = a_iconMapUV;\n  if(u_heightfixed < 1.0) {     // \u9ad8\u5ea6\u968f zoom \u8c03\u6574\n    d_texPixelLen = project_pixel(u_icon_step);\n  } else {\n    d_texPixelLen = u_icon_step;\n  }\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    d_texPixelLen *= 10.0;\n  }\n\n  if(u_animate.x == Animate || u_linearColor == 1.0) {\n      d_distance_ratio = a_Distance / a_Total_Distance;\n  }\n\n  float miter = (a_Miter + 1.0)/2.0;\n  // \u8bbe\u7f6e\u6570\u636e\u96c6\u7684\u53c2\u6570\n  v_dataset[0] = d_distance_ratio; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  v_dataset[1] = a_Distance;       // \u5f53\u524d\u9876\u70b9\u7684\u8ddd\u79bb\n  v_dataset[2] = d_texPixelLen;    // \u8d34\u56fe\u7684\u50cf\u7d20\u957f\u5ea6\uff0c\u6839\u636e\u5730\u56fe\u5c42\u7ea7\u7f29\u653e\n  v_dataset[3] = miter;          // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c 0 - 1\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));\n\n  float originSize = a_Size.x;  // \u56fa\u5b9a\u9ad8\u5ea6\n  if(u_heightfixed < 1.0) {     // \u9ad8\u5ea6\u968f zoom \u8c03\u6574\n    originSize = project_float_pixel(a_Size.x);\n  }\n\n  float wallHeight = originSize * miter;\n  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));\n\n  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);\n  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xy, wallHeight, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));\n  }\n\n  setPickingColor(a_PickingColor);\n}\n',LE=function(e){Object(et["a"])(n,e);var t=ME(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"updateTexture",(function(){var t=e.rendererService.createTexture2D;if(e.texture)return e.texture.update({data:e.iconService.getCanvas()}),void e.layer.render();e.texture=t({data:e.iconService.getCanvas(),mag:ad.NEAREST,min:ad.NEAREST,premultiplyAlpha:!1,width:1024,height:e.iconService.canvasHeight||128})})),e}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t,r=e.sourceColor,i=e.targetColor,o=e.textureBlend,a=void 0===o?"normal":o,s=e.heightfixed,u=void 0!==s&&s,c=e.lineTexture,l=void 0!==c&&c,f=e.iconStep,p=void 0===f?100:f,h=e.iconStepCount,d=void 0===h?1:h;this.rendererService.getDirty()&&this.texture.bind();var v=0,m=[0,0,0,0],g=[0,0,0,0];return r&&i&&(m=fi(r),g=fi(i),v=1),{u_heightfixed:Number(u),u_opacity:Object(Ei["isNumber"])(n)?n:1,u_textureBlend:"normal"===a?0:1,u_texture:this.texture,u_line_texture:l?1:0,u_iconStepCount:d,u_icon_step:p,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:v,u_sourceColor:m,u_targetColor:g}}},{key:"getAnimateUniforms",value:function(){var e=this.layer.getLayerConfig(),t=e.animateOption;return{u_animate:this.animateOption2Array(t),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),e.abrupt("return",this.buildModels());case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e;null===(e=this.texture)||void 0===e||e.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.layer.buildLayerModel({moduleName:"lineWall",vertexShader:RE,fragmentShader:IE,triangulation:hw,depth:{enable:!1},blend:this.getBlend()});case 2:return t=e.sent,e.abrupt("return",[t]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){var e=this;this.styleAttributeService.registerStyleAttribute({name:"distance",type:Ry.Attribute,descriptor:{name:"a_Distance",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e,t,n){return[n[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:Ry.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e,t,n){return[n[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ry.Attribute,descriptor:{name:"a_Size",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(e){var t=e.size,n=void 0===t?1:t;return Array.isArray(n)?[n[0],n[1]]:[n,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ry.Attribute,descriptor:{name:"a_Normal",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:3,update:function(e,t,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:Ry.Attribute,descriptor:{name:"a_Miter",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e,t,n){return[n[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ry.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(t){var n=e.iconService.getIconMap(),r=t.texture,i=n[r]||{x:0,y:0},o=i.x,a=i.y;return[o,a]}}})}}]),n}(Lx),DE={arc:RO,arc3d:VO,greatcircle:nE,wall:LE,line:bE,halfLine:sE,simple:TE,linearline:EE,earthArc3d:KO},NE=DE;function FE(e){var t=zE();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function zE(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var BE=function(e){Object(et["a"])(n,e);var t=FE(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"type","LineLayer"),Object(Ge["a"])(Object(gt["a"])(e),"arrowInsertCount",0),Object(Ge["a"])(Object(gt["a"])(e),"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}}),e}return Object(He["a"])(n,[{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.getModelType(),this.layerModel=new NE[t](this),e.next=4,this.initLayerModels();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getDefaultConfig",value:function(){var e=this.getModelType(),t={line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},halfLine:{},earthArc3d:{}};return t[e]}},{key:"getModelType",value:function(){var e;if(this.layerType)return this.layerType;var t=this.styleAttributeService.getLayerStyleAttribute("shape"),n=null===t||void 0===t||null===(e=t.scale)||void 0===e?void 0:e.field;return n||"line"}},{key:"processData",value:function(e){if("simple"!==this.getModelType())return e;var t=[];return e.map((function(e){if(Array.isArray(e.coordinates)&&Array.isArray(e.coordinates[0])&&Array.isArray(e.coordinates[0][0])){var n=Object(N["a"])({},e);e.coordinates.map((function(e){t.push(Object(N["a"])(Object(N["a"])({},n),{},{coordinates:e}))}))}else t.push(e)})),t}}]),n}(Cx);function UE(e){var t=VE();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function VE(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var HE='varying vec4 v_color;\nuniform float u_opacity: 1.0;\n\nuniform float u_pickLight: 0.0;\n\n#pragma include "picking"\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\nuniform float u_opacitylinear: 0.0;\nuniform float u_opacitylinear_dir: 1.0;\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float lightWeight = styleMappingMat[1][3];\n  float barLinearZ = styleMappingMat[2][3];\n\n  // \u8bbe\u7f6e\u5706\u67f1\u7684\u5e95\u8272\n  if(u_linearColor == 1.0) { // \u4f7f\u7528\u6e10\u53d8\u989c\u8272\n    gl_FragColor = mix(u_sourceColor, u_targetColor, barLinearZ);\n    gl_FragColor.rgb *= lightWeight;\n  } else { // \u4f7f\u7528 color \u65b9\u6cd5\u4f20\u5165\u7684\u989c\u8272\n     gl_FragColor = v_color;\n  }\n\n  // \u5e94\u7528\u900f\u660e\u5ea6\n  gl_FragColor.a *= opacity;\n\n  // \u5f00\u542f\u900f\u660e\u5ea6\u6e10\u53d8\n  if(u_opacitylinear > 0.0) {\n    gl_FragColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - barLinearZ): barLinearZ;\n  }\n\n  // picking\n  if(u_pickLight > 0.0) {\n    gl_FragColor = filterColorAlpha(gl_FragColor, lightWeight);\n  } else {\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n}\n',GE='precision highp float;\n\n#define pi 3.1415926535\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec3 a_Position;\nattribute vec3 a_Pos;\nattribute vec4 a_Color;\nattribute vec3 a_Size;\nattribute vec3 a_Normal;\n\nuniform float u_heightfixed: 0.0; // \u9ed8\u8ba4\u4e0d\u56fa\u5b9a\nuniform float u_globel;\nuniform float u_r;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nvarying vec4 v_color;\n\nuniform float u_opacity : 1;\nuniform float u_lightEnable: 1;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nfloat getYRadian(float x, float z) {\n  if(x > 0.0 && z > 0.0) {\n    return atan(x/z);\n  } else if(x > 0.0 && z <= 0.0){\n    return atan(-z/x) + pi/2.0;\n  } else if(x <= 0.0 && z <= 0.0) {\n    return  pi + atan(x/z); //atan(x/z) + \n  } else {\n    return atan(z/-x) + pi*3.0/2.0;\n  }\n}\n\nfloat getXRadian(float y, float r) {\n  return atan(y/r);\n}\n\nvoid main() {\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA - lightWeight\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1] - linearZ(\u5782\u76f4\u65b9\u5411 0 - 1 \u7684\u503c)\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  vec3 size = a_Size * a_Position;\n\n  // a_Position.z \u662f\u5728\u6784\u5efa\u7f51\u683c\u7684\u65f6\u5019\u4f20\u5165\u7684\u6807\u51c6\u503c 0 - 1\uff0c\u5728\u63d2\u503c\u5668\u63d2\u503c\u53ef\u4ee5\u83b7\u53d6 0\uff5e1 \u7ebf\u6027\u6e10\u53d8\u7684\u503c\n  styleMappingMat[2][3] =  a_Position.z;\n\n  vec3 offset = size; // \u63a7\u5236\u5706\u67f1\u4f53\u7684\u5927\u5c0f - \u4ece\u6807\u51c6\u5355\u4f4d\u5706\u67f1\u4f53\u8fdb\u884c\u504f\u79fb\n  if(u_heightfixed < 1.0) { // \u5706\u67f1\u4f53\u4e0d\u56fa\u5b9a\u9ad8\u5ea6\n    \n    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n      // P20 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf1\n      offset = offset * pow(2.0, (19.0 - u_Zoom));\n    }\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n      // P20_2 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf3\n      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));\n    }\n  } else {// \u5706\u67f1\u4f53\u56fa\u5b9a\u9ad8\u5ea6 \uff08 \u5904\u7406 mapbox \uff09\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);\n    }\n  }\n\n\n  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));\n\n  // u_r \u63a7\u5236\u5706\u67f1\u7684\u751f\u957f\n  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);\n\n  // \u5706\u67f1\u5149\u7167\u6548\u679c\n  float lightWeight = 1.0;\n  if(u_lightEnable > 0.0) { // \u53d6\u6d88\u4e09\u5143\u8868\u8fbe\u5f0f\uff0c\u589e\u5f3a\u5065\u58ee\u6027\n    lightWeight = calc_lighting(pos);\n  }\n  styleMappingMat[1][3] = lightWeight;\n\n  v_color =vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  \n  // \u5728\u5730\u7403\u6a21\u5f0f\u4e0b\uff0c\u5c06\u539f\u672c\u5782\u76f4\u4e8e xy \u5e73\u9762\u7684\u5706\u67f1\u8c03\u6574\u59ff\u6001\u5230\u9002\u5e94\u5706\u7684\u89d2\u5ea6\n  //\u65cb\u8f6c\u77e9\u9635mx\uff0c\u521b\u5efa\u7ed5x\u8f74\u65cb\u8f6c\u77e9\u9635\n  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);\n  float xRadian = getXRadian(a_Pos.y, r);\n  float xcos = cos(xRadian);//\u6c42\u89e3\u65cb\u8f6c\u89d2\u5ea6\u4f59\u5f26\u503c\n  float xsin = sin(xRadian);//\u6c42\u89e3\u65cb\u8f6c\u89d2\u5ea6\u6b63\u5f26\u503c\n  mat4 mx = mat4(\n    1,0,0,0,  \n    0,xcos,-xsin,0,  \n    0,xsin,xcos,0,  \n    0,0,0,1);\n\n  //\u65cb\u8f6c\u77e9\u9635my\uff0c\u521b\u5efa\u7ed5y\u8f74\u65cb\u8f6c\u77e9\u9635\n  float yRadian = getYRadian(a_Pos.x, a_Pos.z);\n  float ycos = cos(yRadian);//\u6c42\u89e3\u65cb\u8f6c\u89d2\u5ea6\u4f59\u5f26\u503c\n  float ysin = sin(yRadian);//\u6c42\u89e3\u65cb\u8f6c\u89d2\u5ea6\u6b63\u5f26\u503c\n  mat4 my = mat4(\n    ycos,0,-ysin,0,  \n    0,1,0,0,  \n    ysin,0,ycos,0,  \n    0,0,0,1);\n\n  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);\n  \n\n  setPickingColor(a_PickingColor);\n}\n',WE=function(e){Object(et["a"])(n,e);var t=UE(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"raiseCount",0),Object(Ge["a"])(Object(gt["a"])(e),"raiseRepeat",0),e}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.animateOption,n=void 0===t?{enable:!1,speed:.01,repeat:!1}:t,r=e.opacity,i=void 0===r?1:r,o=e.sourceColor,a=e.targetColor,s=e.pickLight,u=void 0!==s&&s,c=e.heightfixed,l=void 0!==c&&c,f=e.opacityLinear,p=void 0===f?{enable:!1,dir:"up"}:f,h=e.lightEnable,d=void 0===h||h;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:i})){this.judgeStyleAttributes({opacity:i});var v=this.layer.getEncodedData(),m=this.calDataFrame(this.cellLength,v,this.cellProperties),g=m.data,y=m.width,b=m.height;this.rowCount=b,this.dataTexture=this.cellLength>0&&g.length>0?this.createTexture2D({flipY:!0,data:g,format:ad.LUMINANCE,type:ad.FLOAT,width:y,height:b}):this.createTexture2D({flipY:!0,data:[1],format:ad.LUMINANCE,type:ad.FLOAT,width:1,height:1})}var _=0,x=[0,0,0,0],w=[0,0,0,0];if(o&&a&&(x=fi(o),w=fi(a),_=1),this.raiseCount<1&&this.raiseRepeat>0&&n.enable){var O=n.speed,E=void 0===O?.01:O;this.raiseCount+=E,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}return{u_pickLight:Number(u),u_heightfixed:Number(l),u_r:n.enable&&this.raiseRepeat>0?this.raiseCount:1,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Object(Ei["isNumber"])(i)?i:1,u_linearColor:_,u_sourceColor:x,u_targetColor:w,u_opacitylinear:Number(p.enable),u_opacitylinear_dir:"up"===p.dir?1:0,u_lightEnable:Number(d)}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.buildModels());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.layer.getLayerConfig(),n=t.animateOption.repeat,r=void 0===n?1:n,this.raiseRepeat=r,e.next=4,this.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:GE,fragmentShader:HE,triangulation:fw,depth:{enable:!0},cull:{enable:!0,face:wi(this.mapService.version)},blend:this.getBlend()});case 4:return i=e.sent,e.abrupt("return",[i]);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e;null===(e=this.dataTexture)||void 0===e||e.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Ry.Attribute,descriptor:{name:"a_Size",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:3,update:function(e){var t=e.size;if(t){var n=[];return Array.isArray(t)&&(n=2===t.length?[t[0],t[0],t[1]]:t),Array.isArray(t)||(n=[t,t,t]),n}return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ry.Attribute,descriptor:{name:"a_Normal",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:3,update:function(e,t,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:Ry.Attribute,descriptor:{name:"a_Pos",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:3,update:function(e){var t=Oo(e.coordinates);return Fx([t[0],t[1]])}}})}}]),n}(Lx);function qE(e){var t=ZE();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function ZE(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var YE="uniform float u_additive;\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\n\n#pragma include \"sdf_2d\"\n#pragma include \"picking\"\n\n\nvoid main() {\n  int shape = int(floor(v_data.w + 0.5));\n\n  vec4 textrueStroke = vec4(\n    styleMappingMat[1][0],\n    styleMappingMat[1][1],\n    styleMappingMat[1][2],\n    styleMappingMat[1][3]\n  );\n\n  float opacity = styleMappingMat[0][0];\n  float stroke_opacity = styleMappingMat[0][1];\n  float strokeWidth = styleMappingMat[0][2];\n  vec4 strokeColor = textrueStroke == vec4(0) ? v_color : textrueStroke;\n\n  lowp float antialiasblur = v_data.z;\n  float r = v_radius / (v_radius + strokeWidth);\n\n  float outer_df;\n  float inner_df;\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\n  if (shape == 0) {\n    outer_df = sdCircle(v_data.xy, 1.0);\n    inner_df = sdCircle(v_data.xy, r);\n  } else if (shape == 1) {\n    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);\n    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);\n  } else if (shape == 2) {\n    outer_df = sdBox(v_data.xy, vec2(1.));\n    inner_df = sdBox(v_data.xy, vec2(r));\n  } else if (shape == 3) {\n    outer_df = sdPentagon(v_data.xy, 0.8);\n    inner_df = sdPentagon(v_data.xy, r * 0.8);\n  } else if (shape == 4) {\n    outer_df = sdHexagon(v_data.xy, 0.8);\n    inner_df = sdHexagon(v_data.xy, r * 0.8);\n  } else if (shape == 5) {\n    outer_df = sdOctogon(v_data.xy, 1.0);\n    inner_df = sdOctogon(v_data.xy, r);\n  } else if (shape == 6) {\n    outer_df = sdHexagram(v_data.xy, 0.52);\n    inner_df = sdHexagram(v_data.xy, r * 0.52);\n  } else if (shape == 7) {\n    outer_df = sdRhombus(v_data.xy, vec2(1.0));\n    inner_df = sdRhombus(v_data.xy, vec2(r));\n  } else if (shape == 8) {\n    outer_df = sdVesica(v_data.xy, 1.1, 0.8);\n    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);\n  }\n\n  if(outer_df > antialiasblur + 0.018) discard;\n\n  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);\n\n  float color_t = strokeWidth < 0.01 ? 0.0 : smoothstep(\n    antialiasblur,\n    0.0,\n    inner_df\n  );\n\n  if(strokeWidth < 0.01) {\n    gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);\n  } else {\n    gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), strokeColor * stroke_opacity, color_t);\n  }\n\n  if(u_additive > 0.0) {\n    gl_FragColor *= opacity_t;\n    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);\n  } else {\n    gl_FragColor.a *= opacity_t;\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n}\n",XE='attribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Extrude;\nattribute float a_Size;\nattribute float a_Shape;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\n\nuniform float u_opacity : 1;\nuniform float u_stroke_opacity : 1;\nuniform float u_stroke_width : 2;\nuniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];\nuniform vec2 u_offsets;\n\nuniform float u_blur : 0.0;\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n#pragma include "styleMappingCalStrokeOpacity"\n#pragma include "styleMappingCalStrokeWidth"\n\n#pragma include "projection"\n#pragma include "picking"\n\n\nvoid main() {\n  vec3 extrude = a_Extrude;\n  float shape_type = a_Shape;\n  /*\n  *  setPickingSize \u8bbe\u7f6e\u62fe\u53d6\u5927\u5c0f\n  */\n  float newSize = setPickingSize(a_Size);\n  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n\n  vec2 strokeOpacityAndOffset = calStrokeOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][1] = strokeOpacityAndOffset.r;\n  textureOffset = strokeOpacityAndOffset.g;\n\n  vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][2] = strokeWidthAndOffset.r;\n  textureOffset = strokeWidthAndOffset.g;\n\n  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);\n  if(hasStroke()) {\n    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R\n    textureOffset += 1.0;\n\n    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G\n    textureOffset += 1.0;\n\n    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B\n    textureOffset += 1.0;\n\n    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A\n    textureOffset += 1.0;\n  } else {\n    if(u_stroke_color == vec4(0.0)) {\n      styleMappingMat[1][0] = v_color.r;\n      styleMappingMat[1][1] = v_color.g;\n      styleMappingMat[1][2] = v_color.b;\n      styleMappingMat[1][3] = v_color.a;\n    } else {\n      styleMappingMat[1][0] = u_stroke_color.r;\n      styleMappingMat[1][1] = u_stroke_color.g;\n      styleMappingMat[1][2] = u_stroke_color.b;\n      styleMappingMat[1][3] = u_stroke_color.a;\n    }\n  }\n\n  // cal style mapping\n\n  // unpack color(vec2)\n  v_color = a_Color;\n\n  // radius(16-bit)\n  v_radius = newSize;\n\n  // anti-alias\n  //  float antialiased_blur = -max(u_blur, antialiasblur);\n  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);\n\n  // TODP: /abs(extrude.x) \u662f\u4e3a\u4e86\u517c\u5bb9\u5730\u7403\u6a21\u5f0f\n  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);\n\n\n  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1, 1.0);\n\n  setPickingColor(a_PickingColor);\n}\n',KE=function(e){Object(et["a"])(n,e);var t=qE(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t,r=e.strokeOpacity,i=void 0===r?1:r,o=e.strokeWidth,a=void 0===o?0:o,s=e.stroke,u=void 0===s?"rgba(0,0,0,0)":s,c=e.offsets,l=void 0===c?[0,0]:c,f=e.blend,p=e.blur,h=void 0===p?0:p;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n,strokeOpacity:i,strokeWidth:a,stroke:u,offsets:l})){this.judgeStyleAttributes({opacity:n,strokeOpacity:i,strokeWidth:a,stroke:u,offsets:l});var d=this.layer.getEncodedData(),v=this.calDataFrame(this.cellLength,d,this.cellProperties),m=v.data,g=v.width,y=v.height;this.rowCount=y,this.dataTexture=this.cellLength>0&&m.length>0?this.createTexture2D({flipY:!0,data:m,format:ad.LUMINANCE,type:ad.FLOAT,width:g,height:y}):this.createTexture2D({flipY:!0,data:[1],format:ad.LUMINANCE,type:ad.FLOAT,width:1,height:1})}return{u_blur:h,u_additive:"additive"===f?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Object(Ei["isNumber"])(n)?n:1,u_stroke_opacity:Object(Ei["isNumber"])(i)?i:1,u_stroke_width:Object(Ei["isNumber"])(a)?a:1,u_stroke_color:this.getStrokeColor(u),u_offsets:this.isOffsetStatic(l)?l:[0,0]}}},{key:"getAnimateUniforms",value:function(){var e=this.layer.getLayerConfig(),t=e.animateOption,n=void 0===t?{enable:!1}:t;return{u_animate:this.animateOption2Array(n),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.buildModels());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.layer.triangulation=lw,e.next=3,this.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:XE,fragmentShader:YE,triangulation:lw,depth:{enable:!0},blend:this.getBlend()});case 3:return t=e.sent,e.abrupt("return",[t]);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e;null===(e=this.dataTexture)||void 0===e||e.destroy()}},{key:"animateOption2Array",value:function(e){return[e.enable?0:1,e.speed||1,e.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var e=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Ry.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:3,update:function(e,t,n,r){var i=Object(Oi["a"])(n,3),o=i[0],s=i[1],c=i[2],l=u.fromValues(0,0,1),f=u.fromValues(o,0,c),p=o>=0?u.angle(l,f):2*Math.PI-u.angle(l,f),h=2*Math.PI-Math.asin(s/100),d=a.create();a.rotateY(d,d,p),a.rotateX(d,d,h);var v=u.fromValues(1,1,0);u.transformMat4(v,v,d),u.normalize(v,v);var m=u.fromValues(-1,1,0);u.transformMat4(m,m,d),u.normalize(m,m);var g=u.fromValues(-1,-1,0);u.transformMat4(g,g,d),u.normalize(g,g);var y=u.fromValues(1,-1,0);u.transformMat4(y,y,d),u.normalize(y,y);var b=[].concat(Object(D["a"])(v),Object(D["a"])(m),Object(D["a"])(g),Object(D["a"])(y)),_=r%4*3;return[b[_],b[_+1],b[_+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ry.Attribute,descriptor:{name:"a_Size",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e){var t=e.size,n=void 0===t?5:t;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:Ry.Attribute,descriptor:{name:"a_Shape",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(t){var n=t.shape,r=void 0===n?2:n,i=e.layer.getLayerConfig().shape2d,o=i.indexOf(r);return[o]}}})}}]),n}(Lx);function $E(e){var t=QE();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function QE(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var JE='varying vec4 v_color;\nuniform float u_opacity: 1.0;\n\nuniform float u_pickLight: 0.0;\n\n#pragma include "picking"\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\nuniform float u_opacitylinear: 0.0;\nuniform float u_opacitylinear_dir: 1.0;\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float lightWeight = styleMappingMat[1][3];\n  float barLinearZ = styleMappingMat[2][3];\n\n  // \u8bbe\u7f6e\u5706\u67f1\u7684\u5e95\u8272\n  if(u_linearColor == 1.0) { // \u4f7f\u7528\u6e10\u53d8\u989c\u8272\n    gl_FragColor = mix(u_sourceColor, u_targetColor, barLinearZ);\n    gl_FragColor.rgb *= lightWeight;\n  } else { // \u4f7f\u7528 color \u65b9\u6cd5\u4f20\u5165\u7684\u989c\u8272\n     gl_FragColor = v_color;\n  }\n\n  // \u5e94\u7528\u900f\u660e\u5ea6\n  gl_FragColor.a *= opacity;\n\n  // \u5f00\u542f\u900f\u660e\u5ea6\u6e10\u53d8\n  if(u_opacitylinear > 0.0) {\n    gl_FragColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - barLinearZ): barLinearZ;\n  }\n\n  // picking\n  if(u_pickLight > 0.0) {\n    gl_FragColor = filterColorAlpha(gl_FragColor, lightWeight);\n  } else {\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n}\n',eS='precision highp float;\n\n#define pi 3.1415926535\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec3 a_Position;\nattribute vec3 a_Pos;\nattribute vec4 a_Color;\nattribute vec3 a_Size;\nattribute vec3 a_Normal;\n\nuniform float u_heightfixed: 0.0; // \u9ed8\u8ba4\u4e0d\u56fa\u5b9a\nuniform float u_r;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nvarying vec4 v_color;\n\nuniform float u_opacity : 1;\nuniform float u_lightEnable: 1;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nfloat getYRadian(float x, float z) {\n  if(x > 0.0 && z > 0.0) {\n    return atan(x/z);\n  } else if(x > 0.0 && z <= 0.0){\n    return atan(-z/x) + pi/2.0;\n  } else if(x <= 0.0 && z <= 0.0) {\n    return  pi + atan(x/z); //atan(x/z) + \n  } else {\n    return atan(z/-x) + pi*3.0/2.0;\n  }\n}\n\nfloat getXRadian(float y, float r) {\n  return atan(y/r);\n}\n\nvoid main() {\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA - lightWeight\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1] - linearZ(\u5782\u76f4\u65b9\u5411 0 - 1 \u7684\u503c)\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  vec3 size = a_Size * a_Position;\n\n  // a_Position.z \u662f\u5728\u6784\u5efa\u7f51\u683c\u7684\u65f6\u5019\u4f20\u5165\u7684\u6807\u51c6\u503c 0 - 1\uff0c\u5728\u63d2\u503c\u5668\u63d2\u503c\u53ef\u4ee5\u83b7\u53d6 0\uff5e1 \u7ebf\u6027\u6e10\u53d8\u7684\u503c\n  styleMappingMat[2][3] =  a_Position.z;\n\n  vec3 offset = size; // \u63a7\u5236\u5706\u67f1\u4f53\u7684\u5927\u5c0f - \u4ece\u6807\u51c6\u5355\u4f4d\u5706\u67f1\u4f53\u8fdb\u884c\u504f\u79fb\n  if(u_heightfixed < 1.0) { // \u5706\u67f1\u4f53\u4e0d\u56fa\u5b9a\u9ad8\u5ea6\n    \n    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n      // P20 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf1\n      offset = offset * pow(2.0, (19.0 - u_Zoom));\n    }\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n      // P20_2 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf3\n      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));\n    }\n  } else {// \u5706\u67f1\u4f53\u56fa\u5b9a\u9ad8\u5ea6 \uff08 \u5904\u7406 mapbox \uff09\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);\n    }\n  }\n\n\n  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));\n\n  // u_r \u63a7\u5236\u5706\u67f1\u7684\u751f\u957f\n  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);\n\n  // \u5706\u67f1\u5149\u7167\u6548\u679c\n  float lightWeight = 1.0;\n  if(u_lightEnable > 0.0) { // \u53d6\u6d88\u4e09\u5143\u8868\u8fbe\u5f0f\uff0c\u589e\u5f3a\u5065\u58ee\u6027\n    lightWeight = calc_lighting(pos);\n  }\n  styleMappingMat[1][3] = lightWeight;\n\n  v_color =vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  // gl_Position = project_common_position_to_clipspace(pos);\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * pos;\n  } else {\n    gl_Position = project_common_position_to_clipspace(pos);\n  }\n\n  setPickingColor(a_PickingColor);\n}\n',tS=function(e){Object(et["a"])(n,e);var t=$E(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"raiseCount",0),Object(Ge["a"])(Object(gt["a"])(e),"raiseRepeat",0),e}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.animateOption,n=void 0===t?{enable:!1,speed:.01,repeat:!1}:t,r=e.opacity,i=void 0===r?1:r,o=e.sourceColor,a=e.targetColor,s=e.pickLight,u=void 0!==s&&s,c=e.heightfixed,l=void 0!==c&&c,f=e.opacityLinear,p=void 0===f?{enable:!1,dir:"up"}:f,h=e.lightEnable,d=void 0===h||h;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:i})){this.judgeStyleAttributes({opacity:i});var v=this.layer.getEncodedData(),m=this.calDataFrame(this.cellLength,v,this.cellProperties),g=m.data,y=m.width,b=m.height;this.rowCount=b,this.dataTexture=this.cellLength>0&&g.length>0?this.createTexture2D({flipY:!0,data:g,format:ad.LUMINANCE,type:ad.FLOAT,width:y,height:b}):this.createTexture2D({flipY:!0,data:[1],format:ad.LUMINANCE,type:ad.FLOAT,width:1,height:1})}var _=0,x=[0,0,0,0],w=[0,0,0,0];if(o&&a&&(x=fi(o),w=fi(a),_=1),this.raiseCount<1&&this.raiseRepeat>0&&n.enable){var O=n.speed,E=void 0===O?.01:O;this.raiseCount+=E,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}return{u_pickLight:Number(u),u_heightfixed:Number(l),u_r:n.enable&&this.raiseRepeat>0?this.raiseCount:1,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Object(Ei["isNumber"])(i)?i:1,u_linearColor:_,u_sourceColor:x,u_targetColor:w,u_opacitylinear:Number(p.enable),u_opacitylinear_dir:"up"===p.dir?1:0,u_lightEnable:Number(d)}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.buildModels());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o,a;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.layer.getLayerConfig(),n=t.depth,r=void 0===n||n,i=t.animateOption.repeat,o=void 0===i?1:i,this.raiseRepeat=o,e.next=4,this.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:eS,fragmentShader:JE,triangulation:fw,cull:{enable:!0,face:wi(this.mapService.version)},depth:{enable:r}});case 4:return a=e.sent,e.abrupt("return",[a]);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e;null===(e=this.dataTexture)||void 0===e||e.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Ry.Attribute,descriptor:{name:"a_Size",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:3,update:function(e){var t=e.size;if(t){var n=[];return Array.isArray(t)&&(n=2===t.length?[t[0],t[0],t[1]]:t),Array.isArray(t)||(n=[t,t,t]),n}return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ry.Attribute,descriptor:{name:"a_Normal",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:3,update:function(e,t,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:Ry.Attribute,descriptor:{name:"a_Pos",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:3,update:function(e){var t=Oo(e.coordinates);return[t[0],t[1],0]}}})}}]),n}(Lx);function nS(e){var t=rS();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function rS(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var iS="\nuniform float u_additive;\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\n#pragma include \"sdf_2d\"\n#pragma include \"picking\"\n\nvoid main() {\n\n  vec4 textrueStroke = vec4(\n    styleMappingMat[1][0],\n    styleMappingMat[1][1],\n    styleMappingMat[1][2],\n    styleMappingMat[1][3]\n  );\n\n  float opacity = styleMappingMat[0][0];\n\n  lowp float antialiasblur = v_data.z;\n  float r = v_radius / (v_radius);\n\n  float outer_df;\n  float inner_df;\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\n  \n  outer_df = sdCircle(v_data.xy, 1.0);\n  inner_df = sdCircle(v_data.xy, r);\n\n\n  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);\n\n  float color_t = smoothstep(\n    antialiasblur,\n    0.0,\n    inner_df\n  );\n  float PI = 3.14159;\n  float N_RINGS = 3.0;\n  float FREQ = 1.0;\n\n gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);\n\n  float d = length(v_data.xy);\n  if(d > 0.5) {\n    discard;\n  }\n  float intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);\n  \n  // \u6839\u636e\u53e0\u52a0\u6a21\u5f0f\u9009\u62e9\u6548\u679c\n  if(u_additive > 0.0) {\n    gl_FragColor *= intensity;\n    // \u4f18\u5316\u6c34\u6ce2\u70b9 blend additive \u6a21\u5f0f\u4e0b\u6709\u7684\u62fe\u53d6\u6548\u679c \n    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);\n  } else {\n    gl_FragColor = vec4(gl_FragColor.xyz, gl_FragColor.a * intensity);\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n}\n",oS="uniform float u_additive;\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\n\n#pragma include \"sdf_2d\"\n#pragma include \"picking\"\n\n\nvoid main() {\n  int shape = int(floor(v_data.w + 0.5));\n\n  vec4 textrueStroke = vec4(\n    styleMappingMat[1][0],\n    styleMappingMat[1][1],\n    styleMappingMat[1][2],\n    styleMappingMat[1][3]\n  );\n\n  float opacity = styleMappingMat[0][0];\n  float stroke_opacity = styleMappingMat[0][1];\n  float strokeWidth = styleMappingMat[0][2];\n  vec4 strokeColor = textrueStroke == vec4(0) ? v_color : textrueStroke;\n\n  lowp float antialiasblur = v_data.z;\n  float r = v_radius / (v_radius + strokeWidth);\n\n  float outer_df;\n  float inner_df;\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\n  if (shape == 0) {\n    outer_df = sdCircle(v_data.xy, 1.0);\n    inner_df = sdCircle(v_data.xy, r);\n  } else if (shape == 1) {\n    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);\n    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);\n  } else if (shape == 2) {\n    outer_df = sdBox(v_data.xy, vec2(1.));\n    inner_df = sdBox(v_data.xy, vec2(r));\n  } else if (shape == 3) {\n    outer_df = sdPentagon(v_data.xy, 0.8);\n    inner_df = sdPentagon(v_data.xy, r * 0.8);\n  } else if (shape == 4) {\n    outer_df = sdHexagon(v_data.xy, 0.8);\n    inner_df = sdHexagon(v_data.xy, r * 0.8);\n  } else if (shape == 5) {\n    outer_df = sdOctogon(v_data.xy, 1.0);\n    inner_df = sdOctogon(v_data.xy, r);\n  } else if (shape == 6) {\n    outer_df = sdHexagram(v_data.xy, 0.52);\n    inner_df = sdHexagram(v_data.xy, r * 0.52);\n  } else if (shape == 7) {\n    outer_df = sdRhombus(v_data.xy, vec2(1.0));\n    inner_df = sdRhombus(v_data.xy, vec2(r));\n  } else if (shape == 8) {\n    outer_df = sdVesica(v_data.xy, 1.1, 0.8);\n    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);\n  }\n\n  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);\n\n  float color_t = strokeWidth < 0.01 ? 0.0 : smoothstep(\n    antialiasblur,\n    0.0,\n    inner_df\n  );\n\n  if(strokeWidth < 0.01) {\n    gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);\n  } else {\n    gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), strokeColor * stroke_opacity, color_t);\n  }\n\n  if(u_additive > 0.0) {\n    gl_FragColor *= opacity_t;\n    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);\n  } else {\n    gl_FragColor.a *= opacity_t;\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n   // \u4f5c\u4e3a mask \u6a21\u677f\u65f6\u9700\u8981\u4e22\u5f03\u900f\u660e\u7684\u50cf\u7d20\n  if(gl_FragColor.a < 0.01) {\n    discard;\n  } \n}\n",aS='attribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Extrude;\nattribute float a_Size;\nattribute float a_Shape;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform int u_Size_Unit;\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\n\nuniform float u_opacity : 1;\nuniform float u_stroke_opacity : 1;\nuniform float u_stroke_width : 2;\nuniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];\nuniform vec2 u_offsets;\n\nuniform float u_blur : 0.0;\nuniform float u_raisingHeight: 0.0;\nuniform float u_heightfixed: 0.0;\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n#pragma include "styleMappingCalStrokeOpacity"\n#pragma include "styleMappingCalStrokeWidth"\n\n#pragma include "projection"\n#pragma include "picking"\n\n\nvoid main() {\n  vec3 extrude = a_Extrude;\n  float shape_type = a_Shape;\n  /*\n  *  setPickingSize \u8bbe\u7f6e\u62fe\u53d6\u5927\u5c0f\n  *  u_meter2coord \u5728\u7b49\u9762\u79ef\u5927\u5c0f\u7684\u65f6\u5019\u8bbe\u7f6e\u5355\u4f4d\n  */\n  float newSize = setPickingSize(a_Size);\n  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n\n  vec2 strokeOpacityAndOffset = calStrokeOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][1] = strokeOpacityAndOffset.r;\n  textureOffset = strokeOpacityAndOffset.g;\n\n  vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][2] = strokeWidthAndOffset.r;\n  textureOffset = strokeWidthAndOffset.g;\n\n  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);\n  if(hasStroke()) {\n    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R\n    textureOffset += 1.0;\n\n    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G\n    textureOffset += 1.0;\n\n    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B\n    textureOffset += 1.0;\n\n    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A\n    textureOffset += 1.0;\n  } else {\n    if(u_stroke_color == vec4(0.0)) {\n      styleMappingMat[1][0] = v_color.r;\n      styleMappingMat[1][1] = v_color.g;\n      styleMappingMat[1][2] = v_color.b;\n      styleMappingMat[1][3] = v_color.a;\n    } else {\n      styleMappingMat[1][0] = u_stroke_color.r;\n      styleMappingMat[1][1] = u_stroke_color.g;\n      styleMappingMat[1][2] = u_stroke_color.b;\n      styleMappingMat[1][3] = u_stroke_color.a;\n    }\n  }\n\n  vec2 textrueOffsets = vec2(0.0, 0.0);\n  if(hasOffsets()) {\n    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n\n    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n  } else {\n    textrueOffsets = u_offsets;\n  }\n\n  // cal style mapping\n\n  // unpack color(vec2)\n  v_color = a_Color;\nif(u_Size_Unit == 1) {\n    newSize = newSize  * u_PixelsPerMeter.z;\n  }\n\n   v_radius = newSize;\n\n  // anti-alias\n  //  float antialiased_blur = -max(u_blur, antialiasblur);\n  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);\n\n  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + textrueOffsets);\n  vec3 aPosition = a_Position;\n\n  offset = project_pixel(offset);\n  \n  // TODP: /abs(extrude.x) \u662f\u4e3a\u4e86\u517c\u5bb9\u5730\u7403\u6a21\u5f0f\n  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);\n\n\n  // vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));\n  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));\n\n  float raisingHeight = u_raisingHeight;\n\n  if(u_heightfixed < 1.0) { // false\n    raisingHeight = project_pixel(u_raisingHeight);\n  } else {\n     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      raisingHeight = u_raisingHeight * mapboxZoomScale;\n    }\n  }\n \n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position =  u_Mvp * vec4(project_pos.xy + offset, raisingHeight, 1.0);\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));\n  }\n \n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));\n\n  setPickingColor(a_PickingColor);\n}\n',sS=function(e){Object(et["a"])(n,e);var t=nS(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t,r=e.strokeOpacity,i=void 0===r?1:r,o=e.strokeWidth,a=void 0===o?0:o,s=e.stroke,u=void 0===s?"rgba(0,0,0,0)":s,c=e.offsets,l=void 0===c?[0,0]:c,f=e.blend,p=e.blur,h=void 0===p?0:p,d=e.raisingHeight,v=void 0===d?0:d,m=e.heightfixed,g=void 0!==m&&m,y=e.unit,b=void 0===y?"pixel":y;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n,strokeOpacity:i,strokeWidth:a,stroke:u,offsets:l})){this.judgeStyleAttributes({opacity:n,strokeOpacity:i,strokeWidth:a,stroke:u,offsets:l});var _=this.layer.getEncodedData(),x=this.calDataFrame(this.cellLength,_,this.cellProperties),w=x.data,O=x.width,E=x.height;this.rowCount=E,this.dataTexture=this.cellLength>0&&w.length>0?this.createTexture2D({flipY:!0,data:w,format:ad.LUMINANCE,type:ad.FLOAT,width:O,height:E}):this.createTexture2D({flipY:!0,data:[1],format:ad.LUMINANCE,type:ad.FLOAT,width:1,height:1})}return{u_raisingHeight:Number(v),u_heightfixed:Number(g),u_blur:h,u_additive:"additive"===f?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Object(Ei["isNumber"])(n)?n:1,u_stroke_opacity:Object(Ei["isNumber"])(i)?i:1,u_stroke_width:Object(Ei["isNumber"])(a)?a:1,u_stroke_color:this.getStrokeColor(u),u_Size_Unit:lE[b],u_offsets:this.isOffsetStatic(l)?l:[0,0]}}},{key:"getAnimateUniforms",value:function(){var e=this.layer.getLayerConfig(),t=e.animateOption,n=void 0===t?{enable:!1}:t;return{u_animate:this.animateOption2Array(n),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),_f)}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.buildModels());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o,a,s,u,c,l,f,p;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.layer.getLayerConfig(),n=t.animateOption,r=void 0===n?{enable:!1}:n,i=t.workerEnabled,o=void 0!==i&&i,a=t.enablePicking,s=t.shape2d,u=this.getShaders(r),c=u.frag,l=u.vert,f=u.type,this.layer.triangulation=_f,e.next=5,this.layer.buildLayerModel({moduleName:f,vertexShader:l,fragmentShader:c,triangulation:_f,depth:{enable:!1},workerEnabled:o,workerOptions:{modelType:f,enablePicking:a,shape2d:s}});case 5:return p=e.sent,e.abrupt("return",[p]);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getShaders",value:function(e){if(!e.enable)return{frag:oS,vert:aS,type:"pointFill"};switch(e.type){case"wave":return{frag:iS,vert:aS,type:"pointWave"};default:return{frag:iS,vert:aS,type:"pointWave"}}}},{key:"clearModels",value:function(){var e;null===(e=this.dataTexture)||void 0===e||e.destroy()}},{key:"animateOption2Array",value:function(e){return[e.enable?0:1,e.speed||1,e.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var e=this.layer.getLayerConfig().shape2d;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Ry.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:3,update:function(e,t,n,r){var i=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],o=r%4*3;return[i[o],i[o+1],i[o+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ry.Attribute,descriptor:{name:"a_Size",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e){var t=e.size,n=void 0===t?5:t;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:Ry.Attribute,descriptor:{name:"a_Shape",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(t){var n=t.shape,r=void 0===n?2:n,i=e.indexOf(r);return[i]}}})}}]),n}(Lx);function uS(e){var t=cS();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function cS(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var lS='uniform sampler2D u_texture;\nuniform vec2 u_textSize;\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\n#pragma include "sdf_2d"\n#pragma include "picking"\nvarying vec2 v_uv; // \u672c\u8eab\u7684 uv \u5750\u6807\nvarying vec2 v_Iconuv;\n\nvoid main() {\n\n  float opacity = styleMappingMat[0][0];\n\n  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;\n  gl_FragColor = texture2D(u_texture, pos);\n  gl_FragColor.a *= opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',fS='attribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Extrude;\nattribute float a_Size;\nattribute vec2 a_Uv;\nattribute float a_Rotate;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform mat2 u_RotateMatrix;\nuniform int u_Size_Unit;\n\nvarying vec2 v_uv; // \u672c\u8eab\u7684 uv \u5750\u6807\nvarying vec2 v_Iconuv; // icon \u8d34\u56fe\u7684 uv \u5750\u6807\n\nuniform float u_raisingHeight: 0.0;\nuniform float u_heightfixed: 0.0;\nuniform float u_opacity : 1;\nuniform vec2 u_offsets;\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  vec3 extrude = a_Extrude;\n\n  v_uv = (a_Extrude.xy + 1.0)/2.0;\n  v_uv.y = 1.0 - v_uv.y;\n  v_Iconuv = a_Uv;\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - empty - empty - empty\n    0.0, 0.0, 0.0, 0.0, // empty - empty - empty - empty\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n\n  vec2 textrueOffsets = vec2(0.0, 0.0);\n  if(hasOffsets()) {\n    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n\n    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n  } else {\n    textrueOffsets = u_offsets;\n  }\n\n  // cal style mapping\n\n  highp float angle_sin = sin(a_Rotate);\n  highp float angle_cos = cos(a_Rotate);\n  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n  float newSize = a_Size;\n  if(u_Size_Unit == 1) {\n    newSize = newSize  * u_PixelsPerMeter.z;\n  }\n\n  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);\n  vec2 offset = (rotation_matrix * u_RotateMatrix * extrude.xy * (newSize) + textrueOffsets);\n  vec3 aPosition = a_Position;\n\n  offset = project_pixel(offset);\n\n  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));\n  float raisingHeight = u_raisingHeight;\n  if(u_heightfixed < 1.0) { // height fixed\n    raisingHeight = project_pixel(u_raisingHeight);\n  } else {\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      raisingHeight = u_raisingHeight * mapboxZoomScale;\n    }\n  }\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp *vec4(project_pos.xy + offset, raisingHeight, 1.0);\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));\n  }\n \n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));\n\n  setPickingColor(a_PickingColor);\n}\n',pS=function(e){Object(et["a"])(n,e);var t=uS(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"meter2coord",1),Object(Ge["a"])(Object(gt["a"])(e),"isMeter",!1),Object(Ge["a"])(Object(gt["a"])(e),"radian",0),Object(Ge["a"])(Object(gt["a"])(e),"updateTexture",(function(){var t=e.rendererService.createTexture2D;if(e.texture)return e.texture.update({data:e.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),void e.layerService.throttleRenderLayers();e.texture=t({data:e.iconService.getCanvas(),mag:ad.LINEAR,min:ad.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:e.iconService.canvasHeight||128,mipmap:!0})})),e}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t,r=e.offsets,i=void 0===r?[0,0]:r,o=e.rotation,a=e.raisingHeight,s=void 0===a?0:a,u=e.heightfixed,c=void 0!==u&&u,l=e.unit,f=void 0===l?"pixel":l;this.rendererService.getDirty()&&this.texture.bind();var p=1;if("GAODE2.x"!==this.mapService.version&&"GAODE1.x"!==this.mapService.version||(p=-1),this.radian=void 0!==o?p*Math.PI*o/180:p*Math.PI*(this.mapService.getRotation()%360)/180,this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n,offsets:i})){this.judgeStyleAttributes({opacity:n,offsets:i});var h=this.layer.getEncodedData(),d=this.calDataFrame(this.cellLength,h,this.cellProperties),v=d.data,m=d.width,g=d.height;this.rowCount=g,this.dataTexture=this.cellLength>0&&v.length>0?this.createTexture2D({flipY:!0,data:v,format:ad.LUMINANCE,type:ad.FLOAT,width:m,height:g}):this.createTexture2D({flipY:!0,data:[1],format:ad.LUMINANCE,type:ad.FLOAT,width:1,height:1})}return{u_raisingHeight:Number(s),u_heightfixed:Number(c),u_Size_Unit:lE[f],u_RotateMatrix:new Float32Array([Math.cos(this.radian),Math.sin(this.radian),-Math.sin(this.radian),Math.cos(this.radian)]),u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_opacity:Object(Ei["isNumber"])(n)?n:1,u_offsets:this.isOffsetStatic(i)?i:[0,0]}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),cw)}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),e.abrupt("return",this.buildModels());case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:fS,fragmentShader:lS,triangulation:cw,depth:{enable:!1},cull:{enable:!0,face:wi(this.mapService.version)}});case 2:return t=e.sent,e.abrupt("return",[t]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e,t;this.iconService.off("imageUpdate",this.updateTexture),null===(e=this.texture)||void 0===e||e.destroy(),null===(t=this.dataTexture)||void 0===t||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){var e=this;this.styleAttributeService.registerStyleAttribute({name:"rotate",type:Ry.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e){var t=e.rotate,n=void 0===t?0:t;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ry.Attribute,descriptor:{name:"a_Uv",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(t){var n=e.iconService.getIconMap(),r=t.shape,i=n[r]||{x:-64,y:-64},o=i.x,a=i.y;return[o,a]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Ry.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:3,update:function(e,t,n,r){var i=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],o=r%4*3;return[i[o],i[o+1],i[o+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ry.Attribute,descriptor:{name:"a_Size",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e){var t=e.size,n=void 0===t?5:t;return Array.isArray(n)?[n[0]]:[n]}}})}}]),n}(Lx);function hS(e){var t=dS();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function dS(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var vS='\nuniform sampler2D u_texture;\nvarying vec4 v_color;\nvarying vec2 v_uv;\nuniform vec2 u_textSize;\nuniform float u_opacity : 1;\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\n#pragma include "picking"\n\nvoid main(){\n      float opacity = styleMappingMat[0][0];\n      float size = styleMappingMat[1][0];\n      vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;\n      vec4 textureColor;\n\n      // Y = 0.299R + 0.587G + 0.114B // \u4eae\u5ea6\u63d0\u53d6\n     \n      textureColor = texture2D(u_texture, pos);\n\n      // Tip: \u53bb\u9664\u8fb9\u7f18\u90e8\u5206 mipmap \u5bfc\u81f4\u7684\u6df7\u5408\u53d8\u6697\n      float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);\n      if(fragmengTocenter >= 0.5) {\n            float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;\n            textureColor.a *= luma;\n      }\n      \n      \n\n      if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){\n            gl_FragColor= textureColor;\n      }else {\n            gl_FragColor= step(0.01, textureColor.z) * v_color;\n      }\n\n      gl_FragColor.a = gl_FragColor.a * opacity;\n      \n      if (gl_FragColor.a < 0.01) {\n         discard;\n      }\n      gl_FragColor = filterColor(gl_FragColor);\n}\n',mS='precision highp float;\nattribute vec3 a_Position;\nattribute vec4 a_Color;\nattribute vec2 a_Uv;\nattribute float a_Size;\nvarying vec4 v_color;\nvarying vec2 v_uv;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform vec2 u_offsets;\n\nuniform float u_opacity : 1;\nuniform float u_raisingHeight: 0.0;\nuniform float u_heightfixed: 0.0;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n\n  styleMappingMat[1][0] = a_Size;\n\n  vec2 textrueOffsets = vec2(0.0, 0.0);\n  if(hasOffsets()) {\n    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n\n    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n  } else {\n    textrueOffsets = u_offsets;\n  }\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  v_color = a_Color;\n  v_uv = a_Uv;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n   \n  vec2 offset = project_pixel(textrueOffsets);\n\n  float raisingHeight = u_raisingHeight;\n  if(u_heightfixed < 1.0) { // false\n    raisingHeight = project_pixel(u_raisingHeight);\n  } else {\n     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      raisingHeight = u_raisingHeight * mapboxZoomScale;\n    }\n  }\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * vec4(project_pos.xy + offset, raisingHeight, 1.0);\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));\n  }\n\n  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;\n  setPickingColor(a_PickingColor);\n}\n',gS=function(e){Object(et["a"])(n,e);var t=hS(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"updateTexture",(function(){var t=e.rendererService.createTexture2D;if(e.texture)return e.texture.update({data:e.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),void setTimeout((function(){e.layerService.throttleRenderLayers()}));e.texture=t({data:e.iconService.getCanvas(),mag:ad.LINEAR,min:ad.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:e.iconService.canvasHeight||128,mipmap:!0})})),e}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t,r=e.offsets,i=void 0===r?[0,0]:r,o=e.raisingHeight,a=void 0===o?0:o,s=e.heightfixed,u=void 0!==s&&s;if(this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n,offsets:i})){this.judgeStyleAttributes({opacity:n,offsets:i});var c=this.layer.getEncodedData(),l=this.calDataFrame(this.cellLength,c,this.cellProperties),f=l.data,p=l.width,h=l.height;this.rowCount=h,this.dataTexture=this.cellLength>0&&f.length>0?this.createTexture2D({flipY:!0,data:f,format:ad.LUMINANCE,type:ad.FLOAT,width:p,height:h}):this.createTexture2D({flipY:!0,data:[1],format:ad.LUMINANCE,type:ad.FLOAT,width:1,height:1})}return{u_raisingHeight:Number(a),u_heightfixed:Number(u),u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_opacity:Object(Ei["isNumber"])(n)?n:1,u_offsets:this.isOffsetStatic(i)?i:[0,0]}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),e.abrupt("return",this.buildModels());case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e,t;null===(e=this.texture)||void 0===e||e.destroy(),null===(t=this.dataTexture)||void 0===t||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.layer.buildLayerModel({moduleName:"pointImage",vertexShader:mS,fragmentShader:vS,triangulation:pw,depth:{enable:!1},primitive:ad.POINTS});case 2:return t=e.sent,e.abrupt("return",[t]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){var e=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Ry.Attribute,descriptor:{name:"a_Size",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e){var t=e.size,n=void 0===t?5:t;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ry.Attribute,descriptor:{name:"a_Uv",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(t){var n=e.iconService.getIconMap(),r=t.shape,i=n[r]||{x:-64,y:-64},o=i.x,a=i.y;return[o,a]}}})}}]),n}(Lx);function yS(e){var t=bS();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function bS(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var _S="uniform float u_opacity : 1;\nvarying vec4 v_color;\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a *= u_opacity;\n}\n",xS='\nattribute vec3 a_Position;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nattribute float a_Size;\nattribute vec4 a_Color;\n\nvarying vec4 v_color;\n\n#pragma include "projection"\n#pragma include "project"\n\nvoid main() {\n  v_color = a_Color;\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * vec4(a_Position.xy, a_Position.z, 1.0);\n  } else {\n    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);\n    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy),project_pos.z,project_pos.w));\n  }\n\n  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;\n}\n';function wS(e){var t=e.coordinates;return{vertices:Object(D["a"])(t),indices:[0],size:t.length}}var OS=function(e){Object(et["a"])(n,e);var t=yS(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t;return{u_opacity:Object(Ei["isNumber"])(n)?n:1}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.buildModels());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.layer.triangulation=wS,e.next=3,this.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:xS,fragmentShader:_S,triangulation:wS,depth:{enable:!1},primitive:ad.POINTS,pick:!1});case 3:return t=e.sent,e.abrupt("return",[t]);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Ry.Attribute,descriptor:{name:"a_Size",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e){var t=e.size,n=void 0===t?1:t;return Array.isArray(n)?[n[0]]:[n]}}})}}]),n}(Lx);function ES(e){var t=SS();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function SS(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var jS='\nuniform float u_additive;\nuniform float u_opacity: 1.0;\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\nvarying vec2 v_exteude;\n#pragma include "sdf_2d"\n#pragma include "picking"\n\nvoid main() {\n\n  lowp float antialiasblur = v_data.z;\n  float r = v_radius / (v_radius);\n\n  float outer_df = sdCircle(v_data.xy, 1.0);\n  float inner_df = sdCircle(v_data.xy, r);\n\n  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);\n\n  gl_FragColor = vec4(v_color.rgb, v_color.a * u_opacity);\n\n  if(u_additive > 0.0) {\n    gl_FragColor *= opacity_t;\n  } else {\n    gl_FragColor.a *= opacity_t;\n  }\n\n  if(gl_FragColor.a > 0.0) {\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n\n  vec2 extrude =  v_exteude;\n  vec2 dir = normalize(extrude);\n  vec2 baseDir = vec2(1.0, 0.0);\n  float pi = 3.14159265359;\n  // full circle\n  // float rades = dot(dir, baseDir);\n  // float flag = sign(dir.y);\n  // float radar_v = (flag - 1.0) * -0.5 + flag * acos(rades)/pi/2.0;\n  \n  // half circle\n  float flag = sign(dir.y);\n  float rades = dot(dir, baseDir);\n  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;\n  // simple AA\n  if(radar_v > 0.99) {\n    radar_v = 1.0 - (radar_v - 0.99)/0.01;\n  }\n\n  gl_FragColor.a *= radar_v;\n}\n',AS='attribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Extrude;\nattribute float a_Size;\nuniform float u_speed: 1.0;\nuniform float u_time;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform int u_Size_Unit;\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\nvarying vec2 v_exteude;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  vec3 extrude = a_Extrude;\n  float newSize = setPickingSize(a_Size);\n\n  float time = u_time * u_speed;\n  mat2 rotateMatrix = mat2( \n    cos(time), sin(time), \n    -sin(time), cos(time)\n  );\n  v_exteude = rotateMatrix * a_Extrude.xy;\n\n  // unpack color(vec2)\n  v_color = a_Color;\n\n\n\n  // anti-alias\n  float blur = 0.0;\n  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);\n\n  if(u_Size_Unit == 1) {\n    newSize = newSize  * u_PixelsPerMeter.z;\n  }\n  // radius(16-bit)\n  v_radius = newSize;\n\n  vec2 offset = (extrude.xy * (newSize));\n  vec3 aPosition = a_Position;\n  \n    // \u4e0d\u4ee5\u7c73\u4e3a\u5b9e\u9645\u5355\u4f4d\n  offset = project_pixel(offset);\n  \n  v_data = vec4(extrude.x, extrude.y, antialiasblur, -1.0);\n\n  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp *vec4(project_pos.xy + offset, 0.0, 1.0);\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));\n  }\n\n  setPickingColor(a_PickingColor);\n}\n',kS=function(e){Object(et["a"])(n,e);var t=ES(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t,r=e.blend,i=e.speed,o=void 0===i?1:i,a=e.unit,s=void 0===a?"pixel":a;return{u_Size_Unit:lE[s],u_speed:o,u_additive:"additive"===r?1:0,u_opacity:Object(Ei["isNumber"])(n)?n:1}}},{key:"getAnimateUniforms",value:function(){var e=this.layer.getLayerConfig(),t=e.animateOption,n=void 0===t?{enable:!1}:t;return{u_animate:this.animateOption2Array(n),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),cw)}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.buildModels());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:AS,fragmentShader:jS,triangulation:cw,depth:{enable:!1}});case 2:return t=e.sent,e.abrupt("return",[t]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e;null===(e=this.dataTexture)||void 0===e||e.destroy()}},{key:"animateOption2Array",value:function(e){return[e.enable?0:1,e.speed||1,e.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Ry.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:3,update:function(e,t,n,r){var i=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],o=r%4*3;return[i[o],i[o+1],i[o+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ry.Attribute,descriptor:{name:"a_Size",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e){var t=e.size,n=void 0===t?5:t;return Array.isArray(n)?[n[0]]:[n]}}})}}]),n}(Lx);function CS(e){var t=TS();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function TS(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var MS='\nuniform float u_opacity : 1;\nuniform vec2 u_offsets;\nuniform float u_additive;\n\nuniform float u_stroke_opacity : 1;\n\nuniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];\n\nvarying vec4 v_color;\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\nvarying float v_blur;\nvarying float v_innerRadius;\n\n#pragma include "picking"\nvoid main() {\n  vec2 center = vec2(0.5);\n\n  float opacity = styleMappingMat[0][0];\n  // Tip: \u7247\u5143\u5230\u4e2d\u5fc3\u70b9\u7684\u8ddd\u79bb 0 - 1\n  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;\n  // Tip: \u7247\u5143\u7684\u526a\u5207\u6210\u5706\u5f62\n  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);\n\n\n  if(v_innerRadius < 0.99) {\n    // \u5f53\u5b58\u5728 stroke \u4e14 stroke > 0.01\n    float blurWidth = (1.0 - v_blur)/2.0;\n    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);\n    if(fragmengTocenter > v_innerRadius + blurWidth) {\n      gl_FragColor = stroke;\n    } else if(fragmengTocenter > v_innerRadius - blurWidth){\n      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);\n      gl_FragColor = mix(v_color, stroke, mixR);\n    } else {\n      gl_FragColor = v_color;\n    }\n  } else {\n    // \u5f53\u4e0d\u5b58\u5728 stroke \u6216 stroke <= 0.01\n    gl_FragColor = v_color;\n  }\n\n  gl_FragColor.a *= opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n  \n  if(u_additive > 0.0) {\n    gl_FragColor *= circleClipOpacity;\n  } else {\n    gl_FragColor.a *= circleClipOpacity;\n  }\n\n}\n',PS='\nattribute vec3 a_Position;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nattribute float a_Size;\nattribute vec4 a_Color;\nvarying vec4 v_color;\n\nuniform float u_opacity : 1;\nuniform vec2 u_offsets;\nuniform float u_stroke_width;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\nvarying float v_blur;\nvarying float v_innerRadius;\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "picking"\n#pragma include "project"\nvoid main() {\n  v_color = a_Color;\n  v_blur = 1.0 - max(2.0/a_Size, 0.05);\n  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\nstyleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n\n  vec2 textrueOffsets = vec2(0.0, 0.0);\n  if(hasOffsets()) {\n    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n\n    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n  } else {\n    textrueOffsets = u_offsets;\n  }\n\n  // cal style mapping\n  \n  vec2 offset = project_pixel(textrueOffsets);\n  \n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * vec4(a_Position.xy + offset, a_Position.z, 1.0);\n  } else { // else\n    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);\n    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));\n  }\n\n  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;\n  setPickingColor(a_PickingColor);\n}\n';function IS(e){var t=e.coordinates;return{vertices:Object(D["a"])(t),indices:[0],size:t.length}}var RS=function(e){Object(et["a"])(n,e);var t=CS(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t,r=e.offsets,i=void 0===r?[0,0]:r,o=e.blend,a=e.strokeOpacity,s=void 0===a?1:a,u=e.strokeWidth,c=void 0===u?0:u,l=e.stroke,f=void 0===l?"#fff":l;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n,offsets:i})){this.judgeStyleAttributes({opacity:n,offsets:i});var p=this.layer.getEncodedData(),h=this.calDataFrame(this.cellLength,p,this.cellProperties),d=h.data,v=h.width,m=h.height;this.rowCount=m,this.dataTexture=this.cellLength>0&&d.length>0?this.createTexture2D({flipY:!0,data:d,format:ad.LUMINANCE,type:ad.FLOAT,width:v,height:m}):this.createTexture2D({flipY:!0,data:[1],format:ad.LUMINANCE,type:ad.FLOAT,width:1,height:1})}return{u_additive:"additive"===o?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Object(Ei["isNumber"])(n)?n:1,u_offsets:this.isOffsetStatic(i)?i:[0,0],u_stroke_opacity:Object(Ei["isNumber"])(s)?s:1,u_stroke_width:Object(Ei["isNumber"])(c)?c:1,u_stroke_color:this.getStrokeColor(f)}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.buildModels());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.layer.triangulation=IS,e.next=3,this.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:PS,fragmentShader:MS,triangulation:IS,depth:{enable:!1},primitive:ad.POINTS});case 3:return t=e.sent,e.abrupt("return",[t]);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e;null===(e=this.dataTexture)||void 0===e||e.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Ry.Attribute,descriptor:{name:"a_Size",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e){var t=e.size,n=void 0===t?1:t;return Array.isArray(n)?[n[0]]:[n]}}})}}]),n}(Lx);function LS(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=DS(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function DS(e,t){if(e){if("string"===typeof e)return NS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?NS(e,t):void 0}}function NS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var FS=function(){function e(t,n,r){Object(Ve["a"])(this,e),Object(Ge["a"])(this,"boxCells",[]);var i=this.boxCells;this.xCellCount=Math.ceil(t/r),this.yCellCount=Math.ceil(n/r);for(var o=0;o<this.xCellCount*this.yCellCount;o++)i.push([]);this.boxKeys=[],this.bboxes=[],this.width=t,this.height=n,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/n,this.boxUid=0}return Object(He["a"])(e,[{key:"insert",value:function(e,t,n,r,i){this.forEachCell(t,n,r,i,this.insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}},{key:"query",value:function(e,t,n,r,i){return this.queryHitTest(e,t,n,r,!1,i)}},{key:"hitTest",value:function(e,t,n,r,i){return this.queryHitTest(e,t,n,r,!0,i)}},{key:"insertBoxCell",value:function(e,t,n,r,i,o){this.boxCells[i].push(o)}},{key:"queryHitTest",value:function(e,t,n,r,i,o){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];var a=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});return o?a.filter(o):a}var u={hitTest:i,seenUids:{box:{},circle:{}}};return this.forEachCell(e,t,n,r,this.queryCell,a,u,o),i?a.length>0:a}},{key:"queryCell",value:function(e,t,n,r,i,o,a,s){var u=a.seenUids,c=this.boxCells[i];if(null!==c){var l,f=this.bboxes,p=LS(c);try{for(p.s();!(l=p.n()).done;){var h=l.value;if(!u.box[h]){u.box[h]=!0;var d=4*h;if(e<=f[d+2]&&t<=f[d+3]&&n>=f[d+0]&&r>=f[d+1]&&(!s||s(this.boxKeys[h]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[h],x1:f[d],y1:f[d+1],x2:f[d+2],y2:f[d+3]})}}}}catch(v){p.e(v)}finally{p.f()}}return!1}},{key:"forEachCell",value:function(e,t,n,r,i,o,a,s){for(var u=this.convertToXCellCoord(e),c=this.convertToYCellCoord(t),l=this.convertToXCellCoord(n),f=this.convertToYCellCoord(r),p=u;p<=l;p++)for(var h=c;h<=f;h++){var d=this.xCellCount*h+p;if(i.call(this,e,t,n,r,d,o,a,s))return}}},{key:"convertToXCellCoord",value:function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}},{key:"convertToYCellCoord",value:function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}}]),e}(),zS=FS,BS=function(){function e(t,n){Object(Ve["a"])(this,e),Object(Ge["a"])(this,"viewportPadding",100),this.width=t,this.height=n,this.viewportPadding=Math.max(t,n),this.grid=new zS(t+this.viewportPadding,n+this.viewportPadding,25),this.screenRightBoundary=t+this.viewportPadding,this.screenBottomBoundary=n+this.viewportPadding,this.gridRightBoundary=t+2*this.viewportPadding,this.gridBottomBoundary=n+2*this.viewportPadding}return Object(He["a"])(e,[{key:"placeCollisionBox",value:function(e){var t=e.x1+e.anchorPointX+this.viewportPadding,n=e.y1+e.anchorPointY+this.viewportPadding,r=e.x2+e.anchorPointX+this.viewportPadding,i=e.y2+e.anchorPointY+this.viewportPadding;return!this.isInsideGrid(t,n,r,i)||this.grid.hitTest(t,n,r,i)?{box:[]}:{box:[t,n,r,i]}}},{key:"insertCollisionBox",value:function(e,t){var n={featureIndex:t};this.grid.insert(n,e[0],e[1],e[2],e[3])}},{key:"project",value:function(e,t,n){var r=c.fromValues(t,n,0,1),i=c.create(),o=a.fromValues.apply(a,Object(D["a"])(e));return c.transformMat4(i,r,o),{x:(i[0]/i[3]+1)/2*this.width+this.viewportPadding,y:(-i[1]/i[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(e,t,n,r){return n>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary}}]),e}();function US(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=VS(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function VS(e,t){if(e){if("string"===typeof e)return HS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?HS(e,t):void 0}}function HS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function GS(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0;break;default:t=.5}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0;break;default:n=.5}return{horizontalAlign:t,verticalAlign:n}}function WS(e,t,n,r,i){if(i){var o=e[r],a=o.glyph;if(a)for(var s=t[a].advance*o.scale,u=(e[r].x+s)*i,c=n;c<=r;c++)e[c].x-=u}}function qS(e,t,n,r,i,o,a){var s,u=(t-n)*i,c=(-r*a+.5)*o,l=US(e);try{for(l.s();!(s=l.n()).done;){var f=s.value;f.x+=u,f.y+=c}}catch(p){l.e(p)}finally{l.f()}}function ZS(e,t,n,r,i,o,a){var s=-8,u=0,c=s,l=0,f=e.positionedGlyphs,p="right"===o?1:"left"===o?0:.5,h=f.length;n.forEach((function(e){if(e.split("").forEach((function(e){var n=t[e],r=0;n&&(f.push({glyph:e,x:u,y:c+r,vertical:!1,scale:1,metrics:n}),u+=n.advance+a)})),f.length!==h){var n=u-a;l=Math.max(n,l),WS(f,t,h,f.length-1,p)}u=0,c-=r+5}));var d=GS(i),v=d.horizontalAlign,m=d.verticalAlign;qS(f,p,v,m,l,r,n.length);var g=c-s;e.top+=-m*g,e.bottom=e.top-g,e.left+=-v*l,e.right=e.left+l}function YS(e,t,n,r,i,o,a){var s=-8,u=0,c=s,l=0,f=e.positionedGlyphs,p="right"===o?1:"left"===o?0:.5,h=f.length;n.forEach((function(e){var n=t[e],i=0;if(n&&(f.push({glyph:e,x:n.advance/2,y:c+i,vertical:!1,scale:1,metrics:n}),u+=n.advance+a),f.length!==h){var o=u-a;l=Math.max(o,l),WS(f,t,h,f.length-1,p)}u=0,c-=r+5}));var d=GS(i),v=d.horizontalAlign,m=d.verticalAlign;qS(f,p,v,m,l,r,n.length);var g=c-s;e.top+=-m*g,e.bottom=e.top-g,e.left+=-v*l,e.right=e.left+l}function XS(e,t,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[0,0],s=arguments.length>7?arguments[7]:void 0,u=e.split("\n"),c=[],l={positionedGlyphs:c,top:a[1],bottom:a[1],left:a[0],right:a[0],lineCount:u.length,text:e};return s?YS(l,t,u,n,r,i,o):ZS(l,t,u,n,r,i,o),!!c.length&&l}function KS(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],r=arguments.length>2?arguments[2]:void 0,i=e.positionedGlyphs,o=void 0===i?[]:i,a=[],s=US(o);try{for(s.s();!(t=s.n()).done;){var u=t.value,c=u.metrics,l=4,f=c.advance*u.scale/2,p=r?[u.x+f,u.y]:[0,0],h=r?[0,0]:[u.x+f+n[0],u.y+n[1]],d=(0-l)*u.scale-f+h[0],v=(0-l)*u.scale+h[1],m=d+c.width*u.scale,g=v+c.height*u.scale,y={x:d,y:v},b={x:m,y:v},_={x:d,y:g},x={x:m,y:g};a.push({tl:y,tr:b,bl:_,br:x,tex:c,glyphOffset:p})}}catch(w){s.e(w)}finally{s.f()}return a}function $S(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=QS(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function QS(e,t){if(e){if("string"===typeof e)return JS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?JS(e,t):void 0}}function JS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ej(e){var t=tj();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function tj(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var nj='#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105\n#define FONT_SIZE 48.0\nuniform sampler2D u_sdf_map;\nuniform float u_gamma_scale : 0.5;\n// uniform float u_font_size : 24.0;\nuniform float u_opacity : 1.0;\nuniform vec4 u_stroke_color : [0, 0, 0, 1];\nuniform float u_stroke_width : 2.0;\nuniform float u_halo_blur : 0.5;\nuniform float u_DevicePixelRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_uv;\nvarying float v_gamma_scale;\nvarying float v_fontScale;\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\n#pragma include "picking"\nvoid main() {\n  // get style data mapping\n  float opacity = styleMappingMat[0][0];\n  float strokeWidth = styleMappingMat[0][2];\n  vec4 textrueStroke = vec4(\n    styleMappingMat[1][0],\n    styleMappingMat[1][1],\n    styleMappingMat[1][2],\n    styleMappingMat[1][3]\n  );\n\n  // get sdf from atlas\n  float dist = texture2D(u_sdf_map, v_uv).a;\n\n  // float fontScale = u_font_size / FONT_SIZE;\n\n  // lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;\n  lowp float buff = (6.0 - strokeWidth / v_fontScale) / SDF_PX;\n  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;\n\n  highp float gamma_scaled = gamma * v_gamma_scale;\n\n  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n  // gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), vec4(u_stroke_color.rgb, u_stroke_color.a * u_opacity), smoothstep(0., 0.5, 1. - dist));\n  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), vec4(textrueStroke.rgb, textrueStroke.a * opacity), smoothstep(0., 0.5, 1. - dist));\n  gl_FragColor.a= gl_FragColor.a * alpha;\n   // \u4f5c\u4e3a mask \u6a21\u677f\u65f6\u9700\u8981\u4e22\u5f03\u900f\u660e\u7684\u50cf\u7d20\n  if (gl_FragColor.a < 0.01) {\n    discard;\n  }\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',rj='#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105\n#define FONT_SIZE 24.0\nattribute vec3 a_Position;\nattribute vec2 a_tex;\nattribute vec2 a_textOffsets;\nattribute vec4 a_Color;\nattribute float a_Size;\nattribute float a_Rotate;\n\nuniform vec2 u_sdf_map_size;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float u_raisingHeight: 0.0;\n\nvarying vec2 v_uv;\nvarying float v_gamma_scale;\nvarying vec4 v_color;\nvarying float v_fontScale;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\nuniform float u_opacity : 1;\nuniform float u_stroke_width : 2;\nuniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n#pragma include "styleMappingCalStrokeWidth"\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n   styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n\n   vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][2] = strokeWidthAndOffset.r;\n  textureOffset = strokeWidthAndOffset.g;\n\n  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);\n  if(hasStroke()) {\n    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R\n    textureOffset += 1.0;\n\n    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G\n    textureOffset += 1.0;\n\n    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B\n    textureOffset += 1.0;\n\n    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A\n    textureOffset += 1.0;\n  } else {\n    if(u_stroke_color == vec4(0.0)) {\n      styleMappingMat[1][0] = v_color.r;\n      styleMappingMat[1][1] = v_color.g;\n      styleMappingMat[1][2] = v_color.b;\n      styleMappingMat[1][3] = v_color.a;\n    } else {\n      styleMappingMat[1][0] = u_stroke_color.r;\n      styleMappingMat[1][1] = u_stroke_color.g;\n      styleMappingMat[1][2] = u_stroke_color.b;\n      styleMappingMat[1][3] = u_stroke_color.a;\n    }\n  }\n  \n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_color = a_Color;\n  v_uv = a_tex / u_sdf_map_size;\n\n  // \u6587\u672c\u7f29\u653e\u6bd4\u4f8b\n  float fontScale = a_Size / FONT_SIZE;\n  v_fontScale = fontScale;\n\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  highp float angle_sin = sin(a_Rotate);\n  highp float angle_cos = cos(a_Rotate);\n  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n  \n  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);\n\n  float raiseHeight = u_raisingHeight;\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n    raiseHeight = u_raisingHeight * mapboxZoomScale;\n  }\n\n  vec4 projected_position;\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n   projected_position  = u_Mvp *(vec4(a_Position.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));\n  } else { // else\n   projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));\n  }\n\n  gl_Position = vec4(\n    projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);\n  v_gamma_scale = gl_Position.w;\n  setPickingColor(a_PickingColor);\n\n}\n';function ij(e){var t=this,n=e.id,r=[],i=[];if(!t.glyphInfoMap||!t.glyphInfoMap[n])return{vertices:[],indices:[],size:7};var o=t.glyphInfoMap[n].centroid,a=2===o.length?[o[0],o[1],0]:o;return t.glyphInfoMap[n].glyphQuads.forEach((function(e,t){r.push.apply(r,Object(D["a"])(a).concat([e.tex.x,e.tex.y+e.tex.height,e.tl.x,e.tl.y],Object(D["a"])(a),[e.tex.x+e.tex.width,e.tex.y+e.tex.height,e.tr.x,e.tr.y],Object(D["a"])(a),[e.tex.x+e.tex.width,e.tex.y,e.br.x,e.br.y],Object(D["a"])(a),[e.tex.x,e.tex.y,e.bl.x,e.bl.y])),i.push(0+4*t,1+4*t,2+4*t,2+4*t,3+4*t,0+4*t)})),{vertices:r,indices:i,size:7}}var oj=function(e){Object(et["a"])(n,e);var t=ej(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"glyphInfoMap",{}),Object(Ge["a"])(Object(gt["a"])(e),"currentZoom",-1),Object(Ge["a"])(Object(gt["a"])(e),"textureHeight",0),Object(Ge["a"])(Object(gt["a"])(e),"textCount",0),Object(Ge["a"])(Object(gt["a"])(e),"preTextStyle",{}),Object(Ge["a"])(Object(gt["a"])(e),"mapping",Object(ae["a"])(ue.a.mark((function t(){return ue.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.initGlyph(),e.updateTexture(),t.next=4,e.reBuildModel();case 4:case"end":return t.stop()}}),t)})))),e}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t,r=e.stroke,i=void 0===r?"#fff":r,o=e.strokeWidth,a=void 0===o?0:o,s=e.halo,u=void 0===s?.5:s,c=e.gamma,l=void 0===c?2:c,f=e.raisingHeight,p=void 0===f?0:f,h=this.getFontServiceMapping(),d=this.getFontServiceCanvas();if(h&&Object.keys(h).length!==this.textCount&&d&&(this.updateTexture(),this.textCount=Object.keys(h).length),this.preTextStyle=this.getTextStyle(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n,strokeWidth:a,stroke:i})){this.judgeStyleAttributes({opacity:n,strokeWidth:a,stroke:i});var v=this.layer.getEncodedData(),m=this.calDataFrame(this.cellLength,v,this.cellProperties),g=m.data,y=m.width,b=m.height;this.rowCount=b,this.dataTexture=this.cellLength>0&&g.length>0?this.createTexture2D({flipY:!0,data:g,format:ad.LUMINANCE,type:ad.FLOAT,width:y,height:b}):this.createTexture2D({flipY:!0,data:[1],format:ad.LUMINANCE,type:ad.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_raisingHeight:Number(p),u_opacity:Object(Ei["isNumber"])(n)?n:1,u_stroke_width:Object(Ei["isNumber"])(a)?a:1,u_stroke_color:this.getStrokeColor(i),u_sdf_map:this.texture,u_halo_blur:u,u_gamma_scale:l,u_sdf_map_size:[(null===d||void 0===d?void 0:d.width)||1,(null===d||void 0===d?void 0:d.height)||1]}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.bindEvent(),this.extent=this.textExtent(),this.preTextStyle=this.getTextStyle(),e.abrupt("return",this.buildModels());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.layer.getLayerConfig(),n=t.textAllowOverlap,r=void 0!==n&&n,this.initGlyph(),this.updateTexture(),r||this.filterGlyphs(),e.next=6,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:rj,fragmentShader:nj,triangulation:ij.bind(this),depth:{enable:!1}});case 6:return i=e.sent,e.abrupt("return",[i]);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"needUpdate",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o,a,s,u,c,l,f,p;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.getTextStyle(),n=t.textAllowOverlap,r=void 0!==n&&n,i=t.textAnchor,o=void 0===i?"center":i,a=t.textOffset,s=t.padding,u=t.fontFamily,c=t.fontWeight,Object(Ei["isEqual"])(s,this.preTextStyle.padding)&&Object(Ei["isEqual"])(a,this.preTextStyle.textOffset)&&Object(Ei["isEqual"])(o,this.preTextStyle.textAnchor)&&Object(Ei["isEqual"])(u,this.preTextStyle.fontFamily)&&Object(Ei["isEqual"])(c,this.preTextStyle.fontWeight)){e.next=5;break}return e.next=4,this.mapping();case 4:return e.abrupt("return",!0);case 5:if(!r){e.next=7;break}return e.abrupt("return",!1);case 7:if(l=this.mapService.getZoom(),f=this.mapService.getBounds(),p=bo(this.extent,f),!(Math.abs(this.currentZoom-l)>.5)&&p&&r===this.preTextStyle.textAllowOverlap){e.next=14;break}return e.next=13,this.reBuildModel();case 13:return e.abrupt("return",!0);case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e,t;null===(e=this.texture)||void 0===e||e.destroy(),null===(t=this.dataTexture)||void 0===t||t.destroy(),this.layer.off("remapping",this.mapping)}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"rotate",type:Ry.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e){var t=e.rotate,n=void 0===t?0:t;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:Ry.Attribute,descriptor:{name:"a_textOffsets",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(e,t,n){return[n[5],n[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ry.Attribute,descriptor:{name:"a_Size",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e){var t=e.size,n=void 0===t?12:t;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:Ry.Attribute,descriptor:{name:"a_tex",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(e,t,n){return[n[3],n[4]]}}})}},{key:"bindEvent",value:function(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping)}},{key:"textExtent",value:function(){var e=this.mapService.getBounds();return yo(e,.5)}},{key:"initTextFont",value:function(){var e=this.getTextStyle(),t=e.fontWeight,n=e.fontFamily,r=this.layer.getEncodedData(),i=[];r.forEach((function(e){var t=e.shape,n=void 0===t?"":t;n=n.toString();var r,o=$S(n);try{for(o.s();!(r=o.n()).done;){var a=r.value;-1===i.indexOf(a)&&i.push(a)}}catch(s){o.e(s)}finally{o.f()}})),this.fontService.setFontOptions({characterSet:i,fontWeight:t,fontFamily:n,iconfont:!1})}},{key:"initIconFontTex",value:function(){var e=this.getTextStyle(),t=e.fontWeight,n=e.fontFamily,r=this.layer.getEncodedData(),i=[];r.forEach((function(e){var t=e.shape,n=void 0===t?"":t;n="".concat(n),-1===i.indexOf(n)&&i.push(n)})),this.fontService.setFontOptions({characterSet:i,fontWeight:t,fontFamily:n,iconfont:!0})}},{key:"getTextStyle",value:function(){var e=this.layer.getLayerConfig(),t=e.fontWeight,n=void 0===t?"400":t,r=e.fontFamily,i=void 0===r?"sans-serif":r,o=e.textAllowOverlap,a=void 0!==o&&o,s=e.padding,u=void 0===s?[0,0]:s,c=e.textAnchor,l=void 0===c?"center":c,f=e.textOffset,p=void 0===f?[0,0]:f,h=e.opacity,d=void 0===h?1:h,v=e.strokeOpacity,m=void 0===v?1:v,g=e.strokeWidth,y=void 0===g?0:g,b=e.stroke,_=void 0===b?"#000":b;return{fontWeight:n,fontFamily:i,textAllowOverlap:a,padding:u,textAnchor:l,textOffset:p,opacity:d,strokeOpacity:m,strokeWidth:y,stroke:_}}},{key:"generateGlyphLayout",value:function(e){var t=this,n=this.getFontServiceMapping(),r=this.layer.getLayerConfig(),i=r.spacing,o=void 0===i?2:i,a=r.textAnchor,s=void 0===a?"center":a,u=r.textOffset,c=this.layer.getEncodedData();this.glyphInfo=c.map((function(r){var i=r.shape,a=void 0===i?"":i,c=r.id,l=r.size,f=void 0===l?1:l,p=XS(a.toString(),n,f,s,"left",o,u||r.textOffset||[0,0],e),h=KS(p,u,!1);return r.shaping=p,r.glyphQuads=h,r.centroid=Oo(r.coordinates),r.originCentroid="GAODE2.x"===r.version?Oo(r.originCoordinates):r.originCentroid=r.centroid,t.glyphInfoMap[c]={shaping:p,glyphQuads:h,centroid:Oo(r.coordinates)},r}))}},{key:"getFontServiceMapping",value:function(){var e=this.layer.getLayerConfig(),t=e.fontWeight,n=void 0===t?"400":t,r=e.fontFamily,i=void 0===r?"sans-serif":r;return this.fontService.getMappingByKey("".concat(i,"_").concat(n))}},{key:"getFontServiceCanvas",value:function(){var e=this.layer.getLayerConfig(),t=e.fontWeight,n=void 0===t?"400":t,r=e.fontFamily,i=void 0===r?"sans-serif":r;return this.fontService.getCanvasByKey("".concat(i,"_").concat(n))}},{key:"filterGlyphs",value:function(){var e=this,t=this.layer.getLayerConfig(),n=t.padding,r=void 0===n?[0,0]:n,i=t.textAllowOverlap,o=void 0!==i&&i;if(!o){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var a=this.rendererService.getViewportSize(),s=a.width,u=a.height,c=new BS(s,u),l=this.glyphInfo.filter((function(t){var n=t.shaping,i=t.id,o=void 0===i?0:i,a="GAODE2.x"===t.version?t.originCentroid:t.centroid,s=t.size,u=s/16,l=e.mapService.lngLatToContainer(a),f=c.placeCollisionBox({x1:n.left*u-r[0],x2:n.right*u+r[0],y1:n.top*u-r[1],y2:n.bottom*u+r[1],anchorPointX:l.x,anchorPointY:l.y}),p=f.box;return!(!p||!p.length)&&(c.insertCollisionBox(p,o),!0)}));l.forEach((function(t){e.glyphInfoMap[t.id]=t}))}}},{key:"initGlyph",value:function(){var e=this.layer.getLayerConfig(),t=e.iconfont,n=void 0!==t&&t;n?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(n)}},{key:"updateTexture",value:function(){var e=this.rendererService.createTexture2D,t=this.getFontServiceCanvas();this.textureHeight=t.height,this.texture&&this.texture.destroy(),this.texture=e({data:t,mag:ad.LINEAR,min:ad.LINEAR,width:t.width,height:t.height})}},{key:"reBuildModel",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.filterGlyphs(),e.next=3,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:rj,fragmentShader:nj,triangulation:ij.bind(this),depth:{enable:!1}});case 3:t=e.sent,this.layer.models=[t];case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(Lx),aj={fillImage:pS,fill:sS,radar:kS,image:gS,normal:OS,simplePoint:RS,extrude:tS,text:oj,earthFill:KE,earthExtrude:WE},sj=aj;function uj(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=cj(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function cj(e,t){if(e){if("string"===typeof e)return lj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lj(e,t):void 0}}function lj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fj(e){var t=pj();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function pj(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var hj=function(e){Object(et["a"])(n,e);var t=fj(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"type","PointLayer"),Object(Ge["a"])(Object(gt["a"])(e),"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}}),e}return Object(He["a"])(n,[{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.getModelType(),this.layerModel&&this.layerModel.clearModels(),this.layerModel=new sj[t](this),e.next=5,this.initLayerModels();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"rebuildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.buildModels();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getModelTypeWillEmptyData",value:function(){if(this.shapeOption){var e=this.shapeOption,t=e.field,n=e.values,r=this.getLayerConfig(),i=r.shape2d,o=this.iconService.getIconMap();if(t&&-1!==(null===i||void 0===i?void 0:i.indexOf(t)))return"fill";if("text"===n)return"text";if(n&&n instanceof Array){var a,s=uj(n);try{for(s.s();!(a=s.n()).done;){var u=a.value;if("string"===typeof u&&o.hasOwnProperty(u))return"image"}}catch(c){s.e(c)}finally{s.f()}}}return"normal"}},{key:"getDefaultConfig",value:function(){var e=this.getModelType(),t={fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}};return t[e]}},{key:"getModelType",value:function(){var e=this.getEncodedData(),t=this.getLayerConfig(),n=t.shape2d,r=t.shape3d,i=this.iconService.getIconMap(),o=e.find((function(e){return e.hasOwnProperty("shape")}));if(o){var a=o.shape;return"dot"===a?"normal":"simple"===a?"simplePoint":"radar"===a?"radar":"fillImage"===this.layerType?"fillImage":-1!==(null===n||void 0===n?void 0:n.indexOf(a))?"GLOBEL"===this.mapService.version?"earthFill":"fill":-1!==(null===r||void 0===r?void 0:r.indexOf(a))?"GLOBEL"===this.mapService.version?"earthExtrude":"extrude":i.hasOwnProperty(a)?"image":"text"}return this.getModelTypeWillEmptyData()}}]),n}(Cx);function dj(e){var t=vj();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function vj(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var mj='uniform float u_opacity: 1.0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\nuniform float u_linearColor: 0;\n\nuniform float u_topsurface: 1.0;\nuniform float u_sidesurface: 1.0;\n\nvarying vec4 v_Color;\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];  \n  float isSide = styleMappingMat[0][3];\n  float sidey = styleMappingMat[3][0];\n  float lightWeight = styleMappingMat[3][1];\n\n  // Tip: \u90e8\u5206\u673a\u578b GPU \u8ba1\u7b97\u7cbe\u5ea6\u517c\u5bb9\n  if(isSide < 0.999) {\n    // side face\n    if(u_sidesurface < 1.0) {\n      discard;\n    }\n\n    if(u_linearColor == 1.0) {\n      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);\n      linearColor.rgb *= lightWeight;\n      gl_FragColor = linearColor;\n    } else {\n      gl_FragColor = v_Color;\n    }\n\n  } else {\n     // top face\n    if(u_topsurface < 1.0) {\n      discard;\n    }\n\n    gl_FragColor = v_Color;\n  }\n\n  gl_FragColor.a *= opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',gj='precision highp float;\n\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute float a_Size;\nattribute vec3 a_uvs;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nvarying vec4 v_Color;\nuniform float u_heightfixed: 0.0; // \u9ed8\u8ba4\u4e0d\u56fa\u5b9a\nuniform float u_raisingHeight: 0.0;\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - isSide\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // sidey\n  );\n  styleMappingMat[0][3] = a_Position.z;\n  styleMappingMat[3][0] = a_uvs[2];\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);\n  vec4 project_pos = project_position(pos);\n\n  if(u_heightfixed > 0.0) { // \u5224\u65ad\u51e0\u4f55\u4f53\u662f\u5426\u56fa\u5b9a\u9ad8\u5ea6\n    project_pos.z = a_Position.z * a_Size;\n    project_pos.z += u_raisingHeight;\n\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      project_pos.z *= mapboxZoomScale;\n      project_pos.z += u_raisingHeight * mapboxZoomScale;\n    }\n  }\n\n  // project_pos.z += 500000.0; // amap1\n\n  // project_pos.z += (500000.0 * 4.0)/pow(2.0, 21.0 - u_Zoom); // mapbox\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n\n  float lightWeight = calc_lighting(pos);\n  // v_Color = a_Color;\n  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  styleMappingMat[3][1] = lightWeight;\n\n  setPickingColor(a_PickingColor);\n}\n',yj='uniform sampler2D u_texture;\nuniform float u_opacity: 1.0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\nuniform float u_linearColor: 0;\n\nuniform float u_topsurface: 1.0;\nuniform float u_sidesurface: 1.0;\n\nvarying vec4 v_Color;\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float isSide = styleMappingMat[0][3];\n  float lightWeight = styleMappingMat[3][1];\n  float topU = styleMappingMat[2][2];\n  float topV = styleMappingMat[2][3];\n\n  float sidey = styleMappingMat[3][0];\n  // Tip: \u90e8\u5206\u673a\u578b GPU \u8ba1\u7b97\u7cbe\u5ea6\u517c\u5bb9\n  if(isSide < 0.999) {\n    // side face\n    if(u_sidesurface < 1.0) {\n      discard;\n    }\n\n    if(u_linearColor == 1.0) {\n      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);\n      linearColor.rgb *= lightWeight;\n      gl_FragColor = linearColor;\n    } else {\n      gl_FragColor = v_Color;\n    }\n  } else {\n\n     // top face\n    if(u_topsurface < 1.0) {\n      discard;\n    }\n\n    gl_FragColor = texture2D(u_texture, vec2(topU, topV));\n  }\n  \n\n  gl_FragColor.a *= opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',bj='precision highp float;\n\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute float a_Size;\nattribute vec3 a_uvs;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nvarying vec4 v_Color;\nuniform float u_heightfixed: 0.0; // \u9ed8\u8ba4\u4e0d\u56fa\u5b9a\nuniform float u_raisingHeight: 0.0;\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n  v_Color = a_Color;\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - a_Position.z(judge side by a_Position.z)\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1] - u - v\n    0.0, 0.0, 0.0, 0.0  // sidey\n  );\n  \n  styleMappingMat[0][3] = a_Position.z;\n  styleMappingMat[2][2] = a_uvs[0];\n  styleMappingMat[2][3] = 1.0 - a_uvs[1];\n  styleMappingMat[3][0] = a_uvs[2];\n\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);\n  vec4 project_pos = project_position(pos);\n\n  if(u_heightfixed > 0.0) { // \u5224\u65ad\u51e0\u4f55\u4f53\u662f\u5426\u56fa\u5b9a\u9ad8\u5ea6\n    project_pos.z = a_Position.z * a_Size;\n    project_pos.z += u_raisingHeight;\n\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      project_pos.z *= mapboxZoomScale;\n      project_pos.z += u_raisingHeight * mapboxZoomScale;\n    }\n  }\n\n  // project_pos.z += 500000.0; // amap1\n\n  // project_pos.z += (500000.0 * 4.0)/pow(2.0, 21.0 - u_Zoom); // mapbox\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n\n  float lightWeight = calc_lighting(pos);\n  styleMappingMat[3][1] = lightWeight;\n\n  setPickingColor(a_PickingColor);\n}\n',_j='uniform float u_opacity: 1.0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\nuniform float u_linearColor: 0;\n\nuniform float u_topsurface: 1.0;\nuniform float u_sidesurface: 1.0;\n\nvarying vec4 v_Color;\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float isSide = styleMappingMat[0][3];\n  float sidey = styleMappingMat[3][0];\n  float lightWeight = styleMappingMat[3][1];\n\n  // Tip: \u90e8\u5206\u673a\u578b GPU \u8ba1\u7b97\u7cbe\u5ea6\u517c\u5bb9\n  if(isSide < 0.999) {\n    // side face\n    if(u_sidesurface < 1.0) {\n      discard;\n    }\n    \n    if( u_linearColor == 1.0) {\n      // side use linear\n      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);\n      linearColor.rgb *= lightWeight;\n      gl_FragColor = linearColor;\n    } else {\n      // side notuse linear\n       gl_FragColor = v_Color;\n    }\n  } else {\n    // top face\n    if(u_topsurface < 1.0) {\n      discard;\n    }\n    gl_FragColor = v_Color;\n  }\n\n  gl_FragColor.a *= opacity;\n  gl_FragColor = filterColorAlpha(gl_FragColor, lightWeight);\n}\n',xj='precision highp float;\n\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute float a_Size;\nattribute vec3 a_uvs;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nvarying vec4 v_Color;\nuniform float u_heightfixed: 0.0; // \u9ed8\u8ba4\u4e0d\u56fa\u5b9a\nuniform float u_raisingHeight: 0.0;\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - isSide\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // sidey\n  );\n  styleMappingMat[0][3] = a_Position.z;\n  styleMappingMat[3][0] = a_uvs[2];\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);\n  vec4 project_pos = project_position(pos);\n\n  if(u_heightfixed > 0.0) { // \u5224\u65ad\u51e0\u4f55\u4f53\u662f\u5426\u56fa\u5b9a\u9ad8\u5ea6\n    project_pos.z = a_Position.z * a_Size;\n    project_pos.z += u_raisingHeight;\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      project_pos.z *= mapboxZoomScale;\n      project_pos.z += u_raisingHeight * mapboxZoomScale;\n    }\n  }\n\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n\n  float lightWeight = calc_lighting(pos);\n  // v_Color = a_Color;\n  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  styleMappingMat[3][1] = lightWeight;\n\n  setPickingColor(a_PickingColor);\n}\n',wj=function(e){Object(et["a"])(n,e);var t=dj(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t,r=e.heightfixed,i=void 0!==r&&r,o=e.raisingHeight,a=void 0===o?0:o,s=e.topsurface,u=void 0===s||s,c=e.sidesurface,l=void 0===c||c,f=e.sourceColor,p=e.targetColor;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n})){this.judgeStyleAttributes({opacity:n});var h=this.layer.getEncodedData(),d=this.calDataFrame(this.cellLength,h,this.cellProperties),v=d.data,m=d.width,g=d.height;this.rowCount=g,this.dataTexture=this.cellLength>0&&v.length>0?this.createTexture2D({flipY:!0,data:v,format:ad.LUMINANCE,type:ad.FLOAT,width:m,height:g}):this.createTexture2D({flipY:!0,data:[1],format:ad.LUMINANCE,type:ad.FLOAT,width:1,height:1})}var y=0,b=[1,1,1,1],_=[1,1,1,1];return f&&p&&(b=fi(f),_=fi(p),y=1),{u_topsurface:Number(u),u_sidesurface:Number(l),u_heightfixed:Number(i),u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_raisingHeight:Number(a),u_opacity:Object(Ei["isNumber"])(n)?n:1,u_linearColor:y,u_sourceColor:b,u_targetColor:_,u_texture:this.texture}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadTexture(),e.abrupt("return",this.buildModels());case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.getShaders(),n=t.frag,r=t.vert,i=t.type,e.next=3,this.layer.buildLayerModel({moduleName:i,vertexShader:r,fragmentShader:n,triangulation:xw});case 3:return o=e.sent,e.abrupt("return",[o]);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getShaders",value:function(){var e=this.layer.getLayerConfig(),t=e.pickLight,n=e.mapTexture;return n?{frag:yj,vert:bj,type:"polygonExtrudeTexture"}:t?{frag:_j,vert:xj,type:"polygonExtrudePickLight"}:{frag:mj,vert:gj,type:"polygonExtrude"}}},{key:"clearModels",value:function(){var e,t;null===(e=this.dataTexture)||void 0===e||e.destroy(),null===(t=this.texture)||void 0===t||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){var e=this.layer.getSource().extent,t=Object(Oi["a"])(e,4),n=t[0],r=t[1],i=t[2],o=t[3],a=i-n,s=o-r;this.styleAttributeService.registerStyleAttribute({name:"uvs",type:Ry.Attribute,descriptor:{name:"a_uvs",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:3,update:function(e,t,i){var o=i[0],u=i[1];return[(o-n)/a,(u-r)/s,i[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ry.Attribute,descriptor:{name:"a_Normal",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:3,update:function(e,t,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ry.Attribute,descriptor:{name:"a_Size",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e){var t=e.size,n=void 0===t?10:t;return Array.isArray(n)?[n[0]]:[n]}}})}},{key:"loadTexture",value:function(){var e=this,t=this.layer.getLayerConfig(),n=t.mapTexture,r=this.rendererService.createTexture2D;if(this.texture=r({height:0,width:0}),n){var i=new Image;i.crossOrigin="",i.src=n,i.onload=function(){e.texture=r({data:i,width:i.width,height:i.height,wrapS:ad.CLAMP_TO_EDGE,wrapT:ad.CLAMP_TO_EDGE,min:ad.LINEAR,mag:ad.LINEAR}),e.layerService.reRender()}}}}]),n}(Lx);function Oj(e){var t=Ej();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Ej(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Sj='uniform float u_opacity: 1.0;\nvarying vec4 v_color;\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  gl_FragColor = v_color;\n  gl_FragColor.a *= opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',jj='uniform float u_opacity: 1.0;\nvarying vec4 v_Color;\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\n#pragma include "picking"\nuniform float u_opacitylinear: 0.0;\nuniform float u_dir: 1.0;\nvarying vec3 v_linear;\nvarying vec2 v_pos;\n\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  gl_FragColor = v_Color;\n  \n  if(u_opacitylinear > 0.0) {\n    gl_FragColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;\n  }\n\n  gl_FragColor.a *= opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',Aj='attribute vec4 a_Color;\nattribute vec3 a_Position;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float u_opacity: 1.0;\nuniform float u_raisingHeight: 0.0;\n\nvarying vec4 v_Color;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "picking"\n\nuniform float u_opacitylinear: 0.0;\n\nattribute vec3 a_linear;\nvarying vec3 v_linear;\nvarying vec2 v_pos;\n\nvoid main() {\n  if(u_opacitylinear > 0.0) {\n    v_linear = a_linear;\n    v_pos = a_Position.xy;\n  }\n  \n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\nstyleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_Color = a_Color;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  project_pos.z += u_raisingHeight;\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n    project_pos.z *= mapboxZoomScale;\n    project_pos.z += u_raisingHeight * mapboxZoomScale;\n  }\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n\n  setPickingColor(a_PickingColor);\n}',kj='attribute vec4 a_Color;\nattribute vec3 a_Position;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nuniform float u_opacity: 1.0;\nuniform float u_raisingHeight: 0.0;\n\nvarying vec4 v_color;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\nstyleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_color = a_Color;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  project_pos.z += u_raisingHeight;\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n    project_pos.z *= mapboxZoomScale;\n    project_pos.z += u_raisingHeight * mapboxZoomScale;\n  }\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n\n  setPickingColor(a_PickingColor);\n}\n\n',Cj=function(e){Object(et["a"])(n,e);var t=Oj(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.raisingHeight,n=void 0===t?0:t,r=e.opacity,i=void 0===r?1:r,o=e.opacityLinear,a=void 0===o?{enable:!1,dir:"in"}:o;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:i})){this.judgeStyleAttributes({opacity:i});var s=this.layer.getEncodedData(),u=this.calDataFrame(this.cellLength,s,this.cellProperties),c=u.data,l=u.width,f=u.height;this.rowCount=f,this.dataTexture=this.cellLength>0&&c.length>0?this.createTexture2D({flipY:!0,data:c,format:ad.LUMINANCE,type:ad.FLOAT,width:l,height:f}):this.createTexture2D({flipY:!0,data:[1],format:ad.LUMINANCE,type:ad.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_raisingHeight:Number(n),u_opacity:Object(Ei["isNumber"])(i)?i:1,u_opacitylinear:Number(a.enable),u_dir:"in"===a.dir?1:0}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.buildModels());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o,a,s,u,c,l;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.getModelParams(),n=t.frag,r=t.vert,i=t.triangulation,o=t.type,a=this.layer.getLayerConfig(),s=a.workerEnabled,u=void 0!==s&&s,c=a.enablePicking,this.layer.triangulation=i,e.next=5,this.layer.buildLayerModel({moduleName:o,vertexShader:r,fragmentShader:n,triangulation:i,primitive:ad.TRIANGLES,depth:{enable:!1},workerEnabled:u,workerOptions:{modelType:o,enablePicking:c}});case 5:return l=e.sent,e.abrupt("return",[l]);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e;null===(e=this.dataTexture)||void 0===e||e.destroy()}},{key:"registerBuiltinAttributes",value:function(){var e=this.layer.getLayerConfig(),t=e.opacityLinear,n=void 0===t?{enable:!1,dir:"in"}:t;n.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:Ry.Attribute,descriptor:{name:"a_linear",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:3,update:function(e,t,n){return[n[3],n[4],n[5]]}}})}},{key:"getModelParams",value:function(){var e=this.layer.getLayerConfig(),t=e.opacityLinear,n=void 0===t?{enable:!1}:t;return n.enable?{frag:jj,vert:Aj,type:"polygonLinear",triangulation:bw}:{frag:Sj,vert:kj,type:"polygonFill",triangulation:xf}}}]),n}(Lx);function Tj(e){var t=Mj();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Mj(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Pj="\nuniform float u_time: 0.0;\nuniform float u_opacity: 1.0;\n\nvarying vec2 v_uv;\n\nfloat coast2water_fadedepth = 0.10;\nfloat large_waveheight      = .750; // change to adjust the \"heavy\" waves\nfloat large_wavesize        = 3.4;  // factor to adjust the large wave size\nfloat small_waveheight      = 0.6;  // change to adjust the small random waves\nfloat small_wavesize        = 0.5;   // factor to ajust the small wave size\nfloat water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)\nfloat water_glossylight_fact= 120.; // range [1..200]\nfloat particle_amount       = 70.;\n// vec3 watercolor             = vec3(0.43, 0.60, 0.66); // 'transparent' low-water color (RGB)\n// vec3 watercolor2            = vec3(0.06, 0.07, 0.11); // deep-water color (RGB, should be darker than the low-water color)\nuniform vec4 u_watercolor;\nuniform vec4 u_watercolor2;\nvec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights\n#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun\n\nuniform sampler2D u_texture1;\nuniform sampler2D u_texture2;\nuniform sampler2D u_texture3;\n\n  \n\nfloat hash( float n ) {\n    return fract(sin(n)*43758.5453123);\n}\n\n// 2d noise function\nfloat noise1( in vec2 x ) {\n  vec2 p  = floor(x);\n  vec2 f  = smoothstep(0.0, 1.0, fract(x));\n  float n = p.x + p.y*57.0;\n  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),\n    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);\n}\n\nfloat noise(vec2 p) {\n    return texture2D(u_texture2,p*vec2(1./256.)).x;\n}\n\nvec4 highness(vec2 p) {\n    vec4 t = texture2D(u_texture1,fract(p));\n    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;\n    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);\n}\n\nfloat height_map( vec2 p ) {\n    vec4 height=highness(p);\n    /*\n    height = -0.5+\n        0.5*smoothstep(-100.,0.,-height)+\n        2.75*smoothstep(0.,2.,height)+\n        1.75*smoothstep(2.,4.,height)+\n        2.75*smoothstep(4.,16.,height)+\n        1.5*smoothstep(16.,1000.,height);\n    */\n\n    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );\n    //p = p*6.;\n    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;\n    f += 0.2500*noise( p ); p = m*p*1.32;\n    f += 0.1666*noise( p ); p = m*p*1.11;\n    f += 0.0834*noise( p ); p = m*p*1.12;\n    f += 0.0634*noise( p ); p = m*p*1.13;\n    f += 0.0444*noise( p ); p = m*p*1.14;\n    f += 0.0274*noise( p ); p = m*p*1.15;\n    f += 0.0134*noise( p ); p = m*p*1.16;\n    f += 0.0104*noise( p ); p = m*p*1.17;\n    f += 0.0084*noise( p );\n    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;\n        const float FLAT_LEVEL = 0.92525;\n        //f = f*0.25+height*0.75;\n    if (f<FLAT_LEVEL)\n        f = f;\n    else\n        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase\n    return clamp(f, 0., 10.);\n}\n\nvec3 plasma_quintic( float x ) {\n    x = clamp( x, 0.0, 1.0);\n    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3\n    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7\n    return vec3(\n        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),\n        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),\n        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );\n}\n\nvec4 color(vec2 p){\n    vec4 c1 = vec4(1.7,1.6,.9,1);\n    vec4 c2 = vec4(.2,.94,.1,1);\n    vec4 c3 = vec4(.3,.2,.0,1);\n    vec4 c4 = vec4(.99,.99,1.6,1);\n    vec4 v = highness(p);\n    float los = smoothstep(0.1,1.1,v.b);\n    float his = smoothstep(3.5,6.5,v.b);\n    float ces = smoothstep(1.,5.,v.a);\n    vec4 lo = mix(c1,c2,los);\n    vec4 hi = mix(c3,c4,his);\n    vec4 ce = mix(lo,hi,ces);\n\n    return vec4(plasma_quintic(ces),1).ragb;\n}\n\nvec3 terrain_map( vec2 p )\n{\n  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture2D(u_texture3, fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'\n}\n\nconst mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );\n\nfloat water_map( vec2 p, float height ) {\n    vec2 p2 = p*large_wavesize;\n    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );\n    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );\n\n    // coarse crossing 'ocean' waves...\n    float f = 0.6000*noise( p );\n    f += 0.2500*noise( p*m );\n    f += 0.1666*noise( p*m*m );\n    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;\n\n    p *= small_wavesize;\n    f = 0.;\n    float amp = 1.0, s = .5;\n    for (int i=0; i<9; i++)\n    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }\n    \n    return wave+f*small_waveheight;\n}\n\nfloat nautic(vec2 p) {\n    p *= 18.;\n    float f = 0.;\n    float amp = 1.0, s = .5;\n    for (int i=0; i<3; i++)\n    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }\n    return pow(1.-f, 5.);\n}\n\nfloat particles(vec2 p) {\n    p *= 200.;\n    float f = 0.;\n    float amp = 1.0, s = 1.5;\n    for (int i=0; i<3; i++)\n    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }\n    return pow(f*.35, 7.)*particle_amount;\n}\n\nfloat test_shadow( vec2 xy, float height) {\n    vec3 r0 = vec3(xy, height);\n    vec3 rd = normalize( light - r0 );\n    \n    float hit = 1.0;\n    float t   = 0.001;\n    for (int j=1; j<25; j++)\n    {\n        vec3 p = r0 + t*rd;\n        float h = height_map( p.xy );\n        float height_diff = p.z - h;\n        if (height_diff<0.0)\n        {\n            return 0.0;\n        }\n        t += 0.01+height_diff*.02;\n        hit = min(hit, 2.*height_diff/t); // soft shaddow   \n    }\n    return hit;\n}\n\nvec3 CalcTerrain(vec2 uv, float height) {\n    vec3 col = terrain_map( uv );\n    vec2 iResolution = vec2(512.);\n    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);\n    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);\n    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);\n    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);\n    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));\n    vec3 r0 = vec3(uv, height);\n    vec3 rd = normalize( light - r0 );\n    float grad = dot(norm, rd);\n    col *= grad+pow(grad, 8.);\n    float terrainshade = test_shadow( uv, height );\n    col = mix(col*.25, col, terrainshade);\n    return col;\n}\n\n\nvoid main() {\n  vec3 watercolor = u_watercolor.rgb;\n  vec3 watercolor2 = u_watercolor2.rgb;\n  vec2 uv = v_uv;\n  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)\n  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;\n  float height = height_map( uv );\n  vec3 col;\n\n    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);\n    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);\n    if (height > level)\n    {\n        col = CalcTerrain(uv, height);\n    }\n    if (height <= level)\n    {\n        vec2 dif = vec2(.0, .01);\n        vec2 pos = uv*15. + vec2(u_time*.01);\n        float h1 = water_map(pos-dif,waveheight);\n        float h2 = water_map(pos+dif,waveheight);\n        float h3 = water_map(pos-dif.yx,waveheight);\n        float h4 = water_map(pos+dif.yx,waveheight);\n        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane\n        uv += normwater.xy*.002*(level-height);\n        \n        col = CalcTerrain(uv, height);\n\n        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);\n        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);\n        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;\n        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));\n\n        vec3 r0 = vec3(uv, WATER_LEVEL);\n        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position\n        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction\n        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          \n        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights\n        float gradpos  = dot(vec3(0., 0., 1.), rd);\n        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          \n        float watershade  = test_shadow( uv, level );\n        watercolor *= 2.2+watershade;\n        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;\n        watercolor /= (1.+specular1*1.25);\n        watercolor += watershade*specular2*water_specularcolor;\n        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));\n        \n        col = mix(col, watercolor, coastfade);\n    }\n    \n\n  float opacity = u_opacity;\n  gl_FragColor = vec4(col, opacity);  \n}\n",Ij='attribute vec2 a_uv;\nattribute vec3 a_Position;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nvarying vec2 v_uv;\n\n#pragma include "projection"\n\nvoid main() {\n  v_uv = a_uv;\n\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n}\n\n',Rj=function(e){Object(et["a"])(n,e);var t=Tj(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t,r=e.watercolor,i=void 0===r?"#6D99A8":r,o=e.watercolor2,a=void 0===o?"#0F121C":o;return{u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3,u_watercolor:fi(i),u_watercolor2:fi(a),u_opacity:Object(Ei["isNumber"])(n)?n:1}}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadTexture(),e.abrupt("return",this.buildModels());case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:Ij,fragmentShader:Pj,triangulation:yw,primitive:ad.TRIANGLES,depth:{enable:!1}});case 2:return t=e.sent,e.abrupt("return",[t]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e,t,n;null===(e=this.texture1)||void 0===e||e.destroy(),null===(t=this.texture2)||void 0===t||t.destroy(),null===(n=this.texture3)||void 0===n||n.destroy()}},{key:"registerBuiltinAttributes",value:function(){var e=this.layer.getSource().extent,t=Object(Oi["a"])(e,4),n=t[0],r=t[1],i=t[2],o=t[3],a=i-n,s=o-r;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:Ry.Attribute,descriptor:{name:"a_uv",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(e,t,i,o){var u=e.version===nx["GAODE2.x"]?e.originCoordinates[0][o]:i,c=Object(Oi["a"])(u,2),l=c[0],f=c[1];return[(l-n)/a,(f-r)/s]}}})}},{key:"loadTexture",value:function(){var e=this,t=this.rendererService.createTexture2D,n={height:0,width:0};function r(e){var t=0,n=[],r=["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"];r.map((function(r){var i=new Image;i.crossOrigin="",i.src=r,n.push(i),i.onload=function(){t++,3===t&&e(n)}}))}function i(e){return t({data:e,width:e.width,height:e.height,wrapS:ad.MIRRORED_REPEAT,wrapT:ad.MIRRORED_REPEAT,min:ad.LINEAR,mag:ad.LINEAR})}this.texture1=t(n),this.texture2=t(n),this.texture3=t(n),r((function(t){e.texture1=i(t[0]),e.texture2=i(t[1]),e.texture3=i(t[2]),e.layerService.reRender()}))}}]),n}(Lx);function Lj(e){var t=Dj();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Dj(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Nj="uniform sampler2D u_texture;\nuniform float u_time: 0.0;\nuniform float u_speed: 1.0;\nuniform float u_opacity: 1.0;\n\nvarying vec4 v_Color;\nvarying vec2 v_uv;\n\nfloat rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }\n\nfloat water(vec3 p) {\n  float t = u_time * u_speed;\n  p.z += t * 2.; p.x += t * 2.;\n  vec3 c1 = texture2D(u_texture, p.xz / 30.).xyz;\n  p.z += t * 3.; p.x += t * 0.52;\n  vec3 c2 = texture2D(u_texture, p.xz / 30.).xyz;\n  p.z += t * 4.; p.x += t * 0.8;\n  vec3 c3 = texture2D(u_texture, p.xz / 30.).xyz;\n  c1 += c2 - c3;\n  float z = (c1.x + c1.y + c1.z) / 3.;\n  return p.y + z / 4.;\n}\n\nfloat map(vec3 p) {\n  float d = 100.0;\n  d = water(p);\n  return d;\n}\n\nfloat intersect(vec3 ro, vec3 rd) {\n  float d = 0.0;\n  for (int i = 0; i <= 100; i++) {\n    float h = map(ro + rd * d);\n    if (h < 0.1) return  d;\n    d += h;\n  }\n  return 0.0;\n}\n\nvec3 norm(vec3 p) {\n  float eps = .1;\n  return normalize(vec3(\n    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),\n    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),\n    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))\n  ));\n} \n\nfloat calSpc() {\n  vec3 l1 = normalize(vec3(1, 1, 1));\n  vec3 ro = vec3(-3, 20, -8);\n  vec3 rc = vec3(0, 0, 0);\n  vec3 ww = normalize(rc - ro);\n  vec3 uu = normalize(cross(vec3(0,1,0), ww));\n  vec3 vv = normalize(cross(rc - ro, uu));\n  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);\n  float d = intersect(ro, rd);\n  vec3 p = ro + rd * d;\n  vec3 n = norm(p);\n  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);\n  return spc;\n}\n\nvoid main() {\n  float opacity = u_opacity;\n  gl_FragColor = v_Color;\n  gl_FragColor.a *= opacity;\n\n  float spc = calSpc();\n  gl_FragColor += spc * 0.4;\n}\n",Fj='attribute vec4 a_Color;\nattribute vec2 a_uv;\nattribute vec3 a_Position;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nvarying vec4 v_Color;\nvarying vec2 v_uv;\nuniform float u_opacity: 1.0;\n\n\n#pragma include "projection"\n\nvoid main() {\n  v_uv = a_uv;\n\n  v_Color = a_Color;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n}\n\n',zj=function(e){Object(et["a"])(n,e);var t=Lj(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t,r=e.speed,i=void 0===r?.5:r;return{u_texture:this.texture,u_speed:i,u_opacity:Object(Ei["isNumber"])(n)?n:1}}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadTexture(),e.abrupt("return",this.buildModels());case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:Fj,fragmentShader:Nj,triangulation:yw,primitive:ad.TRIANGLES,depth:{enable:!1}});case 2:return t=e.sent,e.abrupt("return",[t]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e;null===(e=this.texture)||void 0===e||e.destroy()}},{key:"registerBuiltinAttributes",value:function(){var e=this.layer.getSource().extent,t=Object(Oi["a"])(e,4),n=t[0],r=t[1],i=t[2],o=t[3],a=i-n,s=o-r;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:Ry.Attribute,descriptor:{name:"a_uv",buffer:{usage:ad.STATIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(e,t,i,o){var u=e.version===nx["GAODE2.x"]?e.originCoordinates[0][o]:i,c=Object(Oi["a"])(u,2),l=c[0],f=c[1];return[(l-n)/a,(f-r)/s]}}})}},{key:"loadTexture",value:function(){var e=this,t=this.layer.getLayerConfig(),n=t.waterTexture,r=this.rendererService.createTexture2D;this.texture=r({height:0,width:0});var i=new Image;i.crossOrigin="",n?(console.warn("L7 recommend\uff1ahttps://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),i.src=n):i.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",i.onload=function(){e.texture=r({data:i,width:i.width,height:i.height,wrapS:ad.MIRRORED_REPEAT,wrapT:ad.MIRRORED_REPEAT,min:ad.LINEAR,mag:ad.LINEAR}),e.layerService.reRender()}}}]),n}(Lx),Bj={fill:Cj,line:bE,extrude:wj,text:oj,point_fill:sS,point_image:gS,point_normal:OS,point_extrude:tS,water:zj,ocean:Rj},Uj=Bj;function Vj(e){var t=Hj();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Hj(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Gj=function(e){Object(et["a"])(n,e);var t=Vj(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"type","PolygonLayer"),e}return Object(He["a"])(n,[{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.getModelType(),this.layerModel=new Uj[t](this),e.next=4,this.initLayerModels();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getModelType",value:function(){var e,t=this.styleAttributeService.getLayerStyleAttribute("shape"),n=null===t||void 0===t||null===(e=t.scale)||void 0===e?void 0:e.field;return"fill"!==n&&n?"extrude"===n?"extrude":"water"===n?"water":"ocean"===n?"ocean":"line"===n?"line":this.getPointModelType():"fill"}},{key:"getPointModelType",value:function(){var e=this.getEncodedData(),t=this.getLayerConfig(),n=t.shape2d,r=t.shape3d,i=this.iconService.getIconMap(),o=e.find((function(e){return e.hasOwnProperty("shape")}));if(o){var a=o.shape;return"dot"===a?"point_normal":-1!==(null===n||void 0===n?void 0:n.indexOf(a))?"point_fill":-1!==(null===r||void 0===r?void 0:r.indexOf(a))?"point_extrude":i.hasOwnProperty(a)?"point_image":"text"}return"fill"}}]),n}(Cx);function Wj(e){var t=qj();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function qj(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Zj="precision mediump float;\nuniform float u_opacity: 1.0;\nuniform sampler2D u_texture;\nuniform sampler2D u_colorTexture;\nuniform float u_min;\nuniform float u_max;\nuniform vec2 u_domain;\nuniform float u_noDataValue;\nuniform bool u_clampLow: true;\nuniform bool u_clampHigh: true;\nvarying vec2 v_texCoord;\nbool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }\n\n\nvoid main() {\n\n  float value = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).r;\n  if (value == u_noDataValue || isnan_emu(value))\n      discard;\n  else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1]))\n     discard;\n  else {\n    float normalisedValue =(value - u_domain[0]) / (u_domain[1] -u_domain[0]);\n    vec4 color = texture2D(u_colorTexture,vec2(normalisedValue, 0));\n    \n    gl_FragColor = color;\n    gl_FragColor.a =  gl_FragColor.a * u_opacity ;\n    if(gl_FragColor.a < 0.01)\n      discard;\n   \n  }\n}\n",Yj='precision highp float;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n#pragma include "projection"\nvoid main() {\n   v_texCoord = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));\n   } else {\n      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n   }\n}\n',Xj=function(e){Object(et["a"])(n,e);var t=Wj(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t,r=e.clampLow,i=void 0===r||r,o=e.clampHigh,a=void 0===o||o,s=e.noDataValue,u=void 0===s?-9999999:s,c=e.domain,l=e.rampColors,f=c||_i(l);return this.colorTexture=this.layer.textureService.getColorTexture(l,f),{u_opacity:n||1,u_texture:this.texture,u_domain:f,u_clampLow:i,u_clampHigh:"undefined"!==typeof a?a:i,u_noDataValue:u,u_colorTexture:this.colorTexture}}},{key:"getRasterData",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t){var n,r,i,o;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Array.isArray(t.data)){e.next=4;break}return e.abrupt("return",{data:t.data,width:t.width,height:t.height});case 4:return e.next=6,t.data;case 6:return n=e.sent,r=n.rasterData,i=n.width,o=n.height,e.abrupt("return",{data:Array.from(r),width:i,height:o});case 11:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o,a,s,u;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.layer.getSource(),n=this.rendererService.createTexture2D,r=t.data.dataArray[0],e.next=5,this.getRasterData(r);case 5:return i=e.sent,o=i.data,a=i.width,s=i.height,this.texture=n({data:o,width:a,height:s,format:ad.LUMINANCE,type:ad.FLOAT}),e.next=12,this.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:Yj,fragmentShader:Zj,triangulation:Ow,primitive:ad.TRIANGLES,depth:{enable:!1}});case 12:return u=e.sent,e.abrupt("return",[u]);case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.initModels());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e,t;null===(e=this.texture)||void 0===e||e.destroy(),null===(t=this.colorTexture)||void 0===t||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ry.Attribute,descriptor:{name:"a_Uv",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(e,t,n){return[n[3],n[4]]}}})}}]),n}(Lx),Kj=["data"],$j=["rasterData"];function Qj(e){var t=Jj();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Jj(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var eA='precision highp float;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n#pragma include "projection"\nvoid main() {\n   v_texCoord = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));\n   } else {\n      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n   }\n}\n',tA="precision mediump float;\nuniform vec2 u_rminmax: vec2(0,255); \nuniform vec2 u_gminmax: vec2(0,255);\nuniform vec2 u_bminmax: vec2(0,255);\nuniform float u_opacity: 1.0;\nuniform sampler2D u_texture;\nuniform float u_noDataValue : 0.0;\nvarying vec2 v_texCoord;\n\nvoid main() {\n  vec3 rgb = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).rgb;\n  if(rgb == vec3(u_noDataValue)) {\n    gl_FragColor = vec4(0.0, 0, 0, 0.0);\n  } else {\n    gl_FragColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);\n  }\n  if(gl_FragColor.a < 0.01)\n    discard;\n \n}",nA=function(e){Object(et["a"])(n,e);var t=Qj(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"dataOption",{}),e}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t,r=e.noDataValue,i=void 0===r?0:r,o=this.dataOption,a=o.rMinMax,s=o.gMinMax,u=o.bMinMax;return{u_opacity:n||1,u_texture:this.texture,u_noDataValue:i,u_rminmax:a,u_gminmax:s,u_bminmax:u}}},{key:"getRasterData",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t){var n,r,i,o,a;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Array.isArray(t.data)){e.next=4;break}return n=t.data,r=Object(Cv["a"])(t,Kj),this.dataOption=r,e.abrupt("return",Object(N["a"])({data:n},r));case 4:return e.next=6,t.data;case 6:if(i=e.sent,o=i.rasterData,a=Object(Cv["a"])(i,$j),this.dataOption=a,!Array.isArray(o)){e.next=14;break}return e.abrupt("return",Object(N["a"])({data:o},a));case 14:return e.abrupt("return",Object(N["a"])({data:Array.from(o)},a));case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o,a,s,u;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.layer.getSource(),n=this.rendererService.createTexture2D,r=t.data.dataArray[0],e.next=5,this.getRasterData(r);case 5:return i=e.sent,o=i.data,a=i.width,s=i.height,this.texture=n({data:o,width:a,height:s,format:ad.RGB,type:ad.FLOAT}),e.next=12,this.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:eA,fragmentShader:tA,triangulation:Ow,primitive:ad.TRIANGLES,depth:{enable:!1}});case 12:return u=e.sent,e.abrupt("return",[u]);case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.initModels());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e;null===(e=this.texture)||void 0===e||e.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ry.Attribute,descriptor:{name:"a_Uv",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(e,t,n){return[n[3],n[4]]}}})}}]),n}(Lx);function rA(e){var t=iA();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function iA(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var oA="precision mediump float;\nuniform float u_opacity: 1.0;\n\nuniform sampler2D u_texture;\nuniform sampler2D u_colorTexture;\n\nvarying vec2 v_texCoord;\n\nuniform vec2 u_domain;\nuniform float u_noDataValue;\nuniform bool u_clampLow: true;\nuniform bool u_clampHigh: true;\nuniform vec4 u_unpack;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_texture, coord,bias) * 255.0;\n    data.a = -1.0;\n    return dot(data, u_unpack);\n}\n\nvec4 getColor(float value) {\n   float normalisedValue =(value- u_domain[0]) / (u_domain[1] - u_domain[0]);\n    vec2 coord = vec2(normalisedValue, 0);\n    return texture2D(u_colorTexture, coord);\n}\n\nvoid main() {\n  float value = getElevation(v_texCoord,0.0);\n  if (value == u_noDataValue) {\n    gl_FragColor = vec4(0.0, 0, 0, 0.0);\n  } else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1])) {\n     gl_FragColor = vec4(0.0, 0, 0, 0.0);\n  } else {\n   \n    gl_FragColor = getColor(value);\n    gl_FragColor.a =  gl_FragColor.a * u_opacity ;\n      if(gl_FragColor.a < 0.01)\n      discard;\n  }\n}\n",aA='precision highp float;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n#pragma include "projection"\nvoid main() {\n   v_texCoord = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n   // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));\n   } else {\n      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n   }\n}\n',sA=function(e){Object(et["a"])(n,e);var t=rA(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=e.clampLow,r=void 0===n||n,i=e.clampHigh,o=void 0===i||i,a=e.noDataValue,s=void 0===a?-9999999:a,u=e.domain,c=e.rampColors,l=e.colorTexture,f=e.rScaler,p=void 0===f?6553.6:f,h=e.gScaler,d=void 0===h?25.6:h,v=e.bScaler,m=void 0===v?.1:v,g=e.offset,y=void 0===g?1e4:g,b=u||_i(c),_=l;return l?this.layer.textureService.setColorTexture(l,c,b):_=this.layer.textureService.getColorTexture(c,b),{u_opacity:t||1,u_texture:this.texture,u_domain:b,u_clampLow:r,u_clampHigh:"undefined"!==typeof o?o:r,u_noDataValue:s,u_unpack:[p,d,m,y],u_colorTexture:_}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.layer.getSource(),n=this.rendererService.createTexture2D,e.next=4,t.data.images;case 4:return r=e.sent,this.texture=n({data:r[0],width:r[0].width,height:r[0].height,min:ad.LINEAR,mag:ad.LINEAR}),e.next=8,this.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:aA,fragmentShader:oA,triangulation:Ow,primitive:ad.TRIANGLES,depth:{enable:!1}});case 8:return i=e.sent,e.abrupt("return",[i]);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e;null===(e=this.texture)||void 0===e||e.destroy()}},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.initModels());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ry.Attribute,descriptor:{name:"a_Uv",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:2,update:function(e,t,n){return[n[3],n[4]]}}})}}]),n}(Lx),uA={raster:Xj,rasterRgb:nA,raster3d:Xj,rasterTerrainRgb:sA},cA=uA;function lA(e){var t=fA();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function fA(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var pA=function(e){Object(et["a"])(n,e);var t=lA(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"type","RasterLayer"),e}return Object(He["a"])(n,[{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.getModelType(),this.layerModel=new cA[t](this),e.next=4,this.initLayerModels();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getDefaultConfig",value:function(){var e=this.getModelType(),t={raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}};return t[e]}},{key:"getModelType",value:function(){var e=this.layerSource.getParserType();switch(e){case"raster":return"raster";case"rasterRgb":return"rasterRgb";case"image":return"rasterTerrainRgb";default:return"raster"}}}]),n}(Cx);function hA(e){var t=dA();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function dA(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var vA="uniform float u_opacity : 1.0;\nuniform vec4 u_color;\n\nvoid main() {\n  gl_FragColor = u_color;\n  gl_FragColor.a *= u_opacity;\n}\n",mA='attribute vec3 a_Position;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\n#pragma include "projection"\n\nvoid main() {\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n}\n\n',gA=function(e){Object(et["a"])(n,e);var t=hA(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=void 0===t?1:t,r=e.color,i=void 0===r?"#000":r;return{u_opacity:Object(Ei["isNumber"])(n)?n:0,u_color:fi(i)}}},{key:"initModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.buildModels());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.layer.buildLayerModel({moduleName:"mask",vertexShader:mA,fragmentShader:vA,triangulation:yw,depth:{enable:!1},pick:!1});case 2:return t=e.sent,e.abrupt("return",[t]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&this.layerService.clear()}},{key:"registerBuiltinAttributes",value:function(){return""}}]),n}(Lx),yA={fill:gA},bA=yA;function _A(e){var t=xA();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function xA(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var wA,OA,EA,SA,jA,AA,kA,CA,TA,MA=function(e){Object(et["a"])(n,e);var t=_A(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"type","MaskLayer"),e}return Object(He["a"])(n,[{key:"buildModels",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.getModelType(),this.layerModel=new bA[t](this),e.next=4,this.initLayerModels();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getModelType",value:function(){return"fill"}}]),n}(Cx),PA=(wA=Object(pp["injectable"])(),OA=Object(pp["inject"])(vp.IMapService),EA=Object(pp["inject"])(vp.IFontService),wA((jA=function(){function e(){Object(Ve["a"])(this,e),Th(this,"mapService",AA,this),Th(this,"fontService",kA,this)}return Object(He["a"])(e,[{key:"apply",value:function(e,t){var n=this,r=t.styleAttributeService;e.hooks.init.tapPromise("DataMappingPlugin",Object(ae["a"])(ue.a.mark((function t(){return ue.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.log(Dy.MappingStart,yh.INIT),n.generateMaping(e,{styleAttributeService:r}),e.log(Dy.MappingEnd,yh.INIT);case 3:case"end":return t.stop()}}),t)})))),e.hooks.beforeRenderData.tapPromise("DataMappingPlugin",function(){var t=Object(ae["a"])(ue.a.mark((function t(i){var o;return ue.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i){t.next=2;break}return t.abrupt("return",i);case 2:return e.dataState.dataMappingNeedUpdate=!1,e.log(Dy.MappingStart,yh.UPDATE),o=n.generateMaping(e,{styleAttributeService:r}),e.log(Dy.MappingEnd,yh.UPDATE),t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.hooks.beforeRender.tap("DataMappingPlugin",(function(){var t=e.getSource();if(!e.layerModelNeedUpdate&&t&&t.inited){var i=r.getLayerStyleAttributes()||[],o=r.getLayerStyleAttribute("filter"),a=t.data.dataArray;if(!Array.isArray(a)||0!==a.length){var s=i.filter((function(e){return e.needRemapping})),u=a;if(null!==o&&void 0!==o&&o.needRemapping&&null!==o&&void 0!==o&&o.scale&&(u=a.filter((function(e){return n.applyAttributeMapping(o,e)[0]}))),s.length){var c=n.mapping(e,s,u,e.getEncodedData());e.setEncodedData(c)}}}}))}},{key:"generateMaping",value:function(e,t){var n=this,r=t.styleAttributeService,i=r.getLayerStyleAttributes()||[],o=r.getLayerStyleAttribute("filter"),a=e.getSource().data.dataArray,s=a;null!==o&&void 0!==o&&o.scale&&(s=a.filter((function(e){return n.applyAttributeMapping(o,e)[0]}))),s=e.processData(s);var u=this.mapping(e,i,s,void 0);return e.setEncodedData(u),(0!==a.length||0!==e.encodeDataLength)&&(e.emit("dataUpdate",null),!0)}},{key:"mapping",value:function(e,t,n,r){var i=this,o=e.getLayerConfig(),a=o.arrow,s=void 0===a?{enable:!1}:a,u=t.filter((function(e){return void 0!==e.scale})).filter((function(e){return"filter"!==e.name})),c=n.map((function(t,n){var o=r?r[n]:{},a=Object(N["a"])({id:t._id,coordinates:t.coordinates},o);if(u.forEach((function(e){var n=i.applyAttributeMapping(e,t);"color"===e.name&&(n=n.map((function(e){return fi(e)}))),a[e.name]=Array.isArray(n)&&1===n.length?n[0]:n,"shape"===e.name&&(a.shape=i.fontService.getIconFontKey(a[e.name]))})),s.enable&&("line"===a.shape||"halfLine"===a.shape)){var c=a.coordinates;if(e.arrowInsertCount<e.encodeDataLength){var l=i.getArrowPoints(c[0],c[1]);a.coordinates.splice(1,0,l,l),e.arrowInsertCount++}}return a}));return t.forEach((function(e){e.needRemapping=!1})),this.adjustData2Amap2Coordinates(c,e),this.adjustData2SimpleCoordinates(c),c}},{key:"adjustData2Amap2Coordinates",value:function(e,t){var n=this;if(e.length>0&&this.mapService.version===nx["GAODE2.x"]){var r=t.coordCenter||t.getSource().center;"number"===typeof e[0].coordinates[0]?e.filter((function(e){return!e.originCoordinates})).map((function(e){e.version=nx["GAODE2.x"],e.originCoordinates=Object(Ei["cloneDeep"])(e.coordinates),e.coordinates=n.mapService.lngLatToCoordByLayer(e.coordinates,r)})):e.filter((function(e){return!e.originCoordinates})).map((function(e){e.version=nx["GAODE2.x"],e.originCoordinates=Object(Ei["cloneDeep"])(e.coordinates),e.coordinates=n.mapService.lngLatToCoordsByLayer(e.coordinates,r)}))}}},{key:"adjustData2SimpleCoordinates",value:function(e){var t=this;e.length>0&&this.mapService.version===nx.SIMPLE&&e.map((function(e){e.simpleCoordinate||(e.coordinates=t.unProjectCoordinates(e.coordinates),e.simpleCoordinate=!0)}))}},{key:"unProjectCoordinates",value:function(e){var t=this;if("number"===typeof e[0])return this.mapService.simpleMapCoord.unproject(e);if(e[0]&&e[0][0]instanceof Array){var n=[];return e.map((function(e){var r=[];e.map((function(e){r.push(t.mapService.simpleMapCoord.unproject(e))})),n.push(r)})),n}var r=[];return e.map((function(e){r.push(t.mapService.simpleMapCoord.unproject(e))})),r}},{key:"applyAttributeMapping",value:function(e,t){var n;if(!e.scale)return[];var r=(null===e||void 0===e||null===(n=e.scale)||void 0===n?void 0:n.scalers)||[],i=[];r.forEach((function(n){var r,o=n.field;(t.hasOwnProperty(o)||"variable"===(null===(r=e.scale)||void 0===r?void 0:r.type))&&i.push(t[o])}));var o=e.mapping?e.mapping(i):[];return o}},{key:"getArrowPoints",value:function(e,t){var n=[t[0]-e[0],t[1]-e[1]],r=xo(n),i=[e[0]+1e-4*r[0],e[1]+1e-4*r[1]];return i}}]),e}(),AA=Mh(jA.prototype,"mapService",[OA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kA=Mh(jA.prototype,"fontService",[EA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),SA=jA))||SA),IA=(CA=Object(pp["injectable"])(),CA(TA=function(){function e(){Object(Ve["a"])(this,e)}return Object(He["a"])(e,[{key:"apply",value:function(e){var t=this;this.mapService=e.getContainer().get(vp.IMapService),e.hooks.init.tapPromise("DataSourcePlugin",Object(ae["a"])(ue.a.mark((function n(){var r,i,o,a;return ue.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.log(Dy.SourceInitStart,yh.INIT),r=e.getSource(),r||(i=e.sourceOption||e.defaultSourceConfig,o=i.data,a=i.options,r=new Fb(o,a),e.setSource(r)),!r.inited){n.next=8;break}t.updateClusterData(e),e.log(Dy.SourceInitEnd,yh.INIT),n.next=10;break;case 8:return n.next=10,new Promise((function(n){r.on("update",(function(r){"inited"===r.type&&(t.updateClusterData(e),e.log(Dy.SourceInitEnd,yh.INIT)),n(null)}))}));case 10:case"end":return n.stop()}}),n)})))),e.hooks.beforeRenderData.tapPromise("DataSourcePlugin",Object(ae["a"])(ue.a.mark((function n(){var r,i,o;return ue.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.updateClusterData(e),i=e.dataState.dataSourceNeedUpdate,e.dataState.dataSourceNeedUpdate=!1,o=r||i,n.abrupt("return",o);case 5:case"end":return n.stop()}}),n)}))))}},{key:"updateClusterData",value:function(e){if(e.isTileLayer||e.tileLayer||!e.getSource())return!1;var t=e.getSource(),n=t.cluster,r=t.clusterOptions.zoom,i=void 0===r?0:r,o=this.mapService.getZoom()-1,a=e.dataState.dataSourceNeedUpdate;return n&&a&&t.updateClusterData(Math.floor(o)),!!(n&&Math.abs(e.clusterZoom-o)>=1)&&(i!==Math.floor(o)&&t.updateClusterData(Math.floor(o)),e.clusterZoom=o,!0)}}]),e}())||TA),RA=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},LA=function(e){return 1===e.length&&(e=DA(e)),{left:function(t,n,r,i){null==r&&(r=0),null==i&&(i=t.length);while(r<i){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){null==r&&(r=0),null==i&&(i=t.length);while(r<i){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}};function DA(e){return function(t,n){return RA(e(t),n)}}var NA=LA(RA),FA=NA.right,zA=(NA.left,FA);var BA=function(e){return null===e?NaN:+e},UA=function(e,t){var n,r,i,o=e.length,a=-1;if(null==t){while(++a<o)if(null!=(n=e[a])&&n>=n){r=i=n;while(++a<o)null!=(n=e[a])&&(r>n&&(r=n),i<n&&(i=n))}}else while(++a<o)if(null!=(n=t(e[a],a,e))&&n>=n){r=i=n;while(++a<o)null!=(n=t(e[a],a,e))&&(r>n&&(r=n),i<n&&(i=n))}return[r,i]},VA=Array.prototype,HA=(VA.slice,VA.map,Math.sqrt(50)),GA=Math.sqrt(10),WA=Math.sqrt(2),qA=function(e,t,n){var r,i,o,a,s=-1;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=ZA(e,t,n))||!isFinite(a))return[];if(a>0){e=Math.ceil(e/a),t=Math.floor(t/a),o=new Array(i=Math.ceil(t-e+1));while(++s<i)o[s]=(e+s)*a}else{e=Math.floor(e*a),t=Math.ceil(t*a),o=new Array(i=Math.ceil(e-t+1));while(++s<i)o[s]=(e-s)/a}return r&&o.reverse(),o};function ZA(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=HA?10:o>=GA?5:o>=WA?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=HA?10:o>=GA?5:o>=WA?2:1)}function YA(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=HA?i*=10:o>=GA?i*=5:o>=WA&&(i*=2),t<e?-i:i}var XA=function(e,t,n){if(null==n&&(n=BA),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e),s=+n(e[o+1],o+1,e);return a+(s-a)*(i-o)}};function KA(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}var $A=function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return KA((n-r/t)*t,a,i,o,s)}},QA=function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return KA((n-r/t)*t,i,o,a,s)}},JA=function(e){return function(){return e}};function ek(e,t){return function(n){return e+n*t}}function tk(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function nk(e){return 1===(e=+e)?rk:function(t,n){return n-t?tk(t,n,e):JA(isNaN(t)?n:t)}}function rk(e,t){var n=t-e;return n?ek(e,n):JA(isNaN(e)?t:e)}var ik=function e(t){var n=nk(t);function r(e,t){var r=n((e=ti(e)).r,(t=ti(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=rk(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function ok(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=ti(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}var ak=ok($A);ok(QA);function sk(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function uk(e,t){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(t).domain(e);break}return this}var ck="$";function lk(){}function fk(e,t){var n=new lk;if(e instanceof lk)e.each((function(e,t){n.set(t,e)}));else if(Array.isArray(e)){var r,i=-1,o=e.length;if(null==t)while(++i<o)n.set(i,e[i]);else while(++i<o)n.set(t(r=e[i],i,e),r)}else if(e)for(var a in e)n.set(a,e[a]);return n}lk.prototype=fk.prototype={constructor:lk,has:function(e){return ck+e in this},get:function(e){return this[ck+e]},set:function(e,t){return this[ck+e]=t,this},remove:function(e){var t=ck+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===ck&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===ck&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===ck&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===ck&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===ck&&++e;return e},empty:function(){for(var e in this)if(e[0]===ck)return!1;return!0},each:function(e){for(var t in this)t[0]===ck&&e(this[t],t.slice(1),this)}};var pk=fk;function hk(){}var dk=pk.prototype;function vk(e,t){var n=new hk;if(e instanceof hk)e.each((function(e){n.add(e)}));else if(e){var r=-1,i=e.length;if(null==t)while(++r<i)n.add(e[r]);else while(++r<i)n.add(t(e[r],r,e))}return n}hk.prototype=vk.prototype={constructor:hk,has:dk.has,add:function(e){return e+="",this[ck+e]=e,this},remove:dk.remove,clear:dk.clear,values:dk.keys,size:dk.size,empty:dk.empty,each:dk.each};var mk=Array.prototype,gk=mk.map,yk=mk.slice,bk={name:"implicit"};function _k(){var e=pk(),t=[],n=[],r=bk;function i(i){var o=i+"",a=e.get(o);if(!a){if(r!==bk)return r;e.set(o,a=t.push(i))}return n[(a-1)%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=pk();var r,o,a=-1,s=n.length;while(++a<s)e.has(o=(r=n[a])+"")||e.set(o,t.push(r));return i},i.range=function(e){return arguments.length?(n=yk.call(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return _k(t,n).unknown(r)},sk.apply(i,arguments),i}var xk=function(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}};function wk(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ok(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Pk(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}var Ek=function(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}},Sk=function(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}},jk=function(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=Pk(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}},Ak=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kk=new RegExp(Ak.source,"g");function Ck(e){return function(){return e}}function Tk(e){return function(t){return e(t)+""}}var Mk=function(e,t){var n,r,i,o=Ak.lastIndex=kk.lastIndex=0,a=-1,s=[],u=[];e+="",t+="";while((n=Ak.exec(e))&&(r=kk.exec(t)))(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:Sk(n,r)})),o=kk.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?Tk(u[0].x):Ck(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})},Pk=function(e,t){var n,r=typeof t;return null==t||"boolean"===r?JA(t):("number"===r?Sk:"string"===r?(n=$r(t))?(t=n,ik):Mk:t instanceof $r?ik:t instanceof Date?Ek:wk(t)?xk:Array.isArray(t)?Ok:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?jk:Sk)(e,t)},Ik=function(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}},Rk=function(e){return function(){return e}},Lk=function(e){return+e},Dk=[0,1];function Nk(e){return e}function Fk(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Rk(isNaN(t)?NaN:.5)}function zk(e){var t,n=e[0],r=e[e.length-1];return n>r&&(t=n,n=r,r=t),function(e){return Math.max(n,Math.min(r,e))}}function Bk(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=Fk(i,r),o=n(a,o)):(r=Fk(r,i),o=n(o,a)),function(e){return o(r(e))}}function Uk(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());while(++a<r)i[a]=Fk(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=zA(e,t,1,r)-1;return o[n](i[n](t))}}function Vk(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Hk(){var e,t,n,r,i,o,a=Dk,s=Dk,u=Pk,c=Nk;function l(){return r=Math.min(a.length,s.length)>2?Uk:Bk,i=o=null,f}function f(t){return isNaN(t=+t)?n:(i||(i=r(a.map(e),s,u)))(e(c(t)))}return f.invert=function(n){return c(t((o||(o=r(s,a.map(e),Sk)))(n)))},f.domain=function(e){return arguments.length?(a=gk.call(e,Lk),c===Nk||(c=zk(a)),l()):a.slice()},f.range=function(e){return arguments.length?(s=yk.call(e),l()):s.slice()},f.rangeRound=function(e){return s=yk.call(e),u=Ik,l()},f.clamp=function(e){return arguments.length?(c=e?zk(a):Nk,f):c!==Nk},f.interpolate=function(e){return arguments.length?(u=e,l()):u},f.unknown=function(e){return arguments.length?(n=e,f):n},function(n,r){return e=n,t=r,l()}}function Gk(e,t){return Hk()(e,t)}var Wk=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function qk(e){if(!(t=Wk.exec(e)))throw new Error("invalid format: "+e);var t;return new Zk({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Zk(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}qk.prototype=Zk.prototype,Zk.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Yk=function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)};function Xk(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}var Kk,$k,Qk,Jk,eC=function(e){return e=Xk(Math.abs(e)),e?e[1]:NaN},tC=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(eC(t)/3)))-eC(Math.abs(e)))},nC=function(e,t){return function(n,r){var i=n.length,o=[],a=0,s=e[0],u=0;while(i>0&&s>0){if(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),(u+=s+1)>r)break;s=e[a=(a+1)%e.length]}return o.reverse().join(t)}},rC=function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}},iC=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(t+1):e},oC=function(e,t){var n=Xk(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(Kk=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Xk(e,Math.max(0,t+o-1))[0]},aC=function(e,t){var n=Xk(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},sC={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:Yk,e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return aC(100*e,t)},r:aC,s:oC,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},uC=function(e){return e},cC=Array.prototype.map,lC=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],fC=function(e){var t=void 0===e.grouping||void 0===e.thousands?uC:nC(cC.call(e.grouping,Number),e.thousands+""),n=void 0===e.currency?"":e.currency[0]+"",r=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?uC:rC(cC.call(e.numerals,String)),a=void 0===e.percent?"%":e.percent+"",s=void 0===e.minus?"-":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function c(e){e=qk(e);var c=e.fill,l=e.align,f=e.sign,p=e.symbol,h=e.zero,d=e.width,v=e.comma,m=e.precision,g=e.trim,y=e.type;"n"===y?(v=!0,y="g"):sC[y]||(void 0===m&&(m=12),g=!0,y="g"),(h||"0"===c&&"="===l)&&(h=!0,c="0",l="=");var b="$"===p?n:"#"===p&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",_="$"===p?r:/[%p]/.test(y)?a:"",x=sC[y],w=/[defgprs%]/.test(y);function O(e){var n,r,a,p=b,O=_;if("c"===y)O=x(e)+O,e="";else{e=+e;var E=e<0||1/e<0;if(e=isNaN(e)?u:x(Math.abs(e),m),g&&(e=iC(e)),E&&0===+e&&"+"!==f&&(E=!1),p=(E?"("===f?f:s:"-"===f||"("===f?"":f)+p,O=("s"===y?lC[8+Kk/3]:"")+O+(E&&"("===f?")":""),w){n=-1,r=e.length;while(++n<r)if(a=e.charCodeAt(n),48>a||a>57){O=(46===a?i+e.slice(n+1):e.slice(n))+O,e=e.slice(0,n);break}}}v&&!h&&(e=t(e,1/0));var S=p.length+e.length+O.length,j=S<d?new Array(d-S+1).join(c):"";switch(v&&h&&(e=t(j+e,j.length?d-O.length:1/0),j=""),l){case"<":e=p+e+O+j;break;case"=":e=p+j+e+O;break;case"^":e=j.slice(0,S=j.length>>1)+p+e+O+j.slice(S);break;default:e=j+p+e+O;break}return o(e)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),O.toString=function(){return e+""},O}function l(e,t){var n=c((e=qk(e),e.type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(eC(t)/3))),i=Math.pow(10,-r),o=lC[8+r/3];return function(e){return n(i*e)+o}}return{format:c,formatPrefix:l}};function pC(e){return $k=fC(e),Qk=$k.format,Jk=$k.formatPrefix,$k}pC({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var hC=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,eC(t)-eC(e))+1},dC=function(e){return Math.max(0,-eC(Math.abs(e)))},vC=function(e,t,n,r){var i,o=YA(e,t,n);switch(r=qk(null==r?",f":r),r.type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=tC(o,a))||(r.precision=i),Jk(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=hC(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=dC(o))||(r.precision=i-2*("%"===r.type));break}return Qk(r)};function mC(e){var t=e.domain;return e.ticks=function(e){var n=t();return qA(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return vC(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i=t(),o=0,a=i.length-1,s=i[o],u=i[a];return u<s&&(r=s,s=u,u=r,r=o,o=a,a=r),r=ZA(s,u,n),r>0?(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,r=ZA(s,u,n)):r<0&&(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,r=ZA(s,u,n)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(u/r)*r,t(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(u*r)/r,t(i)),e},e}function gC(){var e=Gk(Nk,Nk);return e.copy=function(){return Vk(e,gC())},sk.apply(e,arguments),mC(e)}var yC=function(e,t){e=e.slice();var n,r=0,i=e.length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e};function bC(e){return Math.log(e)}function _C(e){return Math.exp(e)}function xC(e){return-Math.log(-e)}function wC(e){return-Math.exp(-e)}function OC(e){return isFinite(e)?+("1e"+e):e<0?0:e}function EC(e){return 10===e?OC:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function SC(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function jC(e){return function(t){return-e(-t)}}function AC(e){var t,n,r=e(bC,_C),i=r.domain,o=10;function a(){return t=SC(o),n=EC(o),i()[0]<0?(t=jC(t),n=jC(n),e(xC,wC)):e(bC,_C),r}return r.base=function(e){return arguments.length?(o=+e,a()):o},r.domain=function(e){return arguments.length?(i(e),a()):i()},r.ticks=function(e){var r,a=i(),s=a[0],u=a[a.length-1];(r=u<s)&&(p=s,s=u,u=p);var c,l,f,p=t(s),h=t(u),d=null==e?10:+e,v=[];if(!(o%1)&&h-p<d){if(p=Math.round(p)-1,h=Math.round(h)+1,s>0){for(;p<h;++p)for(l=1,c=n(p);l<o;++l)if(f=c*l,!(f<s)){if(f>u)break;v.push(f)}}else for(;p<h;++p)for(l=o-1,c=n(p);l>=1;--l)if(f=c*l,!(f<s)){if(f>u)break;v.push(f)}}else v=qA(p,h,Math.min(h-p,d)).map(n);return r?v.reverse():v},r.tickFormat=function(e,i){if(null==i&&(i=10===o?".0e":","),"function"!==typeof i&&(i=Qk(i)),e===1/0)return i;null==e&&(e=10);var a=Math.max(1,o*e/r.ticks().length);return function(e){var r=e/n(Math.round(t(e)));return r*o<o-.5&&(r*=o),r<=a?i(e):""}},r.nice=function(){return i(yC(i(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},r}function kC(){var e=AC(Hk()).domain([1,10]);return e.copy=function(){return Vk(e,kC()).base(e.base())},sk.apply(e,arguments),e}function CC(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function TC(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function MC(e){return e<0?-e*e:e*e}function PC(e){var t=e(Nk,Nk),n=1;function r(){return 1===n?e(Nk,Nk):.5===n?e(TC,MC):e(CC(n),CC(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},mC(t)}function IC(){var e=PC(Hk());return e.copy=function(){return Vk(e,IC()).exponent(e.exponent())},sk.apply(e,arguments),e}function RC(){var e,t=[],n=[],r=[];function i(){var e=0,i=Math.max(1,n.length);r=new Array(i-1);while(++e<i)r[e-1]=XA(t,e/i);return o}function o(t){return isNaN(t=+t)?e:n[zA(r,t)]}return o.invertExtent=function(e){var i=n.indexOf(e);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},o.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var n,r=0,o=e.length;r<o;++r)n=e[r],null==n||isNaN(n=+n)||t.push(n);return t.sort(RA),i()},o.range=function(e){return arguments.length?(n=yk.call(e),i()):n.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return r.slice()},o.copy=function(){return RC().domain(t).range(n).unknown(e)},sk.apply(o,arguments)}function LC(){var e,t=0,n=1,r=1,i=[.5],o=[0,1];function a(t){return t<=t?o[zA(i,t,0,r)]:e}function s(){var e=-1;i=new Array(r);while(++e<r)i[e]=((e+1)*n-(e-r)*t)/(r+1);return a}return a.domain=function(e){return arguments.length?(t=+e[0],n=+e[1],s()):[t,n]},a.range=function(e){return arguments.length?(r=(o=yk.call(e)).length-1,s()):o.slice()},a.invertExtent=function(e){var a=o.indexOf(e);return a<0?[NaN,NaN]:a<1?[t,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},a.unknown=function(t){return arguments.length?(e=t,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return LC().domain([t,n]).range(o).unknown(e)},sk.apply(mC(a),arguments)}function DC(){var e,t=[.5],n=[0,1],r=1;function i(i){return i<=i?n[zA(t,i,0,r)]:e}return i.domain=function(e){return arguments.length?(t=yk.call(e),r=Math.min(t.length,n.length-1),i):t.slice()},i.range=function(e){return arguments.length?(n=yk.call(e),r=Math.min(t.length,n.length-1),i):n.slice()},i.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return DC().domain(t).range(n).unknown(e)},sk.apply(i,arguments)}var NC=new Date,FC=new Date;function zC(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return e(t=new Date(+t)),t},i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return s;do{s.push(a=new Date(+n)),t(n,o),e(n)}while(a<n&&n<r);return s},i.filter=function(n){return zC((function(t){if(t>=t)while(e(t),!n(t))t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)while(++r<=0)while(t(e,-1),!n(e));else while(--r>=0)while(t(e,1),!n(e));}))},n&&(i.count=function(t,r){return NC.setTime(+t),FC.setTime(+r),e(NC),e(FC),Math.floor(n(NC,FC))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e===0}:function(t){return i.count(0,t)%e===0}):i:null}),i}var BC=zC((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));BC.every=function(e){return isFinite(e=Math.floor(e))&&e>0?zC((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var UC=BC,VC=(BC.range,zC((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}))),HC=VC,GC=(VC.range,1e3),WC=6e4,qC=36e5,ZC=864e5,YC=6048e5;function XC(e){return zC((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*WC)/YC}))}var KC=XC(0),$C=XC(1),QC=XC(2),JC=XC(3),eT=XC(4),tT=XC(5),nT=XC(6),rT=(KC.range,$C.range,QC.range,JC.range,eT.range,tT.range,nT.range,zC((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*WC)/ZC}),(function(e){return e.getDate()-1}))),iT=rT,oT=(rT.range,zC((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*GC-e.getMinutes()*WC)}),(function(e,t){e.setTime(+e+t*qC)}),(function(e,t){return(t-e)/qC}),(function(e){return e.getHours()}))),aT=oT,sT=(oT.range,zC((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*GC)}),(function(e,t){e.setTime(+e+t*WC)}),(function(e,t){return(t-e)/WC}),(function(e){return e.getMinutes()}))),uT=sT,cT=(sT.range,zC((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*GC)}),(function(e,t){return(t-e)/GC}),(function(e){return e.getUTCSeconds()}))),lT=cT,fT=(cT.range,zC((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e})));fT.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?zC((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):fT:null};var pT=fT;fT.range;function hT(e){return zC((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/YC}))}var dT=hT(0),vT=hT(1),mT=hT(2),gT=hT(3),yT=hT(4),bT=hT(5),_T=hT(6),xT=(dT.range,vT.range,mT.range,gT.range,yT.range,bT.range,_T.range,zC((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/ZC}),(function(e){return e.getUTCDate()-1}))),wT=xT,OT=(xT.range,zC((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})));OT.every=function(e){return isFinite(e=Math.floor(e))&&e>0?zC((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var ET=OT;OT.range;function ST(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function jT(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function AT(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function kT(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,u=e.shortMonths,c=NT(i),l=FT(i),f=NT(o),p=FT(o),h=NT(a),d=FT(a),v=NT(s),m=FT(s),g=NT(u),y=FT(u),b={a:I,A:R,b:L,B:D,c:null,d:oM,e:oM,f:lM,g:xM,G:OM,H:aM,I:sM,j:uM,L:cM,m:fM,M:pM,p:N,q:F,Q:qM,s:ZM,S:hM,u:dM,U:vM,V:gM,w:yM,W:bM,x:null,X:null,y:_M,Y:wM,Z:EM,"%":WM},_={a:z,A:B,b:U,B:V,c:null,d:SM,e:SM,f:TM,g:UM,G:HM,H:jM,I:AM,j:kM,L:CM,m:MM,M:PM,p:H,q:G,Q:qM,s:ZM,S:IM,u:RM,U:LM,V:NM,w:FM,W:zM,x:null,X:null,y:BM,Y:VM,Z:GM,"%":WM},x={a:j,A:A,b:k,B:C,c:T,d:XT,e:XT,f:tM,g:WT,G:GT,H:$T,I:$T,j:KT,L:eM,m:YT,M:QT,p:S,q:ZT,Q:rM,s:iM,S:JT,u:BT,U:UT,V:VT,w:zT,W:HT,x:M,X:P,y:WT,Y:GT,Z:qT,"%":nM};function w(e,t){return function(n){var r,i,o,a=[],s=-1,u=0,c=e.length;n instanceof Date||(n=new Date(+n));while(++s<c)37===e.charCodeAt(s)&&(a.push(e.slice(u,s)),null!=(i=MT[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(e.slice(u,s)),a.join("")}}function O(e,t){return function(n){var r,i,o=AT(1900,void 0,1),a=E(o,e,n+="",0);if(a!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=jT(AT(o.y,0,1)),i=r.getUTCDay(),r=i>4||0===i?vT.ceil(r):vT(r),r=wT.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(r=ST(AT(o.y,0,1)),i=r.getDay(),r=i>4||0===i?$C.ceil(r):$C(r),r=iT.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?jT(AT(o.y,0,1)).getUTCDay():ST(AT(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,jT(o)):ST(o)}}function E(e,t,n,r){var i,o,a=0,s=t.length,u=n.length;while(a<s){if(r>=u)return-1;if(i=t.charCodeAt(a++),37===i){if(i=t.charAt(a++),o=x[i in MT?t.charAt(a++):i],!o||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function S(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=l[r[0].toLowerCase()],n+r[0].length):-1}function j(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=d[r[0].toLowerCase()],n+r[0].length):-1}function A(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=p[r[0].toLowerCase()],n+r[0].length):-1}function k(e,t,n){var r=g.exec(t.slice(n));return r?(e.m=y[r[0].toLowerCase()],n+r[0].length):-1}function C(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=m[r[0].toLowerCase()],n+r[0].length):-1}function T(e,n,r){return E(e,t,n,r)}function M(e,t,r){return E(e,n,t,r)}function P(e,t,n){return E(e,r,t,n)}function I(e){return a[e.getDay()]}function R(e){return o[e.getDay()]}function L(e){return u[e.getMonth()]}function D(e){return s[e.getMonth()]}function N(e){return i[+(e.getHours()>=12)]}function F(e){return 1+~~(e.getMonth()/3)}function z(e){return a[e.getUTCDay()]}function B(e){return o[e.getUTCDay()]}function U(e){return u[e.getUTCMonth()]}function V(e){return s[e.getUTCMonth()]}function H(e){return i[+(e.getUTCHours()>=12)]}function G(e){return 1+~~(e.getUTCMonth()/3)}return b.x=w(n,b),b.X=w(r,b),b.c=w(t,b),_.x=w(n,_),_.X=w(r,_),_.c=w(t,_),{format:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=O(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",_);return t.toString=function(){return e},t},utcParse:function(e){var t=O(e+="",!0);return t.toString=function(){return e},t}}}var CT,TT,MT={"-":"",_:" ",0:"0"},PT=/^\s*\d+/,IT=/^%/,RT=/[\\^$*+?|[\]().{}]/g;function LT(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function DT(e){return e.replace(RT,"\\$&")}function NT(e){return new RegExp("^(?:"+e.map(DT).join("|")+")","i")}function FT(e){var t={},n=-1,r=e.length;while(++n<r)t[e[n].toLowerCase()]=n;return t}function zT(e,t,n){var r=PT.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function BT(e,t,n){var r=PT.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function UT(e,t,n){var r=PT.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function VT(e,t,n){var r=PT.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function HT(e,t,n){var r=PT.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function GT(e,t,n){var r=PT.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function WT(e,t,n){var r=PT.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function qT(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function ZT(e,t,n){var r=PT.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function YT(e,t,n){var r=PT.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function XT(e,t,n){var r=PT.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function KT(e,t,n){var r=PT.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function $T(e,t,n){var r=PT.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function QT(e,t,n){var r=PT.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function JT(e,t,n){var r=PT.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function eM(e,t,n){var r=PT.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function tM(e,t,n){var r=PT.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function nM(e,t,n){var r=IT.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function rM(e,t,n){var r=PT.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function iM(e,t,n){var r=PT.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function oM(e,t){return LT(e.getDate(),t,2)}function aM(e,t){return LT(e.getHours(),t,2)}function sM(e,t){return LT(e.getHours()%12||12,t,2)}function uM(e,t){return LT(1+iT.count(UC(e),e),t,3)}function cM(e,t){return LT(e.getMilliseconds(),t,3)}function lM(e,t){return cM(e,t)+"000"}function fM(e,t){return LT(e.getMonth()+1,t,2)}function pM(e,t){return LT(e.getMinutes(),t,2)}function hM(e,t){return LT(e.getSeconds(),t,2)}function dM(e){var t=e.getDay();return 0===t?7:t}function vM(e,t){return LT(KC.count(UC(e)-1,e),t,2)}function mM(e){var t=e.getDay();return t>=4||0===t?eT(e):eT.ceil(e)}function gM(e,t){return e=mM(e),LT(eT.count(UC(e),e)+(4===UC(e).getDay()),t,2)}function yM(e){return e.getDay()}function bM(e,t){return LT($C.count(UC(e)-1,e),t,2)}function _M(e,t){return LT(e.getFullYear()%100,t,2)}function xM(e,t){return e=mM(e),LT(e.getFullYear()%100,t,2)}function wM(e,t){return LT(e.getFullYear()%1e4,t,4)}function OM(e,t){var n=e.getDay();return e=n>=4||0===n?eT(e):eT.ceil(e),LT(e.getFullYear()%1e4,t,4)}function EM(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+LT(t/60|0,"0",2)+LT(t%60,"0",2)}function SM(e,t){return LT(e.getUTCDate(),t,2)}function jM(e,t){return LT(e.getUTCHours(),t,2)}function AM(e,t){return LT(e.getUTCHours()%12||12,t,2)}function kM(e,t){return LT(1+wT.count(ET(e),e),t,3)}function CM(e,t){return LT(e.getUTCMilliseconds(),t,3)}function TM(e,t){return CM(e,t)+"000"}function MM(e,t){return LT(e.getUTCMonth()+1,t,2)}function PM(e,t){return LT(e.getUTCMinutes(),t,2)}function IM(e,t){return LT(e.getUTCSeconds(),t,2)}function RM(e){var t=e.getUTCDay();return 0===t?7:t}function LM(e,t){return LT(dT.count(ET(e)-1,e),t,2)}function DM(e){var t=e.getUTCDay();return t>=4||0===t?yT(e):yT.ceil(e)}function NM(e,t){return e=DM(e),LT(yT.count(ET(e),e)+(4===ET(e).getUTCDay()),t,2)}function FM(e){return e.getUTCDay()}function zM(e,t){return LT(vT.count(ET(e)-1,e),t,2)}function BM(e,t){return LT(e.getUTCFullYear()%100,t,2)}function UM(e,t){return e=DM(e),LT(e.getUTCFullYear()%100,t,2)}function VM(e,t){return LT(e.getUTCFullYear()%1e4,t,4)}function HM(e,t){var n=e.getUTCDay();return e=n>=4||0===n?yT(e):yT.ceil(e),LT(e.getUTCFullYear()%1e4,t,4)}function GM(){return"+0000"}function WM(){return"%"}function qM(e){return+e}function ZM(e){return Math.floor(+e/1e3)}function YM(e){return CT=kT(e),TT=CT.format,CT.parse,CT.utcFormat,CT.utcParse,CT}YM({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var XM=1e3,KM=60*XM,$M=60*KM,QM=24*$M,JM=7*QM,eP=30*QM,tP=365*QM;function nP(e){return new Date(e)}function rP(e){return e instanceof Date?+e:+new Date(+e)}function iP(e,t,n,r,i,o,a,s,u){var c=Gk(Nk,Nk),l=c.invert,f=c.domain,p=u(".%L"),h=u(":%S"),d=u("%I:%M"),v=u("%I %p"),m=u("%a %d"),g=u("%b %d"),y=u("%B"),b=u("%Y"),_=[[a,1,XM],[a,5,5*XM],[a,15,15*XM],[a,30,30*XM],[o,1,KM],[o,5,5*KM],[o,15,15*KM],[o,30,30*KM],[i,1,$M],[i,3,3*$M],[i,6,6*$M],[i,12,12*$M],[r,1,QM],[r,2,2*QM],[n,1,JM],[t,1,eP],[t,3,3*eP],[e,1,tP]];function x(s){return(a(s)<s?p:o(s)<s?h:i(s)<s?d:r(s)<s?v:t(s)<s?n(s)<s?m:g:e(s)<s?y:b)(s)}function w(t,n,r,i){if(null==t&&(t=10),"number"===typeof t){var o=Math.abs(r-n)/t,a=LA((function(e){return e[2]})).right(_,o);a===_.length?(i=YA(n/tP,r/tP,t),t=e):a?(a=_[o/_[a-1][2]<_[a][2]/o?a-1:a],i=a[1],t=a[0]):(i=Math.max(YA(n,r,t),1),t=s)}return null==i?t:t.every(i)}return c.invert=function(e){return new Date(l(e))},c.domain=function(e){return arguments.length?f(gk.call(e,rP)):f().map(nP)},c.ticks=function(e,t){var n,r=f(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=w(e,i,o,t),n=n?n.range(i,o+1):[],a?n.reverse():n},c.tickFormat=function(e,t){return null==t?x:u(t)},c.nice=function(e,t){var n=f();return(e=w(e,n[0],n[n.length-1],t))?f(yC(n,e)):c},c.copy=function(){return Vk(c,iP(e,t,n,r,i,o,a,s,u))},c}var oP,aP,sP,uP=function(){return sk.apply(iP(UC,HC,KC,iT,aT,uT,lT,pT,TT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},cP=zC((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()})),lP=(cP.range,zC((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*qC)}),(function(e,t){return(t-e)/qC}),(function(e){return e.getUTCHours()}))),fP=(lP.range,zC((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*WC)}),(function(e,t){return(t-e)/WC}),(function(e){return e.getUTCMinutes()})));fP.range;function pP(){var e,t,n,r,i,o=0,a=1,s=Nk,u=!1;function c(t){return isNaN(t=+t)?i:s(0===n?.5:(t=(r(t)-e)*n,u?Math.max(0,Math.min(1,t)):t))}return c.domain=function(i){return arguments.length?(e=r(o=+i[0]),t=r(a=+i[1]),n=e===t?0:1/(t-e),c):[o,a]},c.clamp=function(e){return arguments.length?(u=!!e,c):u},c.interpolator=function(e){return arguments.length?(s=e,c):s},c.unknown=function(e){return arguments.length?(i=e,c):i},function(i){return r=i,e=i(o),t=i(a),n=e===t?0:1/(t-e),c}}function hP(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function dP(){var e=mC(pP()(Nk));return e.copy=function(){return hP(e,dP())},uk.apply(e,arguments)}function vP(){var e,t,n,r,i,o,a,s=0,u=.5,c=1,l=Nk,f=!1;function p(e){return isNaN(e=+e)?a:(e=.5+((e=+o(e))-t)*(e<t?r:i),l(f?Math.max(0,Math.min(1,e)):e))}return p.domain=function(a){return arguments.length?(e=o(s=+a[0]),t=o(u=+a[1]),n=o(c=+a[2]),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),p):[s,u,c]},p.clamp=function(e){return arguments.length?(f=!!e,p):f},p.interpolator=function(e){return arguments.length?(l=e,p):l},p.unknown=function(e){return arguments.length?(a=e,p):a},function(a){return o=a,e=a(s),t=a(u),n=a(c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),p}}function mP(){var e=mC(vP()(Nk));return e.copy=function(){return hP(e,mP())},uk.apply(e,arguments)}function gP(e){var t,n=[];function r(e){return null==e?t:e}return r.invert=r,r.domain=r.range=function(e){return e?(n=e,e):n},r.unknown=function(e){return e?(t=e,e):t},r.copy=function(){return gP(e).unknown(t)},r}var yP,bP,_P,xP,wP=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,OP=(oP={},Object(Ge["a"])(oP,Py.LINEAR,gC),Object(Ge["a"])(oP,Py.POWER,IC),Object(Ge["a"])(oP,Py.LOG,kC),Object(Ge["a"])(oP,Py.IDENTITY,gP),Object(Ge["a"])(oP,Py.SEQUENTIAL,dP),Object(Ge["a"])(oP,Py.TIME,uP),Object(Ge["a"])(oP,Py.QUANTILE,RC),Object(Ge["a"])(oP,Py.QUANTIZE,LC),Object(Ge["a"])(oP,Py.THRESHOLD,DC),Object(Ge["a"])(oP,Py.CAT,_k),Object(Ge["a"])(oP,Py.DIVERGING,mP),oP),EP=(aP=Object(pp["injectable"])(),aP(sP=function(){function e(){Object(Ve["a"])(this,e),Object(Ge["a"])(this,"scaleOptions",{})}return Object(He["a"])(e,[{key:"apply",value:function(e,t){var n=this,r=t.styleAttributeService;e.hooks.init.tapPromise("FeatureScalePlugin",Object(ae["a"])(ue.a.mark((function t(){var i,o,a;return ue.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.log(Dy.ScaleInitStart,yh.INIT),n.scaleOptions=e.getScaleOptions(),o=r.getLayerStyleAttributes(),a=null===(i=e.getSource())||void 0===i?void 0:i.data.dataArray,!Array.isArray(a)||0!==a.length){t.next=8;break}return t.abrupt("return");case 8:n.caculateScalesForAttributes(o||[],a);case 9:e.log(Dy.ScaleInitEnd,yh.INIT);case 10:case"end":return t.stop()}}),t)})))),e.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",function(){var t=Object(ae["a"])(ue.a.mark((function t(i){var o,a;return ue.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i){t.next=2;break}return t.abrupt("return",i);case 2:if(e.log(Dy.ScaleInitStart,yh.UPDATE),n.scaleOptions=e.getScaleOptions(),o=r.getLayerStyleAttributes(),a=e.getSource().data.dataArray,!Array.isArray(a)||0!==a.length){t.next=8;break}return t.abrupt("return",!0);case 8:return n.caculateScalesForAttributes(o||[],a),e.log(Dy.ScaleInitEnd,yh.UPDATE),e.layerModelNeedUpdate=!0,t.abrupt("return",!0);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.hooks.beforeRender.tap("FeatureScalePlugin",(function(){if(!e.layerModelNeedUpdate){n.scaleOptions=e.getScaleOptions();var t=r.getLayerStyleAttributes(),i=e.getSource().data.dataArray;if((!Array.isArray(i)||0!==i.length)&&t){var o=t.filter((function(e){return e.needRescale}));o.length&&n.caculateScalesForAttributes(o,i)}}}))}},{key:"isNumber",value:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},{key:"caculateScalesForAttributes",value:function(e,t){var n=this;e.forEach((function(e){if(e.scale){var r=e.scale;r.names=n.parseFields(e.scale.field||[]);var i=[];r.names.forEach((function(r){var o;i.push(n.createScale(r,e.name,null===(o=e.scale)||void 0===o?void 0:o.values,t))})),i.some((function(e){return e.type===Iy.VARIABLE}))?(r.type=Iy.VARIABLE,i.forEach((function(e){var t,n;if(!r.callback&&"text"!==r.values)switch(null===(t=e.option)||void 0===t?void 0:t.type){case Py.LOG:case Py.LINEAR:case Py.POWER:if(r.values&&r.values.length>2){var i=e.scale.ticks(r.values.length);e.scale.domain(i)}r.values?e.scale.range(r.values):e.scale.range(e.option.domain);break;case Py.QUANTILE:case Py.QUANTIZE:case Py.THRESHOLD:e.scale.range(r.values);break;case Py.IDENTITY:break;case Py.CAT:r.values?e.scale.range(r.values):e.scale.range(e.option.domain);break;case Py.DIVERGING:case Py.SEQUENTIAL:e.scale.interpolator(ak(r.values));break}"text"===r.values&&e.scale.range(null===(n=e.option)||void 0===n?void 0:n.domain)}))):(r.type=Iy.CONSTANT,r.defaultValues=i.map((function(e,t){return e.scale(r.names[t])}))),r.scalers=i.map((function(e){return{field:e.field,func:e.scale,option:e.option}})),e.needRescale=!1}}))}},{key:"parseFields",value:function(e){return Array.isArray(e)?e:Object(Ei["isString"])(e)?e.split("*"):[e]}},{key:"createScale",value:function(e,t,n,r){var i,o,a=this.scaleOptions[t]&&(null===(i=this.scaleOptions[t])||void 0===i?void 0:i.field)===e?this.scaleOptions[t]:this.scaleOptions[e],s={field:e,scale:void 0,type:Iy.VARIABLE,option:a};if(!r||!r.length)return a&&a.type?s.scale=this.createDefaultScale(a):(s.scale=_k([e]),s.type=Iy.CONSTANT),s;var u=null===(o=r.find((function(t){return!Object(Ei["isNil"])(t[e])})))||void 0===o?void 0:o[e];if(this.isNumber(e)||Object(Ei["isNil"])(u)&&!a)s.scale=_k([e]),s.type=Iy.CONSTANT;else{var c=a&&a.type||this.getDefaultType(u);"text"===n&&(c=Py.CAT);var l=this.createScaleConfig(c,e,a,r);s.scale=this.createDefaultScale(l),s.option=l}return s}},{key:"getDefaultType",value:function(e){var t=Py.LINEAR;return"string"===typeof e&&(t=wP.test(e)?Py.TIME:Py.CAT),t}},{key:"createScaleConfig",value:function(e,t,n,r){var i={type:e},o=(null===r||void 0===r?void 0:r.map((function(e){return e[t]})))||[];if(null!==n&&void 0!==n&&n.domain)i.domain=null===n||void 0===n?void 0:n.domain;else if(e===Py.CAT||e===Py.IDENTITY)i.domain=Object(Ei["uniq"])(o);else if(e===Py.QUANTILE)i.domain=o;else if(e===Py.DIVERGING){var a=UA(o),s=void 0!==(null===n||void 0===n?void 0:n.neutral)?null===n||void 0===n?void 0:n.neutral:(a[0]+a[1])/2;i.domain=[a[0],s,a[1]]}else i.domain=UA(o);return Object(N["a"])(Object(N["a"])({},i),n)}},{key:"createDefaultScale",value:function(e){var t=e.type,n=e.domain,r=e.unknown,i=e.clamp,o=e.nice,a=OP[t]();return n&&a.domain&&a.domain(n),r&&a.unknown(r),void 0!==i&&a.clamp&&a.clamp(i),void 0!==o&&a.nice&&a.nice(o),a}}]),e}())||sP),SP=(yP=Object(pp["injectable"])(),yP(bP=function(){function e(){Object(Ve["a"])(this,e)}return Object(He["a"])(e,[{key:"apply",value:function(e){e.hooks.beforeRender.tap("LayerAnimateStylePlugin",(function(){var t=e.animateStatus;t&&e.models.forEach((function(t){t.addUniforms(Object(N["a"])({},e.layerModel.getAnimateUniforms()))}))}))}}]),e}())||bP),jP=(_P=Object(pp["injectable"])(),_P(xP=function(){function e(){Object(Ve["a"])(this,e)}return Object(He["a"])(e,[{key:"apply",value:function(e){e.hooks.afterInit.tap("LayerMaskPlugin",(function(){var t,n=e.getLayerConfig(),r=n.maskLayers,i=n.enableMask;!e.tileLayer&&r&&r.length>0&&((t=e.masks).push.apply(t,Object(D["a"])(r)),e.updateLayerConfig({mask:i}))}))}}]),e}())||xP),AP=function(){function e(t){var n=t.rendererService,r=t.layerService,i=t.parent;Object(Ve["a"])(this,e),Object(Ge["a"])(this,"tileResource",new Map),Object(Ge["a"])(this,"layerTiles",[]),this.rendererService=n,this.layerService=r,this.parent=i}return Object(He["a"])(e,[{key:"tiles",get:function(){return this.layerTiles}},{key:"hasTile",value:function(e){return this.layerTiles.some((function(t){return t.key===e}))}},{key:"addTile",value:function(e){this.layerTiles.push(e)}},{key:"getTile",value:function(e){return this.layerTiles.find((function(t){return t.key===e}))}},{key:"getVisibleTileBylngLat",value:function(e){return this.layerTiles.find((function(t){return t.isLoaded&&t.visible&&t.lnglatInBounds(e)}))}},{key:"removeTile",value:function(e){var t=this.layerTiles.findIndex((function(t){return t.key===e})),n=this.layerTiles.splice(t,1);n[0]&&n[0].destroy()}},{key:"updateTileVisible",value:function(e){var t=this.getTile(e.key);null===t||void 0===t||t.updateVisible(e.isVisible)}},{key:"isParentLoaded",value:function(e){var t=e.parent;if(!t)return!0;var n=this.getTile(null===t||void 0===t?void 0:t.key);return!(null===n||void 0===n||!n.isLoaded)}},{key:"isChildrenLoaded",value:function(e){var t=this,n=null===e||void 0===e?void 0:e.children;return 0===n.length||n.some((function(e){var n=t.getTile(null===e||void 0===e?void 0:e.key);return!1===(null===n||void 0===n?void 0:n.isLoaded)}))}},{key:"render",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r=this;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.getRenderLayers(),n=t.map(function(){var e=Object(ae["a"])(ue.a.mark((function e(t){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.layerService.renderTileLayer(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Promise.all(n);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getRenderLayers",value:function(){var e=this.layerTiles.filter((function(e){return e.visible&&e.isLoaded})),t=[];return e.map((function(e){return t.push.apply(t,Object(D["a"])(e.getLayers()))})),t}},{key:"getLayers",value:function(){var e=this.layerTiles.filter((function(e){return e.isLoaded})),t=[];return e.map((function(e){return t.push.apply(t,Object(D["a"])(e.getLayers()))})),t}},{key:"getTiles",value:function(){return this.layerTiles}},{key:"destroy",value:function(){this.layerTiles.forEach((function(e){return e.destroy()})),this.tileResource.clear()}}]),e}(),kP=n("3L5V"),CP=n.n(kP);function TP(e,t,n){void 0===n&&(n={});var r=K(e),i=K(t),o=CP.a.union(r.coordinates,i.coordinates);return 0===o.length?null:1===o.length?H(o[0],n.properties):q(o,n.properties)}var MP=TP,PP=function(){function e(){Object(Ve["a"])(this,e)}return Object(He["a"])(e,[{key:"getCombineFeature",value:function(e){var t=null,n=e[0];return e.map((function(e){var n=H(e.coordinates);t=null===t?n:MP(t,n)})),n&&(t.properties=Object(N["a"])({},n)),t}}]),e}(),IP="select",RP="active",LP=function(){function e(t){var n=t.layerService,r=t.tileLayerService,i=t.parent;Object(Ve["a"])(this,e),Object(Ge["a"])(this,"tilePickID",new Map),this.layerService=n,this.tileLayerService=r,this.parent=i,this.tileSourceService=new PP}return Object(He["a"])(e,[{key:"pickRender",value:function(e){var t=this.tileLayerService.getVisibleTileBylngLat(e.lngLat);if(t){var n=t.getMainLayer();null===n||void 0===n||n.layerPickService.pickRender(e)}}},{key:"pick",value:function(e,t){var n=this.parent.getContainer(),r=n.get(vp.IPickingService);if("RasterLayer"===e.type){var i=this.tileLayerService.getVisibleTileBylngLat(t.lngLat);if(i&&void 0!==i.getMainLayer()){var o=i.getMainLayer();return o.layerPickService.pickRasterLayer(o,t,this.parent)}return!1}return this.pickRender(t),r.pickFromPickingFBO(e,t)}},{key:"selectFeature",value:function(e){var t=Object(Oi["a"])(e,3),n=t[0],r=t[1],i=t[2],o=this.color2PickId(n,r,i);this.tilePickID.set(IP,o),this.updateHighLight(n,r,i,IP)}},{key:"highlightPickedFeature",value:function(e){var t=Object(Oi["a"])(e,3),n=t[0],r=t[1],i=t[2],o=this.color2PickId(n,r,i);this.tilePickID.set(RP,o),this.updateHighLight(n,r,i,RP)}},{key:"updateHighLight",value:function(e,t,n,r){this.tileLayerService.tiles.map((function(i){var o=i.getMainLayer();switch(r){case IP:null===o||void 0===o||o.hooks.beforeSelect.call([e,t,n]);break;case RP:null===o||void 0===o||o.hooks.beforeHighlight.call([e,t,n]);break}}))}},{key:"setPickState",value:function(){var e=this.tilePickID.get(IP),t=this.tilePickID.get(RP);if(e){var n=this.pickId2Color(e),r=Object(Oi["a"])(n,3),i=r[0],o=r[1],a=r[2];this.updateHighLight(i,o,a,IP)}else if(t){var s=this.pickId2Color(t),u=Object(Oi["a"])(s,3),c=u[0],l=u[1],f=u[2];this.updateHighLight(c,l,f,RP)}else;}},{key:"color2PickId",value:function(e,t,n){return pi(new Uint8Array([e,t,n]))}},{key:"pickId2Color",value:function(e){return hi(e)}},{key:"getFeatureById",value:function(e){var t=this.tileLayerService.getTiles().filter((function(e){return e.visible})),n=[];return t.forEach((function(t){n.push.apply(n,Object(D["a"])(t.getFeatureById(e)))})),n}},{key:"pickRasterLayer",value:function(e,t,n){return!1}}]),e}(),DP=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive","disableMask","enableMask"];function NP(e){return"PolygonLayer"===e?Gj:"LineLayer"===e?BE:hj}function FP(e){return-1!==["PolygonLayer","LineLayer"].indexOf(e)}var zP=function(){function e(t,n){Object(Ve["a"])(this,e),Object(Ge["a"])(this,"visible",!0),Object(Ge["a"])(this,"layers",[]),Object(Ge["a"])(this,"isLoaded",!1),Object(Ge["a"])(this,"tileMaskLayers",[]),this.parent=n,this.sourceTile=t,this.x=t.x,this.y=t.y,this.z=t.z,this.key="".concat(this.x,"_").concat(this.y,"_").concat(this.z)}return Object(He["a"])(e,[{key:"getLayers",value:function(){return this.layers}},{key:"styleUpdate",value:function(){}},{key:"lnglatInBounds",value:function(e){var t=Object(Oi["a"])(this.sourceTile.bounds,4),n=t[0],r=t[1],i=t[2],o=t[3],a=e.lng,s=e.lat;return a>=n&&a<=i&&s>=r&&s<=o}},{key:"getLayerOptions",value:function(){var e,t=this.parent.getLayerConfig();return Object(N["a"])(Object(N["a"])({},t),{},{autoFit:!1,maskLayers:this.getMaskLayer(),tileMask:FP(this.parent.type),mask:t.mask||0!==(null===(e=t.maskLayers)||void 0===e?void 0:e.length)&&t.enableMask})}},{key:"getMaskLayer",value:function(){var e=this,t=this.parent.getLayerConfig(),n=t.maskLayers,r=[];return null===n||void 0===n||n.forEach((function(t){if(!t.tileLayer)return r.push(t),t;var n=t.tileLayer,i=n.getTile(e.sourceTile.key),o=null===i||void 0===i?void 0:i.getLayers()[0];o&&r.push(o)})),r}},{key:"addTileMask",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new Gj({visible:!1,enablePicking:!1}).source({type:"FeatureCollection",features:[this.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}).shape("fill"),n=My(this.parent.sceneContainer),t.setContainer(n,this.parent.sceneContainer),e.next=5,t.init();case 5:return this.tileMask=t,r=this.getMainLayer(),void 0!==r&&(r.tileMask=t),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"addMask",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t,n){var r;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=My(this.parent.sceneContainer),n.setContainer(r,this.parent.sceneContainer),e.next=4,n.init();case 4:t.addMask(n),this.tileMaskLayers.push(n);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"addLayer",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t){var n;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isTileLayer=!0,n=My(this.parent.sceneContainer),t.setContainer(n,this.parent.sceneContainer),this.layers.push(t),e.next=6,t.init();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateVisible",value:function(e){this.visible=e,this.updateOptions("visible",e)}},{key:"updateOptions",value:function(e,t){this.layers.forEach((function(n){n.updateLayerConfig(Object(Ge["a"])({},e,t))}))}},{key:"getMainLayer",value:function(){return this.layers[0]}},{key:"getFeatures",value:function(e){return[]}},{key:"getFeatureById",value:function(e){return[]}},{key:"destroy",value:function(){var e;null===(e=this.tileMask)||void 0===e||e.destroy(),this.layers.forEach((function(e){return e.destroy()}))}}]),e}();function BP(e){var t=UP();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function UP(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var VP=function(e){Object(et["a"])(n,e);var t=BP(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"initTileLayer",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.getSourceOption(),n=t.data.features[0].properties,r=(new BE).source(t.data,t.options).size(1).shape("line").color("red"),i=new hj({minZoom:this.z-1,maxZoom:this.z+1}).source([n],{parser:{type:"json",x:"textLng",y:"textLat"}}).size(20).color("red").shape(this.key).style({stroke:"#fff",strokeWidth:2}),e.next=6,this.addLayer(r);case 6:return e.next=8,this.addLayer(i);case 8:this.isLoaded=!0;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSourceOption",value:function(){var e=this.parent.getSource(),t=this.sourceTile.data.layers.testTile.features;return{data:{type:"FeatureCollection",features:t},options:{parser:{type:"geojson"},transforms:e.transforms}}}}]),n}(zP);function HP(e){var t=GP();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function GP(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var WP=function(e){Object(et["a"])(n,e);var t=HP(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"initTileLayer",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.parent.getLayerAttributeConfig(),n=this.getLayerOptions(),r=this.getSourceOption(),i=new EO(Object(N["a"])({},n)).source(r.data,r.options),t&&Object.keys(t).forEach((function(e){var n,r,o=e;i[o](null===(n=t[o])||void 0===n?void 0:n.field,null===(r=t[o])||void 0===r?void 0:r.values)})),e.next=7,this.addLayer(i);case 7:this.isLoaded=!0;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSourceOption",value:function(){var e=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:e.transforms}}}}]),n}(zP);function qP(e){var t=ZP();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function ZP(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var YP=function(e){Object(et["a"])(n,e);var t=qP(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"initTileLayer",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.parent.getLayerAttributeConfig(),n=this.getLayerOptions(),r=this.getSourceOption(),i=new MA(Object(N["a"])({},n)).source(r.data,r.options),t&&Object.keys(t).forEach((function(e){var n,r,o=e;i[o](null===(n=t[o])||void 0===n?void 0:n.field,null===(r=t[o])||void 0===r?void 0:r.values)})),e.next=7,this.addLayer(i);case 7:this.isLoaded=!0;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getFeatures",value:function(e){if(!e)return[];var t=this.sourceTile.data;return t.getTileData(e)}},{key:"getSourceOption",value:function(){var e=this.parent.getSource(),t=this.parent.getLayerConfig(),n=t.sourceLayer,r=t.featureId,i=this.getFeatures(n);return{data:{type:"FeatureCollection",features:i},options:{parser:{type:"geojson",featureId:r},transforms:e.transforms}}}}]),n}(zP),XP=["rasterData"];function KP(e){var t=$P();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function $P(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var QP=function(e){Object(et["a"])(n,e);var t=KP(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"initTileLayer",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.parent.getLayerAttributeConfig(),n=this.getLayerOptions(),r=this.getSourceOption(),i=new pA(Object(N["a"])({},n)).source(r.data,r.options),t&&Object.keys(t).forEach((function(e){var n,r,o=e;i[o](null===(n=t[o])||void 0===n?void 0:n.field,null===(r=t[o])||void 0===r?void 0:r.values)})),e.next=7,this.addLayer(i);case 7:this.isLoaded=!0;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSourceOption",value:function(){var e=this.parent.getSource(),t=this.sourceTile.data.data,n=t.rasterData,r=Object(Cv["a"])(t,XP);return{data:n,options:{parser:Object(N["a"])({type:"rasterRgb",extent:this.sourceTile.bounds},r),transforms:e.transforms}}}}]),n}(zP);function JP(e){var t=eI();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function eI(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var tI=function(e){Object(et["a"])(n,e);var t=JP(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"initTileLayer",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.parent.getLayerAttributeConfig(),n=this.getLayerOptions(),r=this.getSourceOption(),i=new pA(Object(N["a"])({},n)).source(r.data,r.options),t&&Object.keys(t).forEach((function(e){var n,r,o=e;i[o](null===(n=t[o])||void 0===n?void 0:n.field,null===(r=t[o])||void 0===r?void 0:r.values)})),e.next=7,this.addLayer(i);case 7:this.isLoaded=!0;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSourceOption",value:function(){var e=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:e.transforms}}}}]),n}(zP),nI=["rasterData"];function rI(e){var t=iI();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function iI(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var oI={positions:[0,1],colors:["#000","#fff"]},aI=function(e){Object(et["a"])(n,e);var t=rI(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"initTileLayer",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o,a,s;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.parent.getLayerAttributeConfig(),n=this.getLayerOptions(),r=this.getSourceOption(),i=this.getLayerOptions(),o=i.rampColors,a=i.domain,this.colorTexture=this.parent.textureService.getColorTexture(o,a),s=new pA(Object(N["a"])(Object(N["a"])({},n),{},{colorTexture:this.colorTexture})).source(r.data,r.options),t&&Object.keys(t).forEach((function(e){var n,r,i=e;s[i](null===(n=t[i])||void 0===n?void 0:n.field,null===(r=t[i])||void 0===r?void 0:r.values)})),e.next=9,this.addLayer(s);case 9:this.isLoaded=!0;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSourceOption",value:function(){var e=this.parent.getSource(),t=this.sourceTile.data.data,n=t.rasterData,r=Object(Cv["a"])(t,nI);return{data:n,options:{parser:Object(N["a"])({type:"raster",extent:this.sourceTile.bounds},r),transforms:e.transforms}}}},{key:"styleUpdate",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n,o=i.rampColors,a=void 0===o?oI:o,s=i.domain;this.colorTexture=this.parent.textureService.getColorTexture(a,s||_i(a)),this.layers.forEach((function(t){return t.style({colorTexture:e.colorTexture})}))}},{key:"destroy",value:function(){this.layers.forEach((function(e){return e.destroy()}))}}]),n}(zP);function sI(e){var t=uI();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function uI(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var cI=function(e){Object(et["a"])(n,e);var t=sI(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"initTileLayer",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.parent.getLayerAttributeConfig(),n=this.getLayerOptions(),r=NP(this.parent.type),i=this.getSourceOption(),i){e.next=7;break}return this.isLoaded=!0,e.abrupt("return");case 7:return o=new r(Object(N["a"])({},n)).source(i.data,i.options),Object.keys(t).forEach((function(e){var n,r,i=e;o[i](null===(n=t[i])||void 0===n?void 0:n.field,null===(r=t[i])||void 0===r?void 0:r.values)})),e.next=11,this.addLayer(o);case 11:if(!n.tileMask){e.next=14;break}return e.next=14,this.addTileMask();case 14:this.setLayerMinMaxZoom(o),this.isLoaded=!0;case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSourceOption",value:function(){var e=this.parent.getSource(),t=this.parent.getLayerConfig(),n=t.sourceLayer,r=void 0===n?"defaultLayer":n,i=t.featureId,o=void 0===i?"id":i,a=this.getFeatures(r);return{data:{type:"FeatureCollection",features:a},options:{parser:{type:"geojson",featureId:o},transforms:e.transforms}}}},{key:"setLayerMinMaxZoom",value:function(e){"text"===e.getModelType()&&e.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1})}},{key:"getFeatures",value:function(e){var t=this.sourceTile.data;return t.getTileData(e)}},{key:"getFeatureById",value:function(e){var t=this.getMainLayer();if(!t)return[];var n=t.getSource().data.dataArray.filter((function(t){return t._id===e}));return n}}]),n}(zP);function lI(e){var t=e.type;switch(t){case"PolygonLayer":return cI;case"LineLayer":return cI;case"PointLayer":return cI;case"TileDebugLayer":return VP;case"MaskLayer":return YP;case"RasterLayer":var n=e.getSource().parser.dataType;switch(n){case Ny.RGB:case Ny.CUSTOMRGB:return QP;case Ny.ARRAYBUFFER:case Ny.CUSTOMARRAYBUFFER:return aI;case Ny.TERRAINRGB:case Ny.CUSTOMTERRAINRGB:return tI;default:return WP}default:return cI}}var fI,pI,hI,dI,vI,mI,gI=function(){function e(t){var n=this;Object(Ve["a"])(this,e),Object(Ge["a"])(this,"initedTileset",!1),Object(Ge["a"])(this,"mapchange",(function(){var e,t=n.getCurrentView(),r=t.latLonBounds,i=t.zoom;if("GAODE1.x"===n.mapService.version){var o=n.parent.getLayerConfig(),a=o.visible;i<2&&a?(n.parent.updateLayerConfig({visible:!1}),n.layerService.reRender()):i>=2&&!a&&(n.parent.updateLayerConfig({visible:!0}),n.layerService.reRender())}n.lastViewStates&&n.lastViewStates.zoom===i&&n.lastViewStates.latLonBounds.toString()===r.toString()||(n.lastViewStates={zoom:i,latLonBounds:r},null===(e=n.tilesetManager)||void 0===e||e.throttleUpdate(i,r))})),Object(Ge["a"])(this,"viewchange",Object(Ei["debounce"])(this.mapchange,24)),this.parent=t;var r=this.parent.getContainer();this.rendererService=r.get(vp.IRendererService),this.layerService=r.get(vp.ILayerService),this.mapService=r.get(vp.IMapService),this.pickingService=r.get(vp.IPickingService),this.tileLayerService=new AP({rendererService:this.rendererService,layerService:this.layerService,parent:t}),this.tilePickService=new LP({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:t}),this.parent.setLayerPickService(this.tilePickService),this.proxy(t),this.initTileSetManager()}return Object(He["a"])(e,[{key:"initTileSetManager",value:function(){var e,t=this.parent.getSource();this.tilesetManager=t.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0);var n=this.getCurrentView(),r=n.latLonBounds,i=n.zoom;null===(e=this.tilesetManager)||void 0===e||e.update(i,r)}},{key:"getCurrentView",value:function(){var e=this.mapService.getBounds(),t=[e[0][0],e[0][1],e[1][0],e[1][1]],n=this.mapService.getZoom();return{latLonBounds:t,zoom:n}}},{key:"bindTilesetEvent",value:function(){var e=this;this.tilesetManager.on("tile-loaded",(function(e){})),this.tilesetManager.on("tile-unload",(function(t){e.tileUnLoad(t)})),this.tilesetManager.on("tile-error",(function(t,n){e.tileError(t)})),this.tilesetManager.on("tile-update",(function(){e.tileUpdate()})),this.mapService.on("zoomend",this.mapchange),this.mapService.on("moveend",this.viewchange)}},{key:"render",value:function(){this.tileLayerService.render()}},{key:"getLayers",value:function(){return this.tileLayerService.getLayers()}},{key:"getTiles",value:function(){return this.tileLayerService.getTiles()}},{key:"getTile",value:function(e){return this.tileLayerService.getTile(e)}},{key:"tileLoaded",value:function(e){}},{key:"tileError",value:function(e){console.warn("error:",e)}},{key:"destroy",value:function(){var e;this.mapService.off("zoomend",this.mapchange),this.mapService.off("moveend",this.viewchange),null===(e=this.tilesetManager)||void 0===e||e.destroy(),this.tileLayerService.destroy()}},{key:"reload",value:function(){var e;this.tilesetManager.clear();var t=this.getCurrentView(),n=t.latLonBounds,r=t.zoom;null===(e=this.tilesetManager)||void 0===e||e.update(r,n)}},{key:"tileUnLoad",value:function(e){this.tileLayerService.removeTile(e.key)}},{key:"tileUpdate",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r=this;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.tilesetManager){e.next=2;break}return e.abrupt("return");case 2:return t=this.parent.getMinZoom(),n=this.parent.getMaxZoom(),e.next=6,Promise.all(this.tilesetManager.tiles.filter((function(e){return e.isLoaded})).filter((function(e){return e.isVisibleChange})).filter((function(e){return e.data})).filter((function(e){return e.z>=t&&e.z<n})).map(function(){var e=Object(ae["a"])(ue.a.mark((function e(t){var n,i;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.tileLayerService.hasTile(t.key)){e.next=9;break}return n=lI(r.parent),i=new n(t,r.parent),e.next=5,i.initTileLayer();case 5:r.tilePickService.setPickState(),0!==i.getLayers().length&&(r.tileLayerService.addTile(i),r.tileLayerService.updateTileVisible(t),r.layerService.reRender()),e.next=12;break;case 9:r.tileLayerService.updateTileVisible(t),r.tilePickService.setPickState(),r.layerService.reRender();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:this.tilesetManager.isLoaded&&this.parent.emit("tiles-loaded",this.tilesetManager.currentTiles);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setPickState",value:function(e){}},{key:"pickRender",value:function(e){this.tilePickService.pickRender(e)}},{key:"selectFeature",value:function(e){this.tilePickService.selectFeature(e)}},{key:"highlightPickedFeature",value:function(e){this.tilePickService.highlightPickedFeature(e)}},{key:"proxy",value:function(e){var t=this;DP.forEach((function(n){var r=e[n].bind(e);e[n]=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r.apply(void 0,o),t.getLayers().map((function(e){e[n].apply(e,o)})),"style"===n&&t.getTiles().forEach((function(e){return e.styleUpdate.apply(e,o)})),e}}))}}]),e}(),yI=(fI=Object(pp["injectable"])(),fI(pI=function(){function e(){Object(Ve["a"])(this,e)}return Object(He["a"])(e,[{key:"build",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.prepareBuildModel(),e.next=3,t.buildModels();case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"initLayerModel",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.build(t);case 2:t.styleNeedUpdate=!1;case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"prepareLayerModel",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.build(t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"apply",value:function(e){var t=this;e.hooks.init.tapPromise("LayerModelPlugin",Object(ae["a"])(ue.a.mark((function n(){return ue.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.getSource().isTile){n.next=4;break}return e.prepareBuildModel(),e.tileLayer=new gI(e),n.abrupt("return");case 4:return e.log(Dy.BuildModelStart,yh.INIT),n.next=7,t.initLayerModel(e);case 7:e.log(Dy.BuildModelEnd,yh.INIT);case 8:case"end":return n.stop()}}),n)})))),e.hooks.beforeRenderData.tapPromise("LayerModelPlugin",function(){var n=Object(ae["a"])(ue.a.mark((function n(r){return ue.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r){n.next=2;break}return n.abrupt("return",!1);case 2:if(!e.getSource().isTile){n.next=5;break}return e.tileLayer=new gI(e),n.abrupt("return",!1);case 5:return e.log(Dy.BuildModelStart,yh.UPDATE),n.next=8,t.prepareLayerModel(e);case 8:return e.log(Dy.BuildModelEnd,yh.UPDATE),n.abrupt("return",!0);case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}}]),e}())||pI),bI=(hI=Object(pp["injectable"])(),hI(dI=function(){function e(){Object(Ve["a"])(this,e)}return Object(He["a"])(e,[{key:"apply",value:function(e){e.hooks.afterInit.tap("LayerStylePlugin",(function(){var t=e.getLayerConfig(),n=t.autoFit,r=t.fitBoundsOptions;n&&e.fitBounds(r)}))}}]),e}())||dI),_I=["type"],xI={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},wI={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},OI={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},EI={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function SI(e){var t={u_DirectionalLights:new Array(3).fill(Object(N["a"])({},OI)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill(Object(N["a"])({},EI)),u_NumOfSpotLights:0};return e&&e.length||(e=[wI]),e.forEach((function(e){var n=e.type,r=void 0===n?"directional":n,i=Object(Cv["a"])(e,_I),o=xI[r].lights,a=xI[r].num,s=t[a];t[o][s]=Object(N["a"])(Object(N["a"])({},t[o][s]),i),t[a]++})),t}var jI,AI,kI,CI,TI,MI,PI=(vI=Object(pp["injectable"])(),vI(mI=function(){function e(){Object(Ve["a"])(this,e)}return Object(He["a"])(e,[{key:"apply",value:function(e){e.hooks.beforeRender.tap("LightingPlugin",(function(){var t=e.getLayerConfig(),n=t.enableLighting;n&&e.models.forEach((function(e){return e.addUniforms(Object(N["a"])({},SI()))}))}))}}]),e}())||mI),II=(jI=Object(pp["injectable"])(),jI(AI=function(){function e(){Object(Ve["a"])(this,e)}return Object(He["a"])(e,[{key:"apply",value:function(e,t){var n=this,r=t.rendererService,i=t.postProcessingPassFactory,o=t.normalPassFactory;e.hooks.init.tapPromise("MultiPassRendererPlugin",(function(){var t=e.getLayerConfig(),r=t.enableMultiPassRenderer,a=t.passes,s=void 0===a?[]:a;n.enabled=!!r&&!1!==e.getLayerConfig().enableMultiPassRenderer,n.enabled&&(e.multiPassRenderer=fx(e,s,i,o),e.multiPassRenderer.setRenderFlag(!0))})),e.hooks.beforeRender.tap("MultiPassRendererPlugin",(function(){if(n.enabled){var t=r.getViewportSize(),i=t.width,o=t.height;e.multiPassRenderer.resize(i,o)}}))}}]),e}())||AI),RI={NONE:0,ENCODE:1,HIGHLIGHT:2},LI=(kI=Object(pp["injectable"])(),kI(CI=function(){function e(){Object(Ve["a"])(this,e)}return Object(He["a"])(e,[{key:"apply",value:function(e,t){var n=t.styleAttributeService;e.hooks.init.tapPromise("PixelPickingPlugin",(function(){var t=e.getLayerConfig(),r=t.enablePicking;n.registerStyleAttribute({name:"pickingColor",type:Ry.Attribute,descriptor:{name:"a_PickingColor",buffer:{data:[],type:ad.FLOAT},size:3,update:function(e){var t=e.id;return r?hi(t):[0,0,0]}}})})),e.hooks.beforePickingEncode.tap("PixelPickingPlugin",(function(){var t=e.getLayerConfig(),n=t.enablePicking;n&&e.isVisible()&&e.models.forEach((function(e){return e.addUniforms({u_PickingStage:RI.ENCODE})}))})),e.hooks.afterPickingEncode.tap("PixelPickingPlugin",(function(){var t=e.getLayerConfig(),n=t.enablePicking;n&&e.isVisible()&&e.models.forEach((function(e){return e.addUniforms({u_PickingStage:RI.HIGHLIGHT})}))})),e.hooks.beforeHighlight.tap("PixelPickingPlugin",(function(t){var n=e.getLayerConfig(),r=n.highlightColor,i=n.activeMix,o=void 0===i?0:i,a="string"===typeof r?fi(r):r||[1,0,0,1];e.updateLayerConfig({pickedFeatureID:pi(new Uint8Array(t))}),e.models.forEach((function(e){return e.addUniforms({u_PickingStage:RI.HIGHLIGHT,u_PickingColor:t,u_HighlightColor:a.map((function(e){return 255*e})),u_activeMix:o})}))})),e.hooks.beforeSelect.tap("PixelPickingPlugin",(function(t){var n=e.getLayerConfig(),r=n.selectColor,i=n.selectMix,o=void 0===i?0:i,a="string"===typeof r?fi(r):r||[1,0,0,1];e.updateLayerConfig({pickedFeatureID:pi(new Uint8Array(t))}),e.models.forEach((function(e){return e.addUniforms({u_PickingStage:RI.HIGHLIGHT,u_PickingColor:t,u_HighlightColor:a.map((function(e){return 255*e})),u_activeMix:o,u_CurrentSelectedId:t,u_SelectColor:a.map((function(e){return 255*e})),u_EnableSelect:1})}))}))}}]),e}())||CI),DI=["mvt","geojsonvt","testTile"];function NI(e){var t=e.getSource();return DI.includes(t.parser.type)}var FI,zI,BI,UI,VI,HI,GI,WI,qI,ZI,YI,XI,KI,$I,QI,JI=(TI=Object(pp["injectable"])(),TI(MI=function(){function e(){Object(Ve["a"])(this,e)}return Object(He["a"])(e,[{key:"apply",value:function(e,t){var n=this,r=t.styleAttributeService;e.hooks.init.tapPromise("RegisterStyleAttributePlugin",(function(){NI(e)||n.registerBuiltinAttributes(r,e)}))}},{key:"registerBuiltinAttributes",value:function(e,t){"MaskLayer"!==t.type?(this.registerPositionAttribute(e),this.registerColorAttribute(e),this.registerVertexIdAttribute(e)):this.registerPositionAttribute(e)}},{key:"registerPositionAttribute",value:function(e){e.registerStyleAttribute({name:"position",type:Ry.Attribute,descriptor:{name:"a_Position",buffer:{data:[],type:ad.FLOAT},size:3,update:function(e,t,n){return 2===n.length?[n[0],n[1],0]:[n[0],n[1],n[2]]}}})}},{key:"registerFilterAttribute",value:function(e){e.registerStyleAttribute({name:"filter",type:Ry.Attribute,descriptor:{name:"filter",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e){var t=e.filter;return t?[1]:[0]}}})}},{key:"registerColorAttribute",value:function(e){e.registerStyleAttribute({name:"color",type:Ry.Attribute,descriptor:{name:"a_Color",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:4,update:function(e){var t=e.color;return t&&t.length?t:[1,1,1,1]}}})}},{key:"registerVertexIdAttribute",value:function(e){e.registerStyleAttribute({name:"vertexId",type:Ry.Attribute,descriptor:{name:"a_vertexId",buffer:{usage:ad.DYNAMIC_DRAW,data:[],type:ad.FLOAT},size:1,update:function(e,t){return[t]}}})}}]),e}())||MI),eR=(FI=Object(pp["injectable"])(),zI=Object(pp["inject"])(vp.ICameraService),BI=Object(pp["inject"])(vp.ICoordinateSystemService),UI=Object(pp["inject"])(vp.IRendererService),VI=Object(pp["inject"])(vp.IMapService),FI((GI=function(){function e(){Object(Ve["a"])(this,e),Th(this,"cameraService",WI,this),Th(this,"coordinateSystemService",qI,this),Th(this,"rendererService",ZI,this),Th(this,"mapService",YI,this)}return Object(He["a"])(e,[{key:"apply",value:function(e){var t=this,n=this.mapService.version,r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],i=[0,0];e.hooks.beforeRender.tap("ShaderUniformPlugin",(function(){var o=e.getLayerConfig().tileOrigin;t.coordinateSystemService.refresh(o),"GAODE2.x"===n&&(t.setLayerCenter(e),r=t.mapService.map.customCoords.getMVPMatrix(),i=t.mapService.getCustomCoordCenter());var a=t.rendererService.getViewportSize(),s=a.width,u=a.height;e.models.forEach((function(n){var o;n.addUniforms((o={},Object(Ge["a"])(o,Ly.ProjectionMatrix,t.cameraService.getProjectionMatrix()),Object(Ge["a"])(o,Ly.ViewMatrix,t.cameraService.getViewMatrix()),Object(Ge["a"])(o,Ly.ViewProjectionMatrix,t.cameraService.getViewProjectionMatrix()),Object(Ge["a"])(o,Ly.Zoom,t.cameraService.getZoom()),Object(Ge["a"])(o,Ly.ZoomScale,t.cameraService.getZoomScale()),Object(Ge["a"])(o,Ly.FocalDistance,t.cameraService.getFocalDistance()),Object(Ge["a"])(o,Ly.CameraPosition,t.cameraService.getCameraPosition()),Object(Ge["a"])(o,Gh.CoordinateSystem,t.coordinateSystemService.getCoordinateSystem()),Object(Ge["a"])(o,Gh.ViewportCenter,t.coordinateSystemService.getViewportCenter()),Object(Ge["a"])(o,Gh.ViewportCenterProjection,t.coordinateSystemService.getViewportCenterProjection()),Object(Ge["a"])(o,Gh.PixelsPerDegree,t.coordinateSystemService.getPixelsPerDegree()),Object(Ge["a"])(o,Gh.PixelsPerDegree2,t.coordinateSystemService.getPixelsPerDegree2()),Object(Ge["a"])(o,Gh.PixelsPerMeter,t.coordinateSystemService.getPixelsPerMeter()),Object(Ge["a"])(o,Gh.Mvp,r),Object(Ge["a"])(o,"u_SceneCenterMKT",i),Object(Ge["a"])(o,"u_ViewportSize",[s,u]),Object(Ge["a"])(o,"u_ModelMatrix",t.cameraService.getModelMatrix()),Object(Ge["a"])(o,"u_DevicePixelRatio",dr.devicePixelRatio),Object(Ge["a"])(o,"u_PickingBuffer",e.getLayerConfig().pickingBuffer||0),Object(Ge["a"])(o,"u_shaderPick",Number(e.getShaderPickStat())),o))}))}))}},{key:"setLayerCenter",value:function(e){void 0===e.coordCenter&&(e.coordCenter=e.getSource().center),this.mapService.setCoordCenter&&this.mapService.setCoordCenter(e.coordCenter)}}]),e}(),WI=Mh(GI.prototype,"cameraService",[zI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qI=Mh(GI.prototype,"coordinateSystemService",[BI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ZI=Mh(GI.prototype,"rendererService",[UI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),YI=Mh(GI.prototype,"mapService",[VI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),HI=GI))||HI),tR=(XI=Object(pp["injectable"])(),XI(KI=function(){function e(){Object(Ve["a"])(this,e)}return Object(He["a"])(e,[{key:"apply",value:function(e){e.hooks.beforeRender.tap("UpdateModelPlugin",(function(){e.layerModel&&e.layerModel.needUpdate().then((function(t){t&&e.renderLayers()}))})),e.hooks.afterRender.tap("UpdateModelPlugin",(function(){e.layerModelNeedUpdate=!1}))}}]),e}())||KI),nR=($I=Object(pp["injectable"])(),$I(QI=function(){function e(){Object(Ve["a"])(this,e)}return Object(He["a"])(e,[{key:"apply",value:function(e,t){var n=this,r=t.styleAttributeService;e.hooks.init.tapPromise("UpdateStyleAttributePlugin",(function(){n.initStyleAttribute(e,{styleAttributeService:r})})),e.hooks.beforeRender.tap("UpdateStyleAttributePlugin",(function(){e.layerModelNeedUpdate||e.inited&&n.updateStyleAttribute(e,{styleAttributeService:r})}))}},{key:"updateStyleAttribute",value:function(e,t){var n=t.styleAttributeService,r=n.getLayerStyleAttributes()||[],i=n.getLayerStyleAttribute("filter");if(i&&i.needRegenerateVertices)return e.layerModelNeedUpdate=!0,void r.forEach((function(e){return e.needRegenerateVertices=!1}));r.filter((function(e){return e.needRegenerateVertices})).forEach((function(t){n.updateAttributeByFeatureRange(t.name,e.getEncodedData(),t.featureRange.startIndex,t.featureRange.endIndex,e),t.needRegenerateVertices=!1}))}},{key:"initStyleAttribute",value:function(e,t){var n=t.styleAttributeService,r=n.getLayerStyleAttributes()||[];r.filter((function(e){return e.needRegenerateVertices})).forEach((function(t){n.updateAttributeByFeatureRange(t.name,e.getEncodedData(),t.featureRange.startIndex,t.featureRange.endIndex),t.needRegenerateVertices=!1}))}}]),e}())||QI);ky.bind(vp.ILayerPlugin).to(IA).inRequestScope(),ky.bind(vp.ILayerPlugin).to(JI).inRequestScope(),ky.bind(vp.ILayerPlugin).to(EP).inRequestScope(),ky.bind(vp.ILayerPlugin).to(PA).inRequestScope(),ky.bind(vp.ILayerPlugin).to(bI).inRequestScope(),ky.bind(vp.ILayerPlugin).to(jP).inRequestScope(),ky.bind(vp.ILayerPlugin).to(nR).inRequestScope(),ky.bind(vp.ILayerPlugin).to(tR).inRequestScope(),ky.bind(vp.ILayerPlugin).to(II).inRequestScope(),ky.bind(vp.ILayerPlugin).to(eR).inRequestScope(),ky.bind(vp.ILayerPlugin).to(SP).inRequestScope(),ky.bind(vp.ILayerPlugin).to(PI).inRequestScope(),ky.bind(vp.ILayerPlugin).to(LI).inRequestScope(),ky.bind(vp.ILayerPlugin).to(yI).inRequestScope();var rR,iR,oR,aR,sR,uR,cR,lR,fR,pR,hR,dR,vR,mR,gR,yR,bR=n("SUU4"),_R=n.n(bR),xR=function(){function e(t,n){Object(Ve["a"])(this,e);var r=n.buffer,i=n.offset,o=n.stride,a=n.normalized,s=n.size,u=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:i||0,stride:o||0,normalized:a||!1,divisor:u||0},s&&(this.attribute.size=s)}return Object(He["a"])(e,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(e){this.buffer.subData(e)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),wR=(rR={},Object(Ge["a"])(rR,ad.POINTS,"points"),Object(Ge["a"])(rR,ad.LINES,"lines"),Object(Ge["a"])(rR,ad.LINE_LOOP,"line loop"),Object(Ge["a"])(rR,ad.LINE_STRIP,"line strip"),Object(Ge["a"])(rR,ad.TRIANGLES,"triangles"),Object(Ge["a"])(rR,ad.TRIANGLE_FAN,"triangle fan"),Object(Ge["a"])(rR,ad.TRIANGLE_STRIP,"triangle strip"),rR),OR=(iR={},Object(Ge["a"])(iR,ad.STATIC_DRAW,"static"),Object(Ge["a"])(iR,ad.DYNAMIC_DRAW,"dynamic"),Object(Ge["a"])(iR,ad.STREAM_DRAW,"stream"),iR),ER=(oR={},Object(Ge["a"])(oR,ad.BYTE,"int8"),Object(Ge["a"])(oR,ad.UNSIGNED_INT,"int16"),Object(Ge["a"])(oR,ad.INT,"int32"),Object(Ge["a"])(oR,ad.UNSIGNED_BYTE,"uint8"),Object(Ge["a"])(oR,ad.UNSIGNED_SHORT,"uint16"),Object(Ge["a"])(oR,ad.UNSIGNED_INT,"uint32"),Object(Ge["a"])(oR,ad.FLOAT,"float"),oR),SR=(aR={},Object(Ge["a"])(aR,ad.ALPHA,"alpha"),Object(Ge["a"])(aR,ad.LUMINANCE,"luminance"),Object(Ge["a"])(aR,ad.LUMINANCE_ALPHA,"luminance alpha"),Object(Ge["a"])(aR,ad.RGB,"rgb"),Object(Ge["a"])(aR,ad.RGBA,"rgba"),Object(Ge["a"])(aR,ad.RGBA4,"rgba4"),Object(Ge["a"])(aR,ad.RGB5_A1,"rgb5 a1"),Object(Ge["a"])(aR,ad.RGB565,"rgb565"),Object(Ge["a"])(aR,ad.DEPTH_COMPONENT,"depth"),Object(Ge["a"])(aR,ad.DEPTH_STENCIL,"depth stencil"),aR),jR=(sR={},Object(Ge["a"])(sR,ad.DONT_CARE,"dont care"),Object(Ge["a"])(sR,ad.NICEST,"nice"),Object(Ge["a"])(sR,ad.FASTEST,"fast"),sR),AR=(uR={},Object(Ge["a"])(uR,ad.NEAREST,"nearest"),Object(Ge["a"])(uR,ad.LINEAR,"linear"),Object(Ge["a"])(uR,ad.LINEAR_MIPMAP_LINEAR,"mipmap"),Object(Ge["a"])(uR,ad.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),Object(Ge["a"])(uR,ad.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),Object(Ge["a"])(uR,ad.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),uR),kR=(cR={},Object(Ge["a"])(cR,ad.REPEAT,"repeat"),Object(Ge["a"])(cR,ad.CLAMP_TO_EDGE,"clamp"),Object(Ge["a"])(cR,ad.MIRRORED_REPEAT,"mirror"),cR),CR=(lR={},Object(Ge["a"])(lR,ad.NONE,"none"),Object(Ge["a"])(lR,ad.BROWSER_DEFAULT_WEBGL,"browser"),lR),TR=(fR={},Object(Ge["a"])(fR,ad.NEVER,"never"),Object(Ge["a"])(fR,ad.ALWAYS,"always"),Object(Ge["a"])(fR,ad.LESS,"less"),Object(Ge["a"])(fR,ad.LEQUAL,"lequal"),Object(Ge["a"])(fR,ad.GREATER,"greater"),Object(Ge["a"])(fR,ad.GEQUAL,"gequal"),Object(Ge["a"])(fR,ad.EQUAL,"equal"),Object(Ge["a"])(fR,ad.NOTEQUAL,"notequal"),fR),MR=(pR={},Object(Ge["a"])(pR,ad.FUNC_ADD,"add"),Object(Ge["a"])(pR,ad.MIN_EXT,"min"),Object(Ge["a"])(pR,ad.MAX_EXT,"max"),Object(Ge["a"])(pR,ad.FUNC_SUBTRACT,"subtract"),Object(Ge["a"])(pR,ad.FUNC_REVERSE_SUBTRACT,"reverse subtract"),pR),PR=(hR={},Object(Ge["a"])(hR,ad.ZERO,"zero"),Object(Ge["a"])(hR,ad.ONE,"one"),Object(Ge["a"])(hR,ad.SRC_COLOR,"src color"),Object(Ge["a"])(hR,ad.ONE_MINUS_SRC_COLOR,"one minus src color"),Object(Ge["a"])(hR,ad.SRC_ALPHA,"src alpha"),Object(Ge["a"])(hR,ad.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),Object(Ge["a"])(hR,ad.DST_COLOR,"dst color"),Object(Ge["a"])(hR,ad.ONE_MINUS_DST_COLOR,"one minus dst color"),Object(Ge["a"])(hR,ad.DST_ALPHA,"dst alpha"),Object(Ge["a"])(hR,ad.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),Object(Ge["a"])(hR,ad.CONSTANT_COLOR,"constant color"),Object(Ge["a"])(hR,ad.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),Object(Ge["a"])(hR,ad.CONSTANT_ALPHA,"constant alpha"),Object(Ge["a"])(hR,ad.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),Object(Ge["a"])(hR,ad.SRC_ALPHA_SATURATE,"src alpha saturate"),hR),IR=(dR={},Object(Ge["a"])(dR,ad.NEVER,"never"),Object(Ge["a"])(dR,ad.ALWAYS,"always"),Object(Ge["a"])(dR,ad.LESS,"less"),Object(Ge["a"])(dR,ad.LEQUAL,"lequal"),Object(Ge["a"])(dR,ad.GREATER,"greater"),Object(Ge["a"])(dR,ad.GEQUAL,"gequal"),Object(Ge["a"])(dR,ad.EQUAL,"equal"),Object(Ge["a"])(dR,ad.NOTEQUAL,"notequal"),dR),RR=(vR={},Object(Ge["a"])(vR,ad.ZERO,"zero"),Object(Ge["a"])(vR,ad.KEEP,"keep"),Object(Ge["a"])(vR,ad.REPLACE,"replace"),Object(Ge["a"])(vR,ad.INVERT,"invert"),Object(Ge["a"])(vR,ad.INCR,"increment"),Object(Ge["a"])(vR,ad.DECR,"decrement"),Object(Ge["a"])(vR,ad.INCR_WRAP,"increment wrap"),Object(Ge["a"])(vR,ad.DECR_WRAP,"decrement wrap"),vR),LR=(mR={},Object(Ge["a"])(mR,ad.FRONT,"front"),Object(Ge["a"])(mR,ad.BACK,"back"),mR),DR=function(){function e(t,n){Object(Ve["a"])(this,e);var r=n.data,i=n.usage,o=n.type;this.buffer=t.buffer({data:r,usage:OR[i||ad.STATIC_DRAW],type:ER[o||ad.UNSIGNED_BYTE]})}return Object(He["a"])(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(e){var t=e.data,n=e.offset;this.buffer.subdata(t,n)}}]),e}(),NR=function(){function e(t,n){Object(Ve["a"])(this,e);var r=n.data,i=n.usage,o=n.type,a=n.count;this.elements=t.elements({data:r,usage:OR[i||ad.STATIC_DRAW],type:ER[o||ad.UNSIGNED_BYTE],count:a})}return Object(He["a"])(e,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(e){var t=e.data;this.elements.subdata(t)}},{key:"destroy",value:function(){}}]),e}(),FR=function(){function e(t,n){Object(Ve["a"])(this,e);var r=n.width,i=n.height,o=n.color,a=n.colors,s={width:r,height:i};Array.isArray(a)&&(s.colors=a.map((function(e){return e.get()}))),o&&"boolean"!==typeof o&&(s.color=o.get()),this.framebuffer=t.framebuffer(s)}return Object(He["a"])(e,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(e){var t=e.width,n=e.height;this.framebuffer.resize(t,n)}}]),e}(),zR=function(){function e(t,n){Object(Ve["a"])(this,e),Object(Ge["a"])(this,"destroyed",!1),Object(Ge["a"])(this,"uniforms",{}),this.reGl=t;var r=n.vs,i=n.fs,o=n.attributes,a=n.uniforms,s=n.primitive,u=n.count,c=n.elements,l=n.depth,f=n.cull,p=n.instances,h={};this.options=n,a&&(this.uniforms=this.extractUniforms(a),Object.keys(a).forEach((function(e){h[e]=t.prop(e)})));var d={};Object.keys(o).forEach((function(e){d[e]=o[e].get()}));var v={attributes:d,frag:i,uniforms:h,vert:r,colorMask:t.prop("colorMask"),blend:{enable:t.prop("blend.enable"),func:t.prop("blend.func"),equation:t.prop("blend.equation"),color:t.prop("blend.color")},stencil:{enable:t.prop("stencil.enable"),mask:t.prop("stencil.mask"),func:t.prop("stencil.func"),opFront:t.prop("stencil.opFront"),opBack:t.prop("stencil.opBack")},primitive:wR[void 0===s?ad.TRIANGLES:s]};p&&(v.instances=p),u?v.count=u:c&&(v.elements=c.get()),this.initDepthDrawParams({depth:l},v),this.initCullDrawParams({cull:f},v),this.drawCommand=t(v),this.drawParams=v}return Object(He["a"])(e,[{key:"updateAttributesAndElements",value:function(e,t){var n={};Object.keys(e).forEach((function(t){n[t]=e[t].get()})),this.drawParams.attributes=n,this.drawParams.elements=t.get(),this.drawCommand=this.reGl(this.drawParams)}},{key:"updateAttributes",value:function(e){var t={};Object.keys(e).forEach((function(n){t[n]=e[n].get()})),this.drawParams.attributes=t,this.drawCommand=this.reGl(this.drawParams)}},{key:"addUniforms",value:function(e){this.uniforms=Object(N["a"])(Object(N["a"])({},this.uniforms),this.extractUniforms(e))}},{key:"draw",value:function(e,t){if(!this.drawParams.attributes||0!==Object.keys(this.drawParams.attributes).length){var n=Object(N["a"])(Object(N["a"])({},this.uniforms),this.extractUniforms(e.uniforms||{})),r={};Object.keys(n).forEach((function(e){var t=Object(ne["a"])(n[e]);"boolean"===t||"number"===t||Array.isArray(n[e])||n[e].BYTES_PER_ELEMENT?r[e]=n[e]:r[e]=n[e].get()})),r.blend=t?this.getBlendDrawParams({blend:{enable:!1}}):this.getBlendDrawParams(e),r.stencil=this.getStencilDrawParams(e),r.colorMask=this.getColorMaskDrawParams(e,t),this.drawCommand(r)}}},{key:"destroy",value:function(){var e,t;null===(e=this.drawParams)||void 0===e||null===(t=e.elements)||void 0===t||t.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach((function(e){null===e||void 0===e||e.destroy()})),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(e,t){var n=e.depth;n&&(t.depth={enable:void 0===n.enable||!!n.enable,mask:void 0===n.mask||!!n.mask,func:TR[n.func||ad.LESS],range:n.range||[0,1]})}},{key:"getBlendDrawParams",value:function(e){var t=e.blend,n=t||{},r=n.enable,i=n.func,o=n.equation,a=n.color,s=void 0===a?[0,0,0,0]:a;return{enable:!!r,func:{srcRGB:PR[i&&i.srcRGB||ad.SRC_ALPHA],srcAlpha:PR[i&&i.srcAlpha||ad.SRC_ALPHA],dstRGB:PR[i&&i.dstRGB||ad.ONE_MINUS_SRC_ALPHA],dstAlpha:PR[i&&i.dstAlpha||ad.ONE_MINUS_SRC_ALPHA]},equation:{rgb:MR[o&&o.rgb||ad.FUNC_ADD],alpha:MR[o&&o.alpha||ad.FUNC_ADD]},color:s}}},{key:"getStencilDrawParams",value:function(e){var t=e.stencil,n=t||{},r=n.enable,i=n.mask,o=void 0===i?-1:i,a=n.func,s=void 0===a?{cmp:ad.ALWAYS,ref:0,mask:-1}:a,u=n.opFront,c=void 0===u?{fail:ad.KEEP,zfail:ad.KEEP,zpass:ad.KEEP}:u,l=n.opBack,f=void 0===l?{fail:ad.KEEP,zfail:ad.KEEP,zpass:ad.KEEP}:l;return{enable:!!r,mask:o,func:Object(N["a"])(Object(N["a"])({},s),{},{cmp:IR[s.cmp]}),opFront:{fail:RR[c.fail],zfail:RR[c.zfail],zpass:RR[c.zpass]},opBack:{fail:RR[f.fail],zfail:RR[f.zfail],zpass:RR[f.zpass]}}}},{key:"getColorMaskDrawParams",value:function(e,t){var n=e.stencil,r=null!==n&&void 0!==n&&n.enable&&n.opFront&&!t?[!1,!1,!1,!1]:[!0,!0,!0,!0];return r}},{key:"initCullDrawParams",value:function(e,t){var n=e.cull;if(n){var r=n.enable,i=n.face,o=void 0===i?ad.BACK:i;t.cull={enable:!!r,face:LR[o]}}}},{key:"extractUniforms",value:function(e){var t=this,n={};return Object.keys(e).forEach((function(r){t.extractUniformsRecursively(r,e[r],n,"")})),n}},{key:"extractUniformsRecursively",value:function(e,t,n,r){var i=this;null===t||"number"===typeof t||"boolean"===typeof t||Array.isArray(t)&&"number"===typeof t[0]||Object(Ei["isTypedArray"])(t)||""===t||"resize"in t?n["".concat(r&&r+".").concat(e)]=t:(Object(Ei["isPlainObject"])(t)&&Object.keys(t).forEach((function(o){i.extractUniformsRecursively(o,t[o],n,"".concat(r&&r+".").concat(e))})),Array.isArray(t)&&t.forEach((function(t,o){Object.keys(t).forEach((function(a){i.extractUniformsRecursively(a,t[a],n,"".concat(r&&r+".").concat(e,"[").concat(o,"]"))}))})))}}]),e}(),BR=function(){function e(t,n){Object(Ve["a"])(this,e),Object(Ge["a"])(this,"isDestroy",!1);var r=n.data,i=n.type,o=void 0===i?ad.UNSIGNED_BYTE:i,a=n.width,s=n.height,u=n.flipY,c=void 0!==u&&u,l=n.format,f=void 0===l?ad.RGBA:l,p=n.mipmap,h=void 0!==p&&p,d=n.wrapS,v=void 0===d?ad.CLAMP_TO_EDGE:d,m=n.wrapT,g=void 0===m?ad.CLAMP_TO_EDGE:m,y=n.aniso,b=void 0===y?0:y,_=n.alignment,x=void 0===_?1:_,w=n.premultiplyAlpha,O=void 0!==w&&w,E=n.mag,S=void 0===E?ad.NEAREST:E,j=n.min,A=void 0===j?ad.NEAREST:j,k=n.colorSpace,C=void 0===k?ad.BROWSER_DEFAULT_WEBGL:k,T=n.x,M=void 0===T?0:T,P=n.y,I=void 0===P?0:P,R=n.copy,L=void 0!==R&&R;this.width=a,this.height=s;var D={width:a,height:s,type:ER[o],format:SR[f],wrapS:kR[v],wrapT:kR[g],mag:AR[S],min:AR[A],alignment:x,flipY:c,colorSpace:CR[C],premultiplyAlpha:O,aniso:b,x:M,y:I,copy:L};r&&(D.data=r),"number"===typeof h?D.mipmap=jR[h]:"boolean"===typeof h&&(D.mipmap=h),this.texture=t.texture(D)}return Object(He["a"])(e,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.texture(e)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(e){var t=e.width,n=e.height;this.texture.resize(t,n),this.width=t,this.height=n}},{key:"getSize",value:function(){return[this.width,this.height]}},{key:"destroy",value:function(){var e;this.isDestroy||(null===(e=this.texture)||void 0===e||e.destroy());this.isDestroy=!0}}]),e}(),UR=(gR=Object(pp["injectable"])(),gR(yR=function(){function e(){var t=this;Object(Ve["a"])(this,e),Object(Ge["a"])(this,"createModel",(function(e){return new zR(t.gl,e)})),Object(Ge["a"])(this,"createAttribute",(function(e){return new xR(t.gl,e)})),Object(Ge["a"])(this,"createBuffer",(function(e){return new DR(t.gl,e)})),Object(Ge["a"])(this,"createElements",(function(e){return new NR(t.gl,e)})),Object(Ge["a"])(this,"createTexture2D",(function(e){return new BR(t.gl,e)})),Object(Ge["a"])(this,"createFramebuffer",(function(e){return new FR(t.gl,e)})),Object(Ge["a"])(this,"useFramebuffer",(function(e,n){t.gl({framebuffer:e?e.get():null})(n)})),Object(Ge["a"])(this,"clear",(function(e){var n,r=e.color,i=e.depth,o=e.stencil,a=e.framebuffer,s=void 0===a?null:a,u={color:r,depth:i,stencil:o};u.framebuffer=null===s?s:s.get(),null===(n=t.gl)||void 0===n||n.clear(u)})),Object(Ge["a"])(this,"viewport",(function(e){var n=e.x,r=e.y,i=e.width,o=e.height;t.gl._gl.viewport(n,r,i,o),t.width=i,t.height=o,t.gl._refresh()})),Object(Ge["a"])(this,"readPixels",(function(e){var n=e.framebuffer,r=e.x,i=e.y,o=e.width,a=e.height,s={x:r,y:i,width:o,height:a};return n&&(s.framebuffer=n.get()),t.gl.read(s)})),Object(Ge["a"])(this,"getViewportSize",(function(){return{width:t.gl._gl.drawingBufferWidth,height:t.gl._gl.drawingBufferHeight}})),Object(Ge["a"])(this,"getContainer",(function(){return pr?t.canvas:null===(e=t.canvas)||void 0===e?void 0:e.parentElement;var e})),Object(Ge["a"])(this,"getCanvas",(function(){return t.canvas})),Object(Ge["a"])(this,"getGLContext",(function(){return t.gl._gl})),Object(Ge["a"])(this,"destroy",(function(){var e,n,r;t.canvas=null,null===(e=t.gl)||void 0===e||null===(n=e._gl)||void 0===n||null===(r=n.getExtension("WEBGL_lose_context"))||void 0===r||r.loseContext(),t.gl.destroy(),t.gl=null}))}return Object(He["a"])(e,[{key:"init",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t,n,r){var i=this;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.canvas=t,!r){e.next=5;break}this.gl=r,e.next=8;break;case 5:return e.next=7,new Promise((function(e,t){_R()({canvas:i.canvas,attributes:{alpha:!0,antialias:n.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,stencil:n.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture","WEBGL_lose_context"],profile:!0,onDone:function(n,r){!n&&r||t(n),e(r)}})}));case 7:this.gl=e.sent;case 8:this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")};case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"getPointSizeRange",value:function(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}},{key:"testExtension",value:function(e){return!!this.getGLContext().getExtension(e)}},{key:"setState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var e=this.getGLContext();e.disable(e.CULL_FACE)}},{key:"setDirty",value:function(e){this.isDirty=e}},{key:"getDirty",value:function(){return this.isDirty}}]),e}())||yR);function VR(e){var t=HR();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function HR(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var GR,WR,qR,ZR=["selectstart","selecting","selectend"],YR=function(e){Object(et["a"])(n,e);var t=VR(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(Ve["a"])(this,n),r=t.call(this),Object(Ge["a"])(Object(gt["a"])(r),"isEnable",!1),Object(Ge["a"])(Object(gt["a"])(r),"onDragStart",(function(e){r.box.style.display="block",r.startEvent=r.endEvent=e,r.syncBoxBound(),r.emit("selectstart",r.getLngLatBox(),r.startEvent,r.endEvent)})),Object(Ge["a"])(Object(gt["a"])(r),"onDragging",(function(e){r.endEvent=e,r.syncBoxBound(),r.emit("selecting",r.getLngLatBox(),r.startEvent,r.endEvent)})),Object(Ge["a"])(Object(gt["a"])(r),"onDragEnd",(function(e){r.endEvent=e,r.box.style.display="none",r.emit("selectend",r.getLngLatBox(),r.startEvent,r.endEvent)})),r.scene=e,r.options=i,r}return Object(He["a"])(n,[{key:"container",get:function(){return this.scene.getMapService().getMarkerContainer()}},{key:"enable",value:function(){if(!this.isEnable){var e=this.options.className;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){var t=r.create("div",void 0,this.container);t.classList.add("l7-select-box"),e&&t.classList.add(e),t.style.display="none",this.box=t}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0}}},{key:"disable",value:function(){this.isEnable&&(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1)}},{key:"syncBoxBound",value:function(){var e=this.startEvent,t=e.x,n=e.y,r=this.endEvent,i=r.x,o=r.y,a=Math.min(t,i),s=Math.min(n,o),u=Math.abs(t-i),c=Math.abs(n-o);this.box.style.top="".concat(s,"px"),this.box.style.left="".concat(a,"px"),this.box.style.width="".concat(u,"px"),this.box.style.height="".concat(c,"px")}},{key:"getLngLatBox",value:function(){var e=this.startEvent.lngLat,t=e.lng,n=e.lat,r=this.endEvent.lngLat,i=r.lng,o=r.lat;return So([[t,n],[i,o]])}}]),n}(Fo["EventEmitter"]),XR=function(){function e(t){Object(Ve["a"])(this,e);var n=t.id,r=t.map,i=t.canvas,o=t.hasBaseMap,a=Ty();this.container=a,r.setContainer(a,n,i,o),a.bind(vp.IRendererService).to(UR).inSingletonScope(),this.sceneService=a.get(vp.ISceneService),this.mapService=a.get(vp.IMapService),this.iconService=a.get(vp.IIconService),this.fontService=a.get(vp.IFontService),this.controlService=a.get(vp.IControlService),this.layerService=a.get(vp.ILayerService),this.debugService=a.get(vp.IDebugService),this.debugService.setEnable(t.debug),this.markerService=a.get(vp.IMarkerService),this.interactionService=a.get(vp.IInteractionService),this.popupService=a.get(vp.IPopupService),this.boxSelect=new YR(this,{}),cr((null===t||void 0===t?void 0:t.isMini)||!1),pr?this.sceneService.initMiniScene(t):(this.initComponent(n),this.sceneService.init(t),this.initControl())}return Object(He["a"])(e,[{key:"map",get:function(){return this.mapService.map}},{key:"loaded",get:function(){return this.sceneService.loaded}},{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"getDebugService",value:function(){return this.debugService}},{key:"exportPng",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.sceneService.exportPng(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"exportMap",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.sceneService.exportPng(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"registerRenderService",value:function(e){var t=this;if(this.sceneService.loaded){var n=new e(this);n.init()}else this.on("loaded",(function(){var n=new e(t);n.init()}))}},{key:"setBgColor",value:function(e){this.mapService.setBgColor(e)}},{key:"addLayer",value:function(e){var t=this,n=My(this.container);if(e.setContainer(n,this.container),this.sceneService.addLayer(e),e.inited){var r=this.initMask(e);this.addMask(r,e.id)}else e.on("inited",(function(){var n=t.initMask(e);t.addMask(n,e.id)}))}},{key:"initMask",value:function(e){var t=e.getLayerConfig(),n=t.mask,r=t.maskfence,i=t.maskColor,o=void 0===i?"#000":i,a=t.maskOpacity,s=void 0===a?0:a;if(n&&r){var u=(new MA).source(r).shape("fill").style({color:o,opacity:s});return u}}},{key:"addMask",value:function(e,t){if(e){var n=this.getLayer(t);if(n){var r=My(this.container);e.setContainer(r,this.container),n.addMaskLayer(e),this.sceneService.addMask(e)}else console.warn("parent layer not find!")}}},{key:"getPickedLayer",value:function(){return this.layerService.pickedLayerId}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(e){return this.layerService.getLayer(e)}},{key:"getLayerByName",value:function(e){return this.layerService.getLayerByName(e)}},{key:"removeLayer",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t,n){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.layerService.remove(t,n);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"removeAllLayer",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.layerService.removeAllLayers();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"render",value:function(){this.sceneService.render()}},{key:"setEnableRender",value:function(e){this.layerService.setEnableRender(e)}},{key:"addIconFont",value:function(e,t){this.fontService.addIconFont(e,t)}},{key:"addIconFonts",value:function(e){var t=this;e.forEach((function(e){var n=Object(Oi["a"])(e,2),r=n[0],i=n[1];t.fontService.addIconFont(r,i)}))}},{key:"addFontFace",value:function(e,t){var n=this;this.fontService.once("fontloaded",(function(e){n.emit("fontloaded",e)})),this.fontService.addFontFace(e,t)}},{key:"addImage",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(t,n){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(pr){e.next=5;break}return e.next=3,this.iconService.addImage(t,n);case 3:e.next=6;break;case 5:this.iconService.addImageMini(t,n,this.sceneService);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"hasImage",value:function(e){return this.iconService.hasImage(e)}},{key:"removeImage",value:function(e){this.iconService.removeImage(e)}},{key:"addIconFontGlyphs",value:function(e,t){this.fontService.addIconGlyphs(t)}},{key:"addControl",value:function(e){this.controlService.addControl(e,this.container)}},{key:"removeControl",value:function(e){this.controlService.removeControl(e)}},{key:"getControlByName",value:function(e){return this.controlService.getControlByName(e)}},{key:"addMarker",value:function(e){this.markerService.addMarker(e)}},{key:"addMarkerLayer",value:function(e){this.markerService.addMarkerLayer(e)}},{key:"removeMarkerLayer",value:function(e){this.markerService.removeMarkerLayer(e)}},{key:"removeAllMakers",value:function(){this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(e){this.popupService.addPopup(e)}},{key:"removePopup",value:function(e){this.popupService.removePopup(e)}},{key:"on",value:function(e,t){var n;ZR.includes(e)?null===(n=this.boxSelect)||void 0===n||n.on(e,t):zy.includes(e)?this.sceneService.on(e,t):this.mapService.on(e,t)}},{key:"once",value:function(e,t){var n;ZR.includes(e)?null===(n=this.boxSelect)||void 0===n||n.once(e,t):zy.includes(e)?this.sceneService.once(e,t):this.mapService.once(e,t)}},{key:"emit",value:function(e,t){-1===zy.indexOf(e)?this.mapService.on(e,t):this.sceneService.emit(e,t)}},{key:"off",value:function(e,t){var n;ZR.includes(e)?null===(n=this.boxSelect)||void 0===n||n.off(e,t):zy.includes(e)?this.sceneService.off(e,t):this.mapService.off(e,t)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(e){return this.mapService.getCenter(e)}},{key:"setCenter",value:function(e,t){return this.mapService.setCenter(e,t)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(e){return this.mapService.setPitch(e)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(e){this.mapService.setRotation(e)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(e){this.mapService.panTo(e)}},{key:"panBy",value:function(e,t){this.mapService.panBy(e,t)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(e){this.mapService.setZoom(e)}},{key:"fitBounds",value:function(e,t){var n=this.sceneService.getSceneConfig(),r=n.fitBoundsOptions,i=n.animate;this.mapService.fitBounds(e,t||Object(N["a"])(Object(N["a"])({},r),{},{animate:i}))}},{key:"setZoomAndCenter",value:function(e,t){this.mapService.setZoomAndCenter(e,t)}},{key:"setMapStyle",value:function(e){this.mapService.setMapStyle(e)}},{key:"setMapStatus",value:function(e){this.mapService.setMapStatus(e)}},{key:"pixelToLngLat",value:function(e){return this.mapService.pixelToLngLat(e)}},{key:"lngLatToPixel",value:function(e){return this.mapService.lngLatToPixel(e)}},{key:"containerToLngLat",value:function(e){return this.mapService.containerToLngLat(e)}},{key:"lngLatToContainer",value:function(e){return this.mapService.lngLatToContainer(e)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(e,t){this.container.bind(vp.IPostProcessingPass).to(e).whenTargetNamed(t)}},{key:"enableShaderPick",value:function(){this.layerService.enableShaderPick()}},{key:"diasbleShaderPick",value:function(){this.layerService.disableShaderPick()}},{key:"enableBoxSelect",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.boxSelect.enable(),t&&this.boxSelect.once("selectend",(function(){e.disableBoxSelect()}))}},{key:"disableBoxSelect",value:function(){this.boxSelect.disable()}},{key:"getPointSizeRange",value:function(){return this.sceneService.getPointSizeRange()}},{key:"initComponent",value:function(e){this.controlService.init({container:r.getContainer(e)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var e=this.sceneService.getSceneConfig(),t=e.logoVisible,n=e.logoPosition;t&&this.addControl(new T_({position:n}))}}]),e}(),KR=(GR=Ay(vp.IGlobalConfigService),WR=function(){function e(t){Object(Ve["a"])(this,e),Th(this,"configService",qR,this),this.config=t}return Object(He["a"])(e,[{key:"setContainer",value:function(e,t,n,r){e.bind(vp.MapConfig).toConstantValue(Object(N["a"])(Object(N["a"])({},this.config),{},{id:t,canvas:n,hasBaseMap:r})),e.bind(vp.IMapService).to(this.getServiceConstructor()).inSingletonScope()}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),e}(),qR=Mh(WR.prototype,"configService",[GR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),WR),$R=n("hi0z"),QR=n.n($R),JR=function(){function e(t){Object(Ve["a"])(this,e),Object(Ge["a"])(this,"size",1e4),this.size=t||1e4}return Object(He["a"])(e,[{key:"setSize",value:function(e){this.size=e}},{key:"getSize",value:function(){return[this.size,this.size]}},{key:"mercatorXfromLng",value:function(e){return(180+e)/360*this.size}},{key:"mercatorYfromLat",value:function(e){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360)*this.size}},{key:"lngFromMercatorX",value:function(e){return e/this.size*360-180}},{key:"latFromMercatorY",value:function(e){var t=180-360*(1-e/this.size);return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90}},{key:"project",value:function(e){var t=this.mercatorXfromLng(e[0]),n=this.mercatorYfromLat(e[1]);return[t,n]}},{key:"unproject",value:function(e){var t=this.lngFromMercatorX(e[0]),n=this.latFromMercatorY(e[1]);return[t,n]}}]),e}();function eL(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={top:0,right:0,bottom:0,left:0};if("number"===typeof e)return{top:e,right:e,bottom:e,left:e};if(Array.isArray(e)){if(4===e.length)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(2===e.length)return{top:e[0],right:e[1],bottom:e[0],left:e[1]}}return Object(N["a"])(Object(N["a"])({},t),e)}function tL(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function nL(e,t){var n=Xl([],t,e);return Dl(n,n,1/n[3]),n}function rL(e,t){if(!e)throw new Error(t||"viewport-mercator-project: assertion failed.")}var iL=Math.PI,oL=iL/4,aL=iL/180,sL=180/iL,uL=512,cL=4003e4,lL=1.5;function fL(e){return Math.pow(2,e)}function pL(e,t){var n=Object(Oi["a"])(e,2),r=n[0],i=n[1];rL(Number.isFinite(r)&&Number.isFinite(t)),rL(Number.isFinite(i)&&i>=-90&&i<=90,"invalid latitude"),t*=uL;var o=r*aL,a=i*aL,s=t*(o+iL)/(2*iL),u=t*(iL-Math.log(Math.tan(oL+.5*a)))/(2*iL);return[s,u]}function hL(e,t){var n=Object(Oi["a"])(e,2),r=n[0],i=n[1];t*=uL;var o=r/t*(2*iL)-iL,a=2*(Math.atan(Math.exp(iL-i/t*(2*iL)))-oL);return[o*sL,a*sL]}function dL(e){var t=e.latitude,n=e.longitude,r=e.zoom,i=e.scale,o=e.highPrecision,a=void 0!==o&&o;i=void 0!==i?i:fL(r),rL(Number.isFinite(t)&&Number.isFinite(n)&&Number.isFinite(i));var s={},u=uL*i,c=Math.cos(t*aL),l=u/360,f=l/c,p=u/cL/c;if(s.pixelsPerMeter=[p,-p,p],s.metersPerPixel=[1/p,-1/p,1/p],s.pixelsPerDegree=[l,-f,p],s.degreesPerPixel=[1/l,-1/f,1/p],a){var h=aL*Math.tan(t*aL)/c,d=l*h/2,v=u/cL*h,m=v/f*p;s.pixelsPerDegree2=[0,-d,v],s.pixelsPerMeter2=[m,0,m]}return s}function vL(e){var t=e.height,n=e.pitch,r=e.bearing,i=e.altitude,o=e.center,a=void 0===o?null:o,s=e.flipY,u=void 0!==s&&s,c=tL();return $s(c,c,[0,0,-i]),Qs(c,c,[1,1,1/t]),eu(c,c,-n*aL),nu(c,c,r*aL),u&&Qs(c,c,[1,-1,1]),a&&$s(c,c,Yc([],a)),c}function mL(e){var t=e.width,n=e.height,r=e.altitude,i=void 0===r?lL:r,o=e.pitch,a=void 0===o?0:o,s=e.nearZMultiplier,u=void 0===s?1:s,c=e.farZMultiplier,l=void 0===c?1:c,f=a*aL,p=Math.atan(.5/i),h=Math.sin(p)*i/Math.sin(Math.PI/2-f-p),d=Math.cos(Math.PI/2-f)*h+i;return{fov:2*Math.atan(n/2/i),aspect:t/n,focalDistance:i,near:u,far:d*l}}function gL(e){var t=e.width,n=e.height,r=e.pitch,i=e.altitude,o=e.nearZMultiplier,a=e.farZMultiplier,s=mL({width:t,height:n,altitude:i,pitch:r,nearZMultiplier:o,farZMultiplier:a}),u=s.fov,c=s.aspect,l=s.near,f=s.far,p=bu([],u,c,l,f);return p}function yL(e,t){var n=Object(Oi["a"])(e,3),r=n[0],i=n[1],o=n[2],a=void 0===o?0:o;return rL(Number.isFinite(r)&&Number.isFinite(i)&&Number.isFinite(a)),nL(t,[r,i,a,1])}function bL(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Object(Oi["a"])(e,3),i=r[0],o=r[1],a=r[2];if(rL(Number.isFinite(i)&&Number.isFinite(o),"invalid pixel coordinate"),Number.isFinite(a)){var s=nL(t,[i,o,a,1]);return s}var u=nL(t,[i,o,0,1]),c=nL(t,[i,o,1,1]),l=u[2],f=c[2],p=l===f?0:((n||0)-l)/(f-l);return uc([],u,c,p)}var _L=tL(),xL=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width,r=t.height,i=t.viewMatrix,o=void 0===i?_L:i,a=t.projectionMatrix,s=void 0===a?_L:a;Object(Ve["a"])(this,e),this.width=n||1,this.height=r||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=o,this.projectionMatrix=s;var u=tL();Ks(u,u,this.projectionMatrix),Ks(u,u,this.viewMatrix),this.viewProjectionMatrix=u;var c=tL();Qs(c,c,[this.width/2,-this.height/2,1]),$s(c,c,[1,-1,0]),Ks(c,c,this.viewProjectionMatrix);var l=Zs(tL(),c);if(!l)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=c,this.pixelUnprojectionMatrix=l,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(He["a"])(e,[{key:"equals",value:function(t){return t instanceof e&&(t.width===this.width&&t.height===this.height&&Ru(t.projectionMatrix,this.projectionMatrix)&&Ru(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=this.projectPosition(e),o=yL(i,this.pixelProjectionMatrix),a=Object(Oi["a"])(o,2),s=a[0],u=a[1],c=r?u:this.height-u;return 2===e.length?[s,c]:[s,c,o[2]]}},{key:"unproject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=t.targetZ,o=Object(Oi["a"])(e,3),a=o[0],s=o[1],u=o[2],c=r?s:this.height-s,l=i&&i*this.pixelsPerMeter,f=bL([a,c,u],this.pixelUnprojectionMatrix,l),p=this.unprojectPosition(f),h=Object(Oi["a"])(p,3),d=h[0],v=h[1],m=h[2];return Number.isFinite(u)?[d,v,m]:Number.isFinite(i)?[d,v,i]:[d,v]}},{key:"projectPosition",value:function(e){var t=this.projectFlat(e),n=Object(Oi["a"])(t,2),r=n[0],i=n[1],o=(e[2]||0)*this.pixelsPerMeter;return[r,i,o]}},{key:"unprojectPosition",value:function(e){var t=this.unprojectFlat(e),n=Object(Oi["a"])(t,2),r=n[0],i=n[1],o=(e[2]||0)/this.pixelsPerMeter;return[r,i,o]}},{key:"projectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]||this.scale;return e}},{key:"unprojectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]||this.scale;return e}}]),e}();function wL(e){var t=e.width,n=e.height,r=e.bounds,i=e.minExtent,o=void 0===i?0:i,a=e.maxZoom,s=void 0===a?24:a,u=e.padding,c=void 0===u?0:u,l=e.offset,f=void 0===l?[0,0]:l,p=Object(Oi["a"])(r,2),h=Object(Oi["a"])(p[0],2),d=h[0],v=h[1],m=Object(Oi["a"])(p[1],2),g=m[0],y=m[1];if(Number.isFinite(c)){var b=c;c={top:b,bottom:b,left:b,right:b}}else rL(Number.isFinite(c.top)&&Number.isFinite(c.bottom)&&Number.isFinite(c.left)&&Number.isFinite(c.right));var _=new RL({width:t,height:n,longitude:0,latitude:0,zoom:0}),x=_.project([d,y]),w=_.project([g,v]),O=[Math.max(Math.abs(w[0]-x[0]),o),Math.max(Math.abs(w[1]-x[1]),o)],E=[t-c.left-c.right-2*Math.abs(f[0]),n-c.top-c.bottom-2*Math.abs(f[1])];rL(E[0]>0&&E[1]>0);var S=E[0]/O[0],j=E[1]/O[1],A=(c.right-c.left)/2/S,k=(c.bottom-c.top)/2/j,C=[(w[0]+x[0])/2+A,(w[1]+x[1])/2+k],T=_.unproject(C),M=_.zoom+Math.log2(Math.abs(Math.min(S,j)));return{longitude:T[0],latitude:T[1],zoom:Math.min(M,s)}}var OL,EL,SL,jL,AL,kL,CL,TL,ML,PL,IL,RL=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.width,i=n.height,o=n.latitude,a=void 0===o?0:o,s=n.longitude,u=void 0===s?0:s,c=n.zoom,l=void 0===c?0:c,f=n.pitch,p=void 0===f?0:f,h=n.bearing,d=void 0===h?0:h,v=n.altitude,m=void 0===v?1.5:v,g=n.nearZMultiplier,y=n.farZMultiplier;Object(Ve["a"])(this,t),r=r||1,i=i||1;var b=fL(l);m=Math.max(.75,m);var _=pL([u,a],b);_[2]=0;var x=gL({width:r,height:i,pitch:p,bearing:d,altitude:m,nearZMultiplier:g||1/i,farZMultiplier:y||1.01}),w=vL({height:i,center:_,pitch:p,bearing:d,altitude:m,flipY:!0});return e=Object(tt["a"])(this,Object(nt["a"])(t).call(this,{width:r,height:i,viewMatrix:w,projectionMatrix:x})),e.latitude=a,e.longitude=u,e.zoom=l,e.pitch=p,e.bearing=d,e.altitude=m,e.scale=b,e.center=_,e.pixelsPerMeter=dL(Object(gt["a"])(Object(gt["a"])(e))).pixelsPerMeter[2],Object.freeze(Object(gt["a"])(Object(gt["a"])(e))),e}return Object(et["a"])(t,e),Object(He["a"])(t,[{key:"projectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return pL(e,t)}},{key:"unprojectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return hL(e,t)}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,n=e.pos,r=bL(n,this.pixelUnprojectionMatrix),i=pL(t,this.scale),o=Vu([],i,rc([],r)),a=Vu([],this.center,o);return hL(a,this.scale)}},{key:"getLocationAtPoint",value:function(e){var t=e.lngLat,n=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"fitBounds",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,o=wL(Object.assign({width:r,height:i,bounds:e},n)),a=o.longitude,s=o.latitude,u=o.zoom;return new t({width:r,height:i,longitude:a,latitude:s,zoom:u})}}]),t}(xL),LL=function(){function e(){Object(Ve["a"])(this,e)}return Object(He["a"])(e,[{key:"syncWithMapCamera",value:function(e){var t=e.center,n=e.zoom,r=e.pitch,i=e.bearing,o=e.viewportHeight,a=e.viewportWidth,s=this.viewport?{width:this.viewport.width,height:this.viewport.height,longitude:this.viewport.center[0],latitude:this.viewport.center[1],zoom:this.viewport.zoom,pitch:this.viewport.pitch,bearing:this.viewport.bearing}:{};this.viewport=new RL(Object(N["a"])(Object(N["a"])({},s),{},{width:a,height:o,longitude:t&&t[0],latitude:t&&t[1],zoom:n,pitch:r,bearing:i}))}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(e,t){return this.viewport.projectFlat(e,t)}}]),e}(),DL={normal:"amap://styles/normal",light:"amap://styles/c422f5c0cfced5be9fe3a83f05f28a68?isPublic=true",dark:"amap://styles/c9f1d10cae34f8ab05e425462c5a58d7?isPublic=true",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true",fresh:"amap://styles/fresh",grey:"amap://styles/grey",graffiti:"amap://styles/graffiti",macaron:"amap://styles/macaron",darkblue:"amap://styles/darkblue",wine:"amap://styles/wine"},NL=["id","style","minZoom","maxZoom","token","mapInstance","plugin"];function FL(e,t){var n="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,r="undefined"!==typeof wx&&null!==wx&&("undefined"!==typeof wx.request||"undefined"!==typeof wx.miniProgram);if(!n&&!r&&(t||(t=document),t)){var i=t.head||t.getElementsByTagName("head")[0];if(!i){i=t.createElement("head");var o=t.body||t.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(i,o):t.documentElement.appendChild(i)}var a=t.createElement("style");return a.type="text/css",a.styleSheet?a.styleSheet.cssText=e:a.appendChild(t.createTextNode(e)),i.appendChild(a),a}}FL(".amap-logo{\n display: none !important;\n}\n");var zL={contextmenu:"rightclick"},BL={contextmenu:"rightclick",camerachange:"viewchange"},UL={"GAODE1.x":zL,"GAODE2.x":BL},VL=0;window.forceWebGL=!0;var HL,GL,WL="15cd8a57710d40c9b7c0e3cc120f1200",qL="1.4.15",ZL="amap-script",YL=!1,XL=[],KL=12,$L=(OL=Object(pp["injectable"])(),EL=Object(pp["inject"])(vp.IGlobalConfigService),SL=Object(pp["inject"])(vp.MapConfig),jL=Object(pp["inject"])(vp.ICoordinateSystemService),AL=Object(pp["inject"])(vp.IEventEmitter),OL((CL=function(){function e(){var t=this;Object(Ve["a"])(this,e),Object(Ge["a"])(this,"version",nx["GAODE1.x"]),Object(Ge["a"])(this,"simpleMapCoord",new JR),Object(Ge["a"])(this,"bgColor","rgba(0, 0, 0, 0)"),Th(this,"configService",TL,this),Th(this,"config",ML,this),Th(this,"coordinateSystemService",PL,this),Th(this,"eventEmitter",IL,this),Object(Ge["a"])(this,"handleCameraChanged",(function(e){var n=e.camera,r=n.fov,i=n.near,o=n.far,a=n.height,s=n.pitch,u=n.rotation,c=n.aspect,l=n.position,f=t.getCenter(),p=f.lng,h=f.lat;if(t.emit("mapchange"),t.cameraChangedCallback){t.viewport.syncWithMapCamera({aspect:c,bearing:360-u,far:o,fov:r,cameraHeight:a,near:i,pitch:s,zoom:t.map.getZoom()-1,center:[p,h],offsetOrigin:[l.x,l.y]});var d=t.config.offsetZoom,v=void 0===d?KL:d;t.viewport.getZoom()>v?t.coordinateSystemService.setCoordinateSystem(Ph.P20_OFFSET):t.coordinateSystemService.setCoordinateSystem(Ph.P20),t.cameraChangedCallback(t.viewport)}}))}return Object(He["a"])(e,[{key:"setBgColor",value:function(e){this.bgColor=e}},{key:"addMarkerContainer",value:function(){var e=this.map.getContainer();if(null!==e){var t=e.getElementsByClassName("amap-maps")[0];this.markerContainer=r.create("div","l7-marker-container",t)}}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(e,t){-1!==Fy.indexOf(e)?this.eventEmitter.on(e,t):this.map.on(UL[this.version][e]||e,t)}},{key:"off",value:function(e,t){-1!==Fy.indexOf(e)?this.eventEmitter.off(e,t):this.map.off(UL[this.version][e]||e,t)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){var e;return null===(e=this.map.getContainer())||void 0===e?void 0:e.getElementsByClassName("amap-maps")[0]}},{key:"getSize",value:function(){var e=this.map.getSize();return[e.getWidth(),e.getHeight()]}},{key:"getType",value:function(){return"amap"}},{key:"getZoom",value:function(){return this.map.getZoom()-1}},{key:"setZoom",value:function(e){return this.map.setZoom(e+1)}},{key:"getCenter",value:function(e){if(null!==e&&void 0!==e&&e.padding){var t=this.getCenter(),n=eL(e.padding),r=this.lngLatToPixel([t.lng,t.lat]),i=[(n.right-n.left)/2,(n.bottom-n.top)/2],o=this.pixelToLngLat([r.x-i[0],r.y-i[1]]);return o}var a=this.map.getCenter();return{lng:a.getLng(),lat:a.getLat()}}},{key:"setCenter",value:function(e,t){if(null!==t&&void 0!==t&&t.padding){var n=eL(t.padding),r=this.lngLatToPixel(e),i=[(n.right-n.left)/2,(n.bottom-n.top)/2],o=this.pixelToLngLat([r.x+i[0],r.y+i[1]]);this.map.setCenter([o.lng,o.lat])}else this.map.setCenter(e)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return 360-this.map.getRotation()}},{key:"getBounds",value:function(){var e=this.map.getBounds().toBounds(),t=e.getNorthEast(),n=e.getSouthWest(),r=this.getCenter(),i=r.lng>t.getLng()||r.lng<n.getLng()?180-t.getLng():t.getLng(),o=r.lng<n.getLng()?n.getLng()-180:n.getLng();return[[o,n.getLat()],[i,t.getLat()]]}},{key:"getMinZoom",value:function(){var e=this.map.get("zooms");return e[0]-1}},{key:"getMaxZoom",value:function(){var e=this.map.get("zooms");return e[1]-1}},{key:"setRotation",value:function(e){return this.map.setRotation(e)}},{key:"setPitch",value:function(e){return this.map.setPitch(e)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(e){this.map.panTo(e)}},{key:"panBy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.map.panBy(e,t)}},{key:"fitBounds",value:function(e){this.map.setBounds(new AMap.Bounds([e[0][0],e[0][1],e[1][0],e[1][1]]))}},{key:"setZoomAndCenter",value:function(e,t){this.map.setZoomAndCenter(e+1,t)}},{key:"setMapStyle",value:function(e){this.map.setMapStyle(this.getMapStyleValue(e))}},{key:"setMapStatus",value:function(e){this.map.setStatus(e)}},{key:"getMapStyleConfig",value:function(){return DL}},{key:"getMapStyleValue",value:function(e){return this.getMapStyleConfig()[e]||e}},{key:"getMapStyle",value:function(){return this.map.getMapStyle()}},{key:"pixelToLngLat",value:function(e){var t=this.map.pixelToLngLat(new AMap.Pixel(e[0],e[1]));return{lng:t.getLng(),lat:t.getLat()}}},{key:"lngLatToPixel",value:function(e){var t=this.map.lnglatToPixel(new AMap.LngLat(e[0],e[1]));return{x:t.getX(),y:t.getY()}}},{key:"containerToLngLat",value:function(e){var t=new AMap.Pixel(e[0],e[1]),n=this.map.containerToLngLat(t);return{lng:null===n||void 0===n?void 0:n.getLng(),lat:null===n||void 0===n?void 0:n.getLat()}}},{key:"lngLatToContainer",value:function(e){var t=new AMap.LngLat(e[0],e[1]),n=this.map.lngLatToContainer(t);return{x:n.getX(),y:n.getY()}}},{key:"lngLatToCoord",value:function(e){var t=this.map.lngLatToGeodeticCoord(e),n=t.x,r=t.y;return[n,-r]}},{key:"lngLatToMercator",value:function(e,t){return{x:0,y:0,z:0}}},{key:"getModelMatrix",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],i=this.viewport.projectFlat(e),o=a.create();return a.translate(o,o,u.fromValues(i[0],i[1],t)),a.scale(o,o,u.fromValues(r[0],r[1],r[2])),a.rotateX(o,o,n[0]),a.rotateY(o,o,n[1]),a.rotateZ(o,o,n[2]),o}},{key:"init",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o,a,s,u,c,l,f,p,h,d,v=this;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.config,n=t.id,r=t.style,i=void 0===r?"light":r,o=t.minZoom,a=void 0===o?0:o,s=t.maxZoom,u=void 0===s?18:s,c=t.token,l=void 0===c?WL:c,f=t.mapInstance,p=t.plugin,h=void 0===p?[]:p,d=Object(Cv["a"])(t,NL),e.next=3,new Promise((function(e){var t=function(){if(f)v.map=f,v.$mapContainer=v.map.getContainer(),setTimeout((function(){v.map.on("camerachange",v.handleCameraChanged),e()}),30);else{v.$mapContainer=v.creatMapContainer(n);var t=Object(N["a"])({mapStyle:v.getMapStyleValue(i),zooms:[a,u],viewMode:"3D"},d);t.zoom&&(t.zoom+=1);var r=new AMap.Map(v.$mapContainer,t);r.on("camerachange",v.handleCameraChanged),r.on("camerachange",(function(){setTimeout((function(){return v.handleAfterMapChange()}))})),v.map=r,setTimeout((function(){e()}),10)}};YL||f?YL&&window.AMap||f?t():XL.push(t):(l===WL&&console.warn("%c".concat(v.configService.getSceneWarninfo("MapToken"),"!"),"color: #873bf4;font-weigh:900;font-size: 16px;"),YL=!0,h.push("Map3D"),QR.a.load({key:l,version:qL,plugins:h}).then((function(){t(),XL.length&&(XL.forEach((function(e){return e()})),XL=[])}))["catch"]((function(e){throw new Error(e)})))}));case 3:this.viewport=new LL;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"meterToCoord",value:function(e,t){var n=AMap.GeometryUtil.distance(at(AMap.LngLat,Object(D["a"])(e)),at(AMap.LngLat,Object(D["a"])(t))),r=this.lngLatToCoord(e),i=Object(Oi["a"])(r,2),o=i[0],a=i[1],s=this.lngLatToCoord(t),u=Object(Oi["a"])(s,2),c=u[0],l=u[1],f=Math.sqrt(Math.pow(o-c,2)+Math.pow(a-l,2));return f/n}},{key:"updateView",value:function(e){}},{key:"getOverlayContainer",value:function(){}},{key:"exportMap",value:function(e){var t,n=null===(t=this.getContainer())||void 0===t?void 0:t.getElementsByClassName("amap-layer")[0],r="jpg"===e?null===n||void 0===n?void 0:n.toDataURL("image/jpeg"):null===n||void 0===n?void 0:n.toDataURL("image/png");return r}},{key:"emit",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.eventEmitter).emit.apply(t,[e].concat(r))}},{key:"once",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.eventEmitter).once.apply(t,[e].concat(r))}},{key:"destroy",value:function(){var e,t;null===(e=this.$mapContainer)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(this.$mapContainer),delete window.initAMap;var n=document.getElementById(ZL);n&&document.head.removeChild(n),this.map.destroy()}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(e){this.cameraChangedCallback=e}},{key:"handleAfterMapChange",value:function(){this.emit("mapAfterFrameChange")}},{key:"creatMapContainer",value:function(e){var t=e;"string"===typeof e&&(t=document.getElementById(e));var n=document.createElement("div");return n.style.cssText+="\n       position: absolute;\n       top: 0;\n       height: 100%;\n       width: 100%;\n     ",n.id="l7_amap_div"+VL++,t.appendChild(n),n}}]),e}(),TL=Mh(CL.prototype,"configService",[EL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ML=Mh(CL.prototype,"config",[SL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),PL=Mh(CL.prototype,"coordinateSystemService",[jL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),IL=Mh(CL.prototype,"eventEmitter",[AL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kL=CL))||kL),QL=function(){function e(){Object(Ve["a"])(this,e),Object(Ge["a"])(this,"projectionMatrix",a.create()),Object(Ge["a"])(this,"viewMatrix",a.create()),Object(Ge["a"])(this,"viewProjectionMatrix",a.create()),Object(Ge["a"])(this,"ViewProjectionMatrixUncentered",a.create()),Object(Ge["a"])(this,"viewUncenteredMatrix",a.create())}return Object(He["a"])(e,[{key:"syncWithMapCamera",value:function(e){var t=e.zoom,n=void 0===t?1:t,r=e.center,i=void 0===r?[0,0]:r,o=e.offsetOrigin,s=void 0===o?[0,0]:o,c=e.cameraPosition,l=void 0===c?[0,0,0]:c,f=e.up,p=void 0===f?[0,1,0]:f,h=e.lookAt,d=void 0===h?[0,0,0]:h,v=e.aspect,m=void 0===v?1:v,g=e.near,y=void 0===g?.1:g,b=e.far,_=void 0===b?1e3:b,x=e.fov,w=void 0===x?45:x;this.zoom=n,this.center=i,a.perspective(this.projectionMatrix,w/180*Math.PI,m,y,_);var O=u.fromValues.apply(u,Object(D["a"])(l)),E=u.fromValues.apply(u,Object(D["a"])(d)),S=u.fromValues.apply(u,Object(D["a"])(p));a.lookAt(this.viewMatrix,O,E,S),this.viewUncenteredMatrix=a.clone(this.viewMatrix),a.translate(this.viewMatrix,this.viewMatrix,u.fromValues(-s[0],s[1],0)),a.multiply(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),a.multiply(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 1048576}},{key:"getCenter",value:function(){var e=Object(Oi["a"])(this.center,2),t=e[0],n=e[1];return[t,n]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1.2}},{key:"projectFlat",value:function(e){var t=85.0511287798,n=Math.max(Math.min(t,e[1]),-t),r=256<<20,i=Math.PI/180,o=e[0]*i,a=n*i;a=Math.log(Math.tan(Math.PI/4+a/2));var s=.5/Math.PI,u=.5,c=-.5/Math.PI;return i=.5,o=r*(s*o+u)-215440491,a=-(r*(c*a+i)-106744817),[o,a]}}]),e}(),JL=["id","style","minZoom","maxZoom","token","mapInstance","plugin","version"];function eD(e){var t=tD();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function tD(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function nD(e,t){var n="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,r="undefined"!==typeof wx&&null!==wx&&("undefined"!==typeof wx.request||"undefined"!==typeof wx.miniProgram);if(!n&&!r&&(t||(t=document),t)){var i=t.head||t.getElementsByTagName("head")[0];if(!i){i=t.createElement("head");var o=t.body||t.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(i,o):t.documentElement.appendChild(i)}var a=t.createElement("style");return a.type="text/css",a.styleSheet?a.styleSheet.cssText=e:a.appendChild(t.createTextNode(e)),i.appendChild(a),a}}nD(".amap-logo{\n display: none !important;\n}\n");var rD=[108.92361,34.54083];window.forceWebGL=!0;var iD="ff533602d57df6f8ab3b0fea226ae52f",oD="2.0",aD=(HL=Object(pp["injectable"])(),HL(GL=function(e){Object(et["a"])(n,e);var t=eD(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"version",nx["GAODE2.x"]),Object(Ge["a"])(Object(gt["a"])(e),"handleViewChanged",(function(t){var n=e.map.customCoords.getCameraParams(),r=n.fov,i=n.near,o=n.far,a=n.aspect,s=n.position,u=n.lookAt,c=n.up;e.emit("mapchange");var l=e.map.customCoords.getCenter();e.cameraChangedCallback&&(e.viewport.syncWithMapCamera({aspect:a,far:o,fov:r,cameraPosition:s,lookAt:u,up:c,near:i,zoom:e.map.getZoom()-1,center:l,offsetOrigin:[s[0],s[1]]}),e.coordinateSystemService.setCoordinateSystem(Ph.P20_2),e.cameraChangedCallback(e.viewport))})),e}return Object(He["a"])(n,[{key:"setCustomCoordCenter",value:function(e){this.sceneCenter=e,this.sceneCenterMKT=mo.apply(void 0,Object(D["a"])(e))}},{key:"getCustomCoordCenter",value:function(){return this.sceneCenterMKT}},{key:"lngLatToCoordByLayer",value:function(e,t){var n=t||this.sceneCenter,r=mo.apply(void 0,Object(D["a"])(n)),i=this._sub(mo(e[0],e[1]),r);return e[2]&&i.push(e[2]),i}},{key:"lngLatToCoordsByLayer",value:function(e,t){var n=this;return e.map((function(e){return"number"===typeof e[0]?n.lngLatToCoordByLayer(e,t):e.map((function(e){return n.lngLatToCoordByLayer(e,t)}))}))}},{key:"setCoordCenter",value:function(e){this.map.customCoords.setCenter(e||rD),this.setCustomCoordCenter(e||rD)}},{key:"lngLatToCoord",value:function(e){return this.sceneCenter||(this.map.customCoords.setCenter(e),this.setCustomCoordCenter(e)),this._sub(mo(e[0],e[1]),this.sceneCenterMKT)}},{key:"lngLatToCoords",value:function(e){var t=this;return e.map((function(e){return"number"===typeof e[0]?t.lngLatToCoord(e):e.map((function(e){return t.lngLatToCoord(e)}))}))}},{key:"addMarkerContainer",value:function(){if(this.map){var e=this.map.getContainer();if(null!==e){var t=e.getElementsByClassName("amap-maps")[0];t.style.zIndex="auto",this.markerContainer=r.create("div","l7-marker-container2",t)}}}},{key:"updateView",value:function(e){}},{key:"getOverlayContainer",value:function(){}},{key:"getType",value:function(){return"amap2"}},{key:"getBounds",value:function(){var e=this.map.getBounds(),t=e.getNorthEast(),n=e.getSouthWest(),r=this.getCenter(),i=r.lng>t.getLng()||r.lng<n.getLng()?180-t.getLng():t.getLng(),o=r.lng<n.getLng()?n.getLng()-180:n.getLng();return[[o,n.getLat()],[i,t.getLat()]]}},{key:"getMinZoom",value:function(){var e=this.map.getZooms();return e[0]-1}},{key:"getMaxZoom",value:function(){var e=this.map.getZooms();return e[1]-1}},{key:"lngLatToContainer",value:function(e){var t=this.map.lngLatToContainer(e);return{x:t.getX(),y:t.getY()}}},{key:"lngLatToPixel",value:function(e){var t=this.map.lngLatToPixel(new AMap.LngLat(e[0],e[1]));return{x:t.getX(),y:t.getY()}}},{key:"getModelMatrix",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],i=this.map.customCoords.lngLatToCoord(e),o=a.create();return a.translate(o,o,u.fromValues(i[0],i[1],t)),a.scale(o,o,u.fromValues(r[0],r[1],r[2])),a.rotateX(o,o,n[0]),a.rotateY(o,o,n[1]),a.rotateZ(o,o,n[2]),o}},{key:"init",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o,a,s,u,c,l,f,p,h,d,v,m,g,y,b,_,x;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.config,n=t.id,r=t.style,i=void 0===r?"light":r,o=t.minZoom,a=void 0===o?0:o,s=t.maxZoom,u=void 0===s?18:s,c=t.token,l=void 0===c?iD:c,f=t.mapInstance,p=t.plugin,h=void 0===p?[]:p,d=t.version,void 0===d?oD:d,v=Object(Cv["a"])(t,JL),this.viewport=new QL,window.AMap||f){e.next=6;break}return h.push("Map3D"),e.next=6,QR.a.load({key:l,version:oD,plugins:h});case 6:f?(this.map=f,this.$mapContainer=this.map.getContainer(),g=this.map.getCenter(),null===(m=this.map.customCoords)||void 0===m||m.setCenter([g.lng,g.lat]),this.setCustomCoordCenter([g.lng,g.lat]),this.map.on("viewchange",this.handleViewChanged)):(this.$mapContainer=this.creatMapContainer(n),b=Object(N["a"])({mapStyle:this.getMapStyleValue(i),zooms:[a,u],viewMode:"3D"},v),b.zoom&&(b.zoom+=1),l===iD&&console.warn("%c".concat(this.configService.getSceneWarninfo("MapToken"),"!"),"color: #873bf4;font-weigh:900;font-size: 16px;"),_=new AMap.Map(this.$mapContainer,b),this.map=_,x=_.getCenter(),null===(y=this.map.customCoords)||void 0===y||y.setCenter([x.lng,x.lat]),this.setCustomCoordCenter([x.lng,x.lat]),_.on("viewchange",this.handleViewChanged)),this.initViewPort();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(e){this.cameraChangedCallback=e}},{key:"initViewPort",value:function(){var e,t=null===(e=this.map.customCoords)||void 0===e?void 0:e.getCameraParams(),n=t.fov,r=t.near,i=t.far,o=t.aspect,a=t.position,s=t.lookAt,u=t.up;this.emit("mapchange");var c=this.map.customCoords.getCenter(),l=this.map.getZoom();this.cameraChangedCallback&&(this.viewport.syncWithMapCamera({aspect:o,far:i,fov:n,cameraPosition:a,lookAt:s,near:r,up:u,zoom:l-1,center:c,offsetOrigin:[a[0],a[1]]}),this.coordinateSystemService.setCoordinateSystem(Ph.P20_2),this.cameraChangedCallback(this.viewport))}},{key:"_sub",value:function(e,t){var n=[0,0];return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n}}]),n}($L))||GL);function sD(e){var t=uD();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function uD(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var cD,lD,fD,pD,hD,dD,vD,mD,gD,yD,bD,_D,xD,wD=function(e){Object(et["a"])(n,e);var t=sD(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"getServiceConstructor",value:function(){return aD}}]),n}(KR),OD=n("nKUr"),ED=f.a.memo((e=>{var t=e.style,n=e.className,r=e.map,i=e.option,o=e.onSceneLoaded,a=e.children,s=Object(l["useRef"])(null),u=Object(l["useState"])(),c=Object(v["a"])(u,2),f=c[0],h=c[1];return Object(l["useEffect"])((()=>{var e=new XR(Object(d["a"])(Object(d["a"])({id:s.current},i),{},{map:new wD(r)}));return e.on("loaded",(()=>{h(e),o&&o(e)})),()=>{e.destroy()}}),[]),Object(l["useEffect"])((()=>{f&&r.style&&f.setMapStyle(r.style)}),[JSON.stringify(r.style)]),Object(l["useEffect"])((()=>{f&&r.zoom&&f.setZoom(r.zoom)}),[r.zoom]),Object(l["useEffect"])((()=>{f&&r.center&&f.setCenter(r.center)}),[JSON.stringify(r.center)]),Object(l["useEffect"])((()=>{f&&r.pitch&&f.setPitch(r.pitch)}),[r.pitch]),Object(l["useEffect"])((()=>{f&&r.rotation&&f.setRotation(r.rotation)}),[r.rotation]),Object(OD["jsx"])(p.Provider,{value:f,children:Object(OD["jsx"])("div",{ref:s,className:n,style:t,children:f&&a})})})),SD=ED,jD=n("4ZJM"),AD=n.n(jD),kD={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},CD={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},TD=12,MD=(cD=Object(pp["injectable"])(),lD=Object(pp["inject"])(vp.MapConfig),fD=Object(pp["inject"])(vp.IGlobalConfigService),pD=Object(pp["inject"])(vp.ICoordinateSystemService),hD=Object(pp["inject"])(vp.IEventEmitter),cD((vD=function(){function e(){var t=this;Object(Ve["a"])(this,e),Object(Ge["a"])(this,"version",nx.DEFUALT),Object(Ge["a"])(this,"simpleMapCoord",new JR),Object(Ge["a"])(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),Th(this,"config",mD,this),Th(this,"configService",gD,this),Th(this,"coordinateSystemService",yD,this),Th(this,"eventEmitter",bD,this),Object(Ge["a"])(this,"handleCameraChanged",(function(e){var n=t.map.getCenter(),r=n.lat,i=n.lng;t.emit("mapchange"),t.viewport.syncWithMapCamera({bearing:t.map.getBearing(),center:[i,r],viewportHeight:t.map.transform.height,pitch:t.map.getPitch(),viewportWidth:t.map.transform.width,zoom:t.map.getZoom(),cameraHeight:0}),t.updateCoordinateSystemService(),t.cameraChangedCallback(t.viewport)}))}return Object(He["a"])(e,[{key:"setBgColor",value:function(e){this.bgColor=e}},{key:"addMarkerContainer",value:function(){var e=this.map.getCanvasContainer();this.markerContainer=r.create("div","l7-marker-container",e),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"getOverlayContainer",value:function(){}},{key:"on",value:function(e,t){-1!==Fy.indexOf(e)?this.eventEmitter.on(e,t):this.map.on(CD[e]||e,t)}},{key:"off",value:function(e,t){this.map.off(CD[e]||e,t),this.eventEmitter.off(e,t)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){if(this.version===nx.SIMPLE)return this.simpleMapCoord.getSize();var e=this.map.transform;return[e.width,e.height]}},{key:"getType",value:function(){return"default"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(e){return this.map.setZoom(e)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(e){this.map.setCenter(e)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(e){this.map.setBearing(e)}},{key:"zoomIn",value:function(e,t){this.map.zoomIn(e,t)}},{key:"zoomOut",value:function(e,t){this.map.zoomOut(e,t)}},{key:"setPitch",value:function(e){return this.map.setPitch(e)}},{key:"panTo",value:function(e){this.map.panTo(e)}},{key:"panBy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.panTo([e,t])}},{key:"fitBounds",value:function(e,t){this.map.fitBounds(e,t)}},{key:"setMaxZoom",value:function(e){this.map.setMaxZoom(e)}},{key:"setMinZoom",value:function(e){this.map.setMinZoom(e)}},{key:"setMapStatus",value:function(e){!0===e.doubleClickZoom&&this.map.doubleClickZoom.enable(),!1===e.doubleClickZoom&&this.map.doubleClickZoom.disable(),!1===e.dragEnable&&this.map.dragPan.disable(),!0===e.dragEnable&&this.map.dragPan.enable(),!1===e.rotateEnable&&this.map.dragRotate.disable(),!0===e.dragEnable&&this.map.dragRotate.enable(),!1===e.keyboardEnable&&this.map.keyboard.disable(),!0===e.keyboardEnable&&this.map.keyboard.enable(),!1===e.zoomEnable&&this.map.scrollZoom.disable(),!0===e.zoomEnable&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(e,t){this.map.flyTo({zoom:e,center:t})}},{key:"setMapStyle",value:function(e){this.map.setStyle(this.getMapStyleValue(e))}},{key:"meterToCoord",value:function(e,t){return 1}},{key:"pixelToLngLat",value:function(e){return this.map.unproject(e)}},{key:"lngLatToPixel",value:function(e){return this.map.project(e)}},{key:"containerToLngLat",value:function(e){return this.map.unproject(e)}},{key:"lngLatToContainer",value:function(e){return this.map.project(e)}},{key:"getMapStyle",value:function(){try{var e,t=null!==(e=this.map.getStyle().sprite)&&void 0!==e?e:"";return/^mapbox:\/\/sprites\/zcxduo\/\w+\/\w+$/.test(t)?null===t||void 0===t?void 0:t.replace(/\/\w+$/,"").replace(/sprites/,"styles"):t}catch(n){return""}}},{key:"getMapStyleConfig",value:function(){return kD}},{key:"getMapStyleValue",value:function(e){var t;return null!==(t=this.getMapStyleConfig()[e])&&void 0!==t?t:e}},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.eventEmitter).emit.apply(t,[e].concat(r))}},{key:"once",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.eventEmitter).once.apply(t,[e].concat(r))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(e){var t=this.map.getCanvas(),n="jpg"===e?null===t||void 0===t?void 0:t.toDataURL("image/jpeg"):null===t||void 0===t?void 0:t.toDataURL("image/png");return n}},{key:"onCameraChanged",value:function(e){this.cameraChangedCallback=e}},{key:"creatMapContainer",value:function(e){var t=e;return"string"===typeof e&&(t=document.getElementById(e)),t}},{key:"updateView",value:function(e){this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:e.bearing,center:e.center,viewportHeight:e.viewportHeight,pitch:e.pitch,viewportWidth:e.viewportWidth,zoom:e.zoom,cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}},{key:"updateCoordinateSystemService",value:function(){var e=this.config.offsetCoordinate,t=void 0===e||e;this.viewport.getZoom()>TD&&t?this.coordinateSystemService.setCoordinateSystem(Ph.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(Ph.LNGLAT)}}]),e}(),mD=Mh(vD.prototype,"config",[lD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gD=Mh(vD.prototype,"configService",[fD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yD=Mh(vD.prototype,"coordinateSystemService",[pD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bD=Mh(vD.prototype,"eventEmitter",[hD],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dD=vD))||dD),PD=function(){function e(){Object(Ve["a"])(this,e)}return Object(He["a"])(e,[{key:"syncWithMapCamera",value:function(e){var t=e.center,n=e.zoom,r=e.pitch,i=e.bearing,o=e.viewportHeight,a=e.viewportWidth;this.viewport=new RL({width:a,height:o,longitude:t&&t[0],latitude:t&&t[1],zoom:n,pitch:r,bearing:i})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(e,t){return this.viewport.projectFlat(e,t)}}]),e}(),ID=["id","attributionControl","style","token","rotation","mapInstance"];function RD(e){var t=LD();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function LD(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function DD(e,t){var n="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,r="undefined"!==typeof wx&&null!==wx&&("undefined"!==typeof wx.request||"undefined"!==typeof wx.miniProgram);if(!n&&!r&&(t||(t=document),t)){var i=t.head||t.getElementsByTagName("head")[0];if(!i){i=t.createElement("head");var o=t.body||t.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(i,o):t.documentElement.appendChild(i)}var a=t.createElement("style");return a.type="text/css",a.styleSheet?a.styleSheet.cssText=e:a.appendChild(t.createTextNode(e)),i.appendChild(a),a}}DD(".mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:pinch-zoom;touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:none;touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 0 2px ButtonText;box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){-webkit-box-shadow:none;box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E\")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;-webkit-box-sizing:border-box;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-box;display:-ms-flexbox;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.1);box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:-webkit-box;display:-ms-flexbox;display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:\"\";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:\"\";height:19px;left:-2px;position:absolute;top:-2px;width:19px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 3px rgba(0,0,0,.35);box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}"),window.mapboxgl=AD.a;var ND=0,FD="101MlGsZ2AmmA&access_token=pk.eyJ1IjoiZXhhbXBsZXMiLCJhIjoiY2p0MG01MXRqMW45cjQzb2R6b2ptc3J4MSJ9.zA2W0IkI0c6KaAhJfk9bWg";_D=Object(pp["injectable"])(),_D(xD=function(e){Object(et["a"])(n,e);var t=RD(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"version",nx.MAPBOX),e}return Object(He["a"])(n,[{key:"getType",value:function(){return"mapbox"}},{key:"lngLatToCoord",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0,z:0},n=this.lngLatToMercator(e,0),r=n.x,i=n.y;return[r-t.x,i-t.y]}},{key:"lngLatToMercator",value:function(e,t){var n=window.mapboxgl.MercatorCoordinate.fromLngLat(e,t),r=n.x,i=void 0===r?0:r,o=n.y,a=void 0===o?0:o,s=n.z,u=void 0===s?0:s;return{x:i,y:a,z:u}}},{key:"getModelMatrix",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{x:0,y:0,z:0},o=window.mapboxgl.MercatorCoordinate.fromLngLat(e,t),s=o.meterInMercatorCoordinateUnits(),c=a.create();return a.translate(c,c,u.fromValues(o.x-i.x,o.y-i.y,o.z||0-i.z)),a.scale(c,c,u.fromValues(s*r[0],-s*r[1],s*r[2])),a.rotateX(c,c,n[0]),a.rotateY(c,c,n[1]),a.rotateZ(c,c,n[2]),c}},{key:"init",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o,a,s,u,c,l,f,p,h,d=this;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.config,n=t.id,r=void 0===n?"map":n,i=t.attributionControl,o=void 0!==i&&i,a=t.style,s=void 0===a?"light":a,u=t.token,c=void 0===u?FD:u,l=t.rotation,f=void 0===l?0:l,p=t.mapInstance,h=Object(Cv["a"])(t,ID),this.viewport=new PD,p||window.mapboxgl||console.error(this.configService.getSceneWarninfo("SDK")),c!==FD||"blank"===s||window.mapboxgl.accessToken||p||console.warn(this.configService.getSceneWarninfo("MapToken")),p||window.mapboxgl.accessToken||(window.mapboxgl.accessToken=c),p?(this.map=p,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatMapContainer(r),this.map=new window.mapboxgl.Map(Object(N["a"])({container:this.$mapContainer,style:this.getMapStyleValue(s),attributionControl:o,bearing:f},h))),this.map.on("load",(function(){d.handleCameraChanged()})),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"destroy",value:function(){var e,t;null===(e=this.$mapContainer)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.eventEmitter).emit.apply(t,[e].concat(r))}},{key:"once",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.eventEmitter).once.apply(t,[e].concat(r))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"meterToCoord",value:function(e,t){var n=new AD.a.LngLat(e[0],e[1]),r=new AD.a.LngLat(t[0],t[1]),i=n.distanceTo(r),o=AD.a.MercatorCoordinate.fromLngLat({lng:e[0],lat:e[1]}),a=AD.a.MercatorCoordinate.fromLngLat({lng:t[0],lat:t[1]}),s=o.x,u=o.y,c=a.x,l=a.y,f=4194304*Math.sqrt(Math.pow(s-c,2)+Math.pow(u-l,2))*2;return f/i}},{key:"exportMap",value:function(e){var t=this.map.getCanvas(),n="jpg"===e?null===t||void 0===t?void 0:t.toDataURL("image/jpeg"):null===t||void 0===t?void 0:t.toDataURL("image/png");return n}},{key:"creatMapContainer",value:function(e){var t=e;"string"===typeof e&&(t=document.getElementById(e));var n=document.createElement("div");return n.style.cssText+="\n      position: absolute;\n      top: 0;\n      height: 100%;\n      width: 100%;\n    ",n.id="l7_mapbox_div"+ND++,t.appendChild(n),n}}]),n}(MD));function zD(e,t){var n="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,r="undefined"!==typeof wx&&null!==wx&&("undefined"!==typeof wx.request||"undefined"!==typeof wx.miniProgram);if(!n&&!r&&(t||(t=document),t)){var i=t.head||t.getElementsByTagName("head")[0];if(!i){i=t.createElement("head");var o=t.body||t.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(i,o):t.documentElement.appendChild(i)}var a=t.createElement("style");return a.type="text/css",a.styleSheet?a.styleSheet.cssText=e:a.appendChild(t.createTextNode(e)),i.appendChild(a),a}}zD(".mapboxgl-ctrl-logo {\n display: none !important;\n}\n");var BD=f.a.memo((e=>{var t=e.style,n=e.className,r=e.map,i=e.option,o=e.onSceneLoaded,a=e.children,s=Object(l["useRef"])(null),u=Object(l["useState"])(),c=Object(v["a"])(u,2),f=c[0],h=c[1];return Object(l["useEffect"])((()=>{var e=new XR(Object(d["a"])(Object(d["a"])({id:s.current},i),{},{map:new wD(r)}));return e.on("loaded",(()=>{h(e),o&&o(e)})),()=>{e.destroy()}}),[]),Object(l["useEffect"])((()=>{f&&r.style&&f.setMapStyle(r.style)}),[JSON.stringify(r.style)]),Object(l["useEffect"])((()=>{f&&r.zoom&&f.setZoom(r.zoom)}),[r.zoom]),Object(l["useEffect"])((()=>{f&&r.center&&f.setCenter(r.center)}),[JSON.stringify(r.center)]),Object(l["useEffect"])((()=>{f&&r.pitch&&f.setPitch(r.pitch)}),[r.pitch]),Object(l["useEffect"])((()=>{f&&r.rotation&&f.setRotation(r.rotation)}),[r.rotation]),Object(OD["jsx"])(p.Provider,{value:f,children:Object(OD["jsx"])("div",{ref:s,className:n,style:t,children:f&&a})})})),UD=BD;if(!window)throw Error("AMap JSAPI can only be used in Browser.");var VD=function(e){return e["notload"]="notload",e["loading"]="loading",e["loaded"]="loaded",e["failed"]="failed",e}(VD||{}),HD={key:"",AMap:{version:"2.0",plugins:[]}},GD={AMap:VD.notload},WD=[],qD=function(e){if("function"===typeof e){if(GD.AMap===VD.loaded)return void e(window.AMap);WD.push(e)}},ZD=function(){var e=Object(ae["a"])(ue.a.mark((function e(t){return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){if(GD.AMap===VD.failed)n("");else if(GD.AMap===VD.notload){var r=t.key,i=t.version,o=t.plugins;if(!r)return void n("\u8bf7\u586b\u5199key");window.AMap&&"lbs.amap.com"!==location.host&&n("\u7981\u6b62\u591a\u79cdAPI\u52a0\u8f7d\u65b9\u5f0f\u6df7\u7528"),HD.key=r,HD.AMap.version=i||HD.AMap.version,HD.AMap.plugins=o||HD.AMap.plugins,GD.AMap=VD.loading;var a=document.body||document.head;window._onAPILoaded=function(t){t?(GD.AMap=VD.failed,n(t)):(GD.AMap=VD.loaded,e(null))};var s=document.createElement("script");s.type="text/javascript",s.async=!1,s.src="https://webapi.amap.com/maps?callback=_onAPILoaded&v="+HD.AMap.version+"&key="+r+"&plugin="+HD.AMap.plugins.join(","),s.onerror=function(e){GD.AMap=VD.failed,n(e)},a.appendChild(s)}else if(GD.AMap===VD.loaded){if(t.key&&t.key!==HD.key)return void n("\u591a\u4e2a\u4e0d\u4e00\u81f4\u7684 key");if(t.version&&t.version!==HD.AMap.version)return void n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c JSAPI \u6df7\u7528");var u=[];t.plugins&&t.plugins.forEach((function(e){-1===HD.AMap.plugins.indexOf(e)&&u.push(e)})),u.length&&window.AMap.plugin(u,(function(){e(window.AMap)}))}else{if(t.key&&t.key!==HD.key)return void n("\u591a\u4e2a\u4e0d\u4e00\u81f4\u7684 key");if(t.version&&t.version!==HD.AMap.version)return void n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c JSAPI \u6df7\u7528");var c=[];t.plugins&&t.plugins.forEach((function(e){-1===HD.AMap.plugins.indexOf(e)&&c.push(e)})),qD((function(){c.length&&window.AMap.plugin(c,(function(){e(window.AMap)}))}))}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function YD(){delete window.AMap,HD={key:"",AMap:{version:"1.4.15",plugins:[]}},GD={AMap:VD.notload},{AMap:[]}}var XD,KD,$D={load:ZD,reset:YD},QD=Math.PI/180,JD=function(){function e(){Object(Ve["a"])(this,e),Object(Ge["a"])(this,"projectionMatrix",a.create()),Object(Ge["a"])(this,"viewMatrix",a.create()),Object(Ge["a"])(this,"viewProjectionMatrix",a.create()),Object(Ge["a"])(this,"ViewProjectionMatrixUncentered",a.create()),Object(Ge["a"])(this,"viewUncenteredMatrix",a.create())}return Object(He["a"])(e,[{key:"syncWithMapCamera",value:function(e){var t=e.zoom,n=void 0===t?1:t,r=e.pitch,i=void 0===r?0:r,o=e.bearing,s=void 0===o?0:o,c=e.center,l=void 0===c?[0,0]:c,f=e.offsetOrigin,p=void 0===f?[0,0]:f,h=e.cameraHeight,d=void 0===h?1:h,v=e.aspect,m=void 0===v?1:v,g=e.near,y=void 0===g?.1:g,b=e.far,_=void 0===b?1e3:b,x=e.fov,w=void 0===x?0:x;this.zoom=n,this.center=l;var O=i*QD,E=(360-s)*QD;a.perspective(this.projectionMatrix,w,m,y,_);var S=u.fromValues(d*Math.sin(O)*Math.sin(E),-d*Math.sin(O)*Math.cos(E),d*Math.cos(O)),j=u.fromValues(-Math.cos(O)*Math.sin(E),Math.cos(O)*Math.cos(E),Math.sin(O));a.lookAt(this.viewMatrix,S,u.fromValues(0,0,0),j),this.viewUncenteredMatrix=a.clone(this.viewMatrix),a.translate(this.viewMatrix,this.viewMatrix,u.fromValues(-p[0],p[1],0)),a.multiply(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),a.multiply(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 524288}},{key:"getCenter",value:function(){var e=Object(Oi["a"])(this.center,2),t=e[0],n=e[1];return[t,n]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(e){var t=85.0511287798,n=Math.max(Math.min(t,e[1]),-t),r=256<<20,i=Math.PI/180,o=e[0]*i,a=n*i;a=Math.log(Math.tan(Math.PI/4+a/2));var s=.5/Math.PI,u=.5,c=-.5/Math.PI;return i=.5,o=r*(s*o+u)-215440491,a=-(r*(c*a+i)-106744817),[o,a]}}]),e}(),eN=["id","style","minZoom","maxZoom","token","mapInstance","plugin"];function tN(e){var t=nN();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function nN(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}window.forceWebGL=!0;var rN="15cd8a57710d40c9b7c0e3cc120f1200",iN="1.4.15",oN=!1,aN=[],sN=12;XD=Object(pp["injectable"])(),XD(KD=function(e){Object(et["a"])(n,e);var t=tN(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"version",nx["GAODE1.x"]),Object(Ge["a"])(Object(gt["a"])(e),"handleCameraChanged",(function(t){var n=t.camera,r=n.fov,i=n.near,o=n.far,a=n.height,s=n.pitch,u=n.rotation,c=n.aspect,l=n.position,f=e.getCenter(),p=f.lng,h=f.lat;if(e.emit("mapchange"),e.cameraChangedCallback){e.viewport.syncWithMapCamera({aspect:c,bearing:360-u,far:o,fov:r,cameraHeight:a,near:i,pitch:s,zoom:e.map.getZoom()-1,center:[p,h],offsetOrigin:[l.x,l.y]});var d=e.config.offsetZoom,v=void 0===d?sN:d;e.viewport.getZoom()>v?e.coordinateSystemService.setCoordinateSystem(Ph.P20_OFFSET):e.coordinateSystemService.setCoordinateSystem(Ph.P20),e.cameraChangedCallback(e.viewport)}})),e}return Object(He["a"])(n,[{key:"getModelMatrix",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],i=this.viewport.projectFlat(e),o=a.create();return a.translate(o,o,u.fromValues(i[0],i[1],t)),a.scale(o,o,u.fromValues(r[0],r[1],r[2])),a.rotateX(o,o,n[0]),a.rotateY(o,o,n[1]),a.rotateZ(o,o,n[2]),o}},{key:"init",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o,a,s,u,c,l,f,p,h,d,v=this;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.config,n=t.id,r=t.style,i=void 0===r?"light":r,o=t.minZoom,a=void 0===o?0:o,s=t.maxZoom,u=void 0===s?18:s,c=t.token,l=void 0===c?rN:c,f=t.mapInstance,p=t.plugin,h=void 0===p?[]:p,d=Object(Cv["a"])(t,eN),e.next=3,new Promise((function(e){var t=function(){if(f)v.map=f,v.$mapContainer=v.map.getContainer(),setTimeout((function(){v.map.on("camerachange",v.handleCameraChanged),e()}),30);else{v.$mapContainer=v.creatMapContainer(n);var t=Object(N["a"])({mapStyle:v.getMapStyleValue(i),zooms:[a,u],viewMode:"3D"},d);t.zoom&&(t.zoom+=1);var r=new AMap.Map(v.$mapContainer,t);r.on("camerachange",v.handleCameraChanged),r.on("camerachange",(function(){setTimeout((function(){return v.handleAfterMapChange()}))})),v.map=r,setTimeout((function(){e()}),10)}};oN||f?oN&&window.AMap||f?t():aN.push(t):(l===rN&&console.warn(v.configService.getSceneWarninfo("MapToken")),oN=!0,h.push("Map3D"),$D.load({key:l,version:iN,plugins:h}).then((function(e){t(),aN.length&&(aN.forEach((function(e){return e()})),aN=[])}))["catch"]((function(e){throw new Error(e)})))}));case 3:this.viewport=new JD;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"meterToCoord",value:function(e,t){var n=AMap.GeometryUtil.distance(at(AMap.LngLat,Object(D["a"])(e)),at(AMap.LngLat,Object(D["a"])(t))),r=this.lngLatToCoord(e),i=Object(Oi["a"])(r,2),o=i[0],a=i[1],s=this.lngLatToCoord(t),u=Object(Oi["a"])(s,2),c=u[0],l=u[1],f=Math.sqrt(Math.pow(o-c,2)+Math.pow(a-l,2));return f/n}},{key:"updateView",value:function(e){}},{key:"getOverlayContainer",value:function(){}},{key:"exportMap",value:function(e){var t,n=null===(t=this.getContainer())||void 0===t?void 0:t.getElementsByClassName("amap-layer")[0],r="jpg"===e?null===n||void 0===n?void 0:n.toDataURL("image/jpeg"):null===n||void 0===n?void 0:n.toDataURL("image/png");return r}},{key:"onCameraChanged",value:function(e){this.cameraChangedCallback=e}}]),n}($L));var uN,cN=n("zvhG"),lN=n.n(cN);function fN(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=pN(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function pN(e,t){if(e){if("string"===typeof e)return hN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hN(e,t):void 0}}function hN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dN(e,t,n){var r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i}function vN(e,t,n){return Math.min(n,Math.max(t,e))}function mN(e,t,n){return e*(1-n)+t*n}function gN(e,t,n,r){var i=new lN.a(e,t,n,r);return function(e){return i.solve(e)}}var yN=gN(.25,.1,.25,1);function bN(){return!(pr||!dr.matchMedia)&&(null==uN&&(uN=dr.matchMedia("(prefers-reduced-motion: reduce)")),uN.matches)}function _N(e,t){var n,r={},i=fN(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;o in e&&(r[o]=e[o])}}catch(a){i.e(a)}finally{i.f()}return r}var xN=pr?Date.now.bind(Date):dr.performance&&dr.performance.now?dr.performance.now.bind(dr.performance):Date.now.bind(Date),wN=dr.requestAnimationFrame||dr.mozRequestAnimationFrame||dr.webkitRequestAnimationFrame||dr.msRequestAnimationFrame,ON=dr.cancelAnimationFrame||dr.mozCancelAnimationFrame||dr.webkitCancelAnimationFrame||dr.msCancelAnimationFrame;function EN(e){var t=wN(e);return{cancel:function(){return ON(t)}}}var SN=6371008.8,jN=function(){function e(t,n){if(Object(Ve["a"])(this,e),isNaN(t)||isNaN(n))throw new Error("Invalid LngLat object: (".concat(t,", ").concat(n,")"));if(this.lng=+t,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return Object(He["a"])(e,[{key:"wrap",value:function(){return new e(dN(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(e){var t=Math.PI/180,n=this.lat*t,r=e.lat*t,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((e.lng-this.lng)*t),o=SN*Math.acos(Math.min(i,1));return o}}],[{key:"convert",value:function(t){if(t instanceof e)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new e(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"===Object(ne["a"])(t)&&null!==t){var n="lng"in t?t.lng:t.lon;return new e(Number(n),Number(t.lat))}throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),e}(),AN=function(){function e(t,n){Object(Ve["a"])(this,e),t&&(n?this.setSouthWest(t).setNorthEast(n):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}return Object(He["a"])(e,[{key:"setNorthEast",value:function(e){return this.ne=e instanceof jN?new jN(e.lng,e.lat):jN.convert(e),this}},{key:"setSouthWest",value:function(e){return this.sw=e instanceof jN?new jN(e.lng,e.lat):jN.convert(e),this}},{key:"extend",value:function(t){var n,r,i=this.sw,o=this.ne;if(t instanceof jN)n=t,r=t;else{if(!(t instanceof e)){if(Array.isArray(t)){if(4===t.length||t.every(Array.isArray)){var a=t;return this.extend(e.convert(a))}var s=t;return this.extend(jN.convert(s))}return this}if(n=t.sw,r=t.ne,!n||!r)return this}return i||o?(i.lng=Math.min(n.lng,i.lng),i.lat=Math.min(n.lat,i.lat),o.lng=Math.max(r.lng,o.lng),o.lat=Math.max(r.lat,o.lat)):(this.sw=new jN(n.lng,n.lat),this.ne=new jN(r.lng,r.lat)),this}},{key:"getCenter",value:function(){return new jN((this.sw.lng+this.ne.lng)/2,(this.sw.lat+this.ne.lat)/2)}},{key:"getSouthWest",value:function(){return this.sw}},{key:"getNorthEast",value:function(){return this.ne}},{key:"getNorthWest",value:function(){return new jN(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new jN(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this.sw.lng}},{key:"getSouth",value:function(){return this.sw.lat}},{key:"getEast",value:function(){return this.ne.lng}},{key:"getNorth",value:function(){return this.ne.lat}},{key:"toArray",value:function(){return[this.sw.toArray(),this.ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this.sw.toString(),", ").concat(this.ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this.sw&&this.ne)}},{key:"contains",value:function(e){var t=jN.convert(e),n=t.lng,r=t.lat,i=this.sw.lat<=r&&r<=this.ne.lat,o=this.sw.lng<=n&&n<=this.ne.lng;return this.sw.lng>this.ne.lng&&(o=this.sw.lng>=n&&n>=this.ne.lng),i&&o}}],[{key:"convert",value:function(t){return t instanceof e?t:new e(t)}}]),e}(),kN=function(){function e(t,n){Object(Ve["a"])(this,e),this.x=t,this.y=n}return Object(He["a"])(e,[{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"_add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"add",value:function(e){return this.clone()._add(e)}},{key:"_sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"sub",value:function(e){return this.clone()._sub(e)}},{key:"_multByPoint",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multByPoint",value:function(e){return this.clone()._multByPoint(e)}},{key:"_divByPoint",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divByPoint",value:function(e){return this.clone()._divByPoint(e)}},{key:"_mult",value:function(e){return this.x*=e,this.y*=e,this}},{key:"mult",value:function(e){return this.clone()._mult(e)}},{key:"_div",value:function(e){return this.x/=e,this.y/=e,this}},{key:"div",value:function(e){return this.clone()._div(e)}},{key:"_rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,i=n*this.x+t*this.y;return this.x=r,this.y=i,this}},{key:"rotate",value:function(e){return this.clone()._rotate(e)}},{key:"_rotateAround",value:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.x+n*(this.x-t.x)-r*(this.y-t.y),o=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=i,this.y=o,this}},{key:"roateAround",value:function(e,t){return this.clone()._rotateAround(e,t)}},{key:"_matMult",value:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this}},{key:"matMult",value:function(e){return this.clone()._matMult(e)}},{key:"_unit",value:function(){return this.div(this.mag()),this}},{key:"unit",value:function(){return this.clone()._unit()}},{key:"_perp",value:function(){var e=this.y;return this.y=this.x,this.x=-e,this}},{key:"perp",value:function(){return this.clone()._perp()}},{key:"_round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"round",value:function(){return this.clone()._round()}},{key:"mag",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"dist",value:function(e){return Math.sqrt(this.distSqr(e))}},{key:"distSqr",value:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"angleTo",value:function(e){return Math.atan2(this.y-e.y,this.x-e.x)}},{key:"angleWith",value:function(e){return this.angleWithSep(e.x,e.y)}},{key:"angleWithSep",value:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)}}],[{key:"convert",value:function(t){return t instanceof e?t:Array.isArray(t)?new e(t[0],t[1]):t}}]),e}(),CN=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(Object(Ve["a"])(this,e),isNaN(t)||t<0||isNaN(n)||n<0||isNaN(r)||r<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=n,this.left=r,this.right=i}return Object(He["a"])(e,[{key:"interpolate",value:function(e,t,n){return null!=t.top&&null!=e.top&&(this.top=mN(e.top,t.top,n)),null!=t.bottom&&null!=e.bottom&&(this.bottom=mN(e.bottom,t.bottom,n)),null!=t.left&&null!=e.left&&(this.left=mN(e.left,t.left,n)),null!=t.right&&null!=e.right&&(this.right=mN(e.right,t.right,n)),this}},{key:"getCenter",value:function(e,t){var n=vN((this.left+e-this.right)/2,0,e),r=vN((this.top+t-this.bottom)/2,0,t);return new kN(n,r)}},{key:"equals",value:function(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}},{key:"clone",value:function(){return new e(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),e}(),TN=2*Math.PI*SN;function MN(e){return TN*Math.cos(e*Math.PI/180)}function PN(e){return(180+e)/360}function IN(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function RN(e,t){return e/MN(t)}function LN(e){return 360*e-180}function DN(e){var t=180-360*e;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90}function NN(e,t){return e*MN(DN(t))}function FN(e){return 1/Math.cos(e*Math.PI/180)}var zN=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(Ve["a"])(this,e),this.x=+t,this.y=+n,this.z=+r}return Object(He["a"])(e,[{key:"toLngLat",value:function(){return new jN(LN(this.x),DN(this.y))}},{key:"toAltitude",value:function(){return NN(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/TN*FN(DN(this.y))}}],[{key:"fromLngLat",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=jN.convert(t);return new e(PN(r.lng),IN(r.lat),RN(n,r.lat))}}]),e}();function BN(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=UN(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function UN(e,t){if(e){if("string"===typeof e)return VN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?VN(e,t):void 0}}function VN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var HN=function(){function e(t,n,r,i,o){Object(Ve["a"])(this,e),this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=t||0,this._maxZoom=n||22,this._minPitch=void 0===r||null===r?0:r,this._maxPitch=void 0===i||null===i?60:i,this.setMaxBounds(),this.width=0,this.height=0,this._center=new jN(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this.unmodified=!0,this.edgeInsets=new CN,this.posMatrixCache={},this.alignedPosMatrixCache={}}return Object(He["a"])(e,[{key:"minZoom",get:function(){return this._minZoom},set:function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}},{key:"minPitch",get:function(){return this._minPitch},set:function(e){this._minPitch!==e&&(this._minPitch=e,this._pitch=Math.max(this._pitch,e))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(e){this._maxPitch!==e&&(this._maxPitch=e,this._pitch=Math.min(this._pitch,e))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies},set:function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new kN(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(e){var t=-dN(e,-180,180)*Math.PI/180;this.angle!==t&&(this.unmodified=!1,this.angle=t,this.calcMatrices(),this.rotationMatrix=o.create(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(e){var t=vN(e,this._minPitch,this._maxPitch)/180*Math.PI;this._pitch!==t&&(this.unmodified=!1,this._pitch=t,this.calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this.unmodified=!1,this._fov=e/180*Math.PI,this.calcMatrices())}},{key:"zoom",get:function(){return this._zoom},set:function(e){var t=Math.min(Math.max(e,this._minZoom),this._maxZoom);this._zoom!==t&&(this.unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this.constrain(),this.calcMatrices())}},{key:"center",get:function(){return this._center},set:function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this.unmodified=!1,this._center=e,this.constrain(),this.calcMatrices())}},{key:"padding",get:function(){return this.edgeInsets.toJSON()},set:function(e){this.edgeInsets.equals(e)||(this.unmodified=!1,this.edgeInsets.interpolate(this.edgeInsets,e,1),this.calcMatrices())}},{key:"centerPoint",get:function(){return this.edgeInsets.getCenter(this.width,this.height)}},{key:"point",get:function(){return this.project(this.center)}},{key:"clone",value:function(){var t=new e(this._minZoom,this._maxZoom,this._minPitch,this._maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t.center=this._center,t.zoom=this.zoom,t.angle=this.angle,t.fov=this._fov,t.pitch=this._pitch,t.unmodified=this.unmodified,t.edgeInsets=this.edgeInsets.clone(),t.calcMatrices(),t}},{key:"isPaddingEqual",value:function(e){return this.edgeInsets.equals(e)}},{key:"interpolatePadding",value:function(e,t,n){this.unmodified=!1,this.edgeInsets.interpolate(e,t,n),this.constrain(),this.calcMatrices()}},{key:"coveringZoomLevel",value:function(e){var t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}},{key:"resize",value:function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this.constrain(),this.calcMatrices()}},{key:"zoomScale",value:function(e){return Math.pow(2,e)}},{key:"scaleZoom",value:function(e){return Math.log(e)/Math.LN2}},{key:"project",value:function(e){var t=vN(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new kN(PN(e.lng)*this.worldSize,IN(t)*this.worldSize)}},{key:"unproject",value:function(e){return new zN(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}},{key:"setLocationAtPoint",value:function(e,t){var n=this.pointCoordinate(t),r=this.pointCoordinate(this.centerPoint),i=this.locationCoordinate(e),o=new zN(i.x-(n.x-r.x),i.y-(n.y-r.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"pointCoordinate",value:function(e){var t=0,n=new Float64Array([e.x,e.y,0,1]),r=new Float64Array([e.x,e.y,1,1]);c.transformMat4(n,n,this.pixelMatrixInverse),c.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],o=r[3],a=n[0]/i,s=r[0]/o,u=n[1]/i,l=r[1]/o,f=n[2]/i,p=r[2]/o,h=f===p?0:(t-f)/(p-f);return new zN(mN(a,s,h)/this.worldSize,mN(u,l,h)/this.worldSize)}},{key:"getBounds",value:function(){return(new AN).extend(this.pointLocation(new kN(0,0))).extend(this.pointLocation(new kN(this.width,0))).extend(this.pointLocation(new kN(this.width,this.height))).extend(this.pointLocation(new kN(0,this.height)))}},{key:"getMaxBounds",value:function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new AN([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}},{key:"setMaxBounds",value:function(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this.constrain()):(this.lngRange=void 0,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"maxPitchScaleFactor",value:function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new kN(0,0)),t=new Float32Array([e.x*this.worldSize,e.y*this.worldSize,0,1]),n=c.transformMat4(t,t,this.pixelMatrix);return n[3]/this.cameraToCenterDistance}},{key:"getCameraPoint",value:function(){var e=this._pitch,t=Math.tan(e)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new kN(0,t))}},{key:"getCameraQueryGeometry",value:function(e){var t=this.getCameraPoint();if(1===e.length)return[e[0],t];var n,r=t.x,i=t.y,o=t.x,a=t.y,s=BN(e);try{for(s.s();!(n=s.n()).done;){var u=n.value;r=Math.min(r,u.x),i=Math.min(i,u.y),o=Math.max(o,u.x),a=Math.max(a,u.y)}}catch(c){s.e(c)}finally{s.f()}return[new kN(r,i),new kN(o,i),new kN(o,a),new kN(r,a),new kN(r,i)]}},{key:"coordinatePoint",value:function(e){var t=c.fromValues(e.x*this.worldSize,e.y*this.worldSize,0,1);return c.transformMat4(t,t,this.pixelMatrix),new kN(t[0]/t[3],t[1]/t[3])}},{key:"locationPoint",value:function(e){return this.coordinatePoint(this.locationCoordinate(e))}},{key:"pointLocation",value:function(e){return this.coordinateLocation(this.pointCoordinate(e))}},{key:"locationCoordinate",value:function(e){return zN.fromLngLat(e)}},{key:"coordinateLocation",value:function(e){return e.toLngLat()}},{key:"getProjectionMatrix",value:function(){return this.projMatrix}},{key:"constrain",value:function(){if(this.center&&this.width&&this.height&&!this.constraining){this.constraining=!0;var e,t,n,r,i=-90,o=90,a=-180,s=180,u=this.size,c=this.unmodified;if(this.latRange){var l=this.latRange;i=IN(l[1])*this.worldSize,o=IN(l[0])*this.worldSize,e=o-i<u.y?u.y/(o-i):0}if(this.lngRange){var f=this.lngRange;a=PN(f[0])*this.worldSize,s=PN(f[1])*this.worldSize,t=s-a<u.x?u.x/(s-a):0}var p=this.point,h=Math.max(t||0,e||0);if(h)return this.center=this.unproject(new kN(t?(s+a)/2:p.x,e?(o+i)/2:p.y)),pr?this.zoom=Math.max(this.zoom,Math.max(-1,this.minZoom)):this.zoom+=this.scaleZoom(h),this.unmodified=c,void(this.constraining=!1);if(this.latRange){var d=p.y,v=u.y/2;d-v<i&&(r=i+v),d+v>o&&(r=o-v)}if(this.lngRange){var m=p.x,g=u.x/2;m-g<a&&(n=a+g),m+g>s&&(n=s-g)}void 0===n&&void 0===r||(this.center=this.unproject(new kN(void 0!==n?n:p.x,void 0!==r?r:p.y))),this.unmodified=c,this.constraining=!1}}},{key:"calcMatrices",value:function(){if(this.height){var e=this._fov/2,t=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(e)*this.height;var n=Math.PI/2+this._pitch,r=this._fov*(.5+t.y/this.height),i=Math.sin(r)*this.cameraToCenterDistance/Math.sin(vN(Math.PI-n-r,.01,Math.PI-.01)),o=this.point,s=o.x,u=o.y,c=Math.cos(Math.PI/2-this._pitch)*i+this.cameraToCenterDistance,l=1.01*c,f=this.height/50,p=new Float64Array(16);a.perspective(p,this._fov,this.width/this.height,f,l),p[8]=2*-t.x/this.width,p[9]=2*t.y/this.height,a.scale(p,p,[1,-1,1]),a.translate(p,p,[0,0,-this.cameraToCenterDistance]),a.rotateX(p,p,this._pitch),a.rotateZ(p,p,this.angle),a.translate(p,p,[-s,-u,0]),this.mercatorMatrix=a.scale([],p,[this.worldSize,this.worldSize,this.worldSize]),a.scale(p,p,[1,1,RN(1,this.center.lat)*this.worldSize,1]),this.projMatrix=p,this.invProjMatrix=a.invert([],this.projMatrix);var h=this.width%2/2,d=this.height%2/2,v=Math.cos(this.angle),m=Math.sin(this.angle),g=s-Math.round(s)+v*h+m*d,y=u-Math.round(u)+v*d+m*h,b=new Float64Array(p);if(a.translate(b,b,[g>.5?g-1:g,y>.5?y-1:y,0]),this.alignedProjMatrix=b,p=a.create(),a.scale(p,p,[this.width/2,-this.height/2,1]),a.translate(p,p,[1,-1,0]),this.labelPlaneMatrix=p,p=a.create(),a.scale(p,p,[1,-1,1]),a.translate(p,p,[-1,-1,0]),a.scale(p,p,[2/this.width,2/this.height,1]),this.glCoordMatrix=p,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),p=a.invert(new Float64Array(16),this.pixelMatrix),!p)throw new Error("failed to invert matrix");this.pixelMatrixInverse=p,this.posMatrixCache={},this.alignedPosMatrixCache={}}}}]),e}(),GN=n("QkVN"),WN=n.n(GN),qN=Object(He["a"])((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(Ve["a"])(this,e),WN()(this,n),this.type=t}));function ZN(e){var t=YN();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function YN(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var XN=function(e){Object(et["a"])(n,e);var t=ZN(n);function n(e){var r;Object(Ve["a"])(this,n),r=t.call(this),Object(Ge["a"])(Object(gt["a"])(r),"renderFrameCallback",(function(){var e=Math.min((xN()-r.easeStart)/r.easeOptions.duration,1);r.onEaseFrame(r.easeOptions.easing(e)),e<1?r.easeFrameId=r.requestRenderFrame(r.renderFrameCallback):r.stop()})),r.options=e;var i=e.minZoom,o=e.maxZoom,a=e.minPitch,s=e.maxPitch,u=e.renderWorldCopies;return r.moving=!1,r.zooming=!1,r.bearingSnap=e.bearingSnap,r.pitchEnabled=e.pitchEnabled,r.rotateEnabled=e.rotateEnabled,r.transform=new HN(i,o,a,s,u),r}return Object(He["a"])(n,[{key:"requestRenderFrame",value:function(e){return 0}},{key:"cancelRenderFrame",value:function(e){}},{key:"getCenter",value:function(){var e=this.transform.center,t=e.lng,n=e.lat;return new jN(t,n)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setCenter",value:function(e,t){return this.jumpTo({center:e},t)}},{key:"setPitch",value:function(e,t){return this.jumpTo({pitch:e},t),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"panTo",value:function(e,t,n){return this.easeTo(Object(Ei["merge"])({center:e},t),n)}},{key:"zoomOut",value:function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}},{key:"setBearing",value:function(e,t){return this.jumpTo({bearing:e},t),this}},{key:"setZoom",value:function(e,t){return this.jumpTo({zoom:e},t),this}},{key:"zoomIn",value:function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}},{key:"zoomTo",value:function(e,t,n){return this.easeTo(Object(Ei["merge"])({zoom:e},t),n)}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(e,t){return this.jumpTo({padding:e},t),this}},{key:"rotateTo",value:function(e,t,n){return this.easeTo(Object(Ei["merge"])({bearing:e},t),n)}},{key:"resetNorth",value:function(e,t){return this.rotateTo(0,Object(Ei["merge"])({duration:1e3},e),t),this}},{key:"resetNorthPitch",value:function(e,t){return this.easeTo(Object(Ei["merge"])({bearing:0,pitch:0,duration:1e3},e),t),this}},{key:"fitBounds",value:function(e,t,n){return this.fitInternal(this.cameraForBounds(e,t),t,n)}},{key:"cameraForBounds",value:function(e,t){return e=AN.convert(e),this.cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,t)}},{key:"snapToNorth",value:function(e,t){return Math.abs(this.getBearing())<this.bearingSnap?this.resetNorth(e,t):this}},{key:"jumpTo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;this.stop();var n=this.transform,r=!1,i=!1,o=!1;return void 0!==e.zoom&&n.zoom!==+e.zoom&&(r=!0,n.zoom=+e.zoom),void 0!==e.center&&(n.center=jN.convert(e.center)),void 0!==e.bearing&&n.bearing!==+e.bearing&&(i=!0,n.bearing=+e.bearing),void 0!==e.pitch&&n.pitch!==+e.pitch&&(o=!0,n.pitch=+e.pitch),void 0===e.padding||n.isPaddingEqual(e.padding)||(n.padding=e.padding),this.emit("movestart",new qN("movestart",t)),this.emit("move",new qN("move",t)),r&&(this.emit("zoomstart",new qN("zoomstart",t)),this.emit("zoom",new qN("zoom",t)),this.emit("zoomend",new qN("zoomend",t))),i&&(this.emit("rotatestart",new qN("rotatestart",t)),this.emit("rotate",new qN("rotate",t)),this.emit("rotateend",new qN("rotateend",t))),o&&(this.emit("pitchstart",new qN("pitchstart",t)),this.emit("pitch",new qN("pitch",t)),this.emit("pitchend",new qN("pitchend",t))),this.emit("moveend",new qN("moveend",t))}},{key:"easeTo",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;t=Object(Ei["merge"])({offset:[0,0],duration:500,easing:yN},t),(!1===t.animate||!t.essential&&bN())&&(t.duration=0);var r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),u=t.zoom?+t.zoom:i,c=t.bearing?this.normalizeBearing(t.bearing,o):o,l=t.pitch?+t.pitch:a,f=t.padding?t.padding:r.padding,p=kN.convert(t.offset),h=r.centerPoint.add(p),d=r.pointLocation(h),v=jN.convert(t.center||d);this.normalizeCenter(v);var m,g,y=r.project(d),b=r.project(v).sub(y),_=r.zoomScale(u-i);t.around&&(m=jN.convert(t.around),g=r.locationPoint(m));var x={moving:this.moving,zooming:this.zooming,rotating:this.rotating,pitching:this.pitching};return this.zooming=this.zooming||u!==i,this.rotating=this.rotating||o!==c,this.pitching=this.pitching||l!==a,this.padding=!r.isPaddingEqual(f),this.easeId=t.easeId,this.prepareEase(n,t.noMoveStart,x),clearTimeout(this.easeEndTimeoutID),this.ease((function(t){if(e.zooming&&(r.zoom=mN(i,u,t)),e.rotating&&e.rotateEnabled&&(r.bearing=mN(o,c,t)),e.pitching&&e.pitchEnabled&&(r.pitch=mN(a,l,t)),e.padding&&(r.interpolatePadding(s,f,t),h=r.centerPoint.add(p)),m)r.setLocationAtPoint(m,g);else{var d=r.zoomScale(r.zoom-i),v=u>i?Math.min(2,_):Math.max(.5,_),x=Math.pow(v,1-t),w=r.unproject(y.add(b.mult(t*x)).mult(d));r.setLocationAtPoint(r.renderWorldCopies?w.wrap():w,h)}e.fireMoveEvents(n)}),(function(t){e.afterEase(n,t)}),t),this}},{key:"flyTo",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(!t.essential&&bN()){var r=_N(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,n)}this.stop(),t=Object(Ei["merge"])({offset:[0,0],speed:1.2,curve:1.42,easing:yN},t);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u=this.getPadding(),c=t.zoom?vN(+t.zoom,i.minZoom,i.maxZoom):o,l=t.bearing?this.normalizeBearing(t.bearing,a):a,f=t.pitch?+t.pitch:s,p="padding"in t?t.padding:i.padding,h=i.zoomScale(c-o),d=kN.convert(t.offset),v=i.centerPoint.add(d),m=i.pointLocation(v),g=jN.convert(t.center||m);this.normalizeCenter(g);var y=i.project(m),b=i.project(g).sub(y),_=t.curve,x=Math.max(i.width,i.height),w=x/h,O=b.mag();if("minZoom"in t){var E=vN(Math.min(t.minZoom,o,c),i.minZoom,i.maxZoom),S=x/i.zoomScale(E-o);_=Math.sqrt(S/O*2)}var j=_*_;function A(e){var t=(w*w-x*x+(e?-1:1)*j*j*O*O)/(2*(e?w:x)*j*O);return Math.log(Math.sqrt(t*t+1)-t)}function k(e){return(Math.exp(e)-Math.exp(-e))/2}function C(e){return(Math.exp(e)+Math.exp(-e))/2}function T(e){return k(e)/C(e)}var M=A(0),P=function(e){return C(M)/C(M+_*e)},I=function(e){return x*((C(M)*T(M+_*e)-k(M))/j)/O},R=(A(1)-M)/_;if(Math.abs(O)<1e-6||!isFinite(R)){if(Math.abs(x-w)<1e-6)return this.easeTo(t,n);var L=w<x?-1:1;R=Math.abs(Math.log(w/x))/_,I=function(){return 0},P=function(e){return Math.exp(L*_*e)}}if("duration"in t)t.duration=+t.duration;else{var D="screenSpeed"in t?+t.screenSpeed/_:+t.speed;t.duration=1e3*R/D}return t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this.zooming=!0,this.rotating=a!==l,this.pitching=f!==s,this.padding=!i.isPaddingEqual(p),this.prepareEase(n,!1),this.ease((function(t){var r=t*R,h=1/P(r);i.zoom=1===t?c:o+i.scaleZoom(h),e.rotating&&(i.bearing=mN(a,l,t)),e.pitching&&(i.pitch=mN(s,f,t)),e.padding&&(i.interpolatePadding(u,p,t),v=i.centerPoint.add(d));var m=1===t?g:i.unproject(y.add(b.mult(I(r))).mult(h));i.setLocationAtPoint(i.renderWorldCopies?m.wrap():m,v),e.fireMoveEvents(n)}),(function(){return e.afterEase(n)}),t),this}},{key:"fitScreenCoordinates",value:function(e,t,n,r,i){return this.fitInternal(this.cameraForBoxAndBearing(this.transform.pointLocation(kN.convert(e)),this.transform.pointLocation(kN.convert(t)),n,r),r,i)}},{key:"stop",value:function(e,t){if(this.easeFrameId&&(this.cancelRenderFrame(this.easeFrameId),delete this.easeFrameId,delete this.onEaseFrame),this.onEaseEnd){var n=this.onEaseEnd;delete this.onEaseEnd,n.call(this,t)}return this}},{key:"normalizeBearing",value:function(e,t){e=dN(e,-180,180);var n=Math.abs(e-t);return Math.abs(e-360-t)<n&&(e-=360),Math.abs(e+360-t)<n&&(e+=360),e}},{key:"normalizeCenter",value:function(e){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}}},{key:"fireMoveEvents",value:function(e){this.emit("move",new qN("move",e)),this.zooming&&this.emit("zoom",new qN("zoom",e)),this.rotating&&this.emit("rotate",new qN("rotate",e)),this.pitching&&this.emit("rotate",new qN("pitch",e))}},{key:"prepareEase",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.moving=!0,t||n.moving||this.emit("movestart",new qN("movestart",e)),this.zooming&&!n.zooming&&this.emit("zoomstart",new qN("zoomstart",e)),this.rotating&&!n.rotating&&this.emit("rotatestart",new qN("rotatestart",e)),this.pitching&&!n.pitching&&this.emit("pitchstart",new qN("pitchstart",e))}},{key:"afterEase",value:function(e,t){if(!this.easeId||!t||this.easeId!==t){delete this.easeId;var n=this.zooming,r=this.rotating,i=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,this.padding=!1,n&&this.emit("zoomend",new qN("zoomend",e)),r&&this.emit("rotateend",new qN("rotateend",e)),i&&this.emit("pitchend",new qN("pitchend",e)),this.emit("moveend",new qN("moveend",e))}}},{key:"ease",value:function(e,t,n){!1===n.animate||0===n.duration?(e(1),t()):(this.easeStart=xN(),this.easeOptions=n,this.onEaseFrame=e,this.onEaseEnd=t,this.easeFrameId=this.requestRenderFrame(this.renderFrameCallback))}},{key:"cameraForBoxAndBearing",value:function(e,t,n,r){var i={top:0,bottom:0,right:0,left:0};if(r=Object(Ei["merge"])({padding:i,offset:[0,0],maxZoom:this.transform.maxZoom},r),"number"===typeof r.padding){var o=r.padding;r.padding={top:o,bottom:o,right:o,left:o}}r.padding=Object(Ei["merge"])(i,r.padding);var a=this.transform,s=a.padding,u=a.project(jN.convert(e)),c=a.project(jN.convert(t)),l=u.rotate(-n*Math.PI/180),f=c.rotate(-n*Math.PI/180),p=new kN(Math.max(l.x,f.x),Math.max(l.y,f.y)),h=new kN(Math.min(l.x,f.x),Math.min(l.y,f.y)),d=p.sub(h),v=(a.width-(s.left+s.right+r.padding.left+r.padding.right))/d.x,m=(a.height-(s.top+s.bottom+r.padding.top+r.padding.bottom))/d.y;if(!(m<0||v<0)){var g=Math.min(a.scaleZoom(a.scale*Math.min(v,m)),r.maxZoom),y=kN.convert(r.offset),b=(r.padding.left-r.padding.right)/2,_=(r.padding.top-r.padding.bottom)/2,x=new kN(y.x+b,y.y+_),w=x.mult(a.scale/a.zoomScale(g)),O=a.unproject(u.add(c).div(2).sub(w));return{center:O,zoom:g,bearing:n}}}},{key:"fitInternal",value:function(e,t,n){return e?(t=Object(Ei["merge"])(e,t),delete t.padding,t.linear?this.easeTo(t,n):this.flyTo(t,n)):this}}]),n}(Fo["EventEmitter"]);function KN(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=$N(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function $N(e,t){if(e){if("string"===typeof e)return QN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?QN(e,t):void 0}}function QN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var JN={},eF=JN;JN.create=function(e,t,n){var r=dr.document.createElement(e);return void 0!==t&&(r.className=t),n&&n.appendChild(r),r},JN.createNS=function(e,t){var n=dr.document.createElementNS(e,t);return n};var tF=dr.document&&dr.document.documentElement.style;function nF(e){if(!tF)return e[0];var t,n=KN(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r in tF)return r}}catch(i){n.e(i)}finally{n.f()}return e[0]}var rF,iF=nF(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);JN.disableDrag=function(){tF&&iF&&(rF=tF[iF],tF[iF]="none")},JN.enableDrag=function(){tF&&iF&&(tF[iF]=rF)};var oF=nF(["transform","WebkitTransform"]);JN.setTransform=function(e,t){e.style[oF]=t};var aF=!1;try{var sF=Object.defineProperty({},"passive",{get:function(){aF=!0}});dr.addEventListener("test",sF,sF),dr.removeEventListener("test",sF,sF)}catch(uU){aF=!1}JN.addEventListener=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};"passive"in r&&aF?e.addEventListener(t,n,r):e.addEventListener(t,n,r.capture)},JN.removeEventListener=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};"passive"in r&&aF?e.removeEventListener(t,n,r):e.removeEventListener(t,n,r.capture)};var uF=function e(t){t.preventDefault(),t.stopPropagation(),dr.removeEventListener("click",e,!0)};function cF(e){var t=lF();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function lF(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}JN.suppressClick=function(){pr||(dr.addEventListener("click",uF,!0),setTimeout((function(){dr.removeEventListener("click",uF,!0)}),0))},JN.mousePos=function(e,t){if(pr)return new kN(t.clientX-e.left-0,t.clientY-e.top-0);var n=e.getBoundingClientRect();return new kN(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},JN.touchPos=function(e,t){if(pr){var n,r=[],i=KN(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;r.push(new kN(o.clientX-e.left,o.clientY-e.top))}}catch(uU){i.e(uU)}finally{i.f()}return r}var a,s=e.getBoundingClientRect(),u=[],c=KN(t);try{for(c.s();!(a=c.n()).done;){var l=a.value;u.push(new kN(l.clientX-s.left-e.clientLeft,l.clientY-s.top-e.clientTop))}}catch(uU){c.e(uU)}finally{c.f()}return u},JN.mouseButton=function(e){return pr&&"undefined"!==typeof dr.InstallTrigger&&2===e.button&&e.ctrlKey&&dr.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},JN.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};var fF=function(e){Object(et["a"])(n,e);var t=cF(n);function n(e,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Object(Ve["a"])(this,n);var s=eF.mousePos(r.getCanvasContainer(),i),u=r.unproject(s);return o=t.call(this,e,WN()({point:s,lngLat:u,originalEvent:i},a)),o.defaultPrevented=!1,o.target=r,o}return Object(He["a"])(n,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),n}(qN);function pF(e){var t=hF();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function hF(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var dF=function(e){Object(et["a"])(n,e);var t=pF(n);function n(e,r,i){var o;Object(Ve["a"])(this,n);var a="touchend"===e?i.changedTouches:i.touches,s=eF.touchPos(r.getCanvasContainer(),a),u=s.map((function(e){return r.unproject(e)})),c=s.reduce((function(e,t,n,r){return e.add(t.div(r.length))}),new kN(0,0)),l=r.unproject(c);return o=t.call(this,e,{points:s,point:c,lngLats:u,lngLat:l,originalEvent:i}),o.defaultPrevented=!1,o}return Object(He["a"])(n,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),n}(qN);function vF(e){var t=mF();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function mF(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var gF=function(e){Object(et["a"])(n,e);var t=vF(n);function n(e,r,i){var o;return Object(Ve["a"])(this,n),o=t.call(this,e,{originalEvent:i}),o.defaultPrevented=!1,o}return Object(He["a"])(n,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),n}(qN),yF=function(){function e(t){Object(Ve["a"])(this,e),this.map=t}return Object(He["a"])(e,[{key:"reset",value:function(){this.delayContextMenu=!1,delete this.contextMenuEvent}},{key:"mousemove",value:function(e){this.map.emit(e.type,new fF(e.type,this.map,e))}},{key:"mousedown",value:function(){this.delayContextMenu=!0}},{key:"mouseup",value:function(){this.delayContextMenu=!1,this.contextMenuEvent&&(this.map.emit("contextmenu",new fF("contextmenu",this.map,this.contextMenuEvent)),delete this.contextMenuEvent)}},{key:"contextmenu",value:function(e){this.delayContextMenu?this.contextMenuEvent=e:this.map.emit(e.type,new fF(e.type,this.map,e)),this.map.listeners("contextmenu")&&e.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!0}},{key:"disable",value:function(){return!1}}]),e}(),bF=function(){function e(t,n){Object(Ve["a"])(this,e),this.map=t,this.el=t.getCanvasContainer(),this.container=t.getContainer(),this.clickTolerance=n.clickTolerance||1}return Object(He["a"])(e,[{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active}},{key:"enable",value:function(){this.isEnabled()||(this.enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this.enabled=!1)}},{key:"mousedown",value:function(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(eF.disableDrag(),this.startPos=this.lastPos=t,this.active=!0)}},{key:"mousemoveWindow",value:function(e,t){if(this.active){var n=t;if(!(this.lastPos.equals(n)||!this.box&&n.dist(this.startPos)<this.clickTolerance)){var r=this.startPos;this.lastPos=n,this.box||(this.box=eF.create("div","l7-boxzoom",this.container),this.container.classList.add("l7-crosshair"),this.fireEvent("boxzoomstart",e));var i=Math.min(r.x,n.x),o=Math.max(r.x,n.x),a=Math.min(r.y,n.y),s=Math.max(r.y,n.y);eF.setTransform(this.box,"translate(".concat(i,"px,").concat(a,"px)")),this.box&&(this.box.style.width="".concat(o-i,"px"),this.box.style.height="".concat(s-a,"px"))}}}},{key:"mouseupWindow",value:function(e,t){var n=this;if(this.active&&0===e.button){var r=this.startPos,i=t;if(this.reset(),eF.suppressClick(),r.x!==i.x||r.y!==i.y)return this.map.emit("boxzoomend",new qN("boxzoomend",{originalEvent:e})),{cameraAnimation:function(e){return e.fitScreenCoordinates(r,i,n.map.getBearing(),{linear:!0})}};this.fireEvent("boxzoomcancel",e)}}},{key:"keydown",value:function(e){this.active&&27===e.keyCode&&(this.reset(),this.fireEvent("boxzoomcancel",e))}},{key:"reset",value:function(){this.active=!1,this.container.classList.remove("l7-crosshair"),this.box&&(eF.remove(this.box),this.box=null),eF.enableDrag(),delete this.startPos,delete this.lastPos}},{key:"fireEvent",value:function(e,t){return this.map.emit(e,new qN(e,{originalEvent:t}))}}]),e}(),_F=bF,xF=function(){function e(){Object(Ve["a"])(this,e),this.reset()}return Object(He["a"])(e,[{key:"reset",value:function(){this.active=!1}},{key:"dblclick",value:function(e,t){return e.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(e.shiftKey?-1:1),around:n.unproject(t)},{originalEvent:e})}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}();function wF(e){var t=OF();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function OF(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var EF=function(e){Object(et["a"])(n,e);var t=wF(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"type","renderFrame"),e}return Object(He["a"])(n)}(qN);function SF(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=jF(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function jF(e,t){if(e){if("string"===typeof e)return AF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?AF(e,t):void 0}}function AF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kF={linearity:.3,easing:gN(0,0,.3,1)},CF=WN()({deceleration:2500,maxSpeed:1400},kF),TF=WN()({deceleration:20,maxSpeed:1400},kF),MF=WN()({deceleration:1e3,maxSpeed:360},kF),PF=WN()({deceleration:1e3,maxSpeed:90},kF),IF=function(){function e(t){Object(Ve["a"])(this,e),this.map=t,this.clear()}return Object(He["a"])(e,[{key:"clear",value:function(){this.inertiaBuffer=[]}},{key:"record",value:function(e){this.drainInertiaBuffer(),this.inertiaBuffer.push({time:xN(),settings:e})}},{key:"drainInertiaBuffer",value:function(){var e=this.inertiaBuffer,t=xN(),n=160;while(e.length>0&&t-e[0].time>n)e.shift()}},{key:"onMoveEnd",value:function(e){if(this.drainInertiaBuffer(),!(this.inertiaBuffer.length<2)){var t,n={zoom:0,bearing:0,pitch:0,pan:new kN(0,0),pinchAround:void 0,around:void 0},r=SF(this.inertiaBuffer);try{for(r.s();!(t=r.n()).done;){var i=t.value.settings;n.zoom+=i.zoomDelta||0,n.bearing+=i.bearingDelta||0,n.pitch+=i.pitchDelta||0,i.panDelta&&n.pan._add(i.panDelta),i.around&&(n.around=i.around),i.pinchAround&&(n.pinchAround=i.pinchAround)}}catch(uU){r.e(uU)}finally{r.f()}var o=this.inertiaBuffer[this.inertiaBuffer.length-1],a=o.time-this.inertiaBuffer[0].time,s={};if(n.pan.mag()){var u=LF(n.pan.mag(),a,WN()({},CF,e||{}));s.offset=n.pan.mult(u.amount/n.pan.mag()),s.center=this.map.transform.center,RF(s,u)}if(n.zoom){var c=LF(n.zoom,a,TF);s.zoom=this.map.transform.zoom+c.amount,RF(s,c)}if(n.bearing){var l=LF(n.bearing,a,MF);s.bearing=this.map.transform.bearing+vN(l.amount,-179,179),RF(s,l)}if(n.pitch){var f=LF(n.pitch,a,PF);s.pitch=this.map.transform.pitch+f.amount,RF(s,f)}if(s.zoom||s.bearing){var p=void 0===n.pinchAround?n.around:n.pinchAround;s.around=p?this.map.unproject(p):this.map.getCenter()}return this.clear(),WN()(s,{noMoveStart:!0})}}}]),e}();function RF(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function LF(e,t,n){var r=n.maxSpeed,i=n.linearity,o=n.deceleration,a=vN(e*i/(t/1e3),-r,r),s=Math.abs(a)/(o*i);return{easing:n.easing,duration:1e3*s,amount:a*(s/2)}}var DF={panStep:100,bearingStep:15,pitchStep:10},NF=function(){function e(){Object(Ve["a"])(this,e);var t=DF;this.panStep=t.panStep,this.bearingStep=t.bearingStep,this.pitchStep=t.pitchStep}return Object(He["a"])(e,[{key:"reset",value:function(){this.active=!1}},{key:"keydown",value:function(e){var t=this;if(!(e.altKey||e.ctrlKey||e.metaKey)){var n=0,r=0,i=0,o=0,a=0;switch(e.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),o=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),o=1);break;case 38:e.shiftKey?i=1:(e.preventDefault(),a=-1);break;case 40:e.shiftKey?i=-1:(e.preventDefault(),a=1);break;default:return}return{cameraAnimation:function(s){var u=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:FF,zoom:n?Math.round(u)+n*(e.shiftKey?2:1):u,bearing:s.getBearing()+r*t.bearingStep,pitch:s.getPitch()+i*t.pitchStep,offset:[-o*t.panStep,-a*t.panStep],center:s.getCenter()},{originalEvent:e})}}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}();function FF(e){return e*(2-e)}var zF,BF=NF,UF=function(){function e(t,n){Object(Ve["a"])(this,e),this.map=t,this.clickTolerance=n.clickTolerance}return Object(He["a"])(e,[{key:"reset",value:function(){delete this.mousedownPos}},{key:"wheel",value:function(e){return this.firePreventable(new gF(e.type,this.map,e))}},{key:"mousedown",value:function(e,t){return this.mousedownPos=t,this.firePreventable(new fF(e.type,this.map,e))}},{key:"mouseup",value:function(e){this.map.emit(e.type,new fF(e.type,this.map,e))}},{key:"click",value:function(e,t){this.mousedownPos&&this.mousedownPos.dist(t)>=this.clickTolerance||this.map.emit(e.type,new fF(e.type,this.map,e))}},{key:"dblclick",value:function(e){return this.firePreventable(new fF(e.type,this.map,e))}},{key:"mouseover",value:function(e){this.map.emit(e.type,new fF(e.type,this.map,e))}},{key:"mouseout",value:function(e){this.map.emit(e.type,new fF(e.type,this.map,e))}},{key:"touchstart",value:function(e){return this.firePreventable(new dF(e.type,this.map,e))}},{key:"touchmove",value:function(e){this.map.emit(e.type,new dF(e.type,this.map,e))}},{key:"touchend",value:function(e){this.map.emit(e.type,new dF(e.type,this.map,e))}},{key:"touchcancel",value:function(e){this.map.emit(e.type,new dF(e.type,this.map,e))}},{key:"firePreventable",value:function(e){if(this.map.emit(e.type,e),e.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!1}},{key:"disable",value:function(){return!1}}]),e}(),VF=0,HF=2,GF=(zF={},Object(Ge["a"])(zF,VF,1),Object(Ge["a"])(zF,HF,2),zF);function WF(e,t){var n=GF[t];return void 0===e.buttons||(e.buttons&n)!==n}var qF=function(){function e(t){Object(Ve["a"])(this,e),this.reset(),this.clickTolerance=t.clickTolerance||1}return Object(He["a"])(e,[{key:"reset",value:function(){this.active=!1,this.moved=!1,delete this.lastPoint,delete this.eventButton}},{key:"mousedown",value:function(e,t){if(!this.lastPoint){var n=eF.mouseButton(e);this.correctButton(e,n)&&(this.lastPoint=t,this.eventButton=n)}}},{key:"mousemoveWindow",value:function(e,t){var n=this.lastPoint;if(n)if(e.preventDefault(),WF(e,this.eventButton))this.reset();else if(this.moved||!(t.dist(n)<this.clickTolerance))return this.moved=!0,this.lastPoint=t,this.move(n,t)}},{key:"mouseupWindow",value:function(e){if(this.lastPoint){var t=eF.mouseButton(e);t===this.eventButton&&(this.moved&&eF.suppressClick(),this.reset())}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"correctButton",value:function(e,t){return!1}},{key:"move",value:function(e,t){}}]),e}();function ZF(e){var t=YF();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function YF(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var XF=function(e){Object(et["a"])(n,e);var t=ZF(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"mousedown",value:function(e,t){mm(Object(nt["a"])(n.prototype),"mousedown",this).call(this,e,t),this.lastPoint&&(this.active=!0)}},{key:"move",value:function(e,t){return{around:t,panDelta:t.sub(e)}}},{key:"correctButton",value:function(e,t){return t===VF&&!e.ctrlKey}}]),n}(qF);function KF(e){var t=$F();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function $F(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var QF=function(e){Object(et["a"])(n,e);var t=KF(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"correctButton",value:function(e,t){return t===VF&&e.ctrlKey||t===HF}},{key:"move",value:function(e,t){var n=-.5,r=(t.y-e.y)*n;if(r)return this.active=!0,{pitchDelta:r}}},{key:"contextmenu",value:function(e){e.preventDefault()}}]),n}(qF);function JF(e){var t=ez();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function ez(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var tz=function(e){Object(et["a"])(n,e);var t=JF(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"contextmenu",value:function(e){e.preventDefault()}},{key:"correctButton",value:function(e,t){return t===VF&&e.ctrlKey||t===HF}},{key:"move",value:function(e,t){var n=.8,r=(t.x-e.x)*n;if(r)return this.active=!0,{bearingDelta:r}}}]),n}(qF),nz=4.000244140625,rz=.01,iz=1/450,oz=2,az=function(){function e(t,n){var r=this;Object(Ve["a"])(this,e),Object(Ge["a"])(this,"onScrollFrame",(function(){if(r.frameId&&(r.frameId=null,r.isActive())){var e=r.map.transform;if(0!==r.delta){var t="wheel"===r.type&&Math.abs(r.delta)>nz?r.wheelZoomRate:r.defaultZoomRate,n=oz/(1+Math.exp(-Math.abs(r.delta*t)));r.delta<0&&0!==n&&(n=1/n);var i="number"===typeof r.targetZoom?e.zoomScale(r.targetZoom):e.scale;r.targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(i*n))),"wheel"===r.type&&(r.startZoom=e.zoom,r.easing=r.smoothOutEasing(200)),r.delta=0}var o,a="number"===typeof r.targetZoom?r.targetZoom:e.zoom,s=r.startZoom,u=r.easing,c=!1;if("wheel"===r.type&&s&&u){var l=Math.min((xN()-r.lastWheelEventTime)/200,1),f=u(l);o=mN(s,a,f),l<1?r.frameId||(r.frameId=!0):c=!0}else o=a,c=!0;return r.active=!0,c&&(r.active=!1,r.finishTimeout=setTimeout((function(){r.zooming=!1,r.handler.triggerRenderFrame(),delete r.targetZoom,delete r.finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!c,zoomDelta:o-e.zoom,around:r.aroundPoint,originalEvent:r.lastWheelEvent}}})),this.map=t,this.el=t.getCanvasContainer(),this.handler=n,this.delta=0,this.defaultZoomRate=rz,this.wheelZoomRate=iz}return Object(He["a"])(e,[{key:"setZoomRate",value:function(e){this.defaultZoomRate=e}},{key:"setWheelZoomRate",value:function(e){this.wheelZoomRate=e}},{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active||void 0!==this.finishTimeout}},{key:"isZooming",value:function(){return!!this.zooming}},{key:"enable",value:function(e){this.isEnabled()||(this.enabled=!0,this.aroundCenter=e&&"center"===e.around)}},{key:"disable",value:function(){this.isEnabled()&&(this.enabled=!1)}},{key:"wheel",value:function(e){if(this.isEnabled()){var t=e.deltaMode===window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,n=xN(),r=n-(this.lastWheelEventTime||0);this.lastWheelEventTime=n,0!==t&&t%nz===0?this.type="wheel":0!==t&&Math.abs(t)<4?this.type="trackpad":r>400?(this.type=null,this.lastValue=t,this.timeout=setTimeout(this.onTimeout,40,e)):this.type||(this.type=Math.abs(r*t)<200?"trackpad":"wheel",this.timeout&&(clearTimeout(this.timeout),this.timeout=null,t+=this.lastValue)),e.shiftKey&&t&&(t/=4),this.type&&(this.lastWheelEvent=e,this.delta-=t,this.active||this.start(e)),e.preventDefault()}}},{key:"renderFrame",value:function(){return this.onScrollFrame()}},{key:"reset",value:function(){this.active=!1}},{key:"onTimeout",value:function(e){this.type="wheel",this.delta-=this.lastValue,!this.active&&this.start&&this.start(e)}},{key:"start",value:function(e){if(this.delta){this.frameId&&(this.frameId=null),this.active=!0,this.isZooming()||(this.zooming=!0),this.finishTimeout&&(clearTimeout(this.finishTimeout),delete this.finishTimeout);var t=eF.mousePos(this.el,e);this.around=jN.convert(this.aroundCenter?this.map.getCenter():this.map.unproject(t)),this.aroundPoint=this.map.transform.locationPoint(this.around),this.frameId||(this.frameId=!0,this.handler.triggerRenderFrame())}}},{key:"smoothOutEasing",value:function(e){var t=yN;if(this.prevEase){var n=this.prevEase,r=(xN()-n.start)/n.duration,i=n.easing(r+.01)-n.easing(r),o=.27/Math.sqrt(i*i+1e-4)*.01,a=Math.sqrt(.0729-o*o);t=gN(o,a,.25,1)}return this.prevEase={start:xN(),duration:e,easing:t},t}}]),e}(),sz=az,uz=function(){function e(t,n){Object(Ve["a"])(this,e),this.clickZoom=t,this.tapZoom=n}return Object(He["a"])(e,[{key:"enable",value:function(){this.clickZoom.enable(),this.tapZoom.enable()}},{key:"disable",value:function(){this.clickZoom.disable(),this.tapZoom.disable()}},{key:"isEnabled",value:function(){return this.clickZoom.isEnabled()&&this.tapZoom.isEnabled()}},{key:"isActive",value:function(){return this.clickZoom.isActive()||this.tapZoom.isActive()}}]),e}(),cz=function(){function e(t,n,r){Object(Ve["a"])(this,e),this.el=t,this.mousePan=n,this.touchPan=r}return Object(He["a"])(e,[{key:"enable",value:function(e){this.inertiaOptions=e||{},this.mousePan.enable(),this.touchPan.enable(),pr||this.el.classList.add("l7-touch-drag-pan")}},{key:"disable",value:function(){this.mousePan.disable(),this.touchPan.disable(),pr||this.el.classList.remove("l7-touch-drag-pan")}},{key:"isEnabled",value:function(){return this.mousePan.isEnabled()&&this.touchPan.isEnabled()}},{key:"isActive",value:function(){return this.mousePan.isActive()||this.touchPan.isActive()}}]),e}(),lz=function(){function e(t,n,r){Object(Ve["a"])(this,e),this.pitchWithRotate=t.pitchWithRotate,this.mouseRotate=n,this.mousePitch=r}return Object(He["a"])(e,[{key:"enable",value:function(){this.mouseRotate.enable(),this.pitchWithRotate&&this.mousePitch.enable()}},{key:"disable",value:function(){this.mouseRotate.disable(),this.mousePitch.disable()}},{key:"isEnabled",value:function(){return this.mouseRotate.isEnabled()&&(!this.pitchWithRotate||this.mousePitch.isEnabled())}},{key:"isActive",value:function(){return this.mouseRotate.isActive()||this.mousePitch.isActive()}}]),e}(),fz=function(){function e(t,n,r,i){Object(Ve["a"])(this,e),this.el=t,this.touchZoom=n,this.touchRotate=r,this.tapDragZoom=i,this.rotationDisabled=!1,this.enabled=!0}return Object(He["a"])(e,[{key:"enable",value:function(e){this.touchZoom.enable(e),this.rotationDisabled||this.touchRotate.enable(e),this.tapDragZoom.enable(),pr||this.el.classList.add("l7-touch-zoom-rotate")}},{key:"disable",value:function(){this.touchZoom.disable(),this.touchRotate.disable(),this.tapDragZoom.disable(),pr||this.el.classList.remove("l7-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this.touchZoom.isEnabled()&&(this.rotationDisabled||this.touchRotate.isEnabled())&&this.tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this.touchZoom.isActive()||this.touchRotate.isActive()||this.tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this.rotationDisabled=!0,this.touchRotate.disable()}},{key:"enableRotation",value:function(){this.rotationDisabled=!1,this.touchZoom.isEnabled()&&this.touchRotate.enable()}}]),e}();function pz(e,t){for(var n={},r=0;r<e.length;r++)n[e[r].identifier]=t[r];return n}function hz(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=dz(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function dz(e,t){if(e){if("string"===typeof e)return vz(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vz(e,t):void 0}}function vz(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mz(e){var t,n=new kN(0,0),r=hz(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n._add(i)}}catch(uU){r.e(uU)}finally{r.f()}return n.div(e.length)}var gz=500,yz=500,bz=30,_z=function(){function e(t){Object(Ve["a"])(this,e),this.reset(),this.numTouches=t.numTouches}return Object(He["a"])(e,[{key:"reset",value:function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}},{key:"touchstart",value:function(e,t,n){(this.centroid||n.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),n.length===this.numTouches&&(this.centroid=mz(t),this.touches=pz(n,t)))}},{key:"touchmove",value:function(e,t,n){if(!this.aborted&&this.centroid){var r=pz(n,t);for(var i in this.touches)if(this.touches[i]){var o=this.touches[i],a=r[i];(!a||a.dist(o)>bz)&&(this.aborted=!0)}}}},{key:"touchend",value:function(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>yz)&&(this.aborted=!0),0===n.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}}}]),e}(),xz=function(){function e(t){Object(Ve["a"])(this,e),this.singleTap=new _z(t),this.numTaps=t.numTaps,this.reset()}return Object(He["a"])(e,[{key:"reset",value:function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(e,t,n){this.singleTap.touchstart(e,t,n)}},{key:"touchmove",value:function(e,t,n){this.singleTap.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){var r=this.singleTap.touchend(e,t,n);if(r){var i=e.timeStamp-this.lastTime<gz,o=!this.lastTap||this.lastTap.dist(r)<bz;if(i&&o||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}]),e}(),wz=function(){function e(){Object(Ve["a"])(this,e),this.tap=new xz({numTouches:1,numTaps:1}),this.reset()}return Object(He["a"])(e,[{key:"reset",value:function(){this.active=!1,delete this.swipePoint,delete this.swipeTouch,delete this.tapTime,this.tap.reset()}},{key:"touchstart",value:function(e,t,n){this.swipePoint||(this.tapTime&&e.timeStamp-this.tapTime>gz&&this.reset(),this.tapTime?n.length>0&&(this.swipePoint=t[0],this.swipeTouch=n[0].identifier):this.tap.touchstart(e,t,n))}},{key:"touchmove",value:function(e,t,n){if(this.tapTime){if(this.swipePoint){if(n[0].identifier!==this.swipeTouch)return;var r=t[0],i=r.y-this.swipePoint.y;return this.swipePoint=r,e.preventDefault(),this.active=!0,{zoomDelta:i/128}}}else this.tap.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){if(this.tapTime)this.swipePoint&&0===n.length&&this.reset();else{var r=this.tap.touchend(e,t,n);r&&(this.tapTime=e.timeStamp)}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}(),Oz=function(){function e(){Object(Ve["a"])(this,e),this.zoomIn=new xz({numTouches:1,numTaps:2}),this.zoomOut=new xz({numTouches:2,numTaps:1}),this.reset()}return Object(He["a"])(e,[{key:"reset",value:function(){this.active=!1,this.zoomIn.reset(),this.zoomOut.reset()}},{key:"touchstart",value:function(e,t,n){this.zoomIn.touchstart(e,t,n),this.zoomOut.touchstart(e,t,n)}},{key:"touchmove",value:function(e,t,n){this.zoomIn.touchmove(e,t,n),this.zoomOut.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){var r=this,i=this.zoomIn.touchend(e,t,n),o=this.zoomOut.touchend(e,t,n);return i?(this.active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(i)},{originalEvent:e})}}):o?(this.active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(o)},{originalEvent:e})}}):void 0}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}(),Ez=function(){function e(t){Object(Ve["a"])(this,e),this.minTouches=1,this.clickTolerance=t.clickTolerance||1,this.reset()}return Object(He["a"])(e,[{key:"reset",value:function(){this.active=!1,this.touches={},this.sum=new kN(0,0)}},{key:"touchstart",value:function(e,t,n){return this.calculateTransform(e,t,n)}},{key:"touchmove",value:function(e,t,n){if(this.active)return e.preventDefault(),this.calculateTransform(e,t,n)}},{key:"touchend",value:function(e,t,n){this.calculateTransform(e,t,n),this.active&&n.length<this.minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"calculateTransform",value:function(e,t,n){n.length>0&&(this.active=!0);var r=pz(n,t),i=new kN(0,0),o=new kN(0,0),a=0;for(var s in r)if(r[s]){var u=r[s],c=this.touches[s];c&&(i._add(u),o._add(u.sub(c)),a++,r[s]=u)}if(this.touches=r,!(a<this.minTouches)&&o.mag()){var l=o.div(a);if(this.sum._add(l),!(this.sum.mag()<this.clickTolerance)){var f=i.div(a);return{around:f,panDelta:l}}}}}]),e}(),Sz=function(){function e(){Object(Ve["a"])(this,e),this.reset()}return Object(He["a"])(e,[{key:"reset",value:function(){this.active=!1,delete this.firstTwoTouches}},{key:"start",value:function(e){}},{key:"move",value:function(e,t,n){}},{key:"touchstart",value:function(e,t,n){this.firstTwoTouches||n.length<2||(this.firstTwoTouches=[n[0].identifier,n[1].identifier],this.start([t[0],t[1]]))}},{key:"touchmove",value:function(e,t,n){if(this.firstTwoTouches){e.preventDefault();var r=Object(Oi["a"])(this.firstTwoTouches,2),i=r[0],o=r[1],a=jz(n,t,i),s=jz(n,t,o);if(a&&s){var u=this.aroundCenter?null:a.add(s).div(2);return this.move([a,s],u,e)}}}},{key:"touchend",value:function(e,t,n){if(this.firstTwoTouches){var r=Object(Oi["a"])(this.firstTwoTouches,2),i=r[0],o=r[1],a=jz(n,t,i),s=jz(n,t,o);a&&s||(this.active&&eF.suppressClick(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(e){this.enabled=!0,this.aroundCenter=!!e&&"center"===e.around}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}();function jz(e,t,n){for(var r=0;r<e.length;r++)if(e[r].identifier===n)return t[r]}function Az(e){var t=kz();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function kz(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Cz(e){return Math.abs(e.y)>Math.abs(e.x)}var Tz=100,Mz=function(e){Object(et["a"])(n,e);var t=Az(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"reset",value:function(){mm(Object(nt["a"])(n.prototype),"reset",this).call(this),this.valid=void 0,delete this.firstMove,delete this.lastPoints}},{key:"start",value:function(e){this.lastPoints=e,Cz(e[0].sub(e[1]))&&(this.valid=!1)}},{key:"move",value:function(e,t,n){var r=e[0].sub(this.lastPoints[0]),i=e[1].sub(this.lastPoints[1]);if(this.valid=this.gestureBeginsVertically(r,i,n.timeStamp),this.valid){this.lastPoints=e,this.active=!0;var o=(r.y+i.y)/2,a=-.5;return{pitchDelta:o*a}}}},{key:"gestureBeginsVertically",value:function(e,t,n){if(void 0!==this.valid)return this.valid;var r=2,i=e.mag()>=r,o=t.mag()>=r;if(i||o){if(!i||!o)return void 0===this.firstMove&&(this.firstMove=n),n-this.firstMove<Tz&&void 0;var a=e.y>0===t.y>0;return Cz(e)&&Cz(t)&&a}}}]),n}(Sz);function Pz(e){var t=Iz();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Iz(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Rz=25;function Lz(e,t){return 180*e.angleWith(t)/Math.PI}var Dz=function(e){Object(et["a"])(n,e);var t=Pz(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"reset",value:function(){mm(Object(nt["a"])(n.prototype),"reset",this).call(this),delete this.minDiameter,delete this.startVector,delete this.vector}},{key:"start",value:function(e){this.startVector=this.vector=e[0].sub(e[1]),this.minDiameter=e[0].dist(e[1])}},{key:"move",value:function(e,t){var n=this.vector;if(this.vector=e[0].sub(e[1]),this.active||!this.isBelowThreshold(this.vector))return this.active=!0,{bearingDelta:Lz(this.vector,n),pinchAround:t}}},{key:"isBelowThreshold",value:function(e){this.minDiameter=Math.min(this.minDiameter,e.mag());var t=Math.PI*this.minDiameter,n=Rz/t*360,r=Lz(e,this.startVector);return Math.abs(r)<n}}]),n}(Sz);function Nz(e){var t=Fz();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function Fz(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var zz=.1;function Bz(e,t){return Math.log(e/t)/Math.LN2}var Uz=function(e){Object(et["a"])(n,e);var t=Nz(n);function n(){return Object(Ve["a"])(this,n),t.apply(this,arguments)}return Object(He["a"])(n,[{key:"reset",value:function(){mm(Object(nt["a"])(n.prototype),"reset",this).call(this),delete this.distance,delete this.startDistance}},{key:"start",value:function(e){this.startDistance=this.distance=e[0].dist(e[1])}},{key:"move",value:function(e,t){var n=this.distance;if(this.distance=e[0].dist(e[1]),this.active||!(Math.abs(Bz(this.distance,this.startDistance))<zz))return this.active=!0,{zoomDelta:Bz(this.distance,n),pinchAround:t}}}]),n}(Sz);function Vz(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Hz(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function Hz(e,t){if(e){if("string"===typeof e)return Gz(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gz(e,t):void 0}}function Gz(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wz=function(e){return e.zoom||e.drag||e.pitch||e.rotate};function qz(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}var Zz=function(){function e(t,n){var r=this;Object(Ve["a"])(this,e),Object(Ge["a"])(this,"handleWindowEvent",(function(e){r.handleEvent(e,"".concat(e.type,"Window"))})),Object(Ge["a"])(this,"handleEvent",(function(e,t){if("blur"!==e.type){r.updatingCamera=!0;var n,i="renderFrame"===e.type?void 0:e,o={needsRenderFrame:!1},a={},s={},u=e.touches?r.getMapTouches(e.touches):void 0,c=u?eF.touchPos(r.el,u):eF.mousePos(r.el,e),l=Vz(r.handlers);try{for(l.s();!(n=l.n()).done;){var f=n.value,p=f.handlerName,h=f.handler,d=f.allowed;if(h.isEnabled()){var v=void 0;if(r.blockedByActive(s,d,p))h.reset();else{var m=t||e.type;h&&h[m]&&(v=h[m](e,c,u),r.mergeIHandlerResult(o,a,v,p,i),v&&v.needsRenderFrame&&r.triggerRenderFrame())}(v||h.isActive())&&(s[p]=h)}}}catch(uU){l.e(uU)}finally{l.f()}var g={};for(var y in r.previousActiveHandlers)s[y]||(g[y]=i);r.previousActiveHandlers=s,(Object.keys(g).length||qz(o))&&(r.changes.push([o,a,g]),r.triggerRenderFrame()),(Object.keys(s).length||qz(o))&&r.map.stop(!0),r.updatingCamera=!1;var b=o.cameraAnimation;b&&(r.inertia.clear(),r.fireEvents({},{}),r.changes=[],b(r.map))}else r.stop()})),this.map=t,this.el=this.map.getCanvasContainer(),this.handlers=[],this.handlersById={},this.changes=[],this.inertia=new IF(t),this.bearingSnap=n.bearingSnap,this.rotateEnabled=n.rotateEnabled,this.pitchEnabled=n.pitchEnabled,this.previousActiveHandlers={},this.eventsInProgress={},this.addDefaultHandlers(n);var i=this.el;if(this.listeners=[],pr)dr.document.addEventListener("touchstart",(function(e){r.handleEvent(e)}),{}),dr.document.addEventListener("touchmove",(function(e){r.handleEvent(e)}),{}),dr.document.addEventListener("touchend",(function(e){r.handleEvent(e)}),{}),dr.document.addEventListener("touchcancel",(function(e){r.handleEvent(e)}),{});else{this.listeners=[[i,"touchstart",{passive:!1}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[window.document,"mousemove",{capture:!0}],[window.document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[window,"blur",void 0]];var o,a=Vz(this.listeners);try{for(a.s();!(o=a.n()).done;){var s=Object(Oi["a"])(o.value,3),u=s[0],c=s[1],l=s[2];eF.addEventListener(u,c,u===window.document?this.handleWindowEvent:this.handleEvent,l)}}catch(uU){a.e(uU)}finally{a.f()}}}return Object(He["a"])(e,[{key:"destroy",value:function(){var e,t=Vz(this.listeners);try{for(t.s();!(e=t.n()).done;){var n=Object(Oi["a"])(e.value,3),r=n[0],i=n[1],o=n[2];eF.removeEventListener(r,i,r===window.document?this.handleWindowEvent:this.handleEvent,o)}}catch(uU){t.e(uU)}finally{t.f()}}},{key:"stop",value:function(){if(!this.updatingCamera){var e,t=Vz(this.handlers);try{for(t.s();!(e=t.n()).done;){var n=e.value.handler;n.reset()}}catch(uU){t.e(uU)}finally{t.f()}this.inertia.clear(),this.fireEvents({},{}),this.changes=[]}}},{key:"isActive",value:function(){var e,t=Vz(this.handlers);try{for(t.s();!(e=t.n()).done;){var n=e.value.handler;if(n.isActive())return!0}}catch(uU){t.e(uU)}finally{t.f()}return!1}},{key:"isZooming",value:function(){return!!this.eventsInProgress.zoom||this.map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this.eventsInProgress.rotate}},{key:"isMoving",value:function(){return Boolean(Wz(this.eventsInProgress))||this.isZooming()}},{key:"mergeIHandlerResult",value:function(e,t,n,r,i){if(n){Object(Ei["merge"])(e,n);var o={handlerName:r,originalEvent:n.originalEvent||i};void 0!==n.zoomDelta&&(t.zoom=o),void 0!==n.panDelta&&(t.drag=o),void 0!==n.pitchDelta&&(t.pitch=o),void 0!==n.bearingDelta&&(t.rotate=o)}}},{key:"triggerRenderFrame",value:function(){var e=this;void 0===this.frameId&&(this.frameId=this.map.requestRenderFrame((function(t){delete e.frameId,e.handleEvent(new EF("renderFrame",{timeStamp:t})),e.applyChanges()})))}},{key:"addDefaultHandlers",value:function(e){var t=this.map,n=t.getCanvasContainer();this.add("mapEvent",new UF(t,e));var r=t.boxZoom=new _F(t,e);this.add("boxZoom",r);var i=new Oz,o=new xF;t.doubleClickZoom=new uz(o,i),this.add("tapZoom",i),this.add("clickZoom",o);var a=new wz;this.add("tapDragZoom",a);var s=t.touchPitch=new Mz;this.add("touchPitch",s);var u=new QF(e),c=new tz(e);t.dragRotate=new lz(e,u,c),this.add("mouseRotate",u,["mousePitch"]),this.add("mousePitch",c,["mouseRotate"]);var l=new XF(e),f=new Ez(e);t.dragPan=new cz(n,l,f),this.add("mousePan",l),this.add("touchPan",f,["touchZoom","touchRotate"]);var p=new Dz,h=new Uz;t.touchZoomRotate=new fz(n,h,p,a),this.add("touchRotate",p,["touchPan","touchZoom"]),this.add("touchZoom",h,["touchPan","touchRotate"]);var d=t.scrollZoom=new sz(t,this);this.add("scrollZoom",d,["mousePan"]);var v=t.keyboard=new BF;this.add("keyboard",v),this.add("blockableMapEvent",new yF(t));for(var m=0,g=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];m<g.length;m++){var y=g[m];e.interactive&&e[y]&&t[y].enable(e[y])}}},{key:"add",value:function(e,t,n){this.handlers.push({handlerName:e,handler:t,allowed:n}),this.handlersById[e]=t}},{key:"blockedByActive",value:function(e,t,n){for(var r in e)if(r!==n&&(!t||t.indexOf(r)<0))return!0;return!1}},{key:"getMapTouches",value:function(e){var t,n=[],r=Vz(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,o=i.target;(pr||this.el.contains(o))&&n.push(i)}}catch(uU){r.e(uU)}finally{r.f()}return n}},{key:"applyChanges",value:function(){var e,t={},n={},r={},i=Vz(this.changes);try{for(i.s();!(e=i.n()).done;){var o=Object(Oi["a"])(e.value,3),a=o[0],s=o[1],u=o[2];a.panDelta&&(t.panDelta=(t.panDelta||new kN(0,0))._add(a.panDelta)),a.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+a.zoomDelta),a.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+a.bearingDelta),a.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+a.pitchDelta),void 0!==a.around&&(t.around=a.around),void 0!==a.pinchAround&&(t.pinchAround=a.pinchAround),a.noInertia&&(t.noInertia=a.noInertia),Object(Ei["merge"])(n,s),Object(Ei["merge"])(r,u)}}catch(uU){i.e(uU)}finally{i.f()}this.updateMapTransform(t,n,r),this.changes=[]}},{key:"updateMapTransform",value:function(e,t,n){var r=this.map,i=r.transform;if(!qz(e))return this.fireEvents(t,n);var o=e.panDelta,a=e.zoomDelta,s=e.bearingDelta,u=e.pitchDelta,c=e.pinchAround,l=e.around;void 0!==c&&(l=c),r.stop(!0),l=l||r.transform.centerPoint;var f=i.pointLocation(o?l.sub(o):l);s&&this.rotateEnabled&&(i.bearing+=s),u&&this.pitchEnabled&&(i.pitch+=u),a&&(i.zoom+=a),i.setLocationAtPoint(f,l),this.map.update(),e.noInertia||this.inertia.record(e),this.fireEvents(t,n)}},{key:"fireEvents",value:function(e,t){var n=this,r=Wz(this.eventsInProgress),i=Wz(e),o={};for(var a in e)if(e[a]){var s=e[a].originalEvent;this.eventsInProgress[a]||(o["".concat(a,"start")]=s),this.eventsInProgress[a]=e[a]}for(var u in!r&&i&&this.fireEvent("movestart",i.originalEvent),o)o[u]&&this.fireEvent(u,o[u]);for(var c in e.rotate&&(this.bearingChanged=!0),i&&this.fireEvent("move",i.originalEvent),e)if(e[c]){var l=e[c].originalEvent;this.fireEvent(c,l)}var f,p={};for(var h in this.eventsInProgress)if(this.eventsInProgress[h]){var d=this.eventsInProgress[h],v=d.handlerName,m=d.originalEvent;this.handlersById[v].isActive()||(delete this.eventsInProgress[h],f=t[v]||m,p["".concat(h,"end")]=f)}for(var g in p)p[g]&&this.fireEvent(g,p[g]);var y=Wz(this.eventsInProgress);if((r||i)&&!y){this.updatingCamera=!0;var b=this.inertia.onMoveEnd(this.map.dragPan.inertiaOptions),_=function(e){return 0!==e&&-n.bearingSnap<e&&e<n.bearingSnap};b?(_(b.bearing||this.map.getBearing())&&(b.bearing=0),this.map.easeTo(b,{originalEvent:f})):(this.map.emit("moveend",new qN("moveend",{originalEvent:f})),_(this.map.getBearing())&&this.map.resetNorth()),this.bearingChanged=!1,this.updatingCamera=!1}}},{key:"fireEvent",value:function(e,t){this.map.emit(e,new qN(e,t?{originalEvent:t}:{}))}}]),e}(),Yz=Zz,Xz=null,Kz=[],$z=30,Qz=1e3/$z,Jz=dr.performance,eB={create:"create",load:"load",fullLoad:"fullLoad"},tB={mark:function(e){Jz.mark(e)},frame:function(e){var t=e;if(null!=Xz){var n=t-Xz;Kz.push(n)}Xz=t},clearMetrics:function(){for(var e in Xz=null,Kz=[],Jz.clearMeasures("loadTime"),Jz.clearMeasures("fullLoadTime"),eB)Jz.clearMarks(eB[e])},getPerformanceMetrics:function(){var e=Jz.measure("loadTime",eB.create,eB.load).duration,t=Jz.measure("fullLoadTime",eB.create,eB.fullLoad).duration,n=Kz.length,r=Kz.reduce((function(e,t){return e+t}),0)/n/1e3,i=1/r,o=Kz.filter((function(e){return e>Qz})).reduce((function(e,t){return e+(t-Qz)/Qz}),0),a=o/(n+o)*100;return{loadTime:e,fullLoadTime:t,fps:i,percentDroppedFrames:a}}};function nB(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=rB(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function rB(e,t){if(e){if("string"===typeof e)return iB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iB(e,t):void 0}}function iB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oB=function(){function e(){Object(Ve["a"])(this,e),this.queue=[],this.id=0,this.cleared=!1,this.currentlyRunning=!1}return Object(He["a"])(e,[{key:"add",value:function(e){var t=++this.id,n=this.queue;return n.push({callback:e,id:t,cancelled:!1}),t}},{key:"remove",value:function(e){var t,n=this.currentlyRunning,r=n?this.queue.concat(n):this.queue,i=nB(r);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(o.id===e)return void(o.cancelled=!0)}}catch(uU){i.e(uU)}finally{i.f()}}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.currentlyRunning=this.queue;this.queue=[];var n,r=nB(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.cancelled&&(i.callback(e),this.cleared))break}}catch(uU){r.e(uU)}finally{r.f()}this.cleared=!1,this.currentlyRunning=!1}},{key:"clear",value:function(){this.currentlyRunning&&(this.cleared=!0),this.queue=[]}}]),e}(),aB=oB;function sB(e,t){var n="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,r="undefined"!==typeof wx&&null!==wx&&("undefined"!==typeof wx.request||"undefined"!==typeof wx.miniProgram);if(!n&&!r&&(t||(t=document),t)){var i=t.head||t.getElementsByTagName("head")[0];if(!i){i=t.createElement("head");var o=t.body||t.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(i,o):t.documentElement.appendChild(i)}var a=t.createElement("style");return a.type="text/css",a.styleSheet?a.styleSheet.cssText=e:a.appendChild(t.createTextNode(e)),i.appendChild(a),a}}sB(".l7-map {\n  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;\n  overflow: hidden;\n  position: relative;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\n.l7-canvas {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.l7-map:-webkit-full-screen {\n  width: 100%;\n  height: 100%;\n}\n\n.l7-canary {\n  background-color: salmon;\n}\n\n.l7-canvas-container.l7-interactive,\n.l7-ctrl-group button.l7-ctrl-compass {\n  cursor: -webkit-grab;\n  cursor: grab;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.l7-canvas-container.l7-interactive.l7-track-pointer {\n  cursor: pointer;\n}\n\n.l7-canvas-container.l7-interactive:active,\n.l7-ctrl-group button.l7-ctrl-compass:active {\n  cursor: -webkit-grabbing;\n  cursor: grabbing;\n}\n\n.l7-canvas-container.l7-touch-zoom-rotate,\n.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {\n  -ms-touch-action: pan-x pan-y;\n      touch-action: pan-x pan-y;\n}\n\n.l7-canvas-container.l7-touch-drag-pan,\n.l7-canvas-container.l7-touch-drag-pan .l7-canvas {\n  -ms-touch-action: pinch-zoom;\n      touch-action: pinch-zoom;\n}\n\n.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,\n.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {\n  -ms-touch-action: none;\n      touch-action: none;\n}\n\n.l7-ctrl-top-left,\n.l7-ctrl-top-right,\n.l7-ctrl-bottom-left,\n.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }\n.l7-ctrl-top-left     { top: 0; left: 0; }\n.l7-ctrl-top-right    { top: 0; right: 0; }\n.l7-ctrl-bottom-left  { bottom: 0; left: 0; }\n.l7-ctrl-bottom-right { right: 0; bottom: 0; }\n\n.l7-ctrl {\n  clear: both;\n  pointer-events: auto;\n\n  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */\n  -webkit-transform: translate(0, 0);\n          transform: translate(0, 0);\n}\n.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }\n.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }\n.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }\n.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }\n\n\n.l7-crosshair,\n.l7-crosshair .l7-interactive,\n.l7-crosshair .l7-interactive:active {\n    cursor: crosshair;\n}\n\n.l7-boxzoom {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 0;\n    height: 0;\n    background: #fff;\n    border: 2px dotted #202020;\n    opacity: 0.5;\n    z-index: 10;\n}\n");var uB=function(){function e(t){var n=this;Object(Ve["a"])(this,e),Object(Ge["a"])(this,"onHashChange",(function(){var e=n.getCurrentHash();if(e.length>=3&&!e.some((function(e){return isNaN(+e)}))){var t=n.map.dragRotate.isEnabled()&&n.map.touchZoomRotate.isEnabled()?+(e[3]||0):n.map.getBearing();return n.map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1})),Object(Ge["a"])(this,"getCurrentHash",(function(){var e,t=window.location.hash.replace("#","");return n.hashName?(t.split("&").map((function(e){return e.split("=")})).forEach((function(t){t[0]===n.hashName&&(e=t)})),(e&&e[1]||"").split("/")):t.split("/")})),Object(Ge["a"])(this,"updateHashUnthrottled",(function(){var e=n.getHashString();try{window.history.replaceState(window.history.state,"",e)}catch(t){}})),this.hashName=t&&encodeURIComponent(t),this.updateHash=Object(Ei["throttle"])(this.updateHashUnthrottled,300)}return Object(He["a"])(e,[{key:"addTo",value:function(e){return this.map=e,dr.addEventListener("hashchange",this.onHashChange,!1),this.map.on("moveend",this.updateHash),this}},{key:"remove",value:function(){return dr.removeEventListener("hashchange",this.onHashChange,!1),this.map.off("moveend",this.updateHash),delete this.map,this}},{key:"getHashString",value:function(e){var t=this.map.getCenter(),n=Math.round(100*this.map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(t.lng*i)/i,a=Math.round(t.lat*i)/i,s=this.map.getBearing(),u=this.map.getPitch(),c="";if(c+=e?"/".concat(o,"/").concat(a,"/").concat(n):"".concat(n,"/").concat(a,"/").concat(o),(s||u)&&(c+="/".concat(Math.round(10*s)/10)),u&&(c+="/".concat(Math.round(u))),this.hashName){var l=this.hashName,f=!1,p=window.location.hash.slice(1).split("&").map((function(e){var t=e.split("=")[0];return t===l?(f=!0,"".concat(t,"=").concat(c)):e})).filter((function(e){return e}));return f||p.push("".concat(l,"=").concat(c)),"#".concat(p.join("&"))}return"#".concat(c)}}]),e}(),cB=uB;function lB(e){var t=fB();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function fB(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function pB(e,t){var n="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,r="undefined"!==typeof wx&&null!==wx&&("undefined"!==typeof wx.request||"undefined"!==typeof wx.miniProgram);if(!n&&!r&&(t||(t=document),t)){var i=t.head||t.getElementsByTagName("head")[0];if(!i){i=t.createElement("head");var o=t.body||t.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(i,o):t.documentElement.appendChild(i)}var a=t.createElement("style");return a.type="text/css",a.styleSheet?a.styleSheet.cssText=e:a.appendChild(t.createTextNode(e)),i.appendChild(a),a}}pB(".l7-map {\n  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;\n  overflow: hidden;\n  position: relative;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\n.l7-canvas {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.l7-map:-webkit-full-screen {\n  width: 100%;\n  height: 100%;\n}\n\n.l7-canary {\n  background-color: salmon;\n}\n\n.l7-canvas-container.l7-interactive,\n.l7-ctrl-group button.l7-ctrl-compass {\n  cursor: -webkit-grab;\n  cursor: grab;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.l7-canvas-container.l7-interactive.l7-track-pointer {\n  cursor: pointer;\n}\n\n.l7-canvas-container.l7-interactive:active,\n.l7-ctrl-group button.l7-ctrl-compass:active {\n  cursor: -webkit-grabbing;\n  cursor: grabbing;\n}\n\n.l7-canvas-container.l7-touch-zoom-rotate,\n.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {\n  -ms-touch-action: pan-x pan-y;\n      touch-action: pan-x pan-y;\n}\n\n.l7-canvas-container.l7-touch-drag-pan,\n.l7-canvas-container.l7-touch-drag-pan .l7-canvas {\n  -ms-touch-action: pinch-zoom;\n      touch-action: pinch-zoom;\n}\n\n.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,\n.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {\n  -ms-touch-action: none;\n      touch-action: none;\n}\n\n.l7-ctrl-top-left,\n.l7-ctrl-top-right,\n.l7-ctrl-bottom-left,\n.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }\n.l7-ctrl-top-left     { top: 0; left: 0; }\n.l7-ctrl-top-right    { top: 0; right: 0; }\n.l7-ctrl-bottom-left  { bottom: 0; left: 0; }\n.l7-ctrl-bottom-right { right: 0; bottom: 0; }\n\n.l7-ctrl {\n  clear: both;\n  pointer-events: auto;\n\n  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */\n  -webkit-transform: translate(0, 0);\n          transform: translate(0, 0);\n}\n.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }\n.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }\n.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }\n.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }\n\n\n.l7-crosshair,\n.l7-crosshair .l7-interactive,\n.l7-crosshair .l7-interactive:active {\n    cursor: crosshair;\n}\n\n.l7-boxzoom {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 0;\n    height: 0;\n    background: #fff;\n    border: 2px dotted #202020;\n    opacity: 0.5;\n    z-index: 10;\n}\n");var hB,dB,vB=-2,mB=22,gB=0,yB=60,bB={hash:!1,zoom:-1,center:[112,32],pitch:0,bearing:0,interactive:!0,minZoom:vB,maxZoom:mB,minPitch:gB,maxPitch:yB,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,trackResize:!0,renderWorldCopies:!0,pitchEnabled:!0,rotateEnabled:!0},_B=function(e){Object(et["a"])(n,e);var t=lB(n);function n(e){var r;if(Object(Ve["a"])(this,n),r=t.call(this,Object(Ei["merge"])({},bB,e)),Object(Ge["a"])(Object(gt["a"])(r),"renderTaskQueue",new aB),Object(Ge["a"])(Object(gt["a"])(r),"trackResize",!0),Object(Ge["a"])(Object(gt["a"])(r),"onWindowOnline",(function(){r.update()})),Object(Ge["a"])(Object(gt["a"])(r),"onWindowResize",(function(e){r.trackResize&&r.resize({originalEvent:e}).update()})),pr?r.initMiniContainer():r.initContainer(),r.resize(),r.handlers=new Yz(Object(gt["a"])(r),r.options),"undefined"!==typeof window&&(window.addEventListener("online",r.onWindowOnline,!1),window.addEventListener("resize",r.onWindowResize,!1),window.addEventListener("orientationchange",r.onWindowResize,!1)),!pr){var i="string"===typeof e.hash&&e.hash||void 0;e.hash&&(r.hash=new cB(i).addTo(Object(gt["a"])(r)))}return r.hash&&r.hash.onHashChange()||(r.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(r.resize(),r.fitBounds(e.bounds,Object(Ei["merge"])({},e.fitBoundsOptions,{duration:0})))),r}return Object(He["a"])(n,[{key:"resize",value:function(e){var t=this.containerDimensions(),n=Object(Oi["a"])(t,2),r=n[0],i=n[1];if(this.transform.resize(r,i),pr)return this;var o=!this.moving;return o&&(this.stop(),this.emit("movestart",new dr.Event("movestart",e)),this.emit("move",new dr.Event("move",e))),this.emit("resize",new dr.Event("resize",e)),o&&this.emit("moveend",new dr.Event("moveend",e)),this}},{key:"getContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getCanvasContainer",value:function(){return this.canvasContainer}},{key:"project",value:function(e){return this.transform.locationPoint(jN.convert(e))}},{key:"unproject",value:function(e){return this.transform.pointLocation(kN.convert(e))}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(e){this.transform.setMaxBounds(AN.convert(e))}},{key:"setStyle",value:function(e){}},{key:"setMinZoom",value:function(e){if(e=null===e||void 0===e?vB:e,e>=vB&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between ".concat(vB," and the current maxZoom, inclusive"))}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(e){if(e=null===e||void 0===e?mB:e,e>=this.transform.minZoom)return this.transform.maxZoom=e,this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(e){if(e=null===e||void 0===e?gB:e,e<gB)throw new Error("minPitch must be greater than or equal to ".concat(gB));if(e>=gB&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between ".concat(gB," and the current maxPitch, inclusive"))}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(e){if(e=null===e||void 0===e?yB:e,e>yB)throw new Error("maxPitch must be less than or equal to ".concat(yB));if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(e){this.transform.renderWorldCopies=!!e}},{key:"remove",value:function(){this.container.removeChild(this.canvasContainer),this.canvasContainer=null,this.frame&&(this.frame.cancel(),this.frame=null),this.renderTaskQueue.clear()}},{key:"requestRenderFrame",value:function(e){return this.update(),this.renderTaskQueue.add(e)}},{key:"cancelRenderFrame",value:function(e){return this.renderTaskQueue.remove(e)}},{key:"triggerRepaint",value:function(){var e=this;this.frame||(this.frame=EN((function(t){tB.frame(t),e.frame=null,e.update(t)})))}},{key:"update",value:function(e){var t=this;this.frame||(this.frame=EN((function(n){tB.frame(n),t.frame=null,t.renderTaskQueue.run(e)})))}},{key:"initContainer",value:function(){if("string"===typeof this.options.container){if(this.container=window.document.getElementById(this.options.container),!this.container)throw new Error("Container '".concat(this.options.container,"' not found."))}else{if(!(this.options.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this.container=this.options.container}var e=this.container;e.classList.add("l7-map");var t=this.canvasContainer=r.create("div","l7-canvas-container",e);this.options.interactive&&t.classList.add("l7-interactive")}},{key:"initMiniContainer",value:function(){this.container=this.options.canvas,this.canvasContainer=this.container}},{key:"containerDimensions",value:function(){var e=0,t=0;return this.container&&(pr?(e=this.container.width/dr.devicePixelRatio,t=this.container.height/dr.devicePixelRatio):(e=this.container.clientWidth,t=this.container.clientHeight,e=0===e?400:e,t=0===t?300:t)),[e,t]}}]),n}(XN),xB=["id","style","rotation","mapInstance","version","mapSize","interactive"],wB=["id","style","rotation","mapInstance","canvas","hasBaseMap"];function OB(e){var t=EB();return function(){var n,r=Object(nt["a"])(e);if(t){var i=Object(nt["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(tt["a"])(this,n)}}function EB(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var SB=12;hB=Object(pp["injectable"])(),hB(dB=function(e){Object(et["a"])(n,e);var t=OB(n);function n(){var e;Object(Ve["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object(Ge["a"])(Object(gt["a"])(e),"version",nx.DEFUALT),Object(Ge["a"])(Object(gt["a"])(e),"handleMiniCameraChanged",(function(t,n,r,i,o){var a=e.config.offsetCoordinate,s=void 0===a||a;e.viewport.syncWithMapCamera({bearing:i,center:[t,n],viewportHeight:e.map.transform.height,pitch:o,viewportWidth:e.map.transform.width,zoom:r,cameraHeight:0}),e.viewport.getZoom()>SB&&s?e.coordinateSystemService.setCoordinateSystem(Ph.LNGLAT_OFFSET):e.coordinateSystemService.setCoordinateSystem(Ph.LNGLAT),e.cameraChangedCallback(e.viewport)})),e}return Object(He["a"])(n,[{key:"lngLatToCoord",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0,z:0},n=this.lngLatToMercator(e,0),r=n.x,i=n.y;return[r-t.x,i-t.y]}},{key:"lngLatToMercator",value:function(e,t){var n=zN.fromLngLat(e,t),r=n.x,i=void 0===r?0:r,o=n.y,a=void 0===o?0:o,s=n.z,u=void 0===s?0:s;return{x:i,y:a,z:u}}},{key:"getModelMatrix",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{x:0,y:0,z:0},o=zN.fromLngLat(e,t),s=o.meterInMercatorCoordinateUnits(),c=a.create();return a.translate(c,c,u.fromValues(o.x-i.x,o.y-i.y,o.z||0-i.z)),a.scale(c,c,u.fromValues(s*r[0],-s*r[1],s*r[2])),a.rotateX(c,c,n[0]),a.rotateY(c,c,n[1]),a.rotateZ(c,c,n[2]),c}},{key:"init",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o,a,s,u,c,l,f,p,h,d,v,m=this;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.config,n=t.id,r=void 0===n?"map":n,i=t.style,o=void 0===i?"light":i,a=t.rotation,s=void 0===a?0:a,u=t.mapInstance,c=t.version,l=void 0===c?"DEFAULTMAP":c,f=t.mapSize,p=void 0===f?1e4:f,h=t.interactive,d=void 0===h||h,v=Object(Cv["a"])(t,xB),this.viewport=new LL,this.version=l,this.simpleMapCoord.setSize(p),l===nx.SIMPLE&&v.center&&(v.center=this.simpleMapCoord.unproject(v.center)),u?(this.map=u,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatMapContainer(r),this.map=new _B(Object(N["a"])({container:this.$mapContainer,style:this.getMapStyleValue(o),bearing:s},v))),this.map.on("load",(function(){m.handleCameraChanged()})),d&&this.map.on("move",this.handleCameraChanged),setTimeout((function(){m.handleCameraChanged()}),100),this.handleCameraChanged();case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"initMiniMap",value:function(){var e=Object(ae["a"])(ue.a.mark((function e(){var t,n,r,i,o,a,s,u,c,l,f,p,h=this;return ue.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.config,n=t.id,void 0===n?"map":n,r=t.style,i=void 0===r?"light":r,o=t.rotation,a=void 0===o?0:o,t.mapInstance,s=t.canvas,u=void 0===s?null:s,c=t.hasBaseMap,l=void 0!==c&&c,f=Object(Cv["a"])(t,wB),this.viewport=new LL,this.$mapContainer=u,this.map=new _B(Object(N["a"])({container:this.$mapContainer,style:this.getMapStyleValue(i),bearing:a,canvas:u},f)),l?(p=this.map.getCenter(),this.handleMiniCameraChanged(p.lng,p.lat,this.map.getZoom(),this.map.getBearing(),this.map.getPitch()),dr.document.addEventListener("mapCameaParams",(function(e){var t=e.e,n=t.longitude,r=t.latitude,i=t.scale,o=t.bearing,a=t.pitch;h.handleMiniCameraChanged(n,r,i-1.25,o,a)}))):(this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged());case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"exportMap",value:function(e){var t=this.map.getCanvas(),n="jpg"===e?null===t||void 0===t?void 0:t.toDataURL("image/jpeg"):null===t||void 0===t?void 0:t.toDataURL("image/png");return n}}]),n}(MD));var jB=n("PpiC"),AB=["type","position"],kB={exportImage:l_,fullscreen:x_,geoLocate:E_,layer:A_,layerSwitch:A_,logo:T_,mapTheme:L_,mouseLocation:F_,zoom:G_,scale:U_},CB=f.a.memo((function(e){var t=h(),n=Object(l["useRef"])(),r=e.type,i=e.position,o=Object(jB["a"])(e,AB);return Object(l["useEffect"])((()=>{var e=kB[r],a=new e(Object(d["a"])({position:i},o));return n.current=a,t.addControl(a),()=>{n.current=void 0,t.removeControl(a)}}),[r]),Object(l["useEffect"])((()=>{n.current&&n.current.setPosition(i||"bottomleft")}),[i]),null})),TB=n("i8i4"),MB=l["useEffect"],PB=l["useState"],IB=/\B([A-Z])/g,RB=function(e){return e.replace(IB,"-$1").toLowerCase()};function LB(e){var t=e.className,n=e.style,r=e.children,i=e.position,o=PB(),a=Object(v["a"])(o,2),s=a[0],u=a[1],c=h(),l=PB((()=>document.createElement("div"))),f=Object(v["a"])(l,1),p=f[0];return MB((()=>{var e=new qb({position:i});return e.onAdd=()=>{if(t&&(p.className=t),n){var e=Object.keys(n).map((e=>"".concat(RB(e),":").concat(n[e]))).join(";");p.style.cssText=e}return p},e.onRemove=()=>{},u(e),c.addControl(e),()=>{c.removeControl(e)}}),[]),MB((()=>{s&&s.setPosition(i||"bottomleft")}),[i]),Object(TB["createPortal"])(r,p)}var DB=Object(l["createContext"])({});function NB(){return Object(l["useContext"])(DB)}var FB=n("Y+p1"),zB=n.n(FB),BB=l["memo"]((function(e){var t=e.layer,n=e.active;return t.active(n.option),null}),zB.a),UB=l["memo"]((function(e){var t=e.layer,n=e.animate;return t.animate(n),null}),zB.a),VB=l["memo"]((function(e){var t=e.layer,n=e.color;return n.field?t.color(n.field,n.values):t.color(n.values),null}),zB.a),HB=l["memo"]((function(e){var t=e.layer,n=e.filter;return n.field&&t.filter(n.field,n.values),null}),zB.a),GB=l["memo"]((function(e){var t=e.layer,n=e.scale;return t.scale(n.values),null}),zB.a),WB=l["memo"]((function(e){var t=e.layer,n=e.select;return t.select(n.option),null}),zB.a),qB=l["memo"]((function(e){var t=e.layer,n=e.shape;return n.field?t.shape(n.field,n.values):t.shape(n.values),null}),zB.a),ZB=l["memo"]((function(e){var t=e.layer,n=e.size;return n.field?t.size(n.field,n.values):t.size(n.values),null}),zB.a),YB=["data"],XB=l["memo"]((function(e){var t=e.layer,n=e.source,r=n.data,i=Object(jB["a"])(n,YB);return t.inited?t.setData(r,i):t.source(r,i),i.autoFit&&t.fitBounds(i&&i.fitBoundsOptions),null}),zB.a),KB=(l["useEffect"],l["memo"]((function(e){var t=e.layer,n=e.style;return t.style(n),null}),zB.a)),$B=l["useEffect"],QB=l["useState"];function JB(e,t){var n=t.source,r=t.color,i=t.shape,o=t.style,a=t.size,s=t.scale,u=t.active,c=t.select,l=t.filter,f=t.animate,p=t.options,d=t.onLayerLoaded,m=h(),g=QB((()=>{var t;switch(e){case"polygonLayer":t=new Gj(p);break;case"lineLayer":t=new BE(p);break;case"pointLayer":t=new hj(p);break;case"heatmapLayer":t=new dO(p);break;case"rasterLayer":t=new pA(p);break;case"imageLayer":t=new EO(p);break;case"citybuildingLayer":t=new Dw(p);break;default:t=new Gj(p)}return t.on("inited",(()=>{d&&d(t,m)})),t})),y=Object(v["a"])(g,1),b=y[0];return $B((()=>(m.addLayer(b),()=>{m.removeLayer(b)})),[]),$B((()=>{b.inited&&p&&b.updateLayerConfig(p)}),[null===p||void 0===p?void 0:p.minZoom,null===p||void 0===p?void 0:p.maxZoom,null===p||void 0===p?void 0:p.visible]),$B((()=>{b.inited&&null!==p&&void 0!==p&&p.zIndex&&b.setIndex(p.zIndex)}),[null===p||void 0===p?void 0:p.zIndex]),$B((()=>{b.inited&&null!==p&&void 0!==p&&p.blend&&b.setBlend(p.blend)}),[null===p||void 0===p?void 0:p.blend]),$B((()=>{m.render()})),Object(OD["jsxs"])(DB.Provider,{value:b,children:[Object(OD["jsx"])(XB,{layer:b,source:n}),s&&Object(OD["jsx"])(GB,{layer:b,scale:s}),r&&Object(OD["jsx"])(VB,{layer:b,color:r}),a&&Object(OD["jsx"])(ZB,{layer:b,size:a}),i&&Object(OD["jsx"])(qB,{layer:b,shape:i}),o&&Object(OD["jsx"])(KB,{layer:b,style:o}),u&&Object(OD["jsx"])(BB,{layer:b,active:u}),c&&Object(OD["jsx"])(WB,{layer:b,select:c}),l&&Object(OD["jsx"])(HB,{layer:b,filter:l}),f&&Object(OD["jsx"])(UB,{layer:b,animate:f}),t.children]})}var eU=l["memo"]((function(e){return JB("polygonLayer",e)})),tU=l["memo"]((function(e){return JB("pointLayer",e)})),nU=l["memo"]((function(e){return JB("heatmapLayer",e)})),rU=l["memo"]((function(e){return JB("imageLayer",e)})),iU=l["useEffect"],oU=l["memo"]((e=>{var t=e.type,n=e.handler,r=NB();return iU((()=>(r.off(t,n),r.on(t,n),()=>{r.off(t,n)})),[t,n]),null}));class aU extends l["PureComponent"]{constructor(e){super(e),this.el=void 0,this.scene=void 0,this.popup=void 0,this.el=document.createElement("div")}componentDidMount(){var e,t=this.props,n=t.lnglat,r=t.children,i=t.option,o=t.lngLat,a=new Z_(Object(d["a"])(Object(d["a"])({},i),{},{stopPropagation:null===(e=this.props.option)||void 0===e?void 0:e.stopPropagation}));n&&a.setLnglat(n),o&&a.setLnglat(o),r&&a.setHTML(this.el),this.popup=a,this.scene.addPopup(a)}componentDidUpdate(e){var t,n,r,i,o,a,s,u=Array.isArray(e.lnglat)?e.lnglat:[null===e||void 0===e||null===(t=e.lnglat)||void 0===t?void 0:t.lng,null===e||void 0===e||null===(n=e.lnglat)||void 0===n?void 0:n.lat],c=Array.isArray(this.props.lnglat)?this.props.lnglat:[null===(r=this.props)||void 0===r||null===(i=r.lnglat)||void 0===i?void 0:i.lng,null===(o=this.props)||void 0===o||null===(a=o.lnglat)||void 0===a?void 0:a.lat],l=u.toString()!==c.toString();l&&(this.popup.remove(),this.popup=new Z_(Object(d["a"])(Object(d["a"])({},this.props.option),{},{stopPropagation:null===(s=this.props.option)||void 0===s?void 0:s.stopPropagation})),this.popup.setLnglat(this.props.lnglat),this.popup.setHTML(this.el),this.scene.addPopup(this.popup))}componentWillUnmount(){this.popup.remove()}render(){return l["createElement"](p.Consumer,{},(e=>(e&&(this.scene=e),Object(TB["createPortal"])(this.props.children,this.el))))}}class sU extends l["PureComponent"]{constructor(e){super(e),this.el=void 0,this.scene=void 0,this.marker=void 0,this.el=document.createElement("div")}componentDidMount(){var e=this.props,t=e.lnglat,n=e.children,r=e.option,i=e.onMarkerLoaded,o=new Ub(r);t&&o.setLnglat(t),n&&o.setElement(this.el),this.marker=o,i&&i(o),this.scene.addMarker(o)}componentDidUpdate(e){var t,n=JSON.stringify(null===e||void 0===e?void 0:e.lnglat)!==JSON.stringify(null===(t=this.props)||void 0===t?void 0:t.lnglat);n&&this.props.lnglat&&this.marker.setLnglat(this.props.lnglat)}componentWillUnmount(){this.marker&&this.marker.remove()}render(){return l["createElement"](p.Consumer,{},(e=>(e&&(this.scene=e),Object(TB["createPortal"])(this.props.children,this.el))))}}l["useEffect"],l["useEffect"]},"/GqU":function(e,t,n){var r=n("RK3t"),i=n("HYAF");e.exports=function(e){return r(i(e))}},"/Yfv":function(e,t,n){var r=n("dOgj");r("Int8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},"/b8u":function(e,t,n){var r=n("STAE");e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},"/byt":function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"/qmn":function(e,t,n){var r=n("2oRo");e.exports=r.Promise},"/xke":function(e,t,n){"use strict";n.r(t);n("EFp3"),n("rSSe")},0:function(e,t,n){e.exports=n("tB8F")},"03A+":function(e,t,n){var r=n("JTzB"),i=n("ExA7"),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},"07d7":function(e,t,n){var r=n("AO7/"),i=n("busE"),o=n("sEFX");r||i(Object.prototype,"toString",o,{unsafe:!0})},"0BK2":function(e,t){e.exports={}},"0Bia":function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),i=n.n(r),o=n("dEAq"),a=n("9kvl"),s=(n("mdU6"),function(e){var t=e.location,n=Object(r["useContext"])(o["context"]),s=n.base,u=n.locale,c=n.config.locales,l=c.find((function(e){var t=e.name;return t!==u}));function f(e){var n=s.replace("/".concat(u),""),r=t.pathname.replace(new RegExp("^".concat(s,"(/|$)")),"".concat(n,"$1"))||"/";if(e!==c[0].name){var i="".concat(n,"/").concat(e).replace(/\/\//,"/"),o=t.pathname.replace(s.replace(/^\/$/,"//"),"");return"".concat(i).concat(o).replace(/\/$/,"")}return r}return l?i.a.createElement("div",{className:"__dumi-default-locale-select","data-locale-count":c.length},c.length>2?i.a.createElement("select",{value:u,onChange:function(e){return a["a"].push(f(e.target.value))}},c.map((function(e){return i.a.createElement("option",{value:e.name,key:e.name},e.label)}))):i.a.createElement(o["Link"],{to:f(l.name)},l.label)):null}),u=s,c=(n("fVI1"),function(e){var t=e.onMobileMenuClick,n=e.navPrefix,a=e.location,s=e.darkPrefix,c=Object(r["useContext"])(o["context"]),l=c.base,f=c.config,p=f.mode,h=f.title,d=f.logo,v=c.nav;return i.a.createElement("div",{className:"__dumi-default-navbar","data-mode":p},i.a.createElement("button",{className:"__dumi-default-navbar-toggle",onClick:t}),i.a.createElement(o["Link"],{className:"__dumi-default-navbar-logo",style:{backgroundImage:d&&"url('".concat(d,"')")},to:l,"data-plaintext":!1===d||void 0},h),i.a.createElement("nav",null,n,v.map((function(e){var t,n=Boolean(null===(t=e.children)||void 0===t?void 0:t.length)&&i.a.createElement("ul",null,e.children.map((function(e){return i.a.createElement("li",{key:e.path},i.a.createElement(o["NavLink"],{to:e.path},e.title))})));return i.a.createElement("span",{key:e.title||e.path},e.path?i.a.createElement(o["NavLink"],{to:e.path,key:e.path},e.title):e.title,n)})),i.a.createElement("div",{className:"__dumi-default-navbar-tool"},i.a.createElement(u,{location:a}),s)))}),l=c,f=(n("hJnp"),["slugs"]);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function h(e,t){if(null==e)return{};var n,r,i=d(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function d(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var v=function(e){var t=e.slugs,n=h(e,f);return i.a.createElement("ul",p({role:"slug-list"},n),t.filter((function(e){var t=e.depth;return t>1&&t<4})).map((function(e){return i.a.createElement("li",{key:e.heading,title:e.value,"data-depth":e.depth},i.a.createElement(o["AnchorLink"],{to:"#".concat(e.heading)},i.a.createElement("span",null,e.value)))})))},m=v,g=(n("Mpie"),function(e){var t=e.mobileMenuCollapsed,n=e.location,a=e.darkPrefix,s=Object(r["useContext"])(o["context"]),c=s.config,l=c.logo,f=c.title,p=c.description,h=c.mode,d=c.repository.url,v=s.menu,g=s.nav,y=s.base,b=s.meta,_=Boolean((b.hero||b.features||b.gapless)&&"site"===h)||!1===b.sidemenu||void 0;return i.a.createElement("div",{className:"__dumi-default-menu","data-mode":h,"data-hidden":_,"data-mobile-show":!t||void 0},i.a.createElement("div",{className:"__dumi-default-menu-inner"},i.a.createElement("div",{className:"__dumi-default-menu-header"},i.a.createElement(o["Link"],{to:y,className:"__dumi-default-menu-logo",style:{backgroundImage:l&&"url('".concat(l,"')")}}),i.a.createElement("h1",null,f),i.a.createElement("p",null,p),/github\.com/.test(d)&&"doc"===h&&i.a.createElement("p",null,i.a.createElement("object",{type:"image/svg+xml",data:"https://img.shields.io/github/stars".concat(d.match(/((\/[^\/]+){2})$/)[1],"?style=social")}))),i.a.createElement("div",{className:"__dumi-default-menu-mobile-area"},!!g.length&&i.a.createElement("ul",{className:"__dumi-default-menu-nav-list"},g.map((function(e){var t,n=Boolean(null===(t=e.children)||void 0===t?void 0:t.length)&&i.a.createElement("ul",null,e.children.map((function(e){return i.a.createElement("li",{key:e.path||e.title},i.a.createElement(o["NavLink"],{to:e.path},e.title))})));return i.a.createElement("li",{key:e.path||e.title},e.path?i.a.createElement(o["NavLink"],{to:e.path},e.title):e.title,n)}))),i.a.createElement(u,{location:n}),a),i.a.createElement("ul",{className:"__dumi-default-menu-list"},!_&&v.map((function(e){var t,r=Boolean(null===(t=b.slugs)||void 0===t?void 0:t.length),a=e.children&&Boolean(e.children.length),s="menu"===b.toc&&!a&&r&&e.path===n.pathname.replace(/([^^])\/$/,"$1"),u=a?e.children.map((function(e){return e.path})):[e.path,n.pathname.startsWith("".concat(e.path,"/"))&&b.title===e.title?n.pathname:null];return i.a.createElement("li",{key:e.path||e.title},i.a.createElement(o["NavLink"],{to:e.path,isActive:function(){return u.includes(n.pathname)}},e.title),Boolean(e.children&&e.children.length)&&i.a.createElement("ul",null,e.children.map((function(e){return i.a.createElement("li",{key:e.path},i.a.createElement(o["NavLink"],{to:e.path,exact:!0},i.a.createElement("span",null,e.title)),Boolean("menu"===b.toc&&"undefined"!==typeof window&&e.path===n.pathname&&r)&&i.a.createElement(m,{slugs:b.slugs}))}))),s&&i.a.createElement(m,{slugs:b.slugs}))})))))}),y=g;n("AK2Z");function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}function _(e,t){return S(e)||E(e,t)||w(e,t)||x()}function x(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(e,t){if(e){if("string"===typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),t&&o.length===t)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function S(e){if(Array.isArray(e))return e}var j=function(e,t){var n=t.toLowerCase().indexOf(e.toLowerCase()),r=e.length;return i.a.createElement(i.a.Fragment,null,t.substring(0,n),i.a.createElement("span",{className:"__dumi-default-search-highlight"},t.substring(n,n+r)),t.substring(n+r,t.length))},A=function(){var e=Object(r["useState"])(""),t=_(e,2),n=t[0],a=t[1],s=Object(r["useState"])([]),u=_(s,2),c=u[0],l=u[1],f=Object(r["useRef"])(),p=Object(o["useSearch"])(n),h=i.a.createElement("svg",{className:"__dumi-default-search-empty",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2347",width:"32",height:"32"},i.a.createElement("path",{d:"M855.6 427.2H168.5c-12.7 0-24.4 6.9-30.6 18L4.4 684.7C1.5 689.9 0 695.8 0 701.8v287.1c0 19.4 15.7 35.1 35.1 35.1H989c19.4 0 35.1-15.7 35.1-35.1V701.8c0-6-1.5-11.8-4.4-17.1L886.2 445.2c-6.2-11.1-17.9-18-30.6-18zM673.4 695.6c-16.5 0-30.8 11.5-34.3 27.7-12.7 58.5-64.8 102.3-127.2 102.3s-114.5-43.8-127.2-102.3c-3.5-16.1-17.8-27.7-34.3-27.7H119c-26.4 0-43.3-28-31.1-51.4l81.7-155.8c6.1-11.6 18-18.8 31.1-18.8h622.4c13 0 25 7.2 31.1 18.8l81.7 155.8c12.2 23.4-4.7 51.4-31.1 51.4H673.4zM819.9 209.5c-1-1.8-2.1-3.7-3.2-5.5-9.8-16.6-31.1-22.2-47.8-12.6L648.5 261c-17 9.8-22.7 31.6-12.6 48.4 0.9 1.4 1.7 2.9 2.5 4.4 9.5 17 31.2 22.8 48 13L807 257.3c16.7-9.7 22.4-31 12.9-47.8zM375.4 261.1L255 191.6c-16.7-9.6-38-4-47.8 12.6-1.1 1.8-2.1 3.6-3.2 5.5-9.5 16.8-3.8 38.1 12.9 47.8L337.3 327c16.9 9.7 38.6 4 48-13.1 0.8-1.5 1.7-2.9 2.5-4.4 10.2-16.8 4.5-38.6-12.4-48.4zM512 239.3h2.5c19.5 0.3 35.5-15.5 35.5-35.1v-139c0-19.3-15.6-34.9-34.8-35.1h-6.4C489.6 30.3 474 46 474 65.2v139c0 19.5 15.9 35.4 35.5 35.1h2.5z"}));return Object(r["useEffect"])((function(){Array.isArray(p)?l(p):"function"===typeof p&&p(".".concat(f.current.className))}),[p]),i.a.createElement("div",{className:"__dumi-default-search"},i.a.createElement("input",b({className:"__dumi-default-search-input",type:"search",ref:f},Array.isArray(p)?{value:n,onChange:function(e){return a(e.target.value)}}:{})),i.a.createElement("ul",null,c.length>0&&c.map((function(e){var t;return i.a.createElement("li",{key:e.path,onClick:function(){return a("")}},i.a.createElement(o["AnchorLink"],{to:e.path},(null===(t=e.parent)||void 0===t?void 0:t.title)&&i.a.createElement("span",null,e.parent.title),j(n,e.title)))})),0===c.length&&n&&i.a.createElement("li",{style:{textAlign:"center"}},h)))};n("Zkgb");function k(e,t){return I(e)||P(e,t)||T(e,t)||C()}function C(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function T(e,t){if(e){if("string"===typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),t&&o.length===t)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function I(e){if(Array.isArray(e))return e}var R=function(e){var t=e.darkSwitch,n=e.onDarkSwitchClick,r=e.isSideMenu,a=["dark","light","auto"],s=Object(o["usePrefersColor"])(),u=k(s,2),c=u[0],l=u[1],f=c,p=i.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4026",width:"22",height:"22"},i.a.createElement("path",{d:"M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z","p-id":"4027"})),h=i.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3854",width:"22",height:"22"},i.a.createElement("path",{d:"M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z","p-id":"3855"})),d=i.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"11002",width:"22",height:"22"},i.a.createElement("path",{d:"M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z","p-id":"11003"})),v=a.filter((function(e){return e!==f})),m=function(e,t){!r&&n&&n(e),t!==f&&l(t)},g=function(e){switch(e){case"dark":return i.a.createElement("button",{key:"dumi-dark-btn-moon",title:"Dark theme",onClick:function(t){return m(t,e)},className:"__dumi-default-dark-moon ".concat(e===f?"__dumi-default-dark-switch-active":"")},h);case"light":return i.a.createElement("button",{key:"dumi-dark-btn-sun",title:"Light theme",onClick:function(t){return m(t,e)},className:"__dumi-default-dark-sun ".concat(e===f?"__dumi-default-dark-switch-active":"")},p);case"auto":return i.a.createElement("button",{key:"dumi-dark-btn-auto",title:"Default to system",onClick:function(t){return m(t,e)},className:"__dumi-default-dark-auto ".concat(e===f?"__dumi-default-dark-switch-active":"")},d);default:}};return i.a.createElement("div",{className:"__dumi-default-dark"},i.a.createElement("div",{className:"__dumi-default-dark-switch ".concat(!r&&t?"__dumi-default-dark-switch-open":"")},r?a.map((function(e){return g(e)})):g(f)),!r&&t&&i.a.createElement("div",{className:"__dumi-default-dark-switch-list"},v.map((function(e){return g(e)}))))},L=R;n("AQPS");function D(e,t){return U(e)||B(e,t)||F(e,t)||N()}function N(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function F(e,t){if(e){if("string"===typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),t&&o.length===t)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function U(e){if(Array.isArray(e))return e}var V=function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"__dumi-default-layout-hero"},e.image&&i.a.createElement("img",{src:e.image}),i.a.createElement("h1",null,e.title),i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.desc}}),e.actions&&e.actions.map((function(e){return i.a.createElement(o["Link"],{to:e.link,key:e.text},i.a.createElement("button",{type:"button"},e.text))}))))},H=function(e){return i.a.createElement("div",{className:"__dumi-default-layout-features"},e.map((function(e){return i.a.createElement("dl",{key:e.title,style:{backgroundImage:e.icon?"url(".concat(e.icon,")"):void 0}},e.link?i.a.createElement(o["Link"],{to:e.link},i.a.createElement("dt",null,e.title)):i.a.createElement("dt",null,e.title),i.a.createElement("dd",{dangerouslySetInnerHTML:{__html:e.desc}}))})))},G=function(e){var t,n,a=e.children,s=e.location,u=Object(r["useContext"])(o["context"]),c=u.config,f=c.mode,p=c.repository,h=(u.nav,u.meta),d=u.locale,v=p.url,g=p.branch,b=p.platform,_=Object(r["useState"])(!0),x=D(_,2),w=x[0],O=x[1],E=Object(r["useState"])(!1),S=D(E,2),j=S[0],k=S[1],C="site"===f,T=C&&h.hero,M=C&&h.features,P=!1!==h.sidemenu&&!T&&!M&&!h.gapless,I=!T&&!M&&Boolean(null===(t=h.slugs)||void 0===t?void 0:t.length)&&("content"===h.toc||void 0===h.toc)&&!h.gapless,R=/^zh|cn$/i.test(d),N=new Date(h.updatedTime),F="".concat(N.toLocaleDateString([],{hour12:!1})," ").concat(N.toLocaleTimeString([],{hour12:!1})),z={github:"GitHub",gitlab:"GitLab"}[(null===(n=(v||"").match(/(github|gitlab)/))||void 0===n?void 0:n[1])||"nothing"]||b;return i.a.createElement("div",{className:"__dumi-default-layout","data-route":s.pathname,"data-show-sidemenu":String(P),"data-show-slugs":String(I),"data-site-mode":C,"data-gapless":String(!!h.gapless),onClick:function(){k(!1),w||O(!0)}},i.a.createElement(l,{location:s,navPrefix:i.a.createElement(A,null),darkPrefix:i.a.createElement(L,{darkSwitch:j,onDarkSwitchClick:function(e){k((function(e){return!e})),e.stopPropagation()},isSideMenu:!1}),onMobileMenuClick:function(e){O((function(e){return!e})),e.stopPropagation()}}),i.a.createElement(y,{darkPrefix:i.a.createElement(L,{darkSwitch:j,isSideMenu:!0}),mobileMenuCollapsed:w,location:s}),I&&i.a.createElement(m,{slugs:h.slugs,className:"__dumi-default-layout-toc"}),T&&V(h.hero),M&&H(h.features),i.a.createElement("div",{className:"__dumi-default-layout-content"},a,!T&&!M&&h.filePath&&!h.gapless&&i.a.createElement("div",{className:"__dumi-default-layout-footer-meta"},z&&i.a.createElement(o["Link"],{to:"".concat(v,"/edit/").concat(g,"/").concat(h.filePath)},R?"\u5728 ".concat(z," \u4e0a\u7f16\u8f91\u6b64\u9875"):"Edit this doc on ".concat(z)),i.a.createElement("span",{"data-updated-text":R?"\u6700\u540e\u66f4\u65b0\u65f6\u95f4\uff1a":"Last update: "},F)),(T||M)&&h.footer&&i.a.createElement("div",{className:"__dumi-default-layout-footer",dangerouslySetInnerHTML:{__html:h.footer}})))};t["default"]=G},"0Cz8":function(e,t,n){var r=n("Xi7e"),i=n("ebwN"),o=n("e4Nc"),a=200;function s(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<a-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(e,t),this.size=n.size,this}e.exports=s},"0Dky":function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"0GbY":function(e,t,n){var r=n("Qo9l"),i=n("2oRo"),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e])||o(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},"0eef":function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},"0gSV":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tagged=void 0;var r=n("GXnB"),i=n("Ztfv");function o(e,t){return function(n,o,a){var s=new r.Metadata(e,t);"number"===typeof a?i.tagParameter(n,o,a,s):i.tagProperty(n,o,s)}}t.tagged=o},"0iz5":function(e,t,n){"use strict";var r=n("q1tI"),i=n.n(r),o=n("9/5/"),a=n.n(o),s=n("hKI/"),u=n.n(s);function c(){return"undefined"===typeof document||"undefined"===typeof document.visibilityState||"hidden"!==document.visibilityState}function l(){return"undefined"===typeof navigator.onLine||navigator.onLine}var f=new Map,p=function(e,t,n){var r=f.get(e);(null===r||void 0===r?void 0:r.timer)&&clearTimeout(r.timer);var i=void 0;t>-1&&(i=setTimeout((function(){f["delete"](e)}),t)),f.set(e,{data:n,timer:i,startTime:(new Date).getTime()})},h=function(e){var t=f.get(e);return{data:null===t||void 0===t?void 0:t.data,startTime:null===t||void 0===t?void 0:t.startTime}},d=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{while((void 0===t||t-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a},v=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e};function m(e,t){var n=!1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];n||(n=!0,e.apply(void 0,v(r)),setTimeout((function(){n=!1}),t))}}var g=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{while((void 0===t||t-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a},y=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e};function b(e){var t=Object(r["useRef"])((function(){throw new Error("Cannot call an event handler while rendering.")}));t.current=e;var n=Object(r["useCallback"])((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.current;if(r)return r.apply(void 0,y(e))}),[t]);if("function"===typeof e)return n}var _=b,x=function(e,t){var n=Object(r["useRef"])(!1);Object(r["useEffect"])((function(){return function(){n.current=!1}}),[]),Object(r["useEffect"])((function(){if(n.current)return e();n.current=!0}),t)},w=x,O=[];function E(e){return O.push(e),function(){var t=O.indexOf(e);O.splice(t,1)}}var S=!1;if("undefined"!==typeof window&&window.addEventListener&&!S){var j=function(){if(c()&&l())for(var e=0;e<O.length;e++){var t=O[e];t()}};window.addEventListener("visibilitychange",j,!1),window.addEventListener("focus",j,!1),S=!0}var A=E,k=[];function C(e){return k.push(e),function(){var t=k.indexOf(e);k.splice(t,1)}}var T=!1;if("undefined"!==typeof window&&window.addEventListener&&!T){var M=function(){if(c())for(var e=0;e<k.length;e++){var t=k[e];t()}};window.addEventListener("visibilitychange",M,!1),T=!0}var P=C,I=function(){return I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},I.apply(this,arguments)},R=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{while((void 0===t||t-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a},L=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(R(arguments[t]));return e},D="AHOOKS_USE_REQUEST_DEFAULT_KEY",N=function(){function e(e,t,n,r){this.count=0,this.pollingWhenVisibleFlag=!1,this.pollingTimer=void 0,this.loadingDelayTimer=void 0,this.unsubscribe=[],this.that=this,this.state={loading:!1,params:[],data:void 0,error:void 0,run:this.run.bind(this.that),mutate:this.mutate.bind(this.that),refresh:this.refresh.bind(this.that),cancel:this.cancel.bind(this.that),unmount:this.unmount.bind(this.that)},this.service=e,this.config=t,this.subscribe=n,r&&(this.state=I(I({},this.state),r)),this.debounceRun=this.config.debounceInterval?a()(this._run,this.config.debounceInterval):void 0,this.throttleRun=this.config.throttleInterval?u()(this._run,this.config.throttleInterval):void 0,this.limitRefresh=m(this.refresh.bind(this),this.config.focusTimespan),this.config.pollingInterval&&this.unsubscribe.push(P(this.rePolling.bind(this))),this.config.refreshOnWindowFocus&&this.unsubscribe.push(A(this.limitRefresh.bind(this)))}return e.prototype.setState=function(e){void 0===e&&(e={}),this.state=I(I({},this.state),e),this.subscribe(this.state)},e.prototype._run=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.pollingTimer&&clearTimeout(this.pollingTimer),this.loadingDelayTimer&&clearTimeout(this.loadingDelayTimer),this.count+=1;var r=this.count;return this.setState({loading:!this.config.loadingDelay,params:t}),this.config.loadingDelay&&(this.loadingDelayTimer=setTimeout((function(){e.setState({loading:!0})}),this.config.loadingDelay)),this.service.apply(this,L(t)).then((function(n){if(r!==e.count)return new Promise((function(){}));e.loadingDelayTimer&&clearTimeout(e.loadingDelayTimer);var i=e.config.formatResult?e.config.formatResult(n):n;return e.setState({data:i,error:void 0,loading:!1}),e.config.onSuccess&&e.config.onSuccess(i,t),i}))["catch"]((function(n){if(r!==e.count)return new Promise((function(){}));if(e.loadingDelayTimer&&clearTimeout(e.loadingDelayTimer),e.setState({data:void 0,error:n,loading:!1}),e.config.onError&&e.config.onError(n,t),e.config.throwOnError)throw n;return console.error(n),Promise.reject("useRequest has caught the exception, if you need to handle the exception yourself, you can set options.throwOnError to true.")}))["finally"]((function(){if(r===e.count&&e.config.pollingInterval){if(!c()&&!e.config.pollingWhenHidden)return void(e.pollingWhenVisibleFlag=!0);e.pollingTimer=setTimeout((function(){e._run.apply(e,L(t))}),e.config.pollingInterval)}}))},e.prototype.run=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.debounceRun?(this.debounceRun.apply(this,L(e)),Promise.resolve(null)):this.throttleRun?(this.throttleRun.apply(this,L(e)),Promise.resolve(null)):this._run.apply(this,L(e))},e.prototype.cancel=function(){this.debounceRun&&this.debounceRun.cancel(),this.throttleRun&&this.throttleRun.cancel(),this.loadingDelayTimer&&clearTimeout(this.loadingDelayTimer),this.pollingTimer&&clearTimeout(this.pollingTimer),this.pollingWhenVisibleFlag=!1,this.count+=1,this.setState({loading:!1})},e.prototype.refresh=function(){return this.run.apply(this,L(this.state.params))},e.prototype.rePolling=function(){this.pollingWhenVisibleFlag&&(this.pollingWhenVisibleFlag=!1,this.refresh())},e.prototype.mutate=function(e){"function"===typeof e?this.setState({data:e(this.state.data)||{}}):this.setState({data:e})},e.prototype.unmount=function(){this.cancel(),this.unsubscribe.forEach((function(e){e()}))},e}();function F(e,t){var n,i=t||{},o=i.refreshDeps,a=void 0===o?[]:o,s=i.manual,u=void 0!==s&&s,c=i.onSuccess,l=void 0===c?function(){}:c,f=i.onError,d=void 0===f?function(){}:f,v=i.defaultLoading,m=void 0!==v&&v,g=i.loadingDelay,y=i.pollingInterval,b=void 0===y?0:y,x=i.pollingWhenHidden,O=void 0===x||x,E=i.defaultParams,S=void 0===E?[]:E,j=i.refreshOnWindowFocus,A=void 0!==j&&j,k=i.focusTimespan,C=void 0===k?5e3:k,T=i.fetchKey,M=i.cacheKey,P=i.cacheTime,F=void 0===P?3e5:P,z=i.staleTime,B=void 0===z?0:z,U=i.debounceInterval,V=i.throttleInterval,H=i.initialData,G=i.ready,W=void 0===G||G,q=i.throwOnError,Z=void 0!==q&&q,Y=Object(r["useRef"])(D),X=_(e),K=_(l),$=_(d),Q=_(T);"formatResult"in i&&(n=i.formatResult);var J=_(n),ee={formatResult:J,onSuccess:K,onError:$,loadingDelay:g,pollingInterval:b,pollingWhenHidden:O,refreshOnWindowFocus:!u&&A,focusTimespan:C,debounceInterval:U,throttleInterval:V,throwOnError:Z},te=_((function(e,t){ie((function(n){return n[e]=t,I({},n)}))})),ne=R(Object(r["useState"])((function(){var e;if(M){var t=null===(e=h(M))||void 0===e?void 0:e.data;if(t){Y.current=t.newstFetchKey;var n={};return Object.keys(t.fetches).forEach((function(e){var r=t.fetches[e],i=new N(X,ee,te.bind(null,e),{loading:r.loading,params:r.params,data:r.data,error:r.error});n[e]=i.state})),n}}return{}})),2),re=ne[0],ie=ne[1],oe=Object(r["useRef"])(re);oe.current=re;var ae=Object(r["useRef"])(),se=Object(r["useCallback"])((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(W){if(Q){var n=Q.apply(void 0,L(e));Y.current=void 0===n?D:n}var r=Y.current,i=oe.current[r];if(!i){var o=new N(X,ee,te.bind(null,r),{data:H});i=o.state,ie((function(e){return e[r]=i,I({},e)}))}return i.run.apply(i,L(e))}ae.current=e}),[T,te,W]),ue=Object(r["useRef"])(se);ue.current=se,w((function(){M&&p(M,F,{fetches:re,newstFetchKey:Y.current})}),[M,re]);var ce=Object(r["useRef"])(!1);w((function(){W&&(!ce.current&&ae.current&&ue.current.apply(ue,L(ae.current)),ce.current=!0)}),[W]),Object(r["useEffect"])((function(){var e;if(!u)if(Object.keys(re).length>0){var t=M&&(null===(e=h(M))||void 0===e?void 0:e.startTime)||0;-1===B||(new Date).getTime()-t<=B||Object.values(re).forEach((function(e){e.refresh()}))}else ue.current.apply(ue,L(S))}),[]);var le=Object(r["useCallback"])((function(){Object.values(oe.current).forEach((function(e){e.unmount()})),Y.current=D,ie({}),oe.current={}}),[ie]);w((function(){u||Object.values(oe.current).forEach((function(e){e.refresh()}))}),L(a)),Object(r["useEffect"])((function(){return function(){Object.values(oe.current).forEach((function(e){e.unmount()}))}}),[]);var fe=Object(r["useCallback"])((function(e){return function(){console.warn("You should't call "+e+" when service not executed once.")}}),[]);return I(I({loading:W&&!u||m,data:H,error:void 0,params:[],cancel:fe("cancel"),refresh:fe("refresh"),mutate:fe("mutate")},re[Y.current]||{}),{run:se,fetches:re,reset:le})}var z=F,B=function(){return B=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},B.apply(this,arguments)},U=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},V=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{while((void 0===t||t-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a},H=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(V(arguments[t]));return e};function G(e,t){var n=t.refreshDeps,i=void 0===n?[]:n,o=t.ref,a=t.isNoMore,s=t.threshold,u=void 0===s?100:s,c=(t.fetchKey,U(t,["refreshDeps","ref","isNoMore","threshold","fetchKey"])),l=V(Object(r["useState"])(!1),2),f=l[0],p=l[1];Object(r["useEffect"])((function(){t.fetchKey&&console.warn("useRequest loadMore mode don't need fetchKey!")}),[]);var h=z(e,B(B({},c),{fetchKey:function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.list)||void 0===t?void 0:t.length)||0},onSuccess:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];p(!1),t.onSuccess&&t.onSuccess.apply(t,H(e))}})),d=h.data,v=h.run,m=h.params,g=h.reset,y=h.loading,b=h.fetches,_=Object(r["useCallback"])((function(){g();var e=V(m),t=e.slice(1);v.apply(void 0,H([void 0],t))}),[v,g,m]),x=Object(r["useRef"])(_);x.current=_,w((function(){t.manual||x.current()}),H(i));var O=Object(r["useMemo"])((function(){var e=[],t=d;return Object.values(b).forEach((function(n){var r,i;(null===(r=n.data)||void 0===r?void 0:r.list)&&(e=e.concat(null===(i=n.data)||void 0===i?void 0:i.list)),n.loading||(t=n.data)})),B(B({},t),{list:e})}),[b,d]),E=!!a&&(!y&&!f&&a(O)),S=Object(r["useCallback"])((function(){if(!E){p(!0);var e=V(m),t=e.slice(1);v.apply(void 0,H([O],t))}}),[E,v,O,m]),j=function(){!y&&!f&&o&&o.current&&o.current.scrollHeight-o.current.scrollTop<=o.current.clientHeight+u&&S()},A=Object(r["useRef"])(j);return A.current=j,Object(r["useEffect"])((function(){if(!o||!o.current)return function(){};var e=function(){return A.current()};return o.current.addEventListener("scroll",e),function(){o&&o.current&&o.current.removeEventListener("scroll",e)}}),[A]),B(B({},h),{data:O,reload:_,loading:y&&0===O.list.length,loadMore:S,loadingMore:f,noMore:E})}var W=G,q=function(){return q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},q.apply(this,arguments)},Z=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Y=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{while((void 0===t||t-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a},X=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Y(arguments[t]));return e};function K(e,t){t.paginated;var n=t.defaultPageSize,i=void 0===n?10:n,o=t.refreshDeps,a=void 0===o?[]:o,s=t.fetchKey,u=Z(t,["paginated","defaultPageSize","refreshDeps","fetchKey"]);Object(r["useEffect"])((function(){s&&console.error("useRequest pagination's fetchKey will not work!")}),[]);var c=z(e,q({defaultParams:[{current:1,pageSize:i}]},u)),l=c.data,f=c.params,p=c.run,h=c.loading,d=Z(c,["data","params","run","loading"]),v=f&&f[0]?f[0]:{},m=v.current,g=void 0===m?1:m,y=v.pageSize,b=void 0===y?i:y,_=v.sorter,x=void 0===_?{}:_,O=v.filters,E=void 0===O?{}:O,S=Object(r["useCallback"])((function(e){var t=Y(f),n=t[0],r=t.slice(1);p.apply(void 0,X([q(q({},n),e)],r))}),[p,f]),j=(null===l||void 0===l?void 0:l.total)||0,A=Object(r["useMemo"])((function(){return Math.ceil(j/b)}),[b,j]),k=Object(r["useCallback"])((function(e,t){var n=e<=0?1:e,r=t<=0?1:t,i=Math.ceil(j/r);n>i&&(n=Math.max(1,i)),S({current:n,pageSize:r})}),[j,S]),C=Object(r["useCallback"])((function(e){k(e,b)}),[k,b]),T=Object(r["useCallback"])((function(e){k(g,e)}),[k,g]),M=Object(r["useRef"])(C);M.current=C,w((function(){t.manual||M.current(1)}),X(a));var P=Object(r["useCallback"])((function(e,t,n){S({current:e.current,pageSize:e.pageSize||i,filters:t,sorter:n})}),[E,x,S]);return q({loading:h,data:l,params:f,run:p,pagination:{current:g,pageSize:b,total:j,totalPage:A,onChange:k,changeCurrent:C,changePageSize:T},tableProps:{dataSource:(null===l||void 0===l?void 0:l.list)||[],loading:h,onChange:P,pagination:{current:g,pageSize:b,total:j}},sorter:x,filters:E},d)}var $=K,Q=i.a.createContext({});Q.displayName="UseRequestConfigContext";var J=Q,ee=function(){return ee=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ee.apply(this,arguments)},te=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},ne=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{while((void 0===t||t-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a},re=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ne(arguments[t]));return e};function ie(e,t){void 0===t&&(t={});var n=Object(r["useContext"])(J),i=ee(ee({},n),t),o=i.paginated,a=i.loadMore,s=i.requestMethod,u=Object(r["useRef"])(o),c=Object(r["useRef"])(a);if(u.current!==o)throw Error("You should not modify the paginated of options");if(c.current!==a)throw Error("You should not modify the loadMore of options");u.current=o,c.current=a;var l,f=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return fetch.apply(void 0,re(e)).then((function(e){if(e.ok)return e.json();throw new Error(e.statusText)}))},p=s||f;switch(typeof e){case"string":l=function(){return p(e)};break;case"object":var h=e.url,d=te(e,["url"]);l=function(){return s?s(e):f(h,d)};break;default:l=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new Promise((function(n,r){var i=e.apply(void 0,re(t)),o=i;if(!i.then)switch(typeof i){case"string":o=p(i);break;case"object":var a=i.url,u=te(i,["url"]);o=s?s(i):f(a,u);break}o.then(n)["catch"](r)}))}}return a?W(l,i):o?$(l,i):z(l,i)}J.Provider,t["a"]=ie},"0jNN":function(e,t,n){"use strict";var r=n("sxOR"),i=Object.prototype.hasOwnProperty,o=Array.isArray,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e){while(e.length>1){var t=e.pop(),n=t.obj[t.prop];if(o(n)){for(var r=[],i=0;i<n.length;++i)"undefined"!==typeof n[i]&&r.push(n[i]);t.obj[t.prop]=r}}},u=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)"undefined"!==typeof e[r]&&(n[r]=e[r]);return n},c=function e(t,n,r){if(!n)return t;if("object"!==typeof n){if(o(t))t.push(n);else{if(!t||"object"!==typeof t)return[t,n];(r&&(r.plainObjects||r.allowPrototypes)||!i.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!==typeof t)return[t].concat(n);var a=t;return o(t)&&!o(n)&&(a=u(t,r)),o(t)&&o(n)?(n.forEach((function(n,o){if(i.call(t,o)){var a=t[o];a&&"object"===typeof a&&n&&"object"===typeof n?t[o]=e(a,n,r):t.push(n)}else t[o]=n})),t):Object.keys(n).reduce((function(t,o){var a=n[o];return i.call(t,o)?t[o]=e(t[o],a,r):t[o]=a,t}),a)},l=function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},f=function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(i){return r}},p=function(e,t,n,i,o){if(0===e.length)return e;var s=e;if("symbol"===typeof e?s=Symbol.prototype.toString.call(e):"string"!==typeof e&&(s=String(e)),"iso-8859-1"===n)return escape(s).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var u="",c=0;c<s.length;++c){var l=s.charCodeAt(c);45===l||46===l||95===l||126===l||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||o===r.RFC1738&&(40===l||41===l)?u+=s.charAt(c):l<128?u+=a[l]:l<2048?u+=a[192|l>>6]+a[128|63&l]:l<55296||l>=57344?u+=a[224|l>>12]+a[128|l>>6&63]+a[128|63&l]:(c+=1,l=65536+((1023&l)<<10|1023&s.charCodeAt(c)),u+=a[240|l>>18]+a[128|l>>12&63]+a[128|l>>6&63]+a[128|63&l])}return u},h=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],o=i.obj[i.prop],a=Object.keys(o),u=0;u<a.length;++u){var c=a[u],l=o[c];"object"===typeof l&&null!==l&&-1===n.indexOf(l)&&(t.push({obj:o,prop:c}),n.push(l))}return s(t),e},d=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},v=function(e){return!(!e||"object"!==typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},m=function(e,t){return[].concat(e,t)},g=function(e,t){if(o(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)};e.exports={arrayToObject:u,assign:l,combine:m,compact:h,decode:f,encode:p,isBuffer:v,isRegExp:d,maybeMap:g,merge:c}},"0lAh":function(e,t,n){"use strict";n.r(t);var r=n("k1fw"),i=n("q1tI"),o=n.n(i),a=n("dEAq"),s=n("Zxc8"),u=n("nKUr"),c=o.a.memo((e=>{var t=e.demos,n=t["docs-map"].component;return Object(u["jsx"])(u["Fragment"],{children:Object(u["jsxs"])(o.a.Fragment,{children:[Object(u["jsx"])("div",{className:"markdown",children:Object(u["jsxs"])("h2",{id:"hello-react",children:[Object(u["jsx"])(a["AnchorLink"],{to:"#hello-react","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"Hello react!"]})}),Object(u["jsx"])(s["default"],Object(r["a"])(Object(r["a"])({},t["docs-map"].previewerProps),{},{children:Object(u["jsx"])(n,{})}))]})})}));t["default"]=e=>{var t=o.a.useContext(a["context"]),n=t.demos;return o.a.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&a["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),Object(u["jsx"])(c,{demos:n})}},"0q/z":function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("A2ZE"),s=n("Sssf"),u=n("ImZN");r({target:"Map",proto:!0,real:!0,forced:i},{find:function(e){var t=o(this),n=s(t),r=a(e,arguments.length>1?arguments[1]:void 0,3);return u(n,(function(e,n){if(r(n,e,t))return u.stop(n)}),void 0,!0,!0).result}})},"0rvr":function(e,t,n){var r=n("glrk"),i=n("O741");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,e.call(n,[]),t=n instanceof Array}catch(o){}return function(n,o){return r(n),i(o),t?e.call(n,o):n.__proto__=o,n}}():void 0)},"0x2o":function(e,t,n){"use strict";n("MgzW");var r=n("q1tI"),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),t.Fragment=o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:o,_owner:a.current}}t.jsx=c,t.jsxs=c},"0ycA":function(e,t){function n(){return[]}e.exports=n},1:function(e,t){},"14Sl":function(e,t,n){"use strict";n("rB9j");var r=n("busE"),i=n("0Dky"),o=n("tiKp"),a=n("kmMV"),s=n("kRJp"),u=o("species"),c=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),l=function(){return"$0"==="a".replace(/./,"$0")}(),f=o("replace"),p=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),h=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,f){var d=o(e),v=!i((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),m=v&&!i((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[u]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return t=!0,null},n[d](""),!t}));if(!v||!m||"replace"===e&&(!c||!l||p)||"split"===e&&!h){var g=/./[d],y=n(d,""[e],(function(e,t,n,r,i){return t.exec===a?v&&!i?{done:!0,value:g.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),b=y[0],_=y[1];r(String.prototype,e,b),r(RegExp.prototype,d,2==t?function(e,t){return _.call(e,this,t)}:function(e){return _.call(e,this)})}f&&s(RegExp.prototype[d],"sham",!0)}},"16Al":function(e,t,n){"use strict";var r=n("WbBG");function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},"17x9":function(e,t,n){e.exports=n("16Al")()},"1E5z":function(e,t,n){var r=n("m/L8").f,i=n("UTVS"),o=n("tiKp"),a=o("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},"1OyB":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},"1WJl":function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!==i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n}},"1Y/n":function(e,t,n){var r=n("HAuM"),i=n("ewvW"),o=n("RK3t"),a=n("UMSQ"),s=function(e){return function(t,n,s,u){r(n);var c=i(t),l=o(c),f=a(c.length),p=e?f-1:0,h=e?-1:1;if(s<2)while(1){if(p in l){u=l[p],p+=h;break}if(p+=h,e?p<0:f<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:f>p;p+=h)p in l&&(u=n(u,l[p],p,c));return u}};e.exports={left:s(!1),right:s(!0)}},"1hJj":function(e,t,n){var r=n("e4Nc"),i=n("ftKO"),o=n("3A9y");function a(e){var t=-1,n=null==e?0:e.length;this.__data__=new r;while(++t<n)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},"1hic":function(e,t,n){"use strict";n.r(t);var r=n("qLMh"),i=n("9og8"),o=n("tJVT"),a=(n("EFp3"),n("bKJz"),n("pwpV"),n("rePB")),s=n("wx14"),u=n("TSYQ"),c=n.n(u),l=n("KQm4"),f=n("VTBJ"),p=n("ODXe"),h=n("Ff2n"),d=n("U8pU"),v=n("6cGi"),m=n("Kwbf"),g=n("q1tI"),y=n("TNol"),b=n("5Z9U"),_=n("4IlW"),x=n("c+Xe"),w=g["createContext"](null);function O(){return g["useContext"](w)}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=g["useState"](!1),n=Object(p["a"])(t,2),r=n[0],i=n[1],o=g["useRef"](null),a=function(){window.clearTimeout(o.current)};g["useEffect"]((function(){return a}),[]);var s=function(t,n){a(),o.current=window.setTimeout((function(){i(t),n&&n()}),e)};return[r,s,a]}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,t=g["useRef"](null),n=g["useRef"](null);function r(r){(r||null===t.current)&&(t.current=r),window.clearTimeout(n.current),n.current=window.setTimeout((function(){t.current=null}),e)}return g["useEffect"]((function(){return function(){window.clearTimeout(n.current)}}),[]),[function(){return t.current},r]}function j(e,t,n,r){var i=g["useRef"](null);i.current={open:t,triggerOpen:n,customizedTrigger:r},g["useEffect"]((function(){function t(t){var n;if(null===(n=i.current)||void 0===n||!n.customizedTrigger){var r=t.target;r.shadowRoot&&t.composed&&(r=t.composedPath()[0]||r),i.current.open&&e().filter((function(e){return e})).every((function(e){return!e.contains(r)&&e!==r}))&&i.current.triggerOpen(!1)}}return window.addEventListener("mousedown",t),function(){return window.removeEventListener("mousedown",t)}}),[])}var A=n("bX4T"),k=n("8z13"),C=function(e){var t,n=e.className,r=e.customizeIcon,i=e.customizeIconProps,o=e.onMouseDown,a=e.onClick,s=e.children;return t="function"===typeof r?r(i):r,g["createElement"]("span",{className:n,onMouseDown:function(e){e.preventDefault(),o&&o(e)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:a,"aria-hidden":!0},void 0!==t?t:g["createElement"]("span",{className:c()(n.split(/\s+/).map((function(e){return"".concat(e,"-icon")})))},s))},T=C,M=function(e,t){var n,r,i=e.prefixCls,o=e.id,a=e.inputElement,s=e.disabled,u=e.tabIndex,l=e.autoFocus,p=e.autoComplete,h=e.editable,d=e.activeDescendantId,v=e.value,y=e.maxLength,b=e.onKeyDown,_=e.onMouseDown,w=e.onChange,O=e.onPaste,E=e.onCompositionStart,S=e.onCompositionEnd,j=e.open,A=e.attrs,k=a||g["createElement"]("input",null),C=k,T=C.ref,M=C.props,P=M.onKeyDown,I=M.onChange,R=M.onMouseDown,L=M.onCompositionStart,D=M.onCompositionEnd,N=M.style;return Object(m["c"])(!("maxLength"in k.props),"Passing 'maxLength' to input element directly may not work because input in BaseSelect is controlled."),k=g["cloneElement"](k,Object(f["a"])(Object(f["a"])(Object(f["a"])({type:"search"},M),{},{id:o,ref:Object(x["a"])(t,T),disabled:s,tabIndex:u,autoComplete:p||"off",autoFocus:l,className:c()("".concat(i,"-selection-search-input"),null===(n=k)||void 0===n||null===(r=n.props)||void 0===r?void 0:r.className),role:"combobox","aria-expanded":j,"aria-haspopup":"listbox","aria-owns":"".concat(o,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(o,"_list"),"aria-activedescendant":d},A),{},{value:h?v:"",maxLength:y,readOnly:!h,unselectable:h?null:"on",style:Object(f["a"])(Object(f["a"])({},N),{},{opacity:h?null:0}),onKeyDown:function(e){b(e),P&&P(e)},onMouseDown:function(e){_(e),R&&R(e)},onChange:function(e){w(e),I&&I(e)},onCompositionStart:function(e){E(e),L&&L(e)},onCompositionEnd:function(e){S(e),D&&D(e)},onPaste:O})),k},P=g["forwardRef"](M);P.displayName="Input";var I=P;function R(e){return Array.isArray(e)?e:void 0!==e?[e]:[]}var L="undefined"!==typeof window&&window.document&&window.document.documentElement,D=L;function N(e){return void 0!==e&&null!==e}function F(e){return["string","number"].includes(Object(d["a"])(e))}function z(e){var t=void 0;return e&&(F(e.title)?t=e.title.toString():F(e.label)&&(t=e.label.toString())),t}function B(e,t){D?g["useLayoutEffect"](e,t):g["useEffect"](e,t)}function U(e){var t;return null!==(t=e.key)&&void 0!==t?t:e.value}var V=function(e){e.preventDefault(),e.stopPropagation()},H=function(e){var t=e.id,n=e.prefixCls,r=e.values,i=e.open,o=e.searchValue,s=e.autoClearSearchValue,u=e.inputRef,l=e.placeholder,f=e.disabled,h=e.mode,d=e.showSearch,v=e.autoFocus,m=e.autoComplete,y=e.activeDescendantId,b=e.tabIndex,_=e.removeIcon,x=e.maxTagCount,w=e.maxTagTextLength,O=e.maxTagPlaceholder,E=void 0===O?function(e){return"+ ".concat(e.length," ...")}:O,S=e.tagRender,j=e.onToggleOpen,C=e.onRemove,M=e.onInputChange,P=e.onInputPaste,R=e.onInputKeyDown,L=e.onInputMouseDown,D=e.onInputCompositionStart,N=e.onInputCompositionEnd,F=g["useRef"](null),H=Object(g["useState"])(0),G=Object(p["a"])(H,2),W=G[0],q=G[1],Z=Object(g["useState"])(!1),Y=Object(p["a"])(Z,2),X=Y[0],K=Y[1],$="".concat(n,"-selection"),Q=i||"multiple"===h&&!1===s||"tags"===h?o:"",J="tags"===h||"multiple"===h&&!1===s||d&&(i||X);function ee(e,t,n,r,i){return g["createElement"]("span",{className:c()("".concat($,"-item"),Object(a["a"])({},"".concat($,"-item-disabled"),n)),title:z(e)},g["createElement"]("span",{className:"".concat($,"-item-content")},t),r&&g["createElement"](T,{className:"".concat($,"-item-remove"),onMouseDown:V,onClick:i,customizeIcon:_},"\xd7"))}function te(e,t,n,r,o){var a=function(e){V(e),j(!i)};return g["createElement"]("span",{onMouseDown:a},S({label:t,value:e,disabled:n,closable:r,onClose:o}))}function ne(e){var t=e.disabled,n=e.label,r=e.value,i=!f&&!t,o=n;if("number"===typeof w&&("string"===typeof n||"number"===typeof n)){var a=String(o);a.length>w&&(o="".concat(a.slice(0,w),"..."))}var s=function(t){t&&t.stopPropagation(),C(e)};return"function"===typeof S?te(r,o,t,i,s):ee(e,o,t,i,s)}function re(e){var t="function"===typeof E?E(e):E;return ee({title:t},t,!1)}B((function(){q(F.current.scrollWidth)}),[Q]);var ie=g["createElement"]("div",{className:"".concat($,"-search"),style:{width:W},onFocus:function(){K(!0)},onBlur:function(){K(!1)}},g["createElement"](I,{ref:u,open:i,prefixCls:n,id:t,inputElement:null,disabled:f,autoFocus:v,autoComplete:m,editable:J,activeDescendantId:y,value:Q,onKeyDown:R,onMouseDown:L,onChange:M,onPaste:P,onCompositionStart:D,onCompositionEnd:N,tabIndex:b,attrs:Object(A["a"])(e,!0)}),g["createElement"]("span",{ref:F,className:"".concat($,"-search-mirror"),"aria-hidden":!0},Q,"\xa0")),oe=g["createElement"](k["a"],{prefixCls:"".concat($,"-overflow"),data:r,renderItem:ne,renderRest:re,suffix:ie,itemKey:U,maxCount:x});return g["createElement"](g["Fragment"],null,oe,!r.length&&!Q&&g["createElement"]("span",{className:"".concat($,"-placeholder")},l))},G=H,W=function(e){var t=e.inputElement,n=e.prefixCls,r=e.id,i=e.inputRef,o=e.disabled,a=e.autoFocus,s=e.autoComplete,u=e.activeDescendantId,c=e.mode,l=e.open,f=e.values,h=e.placeholder,d=e.tabIndex,v=e.showSearch,m=e.searchValue,y=e.activeValue,b=e.maxLength,_=e.onInputKeyDown,x=e.onInputMouseDown,w=e.onInputChange,O=e.onInputPaste,E=e.onInputCompositionStart,S=e.onInputCompositionEnd,j=g["useState"](!1),k=Object(p["a"])(j,2),C=k[0],T=k[1],M="combobox"===c,P=M||v,R=f[0],L=m||"";M&&y&&!C&&(L=y),g["useEffect"]((function(){M&&T(!1)}),[M,y]);var D=!("combobox"!==c&&!l&&!v)&&!!L,N=z(R),F=function(){if(R)return null;var e=D?{visibility:"hidden"}:void 0;return g["createElement"]("span",{className:"".concat(n,"-selection-placeholder"),style:e},h)};return g["createElement"](g["Fragment"],null,g["createElement"]("span",{className:"".concat(n,"-selection-search")},g["createElement"](I,{ref:i,prefixCls:n,id:r,open:l,inputElement:t,disabled:o,autoFocus:a,autoComplete:s,editable:P,activeDescendantId:u,value:L,onKeyDown:_,onMouseDown:x,onChange:function(e){T(!0),w(e)},onPaste:O,onCompositionStart:E,onCompositionEnd:S,tabIndex:d,attrs:Object(A["a"])(e,!0),maxLength:M?b:void 0})),!M&&R?g["createElement"]("span",{className:"".concat(n,"-selection-item"),title:N,style:D?{visibility:"hidden"}:void 0},R.label):null,F())},q=W;function Z(e){return![_["a"].ESC,_["a"].SHIFT,_["a"].BACKSPACE,_["a"].TAB,_["a"].WIN_KEY,_["a"].ALT,_["a"].META,_["a"].WIN_KEY_RIGHT,_["a"].CTRL,_["a"].SEMICOLON,_["a"].EQUALS,_["a"].CAPS_LOCK,_["a"].CONTEXT_MENU,_["a"].F1,_["a"].F2,_["a"].F3,_["a"].F4,_["a"].F5,_["a"].F6,_["a"].F7,_["a"].F8,_["a"].F9,_["a"].F10,_["a"].F11,_["a"].F12].includes(e)}var Y=function(e,t){var n=Object(g["useRef"])(null),r=Object(g["useRef"])(!1),i=e.prefixCls,o=e.open,a=e.mode,u=e.showSearch,c=e.tokenWithEnter,l=e.autoClearSearchValue,f=e.onSearch,h=e.onSearchSubmit,d=e.onToggleOpen,v=e.onInputKeyDown,m=e.domRef;g["useImperativeHandle"](t,(function(){return{focus:function(){n.current.focus()},blur:function(){n.current.blur()}}}));var y=S(0),b=Object(p["a"])(y,2),x=b[0],w=b[1],O=function(e){var t=e.which;t!==_["a"].UP&&t!==_["a"].DOWN||e.preventDefault(),v&&v(e),t!==_["a"].ENTER||"tags"!==a||r.current||o||null===h||void 0===h||h(e.target.value),Z(t)&&d(!0)},E=function(){w(!0)},j=Object(g["useRef"])(null),A=function(e){!1!==f(e,!0,r.current)&&d(!0)},k=function(){r.current=!0},C=function(e){r.current=!1,"combobox"!==a&&A(e.target.value)},T=function(e){var t=e.target.value;if(c&&j.current&&/[\r\n]/.test(j.current)){var n=j.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");t=t.replace(n,j.current)}j.current=null,A(t)},M=function(e){var t=e.clipboardData,n=t.getData("text");j.current=n},P=function(e){var t=e.target;if(t!==n.current){var r=void 0!==document.body.style.msTouchAction;r?setTimeout((function(){n.current.focus()})):n.current.focus()}},I=function(e){var t=x();e.target===n.current||t||"combobox"===a||e.preventDefault(),("combobox"===a||u&&t)&&o||(o&&!1!==l&&f("",!0,!1),d())},R={inputRef:n,onInputKeyDown:O,onInputMouseDown:E,onInputChange:T,onInputPaste:M,onInputCompositionStart:k,onInputCompositionEnd:C},L="multiple"===a||"tags"===a?g["createElement"](G,Object(s["a"])({},e,R)):g["createElement"](q,Object(s["a"])({},e,R));return g["createElement"]("div",{ref:m,className:"".concat(i,"-selector"),onClick:P,onMouseDown:I},L)},X=g["forwardRef"](Y);X.displayName="Selector";var K=X,$=n("uciX"),Q=["prefixCls","disabled","visible","children","popupElement","containerWidth","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],J=function(e){var t=!0===e?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:t,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:t,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:t,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:t,adjustY:1}}}},ee=function(e,t){var n=e.prefixCls,r=(e.disabled,e.visible),i=e.children,o=e.popupElement,u=e.containerWidth,l=e.animation,p=e.transitionName,d=e.dropdownStyle,v=e.dropdownClassName,m=e.direction,y=void 0===m?"ltr":m,b=e.placement,_=e.dropdownMatchSelectWidth,x=e.dropdownRender,w=e.dropdownAlign,O=e.getPopupContainer,E=e.empty,S=e.getTriggerDOMNode,j=e.onPopupVisibleChange,A=e.onPopupMouseEnter,k=Object(h["a"])(e,Q),C="".concat(n,"-dropdown"),T=o;x&&(T=x(o));var M=g["useMemo"]((function(){return J(_)}),[_]),P=l?"".concat(C,"-").concat(l):p,I=g["useRef"](null);g["useImperativeHandle"](t,(function(){return{getPopupElement:function(){return I.current}}}));var R=Object(f["a"])({minWidth:u},d);return"number"===typeof _?R.width=_:_&&(R.width=u),g["createElement"]($["a"],Object(s["a"])({},k,{showAction:j?["click"]:[],hideAction:j?["click"]:[],popupPlacement:b||("rtl"===y?"bottomRight":"bottomLeft"),builtinPlacements:M,prefixCls:C,popupTransitionName:P,popup:g["createElement"]("div",{ref:I,onMouseEnter:A},T),popupAlign:w,popupVisible:r,getPopupContainer:O,popupClassName:c()(v,Object(a["a"])({},"".concat(C,"-empty"),E)),popupStyle:R,getTriggerDOMNode:S,onPopupVisibleChange:j}),i)},te=g["forwardRef"](ee);te.displayName="SelectTrigger";var ne=te,re=n("T5bk");function ie(e,t){var n,r=e.key;return"value"in e&&(n=e.value),null!==r&&void 0!==r?r:void 0!==n?n:"rc-index-key-".concat(t)}function oe(e,t){var n=e||{},r=n.label,i=n.value,o=n.options;return{label:r||(t?"children":"label"),value:i||"value",options:o||"options"}}function ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.fieldNames,r=t.childrenAsData,i=[],o=oe(n,!1),a=o.label,s=o.value,u=o.options;function c(e,t){e.forEach((function(e){var n=e[a];if(t||!(u in e)){var o=e[s];i.push({key:ie(e,i.length),groupOption:t,data:e,label:n,value:o})}else{var l=n;void 0===l&&r&&(l=e.label),i.push({key:ie(e,i.length),group:!0,data:e,label:l}),c(e[u],!0)}}))}return c(e,!1),i}function se(e){var t=Object(f["a"])({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return Object(m["a"])(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),t}}),t}function ue(e,t){if(!t||!t.length)return null;var n=!1;function r(e,t){var i=Object(re["a"])(t),o=i[0],a=i.slice(1);if(!o)return[e];var s=e.split(o);return n=n||s.length>1,s.reduce((function(e,t){return[].concat(Object(l["a"])(e),Object(l["a"])(r(t,a)))}),[]).filter((function(e){return e}))}var i=r(e,t);return n?i:null}var ce=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","showArrow","inputIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],le=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"];function fe(e){return"tags"===e||"multiple"===e}var pe=g["forwardRef"]((function(e,t){var n,r,i=e.id,o=e.prefixCls,u=e.className,m=e.showSearch,O=e.tagRender,A=e.direction,k=e.omitDomProps,C=e.displayValues,M=e.onDisplayValuesChange,P=e.emptyOptions,I=e.notFoundContent,R=void 0===I?"Not Found":I,L=e.onClear,D=e.mode,N=e.disabled,F=e.loading,z=e.getInputElement,B=e.getRawInputElement,U=e.open,V=e.defaultOpen,H=e.onDropdownVisibleChange,G=e.activeValue,W=e.onActiveValueChange,q=e.activeDescendantId,Z=e.searchValue,Y=e.autoClearSearchValue,X=e.onSearch,$=e.onSearchSplit,Q=e.tokenSeparators,J=e.allowClear,ee=e.showArrow,te=e.inputIcon,re=e.clearIcon,ie=e.OptionList,oe=e.animation,ae=e.transitionName,se=e.dropdownStyle,pe=e.dropdownClassName,he=e.dropdownMatchSelectWidth,de=e.dropdownRender,ve=e.dropdownAlign,me=e.placement,ge=e.getPopupContainer,ye=e.showAction,be=void 0===ye?[]:ye,_e=e.onFocus,xe=e.onBlur,we=e.onKeyUp,Oe=e.onKeyDown,Ee=e.onMouseDown,Se=Object(h["a"])(e,ce),je=fe(D),Ae=(void 0!==m?m:je)||"combobox"===D,ke=Object(f["a"])({},Se);le.forEach((function(e){delete ke[e]})),null===k||void 0===k||k.forEach((function(e){delete ke[e]}));var Ce=g["useState"](!1),Te=Object(p["a"])(Ce,2),Me=Te[0],Pe=Te[1];g["useEffect"]((function(){Pe(Object(b["a"])())}),[]);var Ie=g["useRef"](null),Re=g["useRef"](null),Le=g["useRef"](null),De=g["useRef"](null),Ne=g["useRef"](null),Fe=E(),ze=Object(p["a"])(Fe,3),Be=ze[0],Ue=ze[1],Ve=ze[2];g["useImperativeHandle"](t,(function(){var e,t;return{focus:null===(e=De.current)||void 0===e?void 0:e.focus,blur:null===(t=De.current)||void 0===t?void 0:t.blur,scrollTo:function(e){var t;return null===(t=Ne.current)||void 0===t?void 0:t.scrollTo(e)}}}));var He=g["useMemo"]((function(){var e;if("combobox"!==D)return Z;var t=null===(e=C[0])||void 0===e?void 0:e.value;return"string"===typeof t||"number"===typeof t?String(t):""}),[Z,D,C]),Ge="combobox"===D&&"function"===typeof z&&z()||null,We="function"===typeof B&&B(),qe=Object(x["d"])(Re,null===We||void 0===We||null===(n=We.props)||void 0===n?void 0:n.ref),Ze=Object(v["a"])(void 0,{defaultValue:V,value:U}),Ye=Object(p["a"])(Ze,2),Xe=Ye[0],Ke=Ye[1],$e=Xe,Qe=!R&&P;(N||Qe&&$e&&"combobox"===D)&&($e=!1);var Je=!Qe&&$e,et=g["useCallback"]((function(e){var t=void 0!==e?e:!$e;N||(Ke(t),$e!==t&&(null===H||void 0===H||H(t)))}),[N,$e,Ke,H]),tt=g["useMemo"]((function(){return(Q||[]).some((function(e){return["\n","\r\n"].includes(e)}))}),[Q]),nt=function(e,t,n){var r=!0,i=e;null===W||void 0===W||W(null);var o=n?null:ue(e,Q);return"combobox"!==D&&o&&(i="",null===$||void 0===$||$(o),et(!1),r=!1),X&&He!==i&&X(i,{source:t?"typing":"effect"}),r},rt=function(e){e&&e.trim()&&X(e,{source:"submit"})};g["useEffect"]((function(){$e||je||"combobox"===D||nt("",!1,!1)}),[$e]),g["useEffect"]((function(){Xe&&N&&Ke(!1),N&&Ue(!1)}),[N]);var it=S(),ot=Object(p["a"])(it,2),at=ot[0],st=ot[1],ut=function(e){var t,n=at(),r=e.which;if(r===_["a"].ENTER&&("combobox"!==D&&e.preventDefault(),$e||et(!0)),st(!!He),r===_["a"].BACKSPACE&&!n&&je&&!He&&C.length){for(var i=Object(l["a"])(C),o=null,a=i.length-1;a>=0;a-=1){var s=i[a];if(!s.disabled){i.splice(a,1),o=s;break}}o&&M(i,{type:"remove",values:[o]})}for(var u=arguments.length,c=new Array(u>1?u-1:0),f=1;f<u;f++)c[f-1]=arguments[f];$e&&Ne.current&&(t=Ne.current).onKeyDown.apply(t,[e].concat(c));null===Oe||void 0===Oe||Oe.apply(void 0,[e].concat(c))},ct=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i;$e&&Ne.current&&(i=Ne.current).onKeyUp.apply(i,[e].concat(n));null===we||void 0===we||we.apply(void 0,[e].concat(n))},lt=function(e){var t=C.filter((function(t){return t!==e}));M(t,{type:"remove",values:[e]})},ft=g["useRef"](!1),pt=function(){Ue(!0),N||(_e&&!ft.current&&_e.apply(void 0,arguments),be.includes("focus")&&et(!0)),ft.current=!0},ht=function(){Ue(!1,(function(){ft.current=!1,et(!1)})),N||(He&&("tags"===D?X(He,{source:"submit"}):"multiple"===D&&X("",{source:"blur"})),xe&&xe.apply(void 0,arguments))},dt=[];g["useEffect"]((function(){return function(){dt.forEach((function(e){return clearTimeout(e)})),dt.splice(0,dt.length)}}),[]);var vt,mt=function(e){var t,n=e.target,r=null===(t=Le.current)||void 0===t?void 0:t.getPopupElement();if(r&&r.contains(n)){var i=setTimeout((function(){var e,t=dt.indexOf(i);(-1!==t&&dt.splice(t,1),Ve(),Me||r.contains(document.activeElement))||(null===(e=De.current)||void 0===e||e.focus())}));dt.push(i)}for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];null===Ee||void 0===Ee||Ee.apply(void 0,[e].concat(a))},gt=g["useState"](null),yt=Object(p["a"])(gt,2),bt=yt[0],_t=yt[1],xt=g["useState"]({}),wt=Object(p["a"])(xt,2),Ot=wt[1];function Et(){Ot({})}Object(y["a"])((function(){if(Je){var e,t=Math.ceil(null===(e=Ie.current)||void 0===e?void 0:e.offsetWidth);bt===t||Number.isNaN(t)||_t(t)}}),[Je]),We&&(vt=function(e){et(e)}),j((function(){var e;return[Ie.current,null===(e=Le.current)||void 0===e?void 0:e.getPopupElement()]}),Je,et,!!We);var St,jt,At=g["useMemo"]((function(){return Object(f["a"])(Object(f["a"])({},e),{},{notFoundContent:R,open:$e,triggerOpen:Je,id:i,showSearch:Ae,multiple:je,toggleOpen:et})}),[e,R,Je,$e,i,Ae,je,et]),kt=void 0!==ee?ee:F||!je&&"combobox"!==D;kt&&(St=g["createElement"](T,{className:c()("".concat(o,"-arrow"),Object(a["a"])({},"".concat(o,"-arrow-loading"),F)),customizeIcon:te,customizeIconProps:{loading:F,searchValue:He,open:$e,focused:Be,showSearch:Ae}}));var Ct=function(){var e;null===L||void 0===L||L(),null===(e=De.current)||void 0===e||e.focus(),M([],{type:"clear",values:C}),nt("",!1,!1)};N||!J||!C.length&&!He||"combobox"===D&&""===He||(jt=g["createElement"](T,{className:"".concat(o,"-clear"),onMouseDown:Ct,customizeIcon:re},"\xd7"));var Tt,Mt=g["createElement"](ie,{ref:Ne}),Pt=c()(o,u,(r={},Object(a["a"])(r,"".concat(o,"-focused"),Be),Object(a["a"])(r,"".concat(o,"-multiple"),je),Object(a["a"])(r,"".concat(o,"-single"),!je),Object(a["a"])(r,"".concat(o,"-allow-clear"),J),Object(a["a"])(r,"".concat(o,"-show-arrow"),kt),Object(a["a"])(r,"".concat(o,"-disabled"),N),Object(a["a"])(r,"".concat(o,"-loading"),F),Object(a["a"])(r,"".concat(o,"-open"),$e),Object(a["a"])(r,"".concat(o,"-customize-input"),Ge),Object(a["a"])(r,"".concat(o,"-show-search"),Ae),r)),It=g["createElement"](ne,{ref:Le,disabled:N,prefixCls:o,visible:Je,popupElement:Mt,containerWidth:bt,animation:oe,transitionName:ae,dropdownStyle:se,dropdownClassName:pe,direction:A,dropdownMatchSelectWidth:he,dropdownRender:de,dropdownAlign:ve,placement:me,getPopupContainer:ge,empty:P,getTriggerDOMNode:function(){return Re.current},onPopupVisibleChange:vt,onPopupMouseEnter:Et},We?g["cloneElement"](We,{ref:qe}):g["createElement"](K,Object(s["a"])({},e,{domRef:Re,prefixCls:o,inputElement:Ge,ref:De,id:i,showSearch:Ae,autoClearSearchValue:Y,mode:D,activeDescendantId:q,tagRender:O,values:C,open:$e,onToggleOpen:et,activeValue:G,searchValue:He,onSearch:nt,onSearchSubmit:rt,onRemove:lt,tokenWithEnter:tt})));return Tt=We?It:g["createElement"]("div",Object(s["a"])({className:Pt},ke,{ref:Ie,onMouseDown:mt,onKeyDown:ut,onKeyUp:ct,onFocus:pt,onBlur:ht}),Be&&!$e&&g["createElement"]("span",{style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0},"aria-live":"polite"},"".concat(C.map((function(e){var t=e.label,n=e.value;return["number","string"].includes(Object(d["a"])(t))?t:n})).join(", "))),It,St,jt),g["createElement"](w.Provider,{value:At},Tt)}));var he=pe,de=function(e,t){var n=g["useRef"]({values:new Map,options:new Map}),r=g["useMemo"]((function(){var r=n.current,i=r.values,o=r.options,a=e.map((function(e){var t;return void 0===e.label?Object(f["a"])(Object(f["a"])({},e),{},{label:null===(t=i.get(e.value))||void 0===t?void 0:t.label}):e})),s=new Map,u=new Map;return a.forEach((function(e){s.set(e.value,e),u.set(e.value,t.get(e.value)||o.get(e.value))})),n.current.values=s,n.current.options=u,a}),[e,t]),i=g["useCallback"]((function(e){return t.get(e)||n.current.options.get(e)}),[t]);return[r,i]};function ve(e,t){return R(e).join("").toUpperCase().includes(t)}var me=function(e,t,n,r,i){return g["useMemo"]((function(){if(!n||!1===r)return e;var o=t.options,s=t.label,u=t.value,c=[],l="function"===typeof r,p=n.toUpperCase(),h=l?r:function(e,t){return i?ve(t[i],p):t[o]?ve(t["children"!==s?s:"label"],p):ve(t[u],p)},d=l?function(e){return se(e)}:function(e){return e};return e.forEach((function(e){if(e[o]){var t=h(n,d(e));if(t)c.push(e);else{var r=e[o].filter((function(e){return h(n,d(e))}));r.length&&c.push(Object(f["a"])(Object(f["a"])({},e),{},Object(a["a"])({},o,r)))}}else h(n,d(e))&&c.push(e)})),c}),[e,r,i,n,t])},ge=n("MNnm"),ye=0,be=Object(ge["a"])();function _e(){var e;return be?(e=ye,ye+=1):e="TEST_OR_SSR",e}function xe(e){var t=g["useState"](),n=Object(p["a"])(t,2),r=n[0],i=n[1];return g["useEffect"]((function(){i("rc_select_".concat(_e()))}),[]),e||r}var we=n("Zm9Q"),Oe=["children","value"],Ee=["children"];function Se(e){var t=e,n=t.key,r=t.props,i=r.children,o=r.value,a=Object(h["a"])(r,Oe);return Object(f["a"])({key:n,value:void 0!==o?o:n,children:i},a)}function je(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(we["a"])(e).map((function(e,n){if(!g["isValidElement"](e)||!e.type)return null;var r=e,i=r.type.isSelectOptGroup,o=r.key,a=r.props,s=a.children,u=Object(h["a"])(a,Ee);return t||!i?Se(e):Object(f["a"])(Object(f["a"])({key:"__RC_SELECT_GRP__".concat(null===o?n:o,"__"),label:o},u),{},{options:je(s)})})).filter((function(e){return e}))}function Ae(e,t,n,r,i){return g["useMemo"]((function(){var o=e,a=!e;a&&(o=je(t));var s=new Map,u=new Map,c=function(e,t,n){n&&"string"===typeof n&&e.set(t[n],t)};function l(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=0;o<e.length;o+=1){var a=e[o];!a[n.options]||t?(s.set(a[n.value],a),c(u,a,n.label),c(u,a,r),c(u,a,i)):l(a[n.options],!0)}}return l(o),{options:o,valueOptions:s,labelOptions:u}}),[e,t,n,r,i])}function ke(e){var t=g["useRef"]();t.current=e;var n=g["useCallback"]((function(){return t.current.apply(t,arguments)}),[]);return n}var Ce=function(){return null};Ce.isSelectOptGroup=!0;var Te=Ce,Me=function(){return null};Me.isSelectOption=!0;var Pe=Me,Ie=n("bT9E"),Re=n("YrtM"),Le=n("+nKL");function De(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var Ne=g["createContext"](null),Fe=Ne,ze=["disabled","title","children","style","className"];function Be(e){return"string"===typeof e||"number"===typeof e}var Ue=function(e,t){var n=O(),r=n.prefixCls,i=n.id,o=n.open,u=n.multiple,f=n.mode,d=n.searchValue,v=n.toggleOpen,m=n.notFoundContent,y=n.onPopupScroll,b=g["useContext"](Fe),x=b.flattenOptions,w=b.onActiveValue,E=b.defaultActiveFirstOption,S=b.onSelect,j=b.menuItemSelectedIcon,k=b.rawValues,C=b.fieldNames,M=b.virtual,P=b.listHeight,I=b.listItemHeight,R="".concat(r,"-item"),L=Object(Re["a"])((function(){return x}),[o,x],(function(e,t){return t[0]&&e[1]!==t[1]})),D=g["useRef"](null),N=function(e){e.preventDefault()},F=function(e){D.current&&D.current.scrollTo("number"===typeof e?{index:e}:e)},z=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=L.length,r=0;r<n;r+=1){var i=(e+r*t+n)%n,o=L[i],a=o.group,s=o.data;if(!a&&!s.disabled)return i}return-1},B=g["useState"]((function(){return z(0)})),U=Object(p["a"])(B,2),V=U[0],H=U[1],G=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];H(e);var n={source:t?"keyboard":"mouse"},r=L[e];r?w(r.value,e,n):w(null,-1,n)};Object(g["useEffect"])((function(){G(!1!==E?z(0):-1)}),[L.length,d]);var W=g["useCallback"]((function(e){return k.has(e)&&"combobox"!==f}),[f,Object(l["a"])(k).toString(),k.size]);Object(g["useEffect"])((function(){var e,t=setTimeout((function(){if(!u&&o&&1===k.size){var e=Array.from(k)[0],t=L.findIndex((function(t){var n=t.data;return n.value===e}));-1!==t&&(G(t),F(t))}}));o&&(null===(e=D.current)||void 0===e||e.scrollTo(void 0));return function(){return clearTimeout(t)}}),[o,d]);var q=function(e){void 0!==e&&S(e,{selected:!k.has(e)}),u||v(!1)};if(g["useImperativeHandle"](t,(function(){return{onKeyDown:function(e){var t=e.which,n=e.ctrlKey;switch(t){case _["a"].N:case _["a"].P:case _["a"].UP:case _["a"].DOWN:var r=0;if(t===_["a"].UP?r=-1:t===_["a"].DOWN?r=1:De()&&n&&(t===_["a"].N?r=1:t===_["a"].P&&(r=-1)),0!==r){var i=z(V+r,r);F(i),G(i,!0)}break;case _["a"].ENTER:var a=L[V];a&&!a.data.disabled?q(a.value):q(void 0),o&&e.preventDefault();break;case _["a"].ESC:v(!1),o&&e.stopPropagation()}},onKeyUp:function(){},scrollTo:function(e){F(e)}}})),0===L.length)return g["createElement"]("div",{role:"listbox",id:"".concat(i,"_list"),className:"".concat(R,"-empty"),onMouseDown:N},m);var Z=Object.keys(C).map((function(e){return C[e]})),Y=function(e){return e.label},X=function(e){var t=L[e];if(!t)return null;var n=t.data||{},r=n.value,o=t.group,a=Object(A["a"])(n,!0),u=Y(t);return t?g["createElement"]("div",Object(s["a"])({"aria-label":"string"!==typeof u||o?null:u},a,{key:e,role:o?"presentation":"option",id:"".concat(i,"_list_").concat(e),"aria-selected":W(r)}),r):null};return g["createElement"](g["Fragment"],null,g["createElement"]("div",{role:"listbox",id:"".concat(i,"_list"),style:{height:0,width:0,overflow:"hidden"}},X(V-1),X(V),X(V+1)),g["createElement"](Le["a"],{itemKey:"key",ref:D,data:L,height:P,itemHeight:I,fullHeight:!1,onMouseDown:N,onScroll:y,virtual:M},(function(e,t){var n,r=e.group,i=e.groupOption,o=e.data,u=e.label,l=e.value,f=o.key;if(r){var p,d=null!==(p=o.title)&&void 0!==p?p:Be(u)?u.toString():void 0;return g["createElement"]("div",{className:c()(R,"".concat(R,"-group")),title:d},void 0!==u?u:f)}var v=o.disabled,m=o.title,y=(o.children,o.style),b=o.className,_=Object(h["a"])(o,ze),x=Object(Ie["a"])(_,Z),w=W(l),O="".concat(R,"-option"),E=c()(R,O,b,(n={},Object(a["a"])(n,"".concat(O,"-grouped"),i),Object(a["a"])(n,"".concat(O,"-active"),V===t&&!v),Object(a["a"])(n,"".concat(O,"-disabled"),v),Object(a["a"])(n,"".concat(O,"-selected"),w),n)),S=Y(e),k=!j||"function"===typeof j||w,C="number"===typeof S?S:S||l,M=Be(C)?C.toString():void 0;return void 0!==m&&(M=m),g["createElement"]("div",Object(s["a"])({},Object(A["a"])(x),{"aria-selected":w,className:E,title:M,onMouseMove:function(){V===t||v||G(t)},onClick:function(){v||q(l)},style:y}),g["createElement"]("div",{className:"".concat(O,"-content")},C),g["isValidElement"](j)||w,k&&g["createElement"](T,{className:"".concat(R,"-option-state"),customizeIcon:j,customizeIconProps:{isSelected:w}},w?"\u2713":null))})))},Ve=g["forwardRef"](Ue);Ve.displayName="OptionList";var He=Ve;var Ge=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","listHeight","listItemHeight","value","defaultValue","labelInValue","onChange"],We=["inputValue"];function qe(e){return!e||"object"!==Object(d["a"])(e)}var Ze=g["forwardRef"]((function(e,t){var n=e.id,r=e.mode,i=e.prefixCls,o=void 0===i?"rc-select":i,u=e.backfill,c=e.fieldNames,d=e.inputValue,m=e.searchValue,y=e.onSearch,b=e.autoClearSearchValue,_=void 0===b||b,x=e.onSelect,w=e.onDeselect,O=e.dropdownMatchSelectWidth,E=void 0===O||O,S=e.filterOption,j=e.filterSort,A=e.optionFilterProp,k=e.optionLabelProp,C=e.options,T=e.children,M=e.defaultActiveFirstOption,P=e.menuItemSelectedIcon,I=e.virtual,L=e.listHeight,D=void 0===L?200:L,F=e.listItemHeight,z=void 0===F?20:F,B=e.value,U=e.defaultValue,V=e.labelInValue,H=e.onChange,G=Object(h["a"])(e,Ge),W=xe(n),q=fe(r),Z=!(C||!T),Y=g["useMemo"]((function(){return(void 0!==S||"combobox"!==r)&&S}),[S,r]),X=g["useMemo"]((function(){return oe(c,Z)}),[JSON.stringify(c),Z]),K=Object(v["a"])("",{value:void 0!==m?m:d,postState:function(e){return e||""}}),$=Object(p["a"])(K,2),Q=$[0],J=$[1],ee=Ae(C,T,X,A,k),te=ee.valueOptions,ne=ee.labelOptions,re=ee.options,ie=g["useCallback"]((function(e){var t=R(e);return t.map((function(e){var t,n,r,i,o,a;qe(e)?t=e:(r=e.key,n=e.label,t=null!==(a=e.value)&&void 0!==a?a:r);var s,u=te.get(t);u&&(void 0===n&&(n=null===u||void 0===u?void 0:u[k||X.label]),void 0===r&&(r=null!==(s=null===u||void 0===u?void 0:u.key)&&void 0!==s?s:t),i=null===u||void 0===u?void 0:u.disabled,o=null===u||void 0===u?void 0:u.title);return{label:n,value:t,key:r,disabled:i,title:o}}))}),[X,k,te]),ue=Object(v["a"])(U,{value:B}),ce=Object(p["a"])(ue,2),le=ce[0],pe=ce[1],ve=g["useMemo"]((function(){var e,t=ie(le);return"combobox"!==r||null!==(e=t[0])&&void 0!==e&&e.value?t:[]}),[le,ie,r]),ge=de(ve,te),ye=Object(p["a"])(ge,2),be=ye[0],_e=ye[1],we=g["useMemo"]((function(){if(!r&&1===be.length){var e=be[0];if(null===e.value&&(null===e.label||void 0===e.label))return[]}return be.map((function(e){var t;return Object(f["a"])(Object(f["a"])({},e),{},{label:null!==(t=e.label)&&void 0!==t?t:e.value})}))}),[r,be]),Oe=g["useMemo"]((function(){return new Set(be.map((function(e){return e.value})))}),[be]);g["useEffect"]((function(){if("combobox"===r){var e,t=null===(e=be[0])||void 0===e?void 0:e.value;J(N(t)?String(t):"")}}),[be]);var Ee=ke((function(e,t){var n,r=null!==t&&void 0!==t?t:e;return n={},Object(a["a"])(n,X.value,e),Object(a["a"])(n,X.label,r),n})),Se=g["useMemo"]((function(){if("tags"!==r)return re;var e=Object(l["a"])(re),t=function(e){return te.has(e)};return Object(l["a"])(be).sort((function(e,t){return e.value<t.value?-1:1})).forEach((function(n){var r=n.value;t(r)||e.push(Ee(r,n.label))})),e}),[Ee,re,te,be,r]),je=me(Se,X,Q,Y,A),Ce=g["useMemo"]((function(){return"tags"!==r||!Q||je.some((function(e){return e[A||"value"]===Q}))?je:[Ee(Q)].concat(Object(l["a"])(je))}),[Ee,A,r,je,Q]),Te=g["useMemo"]((function(){return j?Object(l["a"])(Ce).sort((function(e,t){return j(e,t)})):Ce}),[Ce,j]),Me=g["useMemo"]((function(){return ae(Te,{fieldNames:X,childrenAsData:Z})}),[Te,X,Z]),Pe=function(e){var t=ie(e);if(pe(t),H&&(t.length!==be.length||t.some((function(e,t){var n;return(null===(n=be[t])||void 0===n?void 0:n.value)!==(null===e||void 0===e?void 0:e.value)})))){var n=V?t:t.map((function(e){return e.value})),r=t.map((function(e){return se(_e(e.value))}));H(q?n:n[0],q?r:r[0])}},Ie=g["useState"](null),Re=Object(p["a"])(Ie,2),Le=Re[0],De=Re[1],Ne=g["useState"](0),ze=Object(p["a"])(Ne,2),Be=ze[0],Ue=ze[1],Ve=void 0!==M?M:"combobox"!==r,Ze=g["useCallback"]((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.source,o=void 0===i?"keyboard":i;Ue(t),u&&"combobox"===r&&null!==e&&"keyboard"===o&&De(String(e))}),[u,r]),Ye=function(e,t,n){var r=function(){var t,n=_e(e);return[V?{label:null===n||void 0===n?void 0:n[X.label],value:e,key:null!==(t=null===n||void 0===n?void 0:n.key)&&void 0!==t?t:e}:e,se(n)]};if(t&&x){var i=r(),o=Object(p["a"])(i,2),a=o[0],s=o[1];x(a,s)}else if(!t&&w&&"clear"!==n){var u=r(),c=Object(p["a"])(u,2),l=c[0],f=c[1];w(l,f)}},Xe=ke((function(e,t){var n,i=!q||t.selected;n=i?q?[].concat(Object(l["a"])(be),[e]):[e]:be.filter((function(t){return t.value!==e})),Pe(n),Ye(e,i),"combobox"===r?De(""):fe&&!_||(J(""),De(""))})),Ke=function(e,t){Pe(e);var n=t.type,r=t.values;"remove"!==n&&"clear"!==n||r.forEach((function(e){Ye(e.value,!1,n)}))},$e=function(e,t){if(J(e),De(null),"submit"!==t.source)"blur"!==t.source&&("combobox"===r&&Pe(e),null===y||void 0===y||y(e));else{var n=(e||"").trim();if(n){var i=Array.from(new Set([].concat(Object(l["a"])(Oe),[n])));Pe(i),Ye(n,!0),J("")}}},Qe=function(e){var t=e;"tags"!==r&&(t=e.map((function(e){var t=ne.get(e);return null===t||void 0===t?void 0:t.value})).filter((function(e){return void 0!==e})));var n=Array.from(new Set([].concat(Object(l["a"])(Oe),Object(l["a"])(t))));Pe(n),n.forEach((function(e){Ye(e,!0)}))},Je=g["useMemo"]((function(){var e=!1!==I&&!1!==E;return Object(f["a"])(Object(f["a"])({},ee),{},{flattenOptions:Me,onActiveValue:Ze,defaultActiveFirstOption:Ve,onSelect:Xe,menuItemSelectedIcon:P,rawValues:Oe,fieldNames:X,virtual:e,listHeight:D,listItemHeight:z,childrenAsData:Z})}),[ee,Me,Ze,Ve,Xe,P,Oe,X,I,E,D,z,Z]);return g["createElement"](Fe.Provider,{value:Je},g["createElement"](he,Object(s["a"])({},G,{id:W,prefixCls:o,ref:t,omitDomProps:We,mode:r,displayValues:we,onDisplayValuesChange:Ke,searchValue:Q,onSearch:$e,autoClearSearchValue:_,onSearchSplit:Qe,dropdownMatchSelectWidth:E,OptionList:He,emptyOptions:!Me.length,activeValue:Le,activeDescendantId:"".concat(W,"_list_").concat(Be)})))}));var Ye=Ze;Ye.Option=Pe,Ye.OptGroup=Te;var Xe=Ye,Ke=Xe,$e=n("H84U"),Qe=n("YMnH"),Je=function(){var e=g["useContext"]($e["b"]),t=e.getPrefixCls,n=t("empty-img-default");return g["createElement"]("svg",{className:n,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},g["createElement"]("g",{fill:"none",fillRule:"evenodd"},g["createElement"]("g",{transform:"translate(24 31.67)"},g["createElement"]("ellipse",{className:"".concat(n,"-ellipse"),cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),g["createElement"]("path",{className:"".concat(n,"-path-1"),d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),g["createElement"]("path",{className:"".concat(n,"-path-2"),d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",transform:"translate(13.56)"}),g["createElement"]("path",{className:"".concat(n,"-path-3"),d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),g["createElement"]("path",{className:"".concat(n,"-path-4"),d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})),g["createElement"]("path",{className:"".concat(n,"-path-5"),d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),g["createElement"]("g",{className:"".concat(n,"-g"),transform:"translate(149.65 15.383)"},g["createElement"]("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),g["createElement"]("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},et=Je,tt=function(){var e=g["useContext"]($e["b"]),t=e.getPrefixCls,n=t("empty-img-simple");return g["createElement"]("svg",{className:n,width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},g["createElement"]("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},g["createElement"]("ellipse",{className:"".concat(n,"-ellipse"),cx:"32",cy:"33",rx:"32",ry:"7"}),g["createElement"]("g",{className:"".concat(n,"-g"),fillRule:"nonzero"},g["createElement"]("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),g["createElement"]("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",className:"".concat(n,"-path")}))))},nt=tt,rt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},it=g["createElement"](et,null),ot=g["createElement"](nt,null),at=function(e){var t=e.className,n=e.prefixCls,r=e.image,i=void 0===r?it:r,o=e.description,u=e.children,l=e.imageStyle,f=rt(e,["className","prefixCls","image","description","children","imageStyle"]),p=g["useContext"]($e["b"]),h=p.getPrefixCls,d=p.direction;return g["createElement"](Qe["a"],{componentName:"Empty"},(function(e){var r,p=h("empty",n),v="undefined"!==typeof o?o:e.description,m="string"===typeof v?v:"empty",y=null;return y="string"===typeof i?g["createElement"]("img",{alt:m,src:i}):i,g["createElement"]("div",Object(s["a"])({className:c()(p,(r={},Object(a["a"])(r,"".concat(p,"-normal"),i===ot),Object(a["a"])(r,"".concat(p,"-rtl"),"rtl"===d),r),t)},f),g["createElement"]("div",{className:"".concat(p,"-image"),style:l},y),v&&g["createElement"]("div",{className:"".concat(p,"-description")},v),u&&g["createElement"]("div",{className:"".concat(p,"-footer")},u))}))};at.PRESENTED_IMAGE_DEFAULT=it,at.PRESENTED_IMAGE_SIMPLE=ot;var st=at,ut=function(e){return g["createElement"]($e["a"],null,(function(t){var n=t.getPrefixCls,r=n("empty");switch(e){case"Table":case"List":return g["createElement"](st,{image:st.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return g["createElement"](st,{image:st.PRESENTED_IMAGE_SIMPLE,className:"".concat(r,"-small")});default:return g["createElement"](st,null)}}))},ct=ut,lt=n("caoh"),ft=n("3Nzz"),pt=(n("85Yc"),g["createContext"]({})),ht=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t},dt=(ht("bottomLeft","bottomRight","topLeft","topRight"),function(e){return void 0===e||"topLeft"!==e&&"topRight"!==e?"slide-up":"slide-down"}),vt=function(e,t,n){return void 0!==n?n:"".concat(e,"-").concat(t)};ht("warning","error","");function mt(e,t,n){var r;return c()((r={},Object(a["a"])(r,"".concat(e,"-status-success"),"success"===t),Object(a["a"])(r,"".concat(e,"-status-warning"),"warning"===t),Object(a["a"])(r,"".concat(e,"-status-error"),"error"===t),Object(a["a"])(r,"".concat(e,"-status-validating"),"validating"===t),Object(a["a"])(r,"".concat(e,"-has-feedback"),n),r))}var gt=function(e,t){return t||e},yt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},bt=yt,_t=n("6VBw"),xt=function(e,t){return g["createElement"](_t["a"],Object(f["a"])(Object(f["a"])({},e),{},{ref:t,icon:bt}))};xt.displayName="CheckOutlined";var wt=g["forwardRef"](xt),Ot=n("jN4g"),Et=n("4i/N"),St={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},jt=St,At=function(e,t){return g["createElement"](_t["a"],Object(f["a"])(Object(f["a"])({},e),{},{ref:t,icon:jt}))};At.displayName="DownOutlined";var kt=g["forwardRef"](At),Ct=n("ye1Q"),Tt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},Mt=Tt,Pt=function(e,t){return g["createElement"](_t["a"],Object(f["a"])(Object(f["a"])({},e),{},{ref:t,icon:Mt}))};Pt.displayName="SearchOutlined";var It=g["forwardRef"](Pt);function Rt(e){var t=e.suffixIcon,n=e.clearIcon,r=e.menuItemSelectedIcon,i=e.removeIcon,o=e.loading,a=e.multiple,s=e.hasFeedback,u=e.prefixCls,c=e.showArrow,l=e.feedbackIcon,f=null!==n&&void 0!==n?n:g["createElement"](Ot["a"],null),p=function(e){return g["createElement"](g["Fragment"],null,!1!==c&&e,s&&l)},h=null;if(void 0!==t)h=p(t);else if(o)h=p(g["createElement"](Ct["a"],{spin:!0}));else{var d="".concat(u,"-suffix");h=function(e){var t=e.open,n=e.showSearch;return p(t&&n?g["createElement"](It,{className:d}):g["createElement"](kt,{className:d}))}}var v=null;v=void 0!==r?r:a?g["createElement"](wt,null):null;var m=null;return m=void 0!==i?i:g["createElement"](Et["a"],null),{clearIcon:f,suffixIcon:h,itemIcon:v,removeIcon:m}}var Lt=g["createContext"](null),Dt=function(e,t){var n=g["useContext"](Lt),r=g["useMemo"]((function(){var r;if(!n)return"";var i=n.compactDirection,o=n.isFirstItem,s=n.isLastItem,u="vertical"===i?"-vertical-":"-";return c()((r={},Object(a["a"])(r,"".concat(e,"-compact").concat(u,"item"),!0),Object(a["a"])(r,"".concat(e,"-compact").concat(u,"first-item"),o),Object(a["a"])(r,"".concat(e,"-compact").concat(u,"last-item"),s),Object(a["a"])(r,"".concat(e,"-compact").concat(u,"item-rtl"),"rtl"===t),r))}),[e,t,n]);return{compactSize:null===n||void 0===n?void 0:n.compactSize,compactDirection:null===n||void 0===n?void 0:n.compactDirection,compactItemClassnames:r}},Nt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Ft="SECRET_COMBOBOX_MODE_DO_NOT_USE",zt=function(e,t){var n,r,i=e.prefixCls,o=e.bordered,u=void 0===o||o,l=e.className,f=e.getPopupContainer,p=e.dropdownClassName,h=e.popupClassName,d=e.listHeight,v=void 0===d?256:d,m=e.placement,y=e.listItemHeight,b=void 0===y?24:y,_=e.size,x=e.disabled,w=e.notFoundContent,O=e.status,E=e.showArrow,S=Nt(e,["prefixCls","bordered","className","getPopupContainer","dropdownClassName","popupClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","showArrow"]),j=g["useContext"]($e["b"]),A=j.getPopupContainer,k=j.getPrefixCls,C=j.renderEmpty,T=j.direction,M=j.virtual,P=j.dropdownMatchSelectWidth,I=g["useContext"](ft["b"]),R=k("select",i),L=k(),D=Dt(R,T),N=D.compactSize,F=D.compactItemClassnames,z=g["useMemo"]((function(){var e=S.mode;if("combobox"!==e)return e===Ft?"combobox":e}),[S.mode]),B="multiple"===z||"tags"===z,U=void 0!==E?E:S.loading||!(B||"combobox"===z),V=Object(g["useContext"])(pt),H=V.status,G=V.hasFeedback,W=V.isFormItemInput,q=V.feedbackIcon,Z=gt(H,O);r=void 0!==w?w:"combobox"===z?null:(C||ct)("Select");var Y=Rt(Object(s["a"])(Object(s["a"])({},S),{multiple:B,hasFeedback:G,feedbackIcon:q,showArrow:U,prefixCls:R})),X=Y.suffixIcon,K=Y.itemIcon,$=Y.removeIcon,Q=Y.clearIcon,J=Object(Ie["a"])(S,["suffixIcon","itemIcon"]),ee=c()(h||p,Object(a["a"])({},"".concat(R,"-dropdown-").concat(T),"rtl"===T)),te=N||_||I,ne=g["useContext"](lt["b"]),re=null!==x&&void 0!==x?x:ne,ie=c()((n={},Object(a["a"])(n,"".concat(R,"-lg"),"large"===te),Object(a["a"])(n,"".concat(R,"-sm"),"small"===te),Object(a["a"])(n,"".concat(R,"-rtl"),"rtl"===T),Object(a["a"])(n,"".concat(R,"-borderless"),!u),Object(a["a"])(n,"".concat(R,"-in-form-item"),W),n),mt(R,Z,G),F,l),oe=function(){return void 0!==m?m:"rtl"===T?"bottomRight":"bottomLeft"};return g["createElement"](Ke,Object(s["a"])({ref:t,virtual:M,dropdownMatchSelectWidth:P},J,{transitionName:vt(L,dt(m),S.transitionName),listHeight:v,listItemHeight:b,mode:z,prefixCls:R,placement:oe(),direction:T,inputIcon:X,menuItemSelectedIcon:K,removeIcon:$,clearIcon:Q,notFoundContent:r,className:ie,getPopupContainer:f||A,dropdownClassName:ee,showArrow:G||E,disabled:re}))},Bt=g["forwardRef"](zt);Bt.SECRET_COMBOBOX_MODE_DO_NOT_USE=Ft,Bt.Option=Pe,Bt.OptGroup=Te;var Ut=Bt,Vt=n("/7QA"),Ht=n("nKUr"),Gt=Ut.Option;t["default"]=()=>{var e=Object(g["useState"])(),t=Object(o["a"])(e,2),n=t[0],a=t[1],s=Object(g["useState"])("additive"),u=Object(o["a"])(s,2),c=u[0],l=u[1],f=Object(g["useCallback"])((()=>Object(Ht["jsx"])(Ut,{defaultValue:"additive",style:{width:120},onChange:e=>{l(e)},children:["additive","normal","max","min","none"].map((e=>Object(Ht["jsx"])(Gt,{value:e,children:e},e)))})),[]);return Object(g["useEffect"])((()=>{var e=function(){var e=Object(i["a"])(Object(r["a"])().mark((function e(){var t,n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://gw.alipayobjects.com/os/basement_prod/337ddbb7-aa3f-4679-ab60-d64359241955.json");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,console.log(n),a(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(Ht["jsxs"])(Vt["a"],{map:{center:[110.19382669582967,50.258134],pitch:0,style:"dark",zoom:1},style:{height:"400px",position:"relative",background:"#011030"},children:[n&&Object(Ht["jsx"])(Vt["i"],{options:{blend:c},source:{data:n},size:{values:10},color:{values:"#b97feb"},shape:{values:"circle"}}),Object(Ht["jsx"])(Vt["d"],{position:"topright",children:Object(Ht["jsx"])(f,{})})]})}},"1kQv":function(e,t,n){var r=n("I+eb"),i=n("qY7S");r({target:"Set",stat:!0},{from:i})},"25BE":function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,"a",(function(){return r}))},"27RR":function(e,t,n){var r=n("I+eb"),i=n("g6v/"),o=n("Vu81"),a=n("/GqU"),s=n("Bs8V"),u=n("hBjN");r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){var t,n,r=a(e),i=s.f,c=o(r),l={},f=0;while(c.length>f)n=i(r,t=c[f++]),void 0!==n&&u(l,t,n);return l}})},"2B1R":function(e,t,n){"use strict";var r=n("I+eb"),i=n("tycR").map,o=n("Hd5f"),a=n("rkAj"),s=o("map"),u=a("map");r({target:"Array",proto:!0,forced:!s||!u},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"2N97":function(e,t,n){"use strict";var r=n("xbqb")["default"],i=n("Lw8S")["default"];function o(){var e=n("q1tI");return o=function(){return e},e}function a(e,t){return f(e)||l(e,t)||u(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function f(e){if(Array.isArray(e))return e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var p,h="data-prefers-color",d="dumi:prefers-color",v=function(){function e(){var t=this;r(this,e),this.color=void 0,this.callbacks=[],this.color=localStorage.getItem(d)||document.documentElement.getAttribute(h),["light","dark"].forEach((function(e){var n=t.getColorMedia(e),r=function(n){n.matches&&"auto"===t.color&&(document.documentElement.setAttribute(h,e),t.applyCallbacks())};n.addEventListener?n.addEventListener("change",r):n.addListener&&n.addListener(r)}))}return i(e,[{key:"getColorMedia",value:function(e){return window.matchMedia("(prefers-color-scheme: ".concat(e,")"))}},{key:"isColorMode",value:function(e){return this.getColorMedia(e).matches}},{key:"applyCallbacks",value:function(){var e=this;this.callbacks.forEach((function(t){return t(e.color)}))}},{key:"listen",value:function(e){this.callbacks.push(e)}},{key:"unlisten",value:function(e){this.callbacks.splice(this.callbacks.indexOf(e),1)}},{key:"set",value:function(e){return this.color=e,localStorage.setItem(d,e),this.applyCallbacks(),"auto"===e?document.documentElement.setAttribute(h,this.isColorMode("dark")?"dark":"light"):document.documentElement.setAttribute(h,e),e}}]),e}(),m=function(){var e=(0,o().useState)(),t=a(e,2),n=t[0],r=t[1],i=(0,o().useCallback)((function(e){p.set(e)}),[]);return(0,o().useEffect)((function(){return p=p||new v,p.listen(r),r(p.color),function(){return p.unlisten(r)}}),[]),[n,i]};t["default"]=m},"2WcH":function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n.d(t,"a",(function(){return r}))},"2gN3":function(e,t,n){var r=n("Kz5y"),i=r["__core-js_shared__"];e.exports=i},"2mql":function(e,t,n){"use strict";var r=n("TOwV"),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function c(e){return r.isMemo(e)?s:u[e["$$typeof"]]||i}u[r.ForwardRef]=a,u[r.Memo]=s;var l=Object.defineProperty,f=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,v=Object.prototype;function m(e,t,n){if("string"!==typeof t){if(v){var r=d(t);r&&r!==v&&m(e,r,n)}var i=f(t);p&&(i=i.concat(p(t)));for(var a=c(e),s=c(t),u=0;u<i.length;++u){var g=i[u];if(!o[g]&&(!n||!n[g])&&(!s||!s[g])&&(!a||!a[g])){var y=h(t,g);try{l(e,g,y)}catch(b){}}}}return e}e.exports=m},"2oRo":function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n("IyRk"))},"2tOg":function(e,t,n){"use strict";var r=n("g6v/"),i=n("RNIs"),o=n("ewvW"),a=n("UMSQ"),s=n("m/L8").f;r&&!("lastItem"in[])&&(s(Array.prototype,"lastItem",{configurable:!0,get:function(){var e=o(this),t=a(e.length);return 0==t?void 0:e[t-1]},set:function(e){var t=o(this),n=a(t.length);return t[0==n?0:n-1]=e}}),i("lastItem"))},"33Wh":function(e,t,n){var r=n("yoRg"),i=n("eDl+");e.exports=Object.keys||function(e){return r(e,i)}},"33yf":function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e){"string"!==typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}function i(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,r="/"===a.charAt(0))}return t=n(i(t.split("/"),(function(e){return!!e})),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),a="/"===o(e,-1);return e=n(i(e.split("/"),(function(e){return!!e})),!r).join("/"),e||r||(e="."),e&&a&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}var c=[];for(u=s;u<i.length;u++)c.push("..");return c=c.concat(o.slice(s)),c.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(t=e.charCodeAt(o),47===t){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=r(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=a+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var o="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("Q2Ig"))},"3A9y":function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},"3Fdi":function(e,t){var n=Function.prototype,r=n.toString;function i(e){if(null!=e){try{return r.call(e)}catch(t){}try{return e+""}catch(t){}}return""}e.exports=i},"3I1R":function(e,t,n){var r=n("dG/n");r("hasInstance")},"3L5V":function(e,t,n){(function(t){(function(t,n){e.exports=n()})(0,(function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var i=function(){function e(e,t){this.next=null,this.key=e,this.data=t,this.left=null,this.right=null}return e}();function o(e,t){return e>t?1:e<t?-1:0}function a(e,t,n){var r=new i(null,null),o=r,a=r;while(1){var s=n(e,t.key);if(s<0){if(null===t.left)break;if(n(e,t.left.key)<0){var u=t.left;if(t.left=u.right,u.right=t,t=u,null===t.left)break}a.left=t,a=t,t=t.left}else{if(!(s>0))break;if(null===t.right)break;if(n(e,t.right.key)>0){u=t.right;if(t.right=u.left,u.left=t,t=u,null===t.right)break}o.right=t,o=t,t=t.right}}return o.right=t.left,a.left=t.right,t.left=r.right,t.right=r.left,t}function s(e,t,n,r){var o=new i(e,t);if(null===n)return o.left=o.right=null,o;n=a(e,n,r);var s=r(e,n.key);return s<0?(o.left=n.left,o.right=n,n.left=null):s>=0&&(o.right=n.right,o.left=n,n.right=null),o}function u(e,t,n){var r=null,i=null;if(t){t=a(e,t,n);var o=n(t.key,e);0===o?(r=t.left,i=t.right):o<0?(i=t.right,t.right=null,r=t):(r=t.left,t.left=null,i=t)}return{left:r,right:i}}function c(e,t,n){return null===t?e:(null===e||(t=a(e.key,t,n),t.left=e),t)}function l(e,t,n,r,i){if(e){r(t+(n?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+i(e)+"\n");var o=t+(n?"    ":"\u2502   ");e.left&&l(e.left,o,!1,r,i),e.right&&l(e.right,o,!0,r,i)}}var f=function(){function e(e){void 0===e&&(e=o),this._root=null,this._size=0,this._comparator=e}return e.prototype.insert=function(e,t){return this._size++,this._root=s(e,t,this._root,this._comparator)},e.prototype.add=function(e,t){var n=new i(e,t);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,o=a(e,this._root,r),s=r(e,o.key);return 0===s?this._root=o:(s<0?(n.left=o.left,n.right=o,o.left=null):s>0&&(n.right=o.right,n.left=o,o.right=null),this._size++,this._root=n),this._root},e.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},e.prototype._remove=function(e,t,n){var r;if(null===t)return null;t=a(e,t,n);var i=n(e,t.key);return 0===i?(null===t.left?r=t.right:(r=a(e,t.left,n),r.right=t.right),this._size--,r):t},e.prototype.pop=function(){var e=this._root;if(e){while(e.left)e=e.left;return this._root=a(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},e.prototype.findStatic=function(e){var t=this._root,n=this._comparator;while(t){var r=n(e,t.key);if(0===r)return t;t=r<0?t.left:t.right}return null},e.prototype.find=function(e){return this._root&&(this._root=a(e,this._root,this._comparator),0!==this._comparator(e,this._root.key))?null:this._root},e.prototype.contains=function(e){var t=this._root,n=this._comparator;while(t){var r=n(e,t.key);if(0===r)return!0;t=r<0?t.left:t.right}return!1},e.prototype.forEach=function(e,t){var n=this._root,r=[],i=!1;while(!i)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),e.call(t,n),n=n.right):i=!0;return this},e.prototype.range=function(e,t,n,r){var i,o=[],a=this._comparator,s=this._root;while(0!==o.length||s)if(s)o.push(s),s=s.left;else{if(s=o.pop(),i=a(s.key,t),i>0)break;if(a(s.key,e)>=0&&n.call(r,s))return this;s=s.right}return this},e.prototype.keys=function(){var e=[];return this.forEach((function(t){var n=t.key;return e.push(n)})),e},e.prototype.values=function(){var e=[];return this.forEach((function(t){var n=t.data;return e.push(n)})),e},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(e){if(void 0===e&&(e=this._root),e)while(e.left)e=e.left;return e},e.prototype.maxNode=function(e){if(void 0===e&&(e=this._root),e)while(e.right)e=e.right;return e},e.prototype.at=function(e){var t=this._root,n=!1,r=0,i=[];while(!n)if(t)i.push(t),t=t.left;else if(i.length>0){if(t=i.pop(),r===e)return t;r++,t=t.right}else n=!0;return null},e.prototype.next=function(e){var t=this._root,n=null;if(e.right){n=e.right;while(n.left)n=n.left;return n}var r=this._comparator;while(t){var i=r(e.key,t.key);if(0===i)break;i<0?(n=t,t=t.left):t=t.right}return n},e.prototype.prev=function(e){var t=this._root,n=null;if(null!==e.left){n=e.left;while(n.right)n=n.right;return n}var r=this._comparator;while(t){var i=r(e.key,t.key);if(0===i)break;i<0?t=t.left:(n=t,t=t.right)}return n},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return d(this._root)},e.prototype.load=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=!1);var r=e.length,i=this._comparator;if(n&&g(e,t,0,r-1,i),null===this._root)this._root=p(e,t,0,r),this._size=r;else{var o=m(this.toList(),h(e,t),i);r=this._size+r,this._root=v({head:o},0,r)}return this},e.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){void 0===e&&(e=function(e){return String(e.key)});var t=[];return l(this._root,"",!0,(function(e){return t.push(e)}),e),t.join("")},e.prototype.update=function(e,t,n){var r=this._comparator,i=u(e,this._root,r),o=i.left,a=i.right;r(e,t)<0?a=s(t,n,a,r):o=s(t,n,o,r),this._root=c(o,a,r)},e.prototype.split=function(e){return u(e,this._root,this._comparator)},e}();function p(e,t,n,r){var o=r-n;if(o>0){var a=n+Math.floor(o/2),s=e[a],u=t[a],c=new i(s,u);return c.left=p(e,t,n,a),c.right=p(e,t,a+1,r),c}return null}function h(e,t){for(var n=new i(null,null),r=n,o=0;o<e.length;o++)r=r.next=new i(e[o],t[o]);return r.next=null,n.next}function d(e){var t=e,n=[],r=!1,o=new i(null,null),a=o;while(!r)t?(n.push(t),t=t.left):n.length>0?(t=a=a.next=n.pop(),t=t.right):r=!0;return a.next=null,o.next}function v(e,t,n){var r=n-t;if(r>0){var i=t+Math.floor(r/2),o=v(e,t,i),a=e.head;return a.left=o,e.head=e.head.next,a.right=v(e,i+1,n),a}return null}function m(e,t,n){var r=new i(null,null),o=r,a=e,s=t;while(null!==a&&null!==s)n(a.key,s.key)<0?(o.next=a,a=a.next):(o.next=s,s=s.next),o=o.next;return null!==a?o.next=a:null!==s&&(o.next=s),r.next}function g(e,t,n,r,i){if(!(n>=r)){var o=e[n+r>>1],a=n-1,s=r+1;while(1){do{a++}while(i(e[a],o)<0);do{s--}while(i(e[s],o)>0);if(a>=s)break;var u=e[a];e[a]=e[s],e[s]=u,u=t[a],t[a]=t[s],t[s]=u}g(e,t,n,s,i),g(e,t,s+1,r,i)}}var y=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},b=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,r=e.ur.x<t.ur.x?e.ur.x:t.ur.x,i=e.ll.y<t.ll.y?t.ll.y:e.ll.y,o=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:o}}},_=Number.EPSILON;void 0===_&&(_=Math.pow(2,-52));var x=_*_,w=function(e,t){if(-_<e&&e<_&&-_<t&&t<_)return 0;var n=e-t;return n*n<x*e*t?0:e<t?-1:1},O=function(){function t(){e(this,t),this.reset()}return r(t,[{key:"reset",value:function(){this.xRounder=new E,this.yRounder=new E}},{key:"round",value:function(e,t){return{x:this.xRounder.round(e),y:this.yRounder.round(t)}}}]),t}(),E=function(){function t(){e(this,t),this.tree=new f,this.round(0)}return r(t,[{key:"round",value:function(e){var t=this.tree.add(e),n=this.tree.prev(t);if(null!==n&&0===w(t.key,n.key))return this.tree.remove(e),n.key;var r=this.tree.next(t);return null!==r&&0===w(t.key,r.key)?(this.tree.remove(e),r.key):e}}]),t}(),S=new O,j=function(e,t){return e.x*t.y-e.y*t.x},A=function(e,t){return e.x*t.x+e.y*t.y},k=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y},o=j(r,i);return w(o,0)},C=function(e){return Math.sqrt(A(e,e))},T=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return j(i,r)/C(i)/C(r)},M=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return A(i,r)/C(i)/C(r)},P=function(e,t,n){return 0===t.y?null:{x:e.x+t.x/t.y*(n-e.y),y:n}},I=function(e,t,n){return 0===t.x?null:{x:n,y:e.y+t.y/t.x*(n-e.x)}},R=function(e,t,n,r){if(0===t.x)return I(n,r,e.x);if(0===r.x)return I(e,t,n.x);if(0===t.y)return P(n,r,e.y);if(0===r.y)return P(e,t,n.y);var i=j(t,r);if(0==i)return null;var o={x:n.x-e.x,y:n.y-e.y},a=j(o,t)/i,s=j(o,r)/i,u=e.x+s*t.x,c=n.x+a*r.x,l=e.y+s*t.y,f=n.y+a*r.y,p=(u+c)/2,h=(l+f)/2;return{x:p,y:h}},L=function(){function t(n,r){e(this,t),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=r}return r(t,null,[{key:"compare",value:function(e,n){var r=t.comparePoints(e.point,n.point);return 0!==r?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:N.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(e,t){return e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0}}]),r(t,[{key:"link",value:function(e){if(e.point===this.point)throw new Error("Tried to link already linked events");for(var t=e.point.events,n=0,r=t.length;n<r;n++){var i=t[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var e=this.point.events.length,t=0;t<e;t++){var n=this.point.events[t];if(void 0===n.segment.consumedBy)for(var r=t+1;r<e;r++){var i=this.point.events[r];void 0===i.consumedBy&&(n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment))}}}},{key:"getAvailableLinkedEvents",value:function(){for(var e=[],t=0,n=this.point.events.length;t<n;t++){var r=this.point.events[t];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&e.push(r)}return e}},{key:"getLeftmostComparator",value:function(e){var t=this,n=new Map,r=function(r){var i=r.otherSE;n.set(r,{sine:T(t.point,e.point,i.point),cosine:M(t.point,e.point,i.point)})};return function(e,t){n.has(e)||r(e),n.has(t)||r(t);var i=n.get(e),o=i.sine,a=i.cosine,s=n.get(t),u=s.sine,c=s.cosine;return o>=0&&u>=0?a<c?1:a>c?-1:0:o<0&&u<0?a<c?-1:a>c?1:0:u<o?-1:u>o?1:0}}}]),t}(),D=0,N=function(){function t(n,r,i,o){e(this,t),this.id=++D,this.leftSE=n,n.segment=this,n.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=n,this.rings=i,this.windings=o}return r(t,null,[{key:"compare",value:function(e,t){var n=e.leftSE.point.x,r=t.leftSE.point.x,i=e.rightSE.point.x,o=t.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var a=e.leftSE.point.y,s=t.leftSE.point.y,u=e.rightSE.point.y,c=t.rightSE.point.y;if(n<r){if(s<a&&s<u)return 1;if(s>a&&s>u)return-1;var l=e.comparePoint(t.leftSE.point);if(l<0)return 1;if(l>0)return-1;var f=t.comparePoint(e.rightSE.point);return 0!==f?f:-1}if(n>r){if(a<s&&a<c)return-1;if(a>s&&a>c)return 1;var p=t.comparePoint(e.leftSE.point);if(0!==p)return p;var h=e.comparePoint(t.rightSE.point);return h<0?1:h>0?-1:1}if(a<s)return-1;if(a>s)return 1;if(i<o){var d=t.comparePoint(e.rightSE.point);if(0!==d)return d}if(i>o){var v=e.comparePoint(t.rightSE.point);if(v<0)return 1;if(v>0)return-1}if(i!==o){var m=u-a,g=i-n,y=c-s,b=o-r;if(m>g&&y<b)return 1;if(m<g&&y>b)return-1}return i>o?1:i<o||u<c?-1:u>c?1:e.id<t.id?-1:e.id>t.id?1:0}}]),r(t,[{key:"replaceRightSE",value:function(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var e=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e<t?e:t},ur:{x:this.rightSE.point.x,y:e>t?e:t}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(e){return e.x===this.leftSE.point.x&&e.y===this.leftSE.point.y||e.x===this.rightSE.point.x&&e.y===this.rightSE.point.y}},{key:"comparePoint",value:function(e){if(this.isAnEndpoint(e))return 0;var t=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(t.x===n.x)return e.x===t.x?0:e.x<t.x?1:-1;var i=(e.y-t.y)/r.y,o=t.x+i*r.x;if(e.x===o)return 0;var a=(e.x-t.x)/r.x,s=t.y+a*r.y;return e.y===s?0:e.y<s?-1:1}},{key:"getIntersection",value:function(e){var t=this.bbox(),n=e.bbox(),r=b(t,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,a=e.leftSE.point,s=e.rightSE.point,u=y(t,a)&&0===this.comparePoint(a),c=y(n,i)&&0===e.comparePoint(i),l=y(t,s)&&0===this.comparePoint(s),f=y(n,o)&&0===e.comparePoint(o);if(c&&u)return f&&!l?o:!f&&l?s:null;if(c)return l&&i.x===s.x&&i.y===s.y?null:i;if(u)return f&&o.x===a.x&&o.y===a.y?null:a;if(f&&l)return null;if(f)return o;if(l)return s;var p=R(i,this.vector(),a,e.vector());return null===p?null:y(r,p)?S.round(p.x,p.y):null}},{key:"split",value:function(e){var n=[],r=void 0!==e.events,i=new L(e,!0),o=new L(e,!1),a=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var s=new t(i,a,this.rings.slice(),this.windings.slice());return L.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),L.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var t=0,n=this.windings.length;t<n;t++)this.windings[t]*=-1}},{key:"consume",value:function(e){var n=this,r=e;while(n.consumedBy)n=n.consumedBy;while(r.consumedBy)r=r.consumedBy;var i=t.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var a=n;n=r,r=a}for(var s=0,u=r.rings.length;s<u;s++){var c=r.rings[s],l=r.windings[s],f=n.rings.indexOf(c);-1===f?(n.rings.push(c),n.windings.push(l)):n.windings[f]+=l}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};for(var t=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var a=this.rings[i],s=this.windings[i],u=t.indexOf(a);-1===u?(t.push(a),n.push(s)):n[u]+=s}for(var c=[],l=[],f=0,p=t.length;f<p;f++)if(0!==n[f]){var h=t[f],d=h.poly;if(-1===l.indexOf(d))if(h.isExterior)c.push(d);else{-1===l.indexOf(d)&&l.push(d);var v=c.indexOf(h.poly);-1!==v&&c.splice(v,1)}}for(var m=0,g=c.length;m<g;m++){var y=c[m].multiPoly;-1===r.indexOf(y)&&r.push(y)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var e=this.beforeState().multiPolys,t=this.afterState().multiPolys;switch(Y.type){case"union":var n=0===e.length,r=0===t.length;this._isInResult=n!==r;break;case"intersection":var i,o;e.length<t.length?(i=e.length,o=t.length):(i=t.length,o=e.length),this._isInResult=o===Y.numMultiPolys&&i<o;break;case"xor":var a=Math.abs(e.length-t.length);this._isInResult=a%2===1;break;case"difference":var s=function(e){return 1===e.length&&e[0].isSubject};this._isInResult=s(e)!==s(t);break;default:throw new Error("Unrecognized operation type found ".concat(Y.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,r){var i,o,a,s=L.comparePoints(e,n);if(s<0)i=e,o=n,a=1;else{if(!(s>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));i=n,o=e,a=-1}var u=new L(i,!0),c=new L(o,!1);return new t(u,c,[r],[a])}}]),t}(),F=function(){function t(n,r,i){if(e(this,t),!Array.isArray(n)||0===n.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=i,this.segments=[],"number"!==typeof n[0][0]||"number"!==typeof n[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=S.round(n[0][0],n[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var a=o,s=1,u=n.length;s<u;s++){if("number"!==typeof n[s][0]||"number"!==typeof n[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var c=S.round(n[s][0],n[s][1]);c.x===a.x&&c.y===a.y||(this.segments.push(N.fromRing(a,c,this)),c.x<this.bbox.ll.x&&(this.bbox.ll.x=c.x),c.y<this.bbox.ll.y&&(this.bbox.ll.y=c.y),c.x>this.bbox.ur.x&&(this.bbox.ur.x=c.x),c.y>this.bbox.ur.y&&(this.bbox.ur.y=c.y),a=c)}o.x===a.x&&o.y===a.y||this.segments.push(N.fromRing(a,o,this))}return r(t,[{key:"getSweepEvents",value:function(){for(var e=[],t=0,n=this.segments.length;t<n;t++){var r=this.segments[t];e.push(r.leftSE),e.push(r.rightSE)}return e}}]),t}(),z=function(){function t(n,r){if(e(this,t),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new F(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,o=n.length;i<o;i++){var a=new F(n[i],this,!1);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.interiorRings.push(a)}this.multiPoly=r}return r(t,[{key:"getSweepEvents",value:function(){for(var e=this.exteriorRing.getSweepEvents(),t=0,n=this.interiorRings.length;t<n;t++)for(var r=this.interiorRings[t].getSweepEvents(),i=0,o=r.length;i<o;i++)e.push(r[i]);return e}}]),t}(),B=function(){function t(n,r){if(e(this,t),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"===typeof n[0][0][0]&&(n=[n])}catch(s){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,o=n.length;i<o;i++){var a=new z(n[i],this);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.polys.push(a)}this.isSubject=r}return r(t,[{key:"getSweepEvents",value:function(){for(var e=[],t=0,n=this.polys.length;t<n;t++)for(var r=this.polys[t].getSweepEvents(),i=0,o=r.length;i<o;i++)e.push(r[i]);return e}}]),t}(),U=function(){function t(n){e(this,t),this.events=n;for(var r=0,i=n.length;r<i;r++)n[r].segment.ringOut=this;this.poly=null}return r(t,null,[{key:"factory",value:function(e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];if(o.isInResult()&&!o.ringOut){var a=null,s=o.leftSE,u=o.rightSE,c=[s],l=s.point,f=[];while(1){if(a=s,s=u,c.push(s),s.point===l)break;while(1){var p=s.getAvailableLinkedEvents();if(0===p.length){var h=c[0].point,d=c[c.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(h.x,",")+" ".concat(h.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===p.length){u=p[0].otherSE;break}for(var v=null,m=0,g=f.length;m<g;m++)if(f[m].point===s.point){v=m;break}if(null===v){f.push({index:c.length,point:s.point});var y=s.getLeftmostComparator(a);u=p.sort(y)[0].otherSE;break}var b=f.splice(v)[0],_=c.splice(b.index);_.unshift(_[0].otherSE),n.push(new t(_.reverse()))}}n.push(new t(c))}}return n}}]),r(t,[{key:"getGeom",value:function(){for(var e=this.events[0].point,t=[e],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==k(i,e,o)&&(t.push(i),e=i)}if(1===t.length)return null;var a=t[0],s=t[1];0===k(a,e,s)&&t.shift(),t.push(t[0]);for(var u=this.isExteriorRing()?1:-1,c=this.isExteriorRing()?0:t.length-1,l=this.isExteriorRing()?t.length:-1,f=[],p=c;p!=l;p+=u)f.push([t[p].x,t[p].y]);return f}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var e=this.enclosingRing();this._isExteriorRing=!e||!e.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var e=this.events[0],t=1,n=this.events.length;t<n;t++){var r=this.events[t];L.compare(e,r)>0&&(e=r)}var i=e.segment.prevInResult(),o=i?i.prevInResult():null;while(1){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),t}(),V=function(){function t(n){e(this,t),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return r(t,[{key:"addInterior",value:function(e){this.interiorRings.push(e),e.poly=this}},{key:"getGeom",value:function(){var e=[this.exteriorRing.getGeom()];if(null===e[0])return null;for(var t=0,n=this.interiorRings.length;t<n;t++){var r=this.interiorRings[t].getGeom();null!==r&&e.push(r)}return e}}]),t}(),H=function(){function t(n){e(this,t),this.rings=n,this.polys=this._composePolys(n)}return r(t,[{key:"getGeom",value:function(){for(var e=[],t=0,n=this.polys.length;t<n;t++){var r=this.polys[t].getGeom();null!==r&&e.push(r)}return e}},{key:"_composePolys",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];if(!i.poly)if(i.isExteriorRing())t.push(new V(i));else{var o=i.enclosingRing();o.poly||t.push(new V(o)),o.poly.addInterior(i)}}return t}}]),t}(),G=function(){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N.compare;e(this,t),this.queue=n,this.tree=new f(r),this.segments=[]}return r(t,[{key:"process",value:function(e){var t=e.segment,n=[];if(e.consumedBy)return e.isLeft?this.queue.remove(e.otherSE):this.tree.remove(t),n;var r=e.isLeft?this.tree.insert(t):this.tree.find(t);if(!r)throw new Error("Unable to find segment #".concat(t.id," ")+"[".concat(t.leftSE.point.x,", ").concat(t.leftSE.point.y,"] -> ")+"[".concat(t.rightSE.point.x,", ").concat(t.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");var i=r,o=r,a=void 0,s=void 0;while(void 0===a)i=this.tree.prev(i),null===i?a=null:void 0===i.key.consumedBy&&(a=i.key);while(void 0===s)o=this.tree.next(o),null===o?s=null:void 0===o.key.consumedBy&&(s=o.key);if(e.isLeft){var u=null;if(a){var c=a.getIntersection(t);if(null!==c&&(t.isAnEndpoint(c)||(u=c),!a.isAnEndpoint(c)))for(var l=this._splitSafely(a,c),f=0,p=l.length;f<p;f++)n.push(l[f])}var h=null;if(s){var d=s.getIntersection(t);if(null!==d&&(t.isAnEndpoint(d)||(h=d),!s.isAnEndpoint(d)))for(var v=this._splitSafely(s,d),m=0,g=v.length;m<g;m++)n.push(v[m])}if(null!==u||null!==h){var y=null;if(null===u)y=h;else if(null===h)y=u;else{var b=L.comparePoints(u,h);y=b<=0?u:h}this.queue.remove(t.rightSE),n.push(t.rightSE);for(var _=t.split(y),x=0,w=_.length;x<w;x++)n.push(_[x])}n.length>0?(this.tree.remove(t),n.push(e)):(this.segments.push(t),t.prev=a)}else{if(a&&s){var O=a.getIntersection(s);if(null!==O){if(!a.isAnEndpoint(O))for(var E=this._splitSafely(a,O),S=0,j=E.length;S<j;S++)n.push(E[S]);if(!s.isAnEndpoint(O))for(var A=this._splitSafely(s,O),k=0,C=A.length;k<C;k++)n.push(A[k])}}this.tree.remove(t)}return n}},{key:"_splitSafely",value:function(e,t){this.tree.remove(e);var n=e.rightSE;this.queue.remove(n);var r=e.split(t);return r.push(n),void 0===e.consumedBy&&this.tree.insert(e),r}}]),t}(),W="undefined"!==typeof t&&Object({NODE_ENV:"production"}).POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,q="undefined"!==typeof t&&Object({NODE_ENV:"production"}).POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Z=function(){function t(){e(this,t)}return r(t,[{key:"run",value:function(e,t,n){Y.type=e,S.reset();for(var r=[new B(t,!0)],i=0,o=n.length;i<o;i++)r.push(new B(n[i],!1));if(Y.numMultiPolys=r.length,"difference"===Y.type){var a=r[0],s=1;while(s<r.length)null!==b(r[s].bbox,a.bbox)?s++:r.splice(s,1)}if("intersection"===Y.type)for(var u=0,c=r.length;u<c;u++)for(var l=r[u],p=u+1,h=r.length;p<h;p++)if(null===b(l.bbox,r[p].bbox))return[];for(var d=new f(L.compare),v=0,m=r.length;v<m;v++)for(var g=r[v].getSweepEvents(),y=0,_=g.length;y<_;y++)if(d.insert(g[y]),d.size>W)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");var x=new G(d),w=d.size,O=d.pop();while(O){var E=O.key;if(d.size===w){var j=E.segment;throw new Error("Unable to pop() ".concat(E.isLeft?"left":"right"," SweepEvent ")+"[".concat(E.point.x,", ").concat(E.point.y,"] from segment #").concat(j.id," ")+"[".concat(j.leftSE.point.x,", ").concat(j.leftSE.point.y,"] -> ")+"[".concat(j.rightSE.point.x,", ").concat(j.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(d.size>W)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(x.segments.length>q)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var A=x.process(E),k=0,C=A.length;k<C;k++){var T=A[k];void 0===T.consumedBy&&d.insert(T)}w=d.size,O=d.pop()}S.reset();var M=U.factory(x.segments),P=new H(M);return P.getGeom()}}]),t}(),Y=new Z,X=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Y.run("union",e,n)},K=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Y.run("intersection",e,n)},$=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Y.run("xor",e,n)},Q=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Y.run("difference",e,n)},J={union:X,intersection:K,xor:$,difference:Q};return J}))}).call(this,n("Q2Ig"))},"3L66":function(e,t,n){var r=n("MMmD"),i=n("ExA7");function o(e){return i(e)&&r(e)}e.exports=o},"3Nzz":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("q1tI"),i=r["createContext"](void 0),o=function(e){var t=e.children,n=e.size;return r["createElement"](i.Consumer,null,(function(e){return r["createElement"](i.Provider,{value:n||e},t)}))};t["b"]=i},"3QDa":function(e,t,n){"use strict";var r=n("5wUe")["default"];function i(){var e=n("q1tI");return i=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var o=a(n("nLCz"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return p(e)||f(e,t)||c(e,t)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function p(e){if(Array.isArray(e))return e}function h(e,t,n){return Object.entries(e[t]).reduce((function(e,t){var i=r(t,2),o=i[0],a=i[1];return e[o]=a.map((function(e){var t={description:e.description};return Object.keys(e).forEach((function(r){if(r.startsWith("description.")){var i=r.match(/^description\.(.*)$/),o=s(i,2),a=o[1];a&&a===n&&(t.description=e[r])}else t[r]=e[r]})),t})),e}),{})}var d=function(e){var t=(0,i().useContext)(o["default"]),n=t.locale,r=t.apis,a=(0,i().useState)(h(r,e,n)),u=s(a,2),c=u[0],l=u[1];return(0,i().useEffect)((function(){l(h(r,e,n))}),[r,e,n]),c};t["default"]=d},"3bBZ":function(e,t,n){var r=n("2oRo"),i=n("/byt"),o=n("4mDm"),a=n("kRJp"),s=n("tiKp"),u=s("iterator"),c=s("toStringTag"),l=o.values;for(var f in i){var p=r[f],h=p&&p.prototype;if(h){if(h[u]!==l)try{a(h,u,l)}catch(v){h[u]=l}if(h[c]||a(h,c,f),i[f])for(var d in o)if(h[d]!==o[d])try{a(h,d,o[d])}catch(v){h[d]=o[d]}}}},"3uUd":function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("0GbY"),a=n("glrk"),s=n("HAuM"),u=n("A2ZE"),c=n("SEBh"),l=n("WGBp"),f=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{filter:function(e){var t=a(this),n=l(t),r=u(e,arguments.length>1?arguments[1]:void 0,3),i=new(c(t,o("Set"))),p=s(i.add);return f(n,(function(e){r(e,e,t)&&p.call(i,e)}),void 0,!1,!0),i}})},"406g":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingOnSyntax=void 0;var r=n("z4Hk"),i=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new r.BindingWhenSyntax(this._binding)},e}();t.BindingOnSyntax=i},"49+q":function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("fXLg");r({target:"Set",proto:!0,real:!0,forced:i},{addAll:function(){return o.apply(this,arguments)}})},"4Brf":function(e,t,n){"use strict";var r=n("I+eb"),i=n("g6v/"),o=n("2oRo"),a=n("UTVS"),s=n("hh1v"),u=n("m/L8").f,c=n("6JNq"),l=o.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var f={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new l(e):void 0===e?l():l(e);return""===e&&(f[t]=!0),t};c(p,l);var h=p.prototype=l.prototype;h.constructor=p;var d=h.toString,v="Symbol(test)"==String(l("test")),m=/^Symbol\((.*)\)[^)]+$/;u(h,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=d.call(e);if(a(f,e))return"";var n=v?t.slice(7,-1):t.replace(m,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:p})}},"4IlW":function(e,t,n){"use strict";var r={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=r.F1&&t<=r.F12)return!1;switch(t){case r.ALT:case r.CAPS_LOCK:case r.CONTEXT_MENU:case r.CTRL:case r.DOWN:case r.END:case r.ESC:case r.HOME:case r.INSERT:case r.LEFT:case r.MAC_FF_META:case r.META:case r.NUMLOCK:case r.NUM_CENTER:case r.PAGE_DOWN:case r.PAGE_UP:case r.PAUSE:case r.PRINT_SCREEN:case r.RIGHT:case r.SHIFT:case r.UP:case r.WIN_KEY:case r.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=r.ZERO&&e<=r.NINE)return!0;if(e>=r.NUM_ZERO&&e<=r.NUM_MULTIPLY)return!0;if(e>=r.A&&e<=r.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case r.SPACE:case r.QUESTION_MARK:case r.NUM_PLUS:case r.NUM_MINUS:case r.NUM_PERIOD:case r.NUM_DIVISION:case r.SEMICOLON:case r.DASH:case r.EQUALS:case r.COMMA:case r.PERIOD:case r.SLASH:case r.APOSTROPHE:case r.SINGLE_QUOTE:case r.OPEN_SQUARE_BRACKET:case r.BACKSLASH:case r.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};t["a"]=r},"4WOD":function(e,t,n){var r=n("UTVS"),i=n("ewvW"),o=n("93I0"),a=n("4Xet"),s=o("IE_PROTO"),u=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=i(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?u:null}},"4XaG":function(e,t,n){var r=n("dG/n");r("observable")},"4Xet":function(e,t,n){var r=n("0Dky");e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},"4ZJM":function(e,t,n){(function(t,n){e.exports=n()})(0,(function(){"use strict";var e,t,n;function r(r,i){if(e)if(t){var o="var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk);",a={};e(a),n=i(a),"undefined"!==typeof window&&(n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else t=i;else e=i}return r(["exports"],(function(e){function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n=r;function r(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=r}r.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},r.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},r.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},r.prototype.solveCurveX=function(e,t){var n,r,i,o,a;for(void 0===t&&(t=1e-6),i=e,a=0;a<8;a++){if(o=this.sampleCurveX(i)-e,Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-e)<t)return i;e>o?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var i=o;function o(e,t){this.x=e,this.y=t}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=r,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-r*(this.y-t.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(e){return e instanceof o?e:Array.isArray(e)?new o(e[0],e[1]):e};var a="undefined"!=typeof self?self:{},s=Math.pow(2,53)-1;function u(e,t,r,i){var o=new n(e,t,r,i);return function(e){return o.solve(e)}}var c=u(.25,.1,.25,1);function l(e,t,n){return Math.min(n,Math.max(t,e))}function f(e,t,n){var r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i}function p(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=0,i=t;r<i.length;r+=1){var o=i[r];for(var a in o)e[a]=o[a]}return e}var h=1;function d(){return h++}function v(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function m(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function g(e,t){e.forEach((function(e){t[e]&&(t[e]=t[e].bind(t))}))}function y(e,t){return-1!==e.indexOf(t,e.length-t.length)}function b(e,t,n){var r={};for(var i in e)r[i]=t.call(n||this,e[i],i,e);return r}function _(e,t,n){var r={};for(var i in e)t.call(n||this,e[i],i,e)&&(r[i]=e[i]);return r}function x(e){return Array.isArray(e)?e.map(x):"object"==typeof e&&e?b(e,x):e}var w={};function O(e){w[e]||("undefined"!=typeof console&&console.warn(e),w[e]=!0)}function E(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function S(e){for(var t=0,n=0,r=e.length,i=r-1,o=void 0,a=void 0;n<r;i=n++)t+=((a=e[i]).x-(o=e[n]).x)*(o.y+a.y);return t}function j(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function A(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(e,n,r,i){var o=r||i;return t[n]=!o||o.toLowerCase(),""})),t["max-age"]){var n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t}var k=null;function C(e){if(null==k){var t=e.navigator?e.navigator.userAgent:null;k=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return k}function T(e){try{var t=a[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}var M,P,I,R,L=a.performance&&a.performance.now?a.performance.now.bind(a.performance):Date.now.bind(Date),D=a.requestAnimationFrame||a.mozRequestAnimationFrame||a.webkitRequestAnimationFrame||a.msRequestAnimationFrame,N=a.cancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelAnimationFrame||a.msCancelAnimationFrame,F={now:L,frame:function(e){var t=D(e);return{cancel:function(){return N(t)}}},getImageData:function(e,t){void 0===t&&(t=0);var n=a.document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return n.width=e.width,n.height=e.height,r.drawImage(e,0,0,e.width,e.height),r.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return M||(M=a.document.createElement("a")),M.href=e,M.href},hardwareConcurrency:a.navigator&&a.navigator.hardwareConcurrency||4,get devicePixelRatio(){return a.devicePixelRatio},get prefersReducedMotion(){return!!a.matchMedia&&(null==P&&(P=a.matchMedia("(prefers-reduced-motion: reduce)")),P.matches)}},z={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},B={supported:!1,testSupport:function(e){!U&&R&&(V?H(e):I=e)}},U=!1,V=!1;function H(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,R),e.isContextLost())return;B.supported=!0}catch(e){}e.deleteTexture(t),U=!0}a.document&&((R=a.document.createElement("img")).onload=function(){I&&H(I),I=null,V=!0},R.onerror=function(){U=!0,I=null},R.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var G="01",W=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function q(e){return 0===e.indexOf("mapbox:")}W.prototype._createSkuToken=function(){var e=function(){for(var e="",t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",G,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},W.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},W.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},W.prototype.normalizeStyleURL=function(e,t){if(!q(e))return e;var n=K(e);return n.path="/styles/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||t)},W.prototype.normalizeGlyphsURL=function(e,t){if(!q(e))return e;var n=K(e);return n.path="/fonts/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||t)},W.prototype.normalizeSourceURL=function(e,t){if(!q(e))return e;var n=K(e);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||t)},W.prototype.normalizeSpriteURL=function(e,t,n,r){var i=K(e);return q(e)?(i.path="/styles/v1"+i.path+"/sprite"+t+n,this._makeAPIURL(i,this._customAccessToken||r)):(i.path+=""+t+n,$(i))},W.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!q(e))return e;var n=K(e);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,(F.devicePixelRatio>=2||512===t?"@2x":"")+(B.supported?".webp":"$1")),n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/v4"+n.path;var r=this._customAccessToken||function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t].match(/^access_token=(.*)$/);if(r)return r[1]}return null}(n.params)||z.ACCESS_TOKEN;return z.REQUIRE_ACCESS_TOKEN&&r&&this._skuToken&&n.params.push("sku="+this._skuToken),this._makeAPIURL(n,r)},W.prototype.canonicalizeTileURL=function(e,t){var n=K(e);if(!n.path.match(/(^\/v4\/)/)||!n.path.match(/\.[\w]+$/))return e;var r="mapbox://tiles/";r+=n.path.replace("/v4/","");var i=n.params;return t&&(i=i.filter((function(e){return!e.match(/^access_token=/)}))),i.length&&(r+="?"+i.join("&")),r},W.prototype.canonicalizeTileset=function(e,t){for(var n=!!t&&q(t),r=[],i=0,o=e.tiles||[];i<o.length;i+=1){var a=o[i];Y(a)?r.push(this.canonicalizeTileURL(a,n)):r.push(a)}return r},W.prototype._makeAPIURL=function(e,t){var n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",r=K(z.API_URL);if(e.protocol=r.protocol,e.authority=r.authority,"http"===e.protocol){var i=e.params.indexOf("secure");i>=0&&e.params.splice(i,1)}if("/"!==r.path&&(e.path=""+r.path+e.path),!z.REQUIRE_ACCESS_TOKEN)return $(e);if(!(t=t||z.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+n);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+n);return e.params=e.params.filter((function(e){return-1===e.indexOf("access_token")})),e.params.push("access_token="+t),$(e)};var Z=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Y(e){return Z.test(e)}var X=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function K(e){var t=e.match(X);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function $(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function Q(e){if(!e)return null;var t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(a.atob(t[1]).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(e){return null}}var J=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};J.prototype.getStorageKey=function(e){var t,n=Q(z.ACCESS_TOKEN);return t=n&&n.u?a.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x"+t))}))):z.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+t:"mapbox.eventData:"+t},J.prototype.fetchEventData=function(){var e=T("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{var r=a.localStorage.getItem(t);r&&(this.eventData=JSON.parse(r));var i=a.localStorage.getItem(n);i&&(this.anonId=i)}catch(e){O("Unable to read from LocalStorage")}},J.prototype.saveEventData=function(){var e=T("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{a.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&a.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){O("Unable to write to LocalStorage")}},J.prototype.processRequests=function(e){},J.prototype.postEvent=function(e,t,n,r){var i=this;if(z.EVENTS_URL){var o=K(z.EVENTS_URL);o.params.push("access_token="+(r||z.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:G,userId:this.anonId},s=t?p(a,t):a,u={url:$(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=xe(u,(function(e){i.pendingRequest=null,n(e),i.saveEventData(),i.processRequests(r)}))}},J.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var ee,te,ne=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(e,t,n,r){this.skuToken=n;var i=!(!r&&!z.ACCESS_TOKEN),o=Array.isArray(e)&&e.some((function(e){return q(e)||Y(e)}));z.EVENTS_URL&&i&&o&&this.queueRequest({id:t,timestamp:Date.now()},r)},t.prototype.processRequests=function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),r=n.id,i=n.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),m(this.anonId)||(this.anonId=v()),this.postEvent(i,{skuToken:this.skuToken},(function(e){e||r&&(t.success[r]=!0)}),e))}},t}(J),re=new(function(e){function t(t){e.call(this,"appUserTurnstile"),this._customAccessToken=t}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(e,t){z.EVENTS_URL&&z.ACCESS_TOKEN&&Array.isArray(e)&&e.some((function(e){return q(e)||Y(e)}))&&this.queueRequest(Date.now(),t)},t.prototype.processRequests=function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var n=Q(z.ACCESS_TOKEN),r=n?n.u:z.ACCESS_TOKEN,i=r!==this.eventData.tokenU;m(this.anonId)||(this.anonId=v(),i=!0);var o=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),s=new Date(o),u=(o-this.eventData.lastSuccess)/864e5;i=i||u>=1||u<-1||a.getDate()!==s.getDate()}else i=!0;if(!i)return this.processRequests();this.postEvent(o,{"enabled.telemetry":!1},(function(e){e||(t.eventData.lastSuccess=o,t.eventData.tokenU=r)}),e)}},t}(J)),ie=re.postTurnstileEvent.bind(re),oe=new ne,ae=oe.postMapLoadEvent.bind(oe),se=500,ue=50;function ce(){a.caches&&!ee&&(ee=a.caches.open("mapbox-tiles"))}function le(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var fe,pe=1/0;function he(){return null==fe&&(fe=a.OffscreenCanvas&&new a.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof a.createImageBitmap),fe}var de={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(de);var ve,me,ge=function(e){function t(t,n,r){401===n&&Y(r)&&(t+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,t),this.status=n,this.url=r,this.name=this.constructor.name,this.message=t}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),ye=j()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===a.location.protocol?a.parent:a).location.href},be=function(e,t){if(!(/^file:/.test(n=e.url)||/^file:/.test(ye())&&!/^\w+:/.test(n))){if(a.fetch&&a.Request&&a.AbortController&&a.Request.prototype.hasOwnProperty("signal"))return function(e,t){var n,r=new a.AbortController,i=new a.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:ye(),signal:r.signal}),o=!1,s=!1,u=(n=i.url).indexOf("sku=")>0&&Y(n);"json"===e.type&&i.headers.set("Accept","application/json");var c=function(n,r,o){if(!s){if(n&&"SecurityError"!==n.message&&O(n),r&&o)return l(r);var c=Date.now();a.fetch(i).then((function(n){if(n.ok){var r=u?n.clone():null;return l(n,r,c)}return t(new ge(n.statusText,n.status,e.url))}))["catch"]((function(e){20!==e.code&&t(new Error(e.message))}))}},l=function(n,r,u){("arrayBuffer"===e.type?n.arrayBuffer():"json"===e.type?n.json():n.text()).then((function(e){s||(r&&u&&function(e,t,n){if(ce(),ee){var r={status:t.status,statusText:t.statusText,headers:new a.Headers};t.headers.forEach((function(e,t){return r.headers.set(t,e)}));var i=A(t.headers.get("Cache-Control")||"");i["no-store"]||(i["max-age"]&&r.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-n<42e4||function(e,t){if(void 0===te)try{new Response(new ReadableStream),te=!0}catch(e){te=!1}te?t(e.body):e.blob().then(t)}(t,(function(t){var n=new a.Response(t,r);ce(),ee&&ee.then((function(t){return t.put(le(e.url),n)}))["catch"]((function(e){return O(e.message)}))})))}}(i,r,u),o=!0,t(null,e,n.headers.get("Cache-Control"),n.headers.get("Expires")))}))["catch"]((function(e){s||t(new Error(e.message))}))};return u?function(e,t){if(ce(),!ee)return t(null);var n=le(e.url);ee.then((function(e){e.match(n).then((function(r){var i=function(e){if(!e)return!1;var t=new Date(e.headers.get("Expires")||0),n=A(e.headers.get("Cache-Control")||"");return t>Date.now()&&!n["no-cache"]}(r);e["delete"](n),i&&e.put(n,r.clone()),t(null,r,i)}))["catch"](t)}))["catch"](t)}(i,c):c(null,null),{cancel:function(){s=!0,o||r.abort()}}}(e,t);if(j()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var n;return function(e,t){var n=new a.XMLHttpRequest;for(var r in n.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(n.responseType="arraybuffer"),e.headers)n.setRequestHeader(r,e.headers[r]);return"json"===e.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===e.credentials,n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var r=n.response;if("json"===e.type)try{r=JSON.parse(n.response)}catch(e){return t(e)}t(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else t(new ge(n.statusText,n.status,e.url))},n.send(e.body),{cancel:function(){return n.abort()}}}(e,t)},_e=function(e,t){return be(p(e,{type:"arrayBuffer"}),t)},xe=function(e,t){return be(p(e,{method:"POST"}),t)},we="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";ve=[],me=0;var Oe=function e(t,n){if(B.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),me>=z.MAX_PARALLEL_IMAGE_REQUESTS){var r={requestParameters:t,callback:n,cancelled:!1,cancel:function(){this.cancelled=!0}};return ve.push(r),r}me++;var i=!1,o=function(){if(!i)for(i=!0,me--;ve.length&&me<z.MAX_PARALLEL_IMAGE_REQUESTS;){var t=ve.shift();t.cancelled||(t.cancel=e(t.requestParameters,t.callback).cancel)}},s=_e(t,(function(e,t,r,i){o(),e?n(e):t&&(he()?function(e,t){var n=new a.Blob([new Uint8Array(e)],{type:"image/png"});a.createImageBitmap(n).then((function(e){t(null,e)}))["catch"]((function(e){t(new Error("Could not load image because of "+e.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))}(t,n):function(e,t,n,r){var i=new a.Image,o=a.URL;i.onload=function(){t(null,i),o.revokeObjectURL(i.src),i.onload=null,a.requestAnimationFrame((function(){i.src=we}))},i.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var s=new a.Blob([new Uint8Array(e)],{type:"image/png"});i.cacheControl=n,i.expires=r,i.src=e.byteLength?o.createObjectURL(s):we}(t,n,r,i))}));return{cancel:function(){s.cancel(),o()}}};function Ee(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function Se(e,t,n){if(n&&n[e]){var r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}var je=function(e,t){void 0===t&&(t={}),p(this,t),this.type=e},Ae=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,"error",p({error:t},n))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(je),ke=function(){};ke.prototype.on=function(e,t){return this._listeners=this._listeners||{},Ee(e,t,this._listeners),this},ke.prototype.off=function(e,t){return Se(e,t,this._listeners),Se(e,t,this._oneTimeListeners),this},ke.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},Ee(e,t,this._oneTimeListeners),this},ke.prototype.fire=function(e,t){"string"==typeof e&&(e=new je(e,t||{}));var n=e.type;if(this.listens(n)){e.target=this;for(var r=0,i=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];r<i.length;r+=1)i[r].call(this,e);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];o<a.length;o+=1){var s=a[o];Se(n,s,this._oneTimeListeners),s.call(this,e)}var u=this._eventedParent;u&&(p(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),u.fire(e))}else e instanceof Ae&&console.error(e.error);return this},ke.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},ke.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var Ce={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Te=function(e,t,n,r){this.message=(e?e+": ":"")+n,r&&(this.identifier=r),null!=t&&t.__line__&&(this.line=t.__line__)};function Me(e){var t=e.value;return t?[new Te(e.key,t,"constants have been deprecated as of v8")]:[]}function Pe(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=0,i=t;r<i.length;r+=1){var o=i[r];for(var a in o)e[a]=o[a]}return e}function Ie(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Re(e){if(Array.isArray(e))return e.map(Re);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var n in e)t[n]=Re(e[n]);return t}return Ie(e)}var Le=function(e){function t(t,n){e.call(this,n),this.message=n,this.key=t}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),De=function(e,t){void 0===t&&(t=[]),this.parent=e,this.bindings={};for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.bindings[i[0]]=i[1]}};De.prototype.concat=function(e){return new De(this,e)},De.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},De.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var Ne={kind:"null"},Fe={kind:"number"},ze={kind:"string"},Be={kind:"boolean"},Ue={kind:"color"},Ve={kind:"object"},He={kind:"value"},Ge={kind:"collator"},We={kind:"formatted"},qe={kind:"resolvedImage"};function Ze(e,t){return{kind:"array",itemType:e,N:t}}function Ye(e){if("array"===e.kind){var t=Ye(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}return e.kind}var Xe=[Ne,Fe,ze,Be,Ue,We,Ve,Ze(He),qe];function Ke(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Ke(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var n=0,r=Xe;n<r.length;n+=1)if(!Ke(r[n],t))return null}return"Expected "+Ye(e)+" but found "+Ye(t)+" instead."}function $e(e,t){return t.some((function(t){return t.kind===e.kind}))}function Qe(e,t){return t.some((function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e}))}var Je=t((function(e,t){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(e){return(e=Math.round(e))<0?0:e>255?255:e}function i(e){return r("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function o(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function a(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{t.parseCSSColor=function(e){var t,s=e.replace(/ /g,"").toLowerCase();if(s in n)return n[s].slice();if("#"===s[0])return 4===s.length?(t=parseInt(s.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===s.length&&(t=parseInt(s.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var u=s.indexOf("("),c=s.indexOf(")");if(-1!==u&&c+1===s.length){var l=s.substr(0,u),f=s.substr(u+1,c-(u+1)).split(","),p=1;switch(l){case"rgba":if(4!==f.length)return null;p=o(f.pop());case"rgb":return 3!==f.length?null:[i(f[0]),i(f[1]),i(f[2]),p];case"hsla":if(4!==f.length)return null;p=o(f.pop());case"hsl":if(3!==f.length)return null;var h=(parseFloat(f[0])%360+360)%360/360,d=o(f[1]),v=o(f[2]),m=v<=.5?v*(d+1):v+d-v*d,g=2*v-m;return[r(255*a(g,m,h+1/3)),r(255*a(g,m,h)),r(255*a(g,m,h-1/3)),p];default:return null}}return null}}catch(e){}})).parseCSSColor,et=function(e,t,n,r){void 0===r&&(r=1),this.r=e,this.g=t,this.b=n,this.a=r};et.parse=function(e){if(e){if(e instanceof et)return e;if("string"==typeof e){var t=Je(e);if(t)return new et(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},et.prototype.toString=function(){var e=this.toArray(),t=e[1],n=e[2],r=e[3];return"rgba("+Math.round(e[0])+","+Math.round(t)+","+Math.round(n)+","+r+")"},et.prototype.toArray=function(){var e=this.a;return 0===e?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},et.black=new et(0,0,0,1),et.white=new et(1,1,1,1),et.transparent=new et(0,0,0,0),et.red=new et(1,0,0,1);var tt=function(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};tt.prototype.compare=function(e,t){return this.collator.compare(e,t)},tt.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var nt=function(e,t,n,r,i){this.text=e,this.image=t,this.scale=n,this.fontStack=r,this.textColor=i},rt=function(e){this.sections=e};rt.fromString=function(e){return new rt([new nt(e,null,null,null,null)])},rt.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length}))},rt.factory=function(e){return e instanceof rt?e:rt.fromString(e)},rt.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(e){return e.text})).join("")},rt.prototype.serialize=function(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var r=n[t];if(r.image)e.push(["image",r.image.name]);else{e.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),r.textColor&&(i["text-color"]=["rgba"].concat(r.textColor.toArray())),e.push(i)}}return e};var it=function(e){this.name=e.name,this.available=e.available};function ot(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[e,t,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function at(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof et)return!0;if(e instanceof tt)return!0;if(e instanceof rt)return!0;if(e instanceof it)return!0;if(Array.isArray(e)){for(var t=0,n=e;t<n.length;t+=1)if(!at(n[t]))return!1;return!0}if("object"==typeof e){for(var r in e)if(!at(e[r]))return!1;return!0}return!1}function st(e){if(null===e)return Ne;if("string"==typeof e)return ze;if("boolean"==typeof e)return Be;if("number"==typeof e)return Fe;if(e instanceof et)return Ue;if(e instanceof tt)return Ge;if(e instanceof rt)return We;if(e instanceof it)return qe;if(Array.isArray(e)){for(var t,n=e.length,r=0,i=e;r<i.length;r+=1){var o=st(i[r]);if(t){if(t===o)continue;t=He;break}t=o}return Ze(t||He,n)}return Ve}function ut(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof et||e instanceof rt||e instanceof it?e.toString():JSON.stringify(e)}it.prototype.toString=function(){return this.name},it.fromString=function(e){return e?new it({name:e,available:!1}):null},it.prototype.serialize=function(){return["image",this.name]};var ct=function(e,t){this.type=e,this.value=t};ct.parse=function(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!at(e[1]))return t.error("invalid value");var n=e[1],r=st(n),i=t.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new ct(r,n)},ct.prototype.evaluate=function(){return this.value},ct.prototype.eachChild=function(){},ct.prototype.outputDefined=function(){return!0},ct.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof et?["rgba"].concat(this.value.toArray()):this.value instanceof rt?this.value.serialize():this.value};var lt=function(e){this.name="ExpressionEvaluationError",this.message=e};lt.prototype.toJSON=function(){return this.message};var ft={string:ze,number:Fe,boolean:Be,object:Ve},pt=function(e,t){this.type=e,this.args=t};pt.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n,r=1,i=e[0];if("array"===i){var o,a;if(e.length>2){var s=e[1];if("string"!=typeof s||!(s in ft)||"object"===s)return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=ft[s],r++}else o=He;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);a=e[2],r++}n=Ze(o,a)}else n=ft[i];for(var u=[];r<e.length;r++){var c=t.parse(e[r],r,He);if(!c)return null;u.push(c)}return new pt(n,u)},pt.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var n=this.args[t].evaluate(e);if(!Ke(this.type,st(n)))return n;if(t===this.args.length-1)throw new lt("Expected value to be of type "+Ye(this.type)+", but found "+Ye(st(n))+" instead.")}return null},pt.prototype.eachChild=function(e){this.args.forEach(e)},pt.prototype.outputDefined=function(){return this.args.every((function(e){return e.outputDefined()}))},pt.prototype.serialize=function(){var e=this.type,t=[e.kind];if("array"===e.kind){var n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);var r=e.N;("number"==typeof r||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map((function(e){return e.serialize()})))};var ht=function(e){this.type=We,this.sections=e};ht.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n=e[1];if(!Array.isArray(n)&&"object"==typeof n)return t.error("First argument must be an image or text section.");for(var r=[],i=!1,o=1;o<=e.length-1;++o){var a=e[o];if(i&&"object"==typeof a&&!Array.isArray(a)){i=!1;var s=null;if(a["font-scale"]&&!(s=t.parse(a["font-scale"],1,Fe)))return null;var u=null;if(a["text-font"]&&!(u=t.parse(a["text-font"],1,Ze(ze))))return null;var c=null;if(a["text-color"]&&!(c=t.parse(a["text-color"],1,Ue)))return null;var l=r[r.length-1];l.scale=s,l.font=u,l.textColor=c}else{var f=t.parse(e[o],1,He);if(!f)return null;var p=f.type.kind;if("string"!==p&&"value"!==p&&"null"!==p&&"resolvedImage"!==p)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:f,scale:null,font:null,textColor:null})}}return new ht(r)},ht.prototype.evaluate=function(e){return new rt(this.sections.map((function(t){var n=t.content.evaluate(e);return st(n)===qe?new nt("",n,null,null,null):new nt(ut(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))},ht.prototype.eachChild=function(e){for(var t=0,n=this.sections;t<n.length;t+=1){var r=n[t];e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor)}},ht.prototype.outputDefined=function(){return!1},ht.prototype.serialize=function(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var r=n[t];e.push(r.content.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),r.textColor&&(i["text-color"]=r.textColor.serialize()),e.push(i)}return e};var dt=function(e){this.type=qe,this.input=e};dt.parse=function(e,t){if(2!==e.length)return t.error("Expected two arguments.");var n=t.parse(e[1],1,ze);return n?new dt(n):t.error("No image name provided.")},dt.prototype.evaluate=function(e){var t=this.input.evaluate(e),n=it.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n},dt.prototype.eachChild=function(e){e(this.input)},dt.prototype.outputDefined=function(){return!1},dt.prototype.serialize=function(){return["image",this.input.serialize()]};var vt={"to-boolean":Be,"to-color":Ue,"to-number":Fe,"to-string":ze},mt=function(e,t){this.type=e,this.args=t};mt.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n=e[0];if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");for(var r=vt[n],i=[],o=1;o<e.length;o++){var a=t.parse(e[o],o,He);if(!a)return null;i.push(a)}return new mt(r,i)},mt.prototype.evaluate=function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){for(var t,n,r=0,i=this.args;r<i.length;r+=1){if(n=null,(t=i[r].evaluate(e))instanceof et)return t;if("string"==typeof t){var o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&!(n=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":ot(t[0],t[1],t[2],t[3])))return new et(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new lt(n||"Could not parse color from value '"+("string"==typeof t?t:String(JSON.stringify(t)))+"'")}if("number"===this.type.kind){for(var a=null,s=0,u=this.args;s<u.length;s+=1){if(null===(a=u[s].evaluate(e)))return 0;var c=Number(a);if(!isNaN(c))return c}throw new lt("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?rt.fromString(ut(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?it.fromString(ut(this.args[0].evaluate(e))):ut(this.args[0].evaluate(e))},mt.prototype.eachChild=function(e){this.args.forEach(e)},mt.prototype.outputDefined=function(){return this.args.every((function(e){return e.outputDefined()}))},mt.prototype.serialize=function(){if("formatted"===this.type.kind)return new ht([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new dt(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild((function(t){e.push(t.serialize())})),e};var gt=["Unknown","Point","LineString","Polygon"],yt=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};yt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},yt.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?gt[this.feature.type]:this.feature.type:null},yt.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},yt.prototype.canonicalID=function(){return this.canonical},yt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},yt.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=et.parse(e)),t};var bt=function(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r};bt.prototype.evaluate=function(e){return this._evaluate(e,this.args)},bt.prototype.eachChild=function(e){this.args.forEach(e)},bt.prototype.outputDefined=function(){return!1},bt.prototype.serialize=function(){return[this.name].concat(this.args.map((function(e){return e.serialize()})))},bt.parse=function(e,t){var n,r=e[0],i=bt.definitions[r];if(!i)return t.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=a.filter((function(t){var n=t[0];return!Array.isArray(n)||n.length===e.length-1})),u=null,c=0,l=s;c<l.length;c+=1){var f=l[c],p=f[0],h=f[1];u=new Ut(t.registry,t.path,null,t.scope);for(var d=[],v=!1,m=1;m<e.length;m++){var g=e[m],y=Array.isArray(p)?p[m-1]:p.type,b=u.parse(g,1+d.length,y);if(!b){v=!0;break}d.push(b)}if(!v)if(Array.isArray(p)&&p.length!==d.length)u.error("Expected "+p.length+" arguments, but found "+d.length+" instead.");else{for(var _=0;_<d.length;_++){var x=Array.isArray(p)?p[_]:p.type,w=d[_];u.concat(_+1).checkSubtype(x,w.type)}if(0===u.errors.length)return new bt(r,o,h,d)}}if(1===s.length)(n=t.errors).push.apply(n,u.errors);else{for(var O=(s.length?s:a).map((function(e){var t;return t=e[0],Array.isArray(t)?"("+t.map(Ye).join(", ")+")":"("+Ye(t.type)+"...)"})).join(" | "),E=[],S=1;S<e.length;S++){var j=t.parse(e[S],1+E.length);if(!j)return null;E.push(Ye(j.type))}t.error("Expected arguments of type "+O+", but found ("+E.join(", ")+") instead.")}return null},bt.register=function(e,t){for(var n in bt.definitions=t,t)e[n]=bt};var _t=function(e,t,n){this.type=Ge,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t};function xt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function wt(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function Ot(e,t){var n=(180+e[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,i=Math.pow(2,t.z);return[Math.round(n*i*8192),Math.round(r*i*8192)]}function Et(e,t,n){return t[1]>e[1]!=n[1]>e[1]&&e[0]<(n[0]-t[0])*(e[1]-t[1])/(n[1]-t[1])+t[0]}function St(e,t){for(var n,r,i,o,a,s,u,c=!1,l=0,f=t.length;l<f;l++)for(var p=t[l],h=0,d=p.length;h<d-1;h++){if((o=(n=e)[0]-(r=p[h])[0])*(u=n[1]-(i=p[h+1])[1])-(s=n[0]-i[0])*(a=n[1]-r[1])==0&&o*s<=0&&a*u<=0)return!1;Et(e,p[h],p[h+1])&&(c=!c)}return c}function jt(e,t){for(var n=0;n<t.length;n++)if(St(e,t[n]))return!0;return!1}function At(e,t,n,r){var i=r[0]-n[0],o=r[1]-n[1],a=(e[0]-n[0])*o-i*(e[1]-n[1]),s=(t[0]-n[0])*o-i*(t[1]-n[1]);return a>0&&s<0||a<0&&s>0}function kt(e,t,n){for(var r=0,i=n;r<i.length;r+=1)for(var o=i[r],a=0;a<o.length-1;++a)if(0!=(f=[(l=o[a+1])[0]-(c=o[a])[0],l[1]-c[1]])[0]*(p=[(u=t)[0]-(s=e)[0],u[1]-s[1]])[1]-f[1]*p[0]&&At(s,u,c,l)&&At(c,l,s,u))return!0;var s,u,c,l,f,p;return!1}function Ct(e,t){for(var n=0;n<e.length;++n)if(!St(e[n],t))return!1;for(var r=0;r<e.length-1;++r)if(kt(e[r],e[r+1],t))return!1;return!0}function Tt(e,t){for(var n=0;n<t.length;n++)if(Ct(e,t[n]))return!0;return!1}function Mt(e,t,n){for(var r=[],i=0;i<e.length;i++){for(var o=[],a=0;a<e[i].length;a++){var s=Ot(e[i][a],n);xt(t,s),o.push(s)}r.push(o)}return r}function Pt(e,t,n){for(var r=[],i=0;i<e.length;i++){var o=Mt(e[i],t,n);r.push(o)}return r}function It(e,t,n,r){if(e[0]<n[0]||e[0]>n[2]){var i=.5*r,o=e[0]-n[0]>i?-r:n[0]-e[0]>i?r:0;0===o&&(o=e[0]-n[2]>i?-r:n[2]-e[0]>i?r:0),e[0]+=o}xt(t,e)}function Rt(e,t,n,r){for(var i=8192*Math.pow(2,r.z),o=[8192*r.x,8192*r.y],a=[],s=0,u=e;s<u.length;s+=1)for(var c=0,l=u[s];c<l.length;c+=1){var f=l[c],p=[f.x+o[0],f.y+o[1]];It(p,t,n,i),a.push(p)}return a}function Lt(e,t,n,r){for(var i,o=8192*Math.pow(2,r.z),a=[8192*r.x,8192*r.y],s=[],u=0,c=e;u<c.length;u+=1){for(var l=[],f=0,p=c[u];f<p.length;f+=1){var h=p[f],d=[h.x+a[0],h.y+a[1]];xt(t,d),l.push(d)}s.push(l)}if(t[2]-t[0]<=o/2){(i=t)[0]=i[1]=1/0,i[2]=i[3]=-1/0;for(var v=0,m=s;v<m.length;v+=1)for(var g=0,y=m[v];g<y.length;g+=1)It(y[g],t,n,o)}return s}_t.parse=function(e,t){if(2!==e.length)return t.error("Expected one argument.");var n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");var r=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Be);if(!r)return null;var i=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Be);if(!i)return null;var o=null;return n.locale&&!(o=t.parse(n.locale,1,ze))?null:new _t(r,i,o)},_t.prototype.evaluate=function(e){return new tt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},_t.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},_t.prototype.outputDefined=function(){return!1},_t.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var Dt=function(e,t){this.type=Be,this.geojson=e,this.geometries=t};function Nt(e){if(e instanceof bt){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Dt)return!1;var t=!0;return e.eachChild((function(e){t&&!Nt(e)&&(t=!1)})),t}function Ft(e){if(e instanceof bt&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild((function(e){t&&!Ft(e)&&(t=!1)})),t}function zt(e,t){if(e instanceof bt&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild((function(e){n&&!zt(e,t)&&(n=!1)})),n}Dt.parse=function(e,t){if(2!==e.length)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(at(e[1])){var n=e[1];if("FeatureCollection"===n.type)for(var r=0;r<n.features.length;++r){var i=n.features[r].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new Dt(n,n.features[r].geometry)}else if("Feature"===n.type){var o=n.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new Dt(n,n.geometry)}else if("Polygon"===n.type||"MultiPolygon"===n.type)return new Dt(n,n)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Dt.prototype.evaluate=function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){var o=Mt(t.coordinates,r,i),a=Rt(e.geometry(),n,r,i);if(!wt(n,r))return!1;for(var s=0,u=a;s<u.length;s+=1)if(!St(u[s],o))return!1}if("MultiPolygon"===t.type){var c=Pt(t.coordinates,r,i),l=Rt(e.geometry(),n,r,i);if(!wt(n,r))return!1;for(var f=0,p=l;f<p.length;f+=1)if(!jt(p[f],c))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){var o=Mt(t.coordinates,r,i),a=Lt(e.geometry(),n,r,i);if(!wt(n,r))return!1;for(var s=0,u=a;s<u.length;s+=1)if(!Ct(u[s],o))return!1}if("MultiPolygon"===t.type){var c=Pt(t.coordinates,r,i),l=Lt(e.geometry(),n,r,i);if(!wt(n,r))return!1;for(var f=0,p=l;f<p.length;f+=1)if(!Tt(p[f],c))return!1}return!0}(e,this.geometries)}return!1},Dt.prototype.eachChild=function(){},Dt.prototype.outputDefined=function(){return!0},Dt.prototype.serialize=function(){return["within",this.geojson]};var Bt=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};Bt.parse=function(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");var n=e[1];return t.scope.has(n)?new Bt(n,t.scope.get(n)):t.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},Bt.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},Bt.prototype.eachChild=function(){},Bt.prototype.outputDefined=function(){return!1},Bt.prototype.serialize=function(){return["var",this.name]};var Ut=function(e,t,n,r,i){void 0===t&&(t=[]),void 0===r&&(r=new De),void 0===i&&(i=[]),this.registry=e,this.path=t,this.key=t.map((function(e){return"["+e+"]"})).join(""),this.scope=r,this.errors=i,this.expectedType=n};function Vt(e,t){for(var n,r=e.length-1,i=0,o=r,a=0;i<=o;)if((n=e[a=Math.floor((i+o)/2)])<=t){if(a===r||t<e[a+1])return a;i=a+1}else{if(!(n>t))throw new lt("Input is not a number.");o=a-1}return 0}Ut.prototype.parse=function(e,t,n,r,i){return void 0===i&&(i={}),t?this.concat(t,n,r)._parse(e,i):this._parse(e,i)},Ut.prototype._parse=function(e,t){function n(e,t,n){return"assert"===n?new pt(t,[e]):"coerce"===n?new mt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=e[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[r];if(i){var o=i.parse(e,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=n(o,a,t.typeAnnotation||"coerce");else o=n(o,a,t.typeAnnotation||"assert")}if(!(o instanceof ct)&&"resolvedImage"!==o.type.kind&&function e(t){if(t instanceof Bt)return e(t.boundExpression);if(t instanceof bt&&"error"===t.name)return!1;if(t instanceof _t)return!1;if(t instanceof Dt)return!1;var n=t instanceof mt||t instanceof pt,r=!0;return t.eachChild((function(t){r=n?r&&e(t):r&&t instanceof ct})),!!r&&Nt(t)&&zt(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var u=new yt;try{o=new ct(o.type,o.evaluate(u))}catch(e){return this.error(e.message),null}}return o}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},Ut.prototype.concat=function(e,t,n){var r="number"==typeof e?this.path.concat(e):this.path,i=n?this.scope.concat(n):this.scope;return new Ut(this.registry,r,t||null,i,this.errors)},Ut.prototype.error=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r=""+this.key+t.map((function(e){return"["+e+"]"})).join("");this.errors.push(new Le(r,e))},Ut.prototype.checkSubtype=function(e,t){var n=Ke(e,t);return n&&this.error(n),n};var Ht=function(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var r=0,i=n;r<i.length;r+=1){var o=i[r],a=o[1];this.labels.push(o[0]),this.outputs.push(a)}};function Gt(e,t,n){return e*(1-n)+t*n}Ht.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var n=t.parse(e[1],1,Fe);if(!n)return null;var r=[],i=null;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);for(var o=1;o<e.length;o+=2){var a=1===o?-1/0:e[o],s=e[o+1],u=o,c=o+1;if("number"!=typeof a)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(r.length&&r[r.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var l=t.parse(s,c,i);if(!l)return null;i=i||l.type,r.push([a,l])}return new Ht(i,n,r)},Ht.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[Vt(t,r)].evaluate(e)},Ht.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},Ht.prototype.outputDefined=function(){return this.outputs.every((function(e){return e.outputDefined()}))},Ht.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var Wt=Object.freeze({__proto__:null,number:Gt,color:function(e,t,n){return new et(Gt(e.r,t.r,n),Gt(e.g,t.g,n),Gt(e.b,t.b,n),Gt(e.a,t.a,n))},array:function(e,t,n){return e.map((function(e,r){return Gt(e,t[r],n)}))}}),qt=6/29*3*(6/29),Zt=Math.PI/180,Yt=180/Math.PI;function Xt(e){return e>.008856451679035631?Math.pow(e,1/3):e/qt+4/29}function Kt(e){return e>6/29?e*e*e:qt*(e-4/29)}function $t(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Qt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Jt(e){var t=Qt(e.r),n=Qt(e.g),r=Qt(e.b),i=Xt((.4124564*t+.3575761*n+.1804375*r)/.95047),o=Xt((.2126729*t+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-Xt((.0193339*t+.119192*n+.9503041*r)/1.08883)),alpha:e.a}}function en(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=1*Kt(t),n=.95047*Kt(n),r=1.08883*Kt(r),new et($t(3.2404542*n-1.5371385*t-.4985314*r),$t(-.969266*n+1.8760108*t+.041556*r),$t(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}function tn(e,t,n){var r=t-e;return e+n*(r>180||r<-180?r-360*Math.round(r/360):r)}var nn={forward:Jt,reverse:en,interpolate:function(e,t,n){return{l:Gt(e.l,t.l,n),a:Gt(e.a,t.a,n),b:Gt(e.b,t.b,n),alpha:Gt(e.alpha,t.alpha,n)}}},rn={forward:function(e){var t=Jt(e),n=t.l,r=t.a,i=t.b,o=Math.atan2(i,r)*Yt;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:e.a}},reverse:function(e){var t=e.h*Zt,n=e.c;return en({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:tn(e.h,t.h,n),c:Gt(e.c,t.c,n),l:Gt(e.l,t.l,n),alpha:Gt(e.alpha,t.alpha,n)}}},on=Object.freeze({__proto__:null,lab:nn,hcl:rn}),an=function(e,t,n,r,i){this.type=e,this.operator=t,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(var o=0,a=i;o<a.length;o+=1){var s=a[o],u=s[1];this.labels.push(s[0]),this.outputs.push(u)}};function sn(e,t,n,r){var i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}an.interpolationFactor=function(e,t,r,i){var o=0;if("exponential"===e.name)o=sn(t,e.base,r,i);else if("linear"===e.name)o=sn(t,1,r,i);else if("cubic-bezier"===e.name){var a=e.controlPoints;o=new n(a[0],a[1],a[2],a[3]).solve(sn(t,1,r,i))}return o},an.parse=function(e,t){var n=e[0],r=e[1],i=e[2],o=e.slice(3);if(!Array.isArray(r)||0===r.length)return t.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var a=r[1];if("number"!=typeof a)return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:a}}else{if("cubic-bezier"!==r[0])return t.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some((function(e){return"number"!=typeof e||e<0||e>1})))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(i=t.parse(i,2,Fe)))return null;var u=[],c=null;"interpolate-hcl"===n||"interpolate-lab"===n?c=Ue:t.expectedType&&"value"!==t.expectedType.kind&&(c=t.expectedType);for(var l=0;l<o.length;l+=2){var f=o[l],p=o[l+1],h=l+3,d=l+4;if("number"!=typeof f)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(u.length&&u[u.length-1][0]>=f)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',h);var v=t.parse(p,d,c);if(!v)return null;c=c||v.type,u.push([f,v])}return"number"===c.kind||"color"===c.kind||"array"===c.kind&&"number"===c.itemType.kind&&"number"==typeof c.N?new an(c,n,r,i,u):t.error("Type "+Ye(c)+" is not interpolatable.")},an.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;if(r>=t[i-1])return n[i-1].evaluate(e);var o=Vt(t,r),a=an.interpolationFactor(this.interpolation,r,t[o],t[o+1]),s=n[o].evaluate(e),u=n[o+1].evaluate(e);return"interpolate"===this.operator?Wt[this.type.kind.toLowerCase()](s,u,a):"interpolate-hcl"===this.operator?rn.reverse(rn.interpolate(rn.forward(s),rn.forward(u),a)):nn.reverse(nn.interpolate(nn.forward(s),nn.forward(u),a))},an.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},an.prototype.outputDefined=function(){return this.outputs.every((function(e){return e.outputDefined()}))},an.prototype.serialize=function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t};var un=function(e,t){this.type=e,this.args=t};un.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var n=null,r=t.expectedType;r&&"value"!==r.kind&&(n=r);for(var i=[],o=0,a=e.slice(1);o<a.length;o+=1){var s=t.parse(a[o],1+i.length,n,void 0,{typeAnnotation:"omit"});if(!s)return null;n=n||s.type,i.push(s)}var u=r&&i.some((function(e){return Ke(r,e.type)}));return new un(u?He:n,i)},un.prototype.evaluate=function(e){for(var t,n=null,r=0,i=0,o=this.args;i<o.length&&(r++,(n=o[i].evaluate(e))&&n instanceof it&&!n.available&&(t||(t=n.name),n=null,r===this.args.length&&(n=t)),null===n);i+=1);return n},un.prototype.eachChild=function(e){this.args.forEach(e)},un.prototype.outputDefined=function(){return this.args.every((function(e){return e.outputDefined()}))},un.prototype.serialize=function(){var e=["coalesce"];return this.eachChild((function(t){e.push(t.serialize())})),e};var cn=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};cn.prototype.evaluate=function(e){return this.result.evaluate(e)},cn.prototype.eachChild=function(e){for(var t=0,n=this.bindings;t<n.length;t+=1)e(n[t][1]);e(this.result)},cn.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var n=[],r=1;r<e.length-1;r+=2){var i=e[r];if("string"!=typeof i)return t.error("Expected string, but found "+typeof i+" instead.",r);if(/[^a-zA-Z0-9_]/.test(i))return t.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=t.parse(e[r+1],r+1);if(!o)return null;n.push([i,o])}var a=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return a?new cn(n,a):null},cn.prototype.outputDefined=function(){return this.result.outputDefined()},cn.prototype.serialize=function(){for(var e=["let"],t=0,n=this.bindings;t<n.length;t+=1){var r=n[t];e.push(r[0],r[1].serialize())}return e.push(this.result.serialize()),e};var ln=function(e,t,n){this.type=e,this.index=t,this.input=n};ln.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,Fe),r=t.parse(e[2],2,Ze(t.expectedType||He));return n&&r?new ln(r.type.itemType,n,r):null},ln.prototype.evaluate=function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new lt("Array index out of bounds: "+t+" < 0.");if(t>=n.length)throw new lt("Array index out of bounds: "+t+" > "+(n.length-1)+".");if(t!==Math.floor(t))throw new lt("Array index must be an integer, but found "+t+" instead.");return n[t]},ln.prototype.eachChild=function(e){e(this.index),e(this.input)},ln.prototype.outputDefined=function(){return!1},ln.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var fn=function(e,t){this.type=Be,this.needle=e,this.haystack=t};fn.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,He),r=t.parse(e[2],2,He);return n&&r?$e(n.type,[Be,ze,Fe,Ne,He])?new fn(n,r):t.error("Expected first argument to be of type boolean, string, number or null, but found "+Ye(n.type)+" instead"):null},fn.prototype.evaluate=function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!n)return!1;if(!Qe(t,["boolean","string","number","null"]))throw new lt("Expected first argument to be of type boolean, string, number or null, but found "+Ye(st(t))+" instead.");if(!Qe(n,["string","array"]))throw new lt("Expected second argument to be of type array or string, but found "+Ye(st(n))+" instead.");return n.indexOf(t)>=0},fn.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},fn.prototype.outputDefined=function(){return!0},fn.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var pn=function(e,t,n){this.type=Fe,this.needle=e,this.haystack=t,this.fromIndex=n};pn.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,He),r=t.parse(e[2],2,He);if(!n||!r)return null;if(!$e(n.type,[Be,ze,Fe,Ne,He]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+Ye(n.type)+" instead");if(4===e.length){var i=t.parse(e[3],3,Fe);return i?new pn(n,r,i):null}return new pn(n,r)},pn.prototype.evaluate=function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!Qe(t,["boolean","string","number","null"]))throw new lt("Expected first argument to be of type boolean, string, number or null, but found "+Ye(st(t))+" instead.");if(!Qe(n,["string","array"]))throw new lt("Expected second argument to be of type array or string, but found "+Ye(st(n))+" instead.");if(this.fromIndex){var r=this.fromIndex.evaluate(e);return n.indexOf(t,r)}return n.indexOf(t)},pn.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},pn.prototype.outputDefined=function(){return!1},pn.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var hn=function(e,t,n,r,i,o){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o};hn.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(var i={},o=[],a=2;a<e.length-1;a+=2){var s=e[a],u=e[a+1];Array.isArray(s)||(s=[s]);var c=t.concat(a);if(0===s.length)return c.error("Expected at least one branch label.");for(var l=0,f=s;l<f.length;l+=1){var p=f[l];if("number"!=typeof p&&"string"!=typeof p)return c.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof p&&Math.floor(p)!==p)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,st(p)))return null}else n=st(p);if(void 0!==i[String(p)])return c.error("Branch labels must be unique.");i[String(p)]=o.length}var h=t.parse(u,a,r);if(!h)return null;r=r||h.type,o.push(h)}var d=t.parse(e[1],1,He);if(!d)return null;var v=t.parse(e[e.length-1],e.length-1,r);return v?"value"!==d.type.kind&&t.concat(1).checkSubtype(n,d.type)?null:new hn(n,r,d,i,o,v):null},hn.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(st(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},hn.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},hn.prototype.outputDefined=function(){return this.outputs.every((function(e){return e.outputDefined()}))&&this.otherwise.outputDefined()},hn.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],n=[],r={},i=0,o=Object.keys(this.cases).sort();i<o.length;i+=1){var a=o[i];void 0===(f=r[this.cases[a]])?(r[this.cases[a]]=n.length,n.push([this.cases[a],[a]])):n[f][1].push(a)}for(var s=function(t){return"number"===e.inputType.kind?Number(t):t},u=0,c=n;u<c.length;u+=1){var l=c[u],f=l[0],p=l[1];t.push(1===p.length?s(p[0]):p.map(s)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var dn=function(e,t,n){this.type=e,this.branches=t,this.otherwise=n};dn.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var r=[],i=1;i<e.length-1;i+=2){var o=t.parse(e[i],i,Be);if(!o)return null;var a=t.parse(e[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}var s=t.parse(e[e.length-1],e.length-1,n);return s?new dn(n,r,s):null},dn.prototype.evaluate=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var r=n[t],i=r[1];if(r[0].evaluate(e))return i.evaluate(e)}return this.otherwise.evaluate(e)},dn.prototype.eachChild=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var r=n[t],i=r[1];e(r[0]),e(i)}e(this.otherwise)},dn.prototype.outputDefined=function(){return this.branches.every((function(e){return e[1].outputDefined()}))&&this.otherwise.outputDefined()},dn.prototype.serialize=function(){var e=["case"];return this.eachChild((function(t){e.push(t.serialize())})),e};var vn=function(e,t,n,r){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=r};function mn(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function gn(e,t,n,r){return 0===r.compare(t,n)}function yn(e,t,n){var r="=="!==e&&"!="!==e;return function(){function i(e,t,n){this.type=Be,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return i.parse=function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var n=e[0],o=t.parse(e[1],1,He);if(!o)return null;if(!mn(n,o.type))return t.concat(1).error('"'+n+"\" comparisons are not supported for type '"+Ye(o.type)+"'.");var a=t.parse(e[2],2,He);if(!a)return null;if(!mn(n,a.type))return t.concat(2).error('"'+n+"\" comparisons are not supported for type '"+Ye(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot compare types '"+Ye(o.type)+"' and '"+Ye(a.type)+"'.");r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new pt(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new pt(o.type,[a])));var s=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,Ge)))return null}return new i(o,a,s)},i.prototype.evaluate=function(i){var o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var s=st(o),u=st(a);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new lt('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var c=st(o),l=st(a);if("string"!==c.kind||"string"!==l.kind)return t(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):t(i,o,a)},i.prototype.eachChild=function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)},i.prototype.outputDefined=function(){return!0},i.prototype.serialize=function(){var t=[e];return this.eachChild((function(e){t.push(e.serialize())})),t},i}()}vn.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,He),r=t.parse(e[2],2,Fe);if(!n||!r)return null;if(!$e(n.type,[Ze(He),ze,He]))return t.error("Expected first argument to be of type array or string, but found "+Ye(n.type)+" instead");if(4===e.length){var i=t.parse(e[3],3,Fe);return i?new vn(n.type,n,r,i):null}return new vn(n.type,n,r)},vn.prototype.evaluate=function(e){var t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!Qe(t,["string","array"]))throw new lt("Expected first argument to be of type array or string, but found "+Ye(st(t))+" instead.");if(this.endIndex){var r=this.endIndex.evaluate(e);return t.slice(n,r)}return t.slice(n)},vn.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},vn.prototype.outputDefined=function(){return!1},vn.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var bn=yn("==",(function(e,t,n){return t===n}),gn),_n=yn("!=",(function(e,t,n){return t!==n}),(function(e,t,n,r){return!gn(0,t,n,r)})),xn=yn("<",(function(e,t,n){return t<n}),(function(e,t,n,r){return r.compare(t,n)<0})),wn=yn(">",(function(e,t,n){return t>n}),(function(e,t,n,r){return r.compare(t,n)>0})),On=yn("<=",(function(e,t,n){return t<=n}),(function(e,t,n,r){return r.compare(t,n)<=0})),En=yn(">=",(function(e,t,n){return t>=n}),(function(e,t,n,r){return r.compare(t,n)>=0})),Sn=function(e,t,n,r,i){this.type=ze,this.number=e,this.locale=t,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i};Sn.parse=function(e,t){if(3!==e.length)return t.error("Expected two arguments.");var n=t.parse(e[1],1,Fe);if(!n)return null;var r=e[2];if("object"!=typeof r||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");var i=null;if(r.locale&&!(i=t.parse(r.locale,1,ze)))return null;var o=null;if(r.currency&&!(o=t.parse(r.currency,1,ze)))return null;var a=null;if(r["min-fraction-digits"]&&!(a=t.parse(r["min-fraction-digits"],1,Fe)))return null;var s=null;return r["max-fraction-digits"]&&!(s=t.parse(r["max-fraction-digits"],1,Fe))?null:new Sn(n,i,o,a,s)},Sn.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},Sn.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},Sn.prototype.outputDefined=function(){return!1},Sn.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var jn=function(e){this.type=Fe,this.input=e};jn.parse=function(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error("Expected argument of type string or array, but found "+Ye(n.type)+" instead."):new jn(n):null},jn.prototype.evaluate=function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new lt("Expected value to be of type string or array, but found "+Ye(st(t))+" instead.")},jn.prototype.eachChild=function(e){e(this.input)},jn.prototype.outputDefined=function(){return!1},jn.prototype.serialize=function(){var e=["length"];return this.eachChild((function(t){e.push(t.serialize())})),e};var An={"==":bn,"!=":_n,">":wn,"<":xn,">=":En,"<=":On,array:pt,at:ln,boolean:pt,case:dn,coalesce:un,collator:_t,format:ht,image:dt,in:fn,"index-of":pn,interpolate:an,"interpolate-hcl":an,"interpolate-lab":an,length:jn,let:cn,literal:ct,match:hn,number:pt,"number-format":Sn,object:pt,slice:vn,step:Ht,string:pt,"to-boolean":mt,"to-color":mt,"to-number":mt,"to-string":mt,var:Bt,within:Dt};function kn(e,t){var n=t[0],r=t[1],i=t[2],o=t[3];n=n.evaluate(e),r=r.evaluate(e),i=i.evaluate(e);var a=o?o.evaluate(e):1,s=ot(n,r,i,a);if(s)throw new lt(s);return new et(n/255*a,r/255*a,i/255*a,a)}function Cn(e,t){return e in t}function Tn(e,t){var n=t[e];return void 0===n?null:n}function Mn(e){return{type:e}}function Pn(e){return{result:"success",value:e}}function In(e){return{result:"error",value:e}}function Rn(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Ln(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Dn(e){return!!e.expression&&e.expression.interpolated}function Nn(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Fn(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function zn(e){return e}function Bn(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function Un(e,t,n,r,i){return Bn(typeof n===i?r[n]:void 0,e["default"],t["default"])}function Vn(e,t,n){if("number"!==Nn(n))return Bn(e["default"],t["default"]);var r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];var i=Vt(e.stops.map((function(e){return e[0]})),n);return e.stops[i][1]}function Hn(e,t,n){var r=void 0!==e.base?e.base:1;if("number"!==Nn(n))return Bn(e["default"],t["default"]);var i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];var o=Vt(e.stops.map((function(e){return e[0]})),n),a=function(e,t,n,r){var i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}(n,r,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],u=e.stops[o+1][1],c=Wt[t.type]||zn;if(e.colorSpace&&"rgb"!==e.colorSpace){var l=on[e.colorSpace];c=function(e,t){return l.reverse(l.interpolate(l.forward(e),l.forward(t),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=s.evaluate.apply(void 0,e),r=u.evaluate.apply(void 0,e);if(void 0!==n&&void 0!==r)return c(n,r,a)}}:c(s,u,a)}function Gn(e,t,n){return"color"===t.type?n=et.parse(n):"formatted"===t.type?n=rt.fromString(n.toString()):"resolvedImage"===t.type?n=it.fromString(n.toString()):Nn(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),Bn(n,e["default"],t["default"])}bt.register(An,{error:[{kind:"error"},[ze],function(e,t){throw new lt(t[0].evaluate(e))}],typeof:[ze,[He],function(e,t){return Ye(st(t[0].evaluate(e)))}],"to-rgba":[Ze(Fe,4),[Ue],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[Ue,[Fe,Fe,Fe],kn],rgba:[Ue,[Fe,Fe,Fe,Fe],kn],has:{type:Be,overloads:[[[ze],function(e,t){return Cn(t[0].evaluate(e),e.properties())}],[[ze,Ve],function(e,t){var n=t[1];return Cn(t[0].evaluate(e),n.evaluate(e))}]]},get:{type:He,overloads:[[[ze],function(e,t){return Tn(t[0].evaluate(e),e.properties())}],[[ze,Ve],function(e,t){var n=t[1];return Tn(t[0].evaluate(e),n.evaluate(e))}]]},"feature-state":[He,[ze],function(e,t){return Tn(t[0].evaluate(e),e.featureState||{})}],properties:[Ve,[],function(e){return e.properties()}],"geometry-type":[ze,[],function(e){return e.geometryType()}],id:[He,[],function(e){return e.id()}],zoom:[Fe,[],function(e){return e.globals.zoom}],"heatmap-density":[Fe,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Fe,[],function(e){return e.globals.lineProgress||0}],accumulated:[He,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[Fe,Mn(Fe),function(e,t){for(var n=0,r=0,i=t;r<i.length;r+=1)n+=i[r].evaluate(e);return n}],"*":[Fe,Mn(Fe),function(e,t){for(var n=1,r=0,i=t;r<i.length;r+=1)n*=i[r].evaluate(e);return n}],"-":{type:Fe,overloads:[[[Fe,Fe],function(e,t){var n=t[1];return t[0].evaluate(e)-n.evaluate(e)}],[[Fe],function(e,t){return-t[0].evaluate(e)}]]},"/":[Fe,[Fe,Fe],function(e,t){var n=t[1];return t[0].evaluate(e)/n.evaluate(e)}],"%":[Fe,[Fe,Fe],function(e,t){var n=t[1];return t[0].evaluate(e)%n.evaluate(e)}],ln2:[Fe,[],function(){return Math.LN2}],pi:[Fe,[],function(){return Math.PI}],e:[Fe,[],function(){return Math.E}],"^":[Fe,[Fe,Fe],function(e,t){var n=t[1];return Math.pow(t[0].evaluate(e),n.evaluate(e))}],sqrt:[Fe,[Fe],function(e,t){return Math.sqrt(t[0].evaluate(e))}],log10:[Fe,[Fe],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN10}],ln:[Fe,[Fe],function(e,t){return Math.log(t[0].evaluate(e))}],log2:[Fe,[Fe],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN2}],sin:[Fe,[Fe],function(e,t){return Math.sin(t[0].evaluate(e))}],cos:[Fe,[Fe],function(e,t){return Math.cos(t[0].evaluate(e))}],tan:[Fe,[Fe],function(e,t){return Math.tan(t[0].evaluate(e))}],asin:[Fe,[Fe],function(e,t){return Math.asin(t[0].evaluate(e))}],acos:[Fe,[Fe],function(e,t){return Math.acos(t[0].evaluate(e))}],atan:[Fe,[Fe],function(e,t){return Math.atan(t[0].evaluate(e))}],min:[Fe,Mn(Fe),function(e,t){return Math.min.apply(Math,t.map((function(t){return t.evaluate(e)})))}],max:[Fe,Mn(Fe),function(e,t){return Math.max.apply(Math,t.map((function(t){return t.evaluate(e)})))}],abs:[Fe,[Fe],function(e,t){return Math.abs(t[0].evaluate(e))}],round:[Fe,[Fe],function(e,t){var n=t[0].evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[Fe,[Fe],function(e,t){return Math.floor(t[0].evaluate(e))}],ceil:[Fe,[Fe],function(e,t){return Math.ceil(t[0].evaluate(e))}],"filter-==":[Be,[ze,He],function(e,t){var n=t[0],r=t[1];return e.properties()[n.value]===r.value}],"filter-id-==":[Be,[He],function(e,t){var n=t[0];return e.id()===n.value}],"filter-type-==":[Be,[ze],function(e,t){var n=t[0];return e.geometryType()===n.value}],"filter-<":[Be,[ze,He],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[Be,[He],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[Be,[ze,He],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[Be,[He],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[Be,[ze,He],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[Be,[He],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[Be,[ze,He],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[Be,[He],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[Be,[He],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[Be,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[Be,[Ze(ze)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Be,[Ze(He)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[Be,[ze,Ze(He)],function(e,t){var n=t[0];return t[1].value.indexOf(e.properties()[n.value])>=0}],"filter-in-large":[Be,[ze,Ze(He)],function(e,t){var n=t[0],r=t[1];return function(e,t,n,r){for(;n<=r;){var i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}(e.properties()[n.value],r.value,0,r.value.length-1)}],all:{type:Be,overloads:[[[Be,Be],function(e,t){var n=t[1];return t[0].evaluate(e)&&n.evaluate(e)}],[Mn(Be),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(!r[n].evaluate(e))return!1;return!0}]]},any:{type:Be,overloads:[[[Be,Be],function(e,t){var n=t[1];return t[0].evaluate(e)||n.evaluate(e)}],[Mn(Be),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(r[n].evaluate(e))return!0;return!1}]]},"!":[Be,[Be],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[Be,[ze],function(e,t){var n=e.globals&&e.globals.isSupportedScript;return!n||n(t[0].evaluate(e))}],upcase:[ze,[ze],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[ze,[ze],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[ze,Mn(He),function(e,t){return t.map((function(t){return ut(t.evaluate(e))})).join("")}],"resolved-locale":[ze,[Ge],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var Wn=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new yt,this._defaultValue=t?function(e){return"color"===e.type&&Fn(e["default"])?new et(0,0,0,0):"color"===e.type?et.parse(e["default"])||null:void 0===e["default"]?null:e["default"]}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null};function qn(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in An}function Zn(e,t){var n=new Ut(An,[],t?function(e){var t={color:Ue,string:ze,number:Fe,enum:ze,boolean:Be,formatted:We,resolvedImage:qe};return"array"===e.type?Ze(t[e.value]||He,e.length):t[e.type]}(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?Pn(new Wn(r,t)):In(n.errors)}Wn.prototype.evaluateWithoutErrorHandling=function(e,t,n,r,i,o){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)},Wn.prototype.evaluate=function(e,t,n,r,i,o){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new lt("Expected value to be one of "+Object.keys(this._enumValues).map((function(e){return JSON.stringify(e)})).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}};var Yn=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!Ft(t.expression)};Yn.prototype.evaluateWithoutErrorHandling=function(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)},Yn.prototype.evaluate=function(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)};var Xn=function(e,t,n,r){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent="camera"!==e&&!Ft(t.expression),this.interpolationType=r};function Kn(e,t){if("error"===(e=Zn(e,t)).result)return e;var n=e.value.expression,r=Nt(n);if(!r&&!Rn(t))return In([new Le("","data expressions not supported")]);var i=zt(n,["zoom"]);if(!i&&!Ln(t))return In([new Le("","zoom expressions not supported")]);var o=function e(t){var n=null;if(t instanceof cn)n=e(t.result);else if(t instanceof un)for(var r=0,i=t.args;r<i.length&&!(n=e(i[r]));r+=1);else(t instanceof Ht||t instanceof an)&&t.input instanceof bt&&"zoom"===t.input.name&&(n=t);return n instanceof Le||t.eachChild((function(t){var r=e(t);r instanceof Le?n=r:!n&&r?n=new Le("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new Le("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n}(n);return o||i?o instanceof Le?In([o]):o instanceof an&&!Dn(t)?In([new Le("",'"interpolate" expressions cannot be used with this property')]):Pn(o?new Xn(r?"camera":"composite",e.value,o.labels,o instanceof an?o.interpolation:void 0):new Yn(r?"constant":"source",e.value)):In([new Le("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Xn.prototype.evaluateWithoutErrorHandling=function(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)},Xn.prototype.evaluate=function(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)},Xn.prototype.interpolationFactor=function(e,t,n){return this.interpolationType?an.interpolationFactor(this.interpolationType,e,t,n):0};var $n=function(e,t){this._parameters=e,this._specification=t,Pe(this,function e(t,n){var r,i,o,a="color"===n.type,s=t.stops&&"object"==typeof t.stops[0][0],u=s||!(s||void 0!==t.property),c=t.type||(Dn(n)?"exponential":"interval");if(a&&((t=Pe({},t)).stops&&(t.stops=t.stops.map((function(e){return[e[0],et.parse(e[1])]}))),t["default"]=et.parse(t["default"]?t["default"]:n["default"])),t.colorSpace&&"rgb"!==t.colorSpace&&!on[t.colorSpace])throw new Error("Unknown color space: "+t.colorSpace);if("exponential"===c)r=Hn;else if("interval"===c)r=Vn;else if("categorical"===c){r=Un,i=Object.create(null);for(var l=0,f=t.stops;l<f.length;l+=1){var p=f[l];i[p[0]]=p[1]}o=typeof t.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'+c+'"');r=Gn}if(s){for(var h={},d=[],v=0;v<t.stops.length;v++){var m=t.stops[v],g=m[0].zoom;void 0===h[g]&&(h[g]={zoom:g,type:t.type,property:t.property,default:t["default"],stops:[]},d.push(g)),h[g].stops.push([m[0].value,m[1]])}for(var y=[],b=0,_=d;b<_.length;b+=1){var x=_[b];y.push([h[x].zoom,e(h[x],n)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:an.interpolationFactor.bind(void 0,w),zoomStops:y.map((function(e){return e[0]})),evaluate:function(e,r){var i=e.zoom;return Hn({stops:y,base:t.base},n,i).evaluate(i,r)}}}if(u){var O="exponential"===c?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:O,interpolationFactor:an.interpolationFactor.bind(void 0,O),zoomStops:t.stops.map((function(e){return e[0]})),evaluate:function(e){return r(t,n,e.zoom,i,o)}}}return{kind:"source",evaluate:function(e,a){var s=a&&a.properties?a.properties[t.property]:void 0;return void 0===s?Bn(t["default"],n["default"]):r(t,n,s,i,o)}}}(this._parameters,this._specification))};function Qn(e){var t=e.key,n=e.value,r=e.valueSpec||{},i=e.objectElementValidators||{},o=e.style,a=e.styleSpec,s=[],u=Nn(n);if("object"!==u)return[new Te(t,n,"object expected, "+u+" found")];for(var c in n){var l=c.split(".")[0],f=r[l]||r["*"],p=void 0;if(i[l])p=i[l];else if(r[l])p=Or;else if(i["*"])p=i["*"];else{if(!r["*"]){s.push(new Te(t,n[c],'unknown property "'+c+'"'));continue}p=Or}s=s.concat(p({key:(t?t+".":t)+c,value:n[c],valueSpec:f,style:o,styleSpec:a,object:n,objectKey:c},n))}for(var h in r)i[h]||r[h].required&&void 0===r[h]["default"]&&void 0===n[h]&&s.push(new Te(t,n,'missing required property "'+h+'"'));return s}function Jn(e){var t=e.value,n=e.valueSpec,r=e.style,i=e.styleSpec,o=e.key,a=e.arrayElementValidator||Or;if("array"!==Nn(t))return[new Te(o,t,"array expected, "+Nn(t)+" found")];if(n.length&&t.length!==n.length)return[new Te(o,t,"array length "+n.length+" expected, length "+t.length+" found")];if(n["min-length"]&&t.length<n["min-length"])return[new Te(o,t,"array length at least "+n["min-length"]+" expected, length "+t.length+" found")];var s={type:n.value,values:n.values};i.$version<7&&(s["function"]=n["function"]),"object"===Nn(n.value)&&(s=n.value);for(var u=[],c=0;c<t.length;c++)u=u.concat(a({array:t,arrayIndex:c,value:t[c],valueSpec:s,style:r,styleSpec:i,key:o+"["+c+"]"}));return u}function er(e){var t=e.key,n=e.value,r=e.valueSpec,i=Nn(n);return"number"===i&&n!=n&&(i="NaN"),"number"!==i?[new Te(t,n,"number expected, "+i+" found")]:"minimum"in r&&n<r.minimum?[new Te(t,n,n+" is less than the minimum value "+r.minimum)]:"maximum"in r&&n>r.maximum?[new Te(t,n,n+" is greater than the maximum value "+r.maximum)]:[]}function tr(e){var t,n,r,i=e.valueSpec,o=Ie(e.value.type),a={},s="categorical"!==o&&void 0===e.value.property,u=!s,c="array"===Nn(e.value.stops)&&"array"===Nn(e.value.stops[0])&&"object"===Nn(e.value.stops[0][0]),l=Qn({key:e.key,value:e.value,valueSpec:e.styleSpec["function"],style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===o)return[new Te(e.key,e.value,'identity function may not have a "stops" property')];var t=[],n=e.value;return t=t.concat(Jn({key:e.key,value:n,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:f})),"array"===Nn(n)&&0===n.length&&t.push(new Te(e.key,n,"array must have at least one stop")),t},default:function(e){return Or({key:e.key,value:e.value,valueSpec:i,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===o&&s&&l.push(new Te(e.key,e.value,'missing required property "property"')),"identity"===o||e.value.stops||l.push(new Te(e.key,e.value,'missing required property "stops"')),"exponential"===o&&e.valueSpec.expression&&!Dn(e.valueSpec)&&l.push(new Te(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(u&&!Rn(e.valueSpec)?l.push(new Te(e.key,e.value,"property functions not supported")):s&&!Ln(e.valueSpec)&&l.push(new Te(e.key,e.value,"zoom functions not supported"))),"categorical"!==o&&!c||void 0!==e.value.property||l.push(new Te(e.key,e.value,'"property" property is required')),l;function f(e){var t=[],o=e.value,s=e.key;if("array"!==Nn(o))return[new Te(s,o,"array expected, "+Nn(o)+" found")];if(2!==o.length)return[new Te(s,o,"array length 2 expected, length "+o.length+" found")];if(c){if("object"!==Nn(o[0]))return[new Te(s,o,"object expected, "+Nn(o[0])+" found")];if(void 0===o[0].zoom)return[new Te(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new Te(s,o,"object stop key must have value")];if(r&&r>Ie(o[0].zoom))return[new Te(s,o[0].zoom,"stop zoom values must appear in ascending order")];Ie(o[0].zoom)!==r&&(r=Ie(o[0].zoom),n=void 0,a={}),t=t.concat(Qn({key:s+"[0]",value:o[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:er,value:p}}))}else t=t.concat(p({key:s+"[0]",value:o[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},o));return qn(Re(o[1]))?t.concat([new Te(s+"[1]",o[1],"expressions are not allowed in function stops.")]):t.concat(Or({key:s+"[1]",value:o[1],valueSpec:i,style:e.style,styleSpec:e.styleSpec}))}function p(e,r){var s=Nn(e.value),u=Ie(e.value),c=null!==e.value?e.value:r;if(t){if(s!==t)return[new Te(e.key,c,s+" stop domain type must match previous stop domain type "+t)]}else t=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Te(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var l="number expected, "+s+" found";return Rn(i)&&void 0===o&&(l+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Te(e.key,c,l)]}return"categorical"!==o||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==o&&"number"===s&&void 0!==n&&u<n?[new Te(e.key,c,"stop domain values must appear in ascending order")]:(n=u,"categorical"===o&&u in a?[new Te(e.key,c,"stop domain values must be unique")]:(a[u]=!0,[])):[new Te(e.key,c,"integer expected, found "+u)]}}function nr(e){var t=("property"===e.expressionContext?Kn:Zn)(Re(e.value),e.valueSpec);if("error"===t.result)return t.value.map((function(t){return new Te(""+e.key+t.key,e.value,t.message)}));var n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new Te(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===e.expressionContext&&"layout"===e.propertyType&&!Ft(n))return[new Te(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!Ft(n))return[new Te(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!zt(n,["zoom","feature-state"]))return[new Te(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Nt(n))return[new Te(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function rr(e){var t=e.key,n=e.value,r=e.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(Ie(n))&&i.push(new Te(t,n,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(r.values).indexOf(Ie(n))&&i.push(new Te(t,n,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(n)+" found")),i}function ir(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,n=e.slice(1);t<n.length;t+=1){var r=n[t];if(!ir(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}$n.deserialize=function(e){return new $n(e._parameters,e._specification)},$n.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var or={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ar(e){if(null==e)return{filter:function(){return!0},needGeometry:!1};ir(e)||(e=ur(e));var t=Zn(e,or);if("error"===t.result)throw new Error(t.value.map((function(e){return e.key+": "+e.message})).join(", "));return{filter:function(e,n,r){return t.value.evaluate(e,n,{},r)},needGeometry:function e(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(var n=1;n<t.length;n++)if(e(t[n]))return!0;return!1}(e)}}function sr(e,t){return e<t?-1:e>t?1:0}function ur(e){if(!e)return!0;var t,n=e[0];return e.length<=1?"any"!==n:"=="===n?cr(e[1],e[2],"=="):"!="===n?pr(cr(e[1],e[2],"==")):"<"===n||">"===n||"<="===n||">="===n?cr(e[1],e[2],n):"any"===n?(t=e.slice(1),["any"].concat(t.map(ur))):"all"===n?["all"].concat(e.slice(1).map(ur)):"none"===n?["all"].concat(e.slice(1).map(ur).map(pr)):"in"===n?lr(e[1],e.slice(2)):"!in"===n?pr(lr(e[1],e.slice(2))):"has"===n?fr(e[1]):"!has"===n?pr(fr(e[1])):"within"!==n||e}function cr(e,t,n){switch(e){case"$type":return["filter-type-"+n,t];case"$id":return["filter-id-"+n,t];default:return["filter-"+n,e,t]}}function lr(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((function(e){return typeof e!=typeof t[0]}))?["filter-in-large",e,["literal",t.sort(sr)]]:["filter-in-small",e,["literal",t]]}}function fr(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function pr(e){return["!",e]}function hr(e){return ir(Re(e.value))?nr(Pe({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function e(t){var n=t.value,r=t.key;if("array"!==Nn(n))return[new Te(r,n,"array expected, "+Nn(n)+" found")];var i,o=t.styleSpec,a=[];if(n.length<1)return[new Te(r,n,"filter array must have at least 1 element")];switch(a=a.concat(rr({key:r+"[0]",value:n[0],valueSpec:o.filter_operator,style:t.style,styleSpec:t.styleSpec})),Ie(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===Ie(n[1])&&a.push(new Te(r,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&a.push(new Te(r,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(i=Nn(n[1]))&&a.push(new Te(r+"[1]",n[1],"string expected, "+i+" found"));for(var s=2;s<n.length;s++)i=Nn(n[s]),"$type"===Ie(n[1])?a=a.concat(rr({key:r+"["+s+"]",value:n[s],valueSpec:o.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new Te(r+"["+s+"]",n[s],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var u=1;u<n.length;u++)a=a.concat(e({key:r+"["+u+"]",value:n[u],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":i=Nn(n[1]),2!==n.length?a.push(new Te(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==i&&a.push(new Te(r+"[1]",n[1],"string expected, "+i+" found"));break;case"within":i=Nn(n[1]),2!==n.length?a.push(new Te(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"object"!==i&&a.push(new Te(r+"[1]",n[1],"object expected, "+i+" found"))}return a}(e)}function dr(e,t){var n=e.key,r=e.style,i=e.styleSpec,o=e.value,a=e.objectKey,s=i[t+"_"+e.layerType];if(!s)return[];var u=a.match(/^(.*)-transition$/);if("paint"===t&&u&&s[u[1]]&&s[u[1]].transition)return Or({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var c,l=e.valueSpec||s[a];if(!l)return[new Te(n,o,'unknown property "'+a+'"')];if("string"===Nn(o)&&Rn(l)&&!l.tokens&&(c=/^{([^}]+)}$/.exec(o)))return[new Te(n,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(c[1])+" }`.")];var f=[];return"symbol"===e.layerType&&("text-field"===a&&r&&!r.glyphs&&f.push(new Te(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Fn(Re(o))&&"identity"===Ie(o.type)&&f.push(new Te(n,o,'"text-font" does not support identity functions'))),f.concat(Or({key:e.key,value:o,valueSpec:l,style:r,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:a}))}function vr(e){return dr(e,"paint")}function mr(e){return dr(e,"layout")}function gr(e){var t=[],n=e.value,r=e.key,i=e.style,o=e.styleSpec;n.type||n.ref||t.push(new Te(r,n,'either "type" or "ref" is required'));var a,s=Ie(n.type),u=Ie(n.ref);if(n.id)for(var c=Ie(n.id),l=0;l<e.arrayIndex;l++){var f=i.layers[l];Ie(f.id)===c&&t.push(new Te(r,n.id,'duplicate layer id "'+n.id+'", previously used at line '+f.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach((function(e){e in n&&t.push(new Te(r,n[e],'"'+e+'" is prohibited for ref layers'))})),i.layers.forEach((function(e){Ie(e.id)===u&&(a=e)})),a?a.ref?t.push(new Te(r,n.ref,"ref cannot reference another ref layer")):s=Ie(a.type):t.push(new Te(r,n.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(n.source){var p=i.sources&&i.sources[n.source],h=p&&Ie(p.type);p?"vector"===h&&"raster"===s?t.push(new Te(r,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===h&&"raster"!==s?t.push(new Te(r,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==h||n["source-layer"]?"raster-dem"===h&&"hillshade"!==s?t.push(new Te(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===h&&p.lineMetrics||t.push(new Te(r,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new Te(r,n,'layer "'+n.id+'" must specify a "source-layer"')):t.push(new Te(r,n.source,'source "'+n.source+'" not found'))}else t.push(new Te(r,n,'missing required property "source"'));return t=t.concat(Qn({key:r,value:n,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Or({key:r+".type",value:n.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:hr,layout:function(e){return Qn({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return mr(Pe({layerType:s},e))}}})},paint:function(e){return Qn({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return vr(Pe({layerType:s},e))}}})}}}))}function yr(e){var t=e.value,n=e.key,r=Nn(t);return"string"!==r?[new Te(n,t,"string expected, "+r+" found")]:[]}var br={promoteId:function(e){var t=e.key,n=e.value;if("string"===Nn(n))return yr({key:t,value:n});var r=[];for(var i in n)r.push.apply(r,yr({key:t+"."+i,value:n[i]}));return r}};function _r(e){var t=e.value,n=e.key,r=e.styleSpec,i=e.style;if(!t.type)return[new Te(n,t,'"type" is required')];var o,a=Ie(t.type);switch(a){case"vector":case"raster":case"raster-dem":return Qn({key:n,value:t,valueSpec:r["source_"+a.replace("-","_")],style:e.style,styleSpec:r,objectElementValidators:br});case"geojson":if(o=Qn({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:br}),t.cluster)for(var s in t.clusterProperties){var u=t.clusterProperties[s],c=u[0],l="string"==typeof c?[c,["accumulated"],["get",s]]:c;o.push.apply(o,nr({key:n+"."+s+".map",value:u[1],expressionContext:"cluster-map"})),o.push.apply(o,nr({key:n+"."+s+".reduce",value:l,expressionContext:"cluster-reduce"}))}return o;case"video":return Qn({key:n,value:t,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return Qn({key:n,value:t,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new Te(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return rr({key:n+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function xr(e){var t=e.value,n=e.styleSpec,r=n.light,i=e.style,o=[],a=Nn(t);if(void 0===t)return o;if("object"!==a)return o.concat([new Te("light",t,"object expected, "+a+" found")]);for(var s in t){var u=s.match(/^(.*)-transition$/);o=o.concat(u&&r[u[1]]&&r[u[1]].transition?Or({key:s,value:t[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?Or({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n}):[new Te(s,t[s],'unknown property "'+s+'"')])}return o}var wr={"*":function(){return[]},array:Jn,boolean:function(e){var t=e.value,n=e.key,r=Nn(t);return"boolean"!==r?[new Te(n,t,"boolean expected, "+r+" found")]:[]},number:er,color:function(e){var t=e.key,n=e.value,r=Nn(n);return"string"!==r?[new Te(t,n,"color expected, "+r+" found")]:null===Je(n)?[new Te(t,n,'color expected, "'+n+'" found')]:[]},constants:Me,enum:rr,filter:hr,function:tr,layer:gr,object:Qn,source:_r,light:xr,string:yr,formatted:function(e){return 0===yr(e).length?[]:nr(e)},resolvedImage:function(e){return 0===yr(e).length?[]:nr(e)}};function Or(e){var t=e.value,n=e.valueSpec,r=e.styleSpec;return n.expression&&Fn(Ie(t))?tr(e):n.expression&&qn(Re(t))?nr(e):n.type&&wr[n.type]?wr[n.type](e):Qn(Pe({},e,{valueSpec:n.type?r[n.type]:n}))}function Er(e){var t=e.value,n=e.key,r=yr(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new Te(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new Te(n,t,'"glyphs" url must include a "{range}" token'))),r}function Sr(e,t){void 0===t&&(t=Ce);var n=[];return n=n.concat(Or({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Er,"*":function(){return[]}}})),e.constants&&(n=n.concat(Me({key:"constants",value:e.constants,style:e,styleSpec:t}))),jr(n)}function jr(e){return[].concat(e).sort((function(e,t){return e.line-t.line}))}function Ar(e){return function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return jr(e.apply(this,t))}}Sr.source=Ar(_r),Sr.light=Ar(xr),Sr.layer=Ar(gr),Sr.filter=Ar(hr),Sr.paintProperty=Ar(vr),Sr.layoutProperty=Ar(mr);var kr=Sr,Cr=kr.light,Tr=kr.paintProperty,Mr=kr.layoutProperty;function Pr(e,t){var n=!1;if(t&&t.length)for(var r=0,i=t;r<i.length;r+=1)e.fire(new Ae(new Error(i[r].message))),n=!0;return n}var Ir=Rr;function Rr(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],this.d=(t=i[1])+2*(n=i[2]);for(var o=0;o<this.d*this.d;o++){var a=i[3+o],s=i[3+o+1];r.push(a===s?null:i.subarray(a,s))}var u=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],u),this.bboxes=i.subarray(u),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var l=n/t*e;this.min=-l,this.max=e+l}Rr.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Rr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Rr.prototype._insertCell=function(e,t,n,r,i,o){this.cells[i].push(o)},Rr.prototype.query=function(e,t,n,r,i){var o=this.min,a=this.max;if(e<=o&&t<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,n,r,this._queryCell,s,{},i),s},Rr.prototype._queryCell=function(e,t,n,r,i,o,a,s){var u=this.cells[i];if(null!==u)for(var c=this.keys,l=this.bboxes,f=0;f<u.length;f++){var p=u[f];if(void 0===a[p]){var h=4*p;(s?s(l[h+0],l[h+1],l[h+2],l[h+3]):e<=l[h+2]&&t<=l[h+3]&&n>=l[h+0]&&r>=l[h+1])?(a[p]=!0,o.push(c[p])):a[p]=!1}}},Rr.prototype._forEachCell=function(e,t,n,r,i,o,a,s){for(var u=this._convertToCellCoord(e),c=this._convertToCellCoord(t),l=this._convertToCellCoord(n),f=this._convertToCellCoord(r),p=u;p<=l;p++)for(var h=c;h<=f;h++){var d=this.d*h+p;if((!s||s(this._convertFromCellCoord(p),this._convertFromCellCoord(h),this._convertFromCellCoord(p+1),this._convertFromCellCoord(h+1)))&&i.call(this,e,t,n,r,d,o,a,s))return}},Rr.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Rr.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Rr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=t,a=0;a<e.length;a++){var s=e[a];i[3+a]=o,i.set(s,o),o+=s.length}return i[3+e.length]=o,i.set(this.keys,o),i[3+e.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var Lr=a.ImageData,Dr=a.ImageBitmap,Nr={};function Fr(e,t,n){void 0===n&&(n={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Nr[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}for(var zr in Fr("Object",Object),Ir.serialize=function(e,t){var n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},Ir.deserialize=function(e){return new Ir(e.buffer)},Fr("Grid",Ir),Fr("Color",et),Fr("Error",Error),Fr("ResolvedImage",it),Fr("StylePropertyFunction",$n),Fr("StyleExpression",Wn,{omit:["_evaluator"]}),Fr("ZoomDependentExpression",Xn),Fr("ZoomConstantExpression",Yn),Fr("CompoundExpression",bt,{omit:["_evaluate"]}),An)An[zr]._classRegistryKey||Fr("Expression_"+zr,An[zr]);function Br(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Ur(e){return Dr&&e instanceof Dr}function Vr(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Br(e)||Ur(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var n=e;return t&&t.push(n.buffer),n}if(e instanceof Lr)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var r=[],i=0,o=e;i<o.length;i+=1)r.push(Vr(o[i],t));return r}if("object"==typeof e){var a=e.constructor,s=a._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var u=a.serialize?a.serialize(e,t):{};if(!a.serialize){for(var c in e)if(e.hasOwnProperty(c)&&!(Nr[s].omit.indexOf(c)>=0)){var l=e[c];u[c]=Nr[s].shallow.indexOf(c)>=0?l:Vr(l,t)}e instanceof Error&&(u.message=e.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(u.$name=s),u}throw new Error("can't serialize object of type "+typeof e)}function Hr(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Br(e)||Ur(e)||ArrayBuffer.isView(e)||e instanceof Lr)return e;if(Array.isArray(e))return e.map(Hr);if("object"==typeof e){var t=e.$name||"Object",n=Nr[t].klass;if(!n)throw new Error("can't deserialize unregistered class "+t);if(n.deserialize)return n.deserialize(e);for(var r=Object.create(n.prototype),i=0,o=Object.keys(e);i<o.length;i+=1){var a=o[i];if("$name"!==a){var s=e[a];r[a]=Nr[t].shallow.indexOf(a)>=0?s:Hr(s)}}return r}throw new Error("can't deserialize object of type "+typeof e)}var Gr=function(){this.first=!0};Gr.prototype.update=function(e,t){var n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))};var Wr={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function qr(e){for(var t=0,n=e;t<n.length;t+=1)if(Zr(n[t].charCodeAt(0)))return!0;return!1}function Zr(e){return!(746!==e&&747!==e&&(e<4352||!(Wr["Bopomofo Extended"](e)||Wr.Bopomofo(e)||Wr["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||Wr["CJK Compatibility Ideographs"](e)||Wr["CJK Compatibility"](e)||Wr["CJK Radicals Supplement"](e)||Wr["CJK Strokes"](e)||!(!Wr["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||Wr["CJK Unified Ideographs Extension A"](e)||Wr["CJK Unified Ideographs"](e)||Wr["Enclosed CJK Letters and Months"](e)||Wr["Hangul Compatibility Jamo"](e)||Wr["Hangul Jamo Extended-A"](e)||Wr["Hangul Jamo Extended-B"](e)||Wr["Hangul Jamo"](e)||Wr["Hangul Syllables"](e)||Wr.Hiragana(e)||Wr["Ideographic Description Characters"](e)||Wr.Kanbun(e)||Wr["Kangxi Radicals"](e)||Wr["Katakana Phonetic Extensions"](e)||Wr.Katakana(e)&&12540!==e||!(!Wr["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!Wr["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||Wr["Unified Canadian Aboriginal Syllabics"](e)||Wr["Unified Canadian Aboriginal Syllabics Extended"](e)||Wr["Vertical Forms"](e)||Wr["Yijing Hexagram Symbols"](e)||Wr["Yi Syllables"](e)||Wr["Yi Radicals"](e))))}function Yr(e){return!(Zr(e)||function(e){return!!(Wr["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||Wr["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||Wr["Letterlike Symbols"](e)||Wr["Number Forms"](e)||Wr["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||Wr["Control Pictures"](e)&&9251!==e||Wr["Optical Character Recognition"](e)||Wr["Enclosed Alphanumerics"](e)||Wr["Geometric Shapes"](e)||Wr["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||Wr["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Wr["CJK Symbols and Punctuation"](e)||Wr.Katakana(e)||Wr["Private Use Area"](e)||Wr["CJK Compatibility Forms"](e)||Wr["Small Form Variants"](e)||Wr["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function Xr(e){return e>=1424&&e<=2303||Wr["Arabic Presentation Forms-A"](e)||Wr["Arabic Presentation Forms-B"](e)}function Kr(e,t){return!(!t&&Xr(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||Wr.Khmer(e))}function $r(e){for(var t=0,n=e;t<n.length;t+=1)if(Xr(n[t].charCodeAt(0)))return!0;return!1}var Qr=null,Jr="unavailable",ei=null,ti=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(Jr="error"),Qr&&Qr(e)};function ni(){ri.fire(new je("pluginStateChange",{pluginStatus:Jr,pluginURL:ei}))}var ri=new ke,ii=function(){return Jr},oi=function(){if("deferred"!==Jr||!ei)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Jr="loading",ni(),ei&&_e({url:ei},(function(e){e?ti(e):(Jr="loaded",ni())}))},ai={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Jr||null!=ai.applyArabicShaping},isLoading:function(){return"loading"===Jr},setState:function(e){Jr=e.pluginStatus,ei=e.pluginURL},isParsed:function(){return null!=ai.applyArabicShaping&&null!=ai.processBidirectionalText&&null!=ai.processStyledBidirectionalText},getPluginURL:function(){return ei}},si=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Gr,this.transition={})};si.prototype.isSupportedScript=function(e){return function(e,t){for(var n=0,r=e;n<r.length;n+=1)if(!Kr(r[n].charCodeAt(0),t))return!1;return!0}(e,ai.isLoaded())},si.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},si.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}};var ui=function(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(Fn(e))return new $n(e,t);if(qn(e)){var n=Kn(e,t);if("error"===n.result)throw new Error(n.value.map((function(e){return e.key+": "+e.message})).join(", "));return n.value}var r=e;return"string"==typeof e&&"color"===t.type&&(r=et.parse(e)),{kind:"constant",evaluate:function(){return r}}}(void 0===t?e.specification["default"]:t,e.specification)};ui.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},ui.prototype.possiblyEvaluate=function(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)};var ci=function(e){this.property=e,this.value=new ui(e,void 0)};ci.prototype.transitioned=function(e,t){return new fi(this.property,this.value,t,p({},e.transition,this.transition),e.now)},ci.prototype.untransitioned=function(){return new fi(this.property,this.value,null,{},0)};var li=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};li.prototype.getValue=function(e){return x(this._values[e].value.value)},li.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new ci(this._values[e].property)),this._values[e].value=new ui(this._values[e].property,null===t?void 0:x(t))},li.prototype.getTransition=function(e){return x(this._values[e].transition)},li.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new ci(this._values[e].property)),this._values[e].transition=x(t)||void 0},li.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t],i=this.getValue(r);void 0!==i&&(e[r]=i);var o=this.getTransition(r);void 0!==o&&(e[r+"-transition"]=o)}return e},li.prototype.transitioned=function(e,t){for(var n=new pi(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var o=i[r];n._values[o]=this._values[o].transitioned(e,t._values[o])}return n},li.prototype.untransitioned=function(){for(var e=new pi(this._properties),t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t];e._values[r]=this._values[r].untransitioned()}return e};var fi=function(e,t,n,r,i){this.property=e,this.value=t,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,e.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};fi.prototype.possiblyEvaluate=function(e,t,n){var r=e.now||0,i=this.value.possiblyEvaluate(e,t,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(e,t,n);var a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(e,t,n),i,function(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}(a))}return i};var pi=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};pi.prototype.possiblyEvaluate=function(e,t,n){for(var r=new vi(this._properties),i=0,o=Object.keys(this._values);i<o.length;i+=1){var a=o[i];r._values[a]=this._values[a].possiblyEvaluate(e,t,n)}return r},pi.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1)if(this._values[t[e]].prior)return!0;return!1};var hi=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};hi.prototype.getValue=function(e){return x(this._values[e].value)},hi.prototype.setValue=function(e,t){this._values[e]=new ui(this._values[e].property,null===t?void 0:x(t))},hi.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t],i=this.getValue(r);void 0!==i&&(e[r]=i)}return e},hi.prototype.possiblyEvaluate=function(e,t,n){for(var r=new vi(this._properties),i=0,o=Object.keys(this._values);i<o.length;i+=1){var a=o[i];r._values[a]=this._values[a].possiblyEvaluate(e,t,n)}return r};var di=function(e,t,n){this.property=e,this.value=t,this.parameters=n};di.prototype.isConstant=function(){return"constant"===this.value.kind},di.prototype.constantOr=function(e){return"constant"===this.value.kind?this.value.value:e},di.prototype.evaluate=function(e,t,n,r){return this.property.evaluate(this.value,this.parameters,e,t,n,r)};var vi=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};vi.prototype.get=function(e){return this._values[e]};var mi=function(e){this.specification=e};mi.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},mi.prototype.interpolate=function(e,t,n){var r=Wt[this.specification.type];return r?r(e,t,n):e};var gi=function(e,t){this.specification=e,this.overrides=t};gi.prototype.possiblyEvaluate=function(e,t,n,r){return new di(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,r)}:e.expression,t)},gi.prototype.interpolate=function(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new di(this,{kind:"constant",value:void 0},e.parameters);var r=Wt[this.specification.type];return r?new di(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.parameters):e},gi.prototype.evaluate=function(e,t,n,r,i,o){return"constant"===e.kind?e.value:e.evaluate(t,n,r,i,o)};var yi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(e,t,n,r){if(void 0===e.value)return new di(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){var i=e.expression.evaluate(t,null,{},n,r),o="resolvedImage"===e.property.specification.type&&"string"!=typeof i?i.name:i,a=this._calculate(o,o,o,t);return new di(this,{kind:"constant",value:a},t)}if("camera"===e.expression.kind){var s=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new di(this,{kind:"constant",value:s},t)}return new di(this,e.expression,t)},t.prototype.evaluate=function(e,t,n,r,i,o){if("source"===e.kind){var a=e.evaluate(t,n,r,i,o);return this._calculate(a,a,a,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},n,r),e.evaluate({zoom:Math.floor(t.zoom)},n,r),e.evaluate({zoom:Math.floor(t.zoom)+1},n,r),t):e.value},t.prototype._calculate=function(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}},t.prototype.interpolate=function(e){return e},t}(gi),bi=function(e){this.specification=e};bi.prototype.possiblyEvaluate=function(e,t,n,r){if(void 0!==e.value){if("constant"===e.expression.kind){var i=e.expression.evaluate(t,null,{},n,r);return this._calculate(i,i,i,t)}return this._calculate(e.expression.evaluate(new si(Math.floor(t.zoom-1),t)),e.expression.evaluate(new si(Math.floor(t.zoom),t)),e.expression.evaluate(new si(Math.floor(t.zoom+1),t)),t)}},bi.prototype._calculate=function(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}},bi.prototype.interpolate=function(e){return e};var _i=function(e){this.specification=e};_i.prototype.possiblyEvaluate=function(e,t,n,r){return!!e.expression.evaluate(t,null,{},n,r)},_i.prototype.interpolate=function(){return!1};var xi=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var n=e[t];n.specification.overridable&&this.overridableProperties.push(t);var r=this.defaultPropertyValues[t]=new ui(n,void 0),i=this.defaultTransitionablePropertyValues[t]=new ci(n);this.defaultTransitioningPropertyValues[t]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=r.possiblyEvaluate({})}};Fr("DataDrivenProperty",gi),Fr("DataConstantProperty",mi),Fr("CrossFadedDataDrivenProperty",yi),Fr("CrossFadedProperty",bi),Fr("ColorRampProperty",_i);var wi=function(e){function t(t,n){if(e.call(this),this.id=t.id,this.type=t.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),n.layout&&(this._unevaluatedLayout=new hi(n.layout)),n.paint)){for(var r in this._transitionablePaint=new li(n.paint),t.paint)this.setPaintProperty(r,t.paint[r],{validate:!1});for(var i in t.layout)this.setLayoutProperty(i,t.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new vi(n.paint)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)},t.prototype.setLayoutProperty=function(e,t,n){void 0===n&&(n={}),null!=t&&this._validate(Mr,"layers."+this.id+".layout."+e,e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)},t.prototype.getPaintProperty=function(e){return y(e,"-transition")?this._transitionablePaint.getTransition(e.slice(0,-"-transition".length)):this._transitionablePaint.getValue(e)},t.prototype.setPaintProperty=function(e,t,n){if(void 0===n&&(n={}),null!=t&&this._validate(Tr,"layers."+this.id+".paint."+e,e,t,n))return!1;if(y(e,"-transition"))return this._transitionablePaint.setTransition(e.slice(0,-"-transition".length),t||void 0),!1;var r=this._transitionablePaint._values[e],i="cross-faded-data-driven"===r.property.specification["property-type"],o=r.value.isDataDriven(),a=r.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);var s=this._transitionablePaint._values[e].value;return s.isDataDriven()||o||i||this._handleOverridablePaintPropertyUpdate(e,a,s)},t.prototype._handleSpecialPaintPropertyUpdate=function(e){},t.prototype._handleOverridablePaintPropertyUpdate=function(e,t,n){return!1},t.prototype.isHidden=function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility},t.prototype.updateTransitions=function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)},t.prototype.serialize=function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),_(e,(function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)}))},t.prototype._validate=function(e,t,n,r,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&Pr(this,e.call(kr,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:Ce,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var e in this.paint._values){var t=this.paint.get(e);if(t instanceof di&&Rn(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1},t}(ke),Oi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ei=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Si=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function ji(e,t){void 0===t&&(t=1);var n=0,r=0;return{members:e.map((function(e){var i=Oi[e.type].BYTES_PER_ELEMENT,o=n=Ai(n,Math.max(t,i)),a=e.components||1;return r=Math.max(r,i),n+=i*a,{name:e.name,type:e.type,components:a,offset:o}})),size:Ai(n,Math.max(r,t)),alignment:t}}function Ai(e,t){return Math.ceil(e/t)*t}Si.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Si.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},Si.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Si.prototype.clear=function(){this.length=0},Si.prototype.resize=function(e){this.reserve(e),this.length=e},Si.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},Si.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var ki=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},t.prototype.emplace=function(e,t,n){var r=2*e;return this.int16[r+0]=t,this.int16[r+1]=n,e},t}(Si);ki.prototype.bytesPerElement=4,Fr("StructArrayLayout2i4",ki);var Ci=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)},t.prototype.emplace=function(e,t,n,r,i){var o=4*e;return this.int16[o+0]=t,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,e},t}(Si);Ci.prototype.bytesPerElement=8,Fr("StructArrayLayout4i8",Ci);var Ti=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)},t.prototype.emplace=function(e,t,n,r,i,o,a){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,e},t}(Si);Ti.prototype.bytesPerElement=12,Fr("StructArrayLayout2i4i12",Ti);var Mi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)},t.prototype.emplace=function(e,t,n,r,i,o,a){var s=4*e,u=8*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.uint8[u+4]=r,this.uint8[u+5]=i,this.uint8[u+6]=o,this.uint8[u+7]=a,e},t}(Si);Mi.prototype.bytesPerElement=8,Fr("StructArrayLayout2i4ub8",Mi);var Pi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},t.prototype.emplace=function(e,t,n){var r=2*e;return this.float32[r+0]=t,this.float32[r+1]=n,e},t}(Si);Pi.prototype.bytesPerElement=8,Fr("StructArrayLayout2f8",Pi);var Ii=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o,a,s,u,c){var l=this.length;return this.resize(l+1),this.emplace(l,e,t,n,r,i,o,a,s,u,c)},t.prototype.emplace=function(e,t,n,r,i,o,a,s,u,c,l){var f=10*e;return this.uint16[f+0]=t,this.uint16[f+1]=n,this.uint16[f+2]=r,this.uint16[f+3]=i,this.uint16[f+4]=o,this.uint16[f+5]=a,this.uint16[f+6]=s,this.uint16[f+7]=u,this.uint16[f+8]=c,this.uint16[f+9]=l,e},t}(Si);Ii.prototype.bytesPerElement=20,Fr("StructArrayLayout10ui20",Ii);var Ri=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o,a,s,u,c,l,f){var p=this.length;return this.resize(p+1),this.emplace(p,e,t,n,r,i,o,a,s,u,c,l,f)},t.prototype.emplace=function(e,t,n,r,i,o,a,s,u,c,l,f,p){var h=12*e;return this.int16[h+0]=t,this.int16[h+1]=n,this.int16[h+2]=r,this.int16[h+3]=i,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=u,this.int16[h+8]=c,this.int16[h+9]=l,this.int16[h+10]=f,this.int16[h+11]=p,e},t}(Si);Ri.prototype.bytesPerElement=24,Fr("StructArrayLayout4i4ui4i24",Ri);var Li=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},t.prototype.emplace=function(e,t,n,r){var i=3*e;return this.float32[i+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,e},t}(Si);Li.prototype.bytesPerElement=12,Fr("StructArrayLayout3f12",Li);var Di=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function(e,t){return this.uint32[1*e+0]=t,e},t}(Si);Di.prototype.bytesPerElement=4,Fr("StructArrayLayout1ul4",Di);var Ni=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o,a,s,u){var c=this.length;return this.resize(c+1),this.emplace(c,e,t,n,r,i,o,a,s,u)},t.prototype.emplace=function(e,t,n,r,i,o,a,s,u,c){var l=10*e,f=5*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+3]=i,this.int16[l+4]=o,this.int16[l+5]=a,this.uint32[f+3]=s,this.uint16[l+8]=u,this.uint16[l+9]=c,e},t}(Si);Ni.prototype.bytesPerElement=20,Fr("StructArrayLayout6i1ul2ui20",Ni);var Fi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)},t.prototype.emplace=function(e,t,n,r,i,o,a){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,e},t}(Si);Fi.prototype.bytesPerElement=12,Fr("StructArrayLayout2i2i2i12",Fi);var zi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i)},t.prototype.emplace=function(e,t,n,r,i,o){var a=4*e,s=8*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=r,this.int16[s+6]=i,this.int16[s+7]=o,e},t}(Si);zi.prototype.bytesPerElement=16,Fr("StructArrayLayout2f1f2i16",zi);var Bi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)},t.prototype.emplace=function(e,t,n,r,i){var o=12*e,a=3*e;return this.uint8[o+0]=t,this.uint8[o+1]=n,this.float32[a+1]=r,this.float32[a+2]=i,e},t}(Si);Bi.prototype.bytesPerElement=12,Fr("StructArrayLayout2ub2f12",Bi);var Ui=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},t.prototype.emplace=function(e,t,n,r){var i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,this.uint16[i+2]=r,e},t}(Si);Ui.prototype.bytesPerElement=6,Fr("StructArrayLayout3ui6",Ui);var Vi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o,a,s,u,c,l,f,p,h,d,v,m){var g=this.length;return this.resize(g+1),this.emplace(g,e,t,n,r,i,o,a,s,u,c,l,f,p,h,d,v,m)},t.prototype.emplace=function(e,t,n,r,i,o,a,s,u,c,l,f,p,h,d,v,m,g){var y=24*e,b=12*e,_=48*e;return this.int16[y+0]=t,this.int16[y+1]=n,this.uint16[y+2]=r,this.uint16[y+3]=i,this.uint32[b+2]=o,this.uint32[b+3]=a,this.uint32[b+4]=s,this.uint16[y+10]=u,this.uint16[y+11]=c,this.uint16[y+12]=l,this.float32[b+7]=f,this.float32[b+8]=p,this.uint8[_+36]=h,this.uint8[_+37]=d,this.uint8[_+38]=v,this.uint32[b+10]=m,this.int16[y+22]=g,e},t}(Si);Vi.prototype.bytesPerElement=48,Fr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Vi);var Hi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o,a,s,u,c,l,f,p,h,d,v,m,g,y,b,_,x,w,O,E,S,j,A){var k=this.length;return this.resize(k+1),this.emplace(k,e,t,n,r,i,o,a,s,u,c,l,f,p,h,d,v,m,g,y,b,_,x,w,O,E,S,j,A)},t.prototype.emplace=function(e,t,n,r,i,o,a,s,u,c,l,f,p,h,d,v,m,g,y,b,_,x,w,O,E,S,j,A,k){var C=34*e,T=17*e;return this.int16[C+0]=t,this.int16[C+1]=n,this.int16[C+2]=r,this.int16[C+3]=i,this.int16[C+4]=o,this.int16[C+5]=a,this.int16[C+6]=s,this.int16[C+7]=u,this.uint16[C+8]=c,this.uint16[C+9]=l,this.uint16[C+10]=f,this.uint16[C+11]=p,this.uint16[C+12]=h,this.uint16[C+13]=d,this.uint16[C+14]=v,this.uint16[C+15]=m,this.uint16[C+16]=g,this.uint16[C+17]=y,this.uint16[C+18]=b,this.uint16[C+19]=_,this.uint16[C+20]=x,this.uint16[C+21]=w,this.uint16[C+22]=O,this.uint32[T+12]=E,this.float32[T+13]=S,this.float32[T+14]=j,this.float32[T+15]=A,this.float32[T+16]=k,e},t}(Si);Hi.prototype.bytesPerElement=68,Fr("StructArrayLayout8i15ui1ul4f68",Hi);var Gi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function(e,t){return this.float32[1*e+0]=t,e},t}(Si);Gi.prototype.bytesPerElement=4,Fr("StructArrayLayout1f4",Gi);var Wi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},t.prototype.emplace=function(e,t,n,r){var i=3*e;return this.int16[i+0]=t,this.int16[i+1]=n,this.int16[i+2]=r,e},t}(Si);Wi.prototype.bytesPerElement=6,Fr("StructArrayLayout3i6",Wi);var qi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},t.prototype.emplace=function(e,t,n,r){var i=4*e;return this.uint32[2*e+0]=t,this.uint16[i+2]=n,this.uint16[i+3]=r,e},t}(Si);qi.prototype.bytesPerElement=8,Fr("StructArrayLayout1ul2ui8",qi);var Zi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},t.prototype.emplace=function(e,t,n){var r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,e},t}(Si);Zi.prototype.bytesPerElement=4,Fr("StructArrayLayout2ui4",Zi);var Yi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function(e,t){return this.uint16[1*e+0]=t,e},t}(Si);Yi.prototype.bytesPerElement=2,Fr("StructArrayLayout1ui2",Yi);var Xi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)},t.prototype.emplace=function(e,t,n,r,i){var o=4*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,e},t}(Si);Xi.prototype.bytesPerElement=16,Fr("StructArrayLayout4f16",Xi);var Ki=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.anchorPoint.get=function(){return new i(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,n),t}(Ei);Ki.prototype.size=20;var $i=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(e){return new Ki(this,e)},t}(Ni);Fr("CollisionBoxArray",$i);var Qi=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},n.placedOrientation.set=function(e){this._structArray.uint8[this._pos1+37]=e},n.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},n.hidden.set=function(e){this._structArray.uint8[this._pos1+38]=e},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},n.crossTileID.set=function(e){this._structArray.uint32[this._pos4+10]=e},n.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,n),t}(Ei);Qi.prototype.size=48;var Ji=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(e){return new Qi(this,e)},t}(Vi);Fr("PlacedSymbolArray",Ji);var eo=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},n.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},n.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},n.key.get=function(){return this._structArray.uint16[this._pos2+8]},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},n.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},n.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},n.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},n.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},n.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},n.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},n.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},n.crossTileID.set=function(e){this._structArray.uint32[this._pos4+12]=e},n.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},n.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},n.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},n.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,n),t}(Ei);eo.prototype.size=68;var to=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(e){return new eo(this,e)},t}(Hi);Fr("SymbolInstanceArray",to);var no=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getoffsetX=function(e){return this.float32[1*e+0]},t}(Gi);Fr("GlyphOffsetArray",no);var ro=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getx=function(e){return this.int16[3*e+0]},t.prototype.gety=function(e){return this.int16[3*e+1]},t.prototype.gettileUnitDistanceFromAnchor=function(e){return this.int16[3*e+2]},t}(Wi);Fr("SymbolLineVertexArray",ro);var io=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,n),t}(Ei);io.prototype.size=8;var oo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(e){return new io(this,e)},t}(qi);Fr("FeatureIndexArray",oo);var ao=ji([{name:"a_pos",components:2,type:"Int16"}],4).members,so=function(e){void 0===e&&(e=[]),this.segments=e};function uo(e,t){return 256*(e=l(Math.floor(e),0,255))+l(Math.floor(t),0,255)}so.prototype.prepareSegment=function(e,t,n,r){var i=this.segments[this.segments.length-1];return e>so.MAX_VERTEX_ARRAY_LENGTH&&O("Max vertices per segment is "+so.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!i||i.vertexLength+e>so.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i},so.prototype.get=function(){return this.segments},so.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var n=t[e];for(var r in n.vaos)n.vaos[r].destroy()}},so.simpleSegment=function(e,t,n,r){return new so([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])},so.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Fr("SegmentVector",so);var co=ji([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),lo=t((function(e){e.exports=function(e,t){var n,r,i,o,a,s,u,c;for(r=e.length-(n=3&e.length),i=t,a=3432918353,s=461845907,c=0;c<r;)u=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,i=27492+(65535&(o=5*(65535&(i=(i^=u=(65535&(u=(u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&e.charCodeAt(c+2))<<16;case 2:u^=(255&e.charCodeAt(c+1))<<8;case 1:i^=u=(65535&(u=(u=(65535&(u^=255&e.charCodeAt(c)))*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}})),fo=t((function(e){e.exports=function(e,t){for(var n,r=e.length,i=t^r,o=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&e.charCodeAt(o+2))<<16;case 2:i^=(255&e.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}})),po=lo,ho=fo;po.murmur3=lo,po.murmur2=ho;var vo=function(){this.ids=[],this.positions=[],this.indexed=!1};vo.prototype.add=function(e,t,n,r){this.ids.push(go(e)),this.positions.push(t,n,r)},vo.prototype.getPositions=function(e){for(var t=go(e),n=0,r=this.ids.length-1;n<r;){var i=n+r>>1;this.ids[i]>=t?r=i:n=i+1}for(var o=[];this.ids[n]===t;)o.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return o},vo.serialize=function(e,t){var n=new Float64Array(e.ids),r=new Uint32Array(e.positions);return function e(t,n,r,i){for(;r<i;){for(var o=t[r+i>>1],a=r-1,s=i+1;;){do{a++}while(t[a]<o);do{s--}while(t[s]>o);if(a>=s)break;yo(t,a,s),yo(n,3*a,3*s),yo(n,3*a+1,3*s+1),yo(n,3*a+2,3*s+2)}s-r<i-s?(e(t,n,r,s),r=s+1):(e(t,n,s+1,i),i=s)}}(n,r,0,n.length-1),t&&t.push(n.buffer,r.buffer),{ids:n,positions:r}},vo.deserialize=function(e){var t=new vo;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var mo=Math.pow(2,53)-1;function go(e){var t=+e;return!isNaN(t)&&t<=mo?t:po(String(e))}function yo(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}Fr("FeaturePositionMap",vo);var bo=function(e,t){this.gl=e.gl,this.location=t},_o=function(e){function t(t,n){e.call(this,t,n),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))},t}(bo),xo=function(e){function t(t,n){e.call(this,t,n),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))},t}(bo),wo=function(e){function t(t,n){e.call(this,t,n),this.current=[0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))},t}(bo),Oo=function(e){function t(t,n){e.call(this,t,n),this.current=[0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))},t}(bo),Eo=function(e){function t(t,n){e.call(this,t,n),this.current=[0,0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))},t}(bo),So=function(e){function t(t,n){e.call(this,t,n),this.current=et.transparent}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))},t}(bo),jo=new Float32Array(16),Ao=function(e){function t(t,n){e.call(this,t,n),this.current=jo}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(var t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}},t}(bo);function ko(e){return[uo(255*e.r,255*e.g),uo(255*e.b,255*e.a)]}var Co=function(e,t,n){this.value=e,this.uniformNames=t.map((function(e){return"u_"+e})),this.type=n};Co.prototype.setUniform=function(e,t,n){e.set(n.constantOr(this.value))},Co.prototype.getBinding=function(e,t,n){return"color"===this.type?new So(e,t):new xo(e,t)};var To=function(e,t){this.uniformNames=t.map((function(e){return"u_"+e})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};To.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},To.prototype.setUniform=function(e,t,n,r){var i="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;i&&e.set(i)},To.prototype.getBinding=function(e,t,n){return"u_pattern"===n.substr(0,9)?new Eo(e,t):new xo(e,t)};var Mo=function(e,t,n,r){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map((function(e){return{name:"a_"+e,type:"Float32",components:"color"===n?2:1,offset:0}})),this.paintVertexArray=new r};Mo.prototype.populatePaintArray=function(e,t,n,r,i){var o=this.paintVertexArray.length,a=this.expression.evaluate(new si(0),t,{},r,[],i);this.paintVertexArray.resize(e),this._setPaintValue(o,e,a)},Mo.prototype.updatePaintArray=function(e,t,n,r){var i=this.expression.evaluate({zoom:0},n,r);this._setPaintValue(e,t,i)},Mo.prototype._setPaintValue=function(e,t,n){if("color"===this.type)for(var r=ko(n),i=e;i<t;i++)this.paintVertexArray.emplace(i,r[0],r[1]);else{for(var o=e;o<t;o++)this.paintVertexArray.emplace(o,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}},Mo.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Mo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Po=function(e,t,n,r,i,o){this.expression=e,this.uniformNames=t.map((function(e){return"u_"+e+"_t"})),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=t.map((function(e){return{name:"a_"+e,type:"Float32",components:"color"===n?4:2,offset:0}})),this.paintVertexArray=new o};Po.prototype.populatePaintArray=function(e,t,n,r,i){var o=this.expression.evaluate(new si(this.zoom),t,{},r,[],i),a=this.expression.evaluate(new si(this.zoom+1),t,{},r,[],i),s=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(s,e,o,a)},Po.prototype.updatePaintArray=function(e,t,n,r){var i=this.expression.evaluate({zoom:this.zoom},n,r),o=this.expression.evaluate({zoom:this.zoom+1},n,r);this._setPaintValue(e,t,i,o)},Po.prototype._setPaintValue=function(e,t,n,r){if("color"===this.type)for(var i=ko(n),o=ko(r),a=e;a<t;a++)this.paintVertexArray.emplace(a,i[0],i[1],o[0],o[1]);else{for(var s=e;s<t;s++)this.paintVertexArray.emplace(s,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}},Po.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Po.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Po.prototype.setUniform=function(e,t){var n=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,r=l(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);e.set(r)},Po.prototype.getBinding=function(e,t,n){return new xo(e,t)};var Io=function(e,t,n,r,i,o){this.expression=e,this.type=t,this.useIntegerZoom=n,this.zoom=r,this.layerId=o,this.zoomInPaintVertexArray=new i,this.zoomOutPaintVertexArray=new i};Io.prototype.populatePaintArray=function(e,t,n){var r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(r,e,t.patterns&&t.patterns[this.layerId],n)},Io.prototype.updatePaintArray=function(e,t,n,r,i){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],i)},Io.prototype._setPaintValues=function(e,t,n,r){if(r&&n){var i=r[n.min],o=r[n.mid],a=r[n.max];if(i&&o&&a)for(var s=e;s<t;s++)this.zoomInPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],i.tl[0],i.tl[1],i.br[0],i.br[1],o.pixelRatio,i.pixelRatio),this.zoomOutPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],o.pixelRatio,a.pixelRatio)}},Io.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,co.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,co.members,this.expression.isStateDependent))},Io.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ro=function(e,t,n){this.binders={},this._buffers=[];var r=[];for(var i in e.paint._values)if(n(i)){var o=e.paint.get(i);if(o instanceof di&&Rn(o.property.specification)){var a=Do(i,e.type),s=o.value,u=o.property.specification.type,c=o.property.useIntegerZoom,l=o.property.specification["property-type"],f="cross-faded"===l||"cross-faded-data-driven"===l;if("constant"===s.kind)this.binders[i]=f?new To(s.value,a):new Co(s.value,a,u),r.push("/u_"+i);else if("source"===s.kind||f){var p=No(i,u,"source");this.binders[i]=f?new Io(s,u,c,t,p,e.id):new Mo(s,a,u,p),r.push("/a_"+i)}else{var h=No(i,u,"composite");this.binders[i]=new Po(s,a,u,c,t,h),r.push("/z_"+i)}}}this.cacheKey=r.sort().join("")};Ro.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof Mo||t instanceof Po?t.maxValue:0},Ro.prototype.populatePaintArrays=function(e,t,n,r,i){for(var o in this.binders){var a=this.binders[o];(a instanceof Mo||a instanceof Po||a instanceof Io)&&a.populatePaintArray(e,t,n,r,i)}},Ro.prototype.setConstantPatternPositions=function(e,t){for(var n in this.binders){var r=this.binders[n];r instanceof To&&r.setConstantPatternPositions(e,t)}},Ro.prototype.updatePaintArrays=function(e,t,n,r,i){var o=!1;for(var a in e)for(var s=0,u=t.getPositions(a);s<u.length;s+=1){var c=u[s],l=n.feature(c.index);for(var f in this.binders){var p=this.binders[f];if((p instanceof Mo||p instanceof Po||p instanceof Io)&&!0===p.expression.isStateDependent){var h=r.paint.get(f);p.expression=h.value,p.updatePaintArray(c.start,c.end,l,e[a],i),o=!0}}}return o},Ro.prototype.defines=function(){var e=[];for(var t in this.binders){var n=this.binders[t];(n instanceof Co||n instanceof To)&&e.push.apply(e,n.uniformNames.map((function(e){return"#define HAS_UNIFORM_"+e})))}return e},Ro.prototype.getBinderAttributes=function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof Mo||n instanceof Po)for(var r=0;r<n.paintVertexAttributes.length;r++)e.push(n.paintVertexAttributes[r].name);else if(n instanceof Io)for(var i=0;i<co.members.length;i++)e.push(co.members[i].name)}return e},Ro.prototype.getBinderUniforms=function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof Co||n instanceof To||n instanceof Po)for(var r=0,i=n.uniformNames;r<i.length;r+=1)e.push(i[r])}return e},Ro.prototype.getPaintVertexBuffers=function(){return this._buffers},Ro.prototype.getUniforms=function(e,t){var n=[];for(var r in this.binders){var i=this.binders[r];if(i instanceof Co||i instanceof To||i instanceof Po)for(var o=0,a=i.uniformNames;o<a.length;o+=1){var s=a[o];if(t[s]){var u=i.getBinding(e,t[s],s);n.push({name:s,property:r,binding:u})}}}return n},Ro.prototype.setUniforms=function(e,t,n,r){for(var i=0,o=t;i<o.length;i+=1){var a=o[i],s=a.name,u=a.property;this.binders[u].setUniform(a.binding,r,n.get(u),s)}},Ro.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var n=this.binders[t];if(e&&n instanceof Io){var r=2===e.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;r&&this._buffers.push(r)}else(n instanceof Mo||n instanceof Po)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}},Ro.prototype.upload=function(e){for(var t in this.binders){var n=this.binders[t];(n instanceof Mo||n instanceof Po||n instanceof Io)&&n.upload(e)}this.updatePaintBuffers()},Ro.prototype.destroy=function(){for(var e in this.binders){var t=this.binders[e];(t instanceof Mo||t instanceof Po||t instanceof Io)&&t.destroy()}};var Lo=function(e,t,n){void 0===n&&(n=function(){return!0}),this.programConfigurations={};for(var r=0,i=e;r<i.length;r+=1){var o=i[r];this.programConfigurations[o.id]=new Ro(o,t,n)}this.needsUpload=!1,this._featureMap=new vo,this._bufferOffset=0};function Do(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function No(e,t,n){var r={color:{source:Pi,composite:Xi},number:{source:Gi,composite:Pi}},i=function(e){return{"line-pattern":{source:Ii,composite:Ii},"fill-pattern":{source:Ii,composite:Ii},"fill-extrusion-pattern":{source:Ii,composite:Ii}}[e]}(e);return i&&i[n]||r[t][n]}Lo.prototype.populatePaintArrays=function(e,t,n,r,i,o){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(e,t,r,i,o);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},Lo.prototype.updatePaintArrays=function(e,t,n,r){for(var i=0,o=n;i<o.length;i+=1){var a=o[i];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(e,this._featureMap,t,a,r)||this.needsUpload}},Lo.prototype.get=function(e){return this.programConfigurations[e]},Lo.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},Lo.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},Fr("ConstantBinder",Co),Fr("CrossFadedConstantBinder",To),Fr("SourceExpressionBinder",Mo),Fr("CrossFadedCompositeBinder",Io),Fr("CompositeExpressionBinder",Po),Fr("ProgramConfiguration",Ro,{omit:["_buffers"]}),Fr("ProgramConfigurationSet",Lo);var Fo=Math.pow(2,14)-1,zo=-Fo-1;function Bo(e){for(var t=8192/e.extent,n=e.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],o=0;o<i.length;o++){var a=i[o],s=Math.round(a.x*t),u=Math.round(a.y*t);a.x=l(s,zo,Fo),a.y=l(u,zo,Fo),(s<a.x||s>a.x+1||u<a.y||u>a.y+1)&&O("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function Uo(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Bo(e):[]}}function Vo(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}var Ho=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new ki,this.indexArray=new Ui,this.segments=new so,this.programConfigurations=new Lo(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};function Go(e,t){for(var n=0;n<e.length;n++)if(Jo(t,e[n]))return!0;for(var r=0;r<t.length;r++)if(Jo(e,t[r]))return!0;return!!Yo(e,t)}function Wo(e,t,n){return!!Jo(e,t)||!!Ko(t,e,n)}function qo(e,t){if(1===e.length)return Qo(t,e[0]);for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)if(Jo(e,r[i]))return!0;for(var o=0;o<e.length;o++)if(Qo(t,e[o]))return!0;for(var a=0;a<t.length;a++)if(Yo(e,t[a]))return!0;return!1}function Zo(e,t,n){if(e.length>1){if(Yo(e,t))return!0;for(var r=0;r<t.length;r++)if(Ko(t[r],e,n))return!0}for(var i=0;i<e.length;i++)if(Ko(e[i],t,n))return!0;return!1}function Yo(e,t){if(0===e.length||0===t.length)return!1;for(var n=0;n<e.length-1;n++)for(var r=e[n],i=e[n+1],o=0;o<t.length-1;o++)if(Xo(r,i,t[o],t[o+1]))return!0;return!1}function Xo(e,t,n,r){return E(e,n,r)!==E(t,n,r)&&E(e,t,n)!==E(e,t,r)}function Ko(e,t,n){var r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(var i=1;i<t.length;i++)if($o(e,t[i-1],t[i])<r)return!0;return!1}function $o(e,t,n){var r=t.distSqr(n);if(0===r)return e.distSqr(t);var i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return e.distSqr(i<0?t:i>1?n:n.sub(t)._mult(i)._add(t))}function Qo(e,t){for(var n,r,i,o=!1,a=0;a<e.length;a++)for(var s=0,u=(n=e[a]).length-1;s<n.length;u=s++)(r=n[s]).y>t.y!=(i=n[u]).y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(o=!o);return o}function Jo(e,t){for(var n=!1,r=0,i=e.length-1;r<e.length;i=r++){var o=e[r],a=e[i];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function ea(e,t,n){var r=n[0],i=n[2];if(e.x<r.x&&t.x<r.x||e.x>i.x&&t.x>i.x||e.y<r.y&&t.y<r.y||e.y>i.y&&t.y>i.y)return!1;var o=E(e,t,n[0]);return o!==E(e,t,n[1])||o!==E(e,t,n[2])||o!==E(e,t,n[3])}function ta(e,t,n){var r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).getMaxValue(e)}function na(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function ra(e,t,n,r,o){if(!t[0]&&!t[1])return e;var a=i.convert(t)._mult(o);"viewport"===n&&a._rotate(-r);for(var s=[],u=0;u<e.length;u++)s.push(e[u].sub(a));return s}Ho.prototype.populate=function(e,t,n){var r=this.layers[0],i=[],o=null;"circle"===r.type&&(o=r.layout.get("circle-sort-key"));for(var a=0,s=e;a<s.length;a+=1){var u=s[a],c=u.feature,l=u.id,f=u.index,p=u.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,d=Uo(c,h);if(this.layers[0]._featureFilter.filter(new si(this.zoom),d,n)){var v=o?o.evaluate(d,{},n):void 0,m={id:l,properties:c.properties,type:c.type,sourceLayerIndex:p,index:f,geometry:h?d.geometry:Bo(c),patterns:{},sortKey:v};i.push(m)}}o&&i.sort((function(e,t){return e.sortKey-t.sortKey}));for(var g=0,y=i;g<y.length;g+=1){var b=y[g],_=b.geometry,x=b.index,w=b.sourceLayerIndex,O=e[x].feature;this.addFeature(b,_,x,n),t.featureIndex.insert(O,_,x,w,this.index)}},Ho.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Ho.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ho.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ho.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ao),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Ho.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ho.prototype.addFeature=function(e,t,n,r){for(var i=0,o=t;i<o.length;i+=1)for(var a=0,s=o[i];a<s.length;a+=1){var u=s[a],c=u.x,l=u.y;if(!(c<0||c>=8192||l<0||l>=8192)){var f=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),p=f.vertexLength;Vo(this.layoutVertexArray,c,l,-1,-1),Vo(this.layoutVertexArray,c,l,1,-1),Vo(this.layoutVertexArray,c,l,1,1),Vo(this.layoutVertexArray,c,l,-1,1),this.indexArray.emplaceBack(p,p+1,p+2),this.indexArray.emplaceBack(p,p+3,p+2),f.vertexLength+=4,f.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},r)},Fr("CircleBucket",Ho,{omit:["layers"]});var ia=new xi({"circle-sort-key":new gi(Ce.layout_circle["circle-sort-key"])}),oa={paint:new xi({"circle-radius":new gi(Ce.paint_circle["circle-radius"]),"circle-color":new gi(Ce.paint_circle["circle-color"]),"circle-blur":new gi(Ce.paint_circle["circle-blur"]),"circle-opacity":new gi(Ce.paint_circle["circle-opacity"]),"circle-translate":new mi(Ce.paint_circle["circle-translate"]),"circle-translate-anchor":new mi(Ce.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new mi(Ce.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new mi(Ce.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new gi(Ce.paint_circle["circle-stroke-width"]),"circle-stroke-color":new gi(Ce.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new gi(Ce.paint_circle["circle-stroke-opacity"])}),layout:ia},aa="undefined"!=typeof Float32Array?Float32Array:Array;function sa(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ua(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],p=t[9],h=t[10],d=t[11],v=t[12],m=t[13],g=t[14],y=t[15],b=n[0],_=n[1],x=n[2],w=n[3];return e[0]=b*r+_*s+x*f+w*v,e[1]=b*i+_*u+x*p+w*m,e[2]=b*o+_*c+x*h+w*g,e[3]=b*a+_*l+x*d+w*y,e[4]=(b=n[4])*r+(_=n[5])*s+(x=n[6])*f+(w=n[7])*v,e[5]=b*i+_*u+x*p+w*m,e[6]=b*o+_*c+x*h+w*g,e[7]=b*a+_*l+x*d+w*y,e[8]=(b=n[8])*r+(_=n[9])*s+(x=n[10])*f+(w=n[11])*v,e[9]=b*i+_*u+x*p+w*m,e[10]=b*o+_*c+x*h+w*g,e[11]=b*a+_*l+x*d+w*y,e[12]=(b=n[12])*r+(_=n[13])*s+(x=n[14])*f+(w=n[15])*v,e[13]=b*i+_*u+x*p+w*m,e[14]=b*o+_*c+x*h+w*g,e[15]=b*a+_*l+x*d+w*y,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,n=arguments.length;n--;)t+=e[n]*e[n];return Math.sqrt(t)});var ca,la=ua;function fa(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}ca=new aa(3),aa!=Float32Array&&(ca[0]=0,ca[1]=0,ca[2]=0),function(){var e=new aa(4);aa!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var pa=(function(){var e=new aa(2);aa!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(t){e.call(this,t,oa)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(e){return new Ho(e)},t.prototype.queryRadius=function(e){var t=e;return ta("circle-radius",this,t)+ta("circle-stroke-width",this,t)+na(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,i,o,a,s){for(var u=ra(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),c=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n),l="map"===this.paint.get("circle-pitch-alignment"),f=l?u:function(e,t){return e.map((function(e){return ha(e,t)}))}(u,s),p=l?c*a:c,h=0,d=r;h<d.length;h+=1)for(var v=0,m=d[h];v<m.length;v+=1){var g=m[v],y=l?g:ha(g,s),b=p,_=fa([],[g.x,g.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?b*=_[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(b*=o.cameraToCenterDistance/_[3]),Wo(f,y,b))return!0}return!1},t}(wi));function ha(e,t){var n=fa([],[e.x,e.y,0,1],t);return new i(n[0]/n[3],n[1]/n[3])}var da=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Ho);function va(e,t,n,r){var i=t.width,o=t.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return e.width=i,e.height=o,e.data=r,e}function ma(e,t,n){var r=t.width,i=t.height;if(r!==e.width||i!==e.height){var o=va({},{width:r,height:i},n);ga(e,o,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,r),height:Math.min(e.height,i)},n),e.width=r,e.height=i,e.data=o.data}}function ga(e,t,n,r,i,o){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=e.data,s=t.data,u=0;u<i.height;u++)for(var c=((n.y+u)*e.width+n.x)*o,l=((r.y+u)*t.width+r.x)*o,f=0;f<i.width*o;f++)s[l+f]=a[c+f];return t}Fr("HeatmapBucket",da,{omit:["layers"]});var ya=function(e,t){va(this,e,1,t)};ya.prototype.resize=function(e){ma(this,e,1)},ya.prototype.clone=function(){return new ya({width:this.width,height:this.height},new Uint8Array(this.data))},ya.copy=function(e,t,n,r,i){ga(e,t,n,r,i,1)};var ba=function(e,t){va(this,e,4,t)};ba.prototype.resize=function(e){ma(this,e,4)},ba.prototype.replace=function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},ba.prototype.clone=function(){return new ba({width:this.width,height:this.height},new Uint8Array(this.data))},ba.copy=function(e,t,n,r,i){ga(e,t,n,r,i,4)},Fr("AlphaImage",ya),Fr("RGBAImage",ba);var _a={paint:new xi({"heatmap-radius":new gi(Ce.paint_heatmap["heatmap-radius"]),"heatmap-weight":new gi(Ce.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new mi(Ce.paint_heatmap["heatmap-intensity"]),"heatmap-color":new _i(Ce.paint_heatmap["heatmap-color"]),"heatmap-opacity":new mi(Ce.paint_heatmap["heatmap-opacity"])})};function xa(e){var t={},n=e.resolution||256,r=e.clips?e.clips.length:1,i=e.image||new ba({width:n,height:r}),o=function(n,r,o){t[e.evaluationKey]=o;var a=e.expression.evaluate(t);i.data[n+r+0]=Math.floor(255*a.r/a.a),i.data[n+r+1]=Math.floor(255*a.g/a.a),i.data[n+r+2]=Math.floor(255*a.b/a.a),i.data[n+r+3]=Math.floor(255*a.a)};if(e.clips)for(var a=0,s=0;a<r;++a,s+=4*n)for(var u=0,c=0;u<n;u++,c+=4){var l=u/(n-1),f=e.clips[a];o(s,c,f.start*(1-l)+f.end*l)}else for(var p=0,h=0;p<n;p++,h+=4)o(0,h,p/(n-1));return i}var wa=function(e){function t(t){e.call(this,t,_a),this._updateColorRamp()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(e){return new da(e)},t.prototype._handleSpecialPaintPropertyUpdate=function(e){"heatmap-color"===e&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=xa({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},t}(wi),Oa={paint:new xi({"hillshade-illumination-direction":new mi(Ce.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new mi(Ce.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new mi(Ce.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new mi(Ce.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new mi(Ce.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new mi(Ce.paint_hillshade["hillshade-accent-color"])})},Ea=function(e){function t(t){e.call(this,t,Oa)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},t}(wi),Sa=ji([{name:"a_pos",components:2,type:"Int16"}],4).members,ja=ka,Aa=ka;function ka(e,t,n){n=n||2;var r,i,o,a,s,u,c,l=t&&t.length,f=l?t[0]*n:e.length,p=Ca(e,0,f,n,!0),h=[];if(!p||p.next===p.prev)return h;if(l&&(p=function(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=Ca(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(Ba(a));for(s.sort(Da),i=0;i<s.length;i++)Na(s[i],n),n=Ta(n,n.next);return n}(e,t,p,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var d=n;d<f;d+=n)(s=e[d])<r&&(r=s),(u=e[d+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);c=0!==(c=Math.max(o-r,a-i))?1/c:0}return Ma(p,h,n,r,i,c),h}function Ca(e,t,n,r,i){var o,a;if(i===Ja(e,t,n,r)>0)for(o=t;o<n;o+=r)a=Ka(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=Ka(o,e[o],e[o+1],a);return a&&Ga(a,a.next)&&($a(a),a=a.next),a}function Ta(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Ga(r,r.next)&&0!==Ha(r.prev,r,r.next))r=r.next;else{if($a(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function Ma(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=za(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,u,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,o);for(var s,u,c=e;e.prev!==e.next;)if(s=e.prev,u=e.next,o?Ia(e,r,i,o):Pa(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),$a(e),e=u.next,c=u.next;else if((e=u)===c){a?1===a?Ma(e=Ra(Ta(e),t,n),t,n,r,i,o,2):2===a&&La(e,t,n,r,i,o):Ma(Ta(e),t,n,r,i,o,1);break}}}function Pa(e){var t=e.prev,n=e,r=e.next;if(Ha(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Ua(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Ha(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Ia(e,t,n,r){var i=e.prev,o=e,a=e.next;if(Ha(i,o,a)>=0)return!1;for(var s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,c=za(i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,t,n,r),l=za(s,u,t,n,r),f=e.prevZ,p=e.nextZ;f&&f.z>=c&&p&&p.z<=l;){if(f!==e.prev&&f!==e.next&&Ua(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Ha(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==e.prev&&p!==e.next&&Ua(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Ha(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==e.prev&&f!==e.next&&Ua(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Ha(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=l;){if(p!==e.prev&&p!==e.next&&Ua(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Ha(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Ra(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!Ga(i,o)&&Wa(i,r,r.next,o)&&Ya(i,o)&&Ya(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),$a(r),$a(r.next),r=e=o),r=r.next}while(r!==e);return Ta(r)}function La(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Va(a,s)){var u=Xa(a,s);return a=Ta(a,a.next),u=Ta(u,u.next),Ma(a,t,n,r,i,o),void Ma(u,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function Da(e,t){return e.x-t.x}function Na(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n;var u,c=n,l=n.x,f=n.y,p=1/0;r=n;do{i>=r.x&&r.x>=l&&i!==r.x&&Ua(o<f?i:a,o,l,f,o<f?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),Ya(r,e)&&(u<p||u===p&&(r.x>n.x||r.x===n.x&&Fa(n,r)))&&(n=r,p=u)),r=r.next}while(r!==c);return n}(e,t)){var n=Xa(t,e);Ta(t,t.next),Ta(n,n.next)}}function Fa(e,t){return Ha(e.prev,e,t.prev)<0&&Ha(t.next,e,e.next)<0}function za(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ba(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Ua(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Va(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Wa(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Ya(e,t)&&Ya(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Ha(e.prev,e,t.prev)||Ha(e,t.prev,t))||Ga(e,t)&&Ha(e.prev,e,e.next)>0&&Ha(t.prev,t,t.next)>0)}function Ha(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Ga(e,t){return e.x===t.x&&e.y===t.y}function Wa(e,t,n,r){var i=Za(Ha(e,t,n)),o=Za(Ha(e,t,r)),a=Za(Ha(n,r,e)),s=Za(Ha(n,r,t));return i!==o&&a!==s||!(0!==i||!qa(e,n,t))||!(0!==o||!qa(e,r,t))||!(0!==a||!qa(n,e,r))||!(0!==s||!qa(n,t,r))}function qa(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Za(e){return e>0?1:e<0?-1:0}function Ya(e,t){return Ha(e.prev,e,e.next)<0?Ha(e,t,e.next)>=0&&Ha(e,e.prev,t)>=0:Ha(e,t,e.prev)<0||Ha(e,e.next,t)<0}function Xa(e,t){var n=new Qa(e.i,e.x,e.y),r=new Qa(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Ka(e,t,n,r){var i=new Qa(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function $a(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Qa(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ja(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}function es(e,t,n,r,i){!function e(t,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,u=Math.log(a),c=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*c*(a-c)/a)*(s-a/2<0?-1:1);e(t,n,Math.max(r,Math.floor(n-s*c/a+l)),Math.min(i,Math.floor(n+(a-s)*c/a+l)),o)}var f=t[n],p=r,h=i;for(ts(t,r,n),o(t[i],f)>0&&ts(t,r,i);p<h;){for(ts(t,p,h),p++,h--;o(t[p],f)<0;)p++;for(;o(t[h],f)>0;)h--}0===o(t[r],f)?ts(t,r,h):ts(t,++h,i),h<=n&&(r=h+1),n<=h&&(i=h-1)}}(e,t,n||0,r||e.length-1,i||ns)}function ts(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function ns(e,t){return e<t?-1:e>t?1:0}function rs(e,t){var n=e.length;if(n<=1)return[e];for(var r,i,o=[],a=0;a<n;a++){var s=S(e[a]);0!==s&&(e[a].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(r&&o.push(r),r=[e[a]]):r.push(e[a]))}if(r&&o.push(r),t>1)for(var u=0;u<o.length;u++)o[u].length<=t||(es(o[u],t,1,o[u].length-1,is),o[u]=o[u].slice(0,t));return o}function is(e,t){return t.area-e.area}function os(e,t,n){for(var r=n.patternDependencies,i=!1,o=0,a=t;o<a.length;o+=1){var s=a[o].paint.get(e+"-pattern");s.isConstant()||(i=!0);var u=s.constantOr(null);u&&(i=!0,r[u.to]=!0,r[u.from]=!0)}return i}function as(e,t,n,r,i){for(var o=i.patternDependencies,a=0,s=t;a<s.length;a+=1){var u=s[a],c=u.paint.get(e+"-pattern").value;if("constant"!==c.kind){var l=c.evaluate({zoom:r-1},n,{},i.availableImages),f=c.evaluate({zoom:r},n,{},i.availableImages),p=c.evaluate({zoom:r+1},n,{},i.availableImages);f=f&&f.name?f.name:f,p=p&&p.name?p.name:p,o[l=l&&l.name?l.name:l]=!0,o[f]=!0,o[p]=!0,n.patterns[u.id]={min:l,mid:f,max:p}}}return n}ka.deviation=function(e,t,n,r){var i=t&&t.length,o=Math.abs(Ja(e,0,i?t[0]*n:e.length,n));if(i)for(var a=0,s=t.length;a<s;a++)o-=Math.abs(Ja(e,t[a]*n,a<s-1?t[a+1]*n:e.length,n));var u=0;for(a=0;a<r.length;a+=3){var c=r[a]*n,l=r[a+1]*n,f=r[a+2]*n;u+=Math.abs((e[c]-e[f])*(e[l+1]-e[c+1])-(e[c]-e[l])*(e[f+1]-e[c+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},ka.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&n.holes.push(r+=e[i-1].length)}return n},ja["default"]=Aa;var ss=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ki,this.indexArray=new Ui,this.indexArray2=new Zi,this.programConfigurations=new Lo(e.layers,e.zoom),this.segments=new so,this.segments2=new so,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};ss.prototype.populate=function(e,t,n){this.hasPattern=os("fill",this.layers,t);for(var r=this.layers[0].layout.get("fill-sort-key"),i=[],o=0,a=e;o<a.length;o+=1){var s=a[o],u=s.feature,c=s.id,l=s.index,f=s.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,h=Uo(u,p);if(this.layers[0]._featureFilter.filter(new si(this.zoom),h,n)){var d=r?r.evaluate(h,{},n,t.availableImages):void 0,v={id:c,properties:u.properties,type:u.type,sourceLayerIndex:f,index:l,geometry:p?h.geometry:Bo(u),patterns:{},sortKey:d};i.push(v)}}r&&i.sort((function(e,t){return e.sortKey-t.sortKey}));for(var m=0,g=i;m<g.length;m+=1){var y=g[m],b=y.geometry,_=y.index,x=y.sourceLayerIndex;if(this.hasPattern){var w=as("fill",this.layers,y,this.zoom,t);this.patternFeatures.push(w)}else this.addFeature(y,b,_,n,{});t.featureIndex.insert(e[_].feature,b,_,x,this.index)}},ss.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},ss.prototype.addFeatures=function(e,t,n){for(var r=0,i=this.patternFeatures;r<i.length;r+=1){var o=i[r];this.addFeature(o,o.geometry,o.index,t,n)}},ss.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ss.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ss.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Sa),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},ss.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ss.prototype.addFeature=function(e,t,n,r,i){for(var o=0,a=rs(t,500);o<a.length;o+=1){for(var s=a[o],u=0,c=0,l=s;c<l.length;c+=1)u+=l[c].length;for(var f=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray),p=f.vertexLength,h=[],d=[],v=0,m=s;v<m.length;v+=1){var g=m[v];if(0!==g.length){g!==s[0]&&d.push(h.length/2);var y=this.segments2.prepareSegment(g.length,this.layoutVertexArray,this.indexArray2),b=y.vertexLength;this.layoutVertexArray.emplaceBack(g[0].x,g[0].y),this.indexArray2.emplaceBack(b+g.length-1,b),h.push(g[0].x),h.push(g[0].y);for(var _=1;_<g.length;_++)this.layoutVertexArray.emplaceBack(g[_].x,g[_].y),this.indexArray2.emplaceBack(b+_-1,b+_),h.push(g[_].x),h.push(g[_].y);y.vertexLength+=g.length,y.primitiveLength+=g.length}}for(var x=ja(h,d),w=0;w<x.length;w+=3)this.indexArray.emplaceBack(p+x[w],p+x[w+1],p+x[w+2]);f.vertexLength+=u,f.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)},Fr("FillBucket",ss,{omit:["layers","patternFeatures"]});var us=new xi({"fill-sort-key":new gi(Ce.layout_fill["fill-sort-key"])}),cs={paint:new xi({"fill-antialias":new mi(Ce.paint_fill["fill-antialias"]),"fill-opacity":new gi(Ce.paint_fill["fill-opacity"]),"fill-color":new gi(Ce.paint_fill["fill-color"]),"fill-outline-color":new gi(Ce.paint_fill["fill-outline-color"]),"fill-translate":new mi(Ce.paint_fill["fill-translate"]),"fill-translate-anchor":new mi(Ce.paint_fill["fill-translate-anchor"]),"fill-pattern":new yi(Ce.paint_fill["fill-pattern"])}),layout:us},ls=function(e){function t(t){e.call(this,t,cs)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(t,n){e.prototype.recalculate.call(this,t,n);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(e){return new ss(e)},t.prototype.queryRadius=function(){return na(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,i,o,a){return qo(ra(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)},t.prototype.isTileClipped=function(){return!0},t}(wi),fs=ji([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,ps=hs;function hs(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(ds,this,t)}function ds(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function vs(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)r+=((n=e[a]).x-(t=e[i]).x)*(t.y+n.y);return r}hs.types=["Unknown","Point","LineString","Polygon"],hs.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,o=0,a=0,s=0,u=[];e.pos<n;){if(o<=0){var c=e.readVarint();r=7&c,o=c>>3}if(o--,1===r||2===r)a+=e.readSVarint(),s+=e.readSVarint(),1===r&&(t&&u.push(t),t=[]),t.push(new i(a,s));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&u.push(t),u},hs.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,c=-1/0;e.pos<t;){if(r<=0){var l=e.readVarint();n=7&l,r=l>>3}if(r--,1===n||2===n)(i+=e.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=e.readSVarint())<u&&(u=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,c]},hs.prototype.toGeoJSON=function(e,t,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*e,s=this.extent*t,u=this.loadGeometry(),c=hs.types[this.type];function l(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var f=[];for(r=0;r<u.length;r++)f[r]=u[r][0];l(u=f);break;case 2:for(r=0;r<u.length;r++)l(u[r]);break;case 3:for(u=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var a=vs(e[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}return n&&i.push(n),i}(u),r=0;r<u.length;r++)for(i=0;i<u[r].length;i++)l(u[r][i])}1===u.length?u=u[0]:c="Multi"+c;var p={type:"Feature",geometry:{type:c,coordinates:u},properties:this.properties};return"id"in this&&(p.id=this.id),p};var ms=gs;function gs(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(ys,this,t),this.length=this._features.length}function ys(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}function bs(e,t,n){if(3===e){var r=new ms(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}gs.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new ps(this._pbf,t,this.extent,this._keys,this._values)};var _s={VectorTile:function(e,t){this.layers=e.readFields(bs,{},t)},VectorTileFeature:ps,VectorTileLayer:ms},xs=_s.VectorTileFeature.types,ws=Math.pow(2,13);function Os(e,t,n,r,i,o,a,s){e.emplaceBack(t,n,2*Math.floor(r*ws)+a,i*ws*2,o*ws*2,Math.round(s))}var Es=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ti,this.indexArray=new Ui,this.programConfigurations=new Lo(e.layers,e.zoom),this.segments=new so,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};function Ss(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}Es.prototype.populate=function(e,t,n){this.features=[],this.hasPattern=os("fill-extrusion",this.layers,t);for(var r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.id,u=o.index,c=o.sourceLayerIndex,l=this.layers[0]._featureFilter.needGeometry,f=Uo(a,l);if(this.layers[0]._featureFilter.filter(new si(this.zoom),f,n)){var p={id:s,sourceLayerIndex:c,index:u,geometry:l?f.geometry:Bo(a),properties:a.properties,type:a.type,patterns:{}};this.hasPattern?this.features.push(as("fill-extrusion",this.layers,p,this.zoom,t)):this.addFeature(p,p.geometry,u,n,{}),t.featureIndex.insert(a,p.geometry,u,c,this.index,!0)}}},Es.prototype.addFeatures=function(e,t,n){for(var r=0,i=this.features;r<i.length;r+=1){var o=i[r];this.addFeature(o,o.geometry,o.index,t,n)}},Es.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Es.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Es.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Es.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,fs),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Es.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Es.prototype.addFeature=function(e,t,n,r,i){for(var o=0,a=rs(t,500);o<a.length;o+=1){for(var s=a[o],u=0,c=0,l=s;c<l.length;c+=1)u+=l[c].length;for(var f=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=0,h=s;p<h.length;p+=1){var d=h[p];if(0!==d.length&&!((P=d).every((function(e){return e.x<0}))||P.every((function(e){return e.x>8192}))||P.every((function(e){return e.y<0}))||P.every((function(e){return e.y>8192}))))for(var v=0,m=0;m<d.length;m++){var g=d[m];if(m>=1){var y=d[m-1];if(!Ss(g,y)){f.vertexLength+4>so.MAX_VERTEX_ARRAY_LENGTH&&(f=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var b=g.sub(y)._perp()._unit(),_=y.dist(g);v+_>32768&&(v=0),Os(this.layoutVertexArray,g.x,g.y,b.x,b.y,0,0,v),Os(this.layoutVertexArray,g.x,g.y,b.x,b.y,0,1,v),Os(this.layoutVertexArray,y.x,y.y,b.x,b.y,0,0,v+=_),Os(this.layoutVertexArray,y.x,y.y,b.x,b.y,0,1,v);var x=f.vertexLength;this.indexArray.emplaceBack(x,x+2,x+1),this.indexArray.emplaceBack(x+1,x+2,x+3),f.vertexLength+=4,f.primitiveLength+=2}}}}if(f.vertexLength+u>so.MAX_VERTEX_ARRAY_LENGTH&&(f=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray)),"Polygon"===xs[e.type]){for(var w=[],O=[],E=f.vertexLength,S=0,j=s;S<j.length;S+=1){var A=j[S];if(0!==A.length){A!==s[0]&&O.push(w.length/2);for(var k=0;k<A.length;k++){var C=A[k];Os(this.layoutVertexArray,C.x,C.y,0,0,1,1,0),w.push(C.x),w.push(C.y)}}}for(var T=ja(w,O),M=0;M<T.length;M+=3)this.indexArray.emplaceBack(E+T[M],E+T[M+2],E+T[M+1]);f.primitiveLength+=T.length/3,f.vertexLength+=u}}var P;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)},Fr("FillExtrusionBucket",Es,{omit:["layers","features"]});var js={paint:new xi({"fill-extrusion-opacity":new mi(Ce["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new gi(Ce["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new mi(Ce["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new mi(Ce["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new yi(Ce["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new gi(Ce["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new gi(Ce["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new mi(Ce["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},As=function(e){function t(t){e.call(this,t,js)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(e){return new Es(e)},t.prototype.queryRadius=function(){return na(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(e,t,n,r,o,a,s,u){var c=ra(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,s),l=this.paint.get("fill-extrusion-height").evaluate(t,n),f=this.paint.get("fill-extrusion-base").evaluate(t,n),p=function(e,t,n,r){for(var o=[],a=0,s=e;a<s.length;a+=1){var u=s[a],c=[u.x,u.y,0,1];fa(c,c,t),o.push(new i(c[0]/c[3],c[1]/c[3]))}return o}(c,u),h=function(e,t,n,r){for(var o=[],a=[],s=r[8]*t,u=r[9]*t,c=r[10]*t,l=r[11]*t,f=r[8]*n,p=r[9]*n,h=r[10]*n,d=r[11]*n,v=0,m=e;v<m.length;v+=1){for(var g=[],y=[],b=0,_=m[v];b<_.length;b+=1){var x=_[b],w=x.x,O=x.y,E=r[0]*w+r[4]*O+r[12],S=r[1]*w+r[5]*O+r[13],j=r[2]*w+r[6]*O+r[14],A=r[3]*w+r[7]*O+r[15],k=j+c,C=A+l,T=E+f,M=S+p,P=j+h,I=A+d,R=new i((E+s)/C,(S+u)/C);R.z=k/C,g.push(R);var L=new i(T/I,M/I);L.z=P/I,y.push(L)}o.push(g),a.push(y)}return[o,a]}(r,f,l,u);return function(e,t,n){var r=1/0;qo(n,t)&&(r=Cs(n,t[0]));for(var i=0;i<t.length;i++)for(var o=t[i],a=e[i],s=0;s<o.length-1;s++){var u=o[s],c=[u,o[s+1],a[s+1],a[s],u];Go(n,c)&&(r=Math.min(r,Cs(n,c)))}return r!==1/0&&r}(h[0],h[1],p)},t}(wi);function ks(e,t){return e.x*t.x+e.y*t.y}function Cs(e,t){if(1===e.length){for(var n,r=0,i=t[r++];!n||i.equals(n);)if(!(n=t[r++]))return 1/0;for(;r<t.length;r++){var o=t[r],a=e[0],s=n.sub(i),u=o.sub(i),c=a.sub(i),l=ks(s,s),f=ks(s,u),p=ks(u,u),h=ks(c,s),d=ks(c,u),v=l*p-f*f,m=(p*h-f*d)/v,g=(l*d-f*h)/v,y=i.z*(1-m-g)+n.z*m+o.z*g;if(isFinite(y))return y}return 1/0}for(var b=1/0,_=0,x=t;_<x.length;_+=1)b=Math.min(b,x[_].z);return b}var Ts=ji([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Ms=ji([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Ps=_s.VectorTileFeature.types,Is=Math.cos(Math.PI/180*37.5),Rs=Math.pow(2,14)/.5,Ls=function(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(e){t.gradients[e.id]={}})),this.layoutVertexArray=new Mi,this.layoutVertexArray2=new Pi,this.indexArray=new Ui,this.programConfigurations=new Lo(e.layers,e.zoom),this.segments=new so,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};Ls.prototype.populate=function(e,t,n){this.hasPattern=os("line",this.layers,t);for(var r=this.layers[0].layout.get("line-sort-key"),i=[],o=0,a=e;o<a.length;o+=1){var s=a[o],u=s.feature,c=s.id,l=s.index,f=s.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,h=Uo(u,p);if(this.layers[0]._featureFilter.filter(new si(this.zoom),h,n)){var d=r?r.evaluate(h,{},n):void 0,v={id:c,properties:u.properties,type:u.type,sourceLayerIndex:f,index:l,geometry:p?h.geometry:Bo(u),patterns:{},sortKey:d};i.push(v)}}r&&i.sort((function(e,t){return e.sortKey-t.sortKey}));for(var m=0,g=i;m<g.length;m+=1){var y=g[m],b=y.geometry,_=y.index,x=y.sourceLayerIndex;if(this.hasPattern){var w=as("line",this.layers,y,this.zoom,t);this.patternFeatures.push(w)}else this.addFeature(y,b,_,n,{});t.featureIndex.insert(e[_].feature,b,_,x,this.index)}},Ls.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Ls.prototype.addFeatures=function(e,t,n){for(var r=0,i=this.patternFeatures;r<i.length;r+=1){var o=i[r];this.addFeature(o,o.geometry,o.index,t,n)}},Ls.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ls.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ls.prototype.upload=function(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Ms)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ts),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Ls.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ls.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},Ls.prototype.addFeature=function(e,t,n,r,i){var o=this.layers[0].layout,a=o.get("line-join").evaluate(e,{}),s=o.get("line-cap"),u=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var l=0,f=t;l<f.length;l+=1)this.addLine(f[l],e,a,s,u,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)},Ls.prototype.addLine=function(e,t,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var a=0;a<e.length-1;a++)this.totalDistance+=e[a].dist(e[a+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===Ps[t.type],u=e.length;u>=2&&e[u-1].equals(e[u-2]);)u--;for(var c=0;c<u-1&&e[c].equals(e[c+1]);)c++;if(!(u<(s?3:2))){"bevel"===n&&(i=1.05);var l,f=this.overscaling<=16?122880/(512*this.overscaling):0,p=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray),h=void 0,d=void 0,v=void 0,m=void 0;this.e1=this.e2=-1,s&&(m=e[c].sub(l=e[u-2])._unit()._perp());for(var g=c;g<u;g++)if(!(d=g===u-1?s?e[c+1]:void 0:e[g+1])||!e[g].equals(d)){m&&(v=m),l&&(h=l),l=e[g],m=d?d.sub(l)._unit()._perp():v;var y=(v=v||m).add(m);0===y.x&&0===y.y||y._unit();var b=v.x*m.x+v.y*m.y,_=y.x*m.x+y.y*m.y,x=0!==_?1/_:1/0,w=2*Math.sqrt(2-2*_),O=_<Is&&h&&d,E=v.x*m.y-v.y*m.x>0;if(O&&g>c){var S=l.dist(h);if(S>2*f){var j=l.sub(l.sub(h)._mult(f/S)._round());this.updateDistance(h,j),this.addCurrentVertex(j,v,0,0,p),h=j}}var A=h&&d,k=A?n:s?"butt":r;if(A&&"round"===k&&(x<o?k="miter":x<=2&&(k="fakeround")),"miter"===k&&x>i&&(k="bevel"),"bevel"===k&&(x>2&&(k="flipbevel"),x<i&&(k="miter")),h&&this.updateDistance(h,l),"miter"===k)y._mult(x),this.addCurrentVertex(l,y,0,0,p);else if("flipbevel"===k){if(x>100)y=m.mult(-1);else{var C=x*v.add(m).mag()/v.sub(m).mag();y._perp()._mult(C*(E?-1:1))}this.addCurrentVertex(l,y,0,0,p),this.addCurrentVertex(l,y.mult(-1),0,0,p)}else if("bevel"===k||"fakeround"===k){var T=-Math.sqrt(x*x-1),M=E?T:0,P=E?0:T;if(h&&this.addCurrentVertex(l,v,M,P,p),"fakeround"===k)for(var I=Math.round(180*w/Math.PI/20),R=1;R<I;R++){var L=R/I;if(.5!==L){var D=L-.5;L+=L*D*(L-1)*((1.0904+b*(b*(3.55645-1.43519*b)-3.2452))*D*D+(.848013+b*(.215638*b-1.06021)))}var N=m.sub(v)._mult(L)._add(v)._unit()._mult(E?-1:1);this.addHalfVertex(l,N.x,N.y,!1,E,0,p)}d&&this.addCurrentVertex(l,m,-M,-P,p)}else if("butt"===k)this.addCurrentVertex(l,y,0,0,p);else if("square"===k){var F=h?1:-1;this.addCurrentVertex(l,y,F,F,p)}else"round"===k&&(h&&(this.addCurrentVertex(l,v,0,0,p),this.addCurrentVertex(l,v,1,1,p,!0)),d&&(this.addCurrentVertex(l,m,-1,-1,p,!0),this.addCurrentVertex(l,m,0,0,p)));if(O&&g<u-1){var z=l.dist(d);if(z>2*f){var B=l.add(d.sub(l)._mult(f/z)._round());this.updateDistance(l,B),this.addCurrentVertex(B,m,0,0,p),l=B}}}}},Ls.prototype.addCurrentVertex=function(e,t,n,r,i,o){void 0===o&&(o=!1);var a=t.y*r-t.x,s=-t.y-t.x*r;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,o,!1,n,i),this.addHalfVertex(e,a,s,o,!0,-r,i),this.distance>Rs/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(e,t,n,r,i,o))},Ls.prototype.addHalfVertex=function(e,t,n,r,i,o,a){var s=.5*(this.lineClips?this.scaledDistance*(Rs-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(r?1:0),(e.y<<1)+(i?1:0),Math.round(63*t)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1)|(63&s)<<2,s>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var u=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),a.primitiveLength++),i?this.e2=u:this.e1=u},Ls.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ls.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},Fr("LineBucket",Ls,{omit:["layers","patternFeatures"]});var Ds=new xi({"line-cap":new mi(Ce.layout_line["line-cap"]),"line-join":new gi(Ce.layout_line["line-join"]),"line-miter-limit":new mi(Ce.layout_line["line-miter-limit"]),"line-round-limit":new mi(Ce.layout_line["line-round-limit"]),"line-sort-key":new gi(Ce.layout_line["line-sort-key"])}),Ns={paint:new xi({"line-opacity":new gi(Ce.paint_line["line-opacity"]),"line-color":new gi(Ce.paint_line["line-color"]),"line-translate":new mi(Ce.paint_line["line-translate"]),"line-translate-anchor":new mi(Ce.paint_line["line-translate-anchor"]),"line-width":new gi(Ce.paint_line["line-width"]),"line-gap-width":new gi(Ce.paint_line["line-gap-width"]),"line-offset":new gi(Ce.paint_line["line-offset"]),"line-blur":new gi(Ce.paint_line["line-blur"]),"line-dasharray":new bi(Ce.paint_line["line-dasharray"]),"line-pattern":new yi(Ce.paint_line["line-pattern"]),"line-gradient":new _i(Ce.paint_line["line-gradient"])}),layout:Ds},Fs=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(t,n){return n=new si(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),e.prototype.possiblyEvaluate.call(this,t,n)},t.prototype.evaluate=function(t,n,r,i){return n=p({},n,{zoom:Math.floor(n.zoom)}),e.prototype.evaluate.call(this,t,n,r,i)},t}(gi))(Ns.paint.properties["line-width"].specification);Fs.useIntegerZoom=!0;var zs=function(e){function t(t){e.call(this,t,Ns),this.gradientVersion=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(e){"line-gradient"===e&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ht,this.gradientVersion=(this.gradientVersion+1)%s)},t.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},t.prototype.recalculate=function(t,n){e.prototype.recalculate.call(this,t,n),this.paint._values["line-floorwidth"]=Fs.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)},t.prototype.createBucket=function(e){return new Ls(e)},t.prototype.queryRadius=function(e){var t=e,n=Bs(ta("line-width",this,t),ta("line-gap-width",this,t)),r=ta("line-offset",this,t);return n/2+Math.abs(r)+na(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,o,a,s){var u=ra(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),c=s/2*Bs(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),l=this.paint.get("line-offset").evaluate(t,n);return l&&(r=function(e,t){for(var n=[],r=new i(0,0),o=0;o<e.length;o++){for(var a=e[o],s=[],u=0;u<a.length;u++){var c=a[u],l=a[u+1],f=0===u?r:c.sub(a[u-1])._unit()._perp(),p=u===a.length-1?r:l.sub(c)._unit()._perp(),h=f._add(p)._unit();h._mult(1/(h.x*p.x+h.y*p.y)),s.push(h._mult(t)._add(c))}n.push(s)}return n}(r,l*s)),function(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];if(e.length>=3)for(var o=0;o<i.length;o++)if(Jo(e,i[o]))return!0;if(Zo(e,i,n))return!0}return!1}(u,r,c)},t.prototype.isTileClipped=function(){return!0},t}(wi);function Bs(e,t){return t>0?t+2*e:e}var Us=ji([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Vs=ji([{name:"a_projected_pos",components:3,type:"Float32"}],4),Hs=(ji([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ji([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Gs=(ji([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),ji([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Ws=ji([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function qs(e,t,n){return e.sections.forEach((function(e){e.text=function(e,t,n){var r=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),ai.applyArabicShaping&&(e=ai.applyArabicShaping(e)),e}(e.text,t,n)})),e}ji([{name:"triangle",components:3,type:"Uint16"}]),ji([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ji([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ji([{type:"Float32",name:"offsetX"}]),ji([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Zs={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Ys=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,p=n?-1:1,h=e[t+f];for(f+=p,o=h&(1<<-l)-1,h>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=p,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=p,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=c}return(h?-1:1)*a*Math.pow(2,o-r)},Xs=function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,d=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?p/u:p*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+h]=255&a,h+=d,a/=256,c-=8);e[n+h-d]|=128*v},Ks=$s;function $s(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}$s.Varint=0,$s.Fixed64=1,$s.Bytes=2,$s.Fixed32=5;var Qs="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Js(e){return e.type===$s.Bytes?e.readVarint()+e.pos:e.pos+1}function eu(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function tu(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function nu(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function ru(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function iu(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function ou(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function au(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function su(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function uu(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function cu(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function lu(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function fu(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function pu(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function hu(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function du(e,t,n){1===e&&n.readMessage(vu,t)}function vu(e,t,n){if(3===e){var r=n.readMessage(mu,{}),i=r.width,o=r.height,a=r.left,s=r.top,u=r.advance;t.push({id:r.id,bitmap:new ya({width:i+6,height:o+6},r.bitmap),metrics:{width:i,height:o,left:a,top:s,advance:u}})}}function mu(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}function gu(e){for(var t=0,n=0,r=0,i=e;r<i.length;r+=1){var o=i[r];t+=o.w*o.h,n=Math.max(n,o.w)}e.sort((function(e,t){return t.h-e.h}));for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}],s=0,u=0,c=0,l=e;c<l.length;c+=1)for(var f=l[c],p=a.length-1;p>=0;p--){var h=a[p];if(!(f.w>h.w||f.h>h.h)){if(f.x=h.x,f.y=h.y,u=Math.max(u,f.y+f.h),s=Math.max(s,f.x+f.w),f.w===h.w&&f.h===h.h){var d=a.pop();p<a.length&&(a[p]=d)}else f.h===h.h?(h.x+=f.w,h.w-=f.w):f.w===h.w?(h.y+=f.h,h.h-=f.h):(a.push({x:h.x+f.w,y:h.y,w:h.w-f.w,h:f.h}),h.y+=f.h,h.h-=f.h);break}}return{w:s,h:u,fill:t/(s*u)||0}}$s.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=fu(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=hu(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=fu(this.buf,this.pos)+4294967296*fu(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=fu(this.buf,this.pos)+4294967296*hu(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=Ys(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Ys(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return eu(e,r,t);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return eu(e,r,t);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return eu(e,r,t);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return eu(e,r,t);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return eu(e,r,t);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return eu(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Qs?function(e,t,n){return Qs.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var r="",i=t;i<n;){var o,a,s,u=e[i],c=null,l=u>239?4:u>223?3:u>191?2:1;if(i+l>n)break;1===l?u<128&&(c=u):2===l?128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)<=127&&(c=null):3===l?(a=e[i+2],128==(192&(o=e[i+1]))&&128==(192&a)&&((c=(15&u)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===l&&(a=e[i+2],s=e[i+3],128==(192&(o=e[i+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,l=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=l}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==$s.Bytes)return e.push(this.readVarint(t));var n=Js(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==$s.Bytes)return e.push(this.readSVarint());var t=Js(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==$s.Bytes)return e.push(this.readBoolean());var t=Js(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==$s.Bytes)return e.push(this.readFloat());var t=Js(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==$s.Bytes)return e.push(this.readDouble());var t=Js(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==$s.Bytes)return e.push(this.readFixed32());var t=Js(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==$s.Bytes)return e.push(this.readSFixed32());var t=Js(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==$s.Bytes)return e.push(this.readFixed64());var t=Js(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==$s.Bytes)return e.push(this.readSFixed64());var t=Js(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===$s.Varint)for(;this.buf[this.pos++]>127;);else if(t===$s.Bytes)this.pos=this.readVarint()+this.pos;else if(t===$s.Fixed32)this.pos+=4;else{if(t!==$s.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),pu(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),pu(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),pu(this.buf,-1&e,this.pos),pu(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),pu(this.buf,-1&e,this.pos),pu(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,o=0;o<t.length;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&tu(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),Xs(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Xs(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&tu(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,$s.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,nu,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,ru,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,au,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,iu,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,ou,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,su,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,uu,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,cu,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,lu,t)},writeBytesField:function(e,t){this.writeTag(e,$s.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,$s.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,$s.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,$s.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,$s.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,$s.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,$s.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,$s.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,$s.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,$s.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var yu=function(e,t){var n=t.pixelRatio,r=t.version,i=t.stretchX,o=t.stretchY,a=t.content;this.paddedRect=e,this.pixelRatio=n,this.stretchX=i,this.stretchY=o,this.content=a,this.version=r},bu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};bu.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},bu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},bu.tlbr.get=function(){return this.tl.concat(this.br)},bu.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(yu.prototype,bu);var _u=function(e,t){var n={},r={};this.haveRenderCallbacks=[];var i=[];this.addImages(e,n,i),this.addImages(t,r,i);var o=gu(i),a=new ba({width:o.w||1,height:o.h||1});for(var s in e){var u=e[s],c=n[s].paddedRect;ba.copy(u.data,a,{x:0,y:0},{x:c.x+1,y:c.y+1},u.data)}for(var l in t){var f=t[l],p=r[l].paddedRect,h=p.x+1,d=p.y+1,v=f.data.width,m=f.data.height;ba.copy(f.data,a,{x:0,y:0},{x:h,y:d},f.data),ba.copy(f.data,a,{x:0,y:m-1},{x:h,y:d-1},{width:v,height:1}),ba.copy(f.data,a,{x:0,y:0},{x:h,y:d+m},{width:v,height:1}),ba.copy(f.data,a,{x:v-1,y:0},{x:h-1,y:d},{width:1,height:m}),ba.copy(f.data,a,{x:0,y:0},{x:h+v,y:d},{width:1,height:m})}this.image=a,this.iconPositions=n,this.patternPositions=r};_u.prototype.addImages=function(e,t,n){for(var r in e){var i=e[r],o={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(o),t[r]=new yu(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}},_u.prototype.patchUpdatedImages=function(e,t){for(var n in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)},_u.prototype.patchUpdatedImage=function(e,t,n){if(e&&t&&e.version!==t.version){e.version=t.version;var r=e.tl;n.update(t.data,void 0,{x:r[0],y:r[1]})}},Fr("ImagePosition",yu),Fr("ImageAtlas",_u);var xu={horizontal:1,vertical:2,horizontalOnly:3},wu=function(){this.scale=1,this.fontStack="",this.imageName=null};wu.forText=function(e,t){var n=new wu;return n.scale=e||1,n.fontStack=t,n},wu.forImage=function(e){var t=new wu;return t.imageName=e,t};var Ou=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Eu(e,t,n,r,i,o,a,s,u,c,l,f,p,h,d,v){var m,g=Ou.fromFeature(e,i);f===xu.vertical&&g.verticalizePunctuation();var y=ai.processBidirectionalText,b=ai.processStyledBidirectionalText;if(y&&1===g.sections.length){m=[];for(var _=0,x=y(g.toString(),Mu(g,c,o,t,r,h,d));_<x.length;_+=1){var w=x[_],O=new Ou;O.text=w,O.sections=g.sections;for(var E=0;E<w.length;E++)O.sectionIndex.push(0);m.push(O)}}else if(b){m=[];for(var S=0,j=b(g.text,g.sectionIndex,Mu(g,c,o,t,r,h,d));S<j.length;S+=1){var A=j[S],k=new Ou;k.text=A[0],k.sectionIndex=A[1],k.sections=g.sections,m.push(k)}}else m=function(e,t){for(var n=[],r=e.text,i=0,o=0,a=t;o<a.length;o+=1){var s=a[o];n.push(e.substring(i,s)),i=s}return i<r.length&&n.push(e.substring(i,r.length)),n}(g,Mu(g,c,o,t,r,h,d));var C=[],T={positionedLines:C,text:g.toString(),top:l[1],bottom:l[1],left:l[0],right:l[0],writingMode:f,iconsInText:!1,verticalizable:!1};return function(e,t,n,r,i,o,a,s,u,c,l,f){for(var p=0,h=-17,d=0,v=0,m="right"===s?1:"left"===s?0:.5,g=0,y=0,b=i;y<b.length;y+=1){var _=b[y];_.trim();var x=_.getMaxScale(),w=24*(x-1),O={positionedGlyphs:[],lineOffset:0};e.positionedLines[g]=O;var E=O.positionedGlyphs,S=0;if(_.length()){for(var j=0;j<_.length();j++){var A=_.getSection(j),k=_.getSectionIndex(j),C=_.getCharCode(j),T=0,M=null,P=null,I=null,R=24,L=!(u===xu.horizontal||!l&&!Zr(C)||l&&(Su[C]||(G=C,Wr.Arabic(G)||Wr["Arabic Supplement"](G)||Wr["Arabic Extended-A"](G)||Wr["Arabic Presentation Forms-A"](G)||Wr["Arabic Presentation Forms-B"](G))));if(A.imageName){var D=r[A.imageName];if(!D)continue;I=A.imageName,e.iconsInText=e.iconsInText||!0,P=D.paddedRect;var N=D.displaySize;A.scale=24*A.scale/f,T=w+(24-N[1]*A.scale),R=(M={width:N[0],height:N[1],left:1,top:-3,advance:L?N[1]:N[0]}).advance;var F=L?N[0]*A.scale-24*x:N[1]*A.scale-24*x;F>0&&F>S&&(S=F)}else{var z=n[A.fontStack],B=z&&z[C];if(B&&B.rect)P=B.rect,M=B.metrics;else{var U=t[A.fontStack],V=U&&U[C];if(!V)continue;M=V.metrics}T=24*(x-A.scale)}L?(e.verticalizable=!0,E.push({glyph:C,imageName:I,x:p,y:h+T,vertical:L,scale:A.scale,fontStack:A.fontStack,sectionIndex:k,metrics:M,rect:P}),p+=R*A.scale+c):(E.push({glyph:C,imageName:I,x:p,y:h+T,vertical:L,scale:A.scale,fontStack:A.fontStack,sectionIndex:k,metrics:M,rect:P}),p+=M.advance*A.scale+c)}0!==E.length&&(d=Math.max(p-c,d),Iu(E,0,E.length-1,m,S)),p=0;var H=o*x+S;O.lineOffset=Math.max(S,w),h+=H,v=Math.max(H,v),++g}else h+=o,++g}var G,W=h- -17,q=Pu(a),Z=q.horizontalAlign,Y=q.verticalAlign;(function(e,t,n,r,i,o,a,s,u){var c,l=(t-n)*i;c=o!==a?-s*r- -17:(-r*u+.5)*a;for(var f=0,p=e;f<p.length;f+=1)for(var h=0,d=p[f].positionedGlyphs;h<d.length;h+=1){var v=d[h];v.x+=l,v.y+=c}})(e.positionedLines,m,Z,Y,d,v,o,W,i.length),e.top+=-Y*W,e.bottom=e.top+W,e.left+=-Z*d,e.right=e.left+d}(T,t,n,r,m,a,s,u,f,c,p,v),!function(e){for(var t=0,n=e;t<n.length;t+=1)if(0!==n[t].positionedGlyphs.length)return!1;return!0}(C)&&T}Ou.fromFeature=function(e,t){for(var n=new Ou,r=0;r<e.sections.length;r++){var i=e.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,t)}return n},Ou.prototype.length=function(){return this.text.length},Ou.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},Ou.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},Ou.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},Ou.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n+1)||null,i=e.charCodeAt(n-1)||null;t+=r&&Yr(r)&&!Zs[e[n+1]]||i&&Yr(i)&&!Zs[e[n-1]]||!Zs[e[n]]?e[n]:Zs[e[n]]}return t}(this.text)},Ou.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&Su[this.text.charCodeAt(t)];t++)e++;for(var n=this.text.length,r=this.text.length-1;r>=0&&r>=e&&Su[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)},Ou.prototype.substring=function(e,t){var n=new Ou;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n},Ou.prototype.toString=function(){return this.text},Ou.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce((function(t,n){return Math.max(t,e.sections[n].scale)}),0)},Ou.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(wu.forText(e.scale,e.fontStack||t));for(var n=this.sections.length-1,r=0;r<e.text.length;++r)this.sectionIndex.push(n)},Ou.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";if(0!==t.length){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(wu.forImage(t)),this.sectionIndex.push(this.sections.length-1)):O("Reached maximum number of images 6401")}else O("Can't add FormattedSection with an empty image.")},Ou.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Su={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ju={};function Au(e,t,n,r,i,o){if(t.imageName){var a=r[t.imageName];return a?a.displaySize[0]*t.scale*24/o+i:0}var s=n[t.fontStack],u=s&&s[e];return u?u.metrics.advance*t.scale+i:0}function ku(e,t,n,r){var i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function Cu(e,t,n){var r=0;return 10===e&&(r-=1e4),n&&(r+=150),40!==e&&65288!==e||(r+=50),41!==t&&65289!==t||(r+=50),r}function Tu(e,t,n,r,i,o){for(var a=null,s=ku(t,n,i,o),u=0,c=r;u<c.length;u+=1){var l=c[u],f=ku(t-l.x,n,i,o)+l.badness;f<=s&&(a=l,s=f)}return{index:e,x:t,priorBreak:a,badness:s}}function Mu(e,t,n,r,i,o,a){if("point"!==o)return[];if(!e)return[];for(var s,u=[],c=function(e,t,n,r,i,o){for(var a=0,s=0;s<e.length();s++){var u=e.getSection(s);a+=Au(e.getCharCode(s),u,r,i,t,o)}return a/Math.max(1,Math.ceil(a/n))}(e,t,n,r,i,a),l=e.text.indexOf("\u200b")>=0,f=0,p=0;p<e.length();p++){var h=e.getSection(p),d=e.getCharCode(p);if(Su[d]||(f+=Au(d,h,r,i,t,a)),p<e.length()-1){var v=!((s=d)<11904||!(Wr["Bopomofo Extended"](s)||Wr.Bopomofo(s)||Wr["CJK Compatibility Forms"](s)||Wr["CJK Compatibility Ideographs"](s)||Wr["CJK Compatibility"](s)||Wr["CJK Radicals Supplement"](s)||Wr["CJK Strokes"](s)||Wr["CJK Symbols and Punctuation"](s)||Wr["CJK Unified Ideographs Extension A"](s)||Wr["CJK Unified Ideographs"](s)||Wr["Enclosed CJK Letters and Months"](s)||Wr["Halfwidth and Fullwidth Forms"](s)||Wr.Hiragana(s)||Wr["Ideographic Description Characters"](s)||Wr["Kangxi Radicals"](s)||Wr["Katakana Phonetic Extensions"](s)||Wr.Katakana(s)||Wr["Vertical Forms"](s)||Wr["Yi Radicals"](s)||Wr["Yi Syllables"](s)));(ju[d]||v||h.imageName)&&u.push(Tu(p+1,f,c,u,Cu(d,e.getCharCode(p+1),v&&l),!1))}}return function e(t){return t?e(t.priorBreak).concat(t.index):[]}(Tu(e.length(),f,c,u,0,!0))}function Pu(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function Iu(e,t,n,r,i){if(r||i)for(var o=e[n],a=(e[n].x+o.metrics.advance*o.scale)*r,s=t;s<=n;s++)e[s].x-=a,e[s].y+=i}function Ru(e,t,n,r,i,o){var a,s=e.image;if(s.content){var u=s.content,c=s.pixelRatio||1;a=[u[0]/c,u[1]/c,s.displaySize[0]-u[2]/c,s.displaySize[1]-u[3]/c]}var l,f,p,h,d=t.left*o,v=t.right*o;"width"===n||"both"===n?(h=i[0]+d-r[3],f=i[0]+v+r[1]):f=(h=i[0]+(d+v-s.displaySize[0])/2)+s.displaySize[0];var m=t.top*o,g=t.bottom*o;return"height"===n||"both"===n?(l=i[1]+m-r[0],p=i[1]+g+r[2]):p=(l=i[1]+(m+g-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:l,right:f,bottom:p,left:h,collisionPadding:a}}ju[10]=!0,ju[32]=!0,ju[38]=!0,ju[40]=!0,ju[41]=!0,ju[43]=!0,ju[45]=!0,ju[47]=!0,ju[173]=!0,ju[183]=!0,ju[8203]=!0,ju[8208]=!0,ju[8211]=!0,ju[8231]=!0;var Lu=function(e){function t(t,n,r,i){e.call(this,t,n),this.angle=r,void 0!==i&&(this.segment=i)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(i);function Du(e,t){var n=t.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new si(e+1))};if("source"===n.kind)return{kind:"source"};for(var r=n.zoomStops,i=n.interpolationType,o=0;o<r.length&&r[o]<=e;)o++;for(var a=o=Math.max(0,o-1);a<r.length&&r[a]<e+1;)a++;a=Math.min(r.length-1,a);var s=r[o],u=r[a];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:u,interpolationType:i}:{kind:"camera",minZoom:s,maxZoom:u,minSize:n.evaluate(new si(s)),maxSize:n.evaluate(new si(u)),interpolationType:i}}function Nu(e,t,n){var r=t.uSize,i=n.lowerSize;return"source"===e.kind?i/128:"composite"===e.kind?Gt(i/128,n.upperSize/128,t.uSizeT):r}function Fu(e,t){var n=0,r=0;if("constant"===e.kind)r=e.layoutSize;else if("source"!==e.kind){var i=e.interpolationType,o=i?l(an.interpolationFactor(i,t,e.minZoom,e.maxZoom),0,1):0;"camera"===e.kind?r=Gt(e.minSize,e.maxSize,o):n=o}return{uSizeT:n,uSize:r}}Fr("Anchor",Lu);var zu=Object.freeze({__proto__:null,getSizeData:Du,evaluateSizeForFeature:Nu,evaluateSizeForZoom:Fu,SIZE_PACK_FACTOR:128});function Bu(e,t,n,r,i){if(void 0===t.segment)return!0;for(var o=t,a=t.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;for(var u=[],c=0;s<n/2;){var l=e[a],f=e[a+1];if(!f)return!1;var p=e[a-1].angleTo(l)-l.angleTo(f);for(p=Math.abs((p+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:p}),c+=p;s-u[0].distance>r;)c-=u.shift().angleDelta;if(c>i)return!1;a++,s+=l.dist(f)}return!0}function Uu(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function Vu(e,t,n){return e?.6*t*n:0}function Hu(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Gu(e,t,n,r,i,o){for(var a=Vu(n,i,o),s=Hu(n,r)*o,u=0,c=Uu(e)/2,l=0;l<e.length-1;l++){var f=e[l],p=e[l+1],h=f.dist(p);if(u+h>c){var d=(c-u)/h,v=Gt(f.x,p.x,d),m=Gt(f.y,p.y,d),g=new Lu(v,m,p.angleTo(f),l);return g._round(),!a||Bu(e,g,s,a,t)?g:void 0}u+=h}}function Wu(e,t,n,r,i,o,a,s,u){var c=Vu(r,o,a),l=Hu(r,i),f=l*a,p=0===e[0].x||e[0].x===u||0===e[0].y||e[0].y===u;return t-f<t/4&&(t=f+t/4),function e(t,n,r,i,o,a,s,u,c){for(var l=a/2,f=Uu(t),p=0,h=n-r,d=[],v=0;v<t.length-1;v++){for(var m=t[v],g=t[v+1],y=m.dist(g),b=g.angleTo(m);h+r<p+y;){var _=((h+=r)-p)/y,x=Gt(m.x,g.x,_),w=Gt(m.y,g.y,_);if(x>=0&&x<c&&w>=0&&w<c&&h-l>=0&&h+l<=f){var O=new Lu(x,w,b,v);O._round(),i&&!Bu(t,O,a,i,o)||d.push(O)}}p+=y}return u||d.length||s||(d=e(t,p/2,r,i,o,a,s,!0,c)),d}(e,p?t/2*s%t:(l/2+2*o)*a*s%t,t,c,n,f,p,!1,u)}function qu(e,t,n,r,o){for(var a=[],s=0;s<e.length;s++)for(var u=e[s],c=void 0,l=0;l<u.length-1;l++){var f=u[l],p=u[l+1];f.x<t&&p.x<t||(f.x<t?f=new i(t,f.y+(t-f.x)/(p.x-f.x)*(p.y-f.y))._round():p.x<t&&(p=new i(t,f.y+(t-f.x)/(p.x-f.x)*(p.y-f.y))._round()),f.y<n&&p.y<n||(f.y<n?f=new i(f.x+(n-f.y)/(p.y-f.y)*(p.x-f.x),n)._round():p.y<n&&(p=new i(f.x+(n-f.y)/(p.y-f.y)*(p.x-f.x),n)._round()),f.x>=r&&p.x>=r||(f.x>=r?f=new i(r,f.y+(r-f.x)/(p.x-f.x)*(p.y-f.y))._round():p.x>=r&&(p=new i(r,f.y+(r-f.x)/(p.x-f.x)*(p.y-f.y))._round()),f.y>=o&&p.y>=o||(f.y>=o?f=new i(f.x+(o-f.y)/(p.y-f.y)*(p.x-f.x),o)._round():p.y>=o&&(p=new i(f.x+(o-f.y)/(p.y-f.y)*(p.x-f.x),o)._round()),c&&f.equals(c[c.length-1])||a.push(c=[f]),c.push(p)))))}return a}function Zu(e,t,n,r){var o=[],a=e.image,s=a.pixelRatio,u=a.paddedRect.w-2,c=a.paddedRect.h-2,l=e.right-e.left,f=e.bottom-e.top,p=a.stretchX||[[0,u]],h=a.stretchY||[[0,c]],d=function(e,t){return e+t[1]-t[0]},v=p.reduce(d,0),m=h.reduce(d,0),g=u-v,y=c-m,b=0,_=v,x=0,w=m,O=0,E=g,S=0,j=y;if(a.content&&r){var A=a.content;b=Yu(p,0,A[0]),x=Yu(h,0,A[1]),_=Yu(p,A[0],A[2]),w=Yu(h,A[1],A[3]),O=A[0]-b,S=A[1]-x,E=A[2]-A[0]-_,j=A[3]-A[1]-w}var k=function(r,o,u,c){var p=Ku(r.stretch-b,_,l,e.left),h=$u(r.fixed-O,E,r.stretch,v),d=Ku(o.stretch-x,w,f,e.top),g=$u(o.fixed-S,j,o.stretch,m),y=Ku(u.stretch-b,_,l,e.left),A=$u(u.fixed-O,E,u.stretch,v),k=Ku(c.stretch-x,w,f,e.top),C=$u(c.fixed-S,j,c.stretch,m),T=new i(p,d),M=new i(y,d),P=new i(y,k),I=new i(p,k),R=new i(h/s,g/s),L=new i(A/s,C/s),D=t*Math.PI/180;if(D){var N=Math.sin(D),F=Math.cos(D),z=[F,-N,N,F];T._matMult(z),M._matMult(z),I._matMult(z),P._matMult(z)}var B=r.stretch+r.fixed,U=o.stretch+o.fixed;return{tl:T,tr:M,bl:I,br:P,tex:{x:a.paddedRect.x+1+B,y:a.paddedRect.y+1+U,w:u.stretch+u.fixed-B,h:c.stretch+c.fixed-U},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:R,pixelOffsetBR:L,minFontScaleX:E/s/l,minFontScaleY:j/s/f,isSDF:n}};if(r&&(a.stretchX||a.stretchY))for(var C=Xu(p,g,v),T=Xu(h,y,m),M=0;M<C.length-1;M++)for(var P=C[M],I=C[M+1],R=0;R<T.length-1;R++)o.push(k(P,T[R],I,T[R+1]));else o.push(k({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:u+1},{fixed:0,stretch:c+1}));return o}function Yu(e,t,n){for(var r=0,i=0,o=e;i<o.length;i+=1){var a=o[i];r+=Math.max(t,Math.min(n,a[1]))-Math.max(t,Math.min(n,a[0]))}return r}function Xu(e,t,n){for(var r=[{fixed:-1,stretch:0}],i=0,o=e;i<o.length;i+=1){var a=o[i],s=a[0],u=a[1],c=r[r.length-1];r.push({fixed:s-c.stretch,stretch:c.stretch}),r.push({fixed:s-c.stretch,stretch:c.stretch+(u-s)})}return r.push({fixed:t+1,stretch:n}),r}function Ku(e,t,n,r){return e/t*n+r}function $u(e,t,n,r){return e-t*n/r}var Qu=function(e,t,n,r,o,a,s,u,c,l){if(this.boxStartIndex=e.length,c){var f=a.top,p=a.bottom,h=a.collisionPadding;h&&(f-=h[1],p+=h[3]);var d=p-f;d>0&&(d=Math.max(10,d),this.circleDiameter=d)}else{var v=a.top*s-u,m=a.bottom*s+u,g=a.left*s-u,y=a.right*s+u,b=a.collisionPadding;if(b&&(g-=b[0]*s,v-=b[1]*s,y+=b[2]*s,m+=b[3]*s),l){var _=new i(g,v),x=new i(y,v),w=new i(g,m),O=new i(y,m),E=l*Math.PI/180;_._rotate(E),x._rotate(E),w._rotate(E),O._rotate(E),g=Math.min(_.x,x.x,w.x,O.x),y=Math.max(_.x,x.x,w.x,O.x),v=Math.min(_.y,x.y,w.y,O.y),m=Math.max(_.y,x.y,w.y,O.y)}e.emplaceBack(t.x,t.y,g,v,y,m,n,r,o)}this.boxEndIndex=e.length},Ju=function(e,t){if(void 0===e&&(e=[]),void 0===t&&(t=ec),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};function ec(e,t){return e<t?-1:e>t?1:0}function tc(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!1);for(var r=1/0,o=1/0,a=-1/0,s=-1/0,u=e[0],c=0;c<u.length;c++){var l=u[c];(!c||l.x<r)&&(r=l.x),(!c||l.y<o)&&(o=l.y),(!c||l.x>a)&&(a=l.x),(!c||l.y>s)&&(s=l.y)}var f=Math.min(a-r,s-o),p=f/2,h=new Ju([],nc);if(0===f)return new i(r,o);for(var d=r;d<a;d+=f)for(var v=o;v<s;v+=f)h.push(new rc(d+p,v+p,p,e));for(var m=function(e){for(var t=0,n=0,r=0,i=e[0],o=0,a=i.length,s=a-1;o<a;s=o++){var u=i[o],c=i[s],l=u.x*c.y-c.x*u.y;n+=(u.x+c.x)*l,r+=(u.y+c.y)*l,t+=3*l}return new rc(n/t,r/t,0,e)}(e),g=h.length;h.length;){var y=h.pop();(y.d>m.d||!m.d)&&(m=y,n&&console.log("found best %d after %d probes",Math.round(1e4*y.d)/1e4,g)),y.max-m.d<=t||(h.push(new rc(y.p.x-(p=y.h/2),y.p.y-p,p,e)),h.push(new rc(y.p.x+p,y.p.y-p,p,e)),h.push(new rc(y.p.x-p,y.p.y+p,p,e)),h.push(new rc(y.p.x+p,y.p.y+p,p,e)),g+=4)}return n&&(console.log("num probes: "+g),console.log("best distance: "+m.d)),m.p}function nc(e,t){return t.max-e.max}function rc(e,t,n,r){this.p=new i(e,t),this.h=n,this.d=function(e,t){for(var n=!1,r=1/0,i=0;i<t.length;i++)for(var o=t[i],a=0,s=o.length,u=s-1;a<s;u=a++){var c=o[a],l=o[u];c.y>e.y!=l.y>e.y&&e.x<(l.x-c.x)*(e.y-c.y)/(l.y-c.y)+c.x&&(n=!n),r=Math.min(r,$o(e,c,l))}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}Ju.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},Ju.prototype.pop=function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},Ju.prototype.peek=function(){return this.data[0]},Ju.prototype._up=function(e){for(var t=this.data,n=this.compare,r=t[e];e>0;){var i=e-1>>1,o=t[i];if(n(r,o)>=0)break;t[e]=o,e=i}t[e]=r},Ju.prototype._down=function(e){for(var t=this.data,n=this.compare,r=this.length>>1,i=t[e];e<r;){var o=1+(e<<1),a=t[o],s=o+1;if(s<this.length&&n(t[s],a)<0&&(o=s,a=t[s]),n(a,i)>=0)break;t[e]=a,e=o}t[e]=i};var ic=Number.POSITIVE_INFINITY;function oc(e,t){return t[1]!==ic?function(e,t,n){var r=0,i=0;switch(t=Math.abs(t),n=Math.abs(n),e){case"top-right":case"top-left":case"top":i=n-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-n}switch(e){case"top-right":case"bottom-right":case"right":r=-t;break;case"top-left":case"bottom-left":case"left":r=t}return[r,i]}(e,t[0],t[1]):function(e,t){var n=0,r=0;t<0&&(t=0);var i=t/Math.sqrt(2);switch(e){case"top-right":case"top-left":r=i-7;break;case"bottom-right":case"bottom-left":r=7-i;break;case"bottom":r=7-t;break;case"top":r=t-7}switch(e){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=t;break;case"right":n=-t}return[n,r]}(e,t[0])}function ac(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function sc(e,t,n,r,o,a,s,u,c,l,f,p,h,d,v){var m=function(e,t,n,r,o,a,s,u){for(var c=r.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,l=[],f=0,p=t.positionedLines;f<p.length;f+=1)for(var h=p[f],d=0,v=h.positionedGlyphs;d<v.length;d+=1){var m=v[d];if(m.rect){var g=m.rect||{},y=4,b=!0,_=1,x=0,w=(o||u)&&m.vertical,O=m.metrics.advance*m.scale/2;if(u&&t.verticalizable&&(x=h.lineOffset/2-(m.imageName?-(24-m.metrics.width*m.scale)/2:24*(m.scale-1))),m.imageName){var E=s[m.imageName];b=E.sdf,y=1/(_=E.pixelRatio)}var S=o?[m.x+O,m.y]:[0,0],j=o?[0,0]:[m.x+O+n[0],m.y+n[1]-x],A=[0,0];w&&(A=j,j=[0,0]);var k=(m.metrics.left-y)*m.scale-O+j[0],C=(-m.metrics.top-y)*m.scale+j[1],T=k+g.w*m.scale/_,M=C+g.h*m.scale/_,P=new i(k,C),I=new i(T,C),R=new i(k,M),L=new i(T,M);if(w){var D=new i(-O,O- -17),N=-Math.PI/2,F=12-O,z=new i(22-F,-(m.imageName?F:0)),B=new(Function.prototype.bind.apply(i,[null].concat(A)));P._rotateAround(N,D)._add(z)._add(B),I._rotateAround(N,D)._add(z)._add(B),R._rotateAround(N,D)._add(z)._add(B),L._rotateAround(N,D)._add(z)._add(B)}if(c){var U=Math.sin(c),V=Math.cos(c),H=[V,-U,U,V];P._matMult(H),I._matMult(H),R._matMult(H),L._matMult(H)}var G=new i(0,0),W=new i(0,0);l.push({tl:P,tr:I,bl:R,br:L,tex:g,writingMode:t.writingMode,glyphOffset:S,sectionIndex:m.sectionIndex,isSDF:b,pixelOffsetTL:G,pixelOffsetBR:W,minFontScaleX:0,minFontScaleY:0})}}return l}(0,n,u,o,a,s,r,e.allowVerticalPlacement),g=e.textSizeData,y=null;"source"===g.kind?(y=[128*o.layout.get("text-size").evaluate(s,{})])[0]>32640&&O(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===g.kind&&((y=[128*d.compositeTextSizes[0].evaluate(s,{},v),128*d.compositeTextSizes[1].evaluate(s,{},v)])[0]>32640||y[1]>32640)&&O(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,m,y,u,a,s,l,t,c.lineStartIndex,c.lineLength,h,v);for(var b=0,_=f;b<_.length;b+=1)p[_[b]]=e.text.placedSymbolArray.length-1;return 4*m.length}function uc(e){for(var t in e)return e[t];return null}function cc(e,t,n,r){var i=e.compareText;if(t in i){for(var o=i[t],a=o.length-1;a>=0;a--)if(r.dist(o[a])<n)return!0}else i[t]=[];return i[t].push(r),!1}var lc=_s.VectorTileFeature.types,fc=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function pc(e,t,n,r,i,o,a,s,u,c,l,f,p){var h=s?Math.min(32640,Math.round(s[0])):0,d=s?Math.min(32640,Math.round(s[1])):0;e.emplaceBack(t,n,Math.round(32*r),Math.round(32*i),o,a,(h<<1)+(u?1:0),d,16*c,16*l,256*f,256*p)}function hc(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}function dc(e){for(var t=0,n=e.sections;t<n.length;t+=1)if($r(n[t].text))return!0;return!1}var vc=function(e){this.layoutVertexArray=new Ri,this.indexArray=new Ui,this.programConfigurations=e,this.segments=new so,this.dynamicLayoutVertexArray=new Li,this.opacityVertexArray=new Di,this.placedSymbolArray=new Ji};vc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},vc.prototype.upload=function(e,t,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Us.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Vs.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,fc,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(e))},vc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Fr("SymbolBuffers",vc);var mc=function(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new so,this.collisionVertexArray=new Bi};mc.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Hs.members,!0)},mc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Fr("CollisionBuffers",mc);var gc=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=sa([]),this.placementViewportMatrix=sa([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Du(this.zoom,t["text-size"]),this.iconSizeData=Du(this.zoom,t["icon-size"]);var n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===n.get("symbol-placement")&&(this.writingModes=n.get("text-writing-mode").map((function(e){return xu[e]}))),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.sourceID=e.sourceID};gc.prototype.createArrays=function(){this.text=new vc(new Lo(this.layers,this.zoom,(function(e){return/^text/.test(e)}))),this.icon=new vc(new Lo(this.layers,this.zoom,(function(e){return/^icon/.test(e)}))),this.glyphOffsetArray=new no,this.lineVertexArray=new ro,this.symbolInstances=new to},gc.prototype.calculateGlyphDependencies=function(e,t,n,r,i){for(var o=0;o<e.length;o++)if(t[e.charCodeAt(o)]=!0,(n||r)&&i){var a=Zs[e.charAt(o)];a&&(t[a.charCodeAt(0)]=!0)}},gc.prototype.populate=function(e,t,n){var r=this.layers[0],i=r.layout,o=i.get("text-font"),a=i.get("text-field"),s=i.get("icon-image"),u=("constant"!==a.value.kind||a.value.value instanceof rt&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),c="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,l=i.get("symbol-sort-key");if(this.features=[],u||c){for(var f=t.iconDependencies,p=t.glyphDependencies,h=t.availableImages,d=new si(this.zoom),v=0,m=e;v<m.length;v+=1){var g=m[v],y=g.feature,b=g.id,_=g.index,x=g.sourceLayerIndex,w=r._featureFilter.needGeometry,O=Uo(y,w);if(r._featureFilter.filter(d,O,n)){w||(O.geometry=Bo(y));var E=void 0;if(u){var S=r.getValueAndResolveTokens("text-field",O,n,h),j=rt.factory(S);dc(j)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===ii()||this.hasRTLText&&ai.isParsed())&&(E=qs(j,r,O))}var A=void 0;if(c){var k=r.getValueAndResolveTokens("icon-image",O,n,h);A=k instanceof it?k:it.fromString(k)}if(E||A){var C=this.sortFeaturesByKey?l.evaluate(O,{},n):void 0;if(this.features.push({id:b,text:E,icon:A,index:_,sourceLayerIndex:x,geometry:O.geometry,properties:y.properties,type:lc[y.type],sortKey:C}),A&&(f[A.name]=!0),E){var T=o.evaluate(O,{},n).join(","),M="map"===i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(xu.vertical)>=0;for(var P=0,I=E.sections;P<I.length;P+=1){var R=I[P];if(R.image)f[R.image.name]=!0;else{var L=qr(E.toString()),D=R.fontStack||T,N=p[D]=p[D]||{};this.calculateGlyphDependencies(R.text,N,M,this.allowVerticalPlacement,L)}}}}}}"line"===i.get("symbol-placement")&&(this.features=function(e){var t={},n={},r=[],i=0;function o(t){r.push(e[t]),i++}function a(e,t,i){var o=n[e];return delete n[e],n[t]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(e,n,i){var o=t[n];return delete t[n],t[e]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function u(e,t,n){var r=n?t[0][t[0].length-1]:t[0][0];return e+":"+r.x+":"+r.y}for(var c=0;c<e.length;c++){var l=e[c],f=l.geometry,p=l.text?l.text.toString():null;if(p){var h=u(p,f),d=u(p,f,!0);if(h in n&&d in t&&n[h]!==t[d]){var v=s(h,d,f),m=a(h,d,r[v].geometry);delete t[h],delete n[d],n[u(p,r[m].geometry,!0)]=m,r[v].geometry=null}else h in n?a(h,d,f):d in t?s(h,d,f):(o(c),t[h]=i-1,n[d]=i-1)}else o(c)}return r.filter((function(e){return e.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(e,t){return e.sortKey-t.sortKey}))}},gc.prototype.update=function(e,t,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n))},gc.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},gc.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},gc.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},gc.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},gc.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},gc.prototype.addToLineVertexArray=function(e,t){var n=this.lineVertexArray.length;if(void 0!==e.segment){for(var r=e.dist(t[e.segment+1]),i=e.dist(t[e.segment]),o={},a=e.segment+1;a<t.length;a++)o[a]={x:t[a].x,y:t[a].y,tileUnitDistanceFromAnchor:r},a<t.length-1&&(r+=t[a+1].dist(t[a]));for(var s=e.segment||0;s>=0;s--)o[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=t[s-1].dist(t[s]));for(var u=0;u<t.length;u++){var c=o[u];this.lineVertexArray.emplaceBack(c.x,c.y,c.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},gc.prototype.addSymbols=function(e,t,n,r,i,o,a,s,u,c,l,f){for(var p=e.indexArray,h=e.layoutVertexArray,d=e.segments.prepareSegment(4*t.length,h,p,this.canOverlap?o.sortKey:void 0),v=this.glyphOffsetArray.length,m=d.vertexLength,g=this.allowVerticalPlacement&&a===xu.vertical?Math.PI/2:0,y=o.text&&o.text.sections,b=0;b<t.length;b++){var _=t[b],x=_.tl,w=_.tr,O=_.bl,E=_.br,S=_.tex,j=_.pixelOffsetTL,A=_.pixelOffsetBR,k=_.minFontScaleX,C=_.minFontScaleY,T=_.glyphOffset,M=_.isSDF,P=_.sectionIndex,I=d.vertexLength,R=T[1];pc(h,s.x,s.y,x.x,R+x.y,S.x,S.y,n,M,j.x,j.y,k,C),pc(h,s.x,s.y,w.x,R+w.y,S.x+S.w,S.y,n,M,A.x,j.y,k,C),pc(h,s.x,s.y,O.x,R+O.y,S.x,S.y+S.h,n,M,j.x,A.y,k,C),pc(h,s.x,s.y,E.x,R+E.y,S.x+S.w,S.y+S.h,n,M,A.x,A.y,k,C),hc(e.dynamicLayoutVertexArray,s,g),p.emplaceBack(I,I+1,I+2),p.emplaceBack(I+1,I+2,I+3),d.vertexLength+=4,d.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(T[0]),b!==t.length-1&&P===t[b+1].sectionIndex||e.programConfigurations.populatePaintArrays(h.length,o,o.index,{},f,y&&y[P])}e.placedSymbolArray.emplaceBack(s.x,s.y,v,this.glyphOffsetArray.length-v,m,u,c,s.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,0,!1,0,l)},gc.prototype._addCollisionDebugVertex=function(e,t,n,r,i,o){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,r,i,Math.round(o.x),Math.round(o.y))},gc.prototype.addCollisionDebugVertices=function(e,t,n,r,o,a,s){var u=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),c=u.vertexLength,l=o.layoutVertexArray,f=o.collisionVertexArray,p=s.anchorX,h=s.anchorY;this._addCollisionDebugVertex(l,f,a,p,h,new i(e,t)),this._addCollisionDebugVertex(l,f,a,p,h,new i(n,t)),this._addCollisionDebugVertex(l,f,a,p,h,new i(n,r)),this._addCollisionDebugVertex(l,f,a,p,h,new i(e,r)),u.vertexLength+=4;var d=o.indexArray;d.emplaceBack(c,c+1),d.emplaceBack(c+1,c+2),d.emplaceBack(c+2,c+3),d.emplaceBack(c+3,c),u.primitiveLength+=4},gc.prototype.addDebugCollisionBoxes=function(e,t,n,r){for(var i=e;i<t;i++){var o=this.collisionBoxArray.get(i);this.addCollisionDebugVertices(o.x1,o.y1,o.x2,o.y2,r?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,n)}},gc.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new mc(Fi,Gs.members,Zi),this.iconCollisionBox=new mc(Fi,Gs.members,Zi);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},gc.prototype._deserializeCollisionBoxesForSymbol=function(e,t,n,r,i,o,a,s,u){for(var c={},l=t;l<n;l++){var f=e.get(l);c.textBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,anchorPointX:f.anchorPointX,anchorPointY:f.anchorPointY},c.textFeatureIndex=f.featureIndex;break}for(var p=r;p<i;p++){var h=e.get(p);c.verticalTextBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,anchorPointX:h.anchorPointX,anchorPointY:h.anchorPointY},c.verticalTextFeatureIndex=h.featureIndex;break}for(var d=o;d<a;d++){var v=e.get(d);c.iconBox={x1:v.x1,y1:v.y1,x2:v.x2,y2:v.y2,anchorPointX:v.anchorPointX,anchorPointY:v.anchorPointY},c.iconFeatureIndex=v.featureIndex;break}for(var m=s;m<u;m++){var g=e.get(m);c.verticalIconBox={x1:g.x1,y1:g.y1,x2:g.x2,y2:g.y2,anchorPointX:g.anchorPointX,anchorPointY:g.anchorPointY},c.verticalIconFeatureIndex=g.featureIndex;break}return c},gc.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}},gc.prototype.hasTextData=function(){return this.text.segments.get().length>0},gc.prototype.hasIconData=function(){return this.icon.segments.get().length>0},gc.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},gc.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},gc.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},gc.prototype.addIndicesForPlacedSymbol=function(e,t){for(var n=e.placedSymbolArray.get(t),r=n.vertexStartIndex+4*n.numGlyphs,i=n.vertexStartIndex;i<r;i+=4)e.indexArray.emplaceBack(i,i+1,i+2),e.indexArray.emplaceBack(i+1,i+2,i+3)},gc.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var t=Math.sin(e),n=Math.cos(e),r=[],i=[],o=[],a=0;a<this.symbolInstances.length;++a){o.push(a);var s=this.symbolInstances.get(a);r.push(0|Math.round(t*s.anchorX+n*s.anchorY)),i.push(s.featureIndex)}return o.sort((function(e,t){return r[e]-r[t]||i[t]-i[e]})),o},gc.prototype.addToSortKeyRanges=function(e,t){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},gc.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var n=0,r=this.symbolInstanceIndexes;n<r.length;n+=1){var i=this.symbolInstances.get(r[n]);this.featureSortOrder.push(i.featureIndex),[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach((function(e,n,r){e>=0&&r.indexOf(e)===n&&t.addIndicesForPlacedSymbol(t.text,e)})),i.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,i.verticalPlacedTextSymbolIndex),i.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,i.placedIconSymbolIndex),i.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,i.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Fr("SymbolBucket",gc,{omit:["layers","collisionBoxArray","features","compareText"]}),gc.MAX_GLYPHS=65535,gc.addDynamicAttributes=hc;var yc=new xi({"symbol-placement":new mi(Ce.layout_symbol["symbol-placement"]),"symbol-spacing":new mi(Ce.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new mi(Ce.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new gi(Ce.layout_symbol["symbol-sort-key"]),"symbol-z-order":new mi(Ce.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new mi(Ce.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new mi(Ce.layout_symbol["icon-ignore-placement"]),"icon-optional":new mi(Ce.layout_symbol["icon-optional"]),"icon-rotation-alignment":new mi(Ce.layout_symbol["icon-rotation-alignment"]),"icon-size":new gi(Ce.layout_symbol["icon-size"]),"icon-text-fit":new mi(Ce.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new mi(Ce.layout_symbol["icon-text-fit-padding"]),"icon-image":new gi(Ce.layout_symbol["icon-image"]),"icon-rotate":new gi(Ce.layout_symbol["icon-rotate"]),"icon-padding":new mi(Ce.layout_symbol["icon-padding"]),"icon-keep-upright":new mi(Ce.layout_symbol["icon-keep-upright"]),"icon-offset":new gi(Ce.layout_symbol["icon-offset"]),"icon-anchor":new gi(Ce.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new mi(Ce.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new mi(Ce.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new mi(Ce.layout_symbol["text-rotation-alignment"]),"text-field":new gi(Ce.layout_symbol["text-field"]),"text-font":new gi(Ce.layout_symbol["text-font"]),"text-size":new gi(Ce.layout_symbol["text-size"]),"text-max-width":new gi(Ce.layout_symbol["text-max-width"]),"text-line-height":new mi(Ce.layout_symbol["text-line-height"]),"text-letter-spacing":new gi(Ce.layout_symbol["text-letter-spacing"]),"text-justify":new gi(Ce.layout_symbol["text-justify"]),"text-radial-offset":new gi(Ce.layout_symbol["text-radial-offset"]),"text-variable-anchor":new mi(Ce.layout_symbol["text-variable-anchor"]),"text-anchor":new gi(Ce.layout_symbol["text-anchor"]),"text-max-angle":new mi(Ce.layout_symbol["text-max-angle"]),"text-writing-mode":new mi(Ce.layout_symbol["text-writing-mode"]),"text-rotate":new gi(Ce.layout_symbol["text-rotate"]),"text-padding":new mi(Ce.layout_symbol["text-padding"]),"text-keep-upright":new mi(Ce.layout_symbol["text-keep-upright"]),"text-transform":new gi(Ce.layout_symbol["text-transform"]),"text-offset":new gi(Ce.layout_symbol["text-offset"]),"text-allow-overlap":new mi(Ce.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new mi(Ce.layout_symbol["text-ignore-placement"]),"text-optional":new mi(Ce.layout_symbol["text-optional"])}),bc={paint:new xi({"icon-opacity":new gi(Ce.paint_symbol["icon-opacity"]),"icon-color":new gi(Ce.paint_symbol["icon-color"]),"icon-halo-color":new gi(Ce.paint_symbol["icon-halo-color"]),"icon-halo-width":new gi(Ce.paint_symbol["icon-halo-width"]),"icon-halo-blur":new gi(Ce.paint_symbol["icon-halo-blur"]),"icon-translate":new mi(Ce.paint_symbol["icon-translate"]),"icon-translate-anchor":new mi(Ce.paint_symbol["icon-translate-anchor"]),"text-opacity":new gi(Ce.paint_symbol["text-opacity"]),"text-color":new gi(Ce.paint_symbol["text-color"],{runtimeType:Ue,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new gi(Ce.paint_symbol["text-halo-color"]),"text-halo-width":new gi(Ce.paint_symbol["text-halo-width"]),"text-halo-blur":new gi(Ce.paint_symbol["text-halo-blur"]),"text-translate":new mi(Ce.paint_symbol["text-translate"]),"text-translate-anchor":new mi(Ce.paint_symbol["text-translate-anchor"])}),layout:yc},_c=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:Ne,this.defaultValue=e};_c.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification["default"]},_c.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},_c.prototype.outputDefined=function(){return!1},_c.prototype.serialize=function(){return null},Fr("FormatSectionOverride",_c,{omit:["defaultValue"]});var xc=function(e){function t(t){e.call(this,t,bc)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(t,n){if(e.prototype.recalculate.call(this,t,n),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var r=this.layout.get("text-writing-mode");if(r){for(var i=[],o=0,a=r;o<a.length;o+=1){var s=a[o];i.indexOf(s)<0&&i.push(s)}this.layout._values["text-writing-mode"]=i}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(e,t,n,r){var i=this.layout.get(e).evaluate(t,{},n,r),o=this._unevaluatedLayout._values[e];return o.isDataDriven()||qn(o.value)||!i?i:function(e,t){return t.replace(/{([^{}]+)}/g,(function(t,n){return n in e?String(e[n]):""}))}(t.properties,i)},t.prototype.createBucket=function(e){return new gc(e)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(var e=0,n=bc.paint.overridableProperties;e<n.length;e+=1){var r=n[e];if(t.hasPaintOverride(this.layout,r)){var i,o=this.paint.get(r),a=new _c(o),s=new Wn(a,o.property.specification);i="constant"===o.value.kind||"source"===o.value.kind?new Yn("source",s):new Xn("composite",s,o.value.zoomStops,o.value._interpolationType),this.paint._values[r]=new di(o.property,i,o.parameters)}}},t.prototype._handleOverridablePaintPropertyUpdate=function(e,n,r){return!(!this.layout||n.isDataDriven()||r.isDataDriven())&&t.hasPaintOverride(this.layout,e)},t.hasPaintOverride=function(e,t){var n=e.get("text-field"),r=bc.paint.properties[t],i=!1,o=function(e){for(var t=0,n=e;t<n.length;t+=1)if(r.overrides&&r.overrides.hasOverride(n[t]))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof rt)o(n.value.value.sections);else if("source"===n.value.kind){var a=function e(t){i||(t instanceof ct&&st(t.value)===We?o(t.value.sections):t instanceof ht?o(t.sections):t.eachChild(e))},s=n.value;s._styleExpression&&a(s._styleExpression.expression)}return i},t}(wi),wc={paint:new xi({"background-color":new mi(Ce.paint_background["background-color"]),"background-pattern":new bi(Ce.paint_background["background-pattern"]),"background-opacity":new mi(Ce.paint_background["background-opacity"])})},Oc=function(e){function t(t){e.call(this,t,wc)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(wi),Ec={paint:new xi({"raster-opacity":new mi(Ce.paint_raster["raster-opacity"]),"raster-hue-rotate":new mi(Ce.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new mi(Ce.paint_raster["raster-brightness-min"]),"raster-brightness-max":new mi(Ce.paint_raster["raster-brightness-max"]),"raster-saturation":new mi(Ce.paint_raster["raster-saturation"]),"raster-contrast":new mi(Ce.paint_raster["raster-contrast"]),"raster-resampling":new mi(Ce.paint_raster["raster-resampling"]),"raster-fade-duration":new mi(Ce.paint_raster["raster-fade-duration"])})},Sc=function(e){function t(t){e.call(this,t,Ec)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(wi),jc=function(e){function t(t){e.call(this,t,{}),this.implementation=t}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},t.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},t.prototype.onRemove=function(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)},t}(wi),Ac={circle:pa,heatmap:wa,hillshade:Ea,fill:ls,"fill-extrusion":As,line:zs,symbol:xc,background:Oc,raster:Sc},kc=a.HTMLImageElement,Cc=a.HTMLCanvasElement,Tc=a.HTMLVideoElement,Mc=a.ImageData,Pc=a.ImageBitmap,Ic=function(e,t,n,r){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,r)};Ic.prototype.update=function(e,t,n){var r=e.width,i=e.height,o=!(this.size&&this.size[0]===r&&this.size[1]===i||n),a=this.context,s=a.gl;if(this.useMipmap=Boolean(t&&t.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!t||!1!==t.premultiply)),o)this.size=[r,i],e instanceof kc||e instanceof Cc||e instanceof Tc||e instanceof Mc||Pc&&e instanceof Pc?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,r,i,0,this.format,s.UNSIGNED_BYTE,e.data);else{var u=n||{x:0,y:0},c=u.x,l=u.y;e instanceof kc||e instanceof Cc||e instanceof Tc||e instanceof Mc||Pc&&e instanceof Pc?s.texSubImage2D(s.TEXTURE_2D,0,c,l,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,c,l,r,i,s.RGBA,s.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},Ic.prototype.bind=function(e,t,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),e!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),this.wrap=t)},Ic.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Ic.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Rc=function(e){var t=this;this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};Rc.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){e._triggered=!1,e._callback()}),0))},Rc.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Lc=function(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},g(["receive","process"],this),this.invoker=new Rc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=j()?e:a};function Dc(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}Lc.prototype.send=function(e,t,n,r,i){var o=this;void 0===i&&(i=!1);var a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[a]=n);var s=C(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:e,hasCallback:!!n,targetMapId:r,mustQueue:i,sourceMapId:this.mapId,data:Vr(t,s)},s),{cancel:function(){n&&delete o.callbacks[a],o.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:o.mapId})}}},Lc.prototype.receive=function(e){var t=e.data,n=t.id;if(n&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){delete this.tasks[n];var r=this.cancelCallbacks[n];delete this.cancelCallbacks[n],r&&r()}else j()||t.mustQueue?(this.tasks[n]=t,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,t)},Lc.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},Lc.prototype.processTask=function(e,t){var n=this;if("<response>"===t.type){var r=this.callbacks[e];delete this.callbacks[e],r&&(t.error?r(Hr(t.error)):r(null,Hr(t.data)))}else{var i=!1,o=C(this.globalScope)?void 0:[],a=t.hasCallback?function(t,r){i=!0,delete n.cancelCallbacks[e],n.target.postMessage({id:e,type:"<response>",sourceMapId:n.mapId,error:t?Vr(t):null,data:Vr(r,o)},o)}:function(e){i=!0},s=null,u=Hr(t.data);if(this.parent[t.type])s=this.parent[t.type](t.sourceMapId,u,a);else if(this.parent.getWorkerSource){var c=t.type.split(".");s=this.parent.getWorkerSource(t.sourceMapId,c[0],u.source)[c[1]](u,a)}else a(new Error("Could not find function "+t.type));!i&&s&&s.cancel&&(this.cancelCallbacks[e]=s.cancel)}},Lc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Nc=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};Nc.prototype.setNorthEast=function(e){return this._ne=e instanceof Fc?new Fc(e.lng,e.lat):Fc.convert(e),this},Nc.prototype.setSouthWest=function(e){return this._sw=e instanceof Fc?new Fc(e.lng,e.lat):Fc.convert(e),this},Nc.prototype.extend=function(e){var t,n,r=this._sw,i=this._ne;if(e instanceof Fc)t=e,n=e;else{if(!(e instanceof Nc))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(Nc.convert(e)):this.extend(Fc.convert(e)):this;if(n=e._ne,!(t=e._sw)||!n)return this}return r||i?(r.lng=Math.min(t.lng,r.lng),r.lat=Math.min(t.lat,r.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new Fc(t.lng,t.lat),this._ne=new Fc(n.lng,n.lat)),this},Nc.prototype.getCenter=function(){return new Fc((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Nc.prototype.getSouthWest=function(){return this._sw},Nc.prototype.getNorthEast=function(){return this._ne},Nc.prototype.getNorthWest=function(){return new Fc(this.getWest(),this.getNorth())},Nc.prototype.getSouthEast=function(){return new Fc(this.getEast(),this.getSouth())},Nc.prototype.getWest=function(){return this._sw.lng},Nc.prototype.getSouth=function(){return this._sw.lat},Nc.prototype.getEast=function(){return this._ne.lng},Nc.prototype.getNorth=function(){return this._ne.lat},Nc.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Nc.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Nc.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Nc.prototype.contains=function(e){var t=Fc.convert(e),n=t.lng,r=t.lat,i=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&i},Nc.convert=function(e){return!e||e instanceof Nc?e:new Nc(e)};var Fc=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Fc.prototype.wrap=function(){return new Fc(f(this.lng,-180,180),this.lat)},Fc.prototype.toArray=function(){return[this.lng,this.lat]},Fc.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Fc.prototype.distanceTo=function(e){var t=Math.PI/180,n=this.lat*t,r=e.lat*t,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((e.lng-this.lng)*t);return 6371008.8*Math.acos(Math.min(i,1))},Fc.prototype.toBounds=function(e){void 0===e&&(e=0);var t=360*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new Nc(new Fc(this.lng-n,this.lat-t),new Fc(this.lng+n,this.lat+t))},Fc.convert=function(e){if(e instanceof Fc)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Fc(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Fc(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var zc=2*Math.PI*6371008.8;function Bc(e){return zc*Math.cos(e*Math.PI/180)}function Uc(e){return(180+e)/360}function Vc(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Hc(e,t){return e/Bc(t)}function Gc(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var Wc=function(e,t,n){void 0===n&&(n=0),this.x=+e,this.y=+t,this.z=+n};Wc.fromLngLat=function(e,t){void 0===t&&(t=0);var n=Fc.convert(e);return new Wc(Uc(n.lng),Vc(n.lat),Hc(t,n.lat))},Wc.prototype.toLngLat=function(){return new Fc(360*this.x-180,Gc(this.y))},Wc.prototype.toAltitude=function(){return this.z*Bc(Gc(this.y))},Wc.prototype.meterInMercatorCoordinateUnits=function(){return 1/zc*(e=Gc(this.y),1/Math.cos(e*Math.PI/180));var e};var qc=function(e,t,n){this.z=e,this.x=t,this.y=n,this.key=Xc(0,e,e,t,n)};qc.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},qc.prototype.url=function(e,t){var n,r,i,o,a,s=(r=this.y,i=this.z,o=Dc(256*(n=this.x),256*(r=Math.pow(2,i)-r-1),i),a=Dc(256*(n+1),256*(r+1),i),o[0]+","+o[1]+","+a[0]+","+a[1]),u=function(e,t,n){for(var r,i="",o=e;o>0;o--)i+=(t&(r=1<<o-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)},qc.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new i(8192*(e.x*t-this.x),8192*(e.y*t-this.y))},qc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Zc=function(e,t){this.wrap=e,this.canonical=t,this.key=Xc(e,t.z,t.z,t.x,t.y)},Yc=function(e,t,n,r,i){this.overscaledZ=e,this.wrap=t,this.canonical=new qc(n,+r,+i),this.key=Xc(t,e,n,r,i)};function Xc(e,t,n,r,i){(e*=2)<0&&(e=-1*e-1);var o=1<<n;return(o*o*e+o*i+r).toString(36)+n.toString(36)+t.toString(36)}Yc.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Yc.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new Yc(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Yc(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},Yc.prototype.calculateScaledKey=function(e,t){var n=this.canonical.z-e;return e>this.canonical.z?Xc(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):Xc(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)},Yc.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},Yc.prototype.children=function(e){if(this.overscaledZ>=e)return[new Yc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new Yc(t,this.wrap,t,n,r),new Yc(t,this.wrap,t,n+1,r),new Yc(t,this.wrap,t,n,r+1),new Yc(t,this.wrap,t,n+1,r+1)]},Yc.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Yc.prototype.wrapped=function(){return new Yc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Yc.prototype.unwrapTo=function(e){return new Yc(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Yc.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Yc.prototype.toUnwrapped=function(){return new Zc(this.wrap,this.canonical)},Yc.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Yc.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new Wc(e.x-this.wrap,e.y))},Fr("CanonicalTileID",qc),Fr("OverscaledTileID",Yc,{omit:["posMatrix"]});var Kc=function(e,t,n){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return O('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var r=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=n||"mapbox";for(var i=0;i<r;i++)this.data[this._idx(-1,i)]=this.data[this._idx(0,i)],this.data[this._idx(r,i)]=this.data[this._idx(r-1,i)],this.data[this._idx(i,-1)]=this.data[this._idx(i,0)],this.data[this._idx(i,r)]=this.data[this._idx(i,r-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(r,-1)]=this.data[this._idx(r-1,0)],this.data[this._idx(-1,r)]=this.data[this._idx(0,r-1)],this.data[this._idx(r,r)]=this.data[this._idx(r-1,r-1)]};Kc.prototype.get=function(e,t){var n=new Uint8Array(this.data.buffer),r=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[r],n[r+1],n[r+2])},Kc.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Kc.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},Kc.prototype._unpackMapbox=function(e,t,n){return(256*e*256+256*t+n)/10-1e4},Kc.prototype._unpackTerrarium=function(e,t,n){return 256*e+t+n/256-32768},Kc.prototype.getPixels=function(){return new ba({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Kc.prototype.backfillBorder=function(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var r=t*this.dim,i=t*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(t){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}for(var s=-t*this.dim,u=-n*this.dim,c=o;c<a;c++)for(var l=r;l<i;l++)this.data[this._idx(l,c)]=e.data[this._idx(l+s,c+u)]},Fr("DEMData",Kc);var $c=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}};$c.prototype.encode=function(e){return this._stringToNumber[e]},$c.prototype.decode=function(e){return this._numberToString[e]};var Qc=function(e,t,n,r,i){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=r,this.properties=e.properties,this.id=i},Jc={geometry:{configurable:!0}};Jc.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Jc.geometry.set=function(e){this._geometry=e},Qc.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e},Object.defineProperties(Qc.prototype,Jc);var el=function(){this.state={},this.stateChanges={},this.deletedStates={}};el.prototype.updateState=function(e,t,n){var r=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},p(this.stateChanges[e][r],n),null===this.deletedStates[e])for(var i in this.deletedStates[e]={},this.state[e])i!==r&&(this.deletedStates[e][i]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][r])for(var o in this.deletedStates[e][r]={},this.state[e][r])n[o]||(this.deletedStates[e][r][o]=null);else for(var a in n)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][a]&&delete this.deletedStates[e][r][a]},el.prototype.removeFeatureState=function(e,t,n){if(null!==this.deletedStates[e]){var r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(n in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][n]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}},el.prototype.getState=function(e,t){var n=String(t),r=p({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){var i=this.deletedStates[e][t];if(null===i)return{};for(var o in i)delete r[o]}return r},el.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},el.prototype.coalesceChanges=function(e,t){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var o in this.stateChanges[r])this.state[r][o]||(this.state[r][o]={}),p(this.state[r][o],this.stateChanges[r][o]),i[o]=this.state[r][o];n[r]=i}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a])for(var u in this.state[a])s[u]={},this.state[a][u]={};else for(var c in this.deletedStates[a]){if(null===this.deletedStates[a][c])this.state[a][c]={};else for(var l=0,f=Object.keys(this.deletedStates[a][c]);l<f.length;l+=1)delete this.state[a][c][f[l]];s[c]=this.state[a][c]}n[a]=n[a]||{},p(n[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var h in e)e[h].setFeatureState(n,t)};var tl=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Ir(8192,16,0),this.grid3D=new Ir(8192,16,0),this.featureIndexArray=new oo,this.promoteId=t};function nl(e,t,n,r,i){return b(e,(function(e,o){var a=t instanceof vi?t.get(o):null;return a&&a.evaluate?a.evaluate(n,r,i):a}))}function rl(e){for(var t=1/0,n=1/0,r=-1/0,i=-1/0,o=0,a=e;o<a.length;o+=1){var s=a[o];t=Math.min(t,s.x),n=Math.min(n,s.y),r=Math.max(r,s.x),i=Math.max(i,s.y)}return{minX:t,minY:n,maxX:r,maxY:i}}function il(e,t){return t-e}tl.prototype.insert=function(e,t,n,r,i,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var s=o?this.grid3D:this.grid,u=0;u<t.length;u++){for(var c=t[u],l=[1/0,1/0,-1/0,-1/0],f=0;f<c.length;f++){var p=c[f];l[0]=Math.min(l[0],p.x),l[1]=Math.min(l[1],p.y),l[2]=Math.max(l[2],p.x),l[3]=Math.max(l[3],p.y)}l[0]<8192&&l[1]<8192&&l[2]>=0&&l[3]>=0&&s.insert(a,l[0],l[1],l[2],l[3])}},tl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new _s.VectorTile(new Ks(this.rawTileData)).layers,this.sourceLayerCoder=new $c(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},tl.prototype.query=function(e,t,n,r){var o=this;this.loadVTLayers();for(var a=e.params||{},s=8192/e.tileSize/e.scale,u=ar(a.filter),c=e.queryGeometry,l=e.queryPadding*s,f=rl(c),p=this.grid.query(f.minX-l,f.minY-l,f.maxX+l,f.maxY+l),h=rl(e.cameraQueryGeometry),d=this.grid3D.query(h.minX-l,h.minY-l,h.maxX+l,h.maxY+l,(function(t,n,r,o){return function(e,t,n,r,o){for(var a=0,s=e;a<s.length;a+=1){var u=s[a];if(t<=u.x&&n<=u.y&&r>=u.x&&o>=u.y)return!0}var c=[new i(t,n),new i(t,o),new i(r,o),new i(r,n)];if(e.length>2)for(var l=0,f=c;l<f.length;l+=1)if(Jo(e,f[l]))return!0;for(var p=0;p<e.length-1;p++)if(ea(e[p],e[p+1],c))return!0;return!1}(e.cameraQueryGeometry,t-l,n-l,r+l,o+l)})),v=0,m=d;v<m.length;v+=1)p.push(m[v]);p.sort(il);for(var g,y={},b=function(i){var l=p[i];if(l!==g){g=l;var f=o.featureIndexArray.get(l),h=null;o.loadMatchingFeature(y,f.bucketIndex,f.sourceLayerIndex,f.featureIndex,u,a.layers,a.availableImages,t,n,r,(function(t,n,r){return h||(h=Bo(t)),n.queryIntersectsFeature(c,t,r,h,o.z,e.transform,s,e.pixelPosMatrix)}))}},_=0;_<p.length;_++)b(_);return y},tl.prototype.loadMatchingFeature=function(e,t,n,r,i,o,a,s,u,c,l){var f=this.bucketLayerIDs[t];if(!o||function(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(o,f)){var h=this.sourceLayerCoder.decode(n),d=this.vtLayers[h].feature(r);if(i.needGeometry){var v=Uo(d,!0);if(!i.filter(new si(this.tileID.overscaledZ),v,this.tileID.canonical))return}else if(!i.filter(new si(this.tileID.overscaledZ),d))return;for(var m=this.getId(d,h),g=0;g<f.length;g++){var y=f[g];if(!(o&&o.indexOf(y)<0)){var b=s[y];if(b){var _={};void 0!==m&&c&&(_=c.getState(b.sourceLayer||"_geojsonTileLayer",m));var x=p({},u[y]);x.paint=nl(x.paint,b.paint,d,_,a),x.layout=nl(x.layout,b.layout,d,_,a);var w=!l||l(d,b,_);if(w){var O=new Qc(d,this.z,this.x,this.y,m);O.layer=x;var E=e[y];void 0===E&&(E=e[y]=[]),E.push({featureIndex:r,feature:O,intersectionZ:w})}}}}}},tl.prototype.lookupSymbolFeatures=function(e,t,n,r,i,o,a,s){var u={};this.loadVTLayers();for(var c=ar(i),l=0,f=e;l<f.length;l+=1)this.loadMatchingFeature(u,n,r,f[l],c,o,a,s,t);return u},tl.prototype.hasLayer=function(e){for(var t=0,n=this.bucketLayerIDs;t<n.length;t+=1)for(var r=0,i=n[t];r<i.length;r+=1)if(e===i[r])return!0;return!1},tl.prototype.getId=function(e,t){var n=e.id;return this.promoteId&&"boolean"==typeof(n=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]])&&(n=Number(n)),n},Fr("FeatureIndex",tl,{omit:["rawTileData","sourceLayerCoder"]});var ol=function(e,t){this.tileID=e,this.uid=d(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ol.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<F.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},ol.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},ol.prototype.loadVectorData=function(e,t,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var r in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){var n={};if(!t)return n;for(var r=function(){var e=o[i],r=e.layerIds.map((function(e){return t.getLayer(e)})).filter(Boolean);if(0!==r.length){e.layers=r,e.stateDependentLayerIds&&(e.stateDependentLayers=e.stateDependentLayerIds.map((function(e){return r.filter((function(t){return t.id===e}))[0]})));for(var a=0,s=r;a<s.length;a+=1)n[s[a].id]=e}},i=0,o=e;i<o.length;i+=1)r();return n}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[r];if(i instanceof gc){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var a=this.buckets[o];if(a instanceof gc&&a.hasRTLText){this.hasRTLText=!0,ai.isLoading()||ai.isLoaded()||"deferred"!==ii()||oi();break}}for(var s in this.queryPadding=0,this.buckets){var u=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(s).queryRadius(u))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new $i},ol.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ol.prototype.getBucket=function(e){return this.buckets[e.id]},ol.prototype.upload=function(e){for(var t in this.buckets){var n=this.buckets[t];n.uploadPending()&&n.upload(e)}var r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ic(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ic(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},ol.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},ol.prototype.queryRenderedFeatures=function(e,t,n,r,i,o,a,s,u,c){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:i,scale:o,tileSize:this.tileSize,pixelPosMatrix:c,transform:s,params:a,queryPadding:this.queryPadding*u},e,t,n):{}},ol.prototype.querySourceFeatures=function(e,t){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var r=n.loadVTLayers(),i=t?t.sourceLayer:"",o=r._geojsonTileLayer||r[i];if(o)for(var a=ar(t&&t.filter),s=this.tileID.canonical,u=s.z,c=s.x,l=s.y,f={z:u,x:c,y:l},p=0;p<o.length;p++){var h=o.feature(p);if(a.needGeometry){var d=Uo(h,!0);if(!a.filter(new si(this.tileID.overscaledZ),d,this.tileID.canonical))continue}else if(!a.filter(new si(this.tileID.overscaledZ),h))continue;var v=n.getId(h,i),m=new Qc(h,u,c,l,v);m.tile=f,e.push(m)}}},ol.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},ol.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ol.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var n=A(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(t)if(this.expirationTime<t)i=!0;else{var o=this.expirationTime-t;o?this.expirationTime=r+Math.max(o,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ol.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},ol.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length){var n=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets)if(t.style.hasLayer(r)){var i=this.buckets[r],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=e[o];if(a&&s&&0!==Object.keys(s).length){i.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});var u=t&&t.style&&t.style.getLayer(r);u&&(this.queryPadding=Math.max(this.queryPadding,u.queryRadius(i)))}}}},ol.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},ol.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<F.now()},ol.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ol.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=F.now()+e},ol.prototype.setDependencies=function(e,t){for(var n={},r=0,i=t;r<i.length;r+=1)n[i[r]]=!0;this.dependencies[e]=n},ol.prototype.hasDependency=function(e,t){for(var n=0,r=e;n<r.length;n+=1){var i=this.dependencies[r[n]];if(i)for(var o=0,a=t;o<a.length;o+=1)if(i[a[o]])return!0}return!1};var al=a.performance,sl=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},al.mark(this._marks.start)};sl.prototype.finish=function(){al.mark(this._marks.end);var e=al.getEntriesByName(this._marks.measure);return 0===e.length&&(al.measure(this._marks.measure,this._marks.start,this._marks.end),e=al.getEntriesByName(this._marks.measure),al.clearMarks(this._marks.start),al.clearMarks(this._marks.end),al.clearMeasures(this._marks.measure)),e},e.Actor=Lc,e.AlphaImage=ya,e.CanonicalTileID=qc,e.CollisionBoxArray=$i,e.Color=et,e.DEMData=Kc,e.DataConstantProperty=mi,e.DictionaryCoder=$c,e.EXTENT=8192,e.ErrorEvent=Ae,e.EvaluationParameters=si,e.Event=je,e.Evented=ke,e.FeatureIndex=tl,e.FillBucket=ss,e.FillExtrusionBucket=Es,e.ImageAtlas=_u,e.ImagePosition=yu,e.LineBucket=Ls,e.LngLat=Fc,e.LngLatBounds=Nc,e.MercatorCoordinate=Wc,e.ONE_EM=24,e.OverscaledTileID=Yc,e.Point=i,e.Point$1=i,e.Properties=xi,e.Protobuf=Ks,e.RGBAImage=ba,e.RequestManager=W,e.RequestPerformance=sl,e.ResourceType=de,e.SegmentVector=so,e.SourceFeatureState=el,e.StructArrayLayout1ui2=Yi,e.StructArrayLayout2f1f2i16=zi,e.StructArrayLayout2i4=ki,e.StructArrayLayout3ui6=Ui,e.StructArrayLayout4i8=Ci,e.SymbolBucket=gc,e.Texture=Ic,e.Tile=ol,e.Transitionable=li,e.Uniform1f=xo,e.Uniform1i=_o,e.Uniform2f=wo,e.Uniform3f=Oo,e.Uniform4f=Eo,e.UniformColor=So,e.UniformMatrix4f=Ao,e.UnwrappedTileID=Zc,e.ValidationError=Te,e.WritingMode=xu,e.ZoomHistory=Gr,e.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},e.addDynamicAttributes=hc,e.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);var r=e.length,i=new Array(e.length),o=null;e.forEach((function(e,a){t(e,(function(e,t){e&&(o=e),i[a]=t,0==--r&&n(o,i)}))}))},e.bezier=u,e.bindAll=g,e.browser=F,e.cacheEntryPossiblyAdded=function(e){++pe>ue&&(e.getActor().send("enforceCacheSizeLimit",se),pe=0)},e.clamp=l,e.clearTileCache=function(e){var t=a.caches["delete"]("mapbox-tiles");e&&t["catch"](e).then((function(){return e()}))},e.clipLine=qu,e.clone=function(e){var t=new aa(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=x,e.clone$2=function(e){var t=new aa(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.collisionCircleLayout=Ws,e.config=z,e.create=function(){var e=new aa(16);return aa!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=function(){var e=new aa(9);return aa!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},e.create$2=function(){var e=new aa(4);return aa!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},e.createCommonjsModule=t,e.createExpression=Zn,e.createLayout=ji,e.createStyleLayer=function(e){return"custom"===e.type?new jc(e):new Ac[e.type](e)},e.cross=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],u=n[2];return e[0]=i*u-o*s,e[1]=o*a-r*u,e[2]=r*s-i*a,e},e.deepEqual=function e(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(t).length!==Object.keys(n).length)return!1;for(var i in t)if(!e(t[i],n[i]))return!1;return!0}return t===n},e.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},e.ease=c,e.emitValidationErrors=Pr,e.endsWith=y,e.enforceCacheSizeLimit=function(e){ce(),ee&&ee.then((function(t){t.keys().then((function(n){for(var r=0;r<n.length-e;r++)t["delete"](n[r])}))}))},e.evaluateSizeForFeature=Nu,e.evaluateSizeForZoom=Fu,e.evaluateVariableOffset=oc,e.evented=ri,e.extend=p,e.featureFilter=ar,e.filterObject=_,e.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.getAnchorAlignment=Pu,e.getAnchorJustification=ac,e.getArrayBuffer=_e,e.getImage=Oe,e.getJSON=function(e,t){return be(p(e,{type:"json"}),t)},e.getRTLTextPluginStatus=ii,e.getReferrer=ye,e.getVideo=function(e,t){var n,r,i=a.document.createElement("video");i.muted=!0,i.onloadstart=function(){t(null,i)};for(var o=0;o<e.length;o++){var s=a.document.createElement("source");n=e[o],r=void 0,(r=a.document.createElement("a")).href=n,(r.protocol!==a.document.location.protocol||r.host!==a.document.location.host)&&(i.crossOrigin="Anonymous"),s.src=e[o],i.appendChild(s)}return{cancel:function(){}}},e.identity=sa,e.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],p=t[10],h=t[11],d=t[12],v=t[13],m=t[14],g=t[15],y=n*s-r*a,b=n*u-i*a,_=n*c-o*a,x=r*u-i*s,w=r*c-o*s,O=i*c-o*u,E=l*v-f*d,S=l*m-p*d,j=l*g-h*d,A=f*m-p*v,k=f*g-h*v,C=p*g-h*m,T=y*C-b*k+_*A+x*j-w*S+O*E;return T?(e[0]=(s*C-u*k+c*A)*(T=1/T),e[1]=(i*k-r*C-o*A)*T,e[2]=(v*O-m*w+g*x)*T,e[3]=(p*w-f*O-h*x)*T,e[4]=(u*j-a*C-c*S)*T,e[5]=(n*C-i*j+o*S)*T,e[6]=(m*_-d*O-g*b)*T,e[7]=(l*O-p*_+h*b)*T,e[8]=(a*k-s*j+c*E)*T,e[9]=(r*j-n*k-o*E)*T,e[10]=(d*w-v*_+g*y)*T,e[11]=(f*_-l*w-h*y)*T,e[12]=(s*S-a*A-u*E)*T,e[13]=(n*A-r*S+i*E)*T,e[14]=(v*b-d*x-m*y)*T,e[15]=(l*x-f*b+p*y)*T,e):null},e.isChar=Wr,e.isMapboxURL=q,e.keysDifference=function(e,t){var n=[];for(var r in e)r in t||n.push(r);return n},e.makeRequest=be,e.mapObject=b,e.mercatorXfromLng=Uc,e.mercatorYfromLat=Vc,e.mercatorZfromAltitude=Hc,e.mul=la,e.multiply=ua,e.mvt=_s,e.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},e.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e},e.number=Gt,e.offscreenCanvasSupported=he,e.ortho=function(e,t,n,r,i,o,a){var s=1/(t-n),u=1/(r-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(a+o)*c,e[15]=1,e},e.parseGlyphPBF=function(e){return new Ks(e).readFields(du,[])},e.pbf=Ks,e.performSymbolLayout=function(e,t,n,r,i,o,a){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var s=e.layers[0].layout,u=e.layers[0]._unevaluatedLayout._values,c={};if("composite"===e.textSizeData.kind){var l=e.textSizeData,f=l.maxZoom;c.compositeTextSizes=[u["text-size"].possiblyEvaluate(new si(l.minZoom),a),u["text-size"].possiblyEvaluate(new si(f),a)]}if("composite"===e.iconSizeData.kind){var p=e.iconSizeData,h=p.maxZoom;c.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new si(p.minZoom),a),u["icon-size"].possiblyEvaluate(new si(h),a)]}c.layoutTextSize=u["text-size"].possiblyEvaluate(new si(e.zoom+1),a),c.layoutIconSize=u["icon-size"].possiblyEvaluate(new si(e.zoom+1),a),c.textMaxSize=u["text-size"].possiblyEvaluate(new si(18));for(var d=24*s.get("text-line-height"),v="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),m=s.get("text-keep-upright"),g=s.get("text-size"),y=function(){var o=_[b],u=s.get("text-font").evaluate(o,{},a).join(","),l=g.evaluate(o,{},a),f=c.layoutTextSize.evaluate(o,{},a),p=c.layoutIconSize.evaluate(o,{},a),h={horizontal:{},vertical:void 0},y=o.text,x=[0,0];if(y){var w=y.toString(),E=24*s.get("text-letter-spacing").evaluate(o,{},a),S=function(e){for(var t=0,n=e;t<n.length;t+=1)if(r=n[t].charCodeAt(0),Wr.Arabic(r)||Wr["Arabic Supplement"](r)||Wr["Arabic Extended-A"](r)||Wr["Arabic Presentation Forms-A"](r)||Wr["Arabic Presentation Forms-B"](r))return!1;var r;return!0}(w)?E:0,j=s.get("text-anchor").evaluate(o,{},a),A=s.get("text-variable-anchor");if(!A){var k=s.get("text-radial-offset").evaluate(o,{},a);x=k?oc(j,[24*k,ic]):s.get("text-offset").evaluate(o,{},a).map((function(e){return 24*e}))}var C=v?"center":s.get("text-justify").evaluate(o,{},a),T=s.get("symbol-placement"),M="point"===T?24*s.get("text-max-width").evaluate(o,{},a):0,P=function(){e.allowVerticalPlacement&&qr(w)&&(h.vertical=Eu(y,t,n,i,u,M,d,j,"left",S,x,xu.vertical,!0,T,f,l))};if(!v&&A){for(var I="auto"===C?A.map((function(e){return ac(e)})):[C],R=!1,L=0;L<I.length;L++){var D=I[L];if(!h.horizontal[D])if(R)h.horizontal[D]=h.horizontal[0];else{var N=Eu(y,t,n,i,u,M,d,"center",D,S,x,xu.horizontal,!1,T,f,l);N&&(h.horizontal[D]=N,R=1===N.positionedLines.length)}}P()}else{"auto"===C&&(C=ac(j));var F=Eu(y,t,n,i,u,M,d,j,C,S,x,xu.horizontal,!1,T,f,l);F&&(h.horizontal[C]=F),P(),qr(w)&&v&&m&&(h.vertical=Eu(y,t,n,i,u,M,d,j,C,S,x,xu.vertical,!1,T,f,l))}}var z=void 0,B=!1;if(o.icon&&o.icon.name){var U=r[o.icon.name];U&&(z=function(e,t,n){var r=Pu(n),i=t[0]-e.displaySize[0]*r.horizontalAlign,o=t[1]-e.displaySize[1]*r.verticalAlign;return{image:e,top:o,bottom:o+e.displaySize[1],left:i,right:i+e.displaySize[0]}}(i[o.icon.name],s.get("icon-offset").evaluate(o,{},a),s.get("icon-anchor").evaluate(o,{},a)),B=U.sdf,void 0===e.sdfIcons?e.sdfIcons=U.sdf:e.sdfIcons!==U.sdf&&O("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(U.pixelRatio!==e.pixelRatio||0!==s.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}var V=uc(h.horizontal)||h.vertical;e.iconsInText=!!V&&V.iconsInText,(V||z)&&function(e,t,n,r,i,o,a,s,u,c,l){var f=o.textMaxSize.evaluate(t,{});void 0===f&&(f=a);var p,h=e.layers[0].layout,d=h.get("icon-offset").evaluate(t,{},l),v=uc(n.horizontal),m=a/24,g=e.tilePixelRatio*m,y=e.tilePixelRatio*f/24,b=e.tilePixelRatio*s,_=e.tilePixelRatio*h.get("symbol-spacing"),x=h.get("text-padding")*e.tilePixelRatio,w=h.get("icon-padding")*e.tilePixelRatio,E=h.get("text-max-angle")/180*Math.PI,S="map"===h.get("text-rotation-alignment")&&"point"!==h.get("symbol-placement"),j="map"===h.get("icon-rotation-alignment")&&"point"!==h.get("symbol-placement"),A=h.get("symbol-placement"),k=_/2,C=h.get("icon-text-fit");r&&"none"!==C&&(e.allowVerticalPlacement&&n.vertical&&(p=Ru(r,n.vertical,C,h.get("icon-text-fit-padding"),d,m)),v&&(r=Ru(r,v,C,h.get("icon-text-fit-padding"),d,m)));var T=function(s,f){f.x<0||f.x>=8192||f.y<0||f.y>=8192||function(e,t,n,r,i,o,a,s,u,c,l,f,p,h,d,v,m,g,y,b,_,x,w,E,S){var j,A,k,C,T,M=e.addToLineVertexArray(t,n),P=0,I=0,R=0,L=0,D=-1,N=-1,F={},z=po(""),B=0,U=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(B=(j=s.layout.get("text-offset").evaluate(_,{},E).map((function(e){return 24*e})))[0],U=j[1]):(B=24*s.layout.get("text-radial-offset").evaluate(_,{},E),U=ic),e.allowVerticalPlacement&&r.vertical){var V=s.layout.get("text-rotate").evaluate(_,{},E)+90;C=new Qu(u,t,c,l,f,r.vertical,p,h,d,V),a&&(T=new Qu(u,t,c,l,f,a,m,g,d,V))}if(i){var H=s.layout.get("icon-rotate").evaluate(_,{}),G="none"!==s.layout.get("icon-text-fit"),W=Zu(i,H,w,G),q=a?Zu(a,H,w,G):void 0;k=new Qu(u,t,c,l,f,i,m,g,!1,H),P=4*W.length;var Z=e.iconSizeData,Y=null;"source"===Z.kind?(Y=[128*s.layout.get("icon-size").evaluate(_,{})])[0]>32640&&O(e.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===Z.kind&&((Y=[128*x.compositeIconSizes[0].evaluate(_,{},E),128*x.compositeIconSizes[1].evaluate(_,{},E)])[0]>32640||Y[1]>32640)&&O(e.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),e.addSymbols(e.icon,W,Y,b,y,_,!1,t,M.lineStartIndex,M.lineLength,-1,E),D=e.icon.placedSymbolArray.length-1,q&&(I=4*q.length,e.addSymbols(e.icon,q,Y,b,y,_,xu.vertical,t,M.lineStartIndex,M.lineLength,-1,E),N=e.icon.placedSymbolArray.length-1)}for(var X in r.horizontal){var K=r.horizontal[X];if(!A){z=po(K.text);var $=s.layout.get("text-rotate").evaluate(_,{},E);A=new Qu(u,t,c,l,f,K,p,h,d,$)}var Q=1===K.positionedLines.length;if(R+=sc(e,t,K,o,s,d,_,v,M,r.vertical?xu.horizontal:xu.horizontalOnly,Q?Object.keys(r.horizontal):[X],F,D,x,E),Q)break}r.vertical&&(L+=sc(e,t,r.vertical,o,s,d,_,v,M,xu.vertical,["vertical"],F,N,x,E));var J=A?A.boxStartIndex:e.collisionBoxArray.length,ee=A?A.boxEndIndex:e.collisionBoxArray.length,te=C?C.boxStartIndex:e.collisionBoxArray.length,ne=C?C.boxEndIndex:e.collisionBoxArray.length,re=k?k.boxStartIndex:e.collisionBoxArray.length,ie=k?k.boxEndIndex:e.collisionBoxArray.length,oe=T?T.boxStartIndex:e.collisionBoxArray.length,ae=T?T.boxEndIndex:e.collisionBoxArray.length,se=-1,ue=function(e,t){return e&&e.circleDiameter?Math.max(e.circleDiameter,t):t};se=ue(A,se),se=ue(C,se),se=ue(k,se);var ce=(se=ue(T,se))>-1?1:0;ce&&(se*=S/24),e.glyphOffsetArray.length>=gc.MAX_GLYPHS&&O("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==_.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,_.sortKey),e.symbolInstances.emplaceBack(t.x,t.y,F.right>=0?F.right:-1,F.center>=0?F.center:-1,F.left>=0?F.left:-1,F.vertical||-1,D,N,z,J,ee,te,ne,re,ie,oe,ae,c,R,L,P,I,ce,0,p,B,U,se)}(e,f,s,n,r,i,p,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,g,x,S,u,b,w,j,d,t,o,c,l,a)};if("line"===A)for(var M=0,P=qu(t.geometry,0,0,8192,8192);M<P.length;M+=1)for(var I=P[M],R=0,L=Wu(I,_,E,n.vertical||v,r,24,y,e.overscaling,8192);R<L.length;R+=1){var D=L[R];v&&cc(e,v.text,k,D)||T(I,D)}else if("line-center"===A)for(var N=0,F=t.geometry;N<F.length;N+=1){var z=F[N];if(z.length>1){var B=Gu(z,E,n.vertical||v,r,24,y);B&&T(z,B)}}else if("Polygon"===t.type)for(var U=0,V=rs(t.geometry,0);U<V.length;U+=1){var H=V[U],G=tc(H,16);T(H[0],new Lu(G.x,G.y,0))}else if("LineString"===t.type)for(var W=0,q=t.geometry;W<q.length;W+=1){var Z=q[W];T(Z,new Lu(Z[0].x,Z[0].y,0))}else if("Point"===t.type)for(var Y=0,X=t.geometry;Y<X.length;Y+=1)for(var K=0,$=X[Y];K<$.length;K+=1){var Q=$[K];T([Q],new Lu(Q.x,Q.y,0))}}(e,o,h,z,r,c,f,p,x,B,a)},b=0,_=e.features;b<_.length;b+=1)y();o&&e.generateCollisionDebugBuffers()},e.perspective=function(e,t,n,r,i){var o,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+r)*(o=1/(r-i)),e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e},e.pick=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r];i in e&&(n[i]=e[i])}return n},e.plugin=ai,e.polygonIntersectsPolygon=Go,e.postMapLoadEvent=ae,e.postTurnstileEvent=ie,e.potpack=gu,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=Fr,e.registerForPluginStateChange=function(e){return e({pluginStatus:Jr,pluginURL:ei}),ri.on("pluginStateChange",e),e},e.renderColorRamp=xa,e.rotate=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+o*s,e[1]=i*u+a*s,e[2]=r*-s+o*u,e[3]=i*-s+a*u,e},e.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*r,e[5]=a*i+l*r,e[6]=s*i+f*r,e[7]=u*i+p*r,e[8]=c*i-o*r,e[9]=l*i-a*r,e[10]=f*i-s*r,e[11]=p*i-u*r,e},e.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],c=t[4],l=t[5],f=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*r,e[1]=a*i+l*r,e[2]=s*i+f*r,e[3]=u*i+p*r,e[4]=c*i-o*r,e[5]=l*i-a*r,e[6]=f*i-s*r,e[7]=p*i-u*r,e},e.scale=function(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.scale$1=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},e.scale$2=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},e.setCacheLimits=function(e,t){se=e,ue=t},e.setRTLTextPlugin=function(e,t,n){if(void 0===n&&(n=!1),"deferred"===Jr||"loading"===Jr||"loaded"===Jr)throw new Error("setRTLTextPlugin cannot be called multiple times.");ei=F.resolveURL(e),Jr="deferred",Qr=t,ni(),n||oi()},e.sphericalToCartesian=function(e){var t=e[0],n=e[1],r=e[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:t*Math.cos(n)*Math.sin(r),y:t*Math.sin(n)*Math.sin(r),z:t*Math.cos(r)}},e.sqrLen=function(e){var t=e[0],n=e[1];return t*t+n*n},e.styleSpec=Ce,e.sub=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},e.symbolSize=zu,e.transformMat3=function(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e},e.transformMat4=fa,e.translate=function(e,t,n){var r,i,o,a,s,u,c,l,f,p,h,d,v=n[0],m=n[1],g=n[2];return t===e?(e[12]=t[0]*v+t[4]*m+t[8]*g+t[12],e[13]=t[1]*v+t[5]*m+t[9]*g+t[13],e[14]=t[2]*v+t[6]*m+t[10]*g+t[14],e[15]=t[3]*v+t[7]*m+t[11]*g+t[15]):(i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],p=t[9],h=t[10],d=t[11],e[0]=r=t[0],e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=c,e[7]=l,e[8]=f,e[9]=p,e[10]=h,e[11]=d,e[12]=r*v+s*m+f*g+t[12],e[13]=i*v+u*m+p*g+t[13],e[14]=o*v+c*m+h*g+t[14],e[15]=a*v+l*m+d*g+t[15]),e},e.triggerPluginCompletionEvent=ti,e.uniqueId=d,e.validateCustomStyleLayer=function(e){var t=[],n=e.id;return void 0===n&&t.push({message:"layers."+n+': missing required property "id"'}),void 0===e.render&&t.push({message:"layers."+n+': missing required method "render"'}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),t},e.validateLight=Cr,e.validateStyle=kr,e.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},e.vectorTile=_s,e.version="1.13.3",e.warnOnce=O,e.webpSupported=B,e.window=a,e.wrap=f})),r(["./shared"],(function(e){function t(e){var n=typeof e;if("number"===n||"boolean"===n||"string"===n||null==e)return JSON.stringify(e);if(Array.isArray(e)){for(var r="[",i=0,o=e;i<o.length;i+=1)r+=t(o[i])+",";return r+"]"}for(var a=Object.keys(e).sort(),s="{",u=0;u<a.length;u++)s+=JSON.stringify(a[u])+":"+t(e[a[u]])+",";return s+"}"}function n(n){for(var r="",i=0,o=e.refProperties;i<o.length;i+=1)r+="/"+t(n[o[i]]);return r}var r=function(e){this.keyCache={},e&&this.replace(e)};r.prototype.replace=function(e){this._layerConfigs={},this._layers={},this.update(e,[])},r.prototype.update=function(t,r){for(var i=this,o=0,a=t;o<a.length;o+=1){var s=a[o];this._layerConfigs[s.id]=s;var u=this._layers[s.id]=e.createStyleLayer(s);u._featureFilter=e.featureFilter(u.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var c=0,l=r;c<l.length;c+=1){var f=l[c];delete this.keyCache[f],delete this._layerConfigs[f],delete this._layers[f]}this.familiesBySource={};for(var p=0,h=function(e,t){for(var r={},i=0;i<e.length;i++){var o=t&&t[e[i].id]||n(e[i]);t&&(t[e[i].id]=o);var a=r[o];a||(a=r[o]=[]),a.push(e[i])}var s=[];for(var u in r)s.push(r[u]);return s}(e.values(this._layerConfigs),this.keyCache);p<h.length;p+=1){var d=h[p].map((function(e){return i._layers[e.id]})),v=d[0];if("none"!==v.visibility){var m=v.source||"",g=this.familiesBySource[m];g||(g=this.familiesBySource[m]={});var y=v.sourceLayer||"_geojsonTileLayer",b=g[y];b||(b=g[y]=[]),b.push(d)}}};var i=function(t){var n={},r=[];for(var i in t){var o=t[i],a=n[i]={};for(var s in o){var u=o[+s];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var c={x:0,y:0,w:u.bitmap.width+2,h:u.bitmap.height+2};r.push(c),a[s]={rect:c,metrics:u.metrics}}}}var l=e.potpack(r),f=new e.AlphaImage({width:l.w||1,height:l.h||1});for(var p in t){var h=t[p];for(var d in h){var v=h[+d];if(v&&0!==v.bitmap.width&&0!==v.bitmap.height){var m=n[p][d].rect;e.AlphaImage.copy(v.bitmap,f,{x:0,y:0},{x:m.x+1,y:m.y+1},v.bitmap)}}}this.image=f,this.positions=n};e.register("GlyphAtlas",i);var o=function(t){this.tileID=new e.OverscaledTileID(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId};function a(t,n,r){for(var i=new e.EvaluationParameters(n),o=0,a=t;o<a.length;o+=1)a[o].recalculate(i,r)}function s(t,n){var r=e.getArrayBuffer(t.request,(function(t,r,i,o){t?n(t):r&&n(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(r)),rawData:r,cacheControl:i,expires:o})}));return function(){r.cancel(),n()}}o.prototype.parse=function(t,n,r,o,s){var u=this;this.status="parsing",this.data=t,this.collisionBoxArray=new e.CollisionBoxArray;var c=new e.DictionaryCoder(Object.keys(t.layers).sort()),l=new e.FeatureIndex(this.tileID,this.promoteId);l.bucketLayerIDs=[];var f,p,h,d,v={},m={featureIndex:l,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:r},g=n.familiesBySource[this.source];for(var y in g){var b=t.layers[y];if(b){1===b.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+y+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var _=c.encode(y),x=[],w=0;w<b.length;w++){var O=b.feature(w),E=l.getId(O,y);x.push({feature:O,id:E,index:w,sourceLayerIndex:_})}for(var S=0,j=g[y];S<j.length;S+=1){var A=j[S],k=A[0];k.minzoom&&this.zoom<Math.floor(k.minzoom)||k.maxzoom&&this.zoom>=k.maxzoom||"none"!==k.visibility&&(a(A,this.zoom,r),(v[k.id]=k.createBucket({index:l.bucketLayerIDs.length,layers:A,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:_,sourceID:this.source})).populate(x,m,this.tileID.canonical),l.bucketLayerIDs.push(A.map((function(e){return e.id}))))}}}var C=e.mapObject(m.glyphDependencies,(function(e){return Object.keys(e).map(Number)}));Object.keys(C).length?o.send("getGlyphs",{uid:this.uid,stacks:C},(function(e,t){f||(f=e,p=t,P.call(u))})):p={};var T=Object.keys(m.iconDependencies);T.length?o.send("getImages",{icons:T,source:this.source,tileID:this.tileID,type:"icons"},(function(e,t){f||(f=e,h=t,P.call(u))})):h={};var M=Object.keys(m.patternDependencies);function P(){if(f)return s(f);if(p&&h&&d){var t=new i(p),n=new e.ImageAtlas(h,d);for(var o in v){var u=v[o];u instanceof e.SymbolBucket?(a(u.layers,this.zoom,r),e.performSymbolLayout(u,p,t.positions,h,n.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):u.hasPattern&&(u instanceof e.LineBucket||u instanceof e.FillBucket||u instanceof e.FillExtrusionBucket)&&(a(u.layers,this.zoom,r),u.addFeatures(m,this.tileID.canonical,n.patternPositions))}this.status="done",s(null,{buckets:e.values(v).filter((function(e){return!e.isEmpty()})),featureIndex:l,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,imageAtlas:n,glyphMap:this.returnDependencies?p:null,iconMap:this.returnDependencies?h:null,glyphPositions:this.returnDependencies?t.positions:null})}}M.length?o.send("getImages",{icons:M,source:this.source,tileID:this.tileID,type:"patterns"},(function(e,t){f||(f=e,d=t,P.call(u))})):d={},P.call(this)};var u=function(e,t,n,r){this.actor=e,this.layerIndex=t,this.availableImages=n,this.loadVectorData=r||s,this.loading={},this.loaded={}};u.prototype.loadTile=function(t,n){var r=this,i=t.uid;this.loading||(this.loading={});var a=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.RequestPerformance(t.request),s=this.loading[i]=new o(t);s.abort=this.loadVectorData(t,(function(t,o){if(delete r.loading[i],t||!o)return s.status="done",r.loaded[i]=s,n(t);var u=o.rawData,c={};o.expires&&(c.expires=o.expires),o.cacheControl&&(c.cacheControl=o.cacheControl);var l={};if(a){var f=a.finish();f&&(l.resourceTiming=JSON.parse(JSON.stringify(f)))}s.vectorTile=o.vectorTile,s.parse(o.vectorTile,r.layerIndex,r.availableImages,r.actor,(function(t,r){if(t||!r)return n(t);n(null,e.extend({rawTileData:u.slice(0)},r,c,l))})),r.loaded=r.loaded||{},r.loaded[i]=s}))},u.prototype.reloadTile=function(e,t){var n=this,r=this.loaded,i=e.uid,o=this;if(r&&r[i]){var a=r[i];a.showCollisionBoxes=e.showCollisionBoxes;var s=function(e,r){var i=a.reloadCallback;i&&(delete a.reloadCallback,a.parse(a.vectorTile,o.layerIndex,n.availableImages,o.actor,i)),t(e,r)};"parsing"===a.status?a.reloadCallback=s:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}},u.prototype.abortTile=function(e,t){var n=this.loading,r=e.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),t()},u.prototype.removeTile=function(e,t){var n=this.loaded,r=e.uid;n&&n[r]&&delete n[r],t()};var c=e.window.ImageBitmap,l=function(){this.loaded={}};function f(e,t){if(0!==e.length){p(e[0],t);for(var n=1;n<e.length;n++)p(e[n],!t)}}function p(e,t){for(var n=0,r=0,i=0,o=e.length,a=o-1;i<o;a=i++){var s=(e[i][0]-e[a][0])*(e[a][1]+e[i][1]),u=n+s;r+=Math.abs(n)>=Math.abs(s)?n-u+s:s-u+n,n=u}n+r>=0!=!!t&&e.reverse()}l.prototype.loadTile=function(t,n){var r=t.uid,i=t.encoding,o=t.rawImageData,a=c&&o instanceof c?this.getImageData(o):o,s=new e.DEMData(r,a,i);this.loaded=this.loaded||{},this.loaded[r]=s,n(null,s)},l.prototype.getImageData=function(t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);var n=this.offscreenCanvasContext.getImageData(-1,-1,t.width+2,t.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:n.width,height:n.height},n.data)},l.prototype.removeTile=function(e){var t=this.loaded,n=e.uid;t&&t[n]&&delete t[n]};var h=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,d=function(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))};d.prototype.loadGeometry=function(){if(1===this._feature.type){for(var t=[],n=0,r=this._feature.geometry;n<r.length;n+=1){var i=r[n];t.push([new e.Point$1(i[0],i[1])])}return t}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var u=[],c=0,l=s[a];c<l.length;c+=1){var f=l[c];u.push(new e.Point$1(f[0],f[1]))}o.push(u)}return o},d.prototype.toGeoJSON=function(e,t,n){return h.call(this,e,t,n)};var v=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t};v.prototype.feature=function(e){return new d(this._features[e])};var m=e.vectorTile.VectorTileFeature,g=y;function y(e,t){this.options=t||{},this.features=e,this.length=e.length}function b(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}y.prototype.feature=function(e){return new b(this.features[e],this.options.extent)},b.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var n=0;n<t.length;n++){for(var r=t[n],i=[],o=0;o<r.length;o++)i.push(new e.Point$1(r[o][0],r[o][1]));this.geometry.push(i)}return this.geometry},b.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var u=a[s];t=Math.min(t,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[t,r,n,i]},b.prototype.toGeoJSON=m.prototype.toGeoJSON;var _=w,x=g;function w(t){var n=new e.pbf;return function(e,t){for(var n in e.layers)t.writeMessage(3,O,e.layers[n])}(t,n),n.finish()}function O(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,E,r);var i=r.keys;for(n=0;n<i.length;n++)t.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)t.writeMessage(4,C,o[n])}function E(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,S,e),t.writeVarintField(3,n.type),t.writeMessage(4,k,n)}function S(e,t){var n=e.feature,r=e.keys,i=e.values,o=e.keycache,a=e.valuecache;for(var s in n.properties){var u=o[s];void 0===u&&(r.push(s),o[s]=u=r.length-1),t.writeVarint(u);var c=n.properties[s],l=typeof c;"string"!==l&&"boolean"!==l&&"number"!==l&&(c=JSON.stringify(c));var f=l+":"+c,p=a[f];void 0===p&&(i.push(c),a[f]=p=i.length-1),t.writeVarint(p)}}function j(e,t){return(t<<3)+(7&e)}function A(e){return e<<1^e>>31}function k(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,o=0,a=n.length,s=0;s<a;s++){var u=n[s],c=1;1===r&&(c=u.length),t.writeVarint(j(1,c));for(var l=3===r?u.length-1:u.length,f=0;f<l;f++){1===f&&1!==r&&t.writeVarint(j(2,l-1));var p=u[f].x-i,h=u[f].y-o;t.writeVarint(A(p)),t.writeVarint(A(h)),i+=p,o+=h}3===r&&t.writeVarint(j(7,1))}}function C(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function T(e,t,n,r){M(e,n,r),M(t,2*n,2*r),M(t,2*n+1,2*r+1)}function M(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function P(e,t,n,r){var i=e-n,o=t-r;return i*i+o*o}_.fromVectorTileJs=w,_.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var r in e)n[r]=new g(e[r].features,t),n[r].name=r,n[r].version=t.version,n[r].extent=t.extent;return w({layers:n})},_.GeoJSONWrapper=x;var I=function(e){return e[0]},R=function(e){return e[1]},L=function(e,t,n,r,i){void 0===t&&(t=I),void 0===n&&(n=R),void 0===r&&(r=64),void 0===i&&(i=Float64Array),this.nodeSize=r,this.points=e;for(var o=e.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(e.length),s=this.coords=new i(2*e.length),u=0;u<e.length;u++)a[u]=u,s[2*u]=t(e[u]),s[2*u+1]=n(e[u]);!function e(t,n,r,i,o,a){if(!(o-i<=r)){var s=i+o>>1;!function e(t,n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,c=Math.log(s),l=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*l*(s-l)/s)*(u-s/2<0?-1:1);e(t,n,r,Math.max(i,Math.floor(r-u*l/s+f)),Math.min(o,Math.floor(r+(s-u)*l/s+f)),a)}var p=n[2*r+a],h=i,d=o;for(T(t,n,i,r),n[2*o+a]>p&&T(t,n,i,o);h<d;){for(T(t,n,h,d),h++,d--;n[2*h+a]<p;)h++;for(;n[2*d+a]>p;)d--}n[2*i+a]===p?T(t,n,i,d):T(t,n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(t,n,s,i,o,a%2),e(t,n,r,i,s-1,a+1),e(t,n,r,s+1,o,a+1)}}(a,s,r,0,a.length-1,0)};L.prototype.range=function(e,t,n,r){return function(e,t,n,r,i,o,a){for(var s,u,c=[0,e.length-1,0],l=[];c.length;){var f=c.pop(),p=c.pop(),h=c.pop();if(p-h<=a)for(var d=h;d<=p;d++)u=t[2*d+1],(s=t[2*d])>=n&&s<=i&&u>=r&&u<=o&&l.push(e[d]);else{var v=Math.floor((h+p)/2);u=t[2*v+1],(s=t[2*v])>=n&&s<=i&&u>=r&&u<=o&&l.push(e[v]);var m=(f+1)%2;(0===f?n<=s:r<=u)&&(c.push(h),c.push(v-1),c.push(m)),(0===f?i>=s:o>=u)&&(c.push(v+1),c.push(p),c.push(m))}}return l}(this.ids,this.coords,e,t,n,r,this.nodeSize)},L.prototype.within=function(e,t,n){return function(e,t,n,r,i,o){for(var a=[0,e.length-1,0],s=[],u=i*i;a.length;){var c=a.pop(),l=a.pop(),f=a.pop();if(l-f<=o)for(var p=f;p<=l;p++)P(t[2*p],t[2*p+1],n,r)<=u&&s.push(e[p]);else{var h=Math.floor((f+l)/2),d=t[2*h],v=t[2*h+1];P(d,v,n,r)<=u&&s.push(e[h]);var m=(c+1)%2;(0===c?n-i<=d:r-i<=v)&&(a.push(f),a.push(h-1),a.push(m)),(0===c?n+i>=d:r+i>=v)&&(a.push(h+1),a.push(l),a.push(m))}}return s}(this.ids,this.coords,e,t,n,this.nodeSize)};var D={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(e){return e}},N=function(e){this.options=G(Object.create(D),e),this.trees=new Array(this.options.maxZoom+1)};function F(e,t,n,r,i){return{x:e,y:t,zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function z(e,t){var n=e.geometry.coordinates,r=n[1];return{x:V(n[0]),y:H(r),zoom:1/0,index:t,parentId:-1}}function B(e){return{type:"Feature",id:e.id,properties:U(e),geometry:{type:"Point",coordinates:[(r=e.x,360*(r-.5)),(t=e.y,n=(180-360*t)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var t,n,r}function U(e){var t=e.numPoints,n=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return G(G({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function V(e){return e/360+.5}function H(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function G(e,t){for(var n in t)e[n]=t[n];return e}function W(e){return e.x}function q(e){return e.y}function Z(e,t,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((e-n)*a+(t-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return(a=e-n)*a+(s=t-r)*s}function Y(e,t,n,r){var i={id:void 0===e?null:e,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)X(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)X(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)X(e,t[r][i])}(i),i}function X(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function K(e,t,n,r){if(t.geometry){var i=t.geometry.coordinates,o=t.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],u=t.id;if(n.promoteId?u=t.properties[n.promoteId]:n.generateId&&(u=r||0),"Point"===o)$(i,s);else if("MultiPoint"===o)for(var c=0;c<i.length;c++)$(i[c],s);else if("LineString"===o)Q(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(c=0;c<i.length;c++)Q(i[c],s=[],a,!1),e.push(Y(u,"LineString",s,t.properties));return}J(i,s,a,!1)}else if("Polygon"===o)J(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<t.geometry.geometries.length;c++)K(e,{id:u,geometry:t.geometry.geometries[c],properties:t.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<i.length;c++){var l=[];J(i[c],l,a,!0),s.push(l)}}e.push(Y(u,o,s,t.properties))}}function $(e,t){t.push(ee(e[0])),t.push(te(e[1])),t.push(0)}function Q(e,t,n,r){for(var i,o,a=0,s=0;s<e.length;s++){var u=ee(e[s][0]),c=te(e[s][1]);t.push(u),t.push(c),t.push(0),s>0&&(a+=r?(i*c-u*o)/2:Math.sqrt(Math.pow(u-i,2)+Math.pow(c-o,2))),i=u,o=c}var l=t.length-3;t[2]=1,function e(t,n,r,i){for(var o,a=i,s=r-n>>1,u=r-n,c=t[n],l=t[n+1],f=t[r],p=t[r+1],h=n+3;h<r;h+=3){var d=Z(t[h],t[h+1],c,l,f,p);if(d>a)o=h,a=d;else if(d===a){var v=Math.abs(h-s);v<u&&(o=h,u=v)}}a>i&&(o-n>3&&e(t,n,o,i),t[o+2]=a,r-o>3&&e(t,o,r,i))}(t,0,l,n),t[l+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function J(e,t,n,r){for(var i=0;i<e.length;i++){var o=[];Q(e[i],o,n,r),t.push(o)}}function ee(e){return e/360+.5}function te(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function ne(e,t,n,r,i,o,a,s){if(r/=t,o>=(n/=t)&&a<r)return e;if(a<n||o>=r)return null;for(var u=[],c=0;c<e.length;c++){var l=e[c],f=l.geometry,p=l.type,h=0===i?l.minX:l.minY,d=0===i?l.maxX:l.maxY;if(h>=n&&d<r)u.push(l);else if(!(d<n||h>=r)){var v=[];if("Point"===p||"MultiPoint"===p)re(f,v,n,r,i);else if("LineString"===p)ie(f,v,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===p)ae(f,v,n,r,i,!1);else if("Polygon"===p)ae(f,v,n,r,i,!0);else if("MultiPolygon"===p)for(var m=0;m<f.length;m++){var g=[];ae(f[m],g,n,r,i,!0),g.length&&v.push(g)}if(v.length){if(s.lineMetrics&&"LineString"===p){for(m=0;m<v.length;m++)u.push(Y(l.id,p,v[m],l.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===v.length?(p="LineString",v=v[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===v.length?"Point":"MultiPoint"),u.push(Y(l.id,p,v,l.tags))}}}return u.length?u:null}function re(e,t,n,r,i){for(var o=0;o<e.length;o+=3){var a=e[o+i];a>=n&&a<=r&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function ie(e,t,n,r,i,o,a){for(var s,u,c=oe(e),l=0===i?ue:ce,f=e.start,p=0;p<e.length-3;p+=3){var h=e[p],d=e[p+1],v=e[p+2],m=e[p+3],g=e[p+4],y=0===i?h:d,b=0===i?m:g,_=!1;a&&(s=Math.sqrt(Math.pow(h-m,2)+Math.pow(d-g,2))),y<n?b>n&&(u=l(c,h,d,m,g,n),a&&(c.start=f+s*u)):y>r?b<r&&(u=l(c,h,d,m,g,r),a&&(c.start=f+s*u)):se(c,h,d,v),b<n&&y>=n&&(u=l(c,h,d,m,g,n),_=!0),b>r&&y<=r&&(u=l(c,h,d,m,g,r),_=!0),!o&&_&&(a&&(c.end=f+s*u),t.push(c),c=oe(e)),a&&(f+=s)}var x=e.length-3;h=e[x],d=e[x+1],v=e[x+2],(y=0===i?h:d)>=n&&y<=r&&se(c,h,d,v),x=c.length-3,o&&x>=3&&(c[x]!==c[0]||c[x+1]!==c[1])&&se(c,c[0],c[1],c[2]),c.length&&t.push(c)}function oe(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function ae(e,t,n,r,i,o){for(var a=0;a<e.length;a++)ie(e[a],t,n,r,i,o,!1)}function se(e,t,n,r){e.push(t),e.push(n),e.push(r)}function ue(e,t,n,r,i,o){var a=(o-t)/(r-t);return e.push(o),e.push(n+(i-n)*a),e.push(1),a}function ce(e,t,n,r,i,o){var a=(o-n)/(i-n);return e.push(t+(r-t)*a),e.push(o),e.push(1),a}function le(e,t){for(var n=[],r=0;r<e.length;r++){var i,o=e[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=fe(o.geometry,t);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(fe(o.geometry[s],t))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var u=[],c=0;c<o.geometry[s].length;c++)u.push(fe(o.geometry[s][c],t));i.push(u)}n.push(Y(o.id,a,i,o.tags))}return n}function fe(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function pe(e,t){if(e.transformed)return e;var n,r,i,o=1<<e.z,a=e.x,s=e.y;for(n=0;n<e.features.length;n++){var u=e.features[n],c=u.geometry,l=u.type;if(u.geometry=[],1===l)for(r=0;r<c.length;r+=2)u.geometry.push(he(c[r],c[r+1],t,o,a,s));else for(r=0;r<c.length;r++){var f=[];for(i=0;i<c[r].length;i+=2)f.push(he(c[r][i],c[r][i+1],t,o,a,s));u.geometry.push(f)}}return e.transformed=!0,e}function he(e,t,n,r,i,o){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-o))]}function de(e,t,n,r,i){for(var o=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,ve(a,e[s],o,i);var u=e[s].minX,c=e[s].minY,l=e[s].maxX,f=e[s].maxY;u<a.minX&&(a.minX=u),c<a.minY&&(a.minY=c),l>a.maxX&&(a.maxX=l),f>a.maxY&&(a.maxY=f)}return a}function ve(e,t,n,r){var i=t.geometry,o=t.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)me(a,i,e,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)me(a,i[s],e,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<i.length;u++){var c=i[u];for(s=0;s<c.length;s++)me(a,c[s],e,n,!0,0===s)}if(a.length){var l=t.tags||null;if("LineString"===o&&r.lineMetrics){for(var f in l={},t.tags)l[f]=t.tags[f];l.mapbox_clip_start=i.start/i.size,l.mapbox_clip_end=i.end/i.size}var p={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:l};null!==t.id&&(p.id=t.id),e.features.push(p)}}function me(e,t,n,r,i,o){var a=r*r;if(r>0&&t.size<(i?a:r))n.numPoints+=t.length/3;else{for(var s=[],u=0;u<t.length;u+=3)(0===r||t[u+2]>a)&&(n.numSimplified++,s.push(t[u]),s.push(t[u+1])),n.numPoints++;i&&function(e,t){for(var n=0,r=0,i=e.length,o=i-2;r<i;o=r,r+=2)n+=(e[r]-e[o])*(e[r+1]+e[o+1]);if(n>0===t)for(r=0,i=e.length;r<i/2;r+=2){var a=e[r],s=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=a,e[i-1-r]=s}}(s,o),e.push(s)}}function ge(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)K(n,e.features[r],t,r);else K(n,"Feature"===e.type?e:{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(e,t){var n=t.buffer/t.extent,r=e,i=ne(e,1,-1-n,n,0,-1,2,t),o=ne(e,1,1-n,2+n,0,-1,2,t);return(i||o)&&(r=ne(e,1,-n,1+n,0,-1,2,t)||[],i&&(r=le(i,1).concat(r)),o&&(r=r.concat(le(o,-1)))),r}(r,t)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ye(e,t,n){return 32*((1<<e)*n+t)+e}function be(e,t){var n=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return t(null,null);var i=new v(r.features),o=_(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),t(null,{vectorTile:i,rawData:o.buffer})}N.prototype.load=function(e){var t=this.options,n=t.log,r=t.minZoom,i=t.maxZoom,o=t.nodeSize;n&&console.time("total time");var a="prepare "+e.length+" points";n&&console.time(a),this.points=e;for(var s=[],u=0;u<e.length;u++)e[u].geometry&&s.push(z(e[u],u));this.trees[i+1]=new L(s,W,q,o,Float32Array),n&&console.timeEnd(a);for(var c=i;c>=r;c--){var l=+Date.now();s=this._cluster(s,c),this.trees[c]=new L(s,W,q,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",c,s.length,+Date.now()-l)}return n&&console.timeEnd("total time"),this},N.prototype.getClusters=function(e,t){var n=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),i=180===e[2]?180:((e[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],t),s=this.getClusters([-180,r,i,o],t);return a.concat(s)}for(var u=this.trees[this._limitZoom(t)],c=[],l=0,f=u.range(V(n),H(o),V(i),H(r));l<f.length;l+=1){var p=u.points[f[l]];c.push(p.numPoints?B(p):this.points[p.index])}return c},N.prototype.getChildren=function(e){var t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[t];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=[],u=0,c=i.within(o.x,o.y,a);u<c.length;u+=1){var l=i.points[c[u]];l.parentId===e&&s.push(l.numPoints?B(l):this.points[l.index])}if(0===s.length)throw new Error(r);return s},N.prototype.getLeaves=function(e,t,n){var r=[];return this._appendLeaves(r,e,t=t||10,n=n||0,0),r},N.prototype.getTile=function(e,t,n){var r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),o=this.options,a=o.radius/o.extent,s=(n-a)/i,u=(n+1+a)/i,c={features:[]};return this._addTileFeatures(r.range((t-a)/i,s,(t+1+a)/i,u),r.points,t,n,i,c),0===t&&this._addTileFeatures(r.range(1-a/i,s,1,u),r.points,i,n,i,c),t===i-1&&this._addTileFeatures(r.range(0,s,a/i,u),r.points,-1,n,i,c),c.features.length?c:null},N.prototype.getClusterExpansionZoom=function(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t},N.prototype._appendLeaves=function(e,t,n,r,i){for(var o=0,a=this.getChildren(t);o<a.length;o+=1){var s=a[o],u=s.properties;if(u&&u.cluster?i+u.point_count<=r?i+=u.point_count:i=this._appendLeaves(e,u.cluster_id,n,r,i):i<r?i++:e.push(s),e.length===n)break}return i},N.prototype._addTileFeatures=function(e,t,n,r,i,o){for(var a=0,s=e;a<s.length;a+=1){var u=t[s[a]],c=u.numPoints,l={type:1,geometry:[[Math.round(this.options.extent*(u.x*i-n)),Math.round(this.options.extent*(u.y*i-r))]],tags:c?U(u):this.points[u.index].properties},f=void 0;c?f=u.id:this.options.generateId?f=u.index:this.points[u.index].id&&(f=this.points[u.index].id),void 0!==f&&(l.id=f),o.features.push(l)}},N.prototype._limitZoom=function(e){return Math.max(this.options.minZoom,Math.min(+e,this.options.maxZoom+1))},N.prototype._cluster=function(e,t){for(var n=[],r=this.options,i=r.reduce,o=r.minPoints,a=r.radius/(r.extent*Math.pow(2,t)),s=0;s<e.length;s++){var u=e[s];if(!(u.zoom<=t)){u.zoom=t;for(var c=this.trees[t+1],l=c.within(u.x,u.y,a),f=u.numPoints||1,p=f,h=0,d=l;h<d.length;h+=1){var v=c.points[d[h]];v.zoom>t&&(p+=v.numPoints||1)}if(p>=o){for(var m=u.x*f,g=u.y*f,y=i&&f>1?this._map(u,!0):null,b=(s<<5)+(t+1)+this.points.length,_=0,x=l;_<x.length;_+=1){var w=c.points[x[_]];if(!(w.zoom<=t)){w.zoom=t;var O=w.numPoints||1;m+=w.x*O,g+=w.y*O,w.parentId=b,i&&(y||(y=this._map(u,!0)),i(y,this._map(w)))}}u.parentId=b,n.push(F(m/p,g/p,b,p,y))}else if(n.push(u),p>1)for(var E=0,S=l;E<S.length;E+=1){var j=c.points[S[E]];j.zoom<=t||(j.zoom=t,n.push(j))}}}return n},N.prototype._getOriginId=function(e){return e-this.points.length>>5},N.prototype._getOriginZoom=function(e){return(e-this.points.length)%32},N.prototype._map=function(e,t){if(e.numPoints)return t?G({},e.properties):e.properties;var n=this.points[e.index].properties,r=this.options.map(n);return t&&r===n?G({},r):r},ge.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ge.prototype.splitTile=function(e,t,n,r,i,o,a){for(var s=[e,t,n,r],u=this.options,c=u.debug;s.length;){r=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var l=1<<t,f=ye(t,n,r),p=this.tiles[f];if(!p&&(c>1&&console.time("creation"),p=this.tiles[f]=de(e,t,n,r,u),this.tileCoords.push({z:t,x:n,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var h="z"+t;this.stats[h]=(this.stats[h]||0)+1,this.total++}if(p.source=e,i){if(t===u.maxZoom||t===i)continue;var d=1<<i-t;if(n!==Math.floor(o/d)||r!==Math.floor(a/d))continue}else if(t===u.indexMaxZoom||p.numPoints<=u.indexMaxPoints)continue;if(p.source=null,0!==e.length){c>1&&console.time("clipping");var v,m,g,y,b,_,x=.5*u.buffer/u.extent,w=.5-x,O=.5+x,E=1+x;v=m=g=y=null,b=ne(e,l,n-x,n+O,0,p.minX,p.maxX,u),_=ne(e,l,n+w,n+E,0,p.minX,p.maxX,u),e=null,b&&(v=ne(b,l,r-x,r+O,1,p.minY,p.maxY,u),m=ne(b,l,r+w,r+E,1,p.minY,p.maxY,u),b=null),_&&(g=ne(_,l,r-x,r+O,1,p.minY,p.maxY,u),y=ne(_,l,r+w,r+E,1,p.minY,p.maxY,u),_=null),c>1&&console.timeEnd("clipping"),s.push(v||[],t+1,2*n,2*r),s.push(m||[],t+1,2*n,2*r+1),s.push(g||[],t+1,2*n+1,2*r),s.push(y||[],t+1,2*n+1,2*r+1)}}},ge.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,o=r.debug;if(e<0||e>24)return null;var a=1<<e,s=ye(e,t=(t%a+a)%a,n);if(this.tiles[s])return pe(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var u,c=e,l=t,f=n;!u&&c>0;)c--,l=Math.floor(l/2),f=Math.floor(f/2),u=this.tiles[ye(c,l,f)];return u&&u.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,l,f),o>1&&console.time("drilling down"),this.splitTile(u.source,c,l,f,e,t,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?pe(this.tiles[s],i):null):null};var _e=function(t){function n(e,n,r,i){t.call(this,e,n,r,be),i&&(this.loadGeoJSON=i)}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.loadData=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=t,this._pendingLoadDataParams=e,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},n.prototype._loadData=function(){var t=this;if(this._pendingCallback&&this._pendingLoadDataParams){var n=this._pendingCallback,r=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var i=!!(r&&r.request&&r.request.collectResourceTiming)&&new e.RequestPerformance(r.request);this.loadGeoJSON(r,(function(o,a){if(o||!a)return n(o);if("object"!=typeof a)return n(new Error("Input data given to '"+r.source+"' is not a valid GeoJSON object."));!function e(t,n){var r,i=t&&t.type;if("FeatureCollection"===i)for(r=0;r<t.features.length;r++)e(t.features[r],n);else if("GeometryCollection"===i)for(r=0;r<t.geometries.length;r++)e(t.geometries[r],n);else if("Feature"===i)e(t.geometry,n);else if("Polygon"===i)f(t.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<t.coordinates.length;r++)f(t.coordinates[r],n);return t}(a,!0);try{if(r.filter){var s=e.createExpression(r.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===s.result)throw new Error(s.value.map((function(e){return e.key+": "+e.message})).join(", "));var u=a.features.filter((function(e){return s.value.evaluate({zoom:0},e)}));a={type:"FeatureCollection",features:u}}t._geoJSONIndex=r.cluster?new N(function(t){var n=t.superclusterOptions,r=t.clusterProperties;if(!r||!n)return n;for(var i={},o={},a={accumulated:null,zoom:0},s={properties:null},u=Object.keys(r),c=0,l=u;c<l.length;c+=1){var f=l[c],p=r[f],h=p[0],d=e.createExpression(p[1]),v=e.createExpression("string"==typeof h?[h,["accumulated"],["get",f]]:h);i[f]=d.value,o[f]=v.value}return n.map=function(e){s.properties=e;for(var t={},n=0,r=u;n<r.length;n+=1){var o=r[n];t[o]=i[o].evaluate(a,s)}return t},n.reduce=function(e,t){s.properties=t;for(var n=0,r=u;n<r.length;n+=1){var i=r[n];a.accumulated=e[i],e[i]=o[i].evaluate(a,s)}},n}(r)).load(a.features):function(e,t){return new ge(e,t)}(a,r.geojsonVtOptions)}catch(o){return n(o)}t.loaded={};var c={};if(i){var l=i.finish();l&&(c.resourceTiming={},c.resourceTiming[r.source]=JSON.parse(JSON.stringify(l)))}n(null,c)}))}},n.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},n.prototype.reloadTile=function(e,n){var r=this.loaded;return r&&r[e.uid]?t.prototype.reloadTile.call(this,e,n):this.loadTile(e,n)},n.prototype.loadGeoJSON=function(t,n){if(t.request)e.getJSON(t.request,n);else{if("string"!=typeof t.data)return n(new Error("Input data given to '"+t.source+"' is not a valid GeoJSON object."));try{return n(null,JSON.parse(t.data))}catch(e){return n(new Error("Input data given to '"+t.source+"' is not a valid GeoJSON object."))}}},n.prototype.removeSource=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()},n.prototype.getClusterExpansionZoom=function(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}},n.prototype.getClusterChildren=function(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}},n.prototype.getClusterLeaves=function(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}},n}(u),xe=function(t){var n=this;this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:u,geojson:_e},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(n.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');n.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(t){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}};return xe.prototype.setReferrer=function(e,t){this.referrer=t},xe.prototype.setImages=function(e,t,n){for(var r in this.availableImages[e]=t,this.workerSources[e]){var i=this.workerSources[e][r];for(var o in i)i[o].availableImages=t}n()},xe.prototype.setLayers=function(e,t,n){this.getLayerIndex(e).replace(t),n()},xe.prototype.updateLayers=function(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()},xe.prototype.loadTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).loadTile(t,n)},xe.prototype.loadDEMTile=function(e,t,n){this.getDEMWorkerSource(e,t.source).loadTile(t,n)},xe.prototype.reloadTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).reloadTile(t,n)},xe.prototype.abortTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)},xe.prototype.removeTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)},xe.prototype.removeDEMTile=function(e,t){this.getDEMWorkerSource(e,t.source).removeTile(t)},xe.prototype.removeSource=function(e,t,n){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var r=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,n):n()}},xe.prototype.loadWorkerSource=function(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}},xe.prototype.syncRTLPluginState=function(t,n,r){try{e.plugin.setState(n);var i=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=i){this.self.importScripts(i);var o=e.plugin.isParsed();r(o?void 0:new Error("RTL Text Plugin failed to import scripts from "+i),o)}}catch(e){r(e.toString())}},xe.prototype.getAvailableImages=function(e){var t=this.availableImages[e];return t||(t=[]),t},xe.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new r),t},xe.prototype.getWorkerSource=function(e,t,n){var r=this;return this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),this.workerSources[e][t][n]||(this.workerSources[e][t][n]=new this.workerSourceTypes[t]({send:function(t,n,i){r.actor.send(t,n,i,e)}},this.getLayerIndex(e),this.getAvailableImages(e))),this.workerSources[e][t][n]},xe.prototype.getDEMWorkerSource=function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new l),this.demWorkerSources[e][t]},xe.prototype.enforceCacheSizeLimit=function(t,n){e.enforceCacheSizeLimit(n)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new xe(self)),xe})),r(["./shared"],(function(e){var t=e.createCommonjsModule((function(e){function t(e){return!n(e)}function n(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var n=t.getImageData(0,0,1,1);return n&&n.width===e.width}()?(void 0===r[n=e&&e.failIfMajorPerformanceCaveat]&&(r[n]=function(e){var n=function(e){var n=document.createElement("canvas"),r=Object.create(t.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=e,n.probablySupportsContext?n.probablySupportsContext("webgl",r)||n.probablySupportsContext("experimental-webgl",r):n.supportsContext?n.supportsContext("webgl",r)||n.supportsContext("experimental-webgl",r):n.getContext("webgl",r)||n.getContext("experimental-webgl",r)}(e);if(!n)return!1;var r=n.createShader(n.VERTEX_SHADER);return!(!r||n.isContextLost())&&(n.shaderSource(r,"void main() {}"),n.compileShader(r),!0===n.getShaderParameter(r,n.COMPILE_STATUS))}(n)),r[n]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var n}e.exports?e.exports=t:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=t,window.mapboxgl.notSupportedReason=n);var r={};t.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),n={create:function(t,n,r){var i=e.window.document.createElement(t);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i},createNS:function(t,n){return e.window.document.createElementNS(t,n)}},r=e.window.document&&e.window.document.documentElement.style;function i(e){if(!r)return e[0];for(var t=0;t<e.length;t++)if(e[t]in r)return e[t];return e[0]}var o,a=i(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){r&&a&&(o=r[a],r[a]="none")},n.enableDrag=function(){r&&a&&(r[a]=o)};var s=i(["transform","WebkitTransform"]);n.setTransform=function(e,t){e.style[s]=t};var u=!1;try{var c=Object.defineProperty({},"passive",{get:function(){u=!0}});e.window.addEventListener("test",c,c),e.window.removeEventListener("test",c,c)}catch(e){u=!1}n.addEventListener=function(e,t,n,r){void 0===r&&(r={}),e.addEventListener(t,n,"passive"in r&&u?r:r.capture)},n.removeEventListener=function(e,t,n,r){void 0===r&&(r={}),e.removeEventListener(t,n,"passive"in r&&u?r:r.capture)};var l=function t(n){n.preventDefault(),n.stopPropagation(),e.window.removeEventListener("click",t,!0)};function f(e){var t=e.userImage;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}n.suppressClick=function(){e.window.addEventListener("click",l,!0),e.window.setTimeout((function(){e.window.removeEventListener("click",l,!0)}),0)},n.mousePos=function(t,n){var r=t.getBoundingClientRect();return new e.Point(n.clientX-r.left-t.clientLeft,n.clientY-r.top-t.clientTop)},n.touchPos=function(t,n){for(var r=t.getBoundingClientRect(),i=[],o=0;o<n.length;o++)i.push(new e.Point(n[o].clientX-r.left-t.clientLeft,n[o].clientY-r.top-t.clientTop));return i},n.mouseButton=function(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button},n.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};var p=function(t){function n(){t.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.isLoaded=function(){return this.loaded},n.prototype.setLoaded=function(e){if(this.loaded!==e&&(this.loaded=e,e)){for(var t=0,n=this.requestors;t<n.length;t+=1){var r=n[t];this._notify(r.ids,r.callback)}this.requestors=[]}},n.prototype.getImage=function(e){return this.images[e]},n.prototype.addImage=function(e,t){this._validate(e,t)&&(this.images[e]=t)},n.prototype._validate=function(t,n){var r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+t+'" has invalid "stretchX" value'))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+t+'" has invalid "stretchY" value'))),r=!1),this._validateContent(n.content,n)||(this.fire(new e.ErrorEvent(new Error('Image "'+t+'" has invalid "content" value'))),r=!1),r},n.prototype._validateStretch=function(e,t){if(!e)return!0;for(var n=0,r=0,i=e;r<i.length;r+=1){var o=i[r];if(o[0]<n||o[1]<o[0]||t<o[1])return!1;n=o[1]}return!0},n.prototype._validateContent=function(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))},n.prototype.updateImage=function(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0},n.prototype.removeImage=function(e){var t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()},n.prototype.listImages=function(){return Object.keys(this.images)},n.prototype.getImages=function(e,t){var n=!0;if(!this.isLoaded())for(var r=0,i=e;r<i.length;r+=1)this.images[i[r]]||(n=!1);this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})},n.prototype._notify=function(t,n){for(var r={},i=0,o=t;i<o.length;i+=1){var a=o[i];this.images[a]||this.fire(new e.Event("styleimagemissing",{id:a}));var s=this.images[a];s?r[a]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:e.warnOnce('Image "'+a+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}n(null,r)},n.prototype.getPixelSize=function(){var e=this.atlasImage;return{width:e.width,height:e.height}},n.prototype.getPattern=function(t){var n=this.patterns[t],r=this.getImage(t);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{var i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},o=new e.ImagePosition(i,r);this.patterns[t]={bin:i,position:o}}return this._updatePatternAtlas(),this.patterns[t].position},n.prototype.bind=function(t){var n=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)},n.prototype._updatePatternAtlas=function(){var t=[];for(var n in this.patterns)t.push(this.patterns[n].bin);var r=e.potpack(t),i=r.w,o=r.h,a=this.atlasImage;for(var s in a.resize({width:i||1,height:o||1}),this.patterns){var u=this.patterns[s].bin,c=u.x+1,l=u.y+1,f=this.images[s].data,p=f.width,h=f.height;e.RGBAImage.copy(f,a,{x:0,y:0},{x:c,y:l},{width:p,height:h}),e.RGBAImage.copy(f,a,{x:0,y:h-1},{x:c,y:l-1},{width:p,height:1}),e.RGBAImage.copy(f,a,{x:0,y:0},{x:c,y:l+h},{width:p,height:1}),e.RGBAImage.copy(f,a,{x:p-1,y:0},{x:c-1,y:l},{width:1,height:h}),e.RGBAImage.copy(f,a,{x:0,y:0},{x:c+p,y:l},{width:1,height:h})}this.dirty=!0},n.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},n.prototype.dispatchRenderCallbacks=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(!this.callbackDispatchedThisFrame[r]){this.callbackDispatchedThisFrame[r]=!0;var i=this.images[r];f(i)&&this.updateImage(r,i)}}},n}(e.Evented),h=m,d=m,v=1e20;function m(e,t,n,r,i,o){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function g(e,t,n,r,i,o,a){for(var s=0;s<t;s++){for(var u=0;u<n;u++)r[u]=e[u*t+s];for(y(r,i,o,a,n),u=0;u<n;u++)e[u*t+s]=i[u]}for(u=0;u<n;u++){for(s=0;s<t;s++)r[s]=e[u*t+s];for(y(r,i,o,a,t),s=0;s<t;s++)e[u*t+s]=Math.sqrt(i[s])}}function y(e,t,n,r,i){n[0]=0,r[0]=-v,r[1]=+v;for(var o=1,a=0;o<i;o++){for(var s=(e[o]+o*o-(e[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=r[a];)a--,s=(e[o]+o*o-(e[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,r[a]=s,r[a+1]=+v}for(o=0,a=0;o<i;o++){for(;r[a+1]<o;)a++;t[o]=(o-n[a])*(o-n[a])+e[n[a]]}}m.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var t=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var i=t.data[4*r+3]/255;this.gridOuter[r]=1===i?0:0===i?v:Math.pow(Math.max(0,.5-i),2),this.gridInner[r]=1===i?v:0===i?0:Math.pow(Math.max(0,i-.5),2)}for(g(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),g(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++)n[r]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[r]-this.gridInner[r])/this.radius+this.cutoff))));return n},h["default"]=d;var b=function(e,t){this.requestManager=e,this.localIdeographFontFamily=t,this.entries={}};b.prototype.setURL=function(e){this.url=e},b.prototype.getGlyphs=function(t,n){var r=this,i=[];for(var o in t)for(var a=0,s=t[o];a<s.length;a+=1)i.push({stack:o,id:s[a]});e.asyncAll(i,(function(e,t){var n=e.stack,i=e.id,o=r.entries[n];o||(o=r.entries[n]={glyphs:{},requests:{},ranges:{}});var a=o.glyphs[i];if(void 0===a){if(a=r._tinySDF(o,n,i))return o.glyphs[i]=a,void t(null,{stack:n,id:i,glyph:a});var s=Math.floor(i/256);if(256*s>65535)t(new Error("glyphs > 65535 not supported"));else if(o.ranges[s])t(null,{stack:n,id:i,glyph:a});else{var u=o.requests[s];u||(u=o.requests[s]=[],b.loadGlyphRange(n,s,r.url,r.requestManager,(function(e,t){if(t){for(var n in t)r._doesCharSupportLocalGlyph(+n)||(o.glyphs[+n]=t[+n]);o.ranges[s]=!0}for(var i=0,a=u;i<a.length;i+=1)(0,a[i])(e,t);delete o.requests[s]}))),u.push((function(e,r){e?t(e):r&&t(null,{stack:n,id:i,glyph:r[i]||null})}))}}else t(null,{stack:n,id:i,glyph:a})}),(function(e,t){if(e)n(e);else if(t){for(var r={},i=0,o=t;i<o.length;i+=1){var a=o[i],s=a.stack,u=a.id,c=a.glyph;(r[s]||(r[s]={}))[u]=c&&{id:c.id,bitmap:c.bitmap.clone(),metrics:c.metrics}}n(null,r)}}))},b.prototype._doesCharSupportLocalGlyph=function(t){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](t)||e.isChar["Hangul Syllables"](t)||e.isChar.Hiragana(t)||e.isChar.Katakana(t))},b.prototype._tinySDF=function(t,n,r){var i=this.localIdeographFontFamily;if(i&&this._doesCharSupportLocalGlyph(r)){var o=t.tinySDF;if(!o){var a="400";/bold/i.test(n)?a="900":/medium/i.test(n)?a="500":/light/i.test(n)&&(a="200"),o=t.tinySDF=new b.TinySDF(24,3,8,.25,i,a)}return{id:r,bitmap:new e.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},b.loadGlyphRange=function(t,n,r,i,o){var a=256*n,s=a+255,u=i.transformRequest(i.normalizeGlyphsURL(r).replace("{fontstack}",t).replace("{range}",a+"-"+s),e.ResourceType.Glyphs);e.getArrayBuffer(u,(function(t,n){if(t)o(t);else if(n){for(var r={},i=0,a=e.parseGlyphPBF(n);i<a.length;i+=1){var s=a[i];r[s.id]=s}o(null,r)}}))},b.TinySDF=h;var _=function(){this.specification=e.styleSpec.light.position};_.prototype.possiblyEvaluate=function(t,n){return e.sphericalToCartesian(t.expression.evaluate(n))},_.prototype.interpolate=function(t,n,r){return{x:e.number(t.x,n.x,r),y:e.number(t.y,n.y,r),z:e.number(t.z,n.z,r)}};var x=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new _,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),w=function(t){function n(n){t.call(this),this._transitionable=new e.Transitionable(x),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(t,n){if(void 0===n&&(n={}),!this._validate(e.validateLight,t,n))for(var r in t){var i=t[r];e.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-"-transition".length),i):this._transitionable.setValue(r,i)}},n.prototype.updateTransitions=function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(e){this.properties=this._transitioning.possiblyEvaluate(e)},n.prototype._validate=function(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},n}(e.Evented),O=function(e,t){this.width=e,this.height=t,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};O.prototype.getDash=function(e,t){var n=e.join(",")+String(t);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(e,t)),this.dashEntry[n]},O.prototype.getDashRanges=function(e,t,n){var r=[],i=e.length%2==1?-e[e.length-1]*n:0,o=e[0]*n,a=!0;r.push({left:i,right:o,isDash:a,zeroLength:0===e[0]});for(var s=e[0],u=1;u<e.length;u++){var c=e[u];r.push({left:i=s*n,right:o=(s+=c)*n,isDash:a=!a,zeroLength:0===c})}return r},O.prototype.addRoundDash=function(e,t,n){for(var r=t/2,i=-n;i<=n;i++)for(var o=this.width*(this.nextRow+n+i),a=0,s=e[a],u=0;u<this.width;u++){u/s.right>1&&(s=e[++a]);var c=Math.abs(u-s.left),l=Math.abs(u-s.right),f=Math.min(c,l),p=void 0,h=i/n*(r+1);if(s.isDash){var d=r-Math.abs(h);p=Math.sqrt(f*f+d*d)}else p=r-Math.sqrt(f*f+h*h);this.data[o+u]=Math.max(0,Math.min(255,p+128))}},O.prototype.addRegularDash=function(e){for(var t=e.length-1;t>=0;--t){var n=e[t],r=e[t+1];n.zeroLength?e.splice(t,1):r&&r.isDash===n.isDash&&(r.left=n.left,e.splice(t,1))}var i=e[0],o=e[e.length-1];i.isDash===o.isDash&&(i.left=o.left-this.width,o.right=i.right+this.width);for(var a=this.width*this.nextRow,s=0,u=e[s],c=0;c<this.width;c++){c/u.right>1&&(u=e[++s]);var l=Math.abs(c-u.left),f=Math.abs(c-u.right),p=Math.min(l,f);this.data[a+c]=Math.max(0,Math.min(255,(u.isDash?p:-p)+128))}},O.prototype.addDash=function(t,n){var r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<t.length;a++)o+=t[a];if(0!==o){var s=this.width/o,u=this.getDashRanges(t,this.width,s);n?this.addRoundDash(u,s,r):this.addRegularDash(u)}var c={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=i,this.dirty=!0,c},O.prototype.bind=function(e){var t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))};var E=function t(n,r){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var i=this.workerPool.acquire(this.id),o=0;o<i.length;o++){var a=new t.Actor(i[o],r,this.id);a.name="Worker "+o,this.actors.push(a)}};function S(t,n,r){var i=function(i,o){if(i)return r(i);if(o){var a=e.pick(e.extend(o,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(a.vectorLayers=o.vector_layers,a.vectorLayerIds=a.vectorLayers.map((function(e){return e.id}))),a.tiles=n.canonicalizeTileset(a,t.url),r(null,a)}};return t.url?e.getJSON(n.transformRequest(n.normalizeSourceURL(t.url),e.ResourceType.Source),i):e.browser.frame((function(){return i(null,t)}))}E.prototype.broadcast=function(t,n,r){e.asyncAll(this.actors,(function(e,r){e.send(t,n,r)}),r=r||function(){})},E.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},E.prototype.remove=function(){this.actors.forEach((function(e){e.remove()})),this.actors=[],this.workerPool.release(this.id)},E.Actor=e.Actor;var j=function(t,n,r){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=n||0,this.maxzoom=r||24};j.prototype.validateBounds=function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]},j.prototype.contains=function(t){var n=Math.pow(2,t.z),r=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*n);return t.x>=r&&t.x<o&&t.y>=i&&t.y<a};var A=function(t){function n(n,r,i,o){if(t.call(this),this.id=n,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(r,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.load=function(){var t=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=S(this._options,this.map._requestManager,(function(n,r){t._tileJSONRequest=null,t._loaded=!0,n?t.fire(new e.ErrorEvent(n)):r&&(e.extend(t,r),r.bounds&&(t.tileBounds=new j(r.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(r.tiles,t.map._requestManager._customAccessToken),e.postMapLoadEvent(r.tiles,t.map._getMapId(),t.map._requestManager._skuToken,t.map._requestManager._customAccessToken),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.setSourceProperty=function(e){this._tileJSONRequest&&this._tileJSONRequest.cancel(),e(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},n.prototype.setTiles=function(e){var t=this;return this.setSourceProperty((function(){t._options.tiles=e})),this},n.prototype.setUrl=function(e){var t=this;return this.setSourceProperty((function(){t.url=e,t._options.url=e})),this},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return e.extend({},this._options)},n.prototype.loadTile=function(t,n){var r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),i={request:this.map._requestManager.transformRequest(r,e.ResourceType.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function o(r,i){return delete t.request,t.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(t.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&t.setExpiryData(i),t.loadVectorData(i,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}i.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state?"loading"===t.state?t.reloadCallback=n:t.request=t.actor.send("reloadTile",i,o.bind(this)):(t.actor=this.dispatcher.getActor(),t.request=t.actor.send("loadTile",i,o.bind(this)))},n.prototype.abortTile=function(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0)},n.prototype.unloadTile=function(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0)},n.prototype.hasTransition=function(){return!1},n}(e.Evented),k=function(t){function n(n,r,i,o){t.call(this),this.id=n,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},r),e.extend(this,e.pick(r,["url","scheme","tileSize"]))}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.load=function(){var t=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=S(this._options,this.map._requestManager,(function(n,r){t._tileJSONRequest=null,t._loaded=!0,n?t.fire(new e.ErrorEvent(n)):r&&(e.extend(t,r),r.bounds&&(t.tileBounds=new j(r.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(r.tiles),e.postMapLoadEvent(r.tiles,t.map._getMapId(),t.map._requestManager._skuToken),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return e.extend({},this._options)},n.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},n.prototype.loadTile=function(t,n){var r=this,i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(i,e.ResourceType.Tile),(function(i,o){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(i)t.state="errored",n(i);else if(o){r.map._refreshExpiredTiles&&t.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=r.map.painter.context,s=a.gl;t.texture=r.map.painter.getTileTexture(o.width),t.texture?t.texture.update(o,{useMipmap:!0}):(t.texture=new e.Texture(a,o,s.RGBA,{useMipmap:!0}),t.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),t.state="loaded",e.cacheEntryPossiblyAdded(r.dispatcher),n(null)}}))},n.prototype.abortTile=function(e,t){e.request&&(e.request.cancel(),delete e.request),t()},n.prototype.unloadTile=function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()},n.prototype.hasTransition=function(){return!1},n}(e.Evented),C=function(t){function n(n,r,i,o){t.call(this,n,r,i,o),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox"}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(t,n){var r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function i(e,r){e&&(t.state="errored",n(e)),r&&(t.dem=r,t.needsHillshadePrepare=!0,t.state="loaded",n(null))}t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),function(r,o){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(r)t.state="errored",n(r);else if(o){this.map._refreshExpiredTiles&&t.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=e.window.ImageBitmap&&o instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported()?o:e.browser.getImageData(o,1),s={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:a,encoding:this.encoding};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",s,i.bind(this)))}}.bind(this)),t.neighboringTiles=this._getNeighboringTiles(t.tileID)},n.prototype._getNeighboringTiles=function(t){var n=t.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?t.wrap-1:t.wrap,a=(n.x+1+r)%r,s=n.x+1===r?t.wrap+1:t.wrap,u={};return u[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(u[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(u[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),u},n.prototype.unloadTile=function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&e.actor.send("removeDEMTile",{uid:e.uid,source:this.id})},n}(k),T=function(t){function n(n,r,i,o){t.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=i.getActor(),this.setEventedParent(o),this._data=r.data,this._options=e.extend({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;var a=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*a,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*a,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:e.EXTENT,radius:(r.clusterRadius||50)*a,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions)}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.load=function(){var t=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(n){if(n)t.fire(new e.ErrorEvent(n));else{var r={dataType:"source",sourceDataType:"metadata"};t._collectResourceTiming&&t._resourceTiming&&t._resourceTiming.length>0&&(r.resourceTiming=t._resourceTiming,t._resourceTiming=[]),t.fire(new e.Event("data",r))}}))},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.setData=function(t){var n=this;return this._data=t,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(t){if(t)n.fire(new e.ErrorEvent(t));else{var r={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(r.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new e.Event("data",r))}})),this},n.prototype.getClusterExpansionZoom=function(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this},n.prototype.getClusterChildren=function(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this},n.prototype.getClusterLeaves=function(e,t,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},r),this},n.prototype._updateWorkerData=function(t){var n=this;this._loaded=!1;var r=e.extend({},this.workerOptions),i=this._data;"string"==typeof i?(r.request=this.map._requestManager.transformRequest(e.browser.resolveURL(i),e.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(i),this.actor.send(this.type+".loadData",r,(function(e,i){n._removed||i&&i.abandoned||(n._loaded=!0,i&&i.resourceTiming&&i.resourceTiming[n.id]&&(n._resourceTiming=i.resourceTiming[n.id].slice(0)),n.actor.send(n.type+".coalesce",{source:r.source},null),t(e))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.loadTile=function(t,n){var r=this,i=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(i,{type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(e,o){return delete t.request,t.unloadVectorData(),t.aborted?n(null):e?n(e):(t.loadVectorData(o,r.map.painter,"reloadTile"===i),n(null))}))},n.prototype.abortTile=function(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0},n.prototype.unloadTile=function(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})},n.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},n.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(e.Evented),M=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),P=function(t){function n(e,n,r,i){t.call(this),this.id=e,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(i),this.options=n}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.load=function(t,n){var r=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),(function(i,o){r._loaded=!0,i?r.fire(new e.ErrorEvent(i)):o&&(r.image=o,t&&(r.coordinates=t),n&&n(),r._finishLoading())}))},n.prototype.loaded=function(){return this._loaded},n.prototype.updateImage=function(e){var t=this;return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates,(function(){t.texture=null})),this):this},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.setCoordinates=function(t){var n=this;this.coordinates=t;var r=t.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(t){for(var n=1/0,r=1/0,i=-1/0,o=-1/0,a=0,s=t;a<s.length;a+=1){var u=s[a];n=Math.min(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.x),o=Math.max(o,u.y)}var c=Math.max(i-n,o-r),l=Math.max(0,Math.floor(-Math.log(c)/Math.LN2)),f=Math.pow(2,l);return new e.CanonicalTileID(l,Math.floor((n+i)/2*f),Math.floor((r+o)/2*f))}(r),this.minzoom=this.maxzoom=this.tileID.z;var i=r.map((function(e){return n.tileID.getTilePoint(e)._round()}));return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(i[2].x,i[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,n=t.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,M.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.loadTile=function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(e.Evented),I=function(t){function n(e,n,r,i){t.call(this,e,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.load=function(){var t=this;this._loaded=!1;var n=this.options;this.urls=[];for(var r=0,i=n.urls;r<i.length;r+=1)this.urls.push(this.map._requestManager.transformRequest(i[r],e.ResourceType.Source).url);e.getVideo(this.urls,(function(n,r){t._loaded=!0,n?t.fire(new e.ErrorEvent(n)):r&&(t.video=r,t.video.loop=!0,t.video.setAttribute("playsinline",""),t.video.addEventListener("playing",(function(){t.map.triggerRepaint()})),t.map&&t.video.play(),t._finishLoading())}))},n.prototype.pause=function(){this.video&&this.video.pause()},n.prototype.play=function(){this.video&&this.video.play()},n.prototype.seek=function(t){if(this.video){var n=this.video.seekable;t<n.start(0)||t>n.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+n.start(0)+" and "+n.end(0)+"-second mark."))):this.video.currentTime=t}},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,n=t.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,M.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(P),R=function(t){function n(n,r,i,o){t.call(this,n,r,i,o),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some((function(e){return!Array.isArray(e)||2!==e.length||e.some((function(e){return"number"!=typeof e}))}))||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,M.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(n,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[i];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var e=0,t=[this.canvas.width,this.canvas.height];e<t.length;e+=1){var n=t[e];if(isNaN(n)||n<=0)return!0}return!1},n}(P),L={vector:A,raster:k,"raster-dem":C,geojson:T,video:I,image:P,canvas:R};function D(t,n){var r=e.identity([]);return e.translate(r,r,[1,1,0]),e.scale(r,r,[.5*t.width,.5*t.height,1]),e.multiply(r,r,t.calculatePosMatrix(n.toUnwrapped()))}function N(e,t,n,r,i,o){var a=function(e,t,n){if(e)for(var r=0,i=e;r<i.length;r+=1){var o=t[i[r]];if(o&&o.source===n&&"fill-extrusion"===o.type)return!0}else for(var a in t){var s=t[a];if(s.source===n&&"fill-extrusion"===s.type)return!0}return!1}(i&&i.layers,t,e.id),s=o.maxPitchScaleFactor(),u=e.tilesIn(r,s,a);u.sort(F);for(var c=[],l=0,f=u;l<f.length;l+=1){var p=f[l];c.push({wrappedTileID:p.tileID.wrapped().key,queryResults:p.tile.queryRenderedFeatures(t,n,e._state,p.queryGeometry,p.cameraQueryGeometry,p.scale,i,o,s,D(e.transform,p.tileID))})}var h=function(e){for(var t={},n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.queryResults,s=o.wrappedTileID,u=n[s]=n[s]||{};for(var c in a)for(var l=a[c],f=u[c]=u[c]||{},p=t[c]=t[c]||[],h=0,d=l;h<d.length;h+=1){var v=d[h];f[v.featureIndex]||(f[v.featureIndex]=!0,p.push(v))}}return t}(c);for(var d in h)h[d].forEach((function(t){var n=t.feature,r=e.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r}));return h}function F(e,t){var n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}var z=function(e,t){this.max=e,this.onRemove=t,this.reset()};z.prototype.reset=function(){for(var e in this.data)for(var t=0,n=this.data[e];t<n.length;t+=1){var r=n[t];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},z.prototype.add=function(e,t,n){var r=this,i=e.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:t,timeout:void 0};if(void 0!==n&&(o.timeout=setTimeout((function(){r.remove(e,o)}),n)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},z.prototype.has=function(e){return e.wrapped().key in this.data},z.prototype.getAndRemove=function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null},z.prototype._getAndRemoveByKey=function(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value},z.prototype.getByKey=function(e){var t=this.data[e];return t?t[0].value:null},z.prototype.get=function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null},z.prototype.remove=function(e,t){if(!this.has(e))return this;var n=e.wrapped().key,r=void 0===t?0:this.data[n].indexOf(t),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this},z.prototype.setMaxSize=function(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this},z.prototype.filter=function(e){var t=[];for(var n in this.data)for(var r=0,i=this.data[n];r<i.length;r+=1){var o=i[r];e(o.value)||t.push(o)}for(var a=0,s=t;a<s.length;a+=1){var u=s[a];this.remove(u.value.tileID,u)}};var B=function(e,t,n){this.context=e;var r=e.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};B.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},B.prototype.updateData=function(e){var t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)},B.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var U={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},V=function(e,t,n,r){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,this.context=e;var i=e.gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};V.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},V.prototype.updateData=function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)},V.prototype.enableAttributes=function(e,t){for(var n=0;n<this.attributes.length;n++){var r=t.attributes[this.attributes[n].name];void 0!==r&&e.enableVertexAttribArray(r)}},V.prototype.setVertexAttribPointers=function(e,t,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],o=t.attributes[i.name];void 0!==o&&e.vertexAttribPointer(o,i.components,e[U[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}},V.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var H=function(e){this.gl=e.gl,this["default"]=this.getDefault(),this.current=this["default"],this.dirty=!1};H.prototype.get=function(){return this.current},H.prototype.set=function(e){},H.prototype.getDefault=function(){return this["default"]},H.prototype.setDefault=function(){this.set(this["default"])};var G=function(t){function n(){t.apply(this,arguments)}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.getDefault=function(){return e.Color.transparent},n.prototype.set=function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)},n}(H),W=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return 1},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)},t}(H),q=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return 0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)},t}(H),Z=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return[!0,!0,!0,!0]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)},t}(H),Y=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)},t}(H),X=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return 255},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)},t}(H),K=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},t.prototype.set=function(e){var t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)},t}(H),$=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)},t}(H),Q=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}},t}(H),J=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return[0,1]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)},t}(H),ee=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}},t}(H),te=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.LESS},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)},t}(H),ne=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}},t}(H),re=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[e.ONE,e.ZERO]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)},t}(H),ie=function(t){function n(){t.apply(this,arguments)}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.getDefault=function(){return e.Color.transparent},n.prototype.set=function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)},n}(H),oe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.FUNC_ADD},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)},t}(H),ae=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}},t}(H),se=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.BACK},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)},t}(H),ue=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.CCW},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)},t}(H),ce=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)},t}(H),le=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.TEXTURE0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)},t}(H),fe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)},t}(H),pe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}},t}(H),he=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}},t}(H),de=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}},t}(H),ve=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}},t}(H),me=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1},t}(H),ge=function(e){function t(t){e.call(this,t),this.vao=t.extVertexArrayObject}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)},t}(H),ye=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return 4},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}},t}(H),be=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}},t}(H),_e=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}},t}(H),xe=function(e){function t(t,n){e.call(this,t),this.context=t,this.parent=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t}(H),we=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.setDirty=function(){this.dirty=!0},t.prototype.set=function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}},t}(xe),Oe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}},t}(xe),Ee=function(e,t,n,r){this.context=e,this.width=t,this.height=n;var i=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new we(e,i),r&&(this.depthAttachment=new Oe(e,i))};Ee.prototype.destroy=function(){var e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){var n=this.depthAttachment.get();n&&e.deleteRenderbuffer(n)}e.deleteFramebuffer(this.framebuffer)};var Se=function(e,t,n){this.func=e,this.mask=t,this.range=n};Se.ReadOnly=!1,Se.ReadWrite=!0,Se.disabled=new Se(519,Se.ReadOnly,[0,1]);var je=function(e,t,n,r,i,o){this.test=e,this.ref=t,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o};je.disabled=new je({func:519,mask:0},0,0,7680,7680,7680);var Ae=function(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n};Ae.disabled=new Ae(Ae.Replace=[1,0],e.Color.transparent,[!1,!1,!1,!1]),Ae.unblended=new Ae(Ae.Replace,e.Color.transparent,[!0,!0,!0,!0]),Ae.alphaBlended=new Ae([1,771],e.Color.transparent,[!0,!0,!0,!0]);var ke=function(e,t,n){this.enable=e,this.mode=t,this.frontFace=n};ke.disabled=new ke(!1,1029,2305),ke.backCCW=new ke(!0,1029,2305);var Ce=function(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new G(this),this.clearDepth=new W(this),this.clearStencil=new q(this),this.colorMask=new Z(this),this.depthMask=new Y(this),this.stencilMask=new X(this),this.stencilFunc=new K(this),this.stencilOp=new $(this),this.stencilTest=new Q(this),this.depthRange=new J(this),this.depthTest=new ee(this),this.depthFunc=new te(this),this.blend=new ne(this),this.blendFunc=new re(this),this.blendColor=new ie(this),this.blendEquation=new oe(this),this.cullFace=new ae(this),this.cullFaceSide=new se(this),this.frontFace=new ue(this),this.program=new ce(this),this.activeTexture=new le(this),this.viewport=new fe(this),this.bindFramebuffer=new pe(this),this.bindRenderbuffer=new he(this),this.bindTexture=new de(this),this.bindVertexBuffer=new ve(this),this.bindElementBuffer=new me(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ge(this),this.pixelStoreUnpack=new ye(this),this.pixelStoreUnpackPremultiplyAlpha=new be(this),this.pixelStoreUnpackFlipY=new _e(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(e.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)};Ce.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ce.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ce.prototype.createIndexBuffer=function(e,t){return new B(this,e,t)},Ce.prototype.createVertexBuffer=function(e,t,n){return new V(this,e,t,n)},Ce.prototype.createRenderbuffer=function(e,t,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i},Ce.prototype.createFramebuffer=function(e,t,n){return new Ee(this,e,t,n)},Ce.prototype.clear=function(e){var t=e.color,n=e.depth,r=this.gl,i=0;t&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)},Ce.prototype.setCullFace=function(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))},Ce.prototype.setDepthMode=function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)},Ce.prototype.setStencilMode=function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)},Ce.prototype.setColorMode=function(t){e.deepEqual(t.blendFunction,Ae.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)},Ce.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Te=function(t){function n(n,r,i){var o=this;t.call(this),this.id=n,this.dispatcher=i,this.on("data",(function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))})),this.on("error",(function(){o._sourceErrored=!0})),this._source=function(t,n,r,i){var o=new L[n.type](t,n,r,i);if(o.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+o.id);return e.bindAll(["load","abort","unload","serialize","prepare"],o),o}(n,r,i,this),this._tiles={},this._cache=new z(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.onAdd=function(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)},n.prototype.onRemove=function(e){this._source&&this._source.onRemove&&this._source.onRemove(e)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var e in this._tiles){var t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(e,t){return this._source.loadTile(e,t)},n.prototype._unloadTile=function(e){if(this._source.unloadTile)return this._source.unloadTile(e,(function(){}))},n.prototype._abortTile=function(e){if(this._source.abortTile)return this._source.abortTile(e,(function(){}))},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(e){for(var t in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var n=this._tiles[t];n.upload(e),n.prepare(this.map.style.imageManager)}},n.prototype.getIds=function(){return e.values(this._tiles).map((function(e){return e.tileID})).sort(Me).map((function(e){return e.key}))},n.prototype.getRenderableIds=function(t){var n=this,r=[];for(var i in this._tiles)this._isIdRenderable(i,t)&&r.push(this._tiles[i]);return t?r.sort((function(t,r){var i=t.tileID,o=r.tileID,a=new e.Point(i.canonical.x,i.canonical.y)._rotate(n.transform.angle),s=new e.Point(o.canonical.x,o.canonical.y)._rotate(n.transform.angle);return i.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x})).map((function(e){return e.tileID.key})):r.map((function(e){return e.tileID})).sort(Me).map((function(e){return e.key}))},n.prototype.hasRenderableParent=function(e){var t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)},n.prototype._isIdRenderable=function(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(e,"reloading")},n.prototype._reloadTile=function(e,t){var n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))},n.prototype._tileLoaded=function(t,n,r,i){if(i)return t.state="errored",void(404!==i.status?this._source.fire(new e.ErrorEvent(i,{tile:t})):this.update(this.transform));t.timeAdded=e.browser.now(),"expired"===r&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(n,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:t,coord:t.tileID}))},n.prototype._backfillDEM=function(e){for(var t=this.getRenderableIds(),n=0;n<t.length;n++){var r=t[n];if(e.neighboringTiles&&e.neighboringTiles[r]){var i=this.getTileByID(r);o(e,i),o(i,e)}}function o(e,t){e.needsHillshadePrepare=!0;var n=t.tileID.canonical.x-e.tileID.canonical.x,r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}},n.prototype.getTile=function(e){return this.getTileByID(e.key)},n.prototype.getTileByID=function(e){return this._tiles[e]},n.prototype._retainLoadedChildren=function(e,t,n,r){for(var i in this._tiles){var o=this._tiles[i];if(!(r[i]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>n)){for(var a=o.tileID;o&&o.tileID.overscaledZ>t+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var u=a;u.overscaledZ>t;)if(e[(u=u.scaledTo(u.overscaledZ-1)).key]){r[a.key]=a;break}}}},n.prototype.findLoadedParent=function(e,t){if(e.key in this._loadedParentTiles){var n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(var r=e.overscaledZ-1;r>=t;r--){var i=e.scaledTo(r),o=this._getLoadedTile(i);if(o)return o}},n.prototype._getLoadedTile=function(e){var t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(e.wrapped().key)},n.prototype.updateCacheSize=function(e){var t=Math.ceil(e.width/this._source.tileSize)+1,n=Math.ceil(e.height/this._source.tileSize)+1,r=Math.floor(t*n*5),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(i)},n.prototype.handleWrapJump=function(e){var t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){var n={};for(var r in this._tiles){var i=this._tiles[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),n[i.tileID.key]=i}for(var o in this._tiles=n,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var a in this._tiles)this._setTileReloadTimer(a,this._tiles[a])}},n.prototype.update=function(t){var r=this;if(this.transform=t,this._sourceLoaded&&!this._paused){var i;this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?i=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(t){return new e.OverscaledTileID(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)})):(i=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(i=i.filter((function(e){return r._source.hasTile(e)})))):i=[];var o=t.coveringZoomLevel(this._source),a=Math.max(o-n.maxOverzooming,this._source.minzoom),s=Math.max(o+n.maxUnderzooming,this._source.minzoom),u=this._updateRetainedTiles(i,o);if(Pe(this._source.type)){for(var c={},l={},f=0,p=Object.keys(u);f<p.length;f+=1){var h=p[f],d=u[h],v=this._tiles[h];if(v&&!(v.fadeEndTime&&v.fadeEndTime<=e.browser.now())){var m=this.findLoadedParent(d,a);m&&(this._addTile(m.tileID),c[m.tileID.key]=m.tileID),l[h]=d}}for(var g in this._retainLoadedChildren(l,o,s,u),c)u[g]||(this._coveredTiles[g]=!0,u[g]=c[g])}for(var y in u)this._tiles[y].clearFadeHold();for(var b=0,_=e.keysDifference(this._tiles,u);b<_.length;b+=1){var x=_[b],w=this._tiles[x];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(x)}this._updateLoadedParentTileCache()}},n.prototype.releaseSymbolFadeTiles=function(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)},n.prototype._updateRetainedTiles=function(e,t){for(var r={},i={},o=Math.max(t-n.maxOverzooming,this._source.minzoom),a=Math.max(t+n.maxUnderzooming,this._source.minzoom),s={},u=0,c=e;u<c.length;u+=1){var l=c[u],f=this._addTile(l);r[l.key]=l,f.hasData()||t<this._source.maxzoom&&(s[l.key]=l)}this._retainLoadedChildren(s,t,a,r);for(var p=0,h=e;p<h.length;p+=1){var d=h[p],v=this._tiles[d.key];if(!v.hasData()){if(t+1>this._source.maxzoom){var m=d.children(this._source.maxzoom)[0],g=this.getTile(m);if(g&&g.hasData()){r[m.key]=m;continue}}else{var y=d.children(this._source.maxzoom);if(r[y[0].key]&&r[y[1].key]&&r[y[2].key]&&r[y[3].key])continue}for(var b=v.wasRequested(),_=d.overscaledZ-1;_>=o;--_){var x=d.scaledTo(_);if(i[x.key])break;if(i[x.key]=!0,!(v=this.getTile(x))&&b&&(v=this._addTile(x)),v&&(r[x.key]=x,b=v.wasRequested(),v.hasData()))break}}}return r},n.prototype._updateLoadedParentTileCache=function(){for(var e in this._loadedParentTiles={},this._tiles){for(var t=[],n=void 0,r=this._tiles[e].tileID;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}t.push(r.key);var i=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(i))break;r=i}for(var o=0,a=t;o<a.length;o+=1)this._loadedParentTiles[a[o]]=n}},n.prototype._addTile=function(t){var n=this._tiles[t.key];if(n)return n;(n=this._cache.getAndRemove(t))&&(this._setTileReloadTimer(t.key,n),n.tileID=t,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,n)));var r=Boolean(n);return r||(n=new e.Tile(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,t.key,n.state))),n?(n.uses++,this._tiles[t.key]=n,r||this._source.fire(new e.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},n.prototype._setTileReloadTimer=function(e,t){var n=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout((function(){n._reloadTile(e,"expired"),delete n._timers[e]}),r))},n.prototype._removeTile=function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))},n.prototype.clearTiles=function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(e);this._cache.reset()},n.prototype.tilesIn=function(t,n,r){var i=this,o=[],a=this.transform;if(!a)return o;for(var s=r?a.getCameraQueryGeometry(t):t,u=t.map((function(e){return a.pointCoordinate(e)})),c=s.map((function(e){return a.pointCoordinate(e)})),l=this.getIds(),f=1/0,p=1/0,h=-1/0,d=-1/0,v=0,m=c;v<m.length;v+=1){var g=m[v];f=Math.min(f,g.x),p=Math.min(p,g.y),h=Math.max(h,g.x),d=Math.max(d,g.y)}for(var y=function(t){var r=i._tiles[l[t]];if(!r.holdingForFade()){var s=r.tileID,v=Math.pow(2,a.zoom-r.tileID.overscaledZ),m=n*r.queryPadding*e.EXTENT/r.tileSize/v,g=[s.getTilePoint(new e.MercatorCoordinate(f,p)),s.getTilePoint(new e.MercatorCoordinate(h,d))];if(g[0].x-m<e.EXTENT&&g[0].y-m<e.EXTENT&&g[1].x+m>=0&&g[1].y+m>=0){var y=u.map((function(e){return s.getTilePoint(e)})),b=c.map((function(e){return s.getTilePoint(e)}));o.push({tile:r,tileID:s,queryGeometry:y,cameraQueryGeometry:b,scale:v})}}},b=0;b<l.length;b++)y(b);return o},n.prototype.getVisibleCoordinates=function(e){for(var t=this,n=this.getRenderableIds(e).map((function(e){return t._tiles[e].tileID})),r=0,i=n;r<i.length;r+=1){var o=i[r];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return n},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Pe(this._source.type))for(var t in this._tiles){var n=this._tiles[t];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=e.browser.now())return!0}return!1},n.prototype.setFeatureState=function(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)},n.prototype.removeFeatureState=function(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)},n.prototype.getFeatureState=function(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)},n.prototype.setDependencies=function(e,t,n){var r=this._tiles[e];r&&r.setDependencies(t,n)},n.prototype.reloadTilesForDependencies=function(e,t){for(var n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(n,"reloading");this._cache.filter((function(n){return!n.hasDependency(e,t)}))},n}(e.Evented);function Me(e,t){var n=Math.abs(2*e.wrap)-+(e.wrap<0),r=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||r-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function Pe(e){return"raster"===e||"image"===e||"video"===e}function Ie(){return new e.window.Worker(Xi.workerUrl)}Te.maxOverzooming=10,Te.maxUnderzooming=3;var Re="mapboxgl_preloaded_worker_pool",Le=function(){this.active={}};Le.prototype.acquire=function(e){if(!this.workers)for(this.workers=[];this.workers.length<Le.workerCount;)this.workers.push(new Ie);return this.active[e]=!0,this.workers.slice()},Le.prototype.release=function(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((function(e){e.terminate()})),this.workers=null)},Le.prototype.isPreloaded=function(){return!!this.active[Re]},Le.prototype.numActive=function(){return Object.keys(this.active).length};var De,Ne=Math.floor(e.browser.hardwareConcurrency/2);function Fe(){return De||(De=new Le),De}function ze(t,n){var r={};for(var i in t)"ref"!==i&&(r[i]=t[i]);return e.refProperties.forEach((function(e){e in n&&(r[e]=n[e])})),r}function Be(e){e=e.slice();for(var t=Object.create(null),n=0;n<e.length;n++)t[e[n].id]=e[n];for(var r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=ze(e[r],t[e[r].ref]));return e}Le.workerCount=Math.max(Math.min(Ne,6),1);var Ue={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ve(e,t,n){n.push({command:Ue.addSource,args:[e,t[e]]})}function He(e,t,n){t.push({command:Ue.removeSource,args:[e]}),n[e]=!0}function Ge(e,t,n,r){He(e,n,r),Ve(e,t,n)}function We(t,n,r){var i;for(i in t[r])if(t[r].hasOwnProperty(i)&&"data"!==i&&!e.deepEqual(t[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!e.deepEqual(t[r][i],n[r][i]))return!1;return!0}function qe(t,n,r,i,o,a){var s;for(s in n=n||{},t=t||{})t.hasOwnProperty(s)&&(e.deepEqual(t[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(e.deepEqual(t[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))}function Ze(e){return e.id}function Ye(e,t){return e[t.id]=t,e}var Xe=function(e,t){this.reset(e,t)};Xe.prototype.reset=function(e,t){this.points=e||[],this._distances=[0];for(var n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Xe.prototype.lerp=function(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);for(var n=1,r=this._distances[n],i=t*this.paddedLength+this.padding;r<i&&n<this._distances.length;)r=this._distances[++n];var o=n-1,a=this._distances[o],s=r-a,u=s>0?(i-a)/s:0;return this.points[o].mult(1-u).add(this.points[n].mult(u))};var Ke=function(e,t,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0};function $e(t,n,r,i,o){var a=e.create();return n?(e.scale(a,a,[1/o,1/o,1]),r||e.rotateZ(a,a,i.angle)):e.multiply(a,i.labelPlaneMatrix,t),a}function Qe(t,n,r,i,o){if(n){var a=e.clone(t);return e.scale(a,a,[o,o,1]),r||e.rotateZ(a,a,-i.angle),a}return i.glCoordMatrix}function Je(t,n){var r=[t.x,t.y,0,1];lt(r,r,n);var i=r[3];return{point:new e.Point(r[0]/i,r[1]/i),signedDistanceFromCamera:i}}function et(e,t){return.5+e/t*.5}function tt(e,t){var n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function nt(t,n,r,i,o,a,s,u){var c=i?t.textSizeData:t.iconSizeData,l=e.evaluateSizeForZoom(c,r.transform.zoom),f=[256/r.width*2+1,256/r.height*2+1],p=i?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;p.clear();for(var h=t.lineVertexArray,d=i?t.text.placedSymbolArray:t.icon.placedSymbolArray,v=r.transform.width/r.transform.height,m=!1,g=0;g<d.length;g++){var y=d.get(g);if(y.hidden||y.writingMode===e.WritingMode.vertical&&!m)ct(y.numGlyphs,p);else{m=!1;var b=[y.anchorX,y.anchorY,0,1];if(e.transformMat4(b,b,n),tt(b,f)){var _=et(r.transform.cameraToCenterDistance,b[3]),x=e.evaluateSizeForFeature(c,l,y),w=s?x/_:x*_,O=new e.Point(y.anchorX,y.anchorY),E=Je(O,o).point,S={},j=ot(y,w,!1,u,n,o,a,t.glyphOffsetArray,h,p,E,O,S,v);m=j.useVertical,(j.notEnoughRoom||m||j.needsFlipping&&ot(y,w,!0,u,n,o,a,t.glyphOffsetArray,h,p,E,O,S,v).notEnoughRoom)&&ct(y.numGlyphs,p)}else ct(y.numGlyphs,p)}}i?t.text.dynamicLayoutVertexBuffer.updateData(p):t.icon.dynamicLayoutVertexBuffer.updateData(p)}function rt(e,t,n,r,i,o,a,s,u,c,l){var f=s.glyphStartIndex+s.numGlyphs,p=s.lineStartIndex,h=s.lineStartIndex+s.lineLength,d=t.getoffsetX(s.glyphStartIndex),v=t.getoffsetX(f-1),m=st(e*d,n,r,i,o,a,s.segment,p,h,u,c,l);if(!m)return null;var g=st(e*v,n,r,i,o,a,s.segment,p,h,u,c,l);return g?{first:m,last:g}:null}function it(t,n,r,i){return t===e.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(t===e.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function ot(t,n,r,i,o,a,s,u,c,l,f,p,h,d){var v,m=n/24,g=t.lineOffsetX*m,y=t.lineOffsetY*m;if(t.numGlyphs>1){var b=t.glyphStartIndex+t.numGlyphs,_=t.lineStartIndex,x=t.lineStartIndex+t.lineLength,w=rt(m,u,g,y,r,f,p,t,c,a,h);if(!w)return{notEnoughRoom:!0};var O=Je(w.first.point,s).point,E=Je(w.last.point,s).point;if(i&&!r){var S=it(t.writingMode,O,E,d);if(S)return S}v=[w.first];for(var j=t.glyphStartIndex+1;j<b-1;j++)v.push(st(m*u.getoffsetX(j),g,y,r,f,p,t.segment,_,x,c,a,h));v.push(w.last)}else{if(i&&!r){var A=Je(p,o).point,k=t.lineStartIndex+t.segment+1,C=new e.Point(c.getx(k),c.gety(k)),T=Je(C,o),M=T.signedDistanceFromCamera>0?T.point:at(p,C,A,1,o),P=it(t.writingMode,A,M,d);if(P)return P}var I=st(m*u.getoffsetX(t.glyphStartIndex),g,y,r,f,p,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,c,a,h);if(!I)return{notEnoughRoom:!0};v=[I]}for(var R=0,L=v;R<L.length;R+=1){var D=L[R];e.addDynamicAttributes(l,D.point,D.angle)}return{}}function at(e,t,n,r,i){var o=Je(e.add(e.sub(t)._unit()),i).point,a=n.sub(o);return n.add(a._mult(r/a.mag()))}function st(t,n,r,i,o,a,s,u,c,l,f,p){var h=i?t-n:t+n,d=h>0?1:-1,v=0;i&&(d*=-1,v=Math.PI),d<0&&(v+=Math.PI);for(var m=d>0?u+s:u+s+1,g=o,y=o,b=0,_=0,x=Math.abs(h),w=[];b+_<=x;){if((m+=d)<u||m>=c)return null;if(y=g,w.push(g),void 0===(g=p[m])){var O=new e.Point(l.getx(m),l.gety(m)),E=Je(O,f);if(E.signedDistanceFromCamera>0)g=p[m]=E.point;else{var S=m-d;g=at(0===b?a:new e.Point(l.getx(S),l.gety(S)),O,y,x-b+1,f)}}b+=_,_=y.dist(g)}var j=(x-b)/_,A=g.sub(y),k=A.mult(j)._add(y);k._add(A._unit()._perp()._mult(r*d));var C=v+Math.atan2(g.y-y.y,g.x-y.x);return w.push(k),{point:k,angle:C,path:w}}Ke.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ke.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Ke.prototype.insertCircle=function(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)},Ke.prototype._insertBoxCell=function(e,t,n,r,i,o){this.boxCells[i].push(o)},Ke.prototype._insertCircleCell=function(e,t,n,r,i,o){this.circleCells[i].push(o)},Ke.prototype._query=function(e,t,n,r,i,o){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];var a=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var c=this.circles[3*u],l=this.circles[3*u+1],f=this.circles[3*u+2];a.push({key:this.circleKeys[u],x1:c-f,y1:l-f,x2:c+f,y2:l+f})}return o?a.filter(o):a}return this._forEachCell(e,t,n,r,this._queryCell,a,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?a.length>0:a},Ke.prototype._queryCircle=function(e,t,n,r,i){var o=e-n,a=e+n,s=t-n,u=t+n;if(a<0||o>this.width||u<0||s>this.height)return!r&&[];var c=[];return this._forEachCell(o,s,a,u,this._queryCellCircle,c,{hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},i),r?c.length>0:c},Ke.prototype.query=function(e,t,n,r,i){return this._query(e,t,n,r,!1,i)},Ke.prototype.hitTest=function(e,t,n,r,i){return this._query(e,t,n,r,!0,i)},Ke.prototype.hitTestCircle=function(e,t,n,r){return this._queryCircle(e,t,n,!0,r)},Ke.prototype._queryCell=function(e,t,n,r,i,o,a,s){var u=a.seenUids,c=this.boxCells[i];if(null!==c)for(var l=this.bboxes,f=0,p=c;f<p.length;f+=1){var h=p[f];if(!u.box[h]){u.box[h]=!0;var d=4*h;if(e<=l[d+2]&&t<=l[d+3]&&n>=l[d+0]&&r>=l[d+1]&&(!s||s(this.boxKeys[h]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[h],x1:l[d],y1:l[d+1],x2:l[d+2],y2:l[d+3]})}}}var v=this.circleCells[i];if(null!==v)for(var m=this.circles,g=0,y=v;g<y.length;g+=1){var b=y[g];if(!u.circle[b]){u.circle[b]=!0;var _=3*b;if(this._circleAndRectCollide(m[_],m[_+1],m[_+2],e,t,n,r)&&(!s||s(this.circleKeys[b]))){if(a.hitTest)return o.push(!0),!0;var x=m[_],w=m[_+1],O=m[_+2];o.push({key:this.circleKeys[b],x1:x-O,y1:w-O,x2:x+O,y2:w+O})}}}},Ke.prototype._queryCellCircle=function(e,t,n,r,i,o,a,s){var u=a.circle,c=a.seenUids,l=this.boxCells[i];if(null!==l)for(var f=this.bboxes,p=0,h=l;p<h.length;p+=1){var d=h[p];if(!c.box[d]){c.box[d]=!0;var v=4*d;if(this._circleAndRectCollide(u.x,u.y,u.radius,f[v+0],f[v+1],f[v+2],f[v+3])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}var m=this.circleCells[i];if(null!==m)for(var g=this.circles,y=0,b=m;y<b.length;y+=1){var _=b[y];if(!c.circle[_]){c.circle[_]=!0;var x=3*_;if(this._circlesCollide(g[x],g[x+1],g[x+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[_])))return o.push(!0),!0}}},Ke.prototype._forEachCell=function(e,t,n,r,i,o,a,s){for(var u=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),l=this._convertToXCellCoord(n),f=this._convertToYCellCoord(r),p=u;p<=l;p++)for(var h=c;h<=f;h++)if(i.call(this,e,t,n,r,this.xCellCount*h+p,o,a,s))return},Ke.prototype._convertToXCellCoord=function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))},Ke.prototype._convertToYCellCoord=function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))},Ke.prototype._circlesCollide=function(e,t,n,r,i,o){var a=r-e,s=i-t,u=n+o;return u*u>a*a+s*s},Ke.prototype._circleAndRectCollide=function(e,t,n,r,i,o,a){var s=(o-r)/2,u=Math.abs(e-(r+s));if(u>s+n)return!1;var c=(a-i)/2,l=Math.abs(t-(i+c));if(l>c+n)return!1;if(u<=s||l<=c)return!0;var f=u-s,p=l-c;return f*f+p*p<=n*n};var ut=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ct(e,t){for(var n=0;n<e;n++){var r=t.length;t.resize(r+4),t.float32.set(ut,3*r)}}function lt(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}var ft=function(e,t,n){void 0===t&&(t=new Ke(e.width+200,e.height+200,25)),void 0===n&&(n=new Ke(e.width+200,e.height+200,25)),this.transform=e,this.grid=t,this.ignoredGrid=n,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+100,this.screenBottomBoundary=e.height+100,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200};function pt(t,n,r){return n*(e.EXTENT/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}ft.prototype.placeCollisionBox=function(e,t,n,r,i){var o=this.projectAndGetPerspectiveRatio(r,e.anchorPointX,e.anchorPointY),a=n*o.perspectiveRatio,s=e.x1*a+o.point.x,u=e.y1*a+o.point.y,c=e.x2*a+o.point.x,l=e.y2*a+o.point.y;return!this.isInsideGrid(s,u,c,l)||!t&&this.grid.hitTest(s,u,c,l,i)?{box:[],offscreen:!1}:{box:[s,u,c,l],offscreen:this.isOffscreen(s,u,c,l)}},ft.prototype.placeCollisionCircles=function(t,n,r,i,o,a,s,u,c,l,f,p,h){var d=[],v=new e.Point(n.anchorX,n.anchorY),m=Je(v,a),g=et(this.transform.cameraToCenterDistance,m.signedDistanceFromCamera),y=(l?o/g:o*g)/e.ONE_EM,b=Je(v,s).point,_=rt(y,i,n.lineOffsetX*y,n.lineOffsetY*y,!1,b,v,n,r,s,{}),x=!1,w=!1,O=!0;if(_){for(var E=.5*p*g+h,S=new e.Point(-100,-100),j=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),A=new Xe,k=_.first,C=_.last,T=[],M=k.path.length-1;M>=1;M--)T.push(k.path[M]);for(var P=1;P<C.path.length;P++)T.push(C.path[P]);var I=2.5*E;if(u){var R=T.map((function(e){return Je(e,u)}));T=R.some((function(e){return e.signedDistanceFromCamera<=0}))?[]:R.map((function(e){return e.point}))}var L=[];if(T.length>0){for(var D=T[0].clone(),N=T[0].clone(),F=1;F<T.length;F++)D.x=Math.min(D.x,T[F].x),D.y=Math.min(D.y,T[F].y),N.x=Math.max(N.x,T[F].x),N.y=Math.max(N.y,T[F].y);L=D.x>=S.x&&N.x<=j.x&&D.y>=S.y&&N.y<=j.y?[T]:N.x<S.x||D.x>j.x||N.y<S.y||D.y>j.y?[]:e.clipLine([T],S.x,S.y,j.x,j.y)}for(var z=0,B=L;z<B.length;z+=1){var U;A.reset(B[z],.25*E),U=A.length<=.5*E?1:Math.ceil(A.paddedLength/I)+1;for(var V=0;V<U;V++){var H=V/Math.max(U-1,1),G=A.lerp(H),W=G.x+100,q=G.y+100;d.push(W,q,E,0);var Z=W-E,Y=q-E,X=W+E,K=q+E;if(O=O&&this.isOffscreen(Z,Y,X,K),w=w||this.isInsideGrid(Z,Y,X,K),!t&&this.grid.hitTestCircle(W,q,E,f)&&(x=!0,!c))return{circles:[],offscreen:!1,collisionDetected:x}}}}return{circles:!c&&x||!w?[]:d,offscreen:O,collisionDetected:x}},ft.prototype.queryRenderedSymbols=function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],r=1/0,i=1/0,o=-1/0,a=-1/0,s=0,u=t;s<u.length;s+=1){var c=u[s],l=new e.Point(c.x+100,c.y+100);r=Math.min(r,l.x),i=Math.min(i,l.y),o=Math.max(o,l.x),a=Math.max(a,l.y),n.push(l)}for(var f={},p={},h=0,d=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a));h<d.length;h+=1){var v=d[h],m=v.key;if(void 0===f[m.bucketInstanceId]&&(f[m.bucketInstanceId]={}),!f[m.bucketInstanceId][m.featureIndex]){var g=[new e.Point(v.x1,v.y1),new e.Point(v.x2,v.y1),new e.Point(v.x2,v.y2),new e.Point(v.x1,v.y2)];e.polygonIntersectsPolygon(n,g)&&(f[m.bucketInstanceId][m.featureIndex]=!0,void 0===p[m.bucketInstanceId]&&(p[m.bucketInstanceId]=[]),p[m.bucketInstanceId].push(m.featureIndex))}}return p},ft.prototype.insertCollisionBox=function(e,t,n,r,i){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},e[0],e[1],e[2],e[3])},ft.prototype.insertCollisionCircles=function(e,t,n,r,i){for(var o=t?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},s=0;s<e.length;s+=4)o.insertCircle(a,e[s],e[s+1],e[s+2])},ft.prototype.projectAndGetPerspectiveRatio=function(t,n,r){var i=[n,r,0,1];return lt(i,i,t),{point:new e.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}},ft.prototype.isOffscreen=function(e,t,n,r){return n<100||e>=this.screenRightBoundary||r<100||t>this.screenBottomBoundary},ft.prototype.isInsideGrid=function(e,t,n,r){return n>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary},ft.prototype.getViewportMatrix=function(){var t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t};var ht=function(e,t,n,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&n?1:0,this.placed=n};ht.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var dt=function(e,t,n,r,i){this.text=new ht(e?e.text:null,t,n,i),this.icon=new ht(e?e.icon:null,t,r,i)};dt.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var vt=function(e,t,n){this.text=e,this.icon=t,this.skipFade=n},mt=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},gt=function(e,t,n,r,i){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i},yt=function(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}};function bt(t,n,r,i,o){var a=e.getAnchorAlignment(t),s=-(a.horizontalAlign-.5)*n,u=-(a.verticalAlign-.5)*r,c=e.evaluateVariableOffset(t,i);return new e.Point(s+c[0]*o,u+c[1]*o)}function _t(t,n,r,i,o,a){var s=t.x1,u=t.x2,c=t.y1,l=t.y2,f=t.anchorPointX,p=t.anchorPointY,h=new e.Point(n,r);return i&&h._rotate(o?a:-a),{x1:s+h.x,y1:c+h.y,x2:u+h.x,y2:l+h.y,anchorPointX:f,anchorPointY:p}}yt.prototype.get=function(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){var t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:function(e){return e.collisionGroupID===t}}}return this.collisionGroups[e]};var xt=function(e,t,n,r){this.transform=e.clone(),this.collisionIndex=new ft(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new yt(n),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}};function wt(e,t,n,r,i){e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0)}xt.prototype.getBucketParts=function(t,n,r,i){var o=r.getBucket(n),a=r.latestFeatureIndex;if(o&&a&&n.id===o.layerIds[0]){var s=r.collisionBoxArray,u=o.layers[0].layout,c=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),l=r.tileSize/e.EXTENT,f=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),p="map"===u.get("text-pitch-alignment"),h="map"===u.get("text-rotation-alignment"),d=pt(r,1,this.transform.zoom),v=$e(f,p,h,this.transform,d),m=null;if(p){var g=Qe(f,p,h,this.transform,d);m=e.multiply([],this.transform.labelPlaneMatrix,g)}this.retainedQueryData[o.bucketInstanceId]=new gt(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);var y={bucket:o,layout:u,posMatrix:f,textLabelPlaneMatrix:v,labelToScreenMatrix:m,scale:c,textPixelRatio:l,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(var b=0,_=o.sortKeyRanges;b<_.length;b+=1){var x=_[b];t.push({sortKey:x.sortKey,symbolInstanceStart:x.symbolInstanceStart,symbolInstanceEnd:x.symbolInstanceEnd,parameters:y})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:y})}},xt.prototype.attemptAnchorPlacement=function(e,t,n,r,i,o,a,s,u,c,l,f,p,h,d){var v,m=[f.textOffset0,f.textOffset1],g=bt(e,n,r,m,i),y=this.collisionIndex.placeCollisionBox(_t(t,g.x,g.y,o,a,this.transform.angle),l,s,u,c.predicate);if(!d||0!==this.collisionIndex.placeCollisionBox(_t(d,g.x,g.y,o,a,this.transform.angle),l,s,u,c.predicate).box.length)return y.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[f.crossTileID]&&this.prevPlacement.placements[f.crossTileID]&&this.prevPlacement.placements[f.crossTileID].text&&(v=this.prevPlacement.variableOffsets[f.crossTileID].anchor),this.variableOffsets[f.crossTileID]={textOffset:m,width:n,height:r,anchor:e,textBoxScale:i,prevAnchor:v},this.markUsedJustification(p,e,f,h),p.allowVerticalPlacement&&(this.markUsedOrientation(p,h,f),this.placedOrientations[f.crossTileID]=h),{shift:g,placedGlyphBoxes:y}):void 0},xt.prototype.placeLayerBucketPart=function(t,n,r){var i=this,o=t.parameters,a=o.bucket,s=o.layout,u=o.posMatrix,c=o.textLabelPlaneMatrix,l=o.labelToScreenMatrix,f=o.textPixelRatio,p=o.holdingForFade,h=o.collisionBoxArray,d=o.partiallyEvaluatedTextSize,v=o.collisionGroup,m=s.get("text-optional"),g=s.get("icon-optional"),y=s.get("text-allow-overlap"),b=s.get("icon-allow-overlap"),_="map"===s.get("text-rotation-alignment"),x="map"===s.get("text-pitch-alignment"),w="none"!==s.get("icon-text-fit"),O="viewport-y"===s.get("symbol-z-order"),E=y&&(b||!a.hasIconData()||g),S=b&&(y||!a.hasTextData()||m);!a.collisionArrays&&h&&a.deserializeCollisionBoxes(h);var j=function(t,o){if(!n[t.crossTileID])if(p)i.placements[t.crossTileID]=new vt(!1,!1,!1);else{var h,O=!1,j=!1,A=!0,k=null,C={box:null,offscreen:null},T={box:null,offscreen:null},M=null,P=null,I=0,R=0,L=0;o.textFeatureIndex?I=o.textFeatureIndex:t.useRuntimeCollisionCircles&&(I=t.featureIndex),o.verticalTextFeatureIndex&&(R=o.verticalTextFeatureIndex);var D=o.textBox;if(D){var N=function(n){var r=e.WritingMode.horizontal;if(a.allowVerticalPlacement&&!n&&i.prevPlacement){var o=i.prevPlacement.placedOrientations[t.crossTileID];o&&(i.placedOrientations[t.crossTileID]=o,i.markUsedOrientation(a,r=o,t))}return r},F=function(n,r){if(a.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&o.verticalTextBox)for(var i=0,s=a.writingModes;i<s.length&&(s[i]===e.WritingMode.vertical?(C=r(),T=C):C=n(),!(C&&C.box&&C.box.length));i+=1);else C=n()};if(s.get("text-variable-anchor")){var z=s.get("text-variable-anchor");if(i.prevPlacement&&i.prevPlacement.variableOffsets[t.crossTileID]){var B=i.prevPlacement.variableOffsets[t.crossTileID];z.indexOf(B.anchor)>0&&(z=z.filter((function(e){return e!==B.anchor}))).unshift(B.anchor)}var U=function(e,n,r){for(var o=e.x2-e.x1,s=e.y2-e.y1,c=t.textBoxScale,l=w&&!b?n:null,p={box:[],offscreen:!1},h=y?2*z.length:z.length,d=0;d<h;++d){var m=i.attemptAnchorPlacement(z[d%z.length],e,o,s,c,_,x,f,u,v,d>=z.length,t,a,r,l);if(m&&(p=m.placedGlyphBoxes)&&p.box&&p.box.length){O=!0,k=m.shift;break}}return p};F((function(){return U(D,o.iconBox,e.WritingMode.horizontal)}),(function(){var n=o.verticalTextBox;return a.allowVerticalPlacement&&!(C&&C.box&&C.box.length)&&t.numVerticalGlyphVertices>0&&n?U(n,o.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}})),C&&(O=C.box,A=C.offscreen);var V=N(C&&C.box);if(!O&&i.prevPlacement){var H=i.prevPlacement.variableOffsets[t.crossTileID];H&&(i.variableOffsets[t.crossTileID]=H,i.markUsedJustification(a,H.anchor,t,V))}}else{var G=function(e,n){var r=i.collisionIndex.placeCollisionBox(e,y,f,u,v.predicate);return r&&r.box&&r.box.length&&(i.markUsedOrientation(a,n,t),i.placedOrientations[t.crossTileID]=n),r};F((function(){return G(D,e.WritingMode.horizontal)}),(function(){var n=o.verticalTextBox;return a.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&n?G(n,e.WritingMode.vertical):{box:null,offscreen:null}})),N(C&&C.box&&C.box.length)}}if(O=(h=C)&&h.box&&h.box.length>0,A=h&&h.offscreen,t.useRuntimeCollisionCircles){var W=a.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex),q=e.evaluateSizeForFeature(a.textSizeData,d,W),Z=s.get("text-padding");M=i.collisionIndex.placeCollisionCircles(y,W,a.lineVertexArray,a.glyphOffsetArray,q,u,c,l,r,x,v.predicate,t.collisionCircleDiameter,Z),O=y||M.circles.length>0&&!M.collisionDetected,A=A&&M.offscreen}if(o.iconFeatureIndex&&(L=o.iconFeatureIndex),o.iconBox){var Y=function(e){var t=w&&k?_t(e,k.x,k.y,_,x,i.transform.angle):e;return i.collisionIndex.placeCollisionBox(t,b,f,u,v.predicate)};j=T&&T.box&&T.box.length&&o.verticalIconBox?(P=Y(o.verticalIconBox)).box.length>0:(P=Y(o.iconBox)).box.length>0,A=A&&P.offscreen}var X=m||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,K=g||0===t.numIconVertices;if(X||K?K?X||(j=j&&O):O=j&&O:j=O=j&&O,O&&h&&h.box&&i.collisionIndex.insertCollisionBox(h.box,s.get("text-ignore-placement"),a.bucketInstanceId,T&&T.box&&R?R:I,v.ID),j&&P&&i.collisionIndex.insertCollisionBox(P.box,s.get("icon-ignore-placement"),a.bucketInstanceId,L,v.ID),M&&(O&&i.collisionIndex.insertCollisionCircles(M.circles,s.get("text-ignore-placement"),a.bucketInstanceId,I,v.ID),r)){var $=a.bucketInstanceId,Q=i.collisionCircleArrays[$];void 0===Q&&(Q=i.collisionCircleArrays[$]=new mt);for(var J=0;J<M.circles.length;J+=4)Q.circles.push(M.circles[J+0]),Q.circles.push(M.circles[J+1]),Q.circles.push(M.circles[J+2]),Q.circles.push(M.collisionDetected?1:0)}i.placements[t.crossTileID]=new vt(O||E,j||S,A||a.justReloaded),n[t.crossTileID]=!0}};if(O)for(var A=a.getSortedSymbolIndexes(this.transform.angle),k=A.length-1;k>=0;--k){var C=A[k];j(a.symbolInstances.get(C),a.collisionArrays[C])}else for(var T=t.symbolInstanceStart;T<t.symbolInstanceEnd;T++)j(a.symbolInstances.get(T),a.collisionArrays[T]);if(r&&a.bucketInstanceId in this.collisionCircleArrays){var M=this.collisionCircleArrays[a.bucketInstanceId];e.invert(M.invProjMatrix,u),M.viewportMatrix=this.collisionIndex.getViewportMatrix()}a.justReloaded=!1},xt.prototype.markUsedJustification=function(t,n,r,i){var o;o=i===e.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(n)];for(var a=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];a<s.length;a+=1){var u=s[a];u>=0&&(t.text.placedSymbolArray.get(u).crossTileID=o>=0&&u!==o?0:r.crossTileID)}},xt.prototype.markUsedOrientation=function(t,n,r){for(var i=n===e.WritingMode.horizontal||n===e.WritingMode.horizontalOnly?n:0,o=n===e.WritingMode.vertical?n:0,a=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];a<s.length;a+=1)t.text.placedSymbolArray.get(s[a]).placedOrientation=i;r.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=o)},xt.prototype.commit=function(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;var t=this.prevPlacement,n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;var r=t?t.symbolFadeChange(e):1,i=t?t.opacities:{},o=t?t.variableOffsets:{},a=t?t.placedOrientations:{};for(var s in this.placements){var u=this.placements[s],c=i[s];c?(this.opacities[s]=new dt(c,r,u.text,u.icon),n=n||u.text!==c.text.placed||u.icon!==c.icon.placed):(this.opacities[s]=new dt(null,r,u.text,u.icon,u.skipFade),n=n||u.text||u.icon)}for(var l in i){var f=i[l];if(!this.opacities[l]){var p=new dt(f,r,!1,!1);p.isHidden()||(this.opacities[l]=p,n=n||f.text.placed||f.icon.placed)}}for(var h in o)this.variableOffsets[h]||!this.opacities[h]||this.opacities[h].isHidden()||(this.variableOffsets[h]=o[h]);for(var d in a)this.placedOrientations[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.placedOrientations[d]=a[d]);n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},xt.prototype.updateLayerOpacities=function(e,t){for(var n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.getBucket(e);a&&o.latestFeatureIndex&&e.id===a.layerIds[0]&&this.updateBucketOpacities(a,n,o.collisionBoxArray)}},xt.prototype.updateBucketOpacities=function(t,n,r){var i=this;t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();var o=t.layers[0].layout,a=new dt(null,0,!1,!1,!0),s=o.get("text-allow-overlap"),u=o.get("icon-allow-overlap"),c=o.get("text-variable-anchor"),l="map"===o.get("text-rotation-alignment"),f="map"===o.get("text-pitch-alignment"),p="none"!==o.get("icon-text-fit"),h=new dt(null,0,s&&(u||!t.hasIconData()||o.get("icon-optional")),u&&(s||!t.hasTextData()||o.get("text-optional")),!0);!t.collisionArrays&&r&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(r);for(var d=function(e,t,n){for(var r=0;r<t/4;r++)e.opacityVertexArray.emplaceBack(n)},v=function(r){var o=t.symbolInstances.get(r),s=o.numHorizontalGlyphVertices,u=o.numVerticalGlyphVertices,v=o.crossTileID,m=i.opacities[v];n[v]?m=a:m||(i.opacities[v]=m=h),n[v]=!0;var g=o.numIconVertices>0,y=i.placedOrientations[o.crossTileID],b=y===e.WritingMode.vertical,_=y===e.WritingMode.horizontal||y===e.WritingMode.horizontalOnly;if(s>0||u>0){var x=Tt(m.text);d(t.text,s,b?Mt:x),d(t.text,u,_?Mt:x);var w=m.text.isHidden();[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((function(e){e>=0&&(t.text.placedSymbolArray.get(e).hidden=w||b?1:0)})),o.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).hidden=w||_?1:0);var O=i.variableOffsets[o.crossTileID];O&&i.markUsedJustification(t,O.anchor,o,y);var E=i.placedOrientations[o.crossTileID];E&&(i.markUsedJustification(t,"left",o,E),i.markUsedOrientation(t,E,o))}if(g){var S=Tt(m.icon),j=!(p&&o.verticalPlacedIconSymbolIndex&&b);o.placedIconSymbolIndex>=0&&(d(t.icon,o.numIconVertices,j?S:Mt),t.icon.placedSymbolArray.get(o.placedIconSymbolIndex).hidden=m.icon.isHidden()),o.verticalPlacedIconSymbolIndex>=0&&(d(t.icon,o.numVerticalIconVertices,j?Mt:S),t.icon.placedSymbolArray.get(o.verticalPlacedIconSymbolIndex).hidden=m.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){var A=t.collisionArrays[r];if(A){var k=new e.Point(0,0);if(A.textBox||A.verticalTextBox){var C=!0;if(c){var T=i.variableOffsets[v];T?(k=bt(T.anchor,T.width,T.height,T.textOffset,T.textBoxScale),l&&k._rotate(f?i.transform.angle:-i.transform.angle)):C=!1}A.textBox&&wt(t.textCollisionBox.collisionVertexArray,m.text.placed,!C||b,k.x,k.y),A.verticalTextBox&&wt(t.textCollisionBox.collisionVertexArray,m.text.placed,!C||_,k.x,k.y)}var M=Boolean(!_&&A.verticalIconBox);A.iconBox&&wt(t.iconCollisionBox.collisionVertexArray,m.icon.placed,M,p?k.x:0,p?k.y:0),A.verticalIconBox&&wt(t.iconCollisionBox.collisionVertexArray,m.icon.placed,!M,p?k.x:0,p?k.y:0)}}},m=0;m<t.symbolInstances.length;m++)v(m);if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){var g=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=g.invProjMatrix,t.placementViewportMatrix=g.viewportMatrix,t.collisionCircleArray=g.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}},xt.prototype.symbolFadeChange=function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},xt.prototype.zoomAdjustment=function(e){return Math.max(0,(this.transform.zoom-e)/1.5)},xt.prototype.hasTransitions=function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration},xt.prototype.stillRecent=function(e,t){var n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e},xt.prototype.setStale=function(){this.stale=!0};var Ot=Math.pow(2,25),Et=Math.pow(2,24),St=Math.pow(2,17),jt=Math.pow(2,16),At=Math.pow(2,9),kt=Math.pow(2,8),Ct=Math.pow(2,1);function Tt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*Ot+t*Et+n*St+t*jt+n*At+t*kt+n*Ct+t}var Mt=0,Pt=function(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Pt.prototype.continuePlacement=function(e,t,n,r,i){for(var o=this._bucketParts;this._currentTileIndex<e.length;)if(t.getBucketParts(o,r,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((function(e,t){return e.sortKey-t.sortKey})));this._currentPartIndex<o.length;)if(t.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,i())return!0;return!1};var It=function(e,t,n,r,i,o,a){this.placement=new xt(e,i,o,a),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};It.prototype.isDone=function(){return this._done},It.prototype.continuePlacement=function(t,n,r){for(var i=this,o=e.browser.now(),a=function(){var t=e.browser.now()-o;return!i._forceFullPlacement&&t>2};this._currentPlacementIndex>=0;){var s=n[t[this._currentPlacementIndex]],u=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=u)&&(!s.maxzoom||s.maxzoom>u)){if(this._inProgressLayer||(this._inProgressLayer=new Pt(s)),this._inProgressLayer.continuePlacement(r[s.source],this.placement,this._showCollisionBoxes,s,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},It.prototype.commit=function(e){return this.placement.commit(e),this.placement};var Rt=512/e.EXTENT/2,Lt=function(e,t,n){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var r=0;r<t.length;r++){var i=t.get(r),o=i.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,e)})}};Lt.prototype.getScaledCoordinates=function(t,n){var r=Rt/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*e.EXTENT+t.anchorX)*r),y:Math.floor((n.canonical.y*e.EXTENT+t.anchorY)*r)}},Lt.prototype.findMatches=function(e,t,n){for(var r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),i=0;i<e.length;i++){var o=e.get(i);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,t),u=0,c=a;u<c.length;u+=1){var l=c[u];if(Math.abs(l.coord.x-s.x)<=r&&Math.abs(l.coord.y-s.y)<=r&&!n[l.crossTileID]){n[l.crossTileID]=!0,o.crossTileID=l.crossTileID;break}}}}};var Dt=function(){this.maxCrossTileID=0};Dt.prototype.generate=function(){return++this.maxCrossTileID};var Nt=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Nt.prototype.handleWrapJump=function(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(var n in this.indexes){var r=this.indexes[n],i={};for(var o in r){var a=r[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+t),i[a.tileID.key]=a}this.indexes[n]=i}this.lng=e},Nt.prototype.addBucket=function(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var r=0;r<t.symbolInstances.length;r++)t.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var i=this.usedCrossTileIDs[e.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>e.overscaledZ)for(var s in a){var u=a[s];u.tileID.isChildOf(e)&&u.findMatches(t.symbolInstances,e,i)}else{var c=a[e.scaledTo(Number(o)).key];c&&c.findMatches(t.symbolInstances,e,i)}}for(var l=0;l<t.symbolInstances.length;l++){var f=t.symbolInstances.get(l);f.crossTileID||(f.crossTileID=n.generate(),i[f.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Lt(e,t.symbolInstances,t.bucketInstanceId),!0},Nt.prototype.removeBucketCrossTileIDs=function(e,t){for(var n in t.indexedSymbolInstances)for(var r=0,i=t.indexedSymbolInstances[n];r<i.length;r+=1)delete this.usedCrossTileIDs[e][i[r].crossTileID]},Nt.prototype.removeStaleBuckets=function(e){var t=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)e[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],t=!0)}return t};var Ft=function(){this.layerIndexes={},this.crossTileIDs=new Dt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Ft.prototype.addLayer=function(e,t,n){var r=this.layerIndexes[e.id];void 0===r&&(r=this.layerIndexes[e.id]=new Nt);var i=!1,o={};r.handleWrapJump(n);for(var a=0,s=t;a<s.length;a+=1){var u=s[a],c=u.getBucket(e);c&&e.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,c,this.crossTileIDs)&&(i=!0),o[c.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i},Ft.prototype.pruneUnusedLayers=function(e){var t={};for(var n in e.forEach((function(e){t[e]=!0})),this.layerIndexes)t[n]||delete this.layerIndexes[n]};var zt=function(t,n){return e.emitValidationErrors(t,n&&n.filter((function(e){return"source.canvas"!==e.identifier})))},Bt=e.pick(Ue,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ut=e.pick(Ue,["setCenter","setZoom","setBearing","setPitch"]),Vt=function(){var t={},n=e.styleSpec.$version;for(var r in e.styleSpec.$root){var i,o=e.styleSpec.$root[r];o.required&&null!=(i="version"===r?n:"array"===o.type?[]:{})&&(t[r]=i)}return t}(),Ht=function(t){function n(r,i){var o=this;void 0===i&&(i={}),t.call(this),this.map=r,this.dispatcher=new E(Fe(),this),this.imageManager=new p,this.imageManager.setEventedParent(this),this.glyphManager=new b(r._requestManager,i.localIdeographFontFamily),this.lineAtlas=new O(256,512),this.crossTileSymbolIndex=new Ft,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var a=this;this._rtlTextPluginCallback=n.registerForPluginStateChange((function(t){a.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},(function(t,n){if(e.triggerPluginCompletionEvent(t),n&&n.every((function(e){return e})))for(var r in a.sourceCaches)a.sourceCaches[r].reload()}))})),this.on("data",(function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=o.sourceCaches[e.sourceId];if(t){var n=t.getSource();if(n&&n.vectorLayerIds)for(var r in o._layers){var i=o._layers[r];i.source===n.id&&o._validateLayer(i)}}}}))}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.loadURL=function(t,n){var r=this;void 0===n&&(n={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var i="boolean"==typeof n.validate?n.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,n.accessToken);var o=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(o,(function(t,n){r._request=null,t?r.fire(new e.ErrorEvent(t)):n&&r._load(n,i)}))},n.prototype.loadJSON=function(t,n){var r=this;void 0===n&&(n={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame((function(){r._request=null,r._load(t,!1!==n.validate)}))},n.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Vt,!1)},n.prototype._load=function(t,n){if(!n||!zt(this,e.validateStyle(t))){for(var r in this._loaded=!0,this.stylesheet=t,t.sources)this.addSource(r,t.sources[r],{validate:!1});t.sprite?this._loadSprite(t.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);var i=Be(this.stylesheet.layers);this._order=i.map((function(e){return e.id})),this._layers={},this._serializedLayers={};for(var o=0,a=i;o<a.length;o+=1){var s=a[o];(s=e.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},n.prototype._loadSprite=function(t){var n=this;this._spriteRequest=function(t,n,r){var i,o,a,s=e.browser.devicePixelRatio>1?"@2x":"",u=e.getJSON(n.transformRequest(n.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),(function(e,t){u=null,a||(a=e,i=t,l())})),c=e.getImage(n.transformRequest(n.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),(function(e,t){c=null,a||(a=e,o=t,l())}));function l(){if(a)r(a);else if(i&&o){var t=e.browser.getImageData(o),n={};for(var s in i){var u=i[s],c=u.width,l=u.height,f=u.x,p=u.y,h=u.sdf,d=u.pixelRatio,v=u.stretchX,m=u.stretchY,g=u.content,y=new e.RGBAImage({width:c,height:l});e.RGBAImage.copy(t,y,{x:f,y:p},{x:0,y:0},{width:c,height:l}),n[s]={data:y,pixelRatio:d,sdf:h,stretchX:v,stretchY:m,content:g}}r(null,n)}}return{cancel:function(){u&&(u.cancel(),u=null),c&&(c.cancel(),c=null)}}}(t,this.map._requestManager,(function(t,r){if(n._spriteRequest=null,t)n.fire(new e.ErrorEvent(t));else if(r)for(var i in r)n.imageManager.addImage(i,r[i]);n.imageManager.setLoaded(!0),n._availableImages=n.imageManager.listImages(),n.dispatcher.broadcast("setImages",n._availableImages),n.fire(new e.Event("data",{dataType:"style"}))}))},n.prototype._validateLayer=function(t){var n=this.sourceCaches[t.source];if(n){var r=t.sourceLayer;if(r){var i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new e.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+i.id+'" as specified by style layer "'+t.id+'"')))}}},n.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()},n.prototype._serializeLayers=function(e){for(var t=[],n=0,r=e;n<r.length;n+=1){var i=this._layers[r[n]];"custom"!==i.type&&t.push(i.serialize())}return t},n.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1},n.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},n.prototype.update=function(t){if(this._loaded){var n=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var o in(r.length||i.length)&&this._updateWorkerLayers(r,i),this._updatedSources){var a=this._updatedSources[o];"reload"===a?this._reloadSource(o):"clear"===a&&this._clearSource(o)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}var u={};for(var c in this.sourceCaches){var l=this.sourceCaches[c];u[c]=l.used,l.used=!1}for(var f=0,p=this._order;f<p.length;f+=1){var h=this._layers[p[f]];h.recalculate(t,this._availableImages),!h.isHidden(t.zoom)&&h.source&&(this.sourceCaches[h.source].used=!0)}for(var d in u){var v=this.sourceCaches[d];u[d]!==v.used&&v.fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:d}))}this.light.recalculate(t),this.z=t.zoom,n&&this.fire(new e.Event("data",{dataType:"style"}))}},n.prototype._updateTilesForChangedImages=function(){var e=Object.keys(this._changedImages);if(e.length){for(var t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}},n.prototype._updateWorkerLayers=function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})},n.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},n.prototype.setState=function(t){var n=this;if(this._checkLoaded(),zt(this,e.validateStyle(t)))return!1;(t=e.clone$1(t)).layers=Be(t.layers);var r=function(t,n){if(!t)return[{command:Ue.setStyle,args:[n]}];var r=[];try{if(!e.deepEqual(t.version,n.version))return[{command:Ue.setStyle,args:[n]}];e.deepEqual(t.center,n.center)||r.push({command:Ue.setCenter,args:[n.center]}),e.deepEqual(t.zoom,n.zoom)||r.push({command:Ue.setZoom,args:[n.zoom]}),e.deepEqual(t.bearing,n.bearing)||r.push({command:Ue.setBearing,args:[n.bearing]}),e.deepEqual(t.pitch,n.pitch)||r.push({command:Ue.setPitch,args:[n.pitch]}),e.deepEqual(t.sprite,n.sprite)||r.push({command:Ue.setSprite,args:[n.sprite]}),e.deepEqual(t.glyphs,n.glyphs)||r.push({command:Ue.setGlyphs,args:[n.glyphs]}),e.deepEqual(t.transition,n.transition)||r.push({command:Ue.setTransition,args:[n.transition]}),e.deepEqual(t.light,n.light)||r.push({command:Ue.setLight,args:[n.light]});var i={},o=[];!function(t,n,r,i){var o;for(o in n=n||{},t=t||{})t.hasOwnProperty(o)&&(n.hasOwnProperty(o)||He(o,r,i));for(o in n)n.hasOwnProperty(o)&&(t.hasOwnProperty(o)?e.deepEqual(t[o],n[o])||("geojson"===t[o].type&&"geojson"===n[o].type&&We(t,n,o)?r.push({command:Ue.setGeoJSONSourceData,args:[o,n[o].data]}):Ge(o,n,r,i)):Ve(o,n,r))}(t.sources,n.sources,o,i);var a=[];t.layers&&t.layers.forEach((function(e){i[e.source]?r.push({command:Ue.removeLayer,args:[e.id]}):a.push(e)})),r=r.concat(o),function(t,n,r){n=n||[];var i,o,a,s,u,c,l,f=(t=t||[]).map(Ze),p=n.map(Ze),h=t.reduce(Ye,{}),d=n.reduce(Ye,{}),v=f.slice(),m=Object.create(null);for(i=0,o=0;i<f.length;i++)d.hasOwnProperty(a=f[i])?o++:(r.push({command:Ue.removeLayer,args:[a]}),v.splice(v.indexOf(a,o),1));for(i=0,o=0;i<p.length;i++)v[v.length-1-i]!==(a=p[p.length-1-i])&&(h.hasOwnProperty(a)?(r.push({command:Ue.removeLayer,args:[a]}),v.splice(v.lastIndexOf(a,v.length-o),1)):o++,r.push({command:Ue.addLayer,args:[d[a],c=v[v.length-i]]}),v.splice(v.length-i,0,a),m[a]=!0);for(i=0;i<p.length;i++)if(s=h[a=p[i]],u=d[a],!m[a]&&!e.deepEqual(s,u))if(e.deepEqual(s.source,u.source)&&e.deepEqual(s["source-layer"],u["source-layer"])&&e.deepEqual(s.type,u.type)){for(l in qe(s.layout,u.layout,r,a,null,Ue.setLayoutProperty),qe(s.paint,u.paint,r,a,null,Ue.setPaintProperty),e.deepEqual(s.filter,u.filter)||r.push({command:Ue.setFilter,args:[a,u.filter]}),e.deepEqual(s.minzoom,u.minzoom)&&e.deepEqual(s.maxzoom,u.maxzoom)||r.push({command:Ue.setLayerZoomRange,args:[a,u.minzoom,u.maxzoom]}),s)s.hasOwnProperty(l)&&"layout"!==l&&"paint"!==l&&"filter"!==l&&"metadata"!==l&&"minzoom"!==l&&"maxzoom"!==l&&(0===l.indexOf("paint.")?qe(s[l],u[l],r,a,l.slice(6),Ue.setPaintProperty):e.deepEqual(s[l],u[l])||r.push({command:Ue.setLayerProperty,args:[a,l,u[l]]}));for(l in u)u.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&"layout"!==l&&"paint"!==l&&"filter"!==l&&"metadata"!==l&&"minzoom"!==l&&"maxzoom"!==l&&(0===l.indexOf("paint.")?qe(s[l],u[l],r,a,l.slice(6),Ue.setPaintProperty):e.deepEqual(s[l],u[l])||r.push({command:Ue.setLayerProperty,args:[a,l,u[l]]}))}else r.push({command:Ue.removeLayer,args:[a]}),c=v[v.lastIndexOf(a)+1],r.push({command:Ue.addLayer,args:[u,c]})}(a,n.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:Ue.setStyle,args:[n]}]}return r}(this.serialize(),t).filter((function(e){return!(e.command in Ut)}));if(0===r.length)return!1;var i=r.filter((function(e){return!(e.command in Bt)}));if(i.length>0)throw new Error("Unimplemented: "+i.map((function(e){return e.command})).join(", ")+".");return r.forEach((function(e){"setTransition"!==e.command&&n[e.command].apply(n,e.args)})),this.stylesheet=t,!0},n.prototype.addImage=function(t,n){if(this.getImage(t))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(t,n),this._afterImageUpdated(t)},n.prototype.updateImage=function(e,t){this.imageManager.updateImage(e,t)},n.prototype.getImage=function(e){return this.imageManager.getImage(e)},n.prototype.removeImage=function(t){if(!this.getImage(t))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this._afterImageUpdated(t)},n.prototype._afterImageUpdated=function(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))},n.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},n.prototype.addSource=function(t,n,r){var i=this;if(void 0===r&&(r={}),this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(e.validateStyle.source,"sources."+t,n,null,r))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var o=this.sourceCaches[t]=new Te(t,n,this.dispatcher);o.style=this,o.setEventedParent(this,(function(){return{isSourceLoaded:i.loaded(),source:o.serialize(),sourceId:t}})),o.onAdd(this.map),this._changed=!0}},n.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===t)return this.fire(new e.ErrorEvent(new Error('Source "'+t+'" cannot be removed while layer "'+n+'" is using it.')));var r=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],r.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},n.prototype.setGeoJSONSourceData=function(e,t){this._checkLoaded(),this.sourceCaches[e].getSource().setData(t),this._changed=!0},n.prototype.getSource=function(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()},n.prototype.addLayer=function(t,n,r){void 0===r&&(r={}),this._checkLoaded();var i=t.id;if(this.getLayer(i))this.fire(new e.ErrorEvent(new Error('Layer with id "'+i+'" already exists on this map')));else{var o;if("custom"===t.type){if(zt(this,e.validateCustomStyleLayer(t)))return;o=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(i,t.source),t=e.clone$1(t),t=e.extend(t,{source:i})),this._validate(e.validateStyle.layer,"layers."+i,t,{arrayIndex:-1},r))return;o=e.createStyleLayer(t),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize()}var a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new e.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source&&"custom"!==o.type){var s=this._removedLayers[i];delete this._removedLayers[i],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}},n.prototype.moveLayer=function(t,n){if(this._checkLoaded(),this._changed=!0,this._layers[t]){if(t!==n){var r=this._order.indexOf(t);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new e.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(i,0,t),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")))},n.prototype.removeLayer=function(t){this._checkLoaded();var n=this._layers[t];if(n){n.setEventedParent(null);var r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")))},n.prototype.getLayer=function(e){return this._layers[e]},n.prototype.hasLayer=function(e){return e in this._layers},n.prototype.setLayerZoomRange=function(t,n,r){this._checkLoaded();var i=this.getLayer(t);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")))},n.prototype.setFilter=function(t,n,r){void 0===r&&(r={}),this._checkLoaded();var i=this.getLayer(t);if(i){if(!e.deepEqual(i.filter,n))return null==n?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(e.validateStyle.filter,"layers."+i.id+".filter",n,null,r)||(i.filter=e.clone$1(n),this._updateLayer(i)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")))},n.prototype.getFilter=function(t){return e.clone$1(this.getLayer(t).filter)},n.prototype.setLayoutProperty=function(t,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(t);o?e.deepEqual(o.getLayoutProperty(n),r)||(o.setLayoutProperty(n,r,i),this._updateLayer(o)):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getLayoutProperty=function(t,n){var r=this.getLayer(t);if(r)return r.getLayoutProperty(n);this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style.")))},n.prototype.setPaintProperty=function(t,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(t);o?e.deepEqual(o.getPaintProperty(n),r)||(o.setPaintProperty(n,r,i)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getPaintProperty=function(e,t){return this.getLayer(e).getPaintProperty(t)},n.prototype.setFeatureState=function(t,n){this._checkLoaded();var r=t.source,i=t.sourceLayer,o=this.sourceCaches[r];if(void 0!==o){var a=o.getSource().type;"geojson"===a&&i?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||i?(void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),o.setFeatureState(i,t.id,n)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.removeFeatureState=function(t,n){this._checkLoaded();var r=t.source,i=this.sourceCaches[r];if(void 0!==i){var o=i.getSource().type,a="vector"===o?t.sourceLayer:void 0;"vector"!==o||a?n&&"string"!=typeof t.id&&"number"!=typeof t.id?this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):i.removeFeatureState(a,t.id,n):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.getFeatureState=function(t){this._checkLoaded();var n=t.source,r=t.sourceLayer,i=this.sourceCaches[n];if(void 0!==i){if("vector"!==i.getSource().type||r)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),i.getFeatureState(r,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},n.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},n.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,(function(e){return e.serialize()})),layers:this._serializeLayers(this._order)},(function(e){return void 0!==e}))},n.prototype._updateLayer=function(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&"raster"!==this.sourceCaches[e.source].getSource().type&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._changed=!0},n.prototype._flattenAndSortRenderedFeatures=function(e){for(var t=this,n=function(e){return"fill-extrusion"===t._layers[e].type},r={},i=[],o=this._order.length-1;o>=0;o--){var a=this._order[o];if(n(a)){r[a]=o;for(var s=0,u=e;s<u.length;s+=1){var c=u[s][a];if(c)for(var l=0,f=c;l<f.length;l+=1)i.push(f[l])}}}i.sort((function(e,t){return t.intersectionZ-e.intersectionZ}));for(var p=[],h=this._order.length-1;h>=0;h--){var d=this._order[h];if(n(d))for(var v=i.length-1;v>=0;v--){var m=i[v].feature;if(r[m.layer.id]<h)break;p.push(m),i.pop()}else for(var g=0,y=e;g<y.length;g+=1){var b=y[g][d];if(b)for(var _=0,x=b;_<x.length;_+=1)p.push(x[_].feature)}}return p},n.prototype.queryRenderedFeatures=function(t,n,r){n&&n.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);var i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=n.layers;o<a.length;o+=1){var s=a[o],u=this._layers[s];if(!u)return this.fire(new e.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];i[u.source]=!0}}var c=[];for(var l in n.availableImages=this._availableImages,this.sourceCaches)n.layers&&!i[l]||c.push(N(this.sourceCaches[l],this._layers,this._serializedLayers,t,n,r));return this.placement&&c.push(function(e,t,n,r,i,o,a){for(var s={},u=o.queryRenderedSymbols(r),c=[],l=0,f=Object.keys(u).map(Number);l<f.length;l+=1)c.push(a[f[l]]);c.sort(F);for(var p=function(){var n=d[h],r=n.featureIndex.lookupSymbolFeatures(u[n.bucketInstanceId],t,n.bucketIndex,n.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(var o in r){var a=s[o]=s[o]||[],c=r[o];c.sort((function(e,t){var r=n.featureSortOrder;if(r){var i=r.indexOf(e.featureIndex);return r.indexOf(t.featureIndex)-i}return t.featureIndex-e.featureIndex}));for(var l=0,f=c;l<f.length;l+=1)a.push(f[l])}},h=0,d=c;h<d.length;h+=1)p();var v=function(t){s[t].forEach((function(r){var i=r.feature,o=n[e[t].source].getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o}))};for(var m in s)v(m);return s}(this._layers,this._serializedLayers,this.sourceCaches,t,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(c)},n.prototype.querySourceFeatures=function(t,n){n&&n.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);var r=this.sourceCaches[t];return r?function(e,t){for(var n=e.getRenderableIds().map((function(t){return e.getTileByID(t)})),r=[],i={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(r,t))}return r}(r,n):[]},n.prototype.addSourceType=function(e,t,r){return n.getSourceType(e)?r(new Error('A source type called "'+e+'" already exists.')):(n.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},r):r(null,null))},n.prototype.getLight=function(){return this.light.getLight()},n.prototype.setLight=function(t,n){void 0===n&&(n={}),this._checkLoaded();var r=this.light.getLight(),i=!1;for(var o in t)if(!e.deepEqual(t[o],r[o])){i=!0;break}if(i){var a={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,n),this.light.updateTransitions(a)}},n.prototype._validate=function(t,n,r,i,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&zt(this,t.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:r,styleSpec:e.styleSpec},i)))},n.prototype._remove=function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[t].setEventedParent(null);for(var n in this.sourceCaches)this.sourceCaches[n].clearTiles(),this.sourceCaches[n].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},n.prototype._clearSource=function(e){this.sourceCaches[e].clearTiles()},n.prototype._reloadSource=function(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()},n.prototype._updateSources=function(e){for(var t in this.sourceCaches)this.sourceCaches[t].update(e)},n.prototype._generateCollisionBoxes=function(){for(var e in this.sourceCaches)this._reloadSource(e)},n.prototype._updatePlacement=function(t,n,r,i,o){void 0===o&&(o=!1);for(var a=!1,s=!1,u={},c=0,l=this._order;c<l.length;c+=1){var f=this._layers[l[c]];if("symbol"===f.type){if(!u[f.source]){var p=this.sourceCaches[f.source];u[f.source]=p.getRenderableIds(!0).map((function(e){return p.getTileByID(e)})).sort((function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)}))}var h=this.crossTileSymbolIndex.addLayer(f,u[f.source],t.center.lng);a=a||h}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((o=o||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),t.zoom))&&(this.pauseablePlacement=new It(t,this._order,o,n,r,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,u),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(var d=0,v=this._order;d<v.length;d+=1){var m=this._layers[v[d]];"symbol"===m.type&&this.placement.updateLayerOpacities(m,u[m.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},n.prototype._releaseSymbolFadeTiles=function(){for(var e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()},n.prototype.getImages=function(e,t,n){this.imageManager.getImages(t.icons,n),this._updateTilesForChangedImages();var r=this.sourceCaches[t.source];r&&r.setDependencies(t.tileID.key,t.type,t.icons)},n.prototype.getGlyphs=function(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)},n.prototype.getResource=function(t,n,r){return e.makeRequest(n,r)},n}(e.Evented);Ht.getSourceType=function(e){return L[e]},Ht.setSourceType=function(e,t){L[e]=t},Ht.registerForPluginStateChange=e.registerForPluginStateChange;var Gt=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),Wt=yn("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),qt=yn("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Zt=yn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Yt=yn("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Xt=yn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Kt=yn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),$t=yn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Qt=yn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Jt=yn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),en=yn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),tn=yn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),nn=yn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),rn=yn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),on=yn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),an=yn("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),sn=yn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),un=yn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),cn=yn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ln=yn("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),fn=yn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),pn=yn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),hn=yn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),dn=yn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),vn=yn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),mn=yn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),gn=yn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function yn(e,t){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=t.match(/attribute ([\w]+) ([\w]+)/g),i=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(i):i,s={};return{fragmentSource:e=e.replace(n,(function(e,t,n,r,i){return s[i]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_"+i+"\nvarying "+n+" "+r+" "+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+i+"\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n"})),vertexSource:t=t.replace(n,(function(e,t,n,r,i){var o="float"===r?"vec2":"vec4",a=i.match(/color/)?"color":o;return s[i]?"define"===t?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float u_"+i+"_t;\nattribute "+n+" "+o+" a_"+i+";\nvarying "+n+" "+r+" "+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = a_"+i+";\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = unpack_mix_"+a+"(a_"+i+", u_"+i+"_t);\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n":"define"===t?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float u_"+i+"_t;\nattribute "+n+" "+o+" a_"+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+n+" "+r+" "+i+" = a_"+i+";\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+n+" "+r+" "+i+" = unpack_mix_"+a+"(a_"+i+", u_"+i+"_t);\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n"})),staticAttributes:r,staticUniforms:a}}var bn=Object.freeze({__proto__:null,prelude:Wt,background:qt,backgroundPattern:Zt,circle:Yt,clippingMask:Xt,heatmap:Kt,heatmapTexture:$t,collisionBox:Qt,collisionCircle:Jt,debug:en,fill:tn,fillOutline:nn,fillOutlinePattern:rn,fillPattern:on,fillExtrusion:an,fillExtrusionPattern:sn,hillshadePrepare:un,hillshade:cn,line:ln,lineGradient:fn,linePattern:pn,lineSDF:hn,raster:dn,symbolIcon:vn,symbolSDF:mn,symbolTextAndIcon:gn}),_n=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function xn(e){for(var t=[],n=0;n<e.length;n++)if(null!==e[n]){var r=e[n].split(" ");t.push(r.pop())}return t}_n.prototype.bind=function(e,t,n,r,i,o,a,s){this.context=e;for(var u=this.boundPaintVertexBuffers.length!==r.length,c=0;!u&&c<r.length;c++)this.boundPaintVertexBuffers[c]!==r[c]&&(u=!0);e.extVertexArrayObject&&this.vao&&this.boundProgram===t&&this.boundLayoutVertexBuffer===n&&!u&&this.boundIndexBuffer===i&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(e.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind()):this.freshBind(t,n,r,i,o,a,s)},_n.prototype.freshBind=function(e,t,n,r,i,o,a){var s,u=e.numAttributes,c=this.context,l=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=c.currentNumAttributes||0;for(var f=u;f<s;f++)l.disableVertexAttribArray(f)}t.enableAttributes(l,e);for(var p=0,h=n;p<h.length;p+=1)h[p].enableAttributes(l,e);o&&o.enableAttributes(l,e),a&&a.enableAttributes(l,e),t.bind(),t.setVertexAttribPointers(l,e,i);for(var d=0,v=n;d<v.length;d+=1){var m=v[d];m.bind(),m.setVertexAttribPointers(l,e,i)}o&&(o.bind(),o.setVertexAttribPointers(l,e,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(l,e,i)),c.currentNumAttributes=u},_n.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var wn=function(e,t,n,r,i,o){var a=e.gl;this.program=a.createProgram();for(var s=xn(n.staticAttributes),u=r?r.getBinderAttributes():[],c=s.concat(u),l=n.staticUniforms?xn(n.staticUniforms):[],f=r?r.getBinderUniforms():[],p=[],h=0,d=l.concat(f);h<d.length;h+=1){var v=d[h];p.indexOf(v)<0&&p.push(v)}var m=r?r.defines():[];o&&m.push("#define OVERDRAW_INSPECTOR;");var g=m.concat(Wt.fragmentSource,n.fragmentSource).join("\n"),y=m.concat(Wt.vertexSource,n.vertexSource).join("\n"),b=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(b,g),a.compileShader(b),a.attachShader(this.program,b);var _=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(_,y),a.compileShader(_),a.attachShader(this.program,_),this.attributes={};var x={};this.numAttributes=c.length;for(var w=0;w<this.numAttributes;w++)c[w]&&(a.bindAttribLocation(this.program,w,c[w]),this.attributes[c[w]]=w);a.linkProgram(this.program),a.deleteShader(_),a.deleteShader(b);for(var O=0;O<p.length;O++){var E=p[O];if(E&&!x[E]){var S=a.getUniformLocation(this.program,E);S&&(x[E]=S)}}this.fixedUniforms=i(e,x),this.binderUniforms=r?r.getUniforms(e,x):[]}}};function On(e,t,n){var r=1/pt(n,1,t.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,t.transform.tileZoom)/i,a=o*(n.tileID.canonical.x+n.tileID.wrap*i),s=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}wn.prototype.draw=function(e,t,n,r,i,o,a,s,u,c,l,f,p,h,d,v){var m,g=e.gl;if(!this.failedToCreate){for(var y in e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(r),e.setColorMode(i),e.setCullFace(o),this.fixedUniforms)this.fixedUniforms[y].set(a[y]);h&&h.setUniforms(e,this.binderUniforms,f,{zoom:p});for(var b=(m={},m[g.LINES]=2,m[g.TRIANGLES]=3,m[g.LINE_STRIP]=1,m)[t],_=0,x=l.get();_<x.length;_+=1){var w=x[_],O=w.vaos||(w.vaos={});(O[s]||(O[s]=new _n)).bind(e,this,u,h?h.getPaintVertexBuffers():[],c,w.vertexOffset,d,v),g.drawElements(t,w.primitiveLength*b,g.UNSIGNED_SHORT,w.primitiveOffset*b*2)}}};var En=function(t,n,r,i){var o=n.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],u=e.create$1();"viewport"===o.properties.get("anchor")&&e.fromRotation(u,-n.transform.angle),e.transformMat3(s,s,u);var c=o.properties.get("color");return{u_matrix:t,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+r,u_opacity:i}},Sn=function(t,n,r,i,o,a,s){return e.extend(En(t,n,r,i),On(a,n,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8})},jn=function(e){return{u_matrix:e}},An=function(t,n,r,i){return e.extend(jn(t),On(r,n,i))},kn=function(e,t){return{u_matrix:e,u_world:t}},Cn=function(t,n,r,i,o){return e.extend(An(t,n,r,i),{u_world:o})},Tn=function(t,n,r,i){var o,a,s=t.transform;if("map"===i.paint.get("circle-pitch-alignment")){var u=pt(r,1,s.zoom);o=!0,a=[u,u]}else o=!1,a=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===i.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(n.posMatrix,r,i.paint.get("circle-translate"),i.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:a}},Mn=function(e,t,n){var r=pt(n,1,t.zoom),i=Math.pow(2,t.zoom-n.tileID.overscaledZ),o=n.tileID.overscaleFactor();return{u_matrix:e,u_camera_to_center_distance:t.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[t.pixelsToGLUnits[0]/(r*i),t.pixelsToGLUnits[1]/(r*i)],u_overscale_factor:o}},Pn=function(e,t,n){return{u_matrix:e,u_inv_matrix:t,u_camera_to_center_distance:n.cameraToCenterDistance,u_viewport_size:[n.width,n.height]}},In=function(e,t,n){return void 0===n&&(n=1),{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:n}},Rn=function(e){return{u_matrix:e}},Ln=function(e,t,n,r){return{u_matrix:e,u_extrude_scale:pt(t,1,n),u_intensity:r}},Dn=function(t,n,r){var i=t.transform;return{u_matrix:Un(t,n,r),u_ratio:1/pt(n,1,i.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},Nn=function(t,n,r,i){return e.extend(Dn(t,n,r),{u_image:0,u_image_height:i})},Fn=function(t,n,r,i){var o=t.transform,a=Bn(n,o);return{u_matrix:Un(t,n,r),u_texsize:n.imageAtlasTexture.size,u_ratio:1/pt(n,1,o.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[a,i.fromScale,i.toScale],u_fade:i.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},zn=function(t,n,r,i,o){var a=t.lineAtlas,s=Bn(n,t.transform),u="round"===r.layout.get("line-cap"),c=a.getDash(i.from,u),l=a.getDash(i.to,u),f=c.width*o.fromScale,p=l.width*o.toScale;return e.extend(Dn(t,n,r),{u_patternscale_a:[s/f,-c.height/2],u_patternscale_b:[s/p,-l.height/2],u_sdfgamma:a.width/(256*Math.min(f,p)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:l.y,u_mix:o.t})};function Bn(e,t){return 1/pt(e,1,t.tileZoom)}function Un(e,t,n){return e.translatePosMatrix(t.tileID.posMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}var Vn=function(e,t,n,r,i){return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Hn(i.paint.get("raster-hue-rotate"))};var o,a};function Hn(e){e*=Math.PI/180;var t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}var Gn,Wn=function(e,t,n,r,i,o,a,s,u,c){var l=i.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:l.cameraToCenterDistance,u_pitch:l.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:l.width/l.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+u,u_pitch_with_map:+r,u_texsize:c,u_texture:0}},qn=function(t,n,r,i,o,a,s,u,c,l,f){var p=o.transform;return e.extend(Wn(t,n,r,i,o,a,s,u,c,l),{u_gamma_scale:i?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+f})},Zn=function(t,n,r,i,o,a,s,u,c,l){return e.extend(qn(t,n,r,i,o,a,s,u,!0,c,!0),{u_texsize_icon:l,u_texture_icon:1})},Yn=function(e,t,n){return{u_matrix:e,u_opacity:t,u_color:n}},Xn=function(t,n,r,i,o,a){return e.extend(function(e,t,n,r){var i=n.imageManager.getPattern(e.from.toString()),o=n.imageManager.getPattern(e.to.toString()),a=n.imageManager.getPixelSize(),s=a.width,u=a.height,c=Math.pow(2,r.tileID.overscaledZ),l=r.tileSize*Math.pow(2,n.transform.tileZoom)/c,f=l*(r.tileID.canonical.x+r.tileID.wrap*c),p=l*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,u],u_mix:t.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/pt(r,1,n.transform.tileZoom),u_pixel_coord_upper:[f>>16,p>>16],u_pixel_coord_lower:[65535&f,65535&p]}}(i,a,r,o),{u_matrix:t,u_opacity:n})},Kn={fillExtrusion:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient),u_opacity:new e.Uniform1f(t,n.u_opacity)}},fillExtrusionPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient),u_height_factor:new e.Uniform1f(t,n.u_height_factor),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade),u_opacity:new e.Uniform1f(t,n.u_opacity)}},fill:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},fillPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},fillOutline:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world)}},fillOutlinePattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},circle:function(t,n){return{u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(t,n.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(t,n.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},collisionBox:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(t,n.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(t,n.u_extrude_scale),u_overscale_factor:new e.Uniform1f(t,n.u_overscale_factor)}},collisionCircle:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_inv_matrix:new e.UniformMatrix4f(t,n.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(t,n.u_viewport_size)}},debug:function(t,n){return{u_color:new e.UniformColor(t,n.u_color),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_overlay:new e.Uniform1i(t,n.u_overlay),u_overlay_scale:new e.Uniform1f(t,n.u_overlay_scale)}},clippingMask:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},heatmap:function(t,n){return{u_extrude_scale:new e.Uniform1f(t,n.u_extrude_scale),u_intensity:new e.Uniform1f(t,n.u_intensity),u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},heatmapTexture:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world),u_image:new e.Uniform1i(t,n.u_image),u_color_ramp:new e.Uniform1i(t,n.u_color_ramp),u_opacity:new e.Uniform1f(t,n.u_opacity)}},hillshade:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_latrange:new e.Uniform2f(t,n.u_latrange),u_light:new e.Uniform2f(t,n.u_light),u_shadow:new e.UniformColor(t,n.u_shadow),u_highlight:new e.UniformColor(t,n.u_highlight),u_accent:new e.UniformColor(t,n.u_accent)}},hillshadePrepare:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_dimension:new e.Uniform2f(t,n.u_dimension),u_zoom:new e.Uniform1f(t,n.u_zoom),u_unpack:new e.Uniform4f(t,n.u_unpack)}},line:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels)}},lineGradient:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_image:new e.Uniform1i(t,n.u_image),u_image_height:new e.Uniform1f(t,n.u_image_height)}},linePattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_texsize:new e.Uniform2f(t,n.u_texsize),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_image:new e.Uniform1i(t,n.u_image),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},lineSDF:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(t,n.u_patternscale_a),u_patternscale_b:new e.Uniform2f(t,n.u_patternscale_b),u_sdfgamma:new e.Uniform1f(t,n.u_sdfgamma),u_image:new e.Uniform1i(t,n.u_image),u_tex_y_a:new e.Uniform1f(t,n.u_tex_y_a),u_tex_y_b:new e.Uniform1f(t,n.u_tex_y_b),u_mix:new e.Uniform1f(t,n.u_mix)}},raster:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_tl_parent:new e.Uniform2f(t,n.u_tl_parent),u_scale_parent:new e.Uniform1f(t,n.u_scale_parent),u_buffer_scale:new e.Uniform1f(t,n.u_buffer_scale),u_fade_t:new e.Uniform1f(t,n.u_fade_t),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image0:new e.Uniform1i(t,n.u_image0),u_image1:new e.Uniform1i(t,n.u_image1),u_brightness_low:new e.Uniform1f(t,n.u_brightness_low),u_brightness_high:new e.Uniform1f(t,n.u_brightness_high),u_saturation_factor:new e.Uniform1f(t,n.u_saturation_factor),u_contrast_factor:new e.Uniform1f(t,n.u_contrast_factor),u_spin_weights:new e.Uniform3f(t,n.u_spin_weights)}},symbolIcon:function(t,n){return{u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texture:new e.Uniform1i(t,n.u_texture)}},symbolSDF:function(t,n){return{u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texture:new e.Uniform1i(t,n.u_texture),u_gamma_scale:new e.Uniform1f(t,n.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,n.u_is_halo)}},symbolTextAndIcon:function(t,n){return{u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texsize_icon:new e.Uniform2f(t,n.u_texsize_icon),u_texture:new e.Uniform1i(t,n.u_texture),u_texture_icon:new e.Uniform1i(t,n.u_texture_icon),u_gamma_scale:new e.Uniform1f(t,n.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,n.u_is_halo)}},background:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_color:new e.UniformColor(t,n.u_color)}},backgroundPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image:new e.Uniform1i(t,n.u_image),u_pattern_tl_a:new e.Uniform2f(t,n.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(t,n.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(t,n.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(t,n.u_pattern_br_b),u_texsize:new e.Uniform2f(t,n.u_texsize),u_mix:new e.Uniform1f(t,n.u_mix),u_pattern_size_a:new e.Uniform2f(t,n.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(t,n.u_pattern_size_b),u_scale_a:new e.Uniform1f(t,n.u_scale_a),u_scale_b:new e.Uniform1f(t,n.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(t,n.u_tile_units_to_pixels)}}};function $n(t,n,r,i,o,a,s){for(var u=t.context,c=u.gl,l=t.useProgram("collisionBox"),f=[],p=0,h=0,d=0;d<i.length;d++){var v=i[d],m=n.getTile(v),g=m.getBucket(r);if(g){var y=v.posMatrix;0===o[0]&&0===o[1]||(y=t.translatePosMatrix(v.posMatrix,m,o,a));var b=s?g.textCollisionBox:g.iconCollisionBox,_=g.collisionCircleArray;if(_.length>0){var x=e.create(),w=y;e.mul(x,g.placementInvProjMatrix,t.transform.glCoordMatrix),e.mul(x,x,g.placementViewportMatrix),f.push({circleArray:_,circleOffset:h,transform:w,invTransform:x}),h=p+=_.length/4}b&&l.draw(u,c.LINES,Se.disabled,je.disabled,t.colorModeForRenderPass(),ke.disabled,Mn(y,t.transform,m),r.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,null,t.transform.zoom,null,null,b.collisionVertexBuffer)}}if(s&&f.length){var O=t.useProgram("collisionCircle"),E=new e.StructArrayLayout2f1f2i16;E.resize(4*p),E._trim();for(var S=0,j=0,A=f;j<A.length;j+=1)for(var k=A[j],C=0;C<k.circleArray.length/4;C++){var T=4*C,M=k.circleArray[T+0],P=k.circleArray[T+1],I=k.circleArray[T+2],R=k.circleArray[T+3];E.emplace(S++,M,P,I,R,0),E.emplace(S++,M,P,I,R,1),E.emplace(S++,M,P,I,R,2),E.emplace(S++,M,P,I,R,3)}(!Gn||Gn.length<2*p)&&(Gn=function(t){var n=2*t,r=new e.StructArrayLayout3ui6;r.resize(n),r._trim();for(var i=0;i<n;i++){var o=6*i;r.uint16[o+0]=4*i+0,r.uint16[o+1]=4*i+1,r.uint16[o+2]=4*i+2,r.uint16[o+3]=4*i+2,r.uint16[o+4]=4*i+3,r.uint16[o+5]=4*i+0}return r}(p));for(var L=u.createIndexBuffer(Gn,!0),D=u.createVertexBuffer(E,e.collisionCircleLayout.members,!0),N=0,F=f;N<F.length;N+=1){var z=F[N],B=Pn(z.transform,z.invTransform,t.transform);O.draw(u,c.TRIANGLES,Se.disabled,je.disabled,t.colorModeForRenderPass(),ke.disabled,B,r.id,D,L,e.SegmentVector.simpleSegment(0,2*z.circleOffset,z.circleArray.length,z.circleArray.length/2),null,t.transform.zoom,null,null,null)}D.destroy(),L.destroy()}}var Qn=e.identity(new Float32Array(16));function Jn(t,n,r,i,o,a){var s=e.getAnchorAlignment(t),u=-(s.horizontalAlign-.5)*n,c=-(s.verticalAlign-.5)*r,l=e.evaluateVariableOffset(t,i);return new e.Point((u/o+l[0])*a,(c/o+l[1])*a)}function er(t,n,r,i,o,a,s,u,c,l,f){var p=t.text.placedSymbolArray,h=t.text.dynamicLayoutVertexArray,d=t.icon.dynamicLayoutVertexArray,v={};h.clear();for(var m=0;m<p.length;m++){var g=p.get(m),y=g.hidden||!g.crossTileID||t.allowVerticalPlacement&&!g.placedOrientation?null:i[g.crossTileID];if(y){var b=new e.Point(g.anchorX,g.anchorY),_=Je(b,r?u:s),x=et(a.cameraToCenterDistance,_.signedDistanceFromCamera),w=o.evaluateSizeForFeature(t.textSizeData,l,g)*x/e.ONE_EM;r&&(w*=t.tilePixelRatio/c);for(var O=Jn(y.anchor,y.width,y.height,y.textOffset,y.textBoxScale,w),E=r?Je(b.add(O),s).point:_.point.add(n?O.rotate(-a.angle):O),S=t.allowVerticalPlacement&&g.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,j=0;j<g.numGlyphs;j++)e.addDynamicAttributes(h,E,S);f&&g.associatedIconIndex>=0&&(v[g.associatedIconIndex]={shiftedAnchor:E,angle:S})}else ct(g.numGlyphs,h)}if(f){d.clear();for(var A=t.icon.placedSymbolArray,k=0;k<A.length;k++){var C=A.get(k);if(C.hidden)ct(C.numGlyphs,d);else{var T=v[k];if(T)for(var M=0;M<C.numGlyphs;M++)e.addDynamicAttributes(d,T.shiftedAnchor,T.angle);else ct(C.numGlyphs,d)}}t.icon.dynamicLayoutVertexBuffer.updateData(d)}t.text.dynamicLayoutVertexBuffer.updateData(h)}function tr(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function nr(t,n,r,i,o,a,s,u,c,l,f,p){for(var h=t.context,d=h.gl,v=t.transform,m="map"===u,g="map"===c,y=m&&"point"!==r.layout.get("symbol-placement"),b=m&&!g&&!y,_=void 0!==r.layout.get("symbol-sort-key").constantOr(1),x=!1,w=t.depthModeForSublayer(0,Se.ReadOnly),O=r.layout.get("text-variable-anchor"),E=[],S=0,j=i;S<j.length;S+=1){var A=j[S],k=n.getTile(A),C=k.getBucket(r);if(C){var T=o?C.text:C.icon;if(T&&T.segments.get().length){var M=T.programConfigurations.get(r.id),P=o||C.sdfIcons,I=o?C.textSizeData:C.iconSizeData,R=g||0!==v.pitch,L=t.useProgram(tr(P,o,C),M),D=e.evaluateSizeForZoom(I,v.zoom),N=void 0,F=[0,0],z=void 0,B=void 0,U=null,V=void 0;if(o)z=k.glyphAtlasTexture,B=d.LINEAR,N=k.glyphAtlasTexture.size,C.iconsInText&&(F=k.imageAtlasTexture.size,U=k.imageAtlasTexture,V=R||t.options.rotating||t.options.zooming||"composite"===I.kind||"camera"===I.kind?d.LINEAR:d.NEAREST);else{var H=1!==r.layout.get("icon-size").constantOr(0)||C.iconsNeedLinear;z=k.imageAtlasTexture,B=P||t.options.rotating||t.options.zooming||H||R?d.LINEAR:d.NEAREST,N=k.imageAtlasTexture.size}var G=pt(k,1,t.transform.zoom),W=$e(A.posMatrix,g,m,t.transform,G),q=Qe(A.posMatrix,g,m,t.transform,G),Z=O&&C.hasTextData(),Y="none"!==r.layout.get("icon-text-fit")&&Z&&C.hasIconData();y&&nt(C,A.posMatrix,t,o,W,q,g,l);var X=t.translatePosMatrix(A.posMatrix,k,a,s),K=y||o&&O||Y?Qn:W,$=t.translatePosMatrix(q,k,a,s,!0),Q=P&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),J={program:L,buffers:T,uniformValues:P?C.iconsInText?Zn(I.kind,D,b,g,t,X,K,$,N,F):qn(I.kind,D,b,g,t,X,K,$,o,N,!0):Wn(I.kind,D,b,g,t,X,K,$,o,N),atlasTexture:z,atlasTextureIcon:U,atlasInterpolation:B,atlasInterpolationIcon:V,isSDF:P,hasHalo:Q};if(_&&C.canOverlap){x=!0;for(var ee=0,te=T.segments.get();ee<te.length;ee+=1){var ne=te[ee];E.push({segments:new e.SegmentVector([ne]),sortKey:ne.sortKey,state:J})}}else E.push({segments:T.segments,sortKey:0,state:J})}}}x&&E.sort((function(e,t){return e.sortKey-t.sortKey}));for(var re=0,ie=E;re<ie.length;re+=1){var oe=ie[re],ae=oe.state;if(h.activeTexture.set(d.TEXTURE0),ae.atlasTexture.bind(ae.atlasInterpolation,d.CLAMP_TO_EDGE),ae.atlasTextureIcon&&(h.activeTexture.set(d.TEXTURE1),ae.atlasTextureIcon&&ae.atlasTextureIcon.bind(ae.atlasInterpolationIcon,d.CLAMP_TO_EDGE)),ae.isSDF){var se=ae.uniformValues;ae.hasHalo&&(se.u_is_halo=1,rr(ae.buffers,oe.segments,r,t,ae.program,w,f,p,se)),se.u_is_halo=0}rr(ae.buffers,oe.segments,r,t,ae.program,w,f,p,ae.uniformValues)}}function rr(e,t,n,r,i,o,a,s,u){var c=r.context;i.draw(c,c.gl.TRIANGLES,o,a,s,ke.disabled,u,n.id,e.layoutVertexBuffer,e.indexBuffer,t,n.paint,r.transform.zoom,e.programConfigurations.get(n.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function ir(e,t,n,r,i,o,a){var s,u,c,l,f,p=e.context.gl,h=n.paint.get("fill-pattern"),d=h&&h.constantOr(1),v=n.getCrossfadeParameters();a?(u=d&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=p.LINES):(u=d?"fillPattern":"fill",s=p.TRIANGLES);for(var m=0,g=r;m<g.length;m+=1){var y=g[m],b=t.getTile(y);if(!d||b.patternsLoaded()){var _=b.getBucket(n);if(_){var x=_.programConfigurations.get(n.id),w=e.useProgram(u,x);d&&(e.context.activeTexture.set(p.TEXTURE0),b.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),x.updatePaintBuffers(v));var O=h.constantOr(null);if(O&&b.imageAtlas){var E=b.imageAtlas,S=E.patternPositions[O.to.toString()],j=E.patternPositions[O.from.toString()];S&&j&&x.setConstantPatternPositions(S,j)}var A=e.translatePosMatrix(y.posMatrix,b,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(a){l=_.indexBuffer2,f=_.segments2;var k=[p.drawingBufferWidth,p.drawingBufferHeight];c="fillOutlinePattern"===u&&d?Cn(A,e,v,b,k):kn(A,k)}else l=_.indexBuffer,f=_.segments,c=d?An(A,e,v,b):jn(A);w.draw(e.context,s,i,e.stencilModeForClipping(y),o,ke.disabled,c,n.id,_.layoutVertexBuffer,l,f,n.paint,e.transform.zoom,x)}}}}function or(e,t,n,r,i,o,a){for(var s=e.context,u=s.gl,c=n.paint.get("fill-extrusion-pattern"),l=c.constantOr(1),f=n.getCrossfadeParameters(),p=n.paint.get("fill-extrusion-opacity"),h=0,d=r;h<d.length;h+=1){var v=d[h],m=t.getTile(v),g=m.getBucket(n);if(g){var y=g.programConfigurations.get(n.id),b=e.useProgram(l?"fillExtrusionPattern":"fillExtrusion",y);l&&(e.context.activeTexture.set(u.TEXTURE0),m.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),y.updatePaintBuffers(f));var _=c.constantOr(null);if(_&&m.imageAtlas){var x=m.imageAtlas,w=x.patternPositions[_.to.toString()],O=x.patternPositions[_.from.toString()];w&&O&&y.setConstantPatternPositions(w,O)}var E=e.translatePosMatrix(v.posMatrix,m,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),S=n.paint.get("fill-extrusion-vertical-gradient"),j=l?Sn(E,e,S,p,v,f,m):En(E,e,S,p);b.draw(s,s.gl.TRIANGLES,i,o,a,ke.backCCW,j,n.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,n.paint,e.transform.zoom,y)}}}function ar(t,n,r,i,o,a){var s=t.context,u=s.gl,c=n.fbo;if(c){var l=t.useProgram("hillshade");s.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,c.colorAttachment.get());var f=function(t,n,r){var i=r.paint.get("hillshade-shadow-color"),o=r.paint.get("hillshade-highlight-color"),a=r.paint.get("hillshade-accent-color"),s=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(s-=t.transform.angle);var u,c,l,f=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(n.tileID.toUnwrapped(),f),u_image:0,u_latrange:(u=n.tileID,c=Math.pow(2,u.canonical.z),l=u.canonical.y,[new e.MercatorCoordinate(0,l/c).toLngLat().lat,new e.MercatorCoordinate(0,(l+1)/c).toLngLat().lat]),u_light:[r.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}}(t,n,r);l.draw(s,u.TRIANGLES,i,o,a,ke.disabled,f,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function sr(t,n,r,i,o,a){var s=t.context,u=s.gl,c=n.dem;if(c&&c.data){var l=c.dim,f=c.stride,p=c.getPixels();if(s.activeTexture.set(u.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(f),n.demTexture){var h=n.demTexture;h.update(p,{premultiply:!1}),h.bind(u.NEAREST,u.CLAMP_TO_EDGE)}else n.demTexture=new e.Texture(s,p,u.RGBA,{premultiply:!1}),n.demTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE);s.activeTexture.set(u.TEXTURE0);var d=n.fbo;if(!d){var v=new e.Texture(s,{width:l,height:l,data:null},u.RGBA);v.bind(u.LINEAR,u.CLAMP_TO_EDGE),(d=n.fbo=s.createFramebuffer(l,l,!0)).colorAttachment.set(v.texture)}s.bindFramebuffer.set(d.framebuffer),s.viewport.set([0,0,l,l]),t.useProgram("hillshadePrepare").draw(s,u.TRIANGLES,i,o,a,ke.disabled,function(t,n){var r=n.stride,i=e.create();return e.ortho(i,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(i,i,[0,-e.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:t.overscaledZ,u_unpack:n.getUnpackVector()}}(n.tileID,c),r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function ur(t,n,r,i,o){var a=i.paint.get("raster-fade-duration");if(a>0){var s=e.browser.now(),u=(s-t.timeAdded)/a,c=n?(s-n.timeAdded)/a:-1,l=r.getSource(),f=o.coveringZoomLevel({tileSize:l.tileSize,roundZoom:l.roundZoom}),p=!n||Math.abs(n.tileID.overscaledZ-f)>Math.abs(t.tileID.overscaledZ-f),h=p&&t.refreshedUponExpiration?1:e.clamp(p?u:1-c,0,1);return t.refreshedUponExpiration&&u>=1&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-h}:{opacity:h,mix:0}}return{opacity:1,mix:0}}var cr=new e.Color(1,0,0,1),lr=new e.Color(0,1,0,1),fr=new e.Color(0,0,1,1),pr=new e.Color(1,0,1,1),hr=new e.Color(0,1,1,1);function dr(e,t,n,r){mr(e,0,t+n/2,e.transform.width,n,r)}function vr(e,t,n,r){mr(e,t-n/2,0,n,e.transform.height,r)}function mr(t,n,r,i,o,a){var s=t.context,u=s.gl;u.enable(u.SCISSOR_TEST),u.scissor(n*e.browser.devicePixelRatio,r*e.browser.devicePixelRatio,i*e.browser.devicePixelRatio,o*e.browser.devicePixelRatio),s.clear({color:a}),u.disable(u.SCISSOR_TEST)}function gr(t,n,r){var i=t.context,o=i.gl,a=r.posMatrix,s=t.useProgram("debug"),u=Se.disabled,c=je.disabled,l=t.colorModeForRenderPass();i.activeTexture.set(o.TEXTURE0),t.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s.draw(i,o.LINE_STRIP,u,c,l,ke.disabled,In(a,e.Color.red),"$debug",t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments);var f=n.getTileByID(r.key).latestRawTileData,p=Math.floor((f&&f.byteLength||0)/1024),h=n.getTile(r).tileSize,d=512/Math.min(h,512)*(r.overscaledZ/t.transform.zoom)*.5,v=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(v+=" => "+r.overscaledZ),function(e,t){e.initDebugOverlayCanvas();var n=e.debugOverlayCanvas,r=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,v+" "+p+"kb"),s.draw(i,o.TRIANGLES,u,c,Ae.alphaBlended,ke.disabled,In(a,e.Color.transparent,d),"$debug",t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments)}var yr={symbol:function(t,n,r,i,o){if("translucent"===t.renderPass){var a=je.disabled,s=t.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(t,n,r,i,o,a,s){for(var u=n.transform,c="map"===o,l="map"===a,f=0,p=t;f<p.length;f+=1){var h=p[f],d=i.getTile(h),v=d.getBucket(r);if(v&&v.text&&v.text.segments.get().length){var m=e.evaluateSizeForZoom(v.textSizeData,u.zoom),g=pt(d,1,n.transform.zoom),y=$e(h.posMatrix,l,c,n.transform,g),b="none"!==r.layout.get("icon-text-fit")&&v.hasIconData();if(m){var _=Math.pow(2,u.zoom-d.tileID.overscaledZ);er(v,c,l,s,e.symbolSize,u,y,h.posMatrix,_,m,b)}}}}(i,t,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&nr(t,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&nr(t,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&($n(t,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),$n(t,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}},circle:function(t,n,r,i){if("translucent"===t.renderPass){var o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),u=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0!==o.constantOr(1)||0!==a.constantOr(1)&&0!==s.constantOr(1)){for(var c=t.context,l=c.gl,f=t.depthModeForSublayer(0,Se.ReadOnly),p=je.disabled,h=t.colorModeForRenderPass(),d=[],v=0;v<i.length;v++){var m=i[v],g=n.getTile(m),y=g.getBucket(r);if(y){var b=y.programConfigurations.get(r.id),_={programConfiguration:b,program:t.useProgram("circle",b),layoutVertexBuffer:y.layoutVertexBuffer,indexBuffer:y.indexBuffer,uniformValues:Tn(t,m,g,r)};if(u)for(var x=0,w=y.segments.get();x<w.length;x+=1){var O=w[x];d.push({segments:new e.SegmentVector([O]),sortKey:O.sortKey,state:_})}else d.push({segments:y.segments,sortKey:0,state:_})}}u&&d.sort((function(e,t){return e.sortKey-t.sortKey}));for(var E=0,S=d;E<S.length;E+=1){var j=S[E],A=j.state;A.program.draw(c,l.TRIANGLES,f,p,h,ke.disabled,A.uniformValues,r.id,A.layoutVertexBuffer,A.indexBuffer,j.segments,r.paint,t.transform.zoom,A.programConfiguration)}}}},heatmap:function(t,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var o=t.context,a=o.gl,s=je.disabled,u=new Ae([a.ONE,a.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,n){var r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),e.bindFramebuffer.set(i.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1),function(e,t,n,r){var i=e.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t.width/4,t.height/4,0,i.RGBA,e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(e,t,o,i)}}(o,t,r),o.clear({color:e.Color.transparent});for(var c=0;c<i.length;c++){var l=i[c];if(!n.hasRenderableParent(l)){var f=n.getTile(l),p=f.getBucket(r);if(p){var h=p.programConfigurations.get(r.id);t.useProgram("heatmap",h).draw(o,a.TRIANGLES,Se.disabled,s,u,ke.disabled,Ln(l.posMatrix,f,t.transform.zoom,r.paint.get("heatmap-intensity")),r.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,r.paint,t.transform.zoom,h)}}}o.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,n){var r=t.context,i=r.gl,o=n.heatmapFbo;if(o){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var a=n.colorRampTexture;a||(a=n.colorRampTexture=new e.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,i.TRIANGLES,Se.disabled,je.disabled,t.colorModeForRenderPass(),ke.disabled,function(t,n,r,i){var o=e.create();e.ortho(o,0,t.width,t.height,0,0,1);var a=t.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}}(t,n),n.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,n.paint,t.transform.zoom)}}(t,r))},line:function(t,n,r,i){if("translucent"===t.renderPass){var o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1))for(var s=t.depthModeForSublayer(0,Se.ReadOnly),u=t.colorModeForRenderPass(),c=r.paint.get("line-dasharray"),l=r.paint.get("line-pattern"),f=l.constantOr(1),p=r.paint.get("line-gradient"),h=r.getCrossfadeParameters(),d=f?"linePattern":c?"lineSDF":p?"lineGradient":"line",v=t.context,m=v.gl,g=!0,y=0,b=i;y<b.length;y+=1){var _=b[y],x=n.getTile(_);if(!f||x.patternsLoaded()){var w=x.getBucket(r);if(w){var O=w.programConfigurations.get(r.id),E=t.context.program.get(),S=t.useProgram(d,O),j=g||S.program!==E,A=l.constantOr(null);if(A&&x.imageAtlas){var k=x.imageAtlas,C=k.patternPositions[A.to.toString()],T=k.patternPositions[A.from.toString()];C&&T&&O.setConstantPatternPositions(C,T)}var M=f?Fn(t,x,r,h):c?zn(t,x,r,c,h):p?Nn(t,x,r,w.lineClipsArray.length):Dn(t,x,r);if(f)v.activeTexture.set(m.TEXTURE0),x.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),O.updatePaintBuffers(h);else if(c&&(j||t.lineAtlas.dirty))v.activeTexture.set(m.TEXTURE0),t.lineAtlas.bind(v);else if(p){var P=w.gradients[r.id],I=P.texture;if(r.gradientVersion!==P.version){var R=256;if(r.stepInterpolant){var L=n.getSource().maxzoom,D=_.canonical.z===L?Math.ceil(1<<t.transform.maxZoom-_.canonical.z):1;R=e.clamp(e.nextPowerOfTwo(w.maxLineLength/e.EXTENT*1024*D),256,v.maxTextureSize)}P.gradient=e.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:R,image:P.gradient||void 0,clips:w.lineClipsArray}),P.texture?P.texture.update(P.gradient):P.texture=new e.Texture(v,P.gradient,m.RGBA),P.version=r.gradientVersion,I=P.texture}v.activeTexture.set(m.TEXTURE0),I.bind(r.stepInterpolant?m.NEAREST:m.LINEAR,m.CLAMP_TO_EDGE)}S.draw(v,m.TRIANGLES,s,t.stencilModeForClipping(_),u,ke.disabled,M,r.id,w.layoutVertexBuffer,w.indexBuffer,w.segments,r.paint,t.transform.zoom,O,w.layoutVertexBuffer2),g=!1}}}}},fill:function(t,n,r,i){var o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=t.colorModeForRenderPass(),u=r.paint.get("fill-pattern"),c=t.opaquePassEnabledForLayer()&&!u.constantOr(1)&&1===o.constantOr(e.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(t.renderPass===c){var l=t.depthModeForSublayer(1,"opaque"===t.renderPass?Se.ReadWrite:Se.ReadOnly);ir(t,n,r,i,l,s,!1)}if("translucent"===t.renderPass&&r.paint.get("fill-antialias")){var f=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,Se.ReadOnly);ir(t,n,r,i,f,s,!0)}}},"fill-extrusion":function(e,t,n,r){var i=n.paint.get("fill-extrusion-opacity");if(0!==i&&"translucent"===e.renderPass){var o=new Se(e.context.gl.LEQUAL,Se.ReadWrite,e.depthRangeFor3D);if(1!==i||n.paint.get("fill-extrusion-pattern").constantOr(1))or(e,t,n,r,o,je.disabled,Ae.disabled),or(e,t,n,r,o,e.stencilModeFor3D(),e.colorModeForRenderPass());else{var a=e.colorModeForRenderPass();or(e,t,n,r,o,je.disabled,a)}}},hillshade:function(e,t,n,r){if("offscreen"===e.renderPass||"translucent"===e.renderPass){for(var i=e.context,o=e.depthModeForSublayer(0,Se.ReadOnly),a=e.colorModeForRenderPass(),s="translucent"===e.renderPass?e.stencilConfigForOverlap(r):[{},r],u=s[0],c=0,l=s[1];c<l.length;c+=1){var f=l[c],p=t.getTile(f);p.needsHillshadePrepare&&"offscreen"===e.renderPass?sr(e,p,n,o,je.disabled,a):"translucent"===e.renderPass&&ar(e,p,n,o,u[f.overscaledZ],a)}i.viewport.set([0,0,e.width,e.height])}},raster:function(e,t,n,r){if("translucent"===e.renderPass&&0!==n.paint.get("raster-opacity")&&r.length)for(var i=e.context,o=i.gl,a=t.getSource(),s=e.useProgram("raster"),u=e.colorModeForRenderPass(),c=a instanceof P?[{},r]:e.stencilConfigForOverlap(r),l=c[0],f=c[1],p=f[f.length-1].overscaledZ,h=!e.options.moving,d=0,v=f;d<v.length;d+=1){var m=v[d],g=e.depthModeForSublayer(m.overscaledZ-p,1===n.paint.get("raster-opacity")?Se.ReadWrite:Se.ReadOnly,o.LESS),y=t.getTile(m),b=e.transform.calculatePosMatrix(m.toUnwrapped(),h);y.registerFadeDuration(n.paint.get("raster-fade-duration"));var _=t.findLoadedParent(m,0),x=ur(y,_,t,n,e.transform),w=void 0,O=void 0,E="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;i.activeTexture.set(o.TEXTURE0),y.texture.bind(E,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(o.TEXTURE1),_?(_.texture.bind(E,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),w=Math.pow(2,_.tileID.overscaledZ-y.tileID.overscaledZ),O=[y.tileID.canonical.x*w%1,y.tileID.canonical.y*w%1]):y.texture.bind(E,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var S=Vn(b,O||[0,0],w||1,x,n);a instanceof P?s.draw(i,o.TRIANGLES,g,je.disabled,u,ke.disabled,S,n.id,a.boundsBuffer,e.quadTriangleIndexBuffer,a.boundsSegments):s.draw(i,o.TRIANGLES,g,l[m.overscaledZ],u,ke.disabled,S,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}},background:function(e,t,n){var r=n.paint.get("background-color"),i=n.paint.get("background-opacity");if(0!==i){var o=e.context,a=o.gl,s=e.transform,u=s.tileSize,c=n.paint.get("background-pattern");if(!e.isPatternMissing(c)){var l=!c&&1===r.a&&1===i&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass===l){var f=je.disabled,p=e.depthModeForSublayer(0,"opaque"===l?Se.ReadWrite:Se.ReadOnly),h=e.colorModeForRenderPass(),d=e.useProgram(c?"backgroundPattern":"background"),v=s.coveringTiles({tileSize:u});c&&(o.activeTexture.set(a.TEXTURE0),e.imageManager.bind(e.context));for(var m=n.getCrossfadeParameters(),g=0,y=v;g<y.length;g+=1){var b=y[g],_=e.transform.calculatePosMatrix(b.toUnwrapped()),x=c?Xn(_,i,e,c,{tileID:b,tileSize:u},m):Yn(_,i,r);d.draw(o,a.TRIANGLES,p,f,h,ke.disabled,x,n.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}}}}},debug:function(e,t,n){for(var r=0;r<n.length;r++)gr(e,t,n[r])},custom:function(e,t,n){var r=e.context,i=n.implementation;if("offscreen"===e.renderPass){var o=i.prerender;o&&(e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),o.call(i,r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),r.setStencilMode(je.disabled);var a="3d"===i.renderingMode?new Se(e.context.gl.LEQUAL,Se.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,Se.ReadOnly);r.setDepthMode(a),i.render(r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState(),r.bindFramebuffer.set(null)}}},br=function(e,t){this.context=new Ce(e),this.transform=t,this._tileTextures={},this.setup(),this.numSublayers=Te.maxUnderzooming+Te.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ft,this.gpuTimers={}};br.prototype.resize=function(t,n){if(this.width=t*e.browser.devicePixelRatio,this.height=n*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,i=this.style._order;r<i.length;r+=1)this.style._layers[i[r]].resize()},br.prototype.setup=function(){var t=this.context,n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(n,Gt.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(r,Gt.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var i=new e.StructArrayLayout4i8;i.emplaceBack(0,0,0,0),i.emplaceBack(e.EXTENT,0,e.EXTENT,0),i.emplaceBack(0,e.EXTENT,0,e.EXTENT),i.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(i,M.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var o=new e.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(o,Gt.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var a=new e.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(a);var s=new e.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA);var u=this.context.gl;this.stencilClearMode=new je({func:u.ALWAYS,mask:0},0,255,u.ZERO,u.ZERO,u.ZERO)},br.prototype.clearStencil=function(){var t=this.context,n=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var r=e.create();e.ortho(r,0,this.width,this.height,0,0,1),e.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,n.TRIANGLES,Se.disabled,this.stencilClearMode,Ae.disabled,ke.disabled,Rn(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},br.prototype._renderTileClippingMasks=function(e,t){if(this.currentStencilSource!==e.source&&e.isTileClipped()&&t&&t.length){this.currentStencilSource=e.source;var n=this.context,r=n.gl;this.nextStencilID+t.length>256&&this.clearStencil(),n.setColorMode(Ae.disabled),n.setDepthMode(Se.disabled);var i=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,a=t;o<a.length;o+=1){var s=a[o],u=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;i.draw(n,r.TRIANGLES,Se.disabled,new je({func:r.ALWAYS,mask:0},u,255,r.KEEP,r.KEEP,r.REPLACE),Ae.disabled,ke.disabled,Rn(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},br.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var e=this.nextStencilID++,t=this.context.gl;return new je({func:t.NOTEQUAL,mask:255},e,255,t.KEEP,t.KEEP,t.REPLACE)},br.prototype.stencilModeForClipping=function(e){var t=this.context.gl;return new je({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)},br.prototype.stencilConfigForOverlap=function(e){var t,n=this.context.gl,r=e.sort((function(e,t){return t.overscaledZ-e.overscaledZ})),i=r[r.length-1].overscaledZ,o=r[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var a={},s=0;s<o;s++)a[s+i]=new je({func:n.GEQUAL,mask:255},s+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[a,r]}return[(t={},t[i]=je.disabled,t),r]},br.prototype.colorModeForRenderPass=function(){var t=this.context.gl;return this._showOverdrawInspector?new Ae([t.CONSTANT_COLOR,t.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Ae.unblended:Ae.alphaBlended},br.prototype.depthModeForSublayer=function(e,t,n){if(!this.opaquePassEnabledForLayer())return Se.disabled;var r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new Se(n||this.context.gl.LEQUAL,t,[r,r])},br.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},br.prototype.render=function(t,n){var r=this;this.style=t,this.options=n,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var i=this.style._order,o=this.style.sourceCaches;for(var a in o){var s=o[a];s.used&&s.prepare(this.context)}var u,c,l={},f={},p={};for(var h in o){var d=o[h];l[h]=d.getVisibleCoordinates(),f[h]=l[h].slice().reverse(),p[h]=d.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var v=0;v<i.length;v++)if(this.style._layers[i[v]].is3D()){this.opaquePassCutoff=v;break}this.renderPass="offscreen";for(var m=0,g=i;m<g.length;m+=1){var y=this.style._layers[g[m]];if(y.hasOffscreenPass()&&!y.isHidden(this.transform.zoom)){var b=f[y.source];("custom"===y.type||b.length)&&this.renderLayer(this,o[y.source],y,b)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){var _=this.style._layers[i[this.currentLayer]],x=o[_.source],w=l[_.source];this._renderTileClippingMasks(_,w),this.renderLayer(this,x,_,w)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){var O=this.style._layers[i[this.currentLayer]],E=o[O.source],S=("symbol"===O.type?p:f)[O.source];this._renderTileClippingMasks(O,l[O.source]),this.renderLayer(this,E,O,S)}this.options.showTileBoundaries&&(e.values(this.style._layers).forEach((function(e){e.source&&!e.isHidden(r.transform.zoom)&&(e.source!==(c&&c.id)&&(c=r.style.sourceCaches[e.source]),(!u||u.getSource().maxzoom<c.getSource().maxzoom)&&(u=c))})),u&&yr.debug(this,u,u.getVisibleCoordinates())),this.options.showPadding&&function(e){var t=e.transform.padding;dr(e,e.transform.height-(t.top||0),3,cr),dr(e,t.bottom||0,3,lr),vr(e,t.left||0,3,fr),vr(e,e.transform.width-(t.right||0),3,pr);var n=e.transform.centerPoint;!function(e,t,n,r){mr(e,t-1,n-10,2,20,r),mr(e,t-10,n-1,20,2,r)}(e,n.x,e.transform.height-n.y,hr)}(this),this.context.setDefault()},br.prototype.renderLayer=function(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||r.length)&&(this.id=n.id,this.gpuTimingStart(n),yr[n.type](e,t,n,r,this.style.placement.variableOffsets),this.gpuTimingEnd())},br.prototype.gpuTimingStart=function(e){if(this.options.gpuTiming){var t=this.context.extTimerQuery,n=this.gpuTimers[e.id];n||(n=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),n.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,n.query)}},br.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}},br.prototype.collectGpuTimers=function(){var e=this.gpuTimers;return this.gpuTimers={},e},br.prototype.queryGpuTimers=function(e){var t={};for(var n in e){var r=e[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),t[n]=o}return t},br.prototype.translatePosMatrix=function(t,n,r,i,o){if(!r[0]&&!r[1])return t;var a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){var s=Math.sin(a),u=Math.cos(a);r=[r[0]*u-r[1]*s,r[0]*s+r[1]*u]}var c=[o?r[0]:pt(n,r[0],this.transform.zoom),o?r[1]:pt(n,r[1],this.transform.zoom),0],l=new Float32Array(16);return e.translate(l,t,c),l},br.prototype.saveTileTexture=function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]},br.prototype.getTileTexture=function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null},br.prototype.isPatternMissing=function(e){if(!e)return!1;if(!e.from||!e.to)return!0;var t=this.imageManager.getPattern(e.from.toString()),n=this.imageManager.getPattern(e.to.toString());return!t||!n},br.prototype.useProgram=function(e,t){this.cache=this.cache||{};var n=""+e+(t?t.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new wn(this.context,e,bn[e],t,Kn[e],this._showOverdrawInspector)),this.cache[n]},br.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},br.prototype.setBaseState=function(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)},br.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},br.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var _r=function(e,t){this.points=e,this.planes=t};_r.fromInvProjectionMatrix=function(t,n,r){var i=Math.pow(2,r),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(n){return e.transformMat4([],n,t)})).map((function(t){return e.scale$1([],t,1/t[3]/n*i)})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(t){var n=e.sub([],o[t[0]],o[t[1]]),r=e.sub([],o[t[2]],o[t[1]]),i=e.normalize([],e.cross([],n,r)),a=-e.dot(i,o[t[1]]);return i.concat(a)}));return new _r(o,a)};var xr=function(t,n){this.min=t,this.max=n,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};xr.prototype.quadrant=function(t){for(var n=[t%2==0,t<2],r=e.clone$2(this.min),i=e.clone$2(this.max),o=0;o<n.length;o++)r[o]=n[o]?this.min[o]:this.center[o],i[o]=n[o]?this.center[o]:this.max[o];return i[2]=this.max[2],new xr(r,i)},xr.prototype.distanceX=function(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]},xr.prototype.distanceY=function(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]},xr.prototype.intersects=function(t){for(var n=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],r=!0,i=0;i<t.planes.length;i++){for(var o=t.planes[i],a=0,s=0;s<n.length;s++)a+=e.dot$1(o,n[s])>=0;if(0===a)return 0;a!==n.length&&(r=!1)}if(r)return 2;for(var u=0;u<3;u++){for(var c=Number.MAX_VALUE,l=-Number.MAX_VALUE,f=0;f<t.points.length;f++){var p=t.points[f][u]-this.min[u];c=Math.min(c,p),l=Math.max(l,p)}if(l<0||c>this.max[u]-this.min[u])return 0}return 1};var wr=function(e,t,n,r){if(void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),isNaN(e)||e<0||isNaN(t)||t<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=n,this.right=r};wr.prototype.interpolate=function(t,n,r){return null!=n.top&&null!=t.top&&(this.top=e.number(t.top,n.top,r)),null!=n.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,n.bottom,r)),null!=n.left&&null!=t.left&&(this.left=e.number(t.left,n.left,r)),null!=n.right&&null!=t.right&&(this.right=e.number(t.right,n.right,r)),this},wr.prototype.getCenter=function(t,n){var r=e.clamp((this.left+t-this.right)/2,0,t),i=e.clamp((this.top+n-this.bottom)/2,0,n);return new e.Point(r,i)},wr.prototype.equals=function(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right},wr.prototype.clone=function(){return new wr(this.top,this.bottom,this.left,this.right)},wr.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Or=function(t,n,r,i,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=t||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new wr,this._posMatrixCache={},this._alignedPosMatrixCache={}},Er={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Or.prototype.clone=function(){var e=new Or(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e._center=this._center,e.zoom=this.zoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._calcMatrices(),e},Er.minZoom.get=function(){return this._minZoom},Er.minZoom.set=function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))},Er.maxZoom.get=function(){return this._maxZoom},Er.maxZoom.set=function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))},Er.minPitch.get=function(){return this._minPitch},Er.minPitch.set=function(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))},Er.maxPitch.get=function(){return this._maxPitch},Er.maxPitch.set=function(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))},Er.renderWorldCopies.get=function(){return this._renderWorldCopies},Er.renderWorldCopies.set=function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e},Er.worldSize.get=function(){return this.tileSize*this.scale},Er.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Er.size.get=function(){return new e.Point(this.width,this.height)},Er.bearing.get=function(){return-this.angle/Math.PI*180},Er.bearing.set=function(t){var n=-e.wrap(t,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Er.pitch.get=function(){return this._pitch/Math.PI*180},Er.pitch.set=function(t){var n=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},Er.fov.get=function(){return this._fov/Math.PI*180},Er.fov.set=function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())},Er.zoom.get=function(){return this._zoom},Er.zoom.set=function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())},Er.center.get=function(){return this._center},Er.center.set=function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())},Er.padding.get=function(){return this._edgeInsets.toJSON()},Er.padding.set=function(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())},Er.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Or.prototype.isPaddingEqual=function(e){return this._edgeInsets.equals(e)},Or.prototype.interpolatePadding=function(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()},Or.prototype.coveringZoomLevel=function(e){var t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)},Or.prototype.getVisibleUnwrappedCoordinates=function(t){var n=[new e.UnwrappedTileID(0,t)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new e.Point(0,0)),i=this.pointCoordinate(new e.Point(this.width,0)),o=this.pointCoordinate(new e.Point(this.width,this.height)),a=this.pointCoordinate(new e.Point(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),u=Math.floor(Math.max(r.x,i.x,o.x,a.x)),c=s-1;c<=u+1;c++)0!==c&&n.push(new e.UnwrappedTileID(c,t));return n},Or.prototype.coveringTiles=function(t){var n=this.coveringZoomLevel(t),r=n;if(void 0!==t.minzoom&&n<t.minzoom)return[];void 0!==t.maxzoom&&n>t.maxzoom&&(n=t.maxzoom);var i=e.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,n),a=[o*i.x,o*i.y,0],s=_r.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n),u=t.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(u=n);var c=function(e){return{aabb:new xr([e*o,0,0],[(e+1)*o,o,0]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}},l=[],f=[],p=n,h=t.reparseOverscaled?r:n;if(this._renderWorldCopies)for(var d=1;d<=3;d++)l.push(c(-d)),l.push(c(d));for(l.push(c(0));l.length>0;){var v=l.pop(),m=v.x,g=v.y,y=v.fullyVisible;if(!y){var b=v.aabb.intersects(s);if(0===b)continue;y=2===b}var _=v.aabb.distanceX(a),x=v.aabb.distanceY(a),w=Math.max(Math.abs(_),Math.abs(x));if(v.zoom===p||w>3+(1<<p-v.zoom)-2&&v.zoom>=u)f.push({tileID:new e.OverscaledTileID(v.zoom===p?h:v.zoom,v.wrap,v.zoom,m,g),distanceSq:e.sqrLen([a[0]-.5-m,a[1]-.5-g])});else for(var O=0;O<4;O++){var E=(m<<1)+O%2,S=(g<<1)+(O>>1);l.push({aabb:v.aabb.quadrant(O),zoom:v.zoom+1,x:E,y:S,wrap:v.wrap,fullyVisible:y})}}return f.sort((function(e,t){return e.distanceSq-t.distanceSq})).map((function(e){return e.tileID}))},Or.prototype.resize=function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()},Er.unmodified.get=function(){return this._unmodified},Or.prototype.zoomScale=function(e){return Math.pow(2,e)},Or.prototype.scaleZoom=function(e){return Math.log(e)/Math.LN2},Or.prototype.project=function(t){var n=e.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(t.lng)*this.worldSize,e.mercatorYfromLat(n)*this.worldSize)},Or.prototype.unproject=function(t){return new e.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()},Er.point.get=function(){return this.project(this.center)},Or.prototype.setLocationAtPoint=function(t,n){var r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(t),a=new e.MercatorCoordinate(o.x-(r.x-i.x),o.y-(r.y-i.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},Or.prototype.locationPoint=function(e){return this.coordinatePoint(this.locationCoordinate(e))},Or.prototype.pointLocation=function(e){return this.coordinateLocation(this.pointCoordinate(e))},Or.prototype.locationCoordinate=function(t){return e.MercatorCoordinate.fromLngLat(t)},Or.prototype.coordinateLocation=function(e){return e.toLngLat()},Or.prototype.pointCoordinate=function(t){var n=[t.x,t.y,0,1],r=[t.x,t.y,1,1];e.transformMat4(n,n,this.pixelMatrixInverse),e.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],o=r[3],a=n[1]/i,s=r[1]/o,u=n[2]/i,c=r[2]/o,l=u===c?0:(0-u)/(c-u);return new e.MercatorCoordinate(e.number(n[0]/i,r[0]/o,l)/this.worldSize,e.number(a,s,l)/this.worldSize)},Or.prototype.coordinatePoint=function(t){var n=[t.x*this.worldSize,t.y*this.worldSize,0,1];return e.transformMat4(n,n,this.pixelMatrix),new e.Point(n[0]/n[3],n[1]/n[3])},Or.prototype.getBounds=function(){return(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},Or.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Or.prototype.setMaxBounds=function(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Or.prototype.calculatePosMatrix=function(t,n){void 0===n&&(n=!1);var r=t.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];var o=t.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*t.wrap,u=e.identity(new Float64Array(16));return e.translate(u,u,[s*a,o.y*a,0]),e.scale(u,u,[a/e.EXTENT,a/e.EXTENT,1]),e.multiply(u,n?this.alignedProjMatrix:this.projMatrix,u),i[r]=new Float32Array(u),i[r]},Or.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Or.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,n,r,i,o=-90,a=90,s=-180,u=180,c=this.size,l=this._unmodified;if(this.latRange){var f=this.latRange;o=e.mercatorYfromLat(f[1])*this.worldSize,t=(a=e.mercatorYfromLat(f[0])*this.worldSize)-o<c.y?c.y/(a-o):0}if(this.lngRange){var p=this.lngRange;s=e.mercatorXfromLng(p[0])*this.worldSize,n=(u=e.mercatorXfromLng(p[1])*this.worldSize)-s<c.x?c.x/(u-s):0}var h=this.point,d=Math.max(n||0,t||0);if(d)return this.center=this.unproject(new e.Point(n?(u+s)/2:h.x,t?(a+o)/2:h.y)),this.zoom+=this.scaleZoom(d),this._unmodified=l,void(this._constraining=!1);if(this.latRange){var v=h.y,m=c.y/2;v-m<o&&(i=o+m),v+m>a&&(i=a-m)}if(this.lngRange){var g=h.x,y=c.x/2;g-y<s&&(r=s+y),g+y>u&&(r=u-y)}void 0===r&&void 0===i||(this.center=this.unproject(new e.Point(void 0!==r?r:h.x,void 0!==i?i:h.y))),this._unmodified=l,this._constraining=!1}},Or.prototype._calcMatrices=function(){if(this.height){var t=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var n=Math.PI/2+this._pitch,r=this._fov*(.5+t.y/this.height),i=Math.sin(r)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-n-r,.01,Math.PI-.01)),o=this.point,a=o.x,s=o.y,u=1.01*(Math.cos(Math.PI/2-this._pitch)*i+this.cameraToCenterDistance),c=this.height/50,l=new Float64Array(16);e.perspective(l,this._fov,this.width/this.height,c,u),l[8]=2*-t.x/this.width,l[9]=2*t.y/this.height,e.scale(l,l,[1,-1,1]),e.translate(l,l,[0,0,-this.cameraToCenterDistance]),e.rotateX(l,l,this._pitch),e.rotateZ(l,l,this.angle),e.translate(l,l,[-a,-s,0]),this.mercatorMatrix=e.scale([],l,[this.worldSize,this.worldSize,this.worldSize]),e.scale(l,l,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=l,this.invProjMatrix=e.invert([],this.projMatrix);var f=this.width%2/2,p=this.height%2/2,h=Math.cos(this.angle),d=Math.sin(this.angle),v=a-Math.round(a)+h*f+d*p,m=s-Math.round(s)+h*p+d*f,g=new Float64Array(l);if(e.translate(g,g,[v>.5?v-1:v,m>.5?m-1:m,0]),this.alignedProjMatrix=g,l=e.create(),e.scale(l,l,[this.width/2,-this.height/2,1]),e.translate(l,l,[1,-1,0]),this.labelPlaneMatrix=l,l=e.create(),e.scale(l,l,[1,-1,1]),e.translate(l,l,[-1,-1,0]),e.scale(l,l,[2/this.width,2/this.height,1]),this.glCoordMatrix=l,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(l=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=l,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Or.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var t=this.pointCoordinate(new e.Point(0,0)),n=[t.x*this.worldSize,t.y*this.worldSize,0,1];return e.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},Or.prototype.getCameraPoint=function(){var t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,t))},Or.prototype.getCameraQueryGeometry=function(t){var n=this.getCameraPoint();if(1===t.length)return[t[0],n];for(var r=n.x,i=n.y,o=n.x,a=n.y,s=0,u=t;s<u.length;s+=1){var c=u[s];r=Math.min(r,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y)}return[new e.Point(r,i),new e.Point(o,i),new e.Point(o,a),new e.Point(r,a),new e.Point(r,i)]},Object.defineProperties(Or.prototype,Er);var Sr=function(t){var n,r,i,o;this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(n=this._updateHashUnthrottled.bind(this),r=!1,i=null,o=function(){i=null,r&&(n(),i=setTimeout(o,300),r=!1)},function(){return r=!0,i||o(),i})};Sr.prototype.addTo=function(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Sr.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Sr.prototype.getHashString=function(t){var n=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),a=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,u=this._map.getBearing(),c=this._map.getPitch(),l="";if(l+=t?"/"+a+"/"+s+"/"+r:r+"/"+s+"/"+a,(u||c)&&(l+="/"+Math.round(10*u)/10),c&&(l+="/"+Math.round(c)),this._hashName){var f=this._hashName,p=!1,h=e.window.location.hash.slice(1).split("&").map((function(e){var t=e.split("=")[0];return t===f?(p=!0,t+"="+l):e})).filter((function(e){return e}));return p||h.push(f+"="+l),"#"+h.join("&")}return"#"+l},Sr.prototype._getCurrentHash=function(){var t,n=this,r=e.window.location.hash.replace("#","");return this._hashName?(r.split("&").map((function(e){return e.split("=")})).forEach((function(e){e[0]===n._hashName&&(t=e)})),(t&&t[1]||"").split("/")):r.split("/")},Sr.prototype._onHashChange=function(){var e=this._getCurrentHash();if(e.length>=3&&!e.some((function(e){return isNaN(e)}))){var t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1},Sr.prototype._updateHashUnthrottled=function(){var t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());try{e.window.history.replaceState(e.window.history.state,null,t)}catch(e){}};var jr={linearity:.3,easing:e.bezier(0,0,.3,1)},Ar=e.extend({deceleration:2500,maxSpeed:1400},jr),kr=e.extend({deceleration:20,maxSpeed:1400},jr),Cr=e.extend({deceleration:1e3,maxSpeed:360},jr),Tr=e.extend({deceleration:1e3,maxSpeed:90},jr),Mr=function(e){this._map=e,this.clear()};function Pr(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function Ir(t,n,r){var i=r.maxSpeed,o=r.linearity,a=r.deceleration,s=e.clamp(t*o/(n/1e3),-i,i),u=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*u,amount:s*(u/2)}}Mr.prototype.clear=function(){this._inertiaBuffer=[]},Mr.prototype.record=function(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:t})},Mr.prototype._drainInertiaBuffer=function(){for(var t=this._inertiaBuffer,n=e.browser.now();t.length>0&&n-t[0].time>160;)t.shift()},Mr.prototype._onMoveEnd=function(t){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var n={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},r=0,i=this._inertiaBuffer;r<i.length;r+=1){var o=i[r].settings;n.zoom+=o.zoomDelta||0,n.bearing+=o.bearingDelta||0,n.pitch+=o.pitchDelta||0,o.panDelta&&n.pan._add(o.panDelta),o.around&&(n.around=o.around),o.pinchAround&&(n.pinchAround=o.pinchAround)}var a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(n.pan.mag()){var u=Ir(n.pan.mag(),a,e.extend({},Ar,t||{}));s.offset=n.pan.mult(u.amount/n.pan.mag()),s.center=this._map.transform.center,Pr(s,u)}if(n.zoom){var c=Ir(n.zoom,a,kr);s.zoom=this._map.transform.zoom+c.amount,Pr(s,c)}if(n.bearing){var l=Ir(n.bearing,a,Cr);s.bearing=this._map.transform.bearing+e.clamp(l.amount,-179,179),Pr(s,l)}if(n.pitch){var f=Ir(n.pitch,a,Tr);s.pitch=this._map.transform.pitch+f.amount,Pr(s,f)}if(s.zoom||s.bearing){var p=void 0===n.pinchAround?n.around:n.pinchAround;s.around=p?this._map.unproject(p):this._map.getCenter()}return this.clear(),e.extend(s,{noMoveStart:!0})}};var Rr=function(t){function r(r,i,o,a){void 0===a&&(a={});var s=n.mousePos(i.getCanvasContainer(),o),u=i.unproject(s);t.call(this,r,e.extend({point:s,lngLat:u,originalEvent:o},a)),this._defaultPrevented=!1,this.target=i}t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r;var i={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,i),r}(e.Event),Lr=function(t){function r(r,i,o){var a="touchend"===r?o.changedTouches:o.touches,s=n.touchPos(i.getCanvasContainer(),a),u=s.map((function(e){return i.unproject(e)})),c=s.reduce((function(e,t,n,r){return e.add(t.div(r.length))}),new e.Point(0,0)),l=i.unproject(c);t.call(this,r,{points:s,point:c,lngLats:u,lngLat:l,originalEvent:o}),this._defaultPrevented=!1}t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r;var i={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,i),r}(e.Event),Dr=function(e){function t(t,n,r){e.call(this,t,{originalEvent:r}),this._defaultPrevented=!1}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={defaultPrevented:{configurable:!0}};return t.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,n),t}(e.Event),Nr=function(e,t){this._map=e,this._clickTolerance=t.clickTolerance};Nr.prototype.reset=function(){delete this._mousedownPos},Nr.prototype.wheel=function(e){return this._firePreventable(new Dr(e.type,this._map,e))},Nr.prototype.mousedown=function(e,t){return this._mousedownPos=t,this._firePreventable(new Rr(e.type,this._map,e))},Nr.prototype.mouseup=function(e){this._map.fire(new Rr(e.type,this._map,e))},Nr.prototype.click=function(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new Rr(e.type,this._map,e))},Nr.prototype.dblclick=function(e){return this._firePreventable(new Rr(e.type,this._map,e))},Nr.prototype.mouseover=function(e){this._map.fire(new Rr(e.type,this._map,e))},Nr.prototype.mouseout=function(e){this._map.fire(new Rr(e.type,this._map,e))},Nr.prototype.touchstart=function(e){return this._firePreventable(new Lr(e.type,this._map,e))},Nr.prototype.touchmove=function(e){this._map.fire(new Lr(e.type,this._map,e))},Nr.prototype.touchend=function(e){this._map.fire(new Lr(e.type,this._map,e))},Nr.prototype.touchcancel=function(e){this._map.fire(new Lr(e.type,this._map,e))},Nr.prototype._firePreventable=function(e){if(this._map.fire(e),e.defaultPrevented)return{}},Nr.prototype.isEnabled=function(){return!0},Nr.prototype.isActive=function(){return!1},Nr.prototype.enable=function(){},Nr.prototype.disable=function(){};var Fr=function(e){this._map=e};Fr.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Fr.prototype.mousemove=function(e){this._map.fire(new Rr(e.type,this._map,e))},Fr.prototype.mousedown=function(){this._delayContextMenu=!0},Fr.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Rr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Fr.prototype.contextmenu=function(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new Rr(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()},Fr.prototype.isEnabled=function(){return!0},Fr.prototype.isActive=function(){return!1},Fr.prototype.enable=function(){},Fr.prototype.disable=function(){};var zr=function(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1};function Br(e,t){for(var n={},r=0;r<e.length;r++)n[e[r].identifier]=t[r];return n}zr.prototype.isEnabled=function(){return!!this._enabled},zr.prototype.isActive=function(){return!!this._active},zr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},zr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},zr.prototype.mousedown=function(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(n.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)},zr.prototype.mousemoveWindow=function(e,t){if(this._active){var r=t;if(!(this._lastPos.equals(r)||!this._box&&r.dist(this._startPos)<this._clickTolerance)){var i=this._startPos;this._lastPos=r,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var o=Math.min(i.x,r.x),a=Math.max(i.x,r.x),s=Math.min(i.y,r.y),u=Math.max(i.y,r.y);n.setTransform(this._box,"translate("+o+"px,"+s+"px)"),this._box.style.width=a-o+"px",this._box.style.height=u-s+"px"}}},zr.prototype.mouseupWindow=function(t,r){var i=this;if(this._active&&0===t.button){var o=this._startPos,a=r;if(this.reset(),n.suppressClick(),o.x!==a.x||o.y!==a.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:function(e){return e.fitScreenCoordinates(o,a,i._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",t)}},zr.prototype.keydown=function(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))},zr.prototype.blur=function(){this.reset()},zr.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},zr.prototype._fireEvent=function(t,n){return this._map.fire(new e.Event(t,{originalEvent:n}))};var Ur=function(e){this.reset(),this.numTouches=e.numTouches};Ur.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Ur.prototype.touchstart=function(t,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),r.length===this.numTouches&&(this.centroid=function(t){for(var n=new e.Point(0,0),r=0,i=t;r<i.length;r+=1)n._add(i[r]);return n.div(t.length)}(n),this.touches=Br(r,n)))},Ur.prototype.touchmove=function(e,t,n){if(!this.aborted&&this.centroid){var r=Br(n,t);for(var i in this.touches){var o=r[i];(!o||o.dist(this.touches[i])>30)&&(this.aborted=!0)}}},Ur.prototype.touchend=function(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}};var Vr=function(e){this.singleTap=new Ur(e),this.numTaps=e.numTaps,this.reset()};Vr.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Vr.prototype.touchstart=function(e,t,n){this.singleTap.touchstart(e,t,n)},Vr.prototype.touchmove=function(e,t,n){this.singleTap.touchmove(e,t,n)},Vr.prototype.touchend=function(e,t,n){var r=this.singleTap.touchend(e,t,n);if(r){var i=e.timeStamp-this.lastTime<500,o=!this.lastTap||this.lastTap.dist(r)<30;if(i&&o||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}};var Hr=function(){this._zoomIn=new Vr({numTouches:1,numTaps:2}),this._zoomOut=new Vr({numTouches:2,numTaps:1}),this.reset()};Hr.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Hr.prototype.touchstart=function(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)},Hr.prototype.touchmove=function(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)},Hr.prototype.touchend=function(e,t,n){var r=this,i=this._zoomIn.touchend(e,t,n),o=this._zoomOut.touchend(e,t,n);return i?(this._active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(i)},{originalEvent:e})}}):o?(this._active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(o)},{originalEvent:e})}}):void 0},Hr.prototype.touchcancel=function(){this.reset()},Hr.prototype.enable=function(){this._enabled=!0},Hr.prototype.disable=function(){this._enabled=!1,this.reset()},Hr.prototype.isEnabled=function(){return this._enabled},Hr.prototype.isActive=function(){return this._active};var Gr={0:1,2:2},Wr=function(e){this.reset(),this._clickTolerance=e.clickTolerance||1};Wr.prototype.blur=function(){this.reset()},Wr.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Wr.prototype._correctButton=function(e,t){return!1},Wr.prototype._move=function(e,t){return{}},Wr.prototype.mousedown=function(e,t){if(!this._lastPoint){var r=n.mouseButton(e);this._correctButton(e,r)&&(this._lastPoint=t,this._eventButton=r)}},Wr.prototype.mousemoveWindow=function(e,t){var n=this._lastPoint;if(n)if(e.preventDefault(),function(e,t){var n=Gr[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(n,t)},Wr.prototype.mouseupWindow=function(e){this._lastPoint&&n.mouseButton(e)===this._eventButton&&(this._moved&&n.suppressClick(),this.reset())},Wr.prototype.enable=function(){this._enabled=!0},Wr.prototype.disable=function(){this._enabled=!1,this.reset()},Wr.prototype.isEnabled=function(){return this._enabled},Wr.prototype.isActive=function(){return this._active};var qr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.mousedown=function(t,n){e.prototype.mousedown.call(this,t,n),this._lastPoint&&(this._active=!0)},t.prototype._correctButton=function(e,t){return 0===t&&!e.ctrlKey},t.prototype._move=function(e,t){return{around:t,panDelta:t.sub(e)}},t}(Wr),Zr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._correctButton=function(e,t){return 0===t&&e.ctrlKey||2===t},t.prototype._move=function(e,t){var n=.8*(t.x-e.x);if(n)return this._active=!0,{bearingDelta:n}},t.prototype.contextmenu=function(e){e.preventDefault()},t}(Wr),Yr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._correctButton=function(e,t){return 0===t&&e.ctrlKey||2===t},t.prototype._move=function(e,t){var n=-.5*(t.y-e.y);if(n)return this._active=!0,{pitchDelta:n}},t.prototype.contextmenu=function(e){e.preventDefault()},t}(Wr),Xr=function(e){this._minTouches=1,this._clickTolerance=e.clickTolerance||1,this.reset()};Xr.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},Xr.prototype.touchstart=function(e,t,n){return this._calculateTransform(e,t,n)},Xr.prototype.touchmove=function(e,t,n){if(this._active&&!(n.length<this._minTouches))return e.preventDefault(),this._calculateTransform(e,t,n)},Xr.prototype.touchend=function(e,t,n){this._calculateTransform(e,t,n),this._active&&n.length<this._minTouches&&this.reset()},Xr.prototype.touchcancel=function(){this.reset()},Xr.prototype._calculateTransform=function(t,n,r){r.length>0&&(this._active=!0);var i=Br(r,n),o=new e.Point(0,0),a=new e.Point(0,0),s=0;for(var u in i){var c=i[u],l=this._touches[u];l&&(o._add(c),a._add(c.sub(l)),s++,i[u]=c)}if(this._touches=i,!(s<this._minTouches)&&a.mag()){var f=a.div(s);if(this._sum._add(f),!(this._sum.mag()<this._clickTolerance))return{around:o.div(s),panDelta:f}}},Xr.prototype.enable=function(){this._enabled=!0},Xr.prototype.disable=function(){this._enabled=!1,this.reset()},Xr.prototype.isEnabled=function(){return this._enabled},Xr.prototype.isActive=function(){return this._active};var Kr=function(){this.reset()};function $r(e,t,n){for(var r=0;r<e.length;r++)if(e[r].identifier===n)return t[r]}function Qr(e,t){return Math.log(e/t)/Math.LN2}Kr.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Kr.prototype._start=function(e){},Kr.prototype._move=function(e,t,n){return{}},Kr.prototype.touchstart=function(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))},Kr.prototype.touchmove=function(e,t,n){if(this._firstTwoTouches){e.preventDefault();var r=this._firstTwoTouches,i=r[1],o=$r(n,t,r[0]),a=$r(n,t,i);if(o&&a){var s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,e)}}},Kr.prototype.touchend=function(e,t,r){if(this._firstTwoTouches){var i=this._firstTwoTouches,o=i[1],a=$r(r,t,i[0]),s=$r(r,t,o);a&&s||(this._active&&n.suppressClick(),this.reset())}},Kr.prototype.touchcancel=function(){this.reset()},Kr.prototype.enable=function(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around},Kr.prototype.disable=function(){this._enabled=!1,this.reset()},Kr.prototype.isEnabled=function(){return this._enabled},Kr.prototype.isActive=function(){return this._active};var Jr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.reset=function(){e.prototype.reset.call(this),delete this._distance,delete this._startDistance},t.prototype._start=function(e){this._startDistance=this._distance=e[0].dist(e[1])},t.prototype._move=function(e,t){var n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Qr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Qr(this._distance,n),pinchAround:t}},t}(Kr);function ei(e,t){return 180*e.angleWith(t)/Math.PI}var ti=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.reset=function(){e.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},t.prototype._start=function(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])},t.prototype._move=function(e,t){var n=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ei(this._vector,n),pinchAround:t}},t.prototype._isBelowThreshold=function(e){this._minDiameter=Math.min(this._minDiameter,e.mag());var t=25/(Math.PI*this._minDiameter)*360,n=ei(e,this._startVector);return Math.abs(n)<t},t}(Kr);function ni(e){return Math.abs(e.y)>Math.abs(e.x)}var ri=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.reset=function(){e.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},t.prototype._start=function(e){this._lastPoints=e,ni(e[0].sub(e[1]))&&(this._valid=!1)},t.prototype._move=function(e,t,n){var r=e[0].sub(this._lastPoints[0]),i=e[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(r,i,n.timeStamp),this._valid)return this._lastPoints=e,this._active=!0,{pitchDelta:(r.y+i.y)/2*-.5}},t.prototype.gestureBeginsVertically=function(e,t,n){if(void 0!==this._valid)return this._valid;var r=e.mag()>=2,i=t.mag()>=2;if(r||i){if(!r||!i)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;var o=e.y>0==t.y>0;return ni(e)&&ni(t)&&o}},t}(Kr),ii={panStep:100,bearingStep:15,pitchStep:10},oi=function(){var e=ii;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1};function ai(e){return e*(2-e)}oi.prototype.blur=function(){this.reset()},oi.prototype.reset=function(){this._active=!1},oi.prototype.keydown=function(e){var t=this;if(!(e.altKey||e.ctrlKey||e.metaKey)){var n=0,r=0,i=0,o=0,a=0;switch(e.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),o=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),o=1);break;case 38:e.shiftKey?i=1:(e.preventDefault(),a=-1);break;case 40:e.shiftKey?i=-1:(e.preventDefault(),a=1);break;default:return}return this._rotationDisabled&&(r=0,i=0),{cameraAnimation:function(s){var u=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:ai,zoom:n?Math.round(u)+n*(e.shiftKey?2:1):u,bearing:s.getBearing()+r*t._bearingStep,pitch:s.getPitch()+i*t._pitchStep,offset:[-o*t._panStep,-a*t._panStep],center:s.getCenter()},{originalEvent:e})}}}},oi.prototype.enable=function(){this._enabled=!0},oi.prototype.disable=function(){this._enabled=!1,this.reset()},oi.prototype.isEnabled=function(){return this._enabled},oi.prototype.isActive=function(){return this._active},oi.prototype.disableRotation=function(){this._rotationDisabled=!0},oi.prototype.enableRotation=function(){this._rotationDisabled=!1};var si=function(t,n){this._map=t,this._el=t.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onTimeout"],this)};si.prototype.setZoomRate=function(e){this._defaultZoomRate=e},si.prototype.setWheelZoomRate=function(e){this._wheelZoomRate=e},si.prototype.isEnabled=function(){return!!this._enabled},si.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},si.prototype.isZooming=function(){return!!this._zooming},si.prototype.enable=function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},si.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},si.prototype.wheel=function(t){if(this.isEnabled()){var n=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,r=e.browser.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this._active||this._start(t)),t.preventDefault()}},si.prototype._onTimeout=function(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)},si.prototype._start=function(t){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var r=n.mousePos(this._el,t);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(r)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},si.prototype.renderFrame=function(){var t=this;if(this._frameId&&(this._frameId=null,this.isActive())){var n=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,i=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==i&&(i=1/i);var o="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(o*i))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a,s="number"==typeof this._targetZoom?this._targetZoom:n.zoom,u=this._startZoom,c=this._easing,l=!1;if("wheel"===this._type&&u&&c){var f=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),p=c(f);a=e.number(u,s,p),f<1?this._frameId||(this._frameId=!0):l=!0}else a=s,l=!0;return this._active=!0,l&&(this._active=!1,this._finishTimeout=setTimeout((function(){t._zooming=!1,t._handler._triggerRenderFrame(),delete t._targetZoom,delete t._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!l,zoomDelta:a-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},si.prototype._smoothOutEasing=function(t){var n=e.ease;if(this._prevEase){var r=this._prevEase,i=(e.browser.now()-r.start)/r.duration,o=r.easing(i+.01)-r.easing(i),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);n=e.bezier(a,s,.25,1)}return this._prevEase={start:e.browser.now(),duration:t,easing:n},n},si.prototype.blur=function(){this.reset()},si.prototype.reset=function(){this._active=!1};var ui=function(e,t){this._clickZoom=e,this._tapZoom=t};ui.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},ui.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},ui.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},ui.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ci=function(){this.reset()};ci.prototype.reset=function(){this._active=!1},ci.prototype.blur=function(){this.reset()},ci.prototype.dblclick=function(e,t){return e.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(e.shiftKey?-1:1),around:n.unproject(t)},{originalEvent:e})}}},ci.prototype.enable=function(){this._enabled=!0},ci.prototype.disable=function(){this._enabled=!1,this.reset()},ci.prototype.isEnabled=function(){return this._enabled},ci.prototype.isActive=function(){return this._active};var li=function(){this._tap=new Vr({numTouches:1,numTaps:1}),this.reset()};li.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},li.prototype.touchstart=function(e,t,n){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=t[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(e,t,n))},li.prototype.touchmove=function(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;var r=t[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,n)},li.prototype.touchend=function(e,t,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(e,t,n)&&(this._tapTime=e.timeStamp)},li.prototype.touchcancel=function(){this.reset()},li.prototype.enable=function(){this._enabled=!0},li.prototype.disable=function(){this._enabled=!1,this.reset()},li.prototype.isEnabled=function(){return this._enabled},li.prototype.isActive=function(){return this._active};var fi=function(e,t,n){this._el=e,this._mousePan=t,this._touchPan=n};fi.prototype.enable=function(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},fi.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},fi.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},fi.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var pi=function(e,t,n){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=n};pi.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},pi.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},pi.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},pi.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var hi=function(e,t,n,r){this._el=e,this._touchZoom=t,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0};hi.prototype.enable=function(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},hi.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},hi.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},hi.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},hi.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},hi.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var di=function(e){return e.zoom||e.drag||e.pitch||e.rotate},vi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(e.Event);function mi(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}var gi=function(t,r){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Mr(t),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(r),e.bindAll(["handleEvent","handleWindowEvent"],this);var i=this._el;this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[e.window,"blur",void 0]];for(var o=0,a=this._listeners;o<a.length;o+=1){var s=a[o],u=s[0];n.addEventListener(u,s[1],u===e.window.document?this.handleWindowEvent:this.handleEvent,s[2])}};gi.prototype.destroy=function(){for(var t=0,r=this._listeners;t<r.length;t+=1){var i=r[t],o=i[0];n.removeEventListener(o,i[1],o===e.window.document?this.handleWindowEvent:this.handleEvent,i[2])}},gi.prototype._addDefaultHandlers=function(e){var t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new Nr(t,e));var r=t.boxZoom=new zr(t,e);this._add("boxZoom",r);var i=new Hr,o=new ci;t.doubleClickZoom=new ui(o,i),this._add("tapZoom",i),this._add("clickZoom",o);var a=new li;this._add("tapDragZoom",a);var s=t.touchPitch=new ri;this._add("touchPitch",s);var u=new Zr(e),c=new Yr(e);t.dragRotate=new pi(e,u,c),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);var l=new qr(e),f=new Xr(e);t.dragPan=new fi(n,l,f),this._add("mousePan",l),this._add("touchPan",f,["touchZoom","touchRotate"]);var p=new ti,h=new Jr;t.touchZoomRotate=new hi(n,h,p,a),this._add("touchRotate",p,["touchPan","touchZoom"]),this._add("touchZoom",h,["touchPan","touchRotate"]);var d=t.scrollZoom=new si(t,this);this._add("scrollZoom",d,["mousePan"]);var v=t.keyboard=new oi;this._add("keyboard",v),this._add("blockableMapEvent",new Fr(t));for(var m=0,g=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];m<g.length;m+=1){var y=g[m];e.interactive&&e[y]&&t[y].enable(e[y])}},gi.prototype._add=function(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t},gi.prototype.stop=function(e){if(!this._updatingCamera){for(var t=0,n=this._handlers;t<n.length;t+=1)n[t].handler.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}},gi.prototype.isActive=function(){for(var e=0,t=this._handlers;e<t.length;e+=1)if(t[e].handler.isActive())return!0;return!1},gi.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},gi.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},gi.prototype.isMoving=function(){return Boolean(di(this._eventsInProgress))||this.isZooming()},gi.prototype._blockedByActive=function(e,t,n){for(var r in e)if(r!==n&&(!t||t.indexOf(r)<0))return!0;return!1},gi.prototype.handleWindowEvent=function(e){this.handleEvent(e,e.type+"Window")},gi.prototype._getMapTouches=function(e){for(var t=[],n=0,r=e;n<r.length;n+=1){var i=r[n];this._el.contains(i.target)&&t.push(i)}return t},gi.prototype.handleEvent=function(e,t){this._updatingCamera=!0;for(var r="renderFrame"===e.type?void 0:e,i={needsRenderFrame:!1},o={},a={},s=e.touches?this._getMapTouches(e.touches):void 0,u=s?n.touchPos(this._el,s):n.mousePos(this._el,e),c=0,l=this._handlers;c<l.length;c+=1){var f=l[c],p=f.handlerName,h=f.handler,d=f.allowed;if(h.isEnabled()){var v=void 0;this._blockedByActive(a,d,p)?h.reset():h[t||e.type]&&(v=h[t||e.type](e,u,s),this.mergeHandlerResult(i,o,v,p,r),v&&v.needsRenderFrame&&this._triggerRenderFrame()),(v||h.isActive())&&(a[p]=h)}}var m={};for(var g in this._previousActiveHandlers)a[g]||(m[g]=r);this._previousActiveHandlers=a,(Object.keys(m).length||mi(i))&&(this._changes.push([i,o,m]),this._triggerRenderFrame()),(Object.keys(a).length||mi(i))&&this._map._stop(!0),this._updatingCamera=!1;var y=i.cameraAnimation;y&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],y(this._map))},gi.prototype.mergeHandlerResult=function(t,n,r,i,o){if(r){e.extend(t,r);var a={handlerName:i,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(n.zoom=a),void 0!==r.panDelta&&(n.drag=a),void 0!==r.pitchDelta&&(n.pitch=a),void 0!==r.bearingDelta&&(n.rotate=a)}},gi.prototype._applyChanges=function(){for(var t={},n={},r={},i=0,o=this._changes;i<o.length;i+=1){var a=o[i],s=a[0],u=a[1],c=a[2];s.panDelta&&(t.panDelta=(t.panDelta||new e.Point(0,0))._add(s.panDelta)),s.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(t.around=s.around),void 0!==s.pinchAround&&(t.pinchAround=s.pinchAround),s.noInertia&&(t.noInertia=s.noInertia),e.extend(n,u),e.extend(r,c)}this._updateMapTransform(t,n,r),this._changes=[]},gi.prototype._updateMapTransform=function(e,t,n){var r=this._map,i=r.transform;if(!mi(e))return this._fireEvents(t,n,!0);var o=e.panDelta,a=e.zoomDelta,s=e.bearingDelta,u=e.pitchDelta,c=e.around,l=e.pinchAround;void 0!==l&&(c=l),r._stop(!0),c=c||r.transform.centerPoint;var f=i.pointLocation(o?c.sub(o):c);s&&(i.bearing+=s),u&&(i.pitch+=u),a&&(i.zoom+=a),i.setLocationAtPoint(f,c),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(t,n,!0)},gi.prototype._fireEvents=function(t,n,r){var i=this,o=di(this._eventsInProgress),a=di(t),s={};for(var u in t)this._eventsInProgress[u]||(s[u+"start"]=t[u].originalEvent),this._eventsInProgress[u]=t[u];for(var c in!o&&a&&this._fireEvent("movestart",a.originalEvent),s)this._fireEvent(c,s[c]);for(var l in a&&this._fireEvent("move",a.originalEvent),t)this._fireEvent(l,t[l].originalEvent);var f,p={};for(var h in this._eventsInProgress){var d=this._eventsInProgress[h],v=d.handlerName,m=d.originalEvent;this._handlersById[v].isActive()||(delete this._eventsInProgress[h],p[h+"end"]=f=n[v]||m)}for(var g in p)this._fireEvent(g,p[g]);var y=di(this._eventsInProgress);if(r&&(o||a)&&!y){this._updatingCamera=!0;var b=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),_=function(e){return 0!==e&&-i._bearingSnap<e&&e<i._bearingSnap};b?(_(b.bearing||this._map.getBearing())&&(b.bearing=0),this._map.easeTo(b,{originalEvent:f})):(this._map.fire(new e.Event("moveend",{originalEvent:f})),_(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},gi.prototype._fireEvent=function(t,n){this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))},gi.prototype._requestFrame=function(){var e=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(t){delete e._frameId,e.handleEvent(new vi("renderFrame",{timeStamp:t})),e._applyChanges()}))},gi.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var yi=function(t){function n(n,r){t.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=r.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},n.prototype.setCenter=function(e,t){return this.jumpTo({center:e},t)},n.prototype.panBy=function(t,n,r){return t=e.Point.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},n),r)},n.prototype.panTo=function(t,n,r){return this.easeTo(e.extend({center:t},n),r)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(e,t){return this.jumpTo({zoom:e},t),this},n.prototype.zoomTo=function(t,n,r){return this.easeTo(e.extend({zoom:t},n),r)},n.prototype.zoomIn=function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this},n.prototype.zoomOut=function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(e,t){return this.jumpTo({bearing:e},t),this},n.prototype.getPadding=function(){return this.transform.padding},n.prototype.setPadding=function(e,t){return this.jumpTo({padding:e},t),this},n.prototype.rotateTo=function(t,n,r){return this.easeTo(e.extend({bearing:t},n),r)},n.prototype.resetNorth=function(t,n){return this.rotateTo(0,e.extend({duration:1e3},t),n),this},n.prototype.resetNorthPitch=function(t,n){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),n),this},n.prototype.snapToNorth=function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(e,t){return this.jumpTo({pitch:e},t),this},n.prototype.cameraForBounds=function(t,n){t=e.LngLatBounds.convert(t);var r=n&&n.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),r,n)},n.prototype._cameraForBoxAndBearing=function(t,n,r,i){var o={top:0,bottom:0,right:0,left:0};if("number"==typeof(i=e.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){var a=i.padding;i.padding={top:a,bottom:a,right:a,left:a}}i.padding=e.extend(o,i.padding);var s=this.transform,u=s.padding,c=s.project(e.LngLat.convert(t)),l=s.project(e.LngLat.convert(n)),f=c.rotate(-r*Math.PI/180),p=l.rotate(-r*Math.PI/180),h=new e.Point(Math.max(f.x,p.x),Math.max(f.y,p.y)),d=new e.Point(Math.min(f.x,p.x),Math.min(f.y,p.y)),v=h.sub(d),m=(s.width-(u.left+u.right+i.padding.left+i.padding.right))/v.x,g=(s.height-(u.top+u.bottom+i.padding.top+i.padding.bottom))/v.y;if(!(g<0||m<0)){var y=Math.min(s.scaleZoom(s.scale*Math.min(m,g)),i.maxZoom),b="number"==typeof i.offset.x?new e.Point(i.offset.x,i.offset.y):e.Point.convert(i.offset),_=new e.Point((i.padding.left-i.padding.right)/2,(i.padding.top-i.padding.bottom)/2).rotate(r*Math.PI/180),x=b.add(_).mult(s.scale/s.zoomScale(y));return{center:s.unproject(c.add(l).div(2).sub(x)),zoom:y,bearing:r}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},n.prototype.fitBounds=function(e,t,n){return this._fitInternal(this.cameraForBounds(e,t),t,n)},n.prototype.fitScreenCoordinates=function(t,n,r,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(t)),this.transform.pointLocation(e.Point.convert(n)),r,i),i,o)},n.prototype._fitInternal=function(t,n,r){return t?(delete(n=e.extend(t,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this},n.prototype.jumpTo=function(t,n){this.stop();var r=this.transform,i=!1,o=!1,a=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(i=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.LngLat.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(o=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(a=!0,r.pitch=+t.pitch),null==t.padding||r.isPaddingEqual(t.padding)||(r.padding=t.padding),this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),i&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),o&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),a&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n))},n.prototype.easeTo=function(t,n){var r=this;this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.browser.prefersReducedMotion)&&(t.duration=0);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u=this.getPadding(),c="zoom"in t?+t.zoom:o,l="bearing"in t?this._normalizeBearing(t.bearing,a):a,f="pitch"in t?+t.pitch:s,p="padding"in t?t.padding:i.padding,h=e.Point.convert(t.offset),d=i.centerPoint.add(h),v=i.pointLocation(d),m=e.LngLat.convert(t.center||v);this._normalizeCenter(m);var g,y,b=i.project(v),_=i.project(m).sub(b),x=i.zoomScale(c-o);t.around&&(g=e.LngLat.convert(t.around),y=i.locationPoint(g));var w={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||c!==o,this._rotating=this._rotating||a!==l,this._pitching=this._pitching||f!==s,this._padding=!i.isPaddingEqual(p),this._easeId=t.easeId,this._prepareEase(n,t.noMoveStart,w),this._ease((function(t){if(r._zooming&&(i.zoom=e.number(o,c,t)),r._rotating&&(i.bearing=e.number(a,l,t)),r._pitching&&(i.pitch=e.number(s,f,t)),r._padding&&(i.interpolatePadding(u,p,t),d=i.centerPoint.add(h)),g)i.setLocationAtPoint(g,y);else{var v=i.zoomScale(i.zoom-o),m=c>o?Math.min(2,x):Math.max(.5,x),w=Math.pow(m,1-t),O=i.unproject(b.add(_.mult(t*w)).mult(v));i.setLocationAtPoint(i.renderWorldCopies?O.wrap():O,d)}r._fireMoveEvents(n)}),(function(e){r._afterEase(n,e)}),t),this},n.prototype._prepareEase=function(t,n,r){void 0===r&&(r={}),this._moving=!0,n||r.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!r.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!r.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!r.pitching&&this.fire(new e.Event("pitchstart",t))},n.prototype._fireMoveEvents=function(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))},n.prototype._afterEase=function(t,n){if(!this._easeId||!n||this._easeId!==n){delete this._easeId;var r=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new e.Event("zoomend",t)),i&&this.fire(new e.Event("rotateend",t)),o&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}},n.prototype.flyTo=function(t,n){var r=this;if(!t.essential&&e.browser.prefersReducedMotion){var i=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);var o=this.transform,a=this.getZoom(),s=this.getBearing(),u=this.getPitch(),c=this.getPadding(),l="zoom"in t?e.clamp(+t.zoom,o.minZoom,o.maxZoom):a,f="bearing"in t?this._normalizeBearing(t.bearing,s):s,p="pitch"in t?+t.pitch:u,h="padding"in t?t.padding:o.padding,d=o.zoomScale(l-a),v=e.Point.convert(t.offset),m=o.centerPoint.add(v),g=o.pointLocation(m),y=e.LngLat.convert(t.center||g);this._normalizeCenter(y);var b=o.project(g),_=o.project(y).sub(b),x=t.curve,w=Math.max(o.width,o.height),O=w/d,E=_.mag();if("minZoom"in t){var S=e.clamp(Math.min(t.minZoom,a,l),o.minZoom,o.maxZoom),j=w/o.zoomScale(S-a);x=Math.sqrt(j/E*2)}var A=x*x;function k(e){var t=(O*O-w*w+(e?-1:1)*A*A*E*E)/(2*(e?O:w)*A*E);return Math.log(Math.sqrt(t*t+1)-t)}function C(e){return(Math.exp(e)-Math.exp(-e))/2}function T(e){return(Math.exp(e)+Math.exp(-e))/2}var M=k(0),P=function(e){return T(M)/T(M+x*e)},I=function(e){return w*((T(M)*(C(t=M+x*e)/T(t))-C(M))/A)/E;var t},R=(k(1)-M)/x;if(Math.abs(E)<1e-6||!isFinite(R)){if(Math.abs(w-O)<1e-6)return this.easeTo(t,n);var L=O<w?-1:1;R=Math.abs(Math.log(O/w))/x,I=function(){return 0},P=function(e){return Math.exp(L*x*e)}}return t.duration="duration"in t?+t.duration:1e3*R/("screenSpeed"in t?+t.screenSpeed/x:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=s!==f,this._pitching=p!==u,this._padding=!o.isPaddingEqual(h),this._prepareEase(n,!1),this._ease((function(t){var i=t*R,d=1/P(i);o.zoom=1===t?l:a+o.scaleZoom(d),r._rotating&&(o.bearing=e.number(s,f,t)),r._pitching&&(o.pitch=e.number(u,p,t)),r._padding&&(o.interpolatePadding(c,h,t),m=o.centerPoint.add(v));var g=1===t?y:o.unproject(b.add(_.mult(I(i))).mult(d));o.setLocationAtPoint(o.renderWorldCopies?g.wrap():g,m),r._fireMoveEvents(n)}),(function(){return r._afterEase(n)}),t),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){return this._stop()},n.prototype._stop=function(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var n=this._onEaseEnd;delete this._onEaseEnd,n.call(this,t)}if(!e){var r=this.handlers;r&&r.stop(!1)}return this},n.prototype._ease=function(t,n,r){!1===r.animate||0===r.duration?(t(1),n()):(this._easeStart=e.browser.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var t=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(t,n){t=e.wrap(t,-180,180);var r=Math.abs(t-n);return Math.abs(t-360-n)<r&&(t-=360),Math.abs(t+360-n)<r&&(t+=360),t},n.prototype._normalizeCenter=function(e){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}},n}(e.Evented),bi=function(t){void 0===t&&(t={}),this.options=t,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};bi.prototype.getDefaultPosition=function(){return"bottom-right"},bi.prototype.onAdd=function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=n.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},bi.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},bi.prototype._setElementTitle=function(e,t){var n=this._map._getUIString("AttributionControl."+t);e.title=n,e.setAttribute("aria-label",n)},bi.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},bi.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){var r=n.reduce((function(e,t,r){return t.value&&(e+=t.key+"="+t.value+(r<n.length-1?"&":"")),e}),"?");t.href=e.config.FEEDBACK_URL+"/"+r+(this._map._hash?this._map._hash.getHashString(!0):""),t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}},bi.prototype._updateData=function(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())},bi.prototype._updateAttributions=function(){if(this._map.style){var e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((function(e){return"string"!=typeof e?"":e}))):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r];if(i.used){var o=i.getSource();o.attribution&&e.indexOf(o.attribution)<0&&e.push(o.attribution)}}e.sort((function(e,t){return e.length-t.length}));var a=(e=e.filter((function(t,n){for(var r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0}))).join(" | ");a!==this._attribHTML&&(this._attribHTML=a,e.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},bi.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var _i=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};_i.prototype.onAdd=function(e){this._map=e,this._container=n.create("div","mapboxgl-ctrl");var t=n.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},_i.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},_i.prototype.getDefaultPosition=function(){return"bottom-left"},_i.prototype._updateLogo=function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},_i.prototype._logoRequired=function(){if(this._map.style){var e=this._map.style.sourceCaches;for(var t in e)if(e[t].getSource().mapbox_logo)return!0;return!1}},_i.prototype._updateCompact=function(){var e=this._container.children;if(e.length){var t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}};var xi=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};xi.prototype.add=function(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t},xi.prototype.remove=function(e){for(var t=this._currentlyRunning,n=0,r=t?this._queue.concat(t):this._queue;n<r.length;n+=1){var i=r[n];if(i.id===e)return void(i.cancelled=!0)}},xi.prototype.run=function(e){void 0===e&&(e=0);var t=this._currentlyRunning=this._queue;this._queue=[];for(var n=0,r=t;n<r.length;n+=1){var i=r[n];if(!i.cancelled&&(i.callback(e),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},xi.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var wi={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Oi=e.window.HTMLImageElement,Ei=e.window.HTMLElement,Si=e.window.ImageBitmap,ji={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Ai=function(r){function i(t){var n=this;if(null!=(t=e.extend({},ji,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var i=new Or(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies);if(r.call(this,i,t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._renderTaskQueue=new xi,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},wi,t.locale),this._clickTolerance=t.clickTolerance,this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken),"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error("Container '"+t.container+"' not found.")}else{if(!(t.container instanceof Ei))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return n._update(!1)})),this.on("moveend",(function(){return n._update(!1)})),this.on("zoom",(function(){return n._update(!0)})),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new gi(this,t),this._hash=t.hash&&new Sr("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new bi({customAttribution:t.customAttribution})),this.addControl(new _i,t.logoPosition),this.on("style.load",(function(){n.transform.unmodified&&n.jumpTo(n.style.stylesheet)})),this.on("data",(function(t){n._update("style"===t.dataType),n.fire(new e.Event(t.dataType+"data",t))})),this.on("dataloading",(function(t){n.fire(new e.Event(t.dataType+"dataloading",t))}))}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var o={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return i.prototype._getMapId=function(){return this._mapId},i.prototype.addControl=function(t,n){if(void 0===n&&(n=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=t.onAdd(this);this._controls.push(t);var i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this},i.prototype.removeControl=function(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(t);return n>-1&&this._controls.splice(n,1),t.onRemove(this),this},i.prototype.hasControl=function(e){return this._controls.indexOf(e)>-1},i.prototype.resize=function(t){var n=this._containerDimensions(),r=n[0],i=n[1];if(r===this.transform.width&&i===this.transform.height)return this;this._resizeCanvas(r,i),this.transform.resize(r,i),this.painter.resize(r,i);var o=!this._moving;return o&&this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)),this.fire(new e.Event("resize",t)),o&&this.fire(new e.Event("moveend",t)),this},i.prototype.getBounds=function(){return this.transform.getBounds()},i.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},i.prototype.setMaxBounds=function(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()},i.prototype.setMinZoom=function(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},i.prototype.getMinZoom=function(){return this.transform.minZoom},i.prototype.setMaxZoom=function(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")},i.prototype.getMaxZoom=function(){return this.transform.maxZoom},i.prototype.setMinPitch=function(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},i.prototype.getMinPitch=function(){return this.transform.minPitch},i.prototype.setMaxPitch=function(e){if((e=null==e?60:e)>60)throw new Error("maxPitch must be less than or equal to 60");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")},i.prototype.getMaxPitch=function(){return this.transform.maxPitch},i.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},i.prototype.setRenderWorldCopies=function(e){return this.transform.renderWorldCopies=e,this._update()},i.prototype.project=function(t){return this.transform.locationPoint(e.LngLat.convert(t))},i.prototype.unproject=function(t){return this.transform.pointLocation(e.Point.convert(t))},i.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},i.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},i.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},i.prototype._createDelegatedListener=function(e,t,n){var r,i=this;if("mouseenter"===e||"mouseover"===e){var o=!1;return{layer:t,listener:n,delegates:{mousemove:function(r){var a=i.getLayer(t)?i.queryRenderedFeatures(r.point,{layers:[t]}):[];a.length?o||(o=!0,n.call(i,new Rr(e,i,r.originalEvent,{features:a}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===e||"mouseout"===e){var a=!1;return{layer:t,listener:n,delegates:{mousemove:function(r){(i.getLayer(t)?i.queryRenderedFeatures(r.point,{layers:[t]}):[]).length?a=!0:a&&(a=!1,n.call(i,new Rr(e,i,r.originalEvent)))},mouseout:function(t){a&&(a=!1,n.call(i,new Rr(e,i,t.originalEvent)))}}}}return{layer:t,listener:n,delegates:(r={},r[e]=function(e){var r=i.getLayer(t)?i.queryRenderedFeatures(e.point,{layers:[t]}):[];r.length&&(e.features=r,n.call(i,e),delete e.features)},r)}},i.prototype.on=function(e,t,n){if(void 0===n)return r.prototype.on.call(this,e,t);var i=this._createDelegatedListener(e,t,n);for(var o in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(i),i.delegates)this.on(o,i.delegates[o]);return this},i.prototype.once=function(e,t,n){if(void 0===n)return r.prototype.once.call(this,e,t);var i=this._createDelegatedListener(e,t,n);for(var o in i.delegates)this.once(o,i.delegates[o]);return this},i.prototype.off=function(e,t,n){var i=this;return void 0===n?r.prototype.off.call(this,e,t):(this._delegatedListeners&&this._delegatedListeners[e]&&function(r){for(var o=r[e],a=0;a<o.length;a++){var s=o[a];if(s.layer===t&&s.listener===n){for(var u in s.delegates)i.off(u,s.delegates[u]);return o.splice(a,1),i}}}(this._delegatedListeners),this)},i.prototype.queryRenderedFeatures=function(t,n){if(!this.style)return[];var r;if(void 0!==n||void 0===t||t instanceof e.Point||Array.isArray(t)||(n=t,t=void 0),n=n||{},(t=t||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||"number"==typeof t[0])r=[e.Point.convert(t)];else{var i=e.Point.convert(t[0]),o=e.Point.convert(t[1]);r=[i,new e.Point(o.x,i.y),o,new e.Point(i.x,o.y),i]}return this.style.queryRenderedFeatures(r,n,this.transform)},i.prototype.querySourceFeatures=function(e,t){return this.style.querySourceFeatures(e,t)},i.prototype.setStyle=function(t,n){return!1!==(n=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&t?(this._diffStyle(t,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(t,n))},i.prototype._getUIString=function(e){var t=this._locale[e];if(null==t)throw new Error("Missing UI string '"+e+"'");return t},i.prototype._updateStyle=function(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new Ht(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this):(delete this.style,this)},i.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ht(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},i.prototype._diffStyle=function(t,n){var r=this;if("string"==typeof t){var i=this._requestManager.normalizeStyleURL(t),o=this._requestManager.transformRequest(i,e.ResourceType.Style);e.getJSON(o,(function(t,i){t?r.fire(new e.ErrorEvent(t)):i&&r._updateDiff(i,n)}))}else"object"==typeof t&&this._updateDiff(t,n)},i.prototype._updateDiff=function(t,n){try{this.style.setState(t)&&this._update(!0)}catch(r){e.warnOnce("Unable to perform style diff: "+(r.message||r.error||r)+".  Rebuilding the style from scratch."),this._updateStyle(t,n)}},i.prototype.getStyle=function(){if(this.style)return this.style.serialize()},i.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},i.prototype.addSource=function(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)},i.prototype.isSourceLoaded=function(t){var n=this.style&&this.style.sourceCaches[t];if(void 0!==n)return n.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+t+"'")))},i.prototype.areTilesLoaded=function(){var e=this.style&&this.style.sourceCaches;for(var t in e){var n=e[t]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},i.prototype.addSourceType=function(e,t,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,n)},i.prototype.removeSource=function(e){return this.style.removeSource(e),this._update(!0)},i.prototype.getSource=function(e){return this.style.getSource(e)},i.prototype.addImage=function(t,n,r){void 0===r&&(r={});var i=r.pixelRatio;void 0===i&&(i=1);var o=r.sdf;void 0===o&&(o=!1);var a=r.stretchX,s=r.stretchY,u=r.content;if(this._lazyInitEmptyStyle(),n instanceof Oi||Si&&n instanceof Si){var c=e.browser.getImageData(n);this.style.addImage(t,{data:new e.RGBAImage({width:c.width,height:c.height},c.data),pixelRatio:i,stretchX:a,stretchY:s,content:u,sdf:o,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var l=n;this.style.addImage(t,{data:new e.RGBAImage({width:n.width,height:n.height},new Uint8Array(n.data)),pixelRatio:i,stretchX:a,stretchY:s,content:u,sdf:o,version:0,userImage:l}),l.onAdd&&l.onAdd(this,t)}},i.prototype.updateImage=function(t,n){var r=this.style.getImage(t);if(!r)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var i=n instanceof Oi||Si&&n instanceof Si?e.browser.getImageData(n):n,o=i.width,a=i.height,s=i.data;return void 0===o||void 0===a?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):o!==r.data.width||a!==r.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(r.data.replace(s,!(n instanceof Oi||Si&&n instanceof Si)),void this.style.updateImage(t,r))},i.prototype.hasImage=function(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},i.prototype.removeImage=function(e){this.style.removeImage(e)},i.prototype.loadImage=function(t,n){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),n)},i.prototype.listImages=function(){return this.style.listImages()},i.prototype.addLayer=function(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)},i.prototype.moveLayer=function(e,t){return this.style.moveLayer(e,t),this._update(!0)},i.prototype.removeLayer=function(e){return this.style.removeLayer(e),this._update(!0)},i.prototype.getLayer=function(e){return this.style.getLayer(e)},i.prototype.setLayerZoomRange=function(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)},i.prototype.setFilter=function(e,t,n){return void 0===n&&(n={}),this.style.setFilter(e,t,n),this._update(!0)},i.prototype.getFilter=function(e){return this.style.getFilter(e)},i.prototype.setPaintProperty=function(e,t,n,r){return void 0===r&&(r={}),this.style.setPaintProperty(e,t,n,r),this._update(!0)},i.prototype.getPaintProperty=function(e,t){return this.style.getPaintProperty(e,t)},i.prototype.setLayoutProperty=function(e,t,n,r){return void 0===r&&(r={}),this.style.setLayoutProperty(e,t,n,r),this._update(!0)},i.prototype.getLayoutProperty=function(e,t){return this.style.getLayoutProperty(e,t)},i.prototype.setLight=function(e,t){return void 0===t&&(t={}),this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)},i.prototype.getLight=function(){return this.style.getLight()},i.prototype.setFeatureState=function(e,t){return this.style.setFeatureState(e,t),this._update()},i.prototype.removeFeatureState=function(e,t){return this.style.removeFeatureState(e,t),this._update()},i.prototype.getFeatureState=function(e){return this.style.getFeatureState(e)},i.prototype.getContainer=function(){return this._container},i.prototype.getCanvasContainer=function(){return this._canvasContainer},i.prototype.getCanvas=function(){return this._canvas},i.prototype._containerDimensions=function(){var e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]},i.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},i.prototype._setupContainer=function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=n.create("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();var t=this._canvasContainer=n.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var r=this._containerDimensions();this._resizeCanvas(r[0],r[1]);var i=this._controlContainer=n.create("div","mapboxgl-control-container",e),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(e){o[e]=n.create("div","mapboxgl-ctrl-"+e,i)})),this._container.addEventListener("scroll",this._onMapScroll,!1)},i.prototype._resizeCanvas=function(t,n){var r=e.browser.devicePixelRatio||1;this._canvas.width=r*t,this._canvas.height=r*n,this._canvas.style.width=t+"px",this._canvas.style.height=n+"px"},i.prototype._setupPainter=function(){var n=e.extend({},t.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);r?(this.painter=new br(r,this.transform),e.webpSupported.testSupport(r)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},i.prototype._contextLost=function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))},i.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))},i.prototype._onMapScroll=function(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},i.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},i.prototype._update=function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this},i.prototype._requestRenderFrame=function(e){return this._update(),this._renderTaskQueue.add(e)},i.prototype._cancelRenderFrame=function(e){this._renderTaskQueue.remove(e)},i.prototype._render=function(t){var n,r=this,i=0,o=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(n=o.createQueryEXT(),o.beginQueryEXT(o.TIME_ELAPSED_EXT,n),i=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),!this._removed){var a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,u=e.browser.now();this.style.zoomHistory.update(s,u);var c=new e.EvaluationParameters(s,{now:u,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),l=c.crossFadingFactor();1===l&&l===this._crossFadingFactor||(a=!0,this._crossFadingFactor=l),this.style.update(c)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var f=e.browser.now()-i;o.endQueryEXT(o.TIME_ELAPSED_EXT,n),setTimeout((function(){var t=o.getQueryObjectEXT(n,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(n),r.fire(new e.Event("gpu-timing-frame",{cpuTime:f,gpuTime:t}))}),50)}if(this.listens("gpu-timing-layer")){var p=this.painter.collectGpuTimers();setTimeout((function(){var t=r.painter.queryGpuTimers(p);r.fire(new e.Event("gpu-timing-layer",{layerTimes:t}))}),50)}var h=this._sourcesDirty||this._styleDirty||this._placementDirty;return h||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new e.Event("idle")),!this._loaded||this._fullyLoaded||h||(this._fullyLoaded=!0),this}},i.prototype.remove=function(){this._hash&&this._hash.remove();for(var t=0,n=this._controls;t<n.length;t+=1)n[t].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),ki(this._canvasContainer),ki(this._controlContainer),ki(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},i.prototype.triggerRepaint=function(){var t=this;this.style&&!this._frame&&(this._frame=e.browser.frame((function(e){t._frame=null,t._render(e)})))},i.prototype._onWindowOnline=function(){this._update()},i.prototype._onWindowResize=function(e){this._trackResize&&this.resize({originalEvent:e})._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())},o.showPadding.get=function(){return!!this._showPadding},o.showPadding.set=function(e){this._showPadding!==e&&(this._showPadding=e,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(e){this._vertices=e,this._update()},i.prototype._setCacheLimits=function(t,n){e.setCacheLimits(t,n)},o.version.get=function(){return e.version},Object.defineProperties(i.prototype,o),i}(yi);function ki(e){e.parentNode&&e.parentNode.removeChild(e)}var Ci={showCompass:!0,showZoom:!0,visualizePitch:!1},Ti=function(t){var r=this;this.options=e.extend({},Ci,t),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(e){return r._map.zoomIn({},{originalEvent:e})})),n.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(e){return r._map.zoomOut({},{originalEvent:e})})),n.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(e){r.options.visualizePitch?r._map.resetNorthPitch({},{originalEvent:e}):r._map.resetNorth({},{originalEvent:e})})),this._compassIcon=n.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ti.prototype._updateZoomButtons=function(){var e=this._map.getZoom(),t=e===this._map.getMaxZoom(),n=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())},Ti.prototype._rotateCompassArrow=function(){var e=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=e},Ti.prototype.onAdd=function(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Mi(this._map,this._compass,this.options.visualizePitch)),this._container},Ti.prototype.onRemove=function(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ti.prototype._createButton=function(e,t){var r=n.create("button",e,this._container);return r.type="button",r.addEventListener("click",t),r},Ti.prototype._setButtonTitle=function(e,t){var n=this._map._getUIString("NavigationControl."+t);e.title=n,e.setAttribute("aria-label",n)};var Mi=function(t,r,i){void 0===i&&(i=!1),this._clickTolerance=10,this.element=r,this.mouseRotate=new Zr({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,i&&(this.mousePitch=new Yr({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener(r,"mousedown",this.mousedown),n.addEventListener(r,"touchstart",this.touchstart,{passive:!1}),n.addEventListener(r,"touchmove",this.touchmove),n.addEventListener(r,"touchend",this.touchend),n.addEventListener(r,"touchcancel",this.reset)};function Pi(t,n,r){if(t=new e.LngLat(t.lng,t.lat),n){var i=new e.LngLat(t.lng-360,t.lat),o=new e.LngLat(t.lng+360,t.lat),a=r.locationPoint(t).distSqr(n);r.locationPoint(i).distSqr(n)<a?t=i:r.locationPoint(o).distSqr(n)<a&&(t=o)}for(;Math.abs(t.lng-r.center.lng)>180;){var s=r.locationPoint(t);if(s.x>=0&&s.y>=0&&s.x<=r.width&&s.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}Mi.prototype.down=function(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),n.disableDrag()},Mi.prototype.move=function(e,t){var n=this.map,r=this.mouseRotate.mousemoveWindow(e,t);if(r&&r.bearingDelta&&n.setBearing(n.getBearing()+r.bearingDelta),this.mousePitch){var i=this.mousePitch.mousemoveWindow(e,t);i&&i.pitchDelta&&n.setPitch(n.getPitch()+i.pitchDelta)}},Mi.prototype.off=function(){var e=this.element;n.removeEventListener(e,"mousedown",this.mousedown),n.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),n.removeEventListener(e,"touchmove",this.touchmove),n.removeEventListener(e,"touchend",this.touchend),n.removeEventListener(e,"touchcancel",this.reset),this.offTemp()},Mi.prototype.offTemp=function(){n.enableDrag(),n.removeEventListener(e.window,"mousemove",this.mousemove),n.removeEventListener(e.window,"mouseup",this.mouseup)},Mi.prototype.mousedown=function(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:function(){return t.preventDefault()}}),n.mousePos(this.element,t)),n.addEventListener(e.window,"mousemove",this.mousemove),n.addEventListener(e.window,"mouseup",this.mouseup)},Mi.prototype.mousemove=function(e){this.move(e,n.mousePos(this.element,e))},Mi.prototype.mouseup=function(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()},Mi.prototype.touchstart=function(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=n.touchPos(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return e.preventDefault()}},this._startPos))},Mi.prototype.touchmove=function(e){1!==e.targetTouches.length?this.reset():(this._lastPos=n.touchPos(this.element,e.targetTouches)[0],this.move({preventDefault:function(){return e.preventDefault()}},this._lastPos))},Mi.prototype.touchend=function(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Mi.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Ii={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ri(e,t,n){var r=e.classList;for(var i in Ii)r.remove("mapboxgl-"+n+"-anchor-"+i);r.add("mapboxgl-"+n+"-anchor-"+t)}var Li,Di=function(t){function r(r,i){if(t.call(this),(r instanceof e.window.HTMLElement||i)&&(r=e.extend({element:r},i)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&"auto"!==r.pitchAlignment?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=e.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=n.create("div"),this._element.setAttribute("aria-label","Map marker");var o=n.createNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height","41px"),o.setAttributeNS(null,"width","27px"),o.setAttributeNS(null,"viewBox","0 0 27 41");var a=n.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"stroke","none"),a.setAttributeNS(null,"stroke-width","1"),a.setAttributeNS(null,"fill","none"),a.setAttributeNS(null,"fill-rule","evenodd");var s=n.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");var u=n.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"transform","translate(3.0, 29.0)"),u.setAttributeNS(null,"fill","#000000");for(var c=0,l=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];c<l.length;c+=1){var f=l[c],p=n.createNS("http://www.w3.org/2000/svg","ellipse");p.setAttributeNS(null,"opacity","0.04"),p.setAttributeNS(null,"cx","10.5"),p.setAttributeNS(null,"cy","5.80029008"),p.setAttributeNS(null,"rx",f.rx),p.setAttributeNS(null,"ry",f.ry),u.appendChild(p)}var h=n.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"fill",this._color);var d=n.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),h.appendChild(d);var v=n.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"opacity","0.25"),v.setAttributeNS(null,"fill","#000000");var m=n.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),v.appendChild(m);var g=n.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(6.0, 7.0)"),g.setAttributeNS(null,"fill","#FFFFFF");var y=n.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(8.0, 8.0)");var b=n.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#000000"),b.setAttributeNS(null,"opacity","0.25"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962");var _=n.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#FFFFFF"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962"),y.appendChild(b),y.appendChild(_),s.appendChild(u),s.appendChild(h),s.appendChild(v),s.appendChild(g),s.appendChild(y),o.appendChild(s),o.setAttributeNS(null,"height",41*this._scale+"px"),o.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(o),this._offset=e.Point.convert(r&&r.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(e){e.preventDefault()})),this._element.addEventListener("mousedown",(function(e){e.preventDefault()})),Ri(this._element,this._anchor,"marker"),this._popup=null}return t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r,r.prototype.addTo=function(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},r.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},r.prototype.getElement=function(){return this._element},r.prototype.setPopup=function(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){var t=Math.sqrt(Math.pow(13.5,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[t,-1*(24.6+t)],"bottom-right":[-t,-1*(24.6+t)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},r.prototype._onKeyPress=function(e){var t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()},r.prototype._onMapClick=function(e){var t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()},r.prototype.getPopup=function(){return this._popup},r.prototype.togglePopup=function(){var e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this},r.prototype._update=function(e){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Pi(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var t="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?t="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(t="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var r="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?r="rotateX(0deg)":"map"===this._pitchAlignment&&(r="rotateX("+this._map.getPitch()+"deg)"),e&&"moveend"!==e.type||(this._pos=this._pos.round()),n.setTransform(this._element,Ii[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+r+" "+t)}},r.prototype.getOffset=function(){return this._offset},r.prototype.setOffset=function(t){return this._offset=e.Point.convert(t),this._update(),this},r.prototype._onMove=function(t){if(!this._isDragging){var n=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=n}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag")))},r.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"},r.prototype._addDragHandler=function(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},r.prototype.setDraggable=function(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},r.prototype.isDraggable=function(){return this._draggable},r.prototype.setRotation=function(e){return this._rotation=e||0,this._update(),this},r.prototype.getRotation=function(){return this._rotation},r.prototype.setRotationAlignment=function(e){return this._rotationAlignment=e||"auto",this._update(),this},r.prototype.getRotationAlignment=function(){return this._rotationAlignment},r.prototype.setPitchAlignment=function(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this},r.prototype.getPitchAlignment=function(){return this._pitchAlignment},r}(e.Evented),Ni={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Fi=0,zi=!1,Bi=function(t){function r(n){t.call(this),this.options=e.extend({},Ni,n),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r,r.prototype.onAdd=function(t){var r;return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,void 0!==Li?r(Li):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((function(e){r(Li="denied"!==e.state)})):r(Li=!!e.window.navigator.geolocation),this._container},r.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),n.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Fi=0,zi=!1},r.prototype._isOutOfMapMaxBounds=function(e){var t=this._map.getMaxBounds(),n=e.coords;return t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())},r.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},r.prototype._onSuccess=function(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}},r.prototype._updateCamera=function(t){var n=new e.LngLat(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,i=this._map.getBearing(),o=e.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})},r.prototype._updateMarker=function(t){if(t){var n=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},r.prototype._updateCircleRadius=function(){var e=this._map._container.clientHeight/2,t=this._map.unproject([0,e]),n=this._map.unproject([1,e]),r=t.distanceTo(n),i=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=i+"px",this._circleElement.style.height=i+"px"},r.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},r.prototype._onError=function(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&zi)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}},r.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},r.prototype._setupUI=function(t){var r=this;if(this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this._geolocateButton=n.create("button","mapboxgl-ctrl-geolocate",this._container),n.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{var o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Di(this._dotElement),this._circleElement=n.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Di({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(t){t.geolocateSource||"ACTIVE_LOCK"!==r._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(r._watchState="BACKGROUND",r._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),r._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),r.fire(new e.Event("trackuserlocationend")))}))},r.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Fi--,zi=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Fi>1?(t={maximumAge:6e5,timeout:0},zi=!0):(t=this.options.positionOptions,zi=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},r.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},r}(e.Evented),Ui={maxWidth:100,unit:"metric"},Vi=function(t){this.options=e.extend({},Ui,t),e.bindAll(["_onMove","setUnit"],this)};function Hi(e,t,n){var r=n&&n.maxWidth||100,i=e._container.clientHeight/2,o=e.unproject([0,i]),a=e.unproject([r,i]),s=o.distanceTo(a);if(n&&"imperial"===n.unit){var u=3.2808*s;u>5280?Gi(t,r,u/5280,e._getUIString("ScaleControl.Miles")):Gi(t,r,u,e._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?Gi(t,r,s/1852,e._getUIString("ScaleControl.NauticalMiles")):s>=1e3?Gi(t,r,s/1e3,e._getUIString("ScaleControl.Kilometers")):Gi(t,r,s,e._getUIString("ScaleControl.Meters"))}function Gi(e,t,n,r){var i,o,a,s=(i=n,(o=Math.pow(10,(""+Math.floor(i)).length-1))*(a=(a=i/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(a)));e.style.width=t*(s/n)+"px",e.innerHTML=s+"&nbsp;"+r}Vi.prototype.getDefaultPosition=function(){return"bottom-left"},Vi.prototype._onMove=function(){Hi(this._map,this._container,this.options)},Vi.prototype.onAdd=function(e){return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Vi.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Vi.prototype.setUnit=function(e){this.options.unit=e,Hi(this._map,this._container,this.options)};var Wi=function(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};Wi.prototype.onAdd=function(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Wi.prototype.onRemove=function(){n.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Wi.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},Wi.prototype._setupUI=function(){var t=this._fullscreenButton=n.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);n.create("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden",!0),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Wi.prototype._updateTitle=function(){var e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e},Wi.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Wi.prototype._isFullscreen=function(){return this._fullscreen},Wi.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Wi.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var qi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Zi=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Yi=function(t){function r(n){t.call(this),this.options=e.extend(Object.create(qi),n),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r,r.prototype.addTo=function(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},r.prototype.isOpen=function(){return!!this._map},r.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},r.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},r.prototype.getElement=function(){return this._container},r.prototype.setText=function(t){return this.setDOMContent(e.window.document.createTextNode(t))},r.prototype.setHTML=function(t){var n,r=e.window.document.createDocumentFragment(),i=e.window.document.createElement("body");for(i.innerHTML=t;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)},r.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},r.prototype.setMaxWidth=function(e){return this.options.maxWidth=e,this._update(),this},r.prototype.setDOMContent=function(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=n.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this},r.prototype.addClassName=function(e){this._container&&this._container.classList.add(e)},r.prototype.removeClassName=function(e){this._container&&this._container.classList.remove(e)},r.prototype.setOffset=function(e){return this.options.offset=e,this._update(),this},r.prototype.toggleClassName=function(e){if(this._container)return this._container.classList.toggle(e)},r.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},r.prototype._onMouseUp=function(e){this._update(e.point)},r.prototype._onMouseMove=function(e){this._update(e.point)},r.prototype._onDrag=function(e){this._update(e.point)},r.prototype._update=function(t){var r=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(e){return r._container.classList.add(e)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Pi(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||t)){var i=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat),o=this.options.anchor,a=function t(n){if(n){if("number"==typeof n){var r=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new e.Point(0,0),top:new e.Point(0,n),"top-left":new e.Point(r,r),"top-right":new e.Point(-r,r),bottom:new e.Point(0,-n),"bottom-left":new e.Point(r,-r),"bottom-right":new e.Point(-r,-r),left:new e.Point(n,0),right:new e.Point(-n,0)}}if(n instanceof e.Point||Array.isArray(n)){var i=e.Point.convert(n);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:e.Point.convert(n.center||[0,0]),top:e.Point.convert(n.top||[0,0]),"top-left":e.Point.convert(n["top-left"]||[0,0]),"top-right":e.Point.convert(n["top-right"]||[0,0]),bottom:e.Point.convert(n.bottom||[0,0]),"bottom-left":e.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(n["bottom-right"]||[0,0]),left:e.Point.convert(n.left||[0,0]),right:e.Point.convert(n.right||[0,0])}}return t(new e.Point(0,0))}(this.options.offset);if(!o){var s,u=this._container.offsetWidth,c=this._container.offsetHeight;s=i.y+a.bottom.y<c?["top"]:i.y>this._map.transform.height-c?["bottom"]:[],i.x<u/2?s.push("left"):i.x>this._map.transform.width-u/2&&s.push("right"),o=0===s.length?"bottom":s.join("-")}var l=i.add(a[o]).round();n.setTransform(this._container,Ii[o]+" translate("+l.x+"px,"+l.y+"px)"),Ri(this._container,o,"popup")}},r.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var e=this._container.querySelector(Zi);e&&e.focus()}},r.prototype._onClose=function(){this.remove()},r}(e.Evented),Xi={version:e.version,supported:t,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:Ai,NavigationControl:Ti,GeolocateControl:Bi,AttributionControl:bi,ScaleControl:Vi,FullscreenControl:Wi,Popup:Yi,Marker:Di,Style:Ht,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:function(){Fe().acquire(Re)},clearPrewarmedResources:function(){var e=De;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(Re),De=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return Le.workerCount},set workerCount(e){Le.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage:function(t){e.clearTileCache(t)},workerUrl:""};return Xi})),n}))},"4cb6":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiBindToService=t.getServiceIdentifierAsString=t.typeConstraint=t.namedConstraint=t.taggedConstraint=t.traverseAncerstors=t.decorate=t.id=t.MetadataReader=t.postConstruct=t.targetName=t.multiInject=t.unmanaged=t.optional=t.LazyServiceIdentifer=t.inject=t.named=t.tagged=t.injectable=t.ContainerModule=t.AsyncContainerModule=t.TargetTypeEnum=t.BindingTypeEnum=t.BindingScopeEnum=t.Container=t.METADATA_KEY=void 0;var r=n("xfSm");t.METADATA_KEY=r;var i=n("9Fde");Object.defineProperty(t,"Container",{enumerable:!0,get:function(){return i.Container}});var o=n("FV85");Object.defineProperty(t,"BindingScopeEnum",{enumerable:!0,get:function(){return o.BindingScopeEnum}}),Object.defineProperty(t,"BindingTypeEnum",{enumerable:!0,get:function(){return o.BindingTypeEnum}}),Object.defineProperty(t,"TargetTypeEnum",{enumerable:!0,get:function(){return o.TargetTypeEnum}});var a=n("dxzI");Object.defineProperty(t,"AsyncContainerModule",{enumerable:!0,get:function(){return a.AsyncContainerModule}}),Object.defineProperty(t,"ContainerModule",{enumerable:!0,get:function(){return a.ContainerModule}});var s=n("cZ5Q");Object.defineProperty(t,"injectable",{enumerable:!0,get:function(){return s.injectable}});var u=n("0gSV");Object.defineProperty(t,"tagged",{enumerable:!0,get:function(){return u.tagged}});var c=n("ZzCi");Object.defineProperty(t,"named",{enumerable:!0,get:function(){return c.named}});var l=n("Yk9n");Object.defineProperty(t,"inject",{enumerable:!0,get:function(){return l.inject}}),Object.defineProperty(t,"LazyServiceIdentifer",{enumerable:!0,get:function(){return l.LazyServiceIdentifer}});var f=n("jYx5");Object.defineProperty(t,"optional",{enumerable:!0,get:function(){return f.optional}});var p=n("n2J3");Object.defineProperty(t,"unmanaged",{enumerable:!0,get:function(){return p.unmanaged}});var h=n("jIg/");Object.defineProperty(t,"multiInject",{enumerable:!0,get:function(){return h.multiInject}});var d=n("oaX6");Object.defineProperty(t,"targetName",{enumerable:!0,get:function(){return d.targetName}});var v=n("Sk89");Object.defineProperty(t,"postConstruct",{enumerable:!0,get:function(){return v.postConstruct}});var m=n("wnjb");Object.defineProperty(t,"MetadataReader",{enumerable:!0,get:function(){return m.MetadataReader}});var g=n("d9O0");Object.defineProperty(t,"id",{enumerable:!0,get:function(){return g.id}});var y=n("Ztfv");Object.defineProperty(t,"decorate",{enumerable:!0,get:function(){return y.decorate}});var b=n("RR/i");Object.defineProperty(t,"traverseAncerstors",{enumerable:!0,get:function(){return b.traverseAncerstors}}),Object.defineProperty(t,"taggedConstraint",{enumerable:!0,get:function(){return b.taggedConstraint}}),Object.defineProperty(t,"namedConstraint",{enumerable:!0,get:function(){return b.namedConstraint}}),Object.defineProperty(t,"typeConstraint",{enumerable:!0,get:function(){return b.typeConstraint}});var _=n("ujMp");Object.defineProperty(t,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return _.getServiceIdentifierAsString}});var x=n("78VC");Object.defineProperty(t,"multiBindToService",{enumerable:!0,get:function(){return x.multiBindToService}})},"4i/N":function(e,t,n){"use strict";var r=n("VTBJ"),i=n("q1tI"),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},a=o,s=n("6VBw"),u=function(e,t){return i["createElement"](s["a"],Object(r["a"])(Object(r["a"])({},e),{},{ref:t,icon:a}))};u.displayName="CloseOutlined";t["a"]=i["forwardRef"](u)},"4kuk":function(e,t,n){var r=n("SfRM"),i=n("Hvzi"),o=n("u8Dt"),a=n("ekgI"),s=n("JSQU");function u(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype["delete"]=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,e.exports=u},"4l63":function(e,t,n){var r=n("I+eb"),i=n("wg0c");r({global:!0,forced:parseInt!=i},{parseInt:i})},"4mDm":function(e,t,n){"use strict";var r=n("/GqU"),i=n("RNIs"),o=n("P4y1"),a=n("afO8"),s=n("fdAy"),u="Array Iterator",c=a.set,l=a.getterFor(u);e.exports=s(Array,"Array",(function(e,t){c(this,{type:u,target:r(e),index:0,kind:t})}),(function(){var e=l(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},"4oU/":function(e,t,n){var r=n("2oRo"),i=r.isFinite;e.exports=Number.isFinite||function(e){return"number"==typeof e&&i(e)}},"4syw":function(e,t,n){var r=n("busE");e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},"55Ip":function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return x}));var r=n("Ty5D"),i=n("dI71"),o=n("q1tI"),a=n.n(o),s=n("YS25"),u=n("wx14"),c=n("zLVn"),l=n("9R94");a.a.Component;a.a.Component;var f=function(e,t){return"function"===typeof e?e(t):e},p=function(e,t){return"string"===typeof e?Object(s["c"])(e,null,null,t):e},h=function(e){return e},d=a.a.forwardRef;function v(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}"undefined"===typeof d&&(d=h);var m=d((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,o=Object(c["a"])(e,["innerRef","navigate","onClick"]),s=o.target,l=Object(u["a"])({},o,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||v(e)||(e.preventDefault(),r())}});return l.ref=h!==d&&t||n,a.a.createElement("a",l)}));var g=d((function(e,t){var n=e.component,i=void 0===n?m:n,o=e.replace,s=e.to,v=e.innerRef,g=Object(c["a"])(e,["component","replace","to","innerRef"]);return a.a.createElement(r["h"].Consumer,null,(function(e){e||Object(l["a"])(!1);var n=e.history,r=p(f(s,e.location),e.location),c=r?n.createHref(r):"",m=Object(u["a"])({},g,{href:c,navigate:function(){var t=f(s,e.location),r=o?n.replace:n.push;r(t)}});return h!==d?m.ref=t||v:m.innerRef=v,a.a.createElement(i,m)}))})),y=function(e){return e},b=a.a.forwardRef;function _(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}"undefined"===typeof b&&(b=y);var x=b((function(e,t){var n=e["aria-current"],i=void 0===n?"page":n,o=e.activeClassName,s=void 0===o?"active":o,h=e.activeStyle,d=e.className,v=e.exact,m=e.isActive,x=e.location,w=e.sensitive,O=e.strict,E=e.style,S=e.to,j=e.innerRef,A=Object(c["a"])(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return a.a.createElement(r["h"].Consumer,null,(function(e){e||Object(l["a"])(!1);var n=x||e.location,o=p(f(S,n),n),c=o.pathname,k=c&&c.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),C=k?Object(r["i"])(n.pathname,{path:k,exact:v,sensitive:w,strict:O}):null,T=!!(m?m(C,n):C),M=T?_(d,s):d,P=T?Object(u["a"])({},E,{},h):E,I=Object(u["a"])({"aria-current":T&&i||null,className:M,style:P,to:o},A);return y!==b?I.ref=t||j:I.innerRef=j,a.a.createElement(g,I)}))}))},5921:function(e,t,n){var r=n("I+eb"),i=n("P940");r({target:"Map",stat:!0},{of:i})},"5JV0":function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("WGBp"),s=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{join:function(e){var t=o(this),n=a(t),r=void 0===e?",":String(e),i=[];return s(n,i.push,i,!1,!0),i.join(r)}})},"5Tg+":function(e,t,n){var r=n("tiKp");t.f=r},"5Tg0":function(e,t,n){(function(e){var r=n("Kz5y"),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i,s=a?r.Buffer:void 0,u=s?s.allocUnsafe:void 0;function c(e,t){if(t)return e.slice();var n=e.length,r=u?u(n):new e.constructor(n);return e.copy(r),r}e.exports=c}).call(this,n("hOG+")(e))},"5Yz+":function(e,t,n){"use strict";var r=n("/GqU"),i=n("ppGB"),o=n("UMSQ"),a=n("pkCn"),s=n("rkAj"),u=Math.min,c=[].lastIndexOf,l=!!c&&1/[1].lastIndexOf(1,-0)<0,f=a("lastIndexOf"),p=s("indexOf",{ACCESSORS:!0,1:0}),h=l||!f||!p;e.exports=h?function(e){if(l)return c.apply(this,arguments)||0;var t=r(this),n=o(t.length),a=n-1;for(arguments.length>1&&(a=u(a,i(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in t&&t[a]===e)return a||0;return-1}:c},"5Z9U":function(e,t,n){"use strict";t["a"]=function(){if("undefined"===typeof navigator||"undefined"===typeof window)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null===e||void 0===e?void 0:e.substr(0,4))}},"5mdu":function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},"5r1n":function(e,t,n){var r=n("I+eb"),i=n("eDxR"),o=n("glrk"),a=i.get,s=i.toKey;r({target:"Reflect",stat:!0},{getOwnMetadata:function(e,t){var n=arguments.length<3?void 0:s(arguments[2]);return a(e,o(t),n)}})},"5s+n":function(e,t,n){"use strict";var r,i,o,a,s=n("I+eb"),u=n("xDBR"),c=n("2oRo"),l=n("0GbY"),f=n("/qmn"),p=n("busE"),h=n("4syw"),d=n("1E5z"),v=n("JiZb"),m=n("hh1v"),g=n("HAuM"),y=n("GarU"),b=n("xrYK"),_=n("iSVu"),x=n("ImZN"),w=n("HH4o"),O=n("SEBh"),E=n("LPSS").set,S=n("tXUg"),j=n("zfnd"),A=n("RN6c"),k=n("8GlL"),C=n("5mdu"),T=n("afO8"),M=n("lMq5"),P=n("tiKp"),I=n("LQDL"),R=P("species"),L="Promise",D=T.get,N=T.set,F=T.getterFor(L),z=f,B=c.TypeError,U=c.document,V=c.process,H=l("fetch"),G=k.f,W=G,q="process"==b(V),Z=!!(U&&U.createEvent&&c.dispatchEvent),Y="unhandledrejection",X="rejectionhandled",K=0,$=1,Q=2,J=1,ee=2,te=M(L,(function(){var e=_(z)!==String(z);if(!e){if(66===I)return!0;if(!q&&"function"!=typeof PromiseRejectionEvent)return!0}if(u&&!z.prototype["finally"])return!0;if(I>=51&&/native code/.test(z))return!1;var t=z.resolve(1),n=function(e){e((function(){}),(function(){}))},r=t.constructor={};return r[R]=n,!(t.then((function(){}))instanceof n)})),ne=te||!w((function(e){z.all(e)["catch"]((function(){}))})),re=function(e){var t;return!(!m(e)||"function"!=typeof(t=e.then))&&t},ie=function(e,t,n){if(!t.notified){t.notified=!0;var r=t.reactions;S((function(){var i=t.value,o=t.state==$,a=0;while(r.length>a){var s,u,c,l=r[a++],f=o?l.ok:l.fail,p=l.resolve,h=l.reject,d=l.domain;try{f?(o||(t.rejection===ee&&ue(e,t),t.rejection=J),!0===f?s=i:(d&&d.enter(),s=f(i),d&&(d.exit(),c=!0)),s===l.promise?h(B("Promise-chain cycle")):(u=re(s))?u.call(s,p,h):p(s)):h(i)}catch(v){d&&!c&&d.exit(),h(v)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&ae(e,t)}))}},oe=function(e,t,n){var r,i;Z?(r=U.createEvent("Event"),r.promise=t,r.reason=n,r.initEvent(e,!1,!0),c.dispatchEvent(r)):r={promise:t,reason:n},(i=c["on"+e])?i(r):e===Y&&A("Unhandled promise rejection",n)},ae=function(e,t){E.call(c,(function(){var n,r=t.value,i=se(t);if(i&&(n=C((function(){q?V.emit("unhandledRejection",r,e):oe(Y,e,r)})),t.rejection=q||se(t)?ee:J,n.error))throw n.value}))},se=function(e){return e.rejection!==J&&!e.parent},ue=function(e,t){E.call(c,(function(){q?V.emit("rejectionHandled",e):oe(X,e,t.value)}))},ce=function(e,t,n,r){return function(i){e(t,n,i,r)}},le=function(e,t,n,r){t.done||(t.done=!0,r&&(t=r),t.value=n,t.state=Q,ie(e,t,!0))},fe=function(e,t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(e===n)throw B("Promise can't be resolved itself");var i=re(n);i?S((function(){var r={done:!1};try{i.call(n,ce(fe,e,r,t),ce(le,e,r,t))}catch(o){le(e,r,o,t)}})):(t.value=n,t.state=$,ie(e,t,!1))}catch(o){le(e,{done:!1},o,t)}}};te&&(z=function(e){y(this,z,L),g(e),r.call(this);var t=D(this);try{e(ce(fe,this,t),ce(le,this,t))}catch(n){le(this,t,n)}},r=function(e){N(this,{type:L,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:K,value:void 0})},r.prototype=h(z.prototype,{then:function(e,t){var n=F(this),r=G(O(this,z));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=q?V.domain:void 0,n.parent=!0,n.reactions.push(r),n.state!=K&&ie(this,n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r,t=D(e);this.promise=e,this.resolve=ce(fe,e,t),this.reject=ce(le,e,t)},k.f=G=function(e){return e===z||e===o?new i(e):W(e)},u||"function"!=typeof f||(a=f.prototype.then,p(f.prototype,"then",(function(e,t){var n=this;return new z((function(e,t){a.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof H&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return j(z,H.apply(c,arguments))}}))),s({global:!0,wrap:!0,forced:te},{Promise:z}),d(z,L,!1,!0),v(L),o=l(L),s({target:L,stat:!0,forced:te},{reject:function(e){var t=G(this);return t.reject.call(void 0,e),t.promise}}),s({target:L,stat:!0,forced:u||te},{resolve:function(e){return j(u&&this===o?z:this,e)}}),s({target:L,stat:!0,forced:ne},{all:function(e){var t=this,n=G(t),r=n.resolve,i=n.reject,o=C((function(){var n=g(t.resolve),o=[],a=0,s=1;x(e,(function(e){var u=a++,c=!1;o.push(void 0),s++,n.call(t,e).then((function(e){c||(c=!0,o[u]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=G(t),r=n.reject,i=C((function(){var i=g(t.resolve);x(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},"5wUe":function(e,t,n){var r=n("Q9SF"),i=n("MIOZ"),o=n("mGKP"),a=n("h0XC");function s(e,t){return r(e)||i(e,t)||o(e,t)||a()}e.exports=s,e.exports.__esModule=!0,e.exports["default"]=e.exports},"5xtp":function(e,t,n){"use strict";var r=n("I+eb"),i=n("g6v/"),o=n("6x0u"),a=n("ewvW"),s=n("HAuM"),u=n("m/L8");i&&r({target:"Object",proto:!0,forced:o},{__defineSetter__:function(e,t){u.f(a(this),e,{set:s(t),enumerable:!0,configurable:!0})}})},"66V8":function(e,t,n){"use strict";var r=n("I+eb"),i=n("g6v/"),o=n("4WOD"),a=n("0rvr"),s=n("fHMY"),u=n("m/L8"),c=n("XGwC"),l=n("ImZN"),f=n("kRJp"),p=n("afO8"),h=p.set,d=p.getterFor("AggregateError"),v=function(e,t){var n=this;if(!(n instanceof v))return new v(e,t);a&&(n=a(new Error(t),o(n)));var r=[];return l(e,r.push,r),i?h(n,{errors:r,type:"AggregateError"}):n.errors=r,void 0!==t&&f(n,"message",String(t)),n};v.prototype=s(Error.prototype,{constructor:c(5,v),message:c(5,""),name:c(5,"AggregateError")}),i&&u.f(v.prototype,"errors",{get:function(){return d(this).errors},configurable:!0}),r({global:!0},{AggregateError:v})},"67WC":function(e,t,n){"use strict";var r,i=n("qYE9"),o=n("g6v/"),a=n("2oRo"),s=n("hh1v"),u=n("UTVS"),c=n("9d/t"),l=n("kRJp"),f=n("busE"),p=n("m/L8").f,h=n("4WOD"),d=n("0rvr"),v=n("tiKp"),m=n("kOOl"),g=a.Int8Array,y=g&&g.prototype,b=a.Uint8ClampedArray,_=b&&b.prototype,x=g&&h(g),w=y&&h(y),O=Object.prototype,E=O.isPrototypeOf,S=v("toStringTag"),j=m("TYPED_ARRAY_TAG"),A=i&&!!d&&"Opera"!==c(a.opera),k=!1,C={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},T=function(e){var t=c(e);return"DataView"===t||u(C,t)},M=function(e){return s(e)&&u(C,c(e))},P=function(e){if(M(e))return e;throw TypeError("Target is not a typed array")},I=function(e){if(d){if(E.call(x,e))return e}else for(var t in C)if(u(C,r)){var n=a[t];if(n&&(e===n||E.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},R=function(e,t,n){if(o){if(n)for(var r in C){var i=a[r];i&&u(i.prototype,e)&&delete i.prototype[e]}w[e]&&!n||f(w,e,n?t:A&&y[e]||t)}},L=function(e,t,n){var r,i;if(o){if(d){if(n)for(r in C)i=a[r],i&&u(i,e)&&delete i[e];if(x[e]&&!n)return;try{return f(x,e,n?t:A&&g[e]||t)}catch(s){}}for(r in C)i=a[r],!i||i[e]&&!n||f(i,e,t)}};for(r in C)a[r]||(A=!1);if((!A||"function"!=typeof x||x===Function.prototype)&&(x=function(){throw TypeError("Incorrect invocation")},A))for(r in C)a[r]&&d(a[r],x);if((!A||!w||w===O)&&(w=x.prototype,A))for(r in C)a[r]&&d(a[r].prototype,w);if(A&&h(_)!==w&&d(_,w),o&&!u(w,S))for(r in k=!0,p(w,S,{get:function(){return s(this)?this[j]:void 0}}),C)a[r]&&l(a[r],j,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:A,TYPED_ARRAY_TAG:k&&j,aTypedArray:P,aTypedArrayConstructor:I,exportTypedArrayMethod:R,exportTypedArrayStaticMethod:L,isView:T,isTypedArray:M,TypedArray:x,TypedArrayPrototype:w}},"6AGu":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingInSyntax=void 0;var r=n("FV85"),i=n("LKzl"),o=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=r.BindingScopeEnum.Request,new i.BindingWhenOnSyntax(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=r.BindingScopeEnum.Singleton,new i.BindingWhenOnSyntax(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=r.BindingScopeEnum.Transient,new i.BindingWhenOnSyntax(this._binding)},e}();t.BindingInSyntax=o},"6JNq":function(e,t,n){var r=n("UTVS"),i=n("Vu81"),o=n("Bs8V"),a=n("m/L8");e.exports=function(e,t){for(var n=i(t),s=a.f,u=o.f,c=0;c<n.length;c++){var l=n[c];r(e,l)||s(e,l,u(t,l))}}},"6JX1":function(e,t,n){(function(e,r){r(t,n("q1tI"))})(0,(function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t["default"]=e,Object.freeze(t)}var r=n(t);function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}var a=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),e.length!==t.length||e.some((function(e,n){return!Object.is(e,t[n])}))},s={error:null},u=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,t.state=s,t.resetErrorBoundary=function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];null==t.props.onReset||(e=t.props).onReset.apply(e,r),t.reset()},t}o(t,e),t.getDerivedStateFromError=function(e){return{error:e}};var n=t.prototype;return n.reset=function(){this.setState(s)},n.componentDidCatch=function(e,t){var n,r;null==(n=(r=this.props).onError)||n.call(r,e,t)},n.componentDidUpdate=function(e,t){var n,r,i=this.state.error,o=this.props.resetKeys;null!==i&&null!==t.error&&a(e.resetKeys,o)&&(null==(n=(r=this.props).onResetKeysChange)||n.call(r,e.resetKeys,o),this.reset())},n.render=function(){var e=this.state.error,t=this.props,n=t.fallbackRender,i=t.FallbackComponent,o=t.fallback;if(null!==e){var a={error:e,resetErrorBoundary:this.resetErrorBoundary};if(r.isValidElement(o))return o;if("function"===typeof n)return n(a);if(i)return r.createElement(i,a);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},t}(r.Component);function c(e,t){var n=function(n){return r.createElement(u,t,r.createElement(e,n))},i=e.displayName||e.name||"Unknown";return n.displayName="withErrorBoundary("+i+")",n}function l(e){var t=r.useState(null),n=t[0],i=t[1];if(null!=e)throw e;if(null!=n)throw n;return i}e.ErrorBoundary=u,e.useErrorHandler=l,e.withErrorBoundary=c,Object.defineProperty(e,"__esModule",{value:!0})}))},"6LWA":function(e,t,n){var r=n("xrYK");e.exports=Array.isArray||function(e){return"Array"==r(e)}},"6V7H":function(e,t,n){var r=n("dG/n");r("patternMatch")},"6VBw":function(e,t,n){"use strict";var r=n("VTBJ"),i=n("ODXe"),o=n("rePB"),a=n("Ff2n"),s=n("q1tI"),u=n.n(s),c=n("TSYQ"),l=n.n(c),f=n("Pw59"),p=n("U8pU"),h=n("AJpP"),d=n("Kwbf"),v=n("BU3w");function m(e,t){Object(d["a"])(e,"[@ant-design/icons] ".concat(t))}function g(e){return"object"===Object(p["a"])(e)&&"string"===typeof e.name&&"string"===typeof e.theme&&("object"===Object(p["a"])(e.icon)||"function"===typeof e.icon)}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];switch(n){case"class":t.className=r,delete t.class;break;default:t[n]=r}return t}),{})}function b(e,t,n){return n?u.a.createElement(e.tag,Object(r["a"])(Object(r["a"])({key:t},y(e.attrs)),n),(e.children||[]).map((function(n,r){return b(n,"".concat(t,"-").concat(e.tag,"-").concat(r))}))):u.a.createElement(e.tag,Object(r["a"])({key:t},y(e.attrs)),(e.children||[]).map((function(n,r){return b(n,"".concat(t,"-").concat(e.tag,"-").concat(r))})))}function _(e){return Object(h["a"])(e)[0]}function x(e){return e?Array.isArray(e)?e:[e]:[]}var w="\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=Object(s["useContext"])(f["a"]),n=t.csp;Object(s["useEffect"])((function(){Object(v["a"])(e,"@ant-design-icons",{prepend:!0,csp:n})}),[])},E=["icon","className","onClick","style","primaryColor","secondaryColor"],S={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function j(e){var t=e.primaryColor,n=e.secondaryColor;S.primaryColor=t,S.secondaryColor=n||_(t),S.calculated=!!n}function A(){return Object(r["a"])({},S)}var k=function(e){var t=e.icon,n=e.className,i=e.onClick,o=e.style,s=e.primaryColor,u=e.secondaryColor,c=Object(a["a"])(e,E),l=S;if(s&&(l={primaryColor:s,secondaryColor:u||_(s)}),O(),m(g(t),"icon should be icon definiton, but got ".concat(t)),!g(t))return null;var f=t;return f&&"function"===typeof f.icon&&(f=Object(r["a"])(Object(r["a"])({},f),{},{icon:f.icon(l.primaryColor,l.secondaryColor)})),b(f.icon,"svg-".concat(f.name),Object(r["a"])({className:n,onClick:i,style:o,"data-icon":f.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},c))};k.displayName="IconReact",k.getTwoToneColors=A,k.setTwoToneColors=j;var C=k;function T(e){var t=x(e),n=Object(i["a"])(t,2),r=n[0],o=n[1];return C.setTwoToneColors({primaryColor:r,secondaryColor:o})}function M(){var e=C.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var P=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];T("#1890ff");var I=s["forwardRef"]((function(e,t){var n,u=e.className,c=e.icon,p=e.spin,h=e.rotate,d=e.tabIndex,v=e.onClick,m=e.twoToneColor,g=Object(a["a"])(e,P),y=s["useContext"](f["a"]),b=y.prefixCls,_=void 0===b?"anticon":b,w=y.rootClassName,O=l()(w,_,(n={},Object(o["a"])(n,"".concat(_,"-").concat(c.name),!!c.name),Object(o["a"])(n,"".concat(_,"-spin"),!!p||"loading"===c.name),n),u),E=d;void 0===E&&v&&(E=-1);var S=h?{msTransform:"rotate(".concat(h,"deg)"),transform:"rotate(".concat(h,"deg)")}:void 0,j=x(m),A=Object(i["a"])(j,2),k=A[0],T=A[1];return s["createElement"]("span",Object(r["a"])(Object(r["a"])({role:"img","aria-label":c.name},g),{},{ref:t,tabIndex:E,onClick:v,className:O}),s["createElement"](C,{icon:c,primaryColor:k,secondaryColor:T,style:S}))}));I.displayName="AntdIcon",I.getTwoToneColor=M,I.setTwoToneColor=T;t["a"]=I},"6VoE":function(e,t,n){var r=n("tiKp"),i=n("P4y1"),o=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},"6asN":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=n("LtsZ"),i=n("zqmC"),o=(0,i.LinkWrapper)(r.NavLink);t["default"]=o},"6cGi":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("ODXe"),i=n("mBDr"),o=n("TNol"),a=n("dm2S");function s(e){return void 0!==e}function u(e,t){var n=t||{},u=n.defaultValue,c=n.value,l=n.onChange,f=n.postState,p=Object(a["a"])((function(){return s(c)?c:s(u)?"function"===typeof u?u():u:"function"===typeof e?e():e})),h=Object(r["a"])(p,2),d=h[0],v=h[1],m=void 0!==c?c:d,g=f?f(m):m,y=Object(i["a"])(l),b=Object(a["a"])([m]),_=Object(r["a"])(b,2),x=_[0],w=_[1];Object(o["b"])((function(){var e=x[0];d!==e&&y(d,e)}),[x]),Object(o["b"])((function(){s(c)||v(c)}),[c]);var O=Object(i["a"])((function(e,t){v(e,t),w([m],t)}));return[g,O]}},"6sVZ":function(e,t){var n=Object.prototype;function r(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||n;return e===r}e.exports=r},"6x0u":function(e,t,n){"use strict";var r=n("xDBR"),i=n("2oRo"),o=n("0Dky");e.exports=r||!o((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete i[e]}))},"6xEa":function(e,t,n){var r,i=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function i(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var o={compressToBase64:function(e){if(null==e)return"";var n=o._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:o._decompress(e.length,32,(function(n){return i(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":o._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=o.compress(e),n=new Uint8Array(2*t.length),r=0,i=t.length;r<i;r++){var a=t.charCodeAt(r);n[2*r]=a>>>8,n[2*r+1]=a%256}return n},decompressFromUint8Array:function(t){if(null===t||void 0===t)return o.decompress(t);for(var n=new Array(t.length/2),r=0,i=n.length;r<i;r++)n[r]=256*t[2*r]+t[2*r+1];var a=[];return n.forEach((function(t){a.push(e(t))})),o.decompress(a.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":o._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),o._decompress(e.length,32,(function(t){return i(n,e.charAt(t))})))},compress:function(t){return o._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var r,i,o,a={},s={},u="",c="",l="",f=2,p=3,h=2,d=[],v=0,m=0;for(o=0;o<e.length;o+=1)if(u=e.charAt(o),Object.prototype.hasOwnProperty.call(a,u)||(a[u]=p++,s[u]=!0),c=l+u,Object.prototype.hasOwnProperty.call(a,c))l=c;else{if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(r=0;r<h;r++)v<<=1,m==t-1?(m=0,d.push(n(v)),v=0):m++;for(i=l.charCodeAt(0),r=0;r<8;r++)v=v<<1|1&i,m==t-1?(m=0,d.push(n(v)),v=0):m++,i>>=1}else{for(i=1,r=0;r<h;r++)v=v<<1|i,m==t-1?(m=0,d.push(n(v)),v=0):m++,i=0;for(i=l.charCodeAt(0),r=0;r<16;r++)v=v<<1|1&i,m==t-1?(m=0,d.push(n(v)),v=0):m++,i>>=1}f--,0==f&&(f=Math.pow(2,h),h++),delete s[l]}else for(i=a[l],r=0;r<h;r++)v=v<<1|1&i,m==t-1?(m=0,d.push(n(v)),v=0):m++,i>>=1;f--,0==f&&(f=Math.pow(2,h),h++),a[c]=p++,l=String(u)}if(""!==l){if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(r=0;r<h;r++)v<<=1,m==t-1?(m=0,d.push(n(v)),v=0):m++;for(i=l.charCodeAt(0),r=0;r<8;r++)v=v<<1|1&i,m==t-1?(m=0,d.push(n(v)),v=0):m++,i>>=1}else{for(i=1,r=0;r<h;r++)v=v<<1|i,m==t-1?(m=0,d.push(n(v)),v=0):m++,i=0;for(i=l.charCodeAt(0),r=0;r<16;r++)v=v<<1|1&i,m==t-1?(m=0,d.push(n(v)),v=0):m++,i>>=1}f--,0==f&&(f=Math.pow(2,h),h++),delete s[l]}else for(i=a[l],r=0;r<h;r++)v=v<<1|1&i,m==t-1?(m=0,d.push(n(v)),v=0):m++,i>>=1;f--,0==f&&(f=Math.pow(2,h),h++)}for(i=2,r=0;r<h;r++)v=v<<1|1&i,m==t-1?(m=0,d.push(n(v)),v=0):m++,i>>=1;while(1){if(v<<=1,m==t-1){d.push(n(v));break}m++}return d.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,r){var i,o,a,s,u,c,l,f=[],p=4,h=4,d=3,v="",m=[],g={val:r(0),position:n,index:1};for(i=0;i<3;i+=1)f[i]=i;a=0,u=Math.pow(2,2),c=1;while(c!=u)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;switch(a){case 0:a=0,u=Math.pow(2,8),c=1;while(c!=u)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;l=e(a);break;case 1:a=0,u=Math.pow(2,16),c=1;while(c!=u)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;l=e(a);break;case 2:return""}f[3]=l,o=l,m.push(l);while(1){if(g.index>t)return"";a=0,u=Math.pow(2,d),c=1;while(c!=u)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;switch(l=a){case 0:a=0,u=Math.pow(2,8),c=1;while(c!=u)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;f[h++]=e(a),l=h-1,p--;break;case 1:a=0,u=Math.pow(2,16),c=1;while(c!=u)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;f[h++]=e(a),l=h-1,p--;break;case 2:return m.join("")}if(0==p&&(p=Math.pow(2,d),d++),f[l])v=f[l];else{if(l!==h)return null;v=o+o.charAt(0)}m.push(v),f[h++]=o+v.charAt(0),p--,o=v,0==p&&(p=Math.pow(2,d),d++)}}};return o}();r=function(){return i}.call(t,n,t,e),void 0===r||(e.exports=r)},"7+kd":function(e,t,n){var r=n("dG/n");r("isConcatSpreadable")},"7+zs":function(e,t,n){var r=n("kRJp"),i=n("UesL"),o=n("tiKp"),a=o("toPrimitive"),s=Date.prototype;a in s||r(s,a,i)},"702D":function(e,t,n){var r=n("I+eb"),i=n("qY7S");r({target:"WeakMap",stat:!0},{from:i})},"77Zs":function(e,t,n){var r=n("Xi7e");function i(){this.__data__=new r,this.size=0}e.exports=i},"78VC":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiBindToService=void 0;var r=function(e){return function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach((function(n){return e.bind(n).toService(t)}))}}};t.multiBindToService=r},"7GkX":function(e,t,n){var r=n("b80T"),i=n("A90E"),o=n("MMmD");function a(e){return o(e)?r(e):i(e)}e.exports=a},"7Ix3":function(e,t){function n(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}e.exports=n},"7JcK":function(e,t,n){"use strict";var r=n("67WC"),i=n("iqeF"),o=r.aTypedArrayConstructor,a=r.exportTypedArrayStaticMethod;a("of",(function(){var e=0,t=arguments.length,n=new(o(this))(t);while(t>e)n[e]=arguments[e++];return n}),i)},"7fqy":function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}e.exports=n},"7sf/":function(e,t,n){"use strict";function r(){var e=n("q1tI");return r=function(){return e},e}function i(){var e=o(n("6xEa"));return i=function(){return e},e}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return f(e)||l(e,t)||u(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function f(e){if(Array.isArray(e))return e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var p={"zh-CN":"https://www.typescriptlang.org/zh/play","en-US":"https://www.typescriptlang.org/play"},h=function(e,t){var n=function(){var e=/^zh|cn$/.test(arguments.length<=0?void 0:arguments[0])?p["zh-CN"]:p["en-US"];return"".concat(e,"?skipLibCheck=true&jsx=1#code/").concat(i()["default"].compressToEncodedURIComponent(arguments.length<=1?void 0:arguments[1]))},o=(0,r().useState)(n(e,t)),s=a(o,2),u=s[0],c=s[1];return(0,r().useEffect)((function(){c(n(e,t))}),[e,t]),u};t["default"]=h},"7ueG":function(e,t,n){"use strict";var r=n("I+eb"),i=n("WKiH").start,o=n("yNLB"),a=o("trimStart"),s=a?function(){return i(this)}:"".trimStart;r({target:"String",proto:!0,forced:a},{trimStart:s,trimLeft:s})},"8+s/":function(e,t,n){"use strict";function r(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}var i=n("q1tI"),o=r(i);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var u=!("undefined"===typeof window||!window.document||!window.document.createElement);function c(e,t,n){if("function"!==typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!==typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if("undefined"!==typeof n&&"function"!==typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");function r(e){return e.displayName||e.name||"Component"}return function(c){if("function"!==typeof c)throw new Error("Expected WrappedComponent to be a React component.");var l,f=[];function p(){l=e(f.map((function(e){return e.props}))),h.canUseDOM?t(l):n&&(l=n(l))}var h=function(e){function t(){return e.apply(this,arguments)||this}s(t,e),t.peek=function(){return l},t.rewind=function(){if(t.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=l;return l=void 0,f=[],e};var n=t.prototype;return n.UNSAFE_componentWillMount=function(){f.push(this),p()},n.componentDidUpdate=function(){p()},n.componentWillUnmount=function(){var e=f.indexOf(this);f.splice(e,1),p()},n.render=function(){return o.createElement(c,this.props)},t}(i.PureComponent);return a(h,"displayName","SideEffect("+r(c)+")"),a(h,"canUseDOM",u),h}}e.exports=c},"85Yc":function(e,t,n){"use strict";n.d(t,"b",(function(){return Ee})),n.d(t,"a",(function(){return b}));var r=n("q1tI"),i=n("wx14"),o=n("Ff2n"),a=n("rePB"),s=n("VTBJ"),u=n("KQm4"),c=n("1OyB"),l=n("vuIU"),f=n("JX7q"),p=n("Ji7U"),h=n("LK+K"),d=n("Zm9Q"),v=n("Kwbf"),m="RC_FORM_INTERNAL_HOOKS",g=function(){Object(v["a"])(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},y=r["createContext"]({getFieldValue:g,getFieldsValue:g,getFieldError:g,getFieldWarning:g,getFieldsError:g,isFieldsTouched:g,isFieldTouched:g,isFieldValidating:g,isFieldsValidating:g,resetFields:g,setFields:g,setFieldValue:g,setFieldsValue:g,validateFields:g,submit:g,getInternalHooks:function(){return g(),{dispatch:g,initEntityValue:g,registerField:g,useSubscribe:g,setInitialValues:g,destroyForm:g,setCallbacks:g,registerWatch:g,getFields:g,setValidateMessages:g,setPreserve:g,getInitialValue:g}}}),b=y;function _(e){return void 0===e||null===e?[]:Array.isArray(e)?e:[e]}var x=n("x+uP"),w=n("HaE+"),O=n("KpVd"),E="'${name}' is not a valid ${type}",S={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:E,method:E,array:E,object:E,number:E,date:E,boolean:E,integer:E,float:E,regexp:E,email:E,url:E,hex:E},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},j=n("U8pU");function A(e,t){for(var n=e,r=0;r<t.length;r+=1){if(null===n||void 0===n)return;n=n[t[r]]}return n}var k=n("T5bk");function C(e,t,n,r){if(!t.length)return n;var i,o=Object(k["a"])(t),a=o[0],c=o.slice(1);return i=e||"number"!==typeof a?Array.isArray(e)?Object(u["a"])(e):Object(s["a"])({},e):[],r&&void 0===n&&1===c.length?delete i[a][c[0]]:i[a]=C(i[a],c,n,r),i}function T(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.length&&r&&void 0===n&&!A(e,t.slice(0,-1))?e:C(e,t,n,r)}function M(e){return Array.isArray(e)?I(e):"object"===Object(j["a"])(e)&&null!==e?P(e):e}function P(e){if(Object.getPrototypeOf(e)===Object.prototype){var t={};for(var n in e)t[n]=M(e[n]);return t}return e}function I(e){return e.map((function(e){return M(e)}))}var R=M;function L(e){return _(e)}function D(e,t){var n=A(e,t);return n}function N(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=T(e,t,n,r);return i}function F(e,t){var n={};return t.forEach((function(t){var r=D(e,t);n=N(n,t,r)})),n}function z(e,t){return e&&e.some((function(e){return H(e,t)}))}function B(e){return"object"===Object(j["a"])(e)&&null!==e&&Object.getPrototypeOf(e)===Object.prototype}function U(e,t){var n=Array.isArray(e)?Object(u["a"])(e):Object(s["a"])({},e);return t?(Object.keys(t).forEach((function(e){var r=n[e],i=t[e],o=B(r)&&B(i);n[e]=o?U(r,i||{}):R(i)})),n):n}function V(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(e,t){return U(e,t)}),e)}function H(e,t){return!(!e||!t||e.length!==t.length)&&e.every((function(e,n){return t[n]===e}))}function G(e,t){if(e===t)return!0;if(!e&&t||e&&!t)return!1;if(!e||!t||"object"!==Object(j["a"])(e)||"object"!==Object(j["a"])(t))return!1;var n=Object.keys(e),r=Object.keys(t),i=new Set([].concat(n,r));return Object(u["a"])(i).every((function(n){var r=e[n],i=t[n];return"function"===typeof r&&"function"===typeof i||r===i}))}function W(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&"object"===Object(j["a"])(t.target)&&e in t.target?t.target[e]:t}function q(e,t,n){var r=e.length;if(t<0||t>=r||n<0||n>=r)return e;var i=e[t],o=t-n;return o>0?[].concat(Object(u["a"])(e.slice(0,n)),[i],Object(u["a"])(e.slice(n,t)),Object(u["a"])(e.slice(t+1,r))):o<0?[].concat(Object(u["a"])(e.slice(0,t)),Object(u["a"])(e.slice(t+1,n+1)),[i],Object(u["a"])(e.slice(n+1,r))):e}var Z=O["a"];function Y(e,t){return e.replace(/\$\{\w+\}/g,(function(e){var n=e.slice(2,-1);return t[n]}))}var X="CODE_LOGIC_ERROR";function K(e,t,n,r,i){return $.apply(this,arguments)}function $(){return $=Object(w["a"])(Object(x["a"])().mark((function e(t,n,i,o,c){var l,f,p,h,d,v,m,g,y;return Object(x["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l=Object(s["a"])({},i),delete l.ruleIndex,l.validator&&(f=l.validator,l.validator=function(){try{return f.apply(void 0,arguments)}catch(e){return console.error(e),Promise.reject(X)}}),p=null,l&&"array"===l.type&&l.defaultField&&(p=l.defaultField,delete l.defaultField),h=new Z(Object(a["a"])({},t,[l])),d=V({},S,o.validateMessages),h.messages(d),v=[],e.prev=9,e.next=12,Promise.resolve(h.validate(Object(a["a"])({},t,n),Object(s["a"])({},o)));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](9),e.t0.errors&&(v=e.t0.errors.map((function(e,t){var n=e.message,i=n===X?d["default"]:n;return r["isValidElement"](i)?r["cloneElement"](i,{key:"error_".concat(t)}):i})));case 17:if(v.length||!p){e.next=22;break}return e.next=20,Promise.all(n.map((function(e,n){return K("".concat(t,".").concat(n),e,p,o,c)})));case 20:return m=e.sent,e.abrupt("return",m.reduce((function(e,t){return[].concat(Object(u["a"])(e),Object(u["a"])(t))}),[]));case 22:return g=Object(s["a"])(Object(s["a"])({},i),{},{name:t,enum:(i["enum"]||[]).join(", ")},c),y=v.map((function(e){return"string"===typeof e?Y(e,g):e})),e.abrupt("return",y);case 25:case"end":return e.stop()}}),e,null,[[9,14]])}))),$.apply(this,arguments)}function Q(e,t,n,r,i,o){var a,u=e.join("."),c=n.map((function(e,t){var n=e.validator,r=Object(s["a"])(Object(s["a"])({},e),{},{ruleIndex:t});return n&&(r.validator=function(e,t,r){var i=!1,o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Promise.resolve().then((function(){Object(v["a"])(!i,"Your validator function has already return a promise. `callback` will be ignored."),i||r.apply(void 0,t)}))},a=n(e,t,o);i=a&&"function"===typeof a.then&&"function"===typeof a["catch"],Object(v["a"])(i,"`callback` is deprecated. Please return a promise instead."),i&&a.then((function(){r()}))["catch"]((function(e){r(e||" ")}))}),r})).sort((function(e,t){var n=e.warningOnly,r=e.ruleIndex,i=t.warningOnly,o=t.ruleIndex;return!!n===!!i?r-o:n?1:-1}));if(!0===i)a=new Promise(function(){var e=Object(w["a"])(Object(x["a"])().mark((function e(n,i){var a,s,l;return Object(x["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<c.length)){e.next=12;break}return s=c[a],e.next=5,K(u,t,s,r,o);case 5:if(l=e.sent,!l.length){e.next=9;break}return i([{errors:l,rule:s}]),e.abrupt("return");case 9:a+=1,e.next=1;break;case 12:n([]);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());else{var l=c.map((function(e){return K(u,t,e,r,o).then((function(t){return{errors:t,rule:e}}))}));a=(i?te(l):J(l)).then((function(e){return Promise.reject(e)}))}return a["catch"]((function(e){return e})),a}function J(e){return ee.apply(this,arguments)}function ee(){return ee=Object(w["a"])(Object(x["a"])().mark((function e(t){return Object(x["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t).then((function(e){var t,n=(t=[]).concat.apply(t,Object(u["a"])(e));return n})));case 1:case"end":return e.stop()}}),e)}))),ee.apply(this,arguments)}function te(e){return ne.apply(this,arguments)}function ne(){return ne=Object(w["a"])(Object(x["a"])().mark((function e(t){var n;return Object(x["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=0,e.abrupt("return",new Promise((function(e){t.forEach((function(r){r.then((function(r){r.errors.length&&e([r]),n+=1,n===t.length&&e([])}))}))})));case 2:case"end":return e.stop()}}),e)}))),ne.apply(this,arguments)}var re=["name"],ie=[];function oe(e,t,n,r,i,o){return"function"===typeof e?e(t,n,"source"in o?{source:o.source}:{}):r!==i}var ae=function(e){Object(p["a"])(n,e);var t=Object(h["a"])(n);function n(e){var i;if(Object(c["a"])(this,n),i=t.call(this,e),i.state={resetCount:0},i.cancelRegisterFunc=null,i.mounted=!1,i.touched=!1,i.dirty=!1,i.validatePromise=null,i.prevValidating=void 0,i.errors=ie,i.warnings=ie,i.cancelRegister=function(){var e=i.props,t=e.preserve,n=e.isListField,r=e.name;i.cancelRegisterFunc&&i.cancelRegisterFunc(n,t,L(r)),i.cancelRegisterFunc=null},i.getNamePath=function(){var e=i.props,t=e.name,n=e.fieldContext,r=n.prefixName,o=void 0===r?[]:r;return void 0!==t?[].concat(Object(u["a"])(o),Object(u["a"])(t)):[]},i.getRules=function(){var e=i.props,t=e.rules,n=void 0===t?[]:t,r=e.fieldContext;return n.map((function(e){return"function"===typeof e?e(r):e}))},i.refresh=function(){i.mounted&&i.setState((function(e){var t=e.resetCount;return{resetCount:t+1}}))},i.triggerMetaEvent=function(e){var t=i.props.onMetaChange;null===t||void 0===t||t(Object(s["a"])(Object(s["a"])({},i.getMeta()),{},{destroy:e}))},i.onStoreChange=function(e,t,n){var r=i.props,o=r.shouldUpdate,a=r.dependencies,s=void 0===a?[]:a,u=r.onReset,c=n.store,l=i.getNamePath(),f=i.getValue(e),p=i.getValue(c),h=t&&z(t,l);switch("valueUpdate"===n.type&&"external"===n.source&&f!==p&&(i.touched=!0,i.dirty=!0,i.validatePromise=null,i.errors=ie,i.warnings=ie,i.triggerMetaEvent()),n.type){case"reset":if(!t||h)return i.touched=!1,i.dirty=!1,i.validatePromise=null,i.errors=ie,i.warnings=ie,i.triggerMetaEvent(),null===u||void 0===u||u(),void i.refresh();break;case"remove":if(o)return void i.reRender();break;case"setField":if(h){var d=n.data;return"touched"in d&&(i.touched=d.touched),"validating"in d&&!("originRCField"in d)&&(i.validatePromise=d.validating?Promise.resolve([]):null),"errors"in d&&(i.errors=d.errors||ie),"warnings"in d&&(i.warnings=d.warnings||ie),i.dirty=!0,i.triggerMetaEvent(),void i.reRender()}if(o&&!l.length&&oe(o,e,c,f,p,n))return void i.reRender();break;case"dependenciesUpdate":var v=s.map(L);if(v.some((function(e){return z(n.relatedFields,e)})))return void i.reRender();break;default:if(h||(!s.length||l.length||o)&&oe(o,e,c,f,p,n))return void i.reRender();break}!0===o&&i.reRender()},i.validateRules=function(e){var t=i.getNamePath(),n=i.getValue(),r=Promise.resolve().then((function(){if(!i.mounted)return[];var o=i.props,a=o.validateFirst,s=void 0!==a&&a,c=o.messageVariables,l=e||{},f=l.triggerName,p=i.getRules();f&&(p=p.filter((function(e){return e})).filter((function(e){var t=e.validateTrigger;if(!t)return!0;var n=_(t);return n.includes(f)})));var h=Q(t,n,p,e,s,c);return h["catch"]((function(e){return e})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie;if(i.validatePromise===r){var t;i.validatePromise=null;var n=[],o=[];null===(t=e.forEach)||void 0===t||t.call(e,(function(e){var t=e.rule.warningOnly,r=e.errors,i=void 0===r?ie:r;t?o.push.apply(o,Object(u["a"])(i)):n.push.apply(n,Object(u["a"])(i))})),i.errors=n,i.warnings=o,i.triggerMetaEvent(),i.reRender()}})),h}));return i.validatePromise=r,i.dirty=!0,i.errors=ie,i.warnings=ie,i.triggerMetaEvent(),i.reRender(),r},i.isFieldValidating=function(){return!!i.validatePromise},i.isFieldTouched=function(){return i.touched},i.isFieldDirty=function(){if(i.dirty||void 0!==i.props.initialValue)return!0;var e=i.props.fieldContext,t=e.getInternalHooks(m),n=t.getInitialValue;return void 0!==n(i.getNamePath())},i.getErrors=function(){return i.errors},i.getWarnings=function(){return i.warnings},i.isListField=function(){return i.props.isListField},i.isList=function(){return i.props.isList},i.isPreserve=function(){return i.props.preserve},i.getMeta=function(){i.prevValidating=i.isFieldValidating();var e={touched:i.isFieldTouched(),validating:i.prevValidating,errors:i.errors,warnings:i.warnings,name:i.getNamePath()};return e},i.getOnlyChild=function(e){if("function"===typeof e){var t=i.getMeta();return Object(s["a"])(Object(s["a"])({},i.getOnlyChild(e(i.getControlled(),t,i.props.fieldContext))),{},{isFunction:!0})}var n=Object(d["a"])(e);return 1===n.length&&r["isValidElement"](n[0])?{child:n[0],isFunction:!1}:{child:n,isFunction:!1}},i.getValue=function(e){var t=i.props.fieldContext.getFieldsValue,n=i.getNamePath();return D(e||t(!0),n)},i.getControlled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i.props,n=t.trigger,r=t.validateTrigger,o=t.getValueFromEvent,u=t.normalize,c=t.valuePropName,l=t.getValueProps,f=t.fieldContext,p=void 0!==r?r:f.validateTrigger,h=i.getNamePath(),d=f.getInternalHooks,v=f.getFieldsValue,g=d(m),y=g.dispatch,b=i.getValue(),x=l||function(e){return Object(a["a"])({},c,e)},w=e[n],O=Object(s["a"])(Object(s["a"])({},e),x(b));O[n]=function(){var e;i.touched=!0,i.dirty=!0,i.triggerMetaEvent();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e=o?o.apply(void 0,n):W.apply(void 0,[c].concat(n)),u&&(e=u(e,b,v(!0))),y({type:"updateValue",namePath:h,value:e}),w&&w.apply(void 0,n)};var E=_(p||[]);return E.forEach((function(e){var t=O[e];O[e]=function(){t&&t.apply(void 0,arguments);var n=i.props.rules;n&&n.length&&y({type:"validateField",namePath:h,triggerName:e})}})),O},e.fieldContext){var o=e.fieldContext.getInternalHooks,l=o(m),p=l.initEntityValue;p(Object(f["a"])(i))}return i}return Object(l["a"])(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.shouldUpdate,n=e.fieldContext;if(this.mounted=!0,n){var r=n.getInternalHooks,i=r(m),o=i.registerField;this.cancelRegisterFunc=o(this)}!0===t&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var e,t=this.state.resetCount,n=this.props.children,i=this.getOnlyChild(n),o=i.child,a=i.isFunction;return a?e=o:r["isValidElement"](o)?e=r["cloneElement"](o,this.getControlled(o.props)):(Object(v["a"])(!o,"`children` of Field is not validate ReactElement."),e=o),r["createElement"](r["Fragment"],{key:t},e)}}]),n}(r["Component"]);function se(e){var t=e.name,n=Object(o["a"])(e,re),a=r["useContext"](b),s=void 0!==t?L(t):void 0,u="keep";return n.isListField||(u="_".concat((s||[]).join("_"))),r["createElement"](ae,Object(i["a"])({key:u,name:s},n,{fieldContext:a}))}ae.contextType=b,ae.defaultProps={trigger:"onChange",valuePropName:"value"};var ue=se,ce=r["createContext"](null),le=ce,fe=function(e){var t=e.name,n=e.initialValue,i=e.children,o=e.rules,a=e.validateTrigger,c=r["useContext"](b),l=r["useRef"]({keys:[],id:0}),f=l.current,p=r["useMemo"]((function(){var e=L(c.prefixName)||[];return[].concat(Object(u["a"])(e),Object(u["a"])(L(t)))}),[c.prefixName,t]),h=r["useMemo"]((function(){return Object(s["a"])(Object(s["a"])({},c),{},{prefixName:p})}),[c,p]),d=r["useMemo"]((function(){return{getKey:function(e){var t=p.length,n=e[t];return[f.keys[n],e.slice(t+1)]}}}),[p]);if("function"!==typeof i)return Object(v["a"])(!1,"Form.List only accepts function as children."),null;var m=function(e,t,n){var r=n.source;return"internal"!==r&&e!==t};return r["createElement"](le.Provider,{value:d},r["createElement"](b.Provider,{value:h},r["createElement"](ue,{name:[],shouldUpdate:m,rules:o,validateTrigger:a,initialValue:n,isList:!0},(function(e,t){var n=e.value,r=void 0===n?[]:n,o=e.onChange,a=c.getFieldValue,s=function(){var e=a(p||[]);return e||[]},l={add:function(e,t){var n=s();t>=0&&t<=n.length?(f.keys=[].concat(Object(u["a"])(f.keys.slice(0,t)),[f.id],Object(u["a"])(f.keys.slice(t))),o([].concat(Object(u["a"])(n.slice(0,t)),[e],Object(u["a"])(n.slice(t))))):(f.keys=[].concat(Object(u["a"])(f.keys),[f.id]),o([].concat(Object(u["a"])(n),[e]))),f.id+=1},remove:function(e){var t=s(),n=new Set(Array.isArray(e)?e:[e]);n.size<=0||(f.keys=f.keys.filter((function(e,t){return!n.has(t)})),o(t.filter((function(e,t){return!n.has(t)}))))},move:function(e,t){if(e!==t){var n=s();e<0||e>=n.length||t<0||t>=n.length||(f.keys=q(f.keys,e,t),o(q(n,e,t)))}}},h=r||[];return Array.isArray(h)||(h=[]),i(h.map((function(e,t){var n=f.keys[t];return void 0===n&&(f.keys[t]=f.id,n=f.keys[t],f.id+=1),{name:t,key:n,isListField:!0}})),l,t)}))))},pe=fe,he=n("ODXe");function de(e){var t=!1,n=e.length,r=[];return e.length?new Promise((function(i,o){e.forEach((function(e,a){e["catch"]((function(e){return t=!0,e})).then((function(e){n-=1,r[a]=e,n>0||(t&&o(r),i(r))}))}))})):Promise.resolve([])}var ve="__@field_split__";function me(e){return e.map((function(e){return"".concat(Object(j["a"])(e),":").concat(e)})).join(ve)}var ge=function(){function e(){Object(c["a"])(this,e),this.kvs=new Map}return Object(l["a"])(e,[{key:"set",value:function(e,t){this.kvs.set(me(e),t)}},{key:"get",value:function(e){return this.kvs.get(me(e))}},{key:"update",value:function(e,t){var n=this.get(e),r=t(n);r?this.set(e,r):this["delete"](e)}},{key:"delete",value:function(e){this.kvs["delete"](me(e))}},{key:"map",value:function(e){return Object(u["a"])(this.kvs.entries()).map((function(t){var n=Object(he["a"])(t,2),r=n[0],i=n[1],o=r.split(ve);return e({key:o.map((function(e){var t=e.match(/^([^:]*):(.*)$/),n=Object(he["a"])(t,3),r=n[1],i=n[2];return"number"===r?Number(i):i})),value:i})}))}},{key:"toJSON",value:function(){var e={};return this.map((function(t){var n=t.key,r=t.value;return e[n.join(".")]=r,null})),e}}]),e}(),ye=ge,be=["name","errors"],_e=Object(l["a"])((function e(t){var n=this;Object(c["a"])(this,e),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldValue:n.setFieldValue,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,_init:!0,getInternalHooks:n.getInternalHooks}},this.getInternalHooks=function(e){return e===m?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,destroyForm:n.destroyForm,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue,registerWatch:n.registerWatch}):(Object(v["a"])(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(e){n.subscribable=e},this.prevWithoutPreserves=null,this.setInitialValues=function(e,t){if(n.initialValues=e||{},t){var r,i=V({},e,n.store);null===(r=n.prevWithoutPreserves)||void 0===r||r.map((function(t){var n=t.key;i=N(i,n,D(e,n))})),n.prevWithoutPreserves=null,n.updateStore(i)}},this.destroyForm=function(){var e=new ye;n.getFieldEntities(!0).forEach((function(t){n.isMergedPreserve(t.isPreserve())||e.set(t.getNamePath(),!0)})),n.prevWithoutPreserves=e},this.getInitialValue=function(e){var t=D(n.initialValues,e);return e.length?R(t):t},this.setCallbacks=function(e){n.callbacks=e},this.setValidateMessages=function(e){n.validateMessages=e},this.setPreserve=function(e){n.preserve=e},this.watchList=[],this.registerWatch=function(e){return n.watchList.push(e),function(){n.watchList=n.watchList.filter((function(t){return t!==e}))}},this.notifyWatch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(n.watchList.length){var t=n.getFieldsValue();n.watchList.forEach((function(n){n(t,e)}))}},this.timeoutId=null,this.warningUnhooked=function(){0},this.updateStore=function(e){n.store=e},this.getFieldEntities=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?n.fieldEntities.filter((function(e){return e.getNamePath().length})):n.fieldEntities},this.getFieldsMap=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ye;return n.getFieldEntities(e).forEach((function(e){var n=e.getNamePath();t.set(n,e)})),t},this.getFieldEntitiesForNamePathList=function(e){if(!e)return n.getFieldEntities(!0);var t=n.getFieldsMap(!0);return e.map((function(e){var n=L(e);return t.get(n)||{INVALIDATE_NAME_PATH:L(e)}}))},this.getFieldsValue=function(e,t){if(n.warningUnhooked(),!0===e&&!t)return n.store;var r=n.getFieldEntitiesForNamePathList(Array.isArray(e)?e:null),i=[];return r.forEach((function(n){var r,o="INVALIDATE_NAME_PATH"in n?n.INVALIDATE_NAME_PATH:n.getNamePath();if(e||!(null===(r=n.isListField)||void 0===r?void 0:r.call(n)))if(t){var a="getMeta"in n?n.getMeta():null;t(a)&&i.push(o)}else i.push(o)})),F(n.store,i.map(L))},this.getFieldValue=function(e){n.warningUnhooked();var t=L(e);return D(n.store,t)},this.getFieldsError=function(e){n.warningUnhooked();var t=n.getFieldEntitiesForNamePathList(e);return t.map((function(t,n){return t&&!("INVALIDATE_NAME_PATH"in t)?{name:t.getNamePath(),errors:t.getErrors(),warnings:t.getWarnings()}:{name:L(e[n]),errors:[],warnings:[]}}))},this.getFieldError=function(e){n.warningUnhooked();var t=L(e),r=n.getFieldsError([t])[0];return r.errors},this.getFieldWarning=function(e){n.warningUnhooked();var t=L(e),r=n.getFieldsError([t])[0];return r.warnings},this.isFieldsTouched=function(){n.warningUnhooked();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i,o=t[0],a=t[1],s=!1;0===t.length?i=null:1===t.length?Array.isArray(o)?(i=o.map(L),s=!1):(i=null,s=o):(i=o.map(L),s=a);var c=n.getFieldEntities(!0),l=function(e){return e.isFieldTouched()};if(!i)return s?c.every(l):c.some(l);var f=new ye;i.forEach((function(e){f.set(e,[])})),c.forEach((function(e){var t=e.getNamePath();i.forEach((function(n){n.every((function(e,n){return t[n]===e}))&&f.update(n,(function(t){return[].concat(Object(u["a"])(t),[e])}))}))}));var p=function(e){return e.some(l)},h=f.map((function(e){var t=e.value;return t}));return s?h.every(p):h.some(p)},this.isFieldTouched=function(e){return n.warningUnhooked(),n.isFieldsTouched([e])},this.isFieldsValidating=function(e){n.warningUnhooked();var t=n.getFieldEntities();if(!e)return t.some((function(e){return e.isFieldValidating()}));var r=e.map(L);return t.some((function(e){var t=e.getNamePath();return z(r,t)&&e.isFieldValidating()}))},this.isFieldValidating=function(e){return n.warningUnhooked(),n.isFieldsValidating([e])},this.resetWithFieldInitialValue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new ye,r=n.getFieldEntities(!0);r.forEach((function(e){var n=e.props.initialValue,r=e.getNamePath();if(void 0!==n){var i=t.get(r)||new Set;i.add({entity:e,value:n}),t.set(r,i)}}));var i,o=function(r){r.forEach((function(r){var i=r.props.initialValue;if(void 0!==i){var o=r.getNamePath(),a=n.getInitialValue(o);if(void 0!==a)Object(v["a"])(!1,"Form already set 'initialValues' with path '".concat(o.join("."),"'. Field can not overwrite it."));else{var s=t.get(o);if(s&&s.size>1)Object(v["a"])(!1,"Multiple Field with path '".concat(o.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(s){var c=n.getFieldValue(o);e.skipExist&&void 0!==c||n.updateStore(N(n.store,o,Object(u["a"])(s)[0].value))}}}}))};e.entities?i=e.entities:e.namePathList?(i=[],e.namePathList.forEach((function(e){var n,r=t.get(e);r&&(n=i).push.apply(n,Object(u["a"])(Object(u["a"])(r).map((function(e){return e.entity}))))}))):i=r,o(i)},this.resetFields=function(e){n.warningUnhooked();var t=n.store;if(!e)return n.updateStore(V({},n.initialValues)),n.resetWithFieldInitialValue(),n.notifyObservers(t,null,{type:"reset"}),void n.notifyWatch();var r=e.map(L);r.forEach((function(e){var t=n.getInitialValue(e);n.updateStore(N(n.store,e,t))})),n.resetWithFieldInitialValue({namePathList:r}),n.notifyObservers(t,r,{type:"reset"}),n.notifyWatch(r)},this.setFields=function(e){n.warningUnhooked();var t=n.store,r=[];e.forEach((function(e){var i=e.name,a=(e.errors,Object(o["a"])(e,be)),s=L(i);r.push(s),"value"in a&&n.updateStore(N(n.store,s,a.value)),n.notifyObservers(t,[s],{type:"setField",data:e})})),n.notifyWatch(r)},this.getFields=function(){var e=n.getFieldEntities(!0),t=e.map((function(e){var t=e.getNamePath(),r=e.getMeta(),i=Object(s["a"])(Object(s["a"])({},r),{},{name:t,value:n.getFieldValue(t)});return Object.defineProperty(i,"originRCField",{value:!0}),i}));return t},this.initEntityValue=function(e){var t=e.props.initialValue;if(void 0!==t){var r=e.getNamePath(),i=D(n.store,r);void 0===i&&n.updateStore(N(n.store,r,t))}},this.isMergedPreserve=function(e){var t=void 0!==e?e:n.preserve;return null===t||void 0===t||t},this.registerField=function(e){n.fieldEntities.push(e);var t=e.getNamePath();if(n.notifyWatch([t]),void 0!==e.props.initialValue){var r=n.store;n.resetWithFieldInitialValue({entities:[e],skipExist:!0}),n.notifyObservers(r,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(r,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter((function(t){return t!==e})),!n.isMergedPreserve(i)&&(!r||o.length>1)){var a=r?void 0:n.getInitialValue(t);if(t.length&&n.getFieldValue(t)!==a&&n.fieldEntities.every((function(e){return!H(e.getNamePath(),t)}))){var s=n.store;n.updateStore(N(s,t,a,!0)),n.notifyObservers(s,[t],{type:"remove"}),n.triggerDependenciesUpdate(s,t)}}n.notifyWatch([t])}},this.dispatch=function(e){switch(e.type){case"updateValue":var t=e.namePath,r=e.value;n.updateValue(t,r);break;case"validateField":var i=e.namePath,o=e.triggerName;n.validateFields([i],{triggerName:o});break;default:}},this.notifyObservers=function(e,t,r){if(n.subscribable){var i=Object(s["a"])(Object(s["a"])({},r),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach((function(n){var r=n.onStoreChange;r(e,t,i)}))}else n.forceRootUpdate()},this.triggerDependenciesUpdate=function(e,t){var r=n.getDependencyChildrenFields(t);return r.length&&n.validateFields(r),n.notifyObservers(e,r,{type:"dependenciesUpdate",relatedFields:[t].concat(Object(u["a"])(r))}),r},this.updateValue=function(e,t){var r=L(e),i=n.store;n.updateStore(N(n.store,r,t)),n.notifyObservers(i,[r],{type:"valueUpdate",source:"internal"}),n.notifyWatch([r]);var o=n.triggerDependenciesUpdate(i,r),a=n.callbacks.onValuesChange;if(a){var s=F(n.store,[r]);a(s,n.getFieldsValue())}n.triggerOnFieldsChange([r].concat(Object(u["a"])(o)))},this.setFieldsValue=function(e){n.warningUnhooked();var t=n.store;if(e){var r=V(n.store,e);n.updateStore(r)}n.notifyObservers(t,null,{type:"valueUpdate",source:"external"}),n.notifyWatch()},this.setFieldValue=function(e,t){n.setFields([{name:e,value:t}])},this.getDependencyChildrenFields=function(e){var t=new Set,r=[],i=new ye;n.getFieldEntities().forEach((function(e){var t=e.props.dependencies;(t||[]).forEach((function(t){var n=L(t);i.update(n,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return t.add(e),t}))}))}));var o=function e(n){var o=i.get(n)||new Set;o.forEach((function(n){if(!t.has(n)){t.add(n);var i=n.getNamePath();n.isFieldDirty()&&i.length&&(r.push(i),e(i))}}))};return o(e),r},this.triggerOnFieldsChange=function(e,t){var r=n.callbacks.onFieldsChange;if(r){var i=n.getFields();if(t){var o=new ye;t.forEach((function(e){var t=e.name,n=e.errors;o.set(t,n)})),i.forEach((function(e){e.errors=o.get(e.name)||e.errors}))}var a=i.filter((function(t){var n=t.name;return z(e,n)}));r(a,i)}},this.validateFields=function(e,t){n.warningUnhooked();var r=!!e,i=r?e.map(L):[],o=[];n.getFieldEntities(!0).forEach((function(a){if(r||i.push(a.getNamePath()),(null===t||void 0===t?void 0:t.recursive)&&r){var c=a.getNamePath();c.every((function(t,n){return e[n]===t||void 0===e[n]}))&&i.push(c)}if(a.props.rules&&a.props.rules.length){var l=a.getNamePath();if(!r||z(i,l)){var f=a.validateRules(Object(s["a"])({validateMessages:Object(s["a"])(Object(s["a"])({},S),n.validateMessages)},t));o.push(f.then((function(){return{name:l,errors:[],warnings:[]}}))["catch"]((function(e){var t,n=[],r=[];return null===(t=e.forEach)||void 0===t||t.call(e,(function(e){var t=e.rule.warningOnly,i=e.errors;t?r.push.apply(r,Object(u["a"])(i)):n.push.apply(n,Object(u["a"])(i))})),n.length?Promise.reject({name:l,errors:n,warnings:r}):{name:l,errors:n,warnings:r}})))}}}));var a=de(o);n.lastValidatePromise=a,a["catch"]((function(e){return e})).then((function(e){var t=e.map((function(e){var t=e.name;return t}));n.notifyObservers(n.store,t,{type:"validateFinish"}),n.triggerOnFieldsChange(t,e)}));var c=a.then((function(){return n.lastValidatePromise===a?Promise.resolve(n.getFieldsValue(i)):Promise.reject([])}))["catch"]((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:n.getFieldsValue(i),errorFields:t,outOfDate:n.lastValidatePromise!==a})}));return c["catch"]((function(e){return e})),c},this.submit=function(){n.warningUnhooked(),n.validateFields().then((function(e){var t=n.callbacks.onFinish;if(t)try{t(e)}catch(r){console.error(r)}}))["catch"]((function(e){var t=n.callbacks.onFinishFailed;t&&t(e)}))},this.forceRootUpdate=t}));function xe(e){var t=r["useRef"](),n=r["useState"]({}),i=Object(he["a"])(n,2),o=i[1];if(!t.current)if(e)t.current=e;else{var a=function(){o({})},s=new _e(a);t.current=s.getForm()}return[t.current]}var we=xe,Oe=r["createContext"]({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),Ee=function(e){var t=e.validateMessages,n=e.onFormChange,i=e.onFormFinish,o=e.children,u=r["useContext"](Oe),c=r["useRef"]({});return r["createElement"](Oe.Provider,{value:Object(s["a"])(Object(s["a"])({},u),{},{validateMessages:Object(s["a"])(Object(s["a"])({},u.validateMessages),t),triggerFormChange:function(e,t){n&&n(e,{changedFields:t,forms:c.current}),u.triggerFormChange(e,t)},triggerFormFinish:function(e,t){i&&i(e,{values:t,forms:c.current}),u.triggerFormFinish(e,t)},registerForm:function(e,t){e&&(c.current=Object(s["a"])(Object(s["a"])({},c.current),{},Object(a["a"])({},e,t))),u.registerForm(e,t)},unregisterForm:function(e){var t=Object(s["a"])({},c.current);delete t[e],c.current=t,u.unregisterForm(e)}})},o)},Se=Oe,je=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],Ae=function(e,t){var n=e.name,a=e.initialValues,u=e.fields,c=e.form,l=e.preserve,f=e.children,p=e.component,h=void 0===p?"form":p,d=e.validateMessages,v=e.validateTrigger,g=void 0===v?"onChange":v,y=e.onValuesChange,_=e.onFieldsChange,x=e.onFinish,w=e.onFinishFailed,O=Object(o["a"])(e,je),E=r["useContext"](Se),S=we(c),j=Object(he["a"])(S,1),A=j[0],k=A.getInternalHooks(m),C=k.useSubscribe,T=k.setInitialValues,M=k.setCallbacks,P=k.setValidateMessages,I=k.setPreserve,R=k.destroyForm;r["useImperativeHandle"](t,(function(){return A})),r["useEffect"]((function(){return E.registerForm(n,A),function(){E.unregisterForm(n)}}),[E,A,n]),P(Object(s["a"])(Object(s["a"])({},E.validateMessages),d)),M({onValuesChange:y,onFieldsChange:function(e){if(E.triggerFormChange(n,e),_){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];_.apply(void 0,[e].concat(r))}},onFinish:function(e){E.triggerFormFinish(n,e),x&&x(e)},onFinishFailed:w}),I(l);var L,D=r["useRef"](null);T(a,!D.current),D.current||(D.current=!0),r["useEffect"]((function(){return R}),[]);var N="function"===typeof f;if(N){var F=A.getFieldsValue(!0);L=f(F,A)}else L=f;C(!N);var z=r["useRef"]();r["useEffect"]((function(){G(z.current||[],u||[])||A.setFields(u||[]),z.current=u}),[u,A]);var B=r["useMemo"]((function(){return Object(s["a"])(Object(s["a"])({},A),{},{validateTrigger:g})}),[A,g]),U=r["createElement"](b.Provider,{value:B},L);return!1===h?U:r["createElement"](h,Object(i["a"])({},O,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),A.submit()},onReset:function(e){var t;e.preventDefault(),A.resetFields(),null===(t=O.onReset)||void 0===t||t.call(O,e)}}),U)},ke=Ae;function Ce(e){try{return JSON.stringify(e)}catch(t){return Math.random()}}var Te=function(){};function Me(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[0],o=void 0===i?[]:i,a=t[1],s=Object(r["useState"])(),u=Object(he["a"])(s,2),c=u[0],l=u[1],f=Object(r["useMemo"])((function(){return Ce(c)}),[c]),p=Object(r["useRef"])(f);p.current=f;var h=Object(r["useContext"])(b),d=a||h,v=d&&d._init;var g=L(o),y=Object(r["useRef"])(g);return y.current=g,Te(g),Object(r["useEffect"])((function(){if(v){var e=d.getFieldsValue,t=d.getInternalHooks,n=t(m),r=n.registerWatch,i=r((function(e){var t=D(e,y.current),n=Ce(t);p.current!==n&&(p.current=n,l(t))})),o=D(e(),y.current);return l(o),i}}),[v]),c}var Pe=Me,Ie=r["forwardRef"](ke),Re=Ie;Re.FormProvider=Ee,Re.Field=ue,Re.List=pe,Re.useForm=we,Re.useWatch=Pe},"88Gu":function(e,t){var n=800,r=16,i=Date.now;function o(e){var t=0,o=0;return function(){var a=i(),s=r-(a-o);if(o=a,s>0){if(++t>=n)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}e.exports=o},"8Dy3":function(e,t,n){"use strict";n.r(t);var r=n("tJVT"),i=n("/7QA"),o=n("q1tI"),a=n("nKUr");t["default"]=()=>{var e=Object(o["useState"])(),t=Object(r["a"])(e,2),n=t[0],s=t[1];return Object(a["jsxs"])(i["a"],{map:{center:[110.19382669582967,50.258134],pitch:0,style:"dark",zoom:1},style:{height:"500px",position:"relative"},children:[Object(a["jsx"])(i["j"],{source:{data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[88.9453125,-3.864254615721396],[155.7421875,-3.864254615721396],[155.7421875,46.800059446787316],[88.9453125,46.800059446787316],[88.9453125,-3.864254615721396]]]}}]}},color:{values:"red"},shape:{values:"fill"},children:Object(a["jsx"])(i["g"],{type:"click",handler:e=>{s(e)}})}),n&&Object(a["jsx"])(i["k"],{option:{stopPropagation:!1},lnglat:null===n||void 0===n?void 0:n.lngLat,children:Object(a["jsx"])("div",{onClick:e=>{e.stopPropagation(),alert("\u6211\u88ab\u70b9\u51fb\u4e86")},children:Object(a["jsx"])("button",{onClick:e=>{e.stopPropagation(),alert("b\u6211\u88ab\u70b9\u51fb\u4e86")},children:"\u6211\u80fd\u4e0d\u80fd\u88ab\u70b9\u51fb"})})})]})}},"8GlL":function(e,t,n){"use strict";var r=n("HAuM"),i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},"8HVG":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("KQm4"),i=n("wx14"),o=n("ODXe"),a=n("q1tI"),s=n("EE3K");function u(e){var t=a["useRef"]({}),n=a["useState"]([]),u=Object(o["a"])(n,2),c=u[0],l=u[1];function f(n){var o=!0;e.add(n,(function(e,n){var u=n.key;if(e&&(!t.current[u]||o)){var c=a["createElement"](s["a"],Object(i["a"])({},n,{holder:e}));t.current[u]=c,l((function(e){var t=e.findIndex((function(e){return e.key===n.key}));if(-1===t)return[].concat(Object(r["a"])(e),[c]);var i=Object(r["a"])(e);return i[t]=c,i}))}o=!1}))}return[f,a["createElement"](a["Fragment"],null,c)]}},"8L3h":function(e,t,n){"use strict";e.exports=n("f/k9")},"8STE":function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("Cg3G");r({target:"WeakSet",proto:!0,real:!0,forced:i},{deleteAll:function(){return o.apply(this,arguments)}})},"8XRh":function(e,t,n){"use strict";n.d(t,"a",(function(){return ye}));var r=n("rePB"),i=n("VTBJ"),o=n("ODXe"),a=n("U8pU"),s=n("TSYQ"),u=n.n(s),c=n("m+aA"),l=n("c+Xe"),f=n("q1tI"),p=n("Ff2n"),h=f["createContext"]({});var d=n("1OyB"),v=n("vuIU"),m=n("Ji7U"),g=n("LK+K"),y=function(e){Object(m["a"])(n,e);var t=Object(g["a"])(n);function n(){return Object(d["a"])(this,n),t.apply(this,arguments)}return Object(v["a"])(n,[{key:"render",value:function(){return this.props.children}}]),n}(f["Component"]),b=y,_=n("dm2S"),x="none",w="appear",O="enter",E="leave",S="none",j="prepare",A="start",k="active",C="end",T="prepared",M=n("MNnm");function P(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}function I(e,t){var n={animationend:P("Animation","AnimationEnd"),transitionend:P("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}var R=I(Object(M["a"])(),"undefined"!==typeof window?window:{}),L={};if(Object(M["a"])()){var D=document.createElement("div");L=D.style}var N={};function F(e){if(N[e])return N[e];var t=R[e];if(t)for(var n=Object.keys(t),r=n.length,i=0;i<r;i+=1){var o=n[i];if(Object.prototype.hasOwnProperty.call(t,o)&&o in L)return N[e]=t[o],N[e]}return""}var z=F("animationend"),B=F("transitionend"),U=!(!z||!B),V=z||"animationend",H=B||"transitionend";function G(e,t){if(!e)return null;if("object"===Object(a["a"])(e)){var n=t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}));return e[n]}return"".concat(e,"-").concat(t)}var W=function(e){var t=Object(f["useRef"])(),n=Object(f["useRef"])(e);n.current=e;var r=f["useCallback"]((function(e){n.current(e)}),[]);function i(e){e&&(e.removeEventListener(H,r),e.removeEventListener(V,r))}function o(e){t.current&&t.current!==e&&i(t.current),e&&e!==t.current&&(e.addEventListener(H,r),e.addEventListener(V,r),t.current=e)}return f["useEffect"]((function(){return function(){i(t.current)}}),[]),[o,i]},q=Object(M["a"])()?f["useLayoutEffect"]:f["useEffect"],Z=q,Y=n("wgJM"),X=function(){var e=f["useRef"](null);function t(){Y["a"].cancel(e.current)}function n(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t();var o=Object(Y["a"])((function(){i<=1?r({isCanceled:function(){return o!==e.current}}):n(r,i-1)}));e.current=o}return f["useEffect"]((function(){return function(){t()}}),[]),[n,t]},K=[j,A,k,C],$=[j,T],Q=!1,J=!0;function ee(e){return e===k||e===C}var te=function(e,t,n){var r=Object(_["a"])(S),i=Object(o["a"])(r,2),a=i[0],s=i[1],u=X(),c=Object(o["a"])(u,2),l=c[0],p=c[1];function h(){s(j,!0)}var d=t?$:K;return Z((function(){if(a!==S&&a!==C){var e=d.indexOf(a),t=d[e+1],r=n(a);r===Q?s(t,!0):t&&l((function(e){function n(){e.isCanceled()||s(t,!0)}!0===r?n():Promise.resolve(r).then(n)}))}}),[e,a]),f["useEffect"]((function(){return function(){p()}}),[]),[h,a]};function ne(e,t,n,a){var s=a.motionEnter,u=void 0===s||s,c=a.motionAppear,l=void 0===c||c,p=a.motionLeave,h=void 0===p||p,d=a.motionDeadline,v=a.motionLeaveImmediately,m=a.onAppearPrepare,g=a.onEnterPrepare,y=a.onLeavePrepare,b=a.onAppearStart,S=a.onEnterStart,C=a.onLeaveStart,M=a.onAppearActive,P=a.onEnterActive,I=a.onLeaveActive,R=a.onAppearEnd,L=a.onEnterEnd,D=a.onLeaveEnd,N=a.onVisibleChanged,F=Object(_["a"])(),z=Object(o["a"])(F,2),B=z[0],U=z[1],V=Object(_["a"])(x),H=Object(o["a"])(V,2),G=H[0],q=H[1],Y=Object(_["a"])(null),X=Object(o["a"])(Y,2),K=X[0],$=X[1],ne=Object(f["useRef"])(!1),re=Object(f["useRef"])(null);function ie(){return n()}var oe=Object(f["useRef"])(!1);function ae(){q(x,!0),$(null,!0)}function se(e){var t=ie();if(!e||e.deadline||e.target===t){var n,r=oe.current;G===w&&r?n=null===R||void 0===R?void 0:R(t,e):G===O&&r?n=null===L||void 0===L?void 0:L(t,e):G===E&&r&&(n=null===D||void 0===D?void 0:D(t,e)),G!==x&&r&&!1!==n&&ae()}}var ue=W(se),ce=Object(o["a"])(ue,1),le=ce[0],fe=function(e){var t,n,i;switch(e){case w:return t={},Object(r["a"])(t,j,m),Object(r["a"])(t,A,b),Object(r["a"])(t,k,M),t;case O:return n={},Object(r["a"])(n,j,g),Object(r["a"])(n,A,S),Object(r["a"])(n,k,P),n;case E:return i={},Object(r["a"])(i,j,y),Object(r["a"])(i,A,C),Object(r["a"])(i,k,I),i;default:return{}}},pe=f["useMemo"]((function(){return fe(G)}),[G]),he=te(G,!e,(function(e){if(e===j){var t=pe[j];return t?t(ie()):Q}var n;me in pe&&$((null===(n=pe[me])||void 0===n?void 0:n.call(pe,ie(),null))||null);return me===k&&(le(ie()),d>0&&(clearTimeout(re.current),re.current=setTimeout((function(){se({deadline:!0})}),d))),me===T&&ae(),J})),de=Object(o["a"])(he,2),ve=de[0],me=de[1],ge=ee(me);oe.current=ge,Z((function(){U(t);var n,r=ne.current;ne.current=!0,!r&&t&&l&&(n=w),r&&t&&u&&(n=O),(r&&!t&&h||!r&&v&&!t&&h)&&(n=E);var i=fe(n);n&&(e||i[j])?(q(n),ve()):q(x)}),[t]),Object(f["useEffect"])((function(){(G===w&&!l||G===O&&!u||G===E&&!h)&&q(x)}),[l,u,h]),Object(f["useEffect"])((function(){return function(){ne.current=!1,clearTimeout(re.current)}}),[]);var ye=f["useRef"](!1);Object(f["useEffect"])((function(){B&&(ye.current=!0),void 0!==B&&G===x&&((ye.current||B)&&(null===N||void 0===N||N(B)),ye.current=!0)}),[B,G]);var be=K;return pe[j]&&me===A&&(be=Object(i["a"])({transition:"none"},be)),[G,me,be,null!==B&&void 0!==B?B:t]}function re(e){var t=e;function n(e,n){return!(!e.motionName||!t||!1===n)}"object"===Object(a["a"])(e)&&(t=e.transitionSupport);var s=f["forwardRef"]((function(e,t){var a=e.visible,s=void 0===a||a,p=e.removeOnLeave,d=void 0===p||p,v=e.forceRender,m=e.children,g=e.motionName,y=e.leavedClassName,_=e.eventProps,w=f["useContext"](h),O=w.motion,E=n(e,O),S=Object(f["useRef"])(),k=Object(f["useRef"])();function C(){try{return S.current instanceof HTMLElement?S.current:Object(c["a"])(k.current)}catch(e){return null}}var T=ne(E,s,C,e),M=Object(o["a"])(T,4),P=M[0],I=M[1],R=M[2],L=M[3],D=f["useRef"](L);L&&(D.current=!0);var N,F=f["useCallback"]((function(e){S.current=e,Object(l["b"])(t,e)}),[t]),z=Object(i["a"])(Object(i["a"])({},_),{},{visible:s});if(m)if(P===x)N=L?m(Object(i["a"])({},z),F):!d&&D.current&&y?m(Object(i["a"])(Object(i["a"])({},z),{},{className:y}),F):v||!d&&!y?m(Object(i["a"])(Object(i["a"])({},z),{},{style:{display:"none"}}),F):null;else{var B,U;I===j?U="prepare":ee(I)?U="active":I===A&&(U="start");var V=G(g,"".concat(P,"-").concat(U));N=m(Object(i["a"])(Object(i["a"])({},z),{},{className:u()(G(g,P),(B={},Object(r["a"])(B,V,V&&U),Object(r["a"])(B,g,"string"===typeof g),B)),style:R}),F)}else N=null;if(f["isValidElement"](N)&&Object(l["c"])(N)){var H=N,W=H.ref;W||(N=f["cloneElement"](N,{ref:F}))}return f["createElement"](b,{ref:k},N)}));return s.displayName="CSSMotion",s}var ie=re(U),oe=n("wx14"),ae=n("JX7q"),se="add",ue="keep",ce="remove",le="removed";function fe(e){var t;return t=e&&"object"===Object(a["a"])(e)&&"key"in e?e:{key:e},Object(i["a"])(Object(i["a"])({},t),{},{key:String(t.key)})}function pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(fe)}function he(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,o=t.length,a=pe(e),s=pe(t);a.forEach((function(e){for(var t=!1,a=r;a<o;a+=1){var u=s[a];if(u.key===e.key){r<a&&(n=n.concat(s.slice(r,a).map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{status:se})}))),r=a),n.push(Object(i["a"])(Object(i["a"])({},u),{},{status:ue})),r+=1,t=!0;break}}t||n.push(Object(i["a"])(Object(i["a"])({},e),{},{status:ce}))})),r<o&&(n=n.concat(s.slice(r).map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{status:se})}))));var u={};n.forEach((function(e){var t=e.key;u[t]=(u[t]||0)+1}));var c=Object.keys(u).filter((function(e){return u[e]>1}));return c.forEach((function(e){n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==ce})),n.forEach((function(t){t.key===e&&(t.status=ue)}))})),n}var de=["component","children","onVisibleChanged","onAllRemoved"],ve=["status"],me=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie,n=function(e){Object(m["a"])(o,e);var n=Object(g["a"])(o);function o(){var e;Object(d["a"])(this,o);for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return e=n.call.apply(n,[this].concat(a)),Object(r["a"])(Object(ae["a"])(e),"state",{keyEntities:[]}),Object(r["a"])(Object(ae["a"])(e),"removeKey",(function(t){var n=e.state.keyEntities,r=n.map((function(e){return e.key!==t?e:Object(i["a"])(Object(i["a"])({},e),{},{status:le})}));return e.setState({keyEntities:r}),r.filter((function(e){var t=e.status;return t!==le})).length})),e}return Object(v["a"])(o,[{key:"render",value:function(){var e=this,n=this.state.keyEntities,r=this.props,i=r.component,o=r.children,a=r.onVisibleChanged,s=r.onAllRemoved,u=Object(p["a"])(r,de),c=i||f["Fragment"],l={};return me.forEach((function(e){l[e]=u[e],delete u[e]})),delete u.keys,f["createElement"](c,u,n.map((function(n){var r=n.status,i=Object(p["a"])(n,ve),u=r===se||r===ue;return f["createElement"](t,Object(oe["a"])({},l,{key:i.key,visible:u,eventProps:i,onVisibleChanged:function(t){if(null===a||void 0===a||a(t,{key:i.key}),!t){var n=e.removeKey(i.key);0===n&&s&&s()}}}),o)})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,i=pe(n),o=he(r,i);return{keyEntities:o.filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!t||t.status!==le||e.status!==ce}))}}}]),o}(f["Component"]);return Object(r["a"])(n,"defaultProps",{component:"div"}),n}var ye=ge(U);t["b"]=ie},"8YOa":function(e,t,n){var r=n("0BK2"),i=n("hh1v"),o=n("UTVS"),a=n("m/L8").f,s=n("kOOl"),u=n("uy83"),c=s("meta"),l=0,f=Object.isExtensible||function(){return!0},p=function(e){a(e,c,{value:{objectID:"O"+ ++l,weakData:{}}})},h=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,c)){if(!f(e))return"F";if(!t)return"E";p(e)}return e[c].objectID},d=function(e,t){if(!o(e,c)){if(!f(e))return!0;if(!t)return!1;p(e)}return e[c].weakData},v=function(e){return u&&m.REQUIRED&&f(e)&&!o(e,c)&&p(e),e},m=e.exports={REQUIRED:!1,fastKey:h,getWeakData:d,onFreeze:v};r[c]=!0},"8go2":function(e,t,n){n("gg6r")},"8jRI":function(e,t,n){"use strict";var r="%[a-f0-9]{2}",i=new RegExp("("+r+")|([^%]+?)","gi"),o=new RegExp("("+r+")+","gi");function a(e,t){try{return[decodeURIComponent(e.join(""))]}catch(i){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],a(n),a(r))}function s(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(i)||[],n=1;n<t.length;n++)e=a(t,n).join(""),t=e.match(i)||[];return e}}function u(e){var t={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},n=o.exec(e);while(n){try{t[n[0]]=decodeURIComponent(n[0])}catch(c){var r=s(n[0]);r!==n[0]&&(t[n[0]]=r)}n=o.exec(e)}t["%C2"]="\ufffd";for(var i=Object.keys(t),a=0;a<i.length;a++){var u=i[a];e=e.replace(new RegExp(u,"g"),t[u])}return e}e.exports=function(e){if("string"!==typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return u(e)}}},"8r4s":function(e,t,n){var r=n("I+eb"),i=n("P940");r({target:"Set",stat:!0},{of:i})},"8tx+":function(e,t,n){"use strict";var r,i=n("Ff2n"),o=n("wx14"),a=n("VTBJ"),s=n("1OyB"),u=n("vuIU"),c=n("Ji7U"),l=n("LK+K"),f=n("q1tI"),p=n("x+uP"),h=n("HaE+"),d=n("U8pU"),v=n("i8i4"),m=Object(a["a"])({},v),g=m.version,y=m.render,b=m.unmountComponentAtNode;try{var _=Number((g||"").split(".")[0]);_>=18&&(r=m.createRoot)}catch(V){}function x(e){var t=m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&"object"===Object(d["a"])(t)&&(t.usingClientEntryPoint=e)}var w="__rc_react_root__";function O(e,t){x(!0);var n=t[w]||r(t);x(!1),n.render(e),t[w]=n}function E(e,t){y(e,t)}function S(e,t){r?O(e,t):E(e,t)}function j(e){return A.apply(this,arguments)}function A(){return A=Object(h["a"])(Object(p["a"])().mark((function e(t){return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve().then((function(){var e;null===(e=t[w])||void 0===e||e.unmount(),delete t[w]})));case 1:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function k(e){b(e)}function C(e){return T.apply(this,arguments)}function T(){return T=Object(h["a"])(Object(p["a"])().mark((function e(t){return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0===r){e.next=2;break}return e.abrupt("return",j(t));case 2:k(t);case 3:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}var M=n("TSYQ"),P=n.n(M),I=n("8XRh"),R=n("EE3K"),L=n("8HVG"),D=["getContainer"],N=0,F=Date.now();function z(){var e=N;return N+=1,"rcNotification_".concat(F,"_").concat(e)}var B=function(e){Object(c["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(s["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),e.state={notices:[]},e.hookRefs=new Map,e.add=function(t,n){var r,i=null!==(r=t.key)&&void 0!==r?r:z(),o=Object(a["a"])(Object(a["a"])({},t),{},{key:i}),s=e.props.maxCount;e.setState((function(e){var t=e.notices,r=t.map((function(e){return e.notice.key})).indexOf(i),a=t.concat();return-1!==r?a.splice(r,1,{notice:o,holderCallback:n}):(s&&t.length>=s&&(o.key=a[0].notice.key,o.updateMark=z(),o.userPassKey=i,a.shift()),a.push({notice:o,holderCallback:n})),{notices:a}}))},e.remove=function(t){e.setState((function(e){var n=e.notices;return{notices:n.filter((function(e){var n=e.notice,r=n.key,i=n.userPassKey,o=null!==i&&void 0!==i?i:r;return o!==t}))}}))},e.noticePropsMap={},e}return Object(u["a"])(n,[{key:"getTransitionName",value:function(){var e=this.props,t=e.prefixCls,n=e.animation,r=this.props.transitionName;return!r&&n&&(r="".concat(t,"-").concat(n)),r}},{key:"render",value:function(){var e=this,t=this.state.notices,n=this.props,r=n.prefixCls,i=n.className,s=n.closeIcon,u=n.style,c=[];return t.forEach((function(n,i){var o=n.notice,u=n.holderCallback,l=i===t.length-1?o.updateMark:void 0,f=o.key,p=o.userPassKey,h=Object(a["a"])(Object(a["a"])(Object(a["a"])({prefixCls:r,closeIcon:s},o),o.props),{},{key:f,noticeKey:p||f,updateMark:l,onClose:function(t){var n;e.remove(t),null===(n=o.onClose)||void 0===n||n.call(o)},onClick:o.onClick,children:o.content});c.push(f),e.noticePropsMap[f]={props:h,holderCallback:u}})),f["createElement"]("div",{className:P()(r,i),style:u},f["createElement"](I["a"],{keys:c,motionName:this.getTransitionName(),onVisibleChanged:function(t,n){var r=n.key;t||delete e.noticePropsMap[r]}},(function(t){var n=t.key,i=t.className,s=t.style,u=t.visible,c=e.noticePropsMap[n],l=c.props,p=c.holderCallback;return p?f["createElement"]("div",{key:n,className:P()(i,"".concat(r,"-hook-holder")),style:Object(a["a"])({},s),ref:function(t){"undefined"!==typeof n&&(t?(e.hookRefs.set(n,t),p(t,l)):e.hookRefs["delete"](n))}}):f["createElement"](R["a"],Object(o["a"])({},l,{className:P()(i,null===l||void 0===l?void 0:l.className),style:Object(a["a"])(Object(a["a"])({},s),null===l||void 0===l?void 0:l.style),visible:u}))})))}}]),n}(f["Component"]);B.newInstance=void 0,B.defaultProps={prefixCls:"rc-notification",animation:"fade",style:{top:65,left:"50%"}},B.newInstance=function(e,t){var n=e||{},r=n.getContainer,a=Object(i["a"])(n,D),s=document.createElement("div");if(r){var u=r();u.appendChild(s)}else document.body.appendChild(s);var c=!1;function l(e){c||(c=!0,t({notice:function(t){e.add(t)},removeNotice:function(t){e.remove(t)},component:e,destroy:function(){C(s),s.parentNode&&s.parentNode.removeChild(s)},useNotification:function(){return Object(L["a"])(e)}}))}S(f["createElement"](B,Object(o["a"])({},a,{ref:l})),s)};var U=B;t["a"]=U},"8yz6":function(e,t,n){"use strict";e.exports=function(e,t){if("string"!==typeof e||"string"!==typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},"8z13":function(e,t,n){"use strict";var r=n("wx14"),i=n("VTBJ"),o=n("ODXe"),a=n("Ff2n"),s=n("q1tI"),u=n("TSYQ"),c=n.n(u),l=n("t23M"),f=n("TNol"),p=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],h=void 0;function d(e,t){var n=e.prefixCls,o=e.invalidate,u=e.item,f=e.renderItem,d=e.responsive,v=e.responsiveDisabled,m=e.registerSize,g=e.itemKey,y=e.className,b=e.style,_=e.children,x=e.display,w=e.order,O=e.component,E=void 0===O?"div":O,S=Object(a["a"])(e,p),j=d&&!x;function A(e){m(g,e)}s["useEffect"]((function(){return function(){A(null)}}),[]);var k,C=f&&u!==h?f(u):_;o||(k={opacity:j?0:1,height:j?0:h,overflowY:j?"hidden":h,order:d?w:h,pointerEvents:j?"none":h,position:j?"absolute":h});var T={};j&&(T["aria-hidden"]=!0);var M=s["createElement"](E,Object(r["a"])({className:c()(!o&&n,y),style:Object(i["a"])(Object(i["a"])({},k),b)},T,S,{ref:t}),C);return d&&(M=s["createElement"](l["a"],{onResize:function(e){var t=e.offsetWidth;A(t)},disabled:v},M)),M}var v=s["forwardRef"](d);v.displayName="Item";var m=v,g=n("mBDr"),y=n("i8i4"),b=n("wgJM");function _(e){if("undefined"===typeof MessageChannel)Object(b["a"])(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}function x(){var e=s["useRef"](null),t=function(t){e.current||(e.current=[],_((function(){Object(y["unstable_batchedUpdates"])((function(){e.current.forEach((function(e){e()})),e.current=null}))}))),e.current.push(t)};return t}function w(e,t){var n=s["useState"](t),r=Object(o["a"])(n,2),i=r[0],a=r[1],u=Object(g["a"])((function(t){e((function(){a(t)}))}));return[i,u]}var O=["component"],E=["className"],S=["className"],j=function(e,t){var n=s["useContext"](T);if(!n){var i=e.component,o=void 0===i?"div":i,u=Object(a["a"])(e,O);return s["createElement"](o,Object(r["a"])({},u,{ref:t}))}var l=n.className,f=Object(a["a"])(n,E),p=e.className,h=Object(a["a"])(e,S);return s["createElement"](T.Provider,{value:null},s["createElement"](m,Object(r["a"])({ref:t,className:c()(l,p)},f,h)))},A=s["forwardRef"](j);A.displayName="RawItem";var k=A,C=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],T=s["createContext"](null),M="responsive",P="invalidate";function I(e){return"+ ".concat(e.length," ...")}function R(e,t){var n=e.prefixCls,u=void 0===n?"rc-overflow":n,p=e.data,h=void 0===p?[]:p,d=e.renderItem,v=e.renderRawItem,g=e.itemKey,y=e.itemWidth,b=void 0===y?10:y,_=e.ssr,O=e.style,E=e.className,S=e.maxCount,j=e.renderRest,A=e.renderRawRest,k=e.suffix,R=e.component,L=void 0===R?"div":R,D=e.itemComponent,N=e.onVisibleChange,F=Object(a["a"])(e,C),z="full"===_,B=x(),U=w(B,null),V=Object(o["a"])(U,2),H=V[0],G=V[1],W=H||0,q=w(B,new Map),Z=Object(o["a"])(q,2),Y=Z[0],X=Z[1],K=w(B,0),$=Object(o["a"])(K,2),Q=$[0],J=$[1],ee=w(B,0),te=Object(o["a"])(ee,2),ne=te[0],re=te[1],ie=w(B,0),oe=Object(o["a"])(ie,2),ae=oe[0],se=oe[1],ue=Object(s["useState"])(null),ce=Object(o["a"])(ue,2),le=ce[0],fe=ce[1],pe=Object(s["useState"])(null),he=Object(o["a"])(pe,2),de=he[0],ve=he[1],me=s["useMemo"]((function(){return null===de&&z?Number.MAX_SAFE_INTEGER:de||0}),[de,H]),ge=Object(s["useState"])(!1),ye=Object(o["a"])(ge,2),be=ye[0],_e=ye[1],xe="".concat(u,"-item"),we=Math.max(Q,ne),Oe=S===M,Ee=h.length&&Oe,Se=S===P,je=Ee||"number"===typeof S&&h.length>S,Ae=Object(s["useMemo"])((function(){var e=h;return Ee?e=null===H&&z?h:h.slice(0,Math.min(h.length,W/b)):"number"===typeof S&&(e=h.slice(0,S)),e}),[h,b,H,S,Ee]),ke=Object(s["useMemo"])((function(){return Ee?h.slice(me+1):h.slice(Ae.length)}),[h,Ae,Ee,me]),Ce=Object(s["useCallback"])((function(e,t){var n;return"function"===typeof g?g(e):null!==(n=g&&(null===e||void 0===e?void 0:e[g]))&&void 0!==n?n:t}),[g]),Te=Object(s["useCallback"])(d||function(e){return e},[d]);function Me(e,t,n){(de!==e||void 0!==t&&t!==le)&&(ve(e),n||(_e(e<h.length-1),null===N||void 0===N||N(e)),void 0!==t&&fe(t))}function Pe(e,t){G(t.clientWidth)}function Ie(e,t){X((function(n){var r=new Map(n);return null===t?r["delete"](e):r.set(e,t),r}))}function Re(e,t){re(t),J(ne)}function Le(e,t){se(t)}function De(e){return Y.get(Ce(Ae[e],e))}Object(f["a"])((function(){if(W&&"number"===typeof we&&Ae){var e=ae,t=Ae.length,n=t-1;if(!t)return void Me(0,null);for(var r=0;r<t;r+=1){var i=De(r);if(z&&(i=i||0),void 0===i){Me(r-1,void 0,!0);break}if(e+=i,0===n&&e<=W||r===n-1&&e+De(n)<=W){Me(n,null);break}if(e+we>W){Me(r-1,e-i-ae+ne);break}}k&&De(0)+ae>W&&fe(null)}}),[W,Y,ne,ae,Ce,Ae]);var Ne=be&&!!ke.length,Fe={};null!==le&&Ee&&(Fe={position:"absolute",left:le,top:0});var ze,Be={prefixCls:xe,responsive:Ee,component:D,invalidate:Se},Ue=v?function(e,t){var n=Ce(e,t);return s["createElement"](T.Provider,{key:n,value:Object(i["a"])(Object(i["a"])({},Be),{},{order:t,item:e,itemKey:n,registerSize:Ie,display:t<=me})},v(e,t))}:function(e,t){var n=Ce(e,t);return s["createElement"](m,Object(r["a"])({},Be,{order:t,key:n,item:e,renderItem:Te,itemKey:n,registerSize:Ie,display:t<=me}))},Ve={order:Ne?me:Number.MAX_SAFE_INTEGER,className:"".concat(xe,"-rest"),registerSize:Re,display:Ne};if(A)A&&(ze=s["createElement"](T.Provider,{value:Object(i["a"])(Object(i["a"])({},Be),Ve)},A(ke)));else{var He=j||I;ze=s["createElement"](m,Object(r["a"])({},Be,Ve),"function"===typeof He?He(ke):He)}var Ge=s["createElement"](L,Object(r["a"])({className:c()(!Se&&u,E),style:O,ref:t},F),Ae.map(Ue),je?ze:null,k&&s["createElement"](m,Object(r["a"])({},Be,{responsive:Oe,responsiveDisabled:!Ee,order:me,className:"".concat(xe,"-suffix"),registerSize:Le,display:!0,style:Fe}),k));return Oe&&(Ge=s["createElement"](l["a"],{onResize:Pe,disabled:!Ee},Ge)),Ge}var L=s["forwardRef"](R);L.displayName="Overflow",L.Item=k,L.RESPONSIVE=M,L.INVALIDATE=P;var D=L;t["a"]=D},"9/5/":function(e,t,n){(function(t){var n="Expected a function",r=NaN,i="[object Symbol]",o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt,l="object"==typeof t&&t&&t.Object===Object&&t,f="object"==typeof self&&self&&self.Object===Object&&self,p=l||f||Function("return this")(),h=Object.prototype,d=h.toString,v=Math.max,m=Math.min,g=function(){return p.Date.now()};function y(e,t,r){var i,o,a,s,u,c,l=0,f=!1,p=!1,h=!0;if("function"!=typeof e)throw new TypeError(n);function d(t){var n=i,r=o;return i=o=void 0,l=t,s=e.apply(r,n),s}function y(e){return l=e,u=setTimeout(O,t),f?d(e):s}function _(e){var n=e-c,r=e-l,i=t-n;return p?m(i,a-r):i}function x(e){var n=e-c,r=e-l;return void 0===c||n>=t||n<0||p&&r>=a}function O(){var e=g();if(x(e))return E(e);u=setTimeout(O,_(e))}function E(e){return u=void 0,h&&i?d(e):(i=o=void 0,s)}function S(){void 0!==u&&clearTimeout(u),l=0,i=c=o=u=void 0}function j(){return void 0===u?s:E(g())}function A(){var e=g(),n=x(e);if(i=arguments,o=this,c=e,n){if(void 0===u)return y(c);if(p)return u=setTimeout(O,t),d(c)}return void 0===u&&(u=setTimeout(O,t)),s}return t=w(t)||0,b(r)&&(f=!!r.leading,p="maxWait"in r,a=p?v(w(r.maxWait)||0,t):a,h="trailing"in r?!!r.trailing:h),A.cancel=S,A.flush=j,A}function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function _(e){return!!e&&"object"==typeof e}function x(e){return"symbol"==typeof e||_(e)&&d.call(e)==i}function w(e){if("number"==typeof e)return e;if(x(e))return r;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=s.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):a.test(e)?r:+e}e.exports=y}).call(this,n("IyRk"))},"90hW":function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},"93I0":function(e,t,n){var r=n("VpIT"),i=n("kOOl"),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},"94Xl":function(e,t,n){var r=n("JiZb");r("Array")},"97ZR":function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,o=Object.create(i.prototype),a=new k(r||[]);return o._invoke=E(e,n,a),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}e.wrap=u;var l="suspendedStart",f="suspendedYield",p="executing",h="completed",d={};function v(){}function m(){}function g(){}var y={};y[o]=function(){return this};var b=Object.getPrototypeOf,_=b&&b(b(C([])));_&&_!==n&&r.call(_,o)&&(y=_);var x=g.prototype=v.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function O(e,t){function n(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;function o(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}this._invoke=o}function E(e,t,n){var r=l;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return T()}n.method=i,n.arg=o;while(1){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=c(e,t,n);if("normal"===u.type){if(r=n.done?h:f,u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator["return"]&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return d;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=c(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,d;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,d):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function C(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){while(++i<e.length)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:T}}function T(){return{value:t,done:!0}}return m.prototype=x.constructor=g,g.constructor=m,g[s]=m.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},w(O.prototype),O.prototype[a]=function(){return this},e.AsyncIterator=O,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new O(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(x),x[s]="Generator",x[o]=function(){return this},x.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),d}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},"9Baz":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"message",{enumerable:!0,get:function(){return r["default"]}}),Object.defineProperty(t,"notification",{enumerable:!0,get:function(){return i["default"]}}),n("miYZ");var r=o(n("tsqr"));n("/xke");var i=o(n("TeRw"));function o(e){return e&&e.__esModule?e:{default:e}}},"9D6x":function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("HAuM");r({target:"Map",proto:!0,real:!0,forced:i},{update:function(e,t){var n=o(this),r=arguments.length;a(t);var i=n.has(e);if(!i&&r<3)throw TypeError("Updating absent value");var s=i?n.get(e):a(r>2?arguments[2]:void 0)(e,n);return n.set(e,t(s,e,n)),n}})},"9Fde":function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r["throw"](e))}catch(t){o(t)}}function u(e){e.done?n(e.value):i(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return u([e,t])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.Container=void 0;var a=n("LgvC"),s=n("MON2"),u=n("FV85"),c=n("xfSm"),l=n("wnjb"),f=n("h7MG"),p=n("aPG5"),h=n("gzZq"),d=n("d9O0"),v=n("ujMp"),m=n("HpQ9"),g=n("AwBQ"),y=function(){function e(e){this._appliedMiddleware=[];var t=e||{};if("object"!==typeof t)throw new Error(""+s.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===t.defaultScope)t.defaultScope=u.BindingScopeEnum.Transient;else if(t.defaultScope!==u.BindingScopeEnum.Singleton&&t.defaultScope!==u.BindingScopeEnum.Transient&&t.defaultScope!==u.BindingScopeEnum.Request)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!==typeof t.autoBindInjectable)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!==typeof t.skipBaseClassChecks)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=d.id(),this._bindingDictionary=new g.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new l.MetadataReader}return e.merge=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var a=new e,s=o([t,n],r).map((function(e){return f.getBindingDictionary(e)})),u=f.getBindingDictionary(a);function c(e,t){e.traverse((function(e,n){n.forEach((function(e){t.add(e.serviceIdentifier,e.clone())}))}))}return s.forEach((function(e){c(e,u)})),a},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=e;r<i.length;r++){var o=i[r],a=n(o.id);o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(this,void 0,void 0,(function(){var t,n,r,o,a;return i(this,(function(i){switch(i.label){case 0:t=this._getContainerModuleHelpersFactory(),n=0,r=e,i.label=1;case 1:return n<r.length?(o=r[n],a=t(o.id),[4,o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.unload=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(e){return function(t){return t.moduleId===e}};t.forEach((function(t){var n=r(t.id);e._bindingDictionary.removeByCondition(n)}))},e.prototype.bind=function(e){var t=this.options.defaultScope||u.BindingScopeEnum.Transient,n=new a.Binding(e,t);return this._bindingDictionary.add(e,n),new h.BindingToSyntax(n)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.unbind=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error(s.CANNOT_UNBIND+" "+v.getServiceIdentifierAsString(e))}},e.prototype.unbindAll=function(){this._bindingDictionary=new g.Lookup},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,c.NAMED_TAG,t)},e.prototype.isBoundTagged=function(e,t,n){var r=!1;if(this._bindingDictionary.hasKey(e)){var i=this._bindingDictionary.get(e),o=f.createMockRequest(this,e,t,n);r=i.some((function(e){return e.constraint(o)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(e,t,n)),r},e.prototype.snapshot=function(){this._snapshots.push(m.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error(s.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._middleware=e.middleware},e.prototype.createChild=function(t){var n=new e(t||this.options);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._appliedMiddleware=this._appliedMiddleware.concat(e);var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((function(e,t){return t(e)}),n)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){return this._get(!1,!1,u.TargetTypeEnum.Variable,e)},e.prototype.getTagged=function(e,t,n){return this._get(!1,!1,u.TargetTypeEnum.Variable,e,t,n)},e.prototype.getNamed=function(e,t){return this.getTagged(e,c.NAMED_TAG,t)},e.prototype.getAll=function(e){return this._get(!0,!0,u.TargetTypeEnum.Variable,e)},e.prototype.getAllTagged=function(e,t,n){return this._get(!1,!0,u.TargetTypeEnum.Variable,e,t,n)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,c.NAMED_TAG,t)},e.prototype.resolve=function(e){var t=this.createChild();return t.bind(e).toSelf(),this._appliedMiddleware.forEach((function(e){t.applyMiddleware(e)})),t.get(e)},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t},n=function(n){return function(r){var i=e.bind.bind(e),o=i(r);return t(o,n),o}},r=function(t){return function(t){var n=e.unbind.bind(e);n(t)}},i=function(t){return function(t){var n=e.isBound.bind(e);return n(t)}},o=function(n){return function(r){var i=e.rebind.bind(e),o=i(r);return t(o,n),o}};return function(e){return{bindFunction:n(e),isboundFunction:i(e),rebindFunction:o(e),unbindFunction:r(e)}}},e.prototype._get=function(e,t,n,r,i,o){var a=null,u={avoidConstraints:e,contextInterceptor:function(e){return e},isMultiInject:t,key:i,serviceIdentifier:r,targetType:n,value:o};if(this._middleware){if(a=this._middleware(u),void 0===a||null===a)throw new Error(s.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(u);return a},e.prototype._planAndResolve=function(){var e=this;return function(t){var n=f.plan(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);n=t.contextInterceptor(n);var r=p.resolve(n);return r}},e}();t.Container=y},"9N29":function(e,t,n){"use strict";var r=n("I+eb"),i=n("1Y/n").right,o=n("pkCn"),a=n("rkAj"),s=o("reduceRight"),u=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!s||!u},{reduceRight:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"9R94":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=!0,i="Invariant failed";function o(e,t){if(!e){if(r)throw new Error(i);var n="function"===typeof t?t():t,o=n?"".concat(i,": ").concat(n):i;throw new Error(o)}}},"9d/t":function(e,t,n){var r=n("AO7/"),i=n("xrYK"),o=n("tiKp"),a=o("toStringTag"),s="Arguments"==i(function(){return arguments}()),u=function(e,t){try{return e[t]}catch(n){}};e.exports=r?i:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=u(t=Object(e),a))?n:s?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},"9kvl":function(e,t,n){"use strict";n.d(t,"a",(function(){return i["b"]})),n.d(t,"b",(function(){return o["a"]}));var r,i=n("FfOG"),o=n("bCY9");n("I5X1"),n("qLMh"),n("9og8"),n("PpiC"),n("k1fw"),n("ZqBY"),n("rlch"),n("9Baz"),n("0iz5");(function(e){e[e["SILENT"]=0]="SILENT",e[e["WARN_MESSAGE"]=1]="WARN_MESSAGE",e[e["ERROR_MESSAGE"]=2]="ERROR_MESSAGE",e[e["NOTIFICATION"]=4]="NOTIFICATION",e[e["REDIRECT"]=9]="REDIRECT"})(r||(r={}));n("qhky")},"9og8":function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,u,"next",e)}function u(e){r(a,i,o,s,u,"throw",e)}s(void 0)}))}}n.d(t,"a",(function(){return i}))},"9xmf":function(e,t,n){var r=n("EdiO");function i(e){if(Array.isArray(e))return r(e)}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},A2ZE:function(e,t,n){var r=n("HAuM");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},A90E:function(e,t,n){var r=n("6sVZ"),i=n("V6Ve"),o=Object.prototype,a=o.hasOwnProperty;function s(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}e.exports=s},AJpP:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("FER5"),i=n("LuSS"),o=2,a=.16,s=.05,u=.05,c=.15,l=5,f=4,p=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function h(e){var t=e.r,n=e.g,i=e.b,o=Object(r["h"])(t,n,i);return{h:360*o.h,s:o.s,v:o.v}}function d(e){var t=e.r,n=e.g,i=e.b;return"#".concat(Object(r["f"])(t,n,i,!1))}function v(e,t,n){var r=n/100,i={r:(t.r-e.r)*r+e.r,g:(t.g-e.g)*r+e.g,b:(t.b-e.b)*r+e.b};return i}function m(e,t,n){var r;return r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-o*t:Math.round(e.h)+o*t:n?Math.round(e.h)+o*t:Math.round(e.h)-o*t,r<0?r+=360:r>=360&&(r-=360),r}function g(e,t,n){return 0===e.h&&0===e.s?e.s:(r=n?e.s-a*t:t===f?e.s+a:e.s+s*t,r>1&&(r=1),n&&t===l&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function y(e,t,n){var r;return r=n?e.v+u*t:e.v-c*t,r>1&&(r=1),Number(r.toFixed(2))}function b(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=Object(i["a"])(e),o=l;o>0;o-=1){var a=h(r),s=d(Object(i["a"])({h:m(a,o,!0),s:g(a,o,!0),v:y(a,o,!0)}));n.push(s)}n.push(d(r));for(var u=1;u<=f;u+=1){var c=h(r),b=d(Object(i["a"])({h:m(c,u),s:g(c,u),v:y(c,u)}));n.push(b)}return"dark"===t.theme?p.map((function(e){var r=e.index,o=e.opacity,a=d(v(Object(i["a"])(t.backgroundColor||"#141414"),Object(i["a"])(n[r]),100*o));return a})):n}var _={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},x={},w={};Object.keys(_).forEach((function(e){x[e]=b(_[e]),x[e].primary=x[e][5],w[e]=b(_[e],{theme:"dark",backgroundColor:"#141414"}),w[e].primary=w[e][5]}));x.red,x.volcano,x.gold,x.orange,x.yellow,x.lime,x.green,x.cyan,x.blue,x.geekblue,x.purple,x.magenta,x.grey},AK2Z:function(e,t,n){},AM7I:function(e,t,n){"use strict";var r,i=SyntaxError,o=Function,a=TypeError,s=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(t){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(T){u=null}var c=function(){throw new a},l=u?function(){try{return c}catch(e){try{return u(arguments,"callee").get}catch(t){return c}}}():c,f=n("UVaH")(),p=Object.getPrototypeOf||function(e){return e.__proto__},h={},d="undefined"===typeof Uint8Array?r:p(Uint8Array),v={"%AggregateError%":"undefined"===typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":f?p([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":"undefined"===typeof Atomics?r:Atomics,"%BigInt%":"undefined"===typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":h,"%Int8Array%":"undefined"===typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f?p(p([][Symbol.iterator]())):r,"%JSON%":"object"===typeof JSON?JSON:r,"%Map%":"undefined"===typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&f?p((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?r:Promise,"%Proxy%":"undefined"===typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&f?p((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f?p(""[Symbol.iterator]()):r,"%Symbol%":f?Symbol:r,"%SyntaxError%":i,"%ThrowTypeError%":l,"%TypedArray%":d,"%TypeError%":a,"%Uint8Array%":"undefined"===typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?r:WeakSet};try{null.error}catch(T){var m=p(p(T));v["%Error.prototype%"]=m}var g=function e(t){var n;if("%AsyncFunction%"===t)n=s("async function () {}");else if("%GeneratorFunction%"===t)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=s("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(n=p(i.prototype))}return v[t]=n,n},y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=n("D3zA"),_=n("oNNP"),x=b.call(Function.call,Array.prototype.concat),w=b.call(Function.apply,Array.prototype.splice),O=b.call(Function.call,String.prototype.replace),E=b.call(Function.call,String.prototype.slice),S=b.call(Function.call,RegExp.prototype.exec),j=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,A=/\\(\\)?/g,k=function(e){var t=E(e,0,1),n=E(e,-1);if("%"===t&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return O(e,j,(function(e,t,n,i){r[r.length]=n?O(i,A,"$1"):t||e})),r},C=function(e,t){var n,r=e;if(_(y,r)&&(n=y[r],r="%"+n[0]+"%"),_(v,r)){var o=v[r];if(o===h&&(o=g(r)),"undefined"===typeof o&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new i("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new a('"allowMissing" argument must be a boolean');if(null===S(/^%?[^%]*%?$/,e))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=k(e),r=n.length>0?n[0]:"",o=C("%"+r+"%",t),s=o.name,c=o.value,l=!1,f=o.alias;f&&(r=f[0],w(n,x([0,1],f)));for(var p=1,h=!0;p<n.length;p+=1){var d=n[p],m=E(d,0,1),g=E(d,-1);if(('"'===m||"'"===m||"`"===m||'"'===g||"'"===g||"`"===g)&&m!==g)throw new i("property names with quotes must have matching quotes");if("constructor"!==d&&h||(l=!0),r+="."+d,s="%"+r+"%",_(v,s))c=v[s];else if(null!=c){if(!(d in c)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(u&&p+1>=n.length){var y=u(c,d);h=!!y,c=h&&"get"in y&&!("originalValue"in y.get)?y.get:c[d]}else h=_(c,d),c=c[d];h&&!l&&(v[s]=c)}}return c}},"AO7/":function(e,t,n){var r=n("tiKp"),i=r("toStringTag"),o={};o[i]="z",e.exports="[object z]"===String(o)},AP2z:function(e,t,n){var r=n("nmnc"),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;function u(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(u){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}e.exports=u},APxj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("Ucsi");function i(e,t){void 0===t&&(t=!0);var n=r.makePropertyInjectDecorator(e,t),i=r.makePropertyInjectNamedDecorator(e,t),o=r.makePropertyInjectTaggedDecorator(e,t),a=r.makePropertyMultiInjectDecorator(e,t);return{lazyInject:n,lazyInjectNamed:i,lazyInjectTagged:o,lazyMultiInject:a}}t["default"]=i},AQPS:function(e,t,n){},AVoK:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("Cg3G");r({target:"Set",proto:!0,real:!0,forced:i},{deleteAll:function(){return o.apply(this,arguments)}})},AfwI:function(e,t,n){var r;(function(i,o,a,s){"use strict";var u,c="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,l="undefined"!==typeof wx&&null!==wx&&("undefined"!==typeof wx.request||"undefined"!==typeof wx.miniProgram),f=c||l,p=["","webkit","Moz","MS","ms","o"],h=f?"":o.createElement("div"),d="function",v=Math.round,m=Math.abs,g=Date.now;function y(e,t,n){return setTimeout(S(e,n),t)}function b(e,t,n){return!!Array.isArray(e)&&(_(e,n[t],n),!0)}function _(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==s){r=0;while(r<e.length)t.call(n,e[r],r,e),r++}else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function x(e,t,n){var r="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),e.apply(this,arguments)}}u="function"!==typeof Object.assign?function(e){if(e===s||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t}:Object.assign;var w=x((function(e,t,n){var r=Object.keys(t),i=0;while(i<r.length)(!n||n&&e[r[i]]===s)&&(e[r[i]]=t[r[i]]),i++;return e}),"extend","Use `assign`."),O=x((function(e,t){return w(e,t,!0)}),"merge","Use `assign`.");function E(e,t,n){var r,i=t.prototype;r=e.prototype=Object.create(i),r.constructor=e,r._super=i,n&&u(r,n)}function S(e,t){return function(){return e.apply(t,arguments)}}function j(e,t){return typeof e==d?e.apply(t&&t[0]||s,t):e}function A(e,t){return e===s?t:e}function k(e,t,n){_(P(t),(function(t){e.addEventListener(t,n,!1)}))}function C(e,t,n){_(P(t),(function(t){e.removeEventListener(t,n,!1)}))}function T(e,t){while(e){if(e==t)return!0;e=e.parentNode}return!1}function M(e,t){return e.indexOf(t)>-1}function P(e){return e.trim().split(/\s+/g)}function I(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);var r=0;while(r<e.length){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function R(e){return Array.prototype.slice.call(e,0)}function L(e,t,n){var r=[],i=[],o=0;while(o<e.length){var a=t?e[o][t]:e[o];I(i,a)<0&&r.push(e[o]),i[o]=a,o++}return n&&(r=t?r.sort((function(e,n){return e[t]>n[t]})):r.sort()),r}function D(e,t){var n,r,i=t[0].toUpperCase()+t.slice(1),o=0;while(o<p.length){if(n=p[o],r=n?n+i:t,r in e)return r;o++}return s}var N=1;function F(){return N++}function z(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||i}var B=/mobile|tablet|ip(ad|hone|od)|android/i,U="ontouchstart"in i,V=D(i,"PointerEvent")!==s,H=U&&B.test(navigator.userAgent),G="touch",W="pen",q="mouse",Z="kinect",Y=25,X=1,K=2,$=4,Q=8,J=1,ee=2,te=4,ne=8,re=16,ie=ee|te,oe=ne|re,ae=ie|oe,se=["x","y"],ue=["clientX","clientY"];function ce(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){j(e.options.enable,[e])&&n.handler(t)},this.init()}function le(e){var t,n=e.options.inputClass;return t=n||(V?Me:H?ze:U?He:je),new t(e,fe)}function fe(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,o=t&X&&r-i===0,a=t&($|Q)&&r-i===0;n.isFirst=!!o,n.isFinal=!!a,o&&(e.session={}),n.eventType=t,pe(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function pe(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=ve(t)),i>1&&!n.firstMultiple?n.firstMultiple=ve(t):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,u=t.center=me(r);t.timeStamp=g(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=_e(s,u),t.distance=be(s,u),he(n,t),t.offsetDirection=ye(t.deltaX,t.deltaY);var c=ge(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=c.x,t.overallVelocityY=c.y,t.overallVelocity=m(c.x)>m(c.y)?c.x:c.y,t.scale=a?we(a.pointers,r):1,t.rotation=a?xe(a.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,de(n,t);var l=e.element;T(t.srcEvent.target,l)&&(l=t.srcEvent.target),t.target=l}function he(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},o=e.prevInput||{};t.eventType!==X&&o.eventType!==$||(i=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}function de(e,t){var n,r,i,o,a=e.lastInterval||t,u=t.timeStamp-a.timeStamp;if(t.eventType!=Q&&(u>Y||a.velocity===s)){var c=t.deltaX-a.deltaX,l=t.deltaY-a.deltaY,f=ge(u,c,l);r=f.x,i=f.y,n=m(f.x)>m(f.y)?f.x:f.y,o=ye(c,l),e.lastInterval=t}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;t.velocity=n,t.velocityX=r,t.velocityY=i,t.direction=o}function ve(e){var t=[],n=0;while(n<e.pointers.length)t[n]={clientX:v(e.pointers[n].clientX),clientY:v(e.pointers[n].clientY)},n++;return{timeStamp:g(),pointers:t,center:me(t),deltaX:e.deltaX,deltaY:e.deltaY}}function me(e){var t=e.length;if(1===t)return{x:v(e[0].clientX),y:v(e[0].clientY)};var n=0,r=0,i=0;while(i<t)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:v(n/t),y:v(r/t)}}function ge(e,t,n){return{x:t/e||0,y:n/e||0}}function ye(e,t){return e===t?J:m(e)>=m(t)?e<0?ee:te:t<0?ne:re}function be(e,t,n){n||(n=se);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function _e(e,t,n){n||(n=se);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,r)/Math.PI}function xe(e,t){return _e(t[1],t[0],ue)+_e(e[1],e[0],ue)}function we(e,t){return be(t[0],t[1],ue)/be(e[0],e[1],ue)}ce.prototype={handler:function(){},init:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(z(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(z(this.element),this.evWin,this.domHandler)}};var Oe={mousedown:X,mousemove:K,mouseup:$},Ee="mousedown",Se="mousemove mouseup";function je(){this.evEl=Ee,this.evWin=Se,this.pressed=!1,ce.apply(this,arguments)}E(je,ce,{handler:function(e){var t=Oe[e.type];t&X&&0===e.button&&(this.pressed=!0),t&K&&1!==e.which&&(t=$),this.pressed&&(t&$&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:q,srcEvent:e}))}});var Ae={pointerdown:X,pointermove:K,pointerup:$,pointercancel:Q,pointerout:Q},ke={2:G,3:W,4:q,5:Z},Ce="pointerdown",Te="pointermove pointerup pointercancel";function Me(){this.evEl=Ce,this.evWin=Te,ce.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}f||!i.MSPointerEvent||i.PointerEvent||(Ce="MSPointerDown",Te="MSPointerMove MSPointerUp MSPointerCancel"),E(Me,ce,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=Ae[r],o=ke[e.pointerType]||e.pointerType,a=o==G,s=I(t,e.pointerId,"pointerId");i&X&&(0===e.button||a)?s<0&&(t.push(e),s=t.length-1):i&($|Q)&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(s,1))}});var Pe={touchstart:X,touchmove:K,touchend:$,touchcancel:Q},Ie="touchstart",Re="touchstart touchmove touchend touchcancel";function Le(){this.evTarget=Ie,this.evWin=Re,this.started=!1,ce.apply(this,arguments)}function De(e,t){var n=R(e.touches),r=R(e.changedTouches);return t&($|Q)&&(n=L(n.concat(r),"identifier",!0)),[n,r]}E(Le,ce,{handler:function(e){var t=Pe[e.type];if(t===X&&(this.started=!0),this.started){var n=De.call(this,e,t);t&($|Q)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:G,srcEvent:e})}}});var Ne={touchstart:X,touchmove:K,touchend:$,touchcancel:Q},Fe="touchstart touchmove touchend touchcancel";function ze(){this.evTarget=Fe,this.targetIds={},ce.apply(this,arguments)}function Be(e,t){var n=R(e.touches),r=this.targetIds;if(t&(X|K)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=R(e.changedTouches),s=[],u=this.target;if(o=n.filter((function(e){return T(e.target,u)})),t===X){i=0;while(i<o.length)r[o[i].identifier]=!0,i++}i=0;while(i<a.length)r[a[i].identifier]&&s.push(a[i]),t&($|Q)&&delete r[a[i].identifier],i++;return s.length?[L(o.concat(s),"identifier",!0),s]:void 0}E(ze,ce,{handler:function(e){var t=Ne[e.type],n=Be.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:G,srcEvent:e})}});var Ue=2500,Ve=25;function He(){ce.apply(this,arguments);var e=S(this.handler,this);this.touch=new ze(this.manager,e),this.mouse=new je(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Ge(e,t){e&X?(this.primaryTouch=t.changedPointers[0].identifier,We.call(this,t)):e&($|Q)&&We.call(this,t)}function We(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches,i=function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)};setTimeout(i,Ue)}}function qe(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(t-i.x),a=Math.abs(n-i.y);if(o<=Ve&&a<=Ve)return!0}return!1}E(He,ce,{handler:function(e,t,n){var r=n.pointerType==G,i=n.pointerType==q;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)Ge.call(this,t,n);else if(i&&qe.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ze=f?s:D(h.style,"touchAction"),Ye=Ze!==s,Xe="compute",Ke="auto",$e="manipulation",Qe="none",Je="pan-x",et="pan-y",tt=it();function nt(e,t){this.manager=e,this.set(t)}function rt(e){if(M(e,Qe))return Qe;var t=M(e,Je),n=M(e,et);return t&&n?Qe:t||n?t?Je:et:M(e,$e)?$e:Ke}function it(){if(!Ye)return!1;var e={};if(f)return e;var t=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){e[n]=!t||i.CSS.supports("touch-action",n)})),e}nt.prototype={set:function(e){e==Xe&&(e=this.compute()),Ye&&this.manager.element.style&&tt[e]&&(this.manager.element.style[Ze]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return _(this.manager.recognizers,(function(t){j(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),rt(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,i=M(r,Qe)&&!tt[Qe],o=M(r,et)&&!tt[et],a=M(r,Je)&&!tt[Je];if(i){var s=1===e.pointers.length,u=e.distance<2,c=e.deltaTime<250;if(s&&u&&c)return}if(!a||!o)return i||o&&n&ie||a&&n&oe?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var ot=1,at=2,st=4,ut=8,ct=ut,lt=16,ft=32;function pt(e){this.options=u({},this.defaults,e||{}),this.id=F(),this.manager=null,this.options.enable=A(this.options.enable,!0),this.state=ot,this.simultaneous={},this.requireFail=[]}function ht(e){return e&lt?"cancel":e&ut?"end":e&st?"move":e&at?"start":""}function dt(e){return e==re?"down":e==ne?"up":e==ee?"left":e==te?"right":""}function vt(e,t){var n=t.manager;return n?n.get(e):e}function mt(){pt.apply(this,arguments)}function gt(){mt.apply(this,arguments),this.pX=null,this.pY=null}function yt(){mt.apply(this,arguments)}function bt(){pt.apply(this,arguments),this._timer=null,this._input=null}function _t(){mt.apply(this,arguments)}function xt(){mt.apply(this,arguments)}function wt(){pt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ot(e,t){return t=t||{},t.recognizers=A(t.recognizers,Ot.defaults.preset),new jt(e,t)}pt.prototype={defaults:{},set:function(e){return u(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(b(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=vt(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return b(e,"dropRecognizeWith",this)||(e=vt(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(b(e,"requireFailure",this))return this;var t=this.requireFail;return e=vt(e,this),-1===I(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(b(e,"dropRequireFailure",this))return this;e=vt(e,this);var t=I(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function r(n){t.manager.emit(n,e)}n<ut&&r(t.options.event+ht(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=ut&&r(t.options.event+ht(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=ft},canEmit:function(){var e=0;while(e<this.requireFail.length){if(!(this.requireFail[e].state&(ft|ot)))return!1;e++}return!0},recognize:function(e){var t=u({},e);if(!j(this.options.enable,[this,t]))return this.reset(),void(this.state=ft);this.state&(ct|lt|ft)&&(this.state=ot),this.state=this.process(t),this.state&(at|st|ut|lt)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},E(mt,pt,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(at|st),i=this.attrTest(e);return r&&(n&Q||!i)?t|lt:r||i?n&$?t|ut:t&at?t|st:at:ft}}),E(gt,mt,{defaults:{event:"pan",threshold:10,pointers:1,direction:ae},getTouchAction:function(){var e=this.options.direction,t=[];return e&ie&&t.push(et),e&oe&&t.push(Je),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,o=e.deltaX,a=e.deltaY;return i&t.direction||(t.direction&ie?(i=0===o?J:o<0?ee:te,n=o!=this.pX,r=Math.abs(e.deltaX)):(i=0===a?J:a<0?ne:re,n=a!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return mt.prototype.attrTest.call(this,e)&&(this.state&at||!(this.state&at)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=dt(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),E(yt,mt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Qe]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&at)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),E(bt,pt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ke]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!r||!n||e.eventType&($|Q)&&!i)this.reset();else if(e.eventType&X)this.reset(),this._timer=y((function(){this.state=ct,this.tryEmit()}),t.time,this);else if(e.eventType&$)return ct;return ft},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===ct&&(e&&e.eventType&$?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=g(),this.manager.emit(this.options.event,this._input)))}}),E(_t,mt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Qe]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&at)}}),E(xt,mt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:ie|oe,pointers:1},getTouchAction:function(){return gt.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(ie|oe)?t=e.overallVelocity:n&ie?t=e.overallVelocityX:n&oe&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&m(t)>this.options.velocity&&e.eventType&$},emit:function(e){var t=dt(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),E(wt,pt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[$e]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),e.eventType&X&&0===this.count)return this.failTimeout();if(r&&i&&n){if(e.eventType!=$)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||be(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,a&&o?this.count+=1:this.count=1,this._input=e;var s=this.count%t.taps;if(0===s)return this.hasRequireFailures()?(this._timer=y((function(){this.state=ct,this.tryEmit()}),t.interval,this),at):ct}return ft},failTimeout:function(){return this._timer=y((function(){this.state=ft}),this.options.interval,this),ft},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ct&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ot.VERSION="2.0.7",Ot.defaults={domEvents:!1,touchAction:Xe,enable:!0,inputTarget:null,inputClass:null,preset:[[_t,{enable:!1}],[yt,{enable:!1},["rotate"]],[xt,{direction:ie}],[gt,{direction:ie},["swipe"]],[wt],[wt,{event:"doubletap",taps:2},["tap"]],[bt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Et=1,St=2;function jt(e,t){this.options=u({},Ot.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=le(this),this.touchAction=new nt(this,this.options.touchAction),At(this,!0),_(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function At(e,t){var n,r=e.element;r.style&&(_(e.options.cssProps,(function(i,o){n=D(r.style,o),t?(e.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=e.oldCssProps[n]||""})),t||(e.oldCssProps={}))}function kt(e,t){if(!f){var n=o.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}}if(jt.prototype={set:function(e){return u(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?St:Et},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,i=t.curRecognizer;(!i||i&&i.state&ct)&&(i=t.curRecognizer=null);var o=0;while(o<r.length)n=r[o],t.stopped===St||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&n.state&(at|st|ut)&&(i=t.curRecognizer=n),o++}},get:function(e){if(e instanceof pt)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(b(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(b(e,"remove",this))return this;if(e=this.get(e),e){var t=this.recognizers,n=I(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==s&&t!==s){var n=this.handlers;return _(P(e),(function(e){n[e]=n[e]||[],n[e].push(t)})),this}},off:function(e,t){if(e!==s){var n=this.handlers;return _(P(e),(function(e){t?n[e]&&n[e].splice(I(n[e],t),1):delete n[e]})),this}},emit:function(e,t){this.options.domEvents&&kt(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};var r=0;while(r<n.length)n[r](t),r++}},destroy:function(){this.element&&At(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},!f){u(Ot,{INPUT_START:X,INPUT_MOVE:K,INPUT_END:$,INPUT_CANCEL:Q,STATE_POSSIBLE:ot,STATE_BEGAN:at,STATE_CHANGED:st,STATE_ENDED:ut,STATE_RECOGNIZED:ct,STATE_CANCELLED:lt,STATE_FAILED:ft,DIRECTION_NONE:J,DIRECTION_LEFT:ee,DIRECTION_RIGHT:te,DIRECTION_UP:ne,DIRECTION_DOWN:re,DIRECTION_HORIZONTAL:ie,DIRECTION_VERTICAL:oe,DIRECTION_ALL:ae,Manager:jt,Input:ce,TouchAction:nt,TouchInput:ze,MouseInput:je,PointerEventInput:Me,TouchMouseInput:He,SingleTouchInput:Le,Recognizer:pt,AttrRecognizer:mt,Tap:wt,Pan:gt,Swipe:xt,Pinch:yt,Rotate:_t,Press:bt,on:k,off:C,each:_,merge:O,extend:w,assign:u,inherit:E,bindFn:S,prefixed:D});var Ct="undefined"!==typeof window?window:"undefined"!==typeof self?self:{};Ct.Hammer=Ot,r=function(){return Ot}.call(t,n,t,e),r===s||(e.exports=r)}})("undefined"!==typeof window?window:{console:null,MSPointerEvent:null,PointerEvent:null,CSS:null},document)},Aib3:function(e,t){function n(e,t){var i,o=e&&e.type;if("FeatureCollection"===o)for(i=0;i<e.features.length;i++)n(e.features[i],t);else if("GeometryCollection"===o)for(i=0;i<e.geometries.length;i++)n(e.geometries[i],t);else if("Feature"===o)n(e.geometry,t);else if("Polygon"===o)r(e.coordinates,t);else if("MultiPolygon"===o)for(i=0;i<e.coordinates.length;i++)r(e.coordinates[i],t);return e}function r(e,t){if(0!==e.length){i(e[0],t);for(var n=1;n<e.length;n++)i(e[n],!t)}}function i(e,t){for(var n=0,r=0,i=0,o=e.length,a=o-1;i<o;a=i++){var s=(e[i][0]-e[a][0])*(e[a][1]+e[i][1]),u=n+s;r+=Math.abs(n)>=Math.abs(s)?n-u+s:s-u+n,n=u}n+r>=0!==!!t&&e.reverse()}e.exports=n},AqCL:function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},AwBQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lookup=void 0;var r=n("MON2"),i=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(e,t){if(null===e||void 0===e)throw new Error(r.NULL_ARGUMENT);if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);var n=this._map.get(e);void 0!==n?(n.push(t),this._map.set(e,n)):this._map.set(e,[t])},e.prototype.get=function(e){if(null===e||void 0===e)throw new Error(r.NULL_ARGUMENT);var t=this._map.get(e);if(void 0!==t)return t;throw new Error(r.KEY_NOT_FOUND)},e.prototype.remove=function(e){if(null===e||void 0===e)throw new Error(r.NULL_ARGUMENT);if(!this._map["delete"](e))throw new Error(r.KEY_NOT_FOUND)},e.prototype.removeByCondition=function(e){var t=this;this._map.forEach((function(n,r){var i=n.filter((function(t){return!e(t)}));i.length>0?t._map.set(r,i):t._map["delete"](r)}))},e.prototype.hasKey=function(e){if(null===e||void 0===e)throw new Error(r.NULL_ARGUMENT);return this._map.has(e)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){e.forEach((function(e){return t.add(n,e.clone())}))})),t},e.prototype.traverse=function(e){this._map.forEach((function(t,n){e(n,t)}))},e}();t.Lookup=i},AwgR:function(e,t,n){var r=n("I+eb"),i=n("eDxR"),o=n("glrk"),a=i.has,s=i.toKey;r({target:"Reflect",stat:!0},{hasOwnMetadata:function(e,t){var n=arguments.length<3?void 0:s(arguments[2]);return a(e,o(t),n)}})},B6y2:function(e,t,n){var r=n("I+eb"),i=n("b1O7").values;r({target:"Object",stat:!0},{values:function(e){return i(e)}})},B8du:function(e,t){function n(){return!1}e.exports=n},B93f:function(e,t,n){"use strict";var r=n("DiGy");function i(e,t){this.layers=e.readFields(o,{},t)}function o(e,t,n){if(3===e){var i=new r(n,n.readVarint()+n.pos);i.length&&(t[i.name]=i)}}e.exports=i},BGb9:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("0GbY"),a=n("glrk"),s=n("HAuM"),u=n("SEBh"),c=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{union:function(e){var t=a(this),n=new(u(t,o("Set")))(t);return c(e,s(n.add),n),n}})},BIHw:function(e,t,n){"use strict";var r=n("I+eb"),i=n("or9q"),o=n("ewvW"),a=n("UMSQ"),s=n("ppGB"),u=n("ZfDv");r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=o(this),n=a(t.length),r=u(t,0);return r.length=i(r,t,t,n,0,void 0===e?1:s(e)),r}})},BTho:function(e,t,n){"use strict";var r=n("HAuM"),i=n("hh1v"),o=[].slice,a={},s=function(e,t,n){if(!(t in a)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";a[t]=Function("C,a","return new C("+r.join(",")+")")}return a[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=o.call(arguments,1),a=function(){var r=n.concat(o.call(arguments));return this instanceof a?s(t,r.length,r):t.apply(e,r)};return i(t.prototype)&&(a.prototype=t.prototype),a}},BU3w:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("MNnm"),i=n("l4aY"),o="data-rc-order",a="rc-util-key",s=new Map;function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):a}function c(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function l(e){return"queue"===e?"prependQueue":e?"prepend":"append"}function f(e){return Array.from((s.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Object(r["a"])())return null;var n=t.csp,i=t.prepend,a=document.createElement("style");a.setAttribute(o,l(i)),null!==n&&void 0!==n&&n.nonce&&(a.nonce=null===n||void 0===n?void 0:n.nonce),a.innerHTML=e;var s=c(t),u=s.firstChild;if(i){if("queue"===i){var p=f(s).filter((function(e){return["prepend","prependQueue"].includes(e.getAttribute(o))}));if(p.length)return s.insertBefore(a,p[p.length-1].nextSibling),a}s.insertBefore(a,u)}else s.appendChild(a);return a}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=c(t);return f(n).find((function(n){return n.getAttribute(u(t))===e}))}function d(e,t){var n=s.get(e);if(!n||!Object(i["a"])(document,n)){var r=p("",t),o=r.parentNode;s.set(e,o),e.removeChild(r)}}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=c(n);d(r,n);var i=h(t,n);if(i){var o,a,s;if(null!==(o=n.csp)&&void 0!==o&&o.nonce&&i.nonce!==(null===(a=n.csp)||void 0===a?void 0:a.nonce))i.nonce=null===(s=n.csp)||void 0===s?void 0:s.nonce;return i.innerHTML!==e&&(i.innerHTML=e),i}var l=p(e,n);return l.setAttribute(u(n),t),l}},"BX/b":function(e,t,n){var r=n("/GqU"),i=n("JBy8").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(t){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(r(e))}},Bs8V:function(e,t,n){var r=n("g6v/"),i=n("0eef"),o=n("XGwC"),a=n("/GqU"),s=n("wE6v"),u=n("UTVS"),c=n("DPsx"),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=a(e),t=s(t,!0),c)try{return l(e,t)}catch(n){}if(u(e,t))return o(!i.f.call(e,t),e[t])}},BsWD:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("a3WO");function i(e,t){if(e){if("string"===typeof e)return Object(r["a"])(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r["a"])(e,t):void 0}}},C1JJ:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("HAuM"),s=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{isDisjointFrom:function(e){var t=o(this),n=a(t.has);return!s(e,(function(e){if(!0===n.call(t,e))return s.stop()})).stopped}})},CH3K:function(e,t){function n(e,t){var n=-1,r=t.length,i=e.length;while(++n<r)e[i+n]=t[n];return e}e.exports=n},CQ6b:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),i=n.n(r),o=n("dEAq"),a=n("H1Ra"),s=n("dMo/"),u=n("nKUr"),c=i.a.memo((e=>{e.demos;return Object(u["jsx"])(u["Fragment"],{children:Object(u["jsxs"])("div",{className:"markdown",children:[Object(u["jsxs"])("h2",{id:"marker-props",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#marker-props","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"Marker Props"]}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"prop name"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"option"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"marker \u914d\u7f6e\u9879"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"lnglat"}),Object(u["jsx"])("td",{children:"`Array"}),Object(u["jsx"])("td",{children:"Object`"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"onMarkerLoaded"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Function"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"layer \u56de\u8c03\u51fd\u6570"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"children"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"React.ReactNode"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"\u5b50\u7ec4\u4ef6"})]})]})]}),Object(u["jsxs"])("h3",{id:"option",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#option","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"option"]}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"prop name"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"color"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"blue"})}),Object(u["jsx"])("td",{children:"marker \u914d\u7f6e\u9879"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"anchor"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"center, top, top-left, top-right, bottom, bottom-left,bottom-right,left, right"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"offsets"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Array[x,y]"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"marker \u4f4d\u7f6e\u504f\u79fb"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"extData"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"object"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"marker \u5c5e\u6027\u6570\u636e"})]})]})]}),Object(u["jsxs"])("h2",{id:"maker-\u4e8b\u4ef6",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#maker-\u4e8b\u4ef6","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"Maker \u4e8b\u4ef6"]}),Object(u["jsx"])("p",{children:"\u901a\u8fc7 onMarkerLoaded \u65b9\u6cd5\u83b7\u53d6 Marker\b \u5b9e\u4f8b\u76d1\u542c"}),Object(u["jsxs"])("h2",{id:"\u5b9e\u4f8b",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#\u5b9e\u4f8b","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u5b9e\u4f8b"]}),Object(u["jsx"])(a["a"],{code:"import { Marker } from '@antv/l7-react';\n<Marker\n  option={{\n    color: 'red',\n  }}\n  lnglat={[120, 32]}\n/>;",lang:"jsx"})]})})}));t["default"]=e=>{var t=i.a.useContext(o["context"]),n=t.demos;return i.a.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),Object(u["jsx"])(c,{demos:n})}},CUyW:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("0GbY"),a=n("glrk"),s=n("HAuM"),u=n("A2ZE"),c=n("SEBh"),l=n("Sssf"),f=n("ImZN");r({target:"Map",proto:!0,real:!0,forced:i},{mapValues:function(e){var t=a(this),n=l(t),r=u(e,arguments.length>1?arguments[1]:void 0,3),i=new(c(t,o("Map"))),p=s(i.set);return f(n,(function(e,n){p.call(i,e,r(n,e,t))}),void 0,!0,!0),i}})},Cg3G:function(e,t,n){"use strict";var r=n("glrk"),i=n("HAuM");e.exports=function(){for(var e,t=r(this),n=i(t["delete"]),o=!0,a=0,s=arguments.length;a<s;a++)e=n.call(t,arguments[a]),o=o&&e;return!!o}},Co1j:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("HAuM"),s=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{isSupersetOf:function(e){var t=o(this),n=a(t.has);return!s(e,(function(e){if(!1===n.call(t,e))return s.stop()})).stopped}})},Cwc5:function(e,t,n){var r=n("NKxu"),i=n("Npjl");function o(e,t){var n=i(e,t);return r(n)?n:void 0}e.exports=o},CyXQ:function(e,t,n){var r=n("ppGB"),i=n("UMSQ");e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length or index");return n}},D3zA:function(e,t,n){"use strict";var r=n("aI7X");e.exports=Function.prototype.bind||r},D9lx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingInWhenOnSyntax=void 0;var r=n("6AGu"),i=n("406g"),o=n("z4Hk"),a=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(e)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingInWhenOnSyntax=a},DEfu:function(e,t,n){var r=n("2oRo"),i=n("1E5z");i(r.JSON,"JSON",!0)},DMt2:function(e,t,n){var r=n("UMSQ"),i=n("EUja"),o=n("HYAF"),a=Math.ceil,s=function(e){return function(t,n,s){var u,c,l=String(o(t)),f=l.length,p=void 0===s?" ":String(s),h=r(n);return h<=f||""==p?l:(u=h-f,c=i.call(p,a(u/p.length)),c.length>u&&(c=c.slice(0,u)),e?l+c:c+l)}};e.exports={start:s(!1),end:s(!0)}},DPsx:function(e,t,n){var r=n("g6v/"),i=n("0Dky"),o=n("zBJ4");e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},DSFK:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,"a",(function(){return r}))},DSRE:function(e,t,n){(function(e){var r=n("Kz5y"),i=n("B8du"),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o,u=s?r.Buffer:void 0,c=u?u.isBuffer:void 0,l=c||i;e.exports=l}).call(this,n("hOG+")(e))},DTth:function(e,t,n){var r=n("0Dky"),i=n("tiKp"),o=n("xDBR"),a=i("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t["delete"]("b"),n+=r+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},DhMN:function(e,t,n){n("ofBz")},DiGy:function(e,t,n){"use strict";var r=n("HfwV");function i(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(o,this,t),this.length=this._features.length}function o(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(a(n))}function a(e){var t=null,n=e.readVarint()+e.pos;while(e.pos<n){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}e.exports=i,i.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new r(this._pbf,t,this.extent,this._keys,this._values)}},DrvE:function(e,t,n){"use strict";var r=n("I+eb"),i=n("HAuM"),o=n("0GbY"),a=n("8GlL"),s=n("5mdu"),u=n("ImZN"),c="No one promise resolved";r({target:"Promise",stat:!0},{any:function(e){var t=this,n=a.f(t),r=n.resolve,l=n.reject,f=s((function(){var n=i(t.resolve),a=[],s=0,f=1,p=!1;u(e,(function(e){var i=s++,u=!1;a.push(void 0),f++,n.call(t,e).then((function(e){u||p||(p=!0,r(e))}),(function(e){u||p||(u=!0,a[i]=e,--f||l(new(o("AggregateError"))(a,c)))}))})),--f||l(new(o("AggregateError"))(a,c))}));return f.error&&l(f.value),n.promise}})},E2jh:function(e,t,n){var r=n("2gN3"),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function o(e){return!!i&&i in e}e.exports=o},E9XD:function(e,t,n){"use strict";var r=n("I+eb"),i=n("1Y/n").left,o=n("pkCn"),a=n("rkAj"),s=o("reduce"),u=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!s||!u},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},EA7m:function(e,t,n){var r=n("zZ0H"),i=n("Ioao"),o=n("wclG");function a(e,t){return o(i(e,t,r),e+"")}e.exports=a},"EDT/":function(e,t,n){var r=n("I+eb"),i=n("p5mE"),o=n("0GbY");r({global:!0},{compositeSymbol:function(){return 1===arguments.length&&"string"===typeof arguments[0]?o("Symbol")["for"](arguments[0]):i.apply(null,arguments).get("symbol",o("Symbol"))}})},EE3K:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("wx14"),i=n("rePB"),o=n("1OyB"),a=n("vuIU"),s=n("Ji7U"),u=n("LK+K"),c=n("q1tI"),l=n("i8i4"),f=n.n(l),p=n("TSYQ"),h=n.n(p),d=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;Object(o["a"])(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),e.closeTimer=null,e.close=function(t){t&&t.stopPropagation(),e.clearCloseTimer();var n=e.props,r=n.onClose,i=n.noticeKey;r&&r(i)},e.startCloseTimer=function(){e.props.duration&&(e.closeTimer=window.setTimeout((function(){e.close()}),1e3*e.props.duration))},e.clearCloseTimer=function(){e.closeTimer&&(clearTimeout(e.closeTimer),e.closeTimer=null)},e}return Object(a["a"])(n,[{key:"componentDidMount",value:function(){this.startCloseTimer()}},{key:"componentDidUpdate",value:function(e){(this.props.duration!==e.duration||this.props.updateMark!==e.updateMark||this.props.visible!==e.visible&&this.props.visible)&&this.restartCloseTimer()}},{key:"componentWillUnmount",value:function(){this.clearCloseTimer()}},{key:"restartCloseTimer",value:function(){this.clearCloseTimer(),this.startCloseTimer()}},{key:"render",value:function(){var e=this,t=this.props,n=t.prefixCls,o=t.className,a=t.closable,s=t.closeIcon,u=t.style,l=t.onClick,p=t.children,d=t.holder,v="".concat(n,"-notice"),m=Object.keys(this.props).reduce((function(t,n){return"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n||(t[n]=e.props[n]),t}),{}),g=c["createElement"]("div",Object(r["a"])({className:h()(v,o,Object(i["a"])({},"".concat(v,"-closable"),a)),style:u,onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onClick:l},m),c["createElement"]("div",{className:"".concat(v,"-content")},p),a?c["createElement"]("a",{tabIndex:0,onClick:this.close,className:"".concat(v,"-close")},s||c["createElement"]("span",{className:"".concat(v,"-close-x")})):null);return d?f.a.createPortal(g,d):g}}]),n}(c["Component"]);d.defaultProps={onClose:function(){},duration:1.5}},EFp3:function(e,t,n){},ENF9:function(e,t,n){"use strict";var r,i=n("2oRo"),o=n("4syw"),a=n("8YOa"),s=n("bWFh"),u=n("rKzb"),c=n("hh1v"),l=n("afO8").enforce,f=n("f5p1"),p=!i.ActiveXObject&&"ActiveXObject"in i,h=Object.isExtensible,d=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},v=e.exports=s("WeakMap",d,u);if(f&&p){r=u.getConstructor(d,"WeakMap",!0),a.REQUIRED=!0;var m=v.prototype,g=m["delete"],y=m.has,b=m.get,_=m.set;o(m,{delete:function(e){if(c(e)&&!h(e)){var t=l(this);return t.frozen||(t.frozen=new r),g.call(this,e)||t.frozen["delete"](e)}return g.call(this,e)},has:function(e){if(c(e)&&!h(e)){var t=l(this);return t.frozen||(t.frozen=new r),y.call(this,e)||t.frozen.has(e)}return y.call(this,e)},get:function(e){if(c(e)&&!h(e)){var t=l(this);return t.frozen||(t.frozen=new r),y.call(this,e)?b.call(this,e):t.frozen.get(e)}return b.call(this,e)},set:function(e,t){if(c(e)&&!h(e)){var n=l(this);n.frozen||(n.frozen=new r),y.call(this,e)?_.call(this,e,t):n.frozen.set(e,t)}else _.call(this,e,t);return this}})}},EUja:function(e,t,n){"use strict";var r=n("ppGB"),i=n("HYAF");e.exports="".repeat||function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},EdiO:function(e,t){function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},EnZy:function(e,t,n){"use strict";var r=n("14Sl"),i=n("ROdP"),o=n("glrk"),a=n("HYAF"),s=n("SEBh"),u=n("iqWW"),c=n("UMSQ"),l=n("FMNM"),f=n("kmMV"),p=n("0Dky"),h=[].push,d=Math.min,v=4294967295,m=!p((function(){return!RegExp(v,"y")}));r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(a(this)),o=void 0===n?v:n>>>0;if(0===o)return[];if(void 0===e)return[r];if(!i(e))return t.call(r,e,o);var s,u,c,l=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,m=new RegExp(e.source,p+"g");while(s=f.call(m,r)){if(u=m.lastIndex,u>d&&(l.push(r.slice(d,s.index)),s.length>1&&s.index<r.length&&h.apply(l,s.slice(1)),c=s[0].length,d=u,l.length>=o))break;m.lastIndex===s.index&&m.lastIndex++}return d===r.length?!c&&m.test("")||l.push(""):l.push(r.slice(d)),l.length>o?l.slice(0,o):l}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=a(this),o=void 0==t?void 0:t[e];return void 0!==o?o.call(t,i,n):r.call(String(i),t,n)},function(e,i){var a=n(r,e,this,i,r!==t);if(a.done)return a.value;var f=o(e),p=String(this),h=s(f,RegExp),g=f.unicode,y=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(m?"y":"g"),b=new h(m?f:"^(?:"+f.source+")",y),_=void 0===i?v:i>>>0;if(0===_)return[];if(0===p.length)return null===l(b,p)?[p]:[];var x=0,w=0,O=[];while(w<p.length){b.lastIndex=m?w:0;var E,S=l(b,m?p:p.slice(w));if(null===S||(E=d(c(b.lastIndex+(m?0:w)),p.length))===x)w=u(p,w,g);else{if(O.push(p.slice(x,w)),O.length===_)return O;for(var j=1;j<=S.length-1;j++)if(O.push(S[j]),O.length===_)return O;w=x=E}}return O.push(p.slice(x)),O}]}),!m)},Ep9I:function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},EpBk:function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},Eqjn:function(e,t,n){"use strict";var r=n("I+eb"),i=n("g6v/"),o=n("6x0u"),a=n("ewvW"),s=n("HAuM"),u=n("m/L8");i&&r({target:"Object",proto:!0,forced:o},{__defineGetter__:function(e,t){u.f(a(this),e,{get:s(t),enumerable:!0,configurable:!0})}})},"Ew+T":function(e,t,n){var r=n("I+eb"),i=n("2oRo"),o=n("LPSS"),a=!i.setImmediate||!i.clearImmediate;r({global:!0,bind:!0,enumerable:!0,forced:a},{setImmediate:o.set,clearImmediate:o.clear})},ExA7:function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},F4QJ:function(e,t,n){"use strict";function r(){var e=o(n("q1tI"));return r=function(){return e},e}function i(){var e=n("dEAq");return i=function(){return e},e}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t=c(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){var t=l(e,"string");return"symbol"===typeof t?t:String(t)}function l(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var f=function(e){return e.render()},p=function(e,t){var n=[],o=e.match.params.uuid,a=void 0===e.location.query.wrapper,u=t[o];if(u){var c=s(s({},u.previewerProps),{},{hideActions:(u.previewerProps.hideActions||[]).concat(["EXTERNAL"])});void 0!==e.location.query.capture&&(c.motions=(c.motions||[]).slice(),c.motions.unshift("autoplay"),c.motions.every((function(e){return!e.startsWith("capture")}))&&c.motions.push("capture:[id|=root]")),n=a?[r()["default"].createElement(f,{render:function(){return(0,i().useMotions)(c.motions||[],"undefined"!==typeof window?document.documentElement:null),r()["default"].createElement("div",{},r()["default"].createElement(u.component))}})]:[c,r()["default"].createElement(u.component)]}return n};t["default"]=p},F8JR:function(e,t,n){"use strict";var r=n("tycR").forEach,i=n("pkCn"),o=n("rkAj"),a=i("forEach"),s=o("forEach");e.exports=a&&s?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},FDzp:function(e,t,n){var r=n("dOgj");r("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},FER5:function(e,t,n){"use strict";n.d(t,"i",(function(){return i})),n.d(t,"g",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"h",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"j",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return v}));var r=n("b3aT");function i(e,t,n){return{r:255*Object(r["a"])(e,255),g:255*Object(r["a"])(t,255),b:255*Object(r["a"])(n,255)}}function o(e,t,n){e=Object(r["a"])(e,255),t=Object(r["a"])(t,255),n=Object(r["a"])(n,255);var i=Math.max(e,t,n),o=Math.min(e,t,n),a=0,s=0,u=(i+o)/2;if(i===o)s=0,a=0;else{var c=i-o;switch(s=u>.5?c/(2-i-o):c/(i+o),i){case e:a=(t-n)/c+(t<n?6:0);break;case t:a=(n-e)/c+2;break;case n:a=(e-t)/c+4;break;default:break}a/=6}return{h:a,s:s,l:u}}function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function s(e,t,n){var i,o,s;if(e=Object(r["a"])(e,360),t=Object(r["a"])(t,100),n=Object(r["a"])(n,100),0===t)o=n,s=n,i=n;else{var u=n<.5?n*(1+t):n+t-n*t,c=2*n-u;i=a(c,u,e+1/3),o=a(c,u,e),s=a(c,u,e-1/3)}return{r:255*i,g:255*o,b:255*s}}function u(e,t,n){e=Object(r["a"])(e,255),t=Object(r["a"])(t,255),n=Object(r["a"])(n,255);var i=Math.max(e,t,n),o=Math.min(e,t,n),a=0,s=i,u=i-o,c=0===i?0:u/i;if(i===o)a=0;else{switch(i){case e:a=(t-n)/u+(t<n?6:0);break;case t:a=(n-e)/u+2;break;case n:a=(e-t)/u+4;break;default:break}a/=6}return{h:a,s:c,v:s}}function c(e,t,n){e=6*Object(r["a"])(e,360),t=Object(r["a"])(t,100),n=Object(r["a"])(n,100);var i=Math.floor(e),o=e-i,a=n*(1-t),s=n*(1-o*t),u=n*(1-(1-o)*t),c=i%6,l=[n,s,a,a,u,n][c],f=[u,n,n,s,a,a][c],p=[a,a,u,n,n,s][c];return{r:255*l,g:255*f,b:255*p}}function l(e,t,n,i){var o=[Object(r["e"])(Math.round(e).toString(16)),Object(r["e"])(Math.round(t).toString(16)),Object(r["e"])(Math.round(n).toString(16))];return i&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function f(e,t,n,i,o){var a=[Object(r["e"])(Math.round(e).toString(16)),Object(r["e"])(Math.round(t).toString(16)),Object(r["e"])(Math.round(n).toString(16)),Object(r["e"])(p(i))];return o&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function p(e){return Math.round(255*parseFloat(e)).toString(16)}function h(e){return d(e)/255}function d(e){return parseInt(e,16)}function v(e){return{r:e>>16,g:(65280&e)>>8,b:255&e}}},FMNM:function(e,t,n){var r=n("xrYK"),i=n("kmMV");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var o=n.call(e,t);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},FV85:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TargetTypeEnum=t.BindingTypeEnum=t.BindingScopeEnum=void 0;var r={Request:"Request",Singleton:"Singleton",Transient:"Transient"};t.BindingScopeEnum=r;var i={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};t.BindingTypeEnum=i;var o={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};t.TargetTypeEnum=o},FZtP:function(e,t,n){var r=n("2oRo"),i=n("/byt"),o=n("F8JR"),a=n("kRJp");for(var s in i){var u=r[s],c=u&&u.prototype;if(c&&c.forEach!==o)try{a(c,"forEach",o)}catch(l){c.forEach=o}}},Ff2n:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("zLVn");function i(e,t){if(null==e)return{};var n,i,o=Object(r["a"])(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},FfOG:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r=n("YS25"),i={basename:"/L7-react/"};window.routerBase&&(i.basename=window.routerBase);var o=Object({NODE_ENV:"production"}).__IS_SERVER?null:Object(r["a"])(i),a=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||(o=Object(r["a"])(i)),o}},FpZJ:function(e,t,n){"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;var r=42;for(t in e[t]=r,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==r||!0!==o.enumerable)return!1}return!0}},"G+Rx":function(e,t,n){var r=n("0GbY");e.exports=r("document","documentElement")},GC2F:function(e,t,n){var r=n("+M1K");e.exports=function(e,t){var n=r(e);if(n%t)throw RangeError("Wrong offset");return n}},GXnB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var r=n("xfSm"),i=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return this.key===r.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},e}();t.Metadata=i},GXvd:function(e,t,n){var r=n("dG/n");r("species")},GarU:function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},GoyQ:function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},Gytx:function(e,t){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),u=0;u<o.length;u++){var c=o[u];if(!s(c))return!1;var l=e[c],f=t[c];if(i=n?n.call(r,l,f,c):void 0,!1===i||void 0===i&&l!==f)return!1}return!0}},"H+LF":function(e,t,n){"use strict";var r=n("bWFh"),i=n("rKzb");r("WeakSet",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},H1Ra:function(e,t,n){"use strict";var r=n("q1tI"),i=n.n(r),o=function(){var e=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,t=0,n={},r={util:{encode:function e(t){return t instanceof i?new i(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e["__id"]||Object.defineProperty(e,"__id",{value:++t}),e["__id"]},clone:function e(t,n){var i,o;switch(n=n||{},r.util.type(t)){case"Object":if(o=r.util.objId(t),n[o])return n[o];for(var a in i={},n[o]=i,t)t.hasOwnProperty(a)&&(i[a]=e(t[a],n));return i;case"Array":return o=r.util.objId(t),n[o]?n[o]:(i=[],n[o]=i,t.forEach((function(t,r){i[r]=e(t,n)})),i);default:return t}},getLanguage:function(t){while(t){var n=e.exec(t.className);if(n)return n[1].toLowerCase();t=t.parentElement}return"none"},setLanguage:function(t,n){t.className=t.className.replace(RegExp(e,"gi"),""),t.classList.add("language-"+n)},isActive:function(e,t,n){var r="no-"+t;while(e){var i=e.classList;if(i.contains(t))return!0;if(i.contains(r))return!1;e=e.parentElement}return!!n}},languages:{plain:n,plaintext:n,text:n,txt:n,extend:function(e,t){var n=r.util.clone(r.languages[e]);for(var i in t)n[i]=t[i];return n},insertBefore:function(e,t,n,i){i=i||r.languages;var o=i[e],a={};for(var s in o)if(o.hasOwnProperty(s)){if(s==t)for(var u in n)n.hasOwnProperty(u)&&(a[u]=n[u]);n.hasOwnProperty(s)||(a[s]=o[s])}var c=i[e];return i[e]=a,r.languages.DFS(r.languages,(function(t,n){n===c&&t!=e&&(this[t]=a)})),a},DFS:function e(t,n,i,o){o=o||{};var a=r.util.objId;for(var s in t)if(t.hasOwnProperty(s)){n.call(t,s,t[s],i||s);var u=t[s],c=r.util.type(u);"Object"!==c||o[a(u)]?"Array"!==c||o[a(u)]||(o[a(u)]=!0,e(u,n,s,o)):(o[a(u)]=!0,e(u,n,null,o))}}},plugins:{},highlight:function(e,t,n){var o={code:e,grammar:t,language:n};return r.hooks.run("before-tokenize",o),o.tokens=r.tokenize(o.code,o.grammar),r.hooks.run("after-tokenize",o),i.stringify(r.util.encode(o.tokens),o.language)},tokenize:function(e,t){var n=t.rest;if(n){for(var r in n)t[r]=n[r];delete t.rest}var i=new s;return u(i,i.head,e),a(e,i,t,i.head,0),l(i)},hooks:{all:{},add:function(e,t){var n=r.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=r.hooks.all[e];if(n&&n.length)for(var i,o=0;i=n[o++];)i(t)}},Token:i};function i(e,t,n,r){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length}function o(e,t,n,r){e.lastIndex=t;var i=e.exec(n);if(i&&r&&i[1]){var o=i[1].length;i.index+=o,i[0]=i[0].slice(o)}return i}function a(e,t,n,s,l,f){for(var p in n)if(n.hasOwnProperty(p)&&n[p]){var h=n[p];h=Array.isArray(h)?h:[h];for(var d=0;d<h.length;++d){if(f&&f.cause==p+","+d)return;var v=h[d],m=v.inside,g=!!v.lookbehind,y=!!v.greedy,b=v.alias;if(y&&!v.pattern.global){var _=v.pattern.toString().match(/[imsuy]*$/)[0];v.pattern=RegExp(v.pattern.source,_+"g")}for(var x=v.pattern||v,w=s.next,O=l;w!==t.tail;O+=w.value.length,w=w.next){if(f&&O>=f.reach)break;var E=w.value;if(t.length>e.length)return;if(!(E instanceof i)){var S,j=1;if(y){if(S=o(x,O,e,g),!S||S.index>=e.length)break;var A=S.index,k=S.index+S[0].length,C=O;C+=w.value.length;while(A>=C)w=w.next,C+=w.value.length;if(C-=w.value.length,O=C,w.value instanceof i)continue;for(var T=w;T!==t.tail&&(C<k||"string"===typeof T.value);T=T.next)j++,C+=T.value.length;j--,E=e.slice(O,C),S.index-=O}else if(S=o(x,0,E,g),!S)continue;A=S.index;var M=S[0],P=E.slice(0,A),I=E.slice(A+M.length),R=O+E.length;f&&R>f.reach&&(f.reach=R);var L=w.prev;P&&(L=u(t,L,P),O+=P.length),c(t,L,j);var D=new i(p,m?r.tokenize(M,m):M,b,M);if(w=u(t,L,D),I&&u(t,w,I),j>1){var N={cause:p+","+d,reach:R};a(e,t,n,w.prev,O,N),f&&N.reach>f.reach&&(f.reach=N.reach)}}}}}}function s(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function u(e,t,n){var r=t.next,i={value:n,prev:t,next:r};return t.next=i,r.prev=i,e.length++,i}function c(e,t,n){for(var r=t.next,i=0;i<n&&r!==e.tail;i++)r=r.next;t.next=r,r.prev=t,e.length-=i}function l(e){var t=[],n=e.head.next;while(n!==e.tail)t.push(n.value),n=n.next;return t}return i.stringify=function e(t,n){if("string"==typeof t)return t;if(Array.isArray(t)){var i="";return t.forEach((function(t){i+=e(t,n)})),i}var o={type:t.type,content:e(t.content,n),tag:"span",classes:["token",t.type],attributes:{},language:n},a=t.alias;a&&(Array.isArray(a)?Array.prototype.push.apply(o.classes,a):o.classes.push(a)),r.hooks.run("wrap",o);var s="";for(var u in o.attributes)s+=" "+u+'="'+(o.attributes[u]||"").replace(/"/g,"&quot;")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+s+">"+o.content+"</"+o.tag+">"},r}(),a=o;o["default"]=o,a.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},a.languages.markup["tag"].inside["attr-value"].inside["entity"]=a.languages.markup["entity"],a.languages.markup["doctype"].inside["internal-subset"].inside=a.languages.markup,a.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes["title"]=e.content.replace(/&amp;/,"&"))})),Object.defineProperty(a.languages.markup.tag,"addInlined",{value:function(e,t){var n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:a.languages[t]},n["cdata"]=/^<!\[CDATA\[|\]\]>$/i;var r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};r["language-"+t]={pattern:/[\s\S]+/,inside:a.languages[t]};var i={};i[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return e})),"i"),lookbehind:!0,greedy:!0,inside:r},a.languages.insertBefore("markup","cdata",i)}}),Object.defineProperty(a.languages.markup.tag,"addAttribute",{value:function(e,t){a.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:a.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),a.languages.html=a.languages.markup,a.languages.mathml=a.languages.markup,a.languages.svg=a.languages.markup,a.languages.xml=a.languages.extend("markup",{}),a.languages.ssml=a.languages.xml,a.languages.atom=a.languages.xml,a.languages.rss=a.languages.xml,function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var i=["comment","function-name","for-or-select","assign-left","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],o=r.variable[1].inside,a=0;a<i.length;a++)o[i[a]]=e.languages.bash[i[a]];e.languages.shell=e.languages.bash}(a),a.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},a.languages.c=a.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),a.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),a.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},a.languages.c["string"]],char:a.languages.c["char"],comment:a.languages.c["comment"],"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:a.languages.c}}}}),a.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete a.languages.c["boolean"],function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,n=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,(function(){return t.source}));e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,(function(){return t.source}))),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,(function(){return n}))+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])}(a),function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css["atrule"].inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))}(a),function(e){var t,n=/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/;e.languages.css.selector={pattern:e.languages.css.selector.pattern,lookbehind:!0,inside:t={"pseudo-element":/:(?:after|before|first-letter|first-line|selection)|::[-\w]+/,"pseudo-class":/:[-\w]+/,class:/\.[-\w]+/,id:/#[-\w]+/,attribute:{pattern:RegExp("\\[(?:[^[\\]\"']|"+n.source+")*\\]"),greedy:!0,inside:{punctuation:/^\[|\]$/,"case-sensitivity":{pattern:/(\s)[si]$/i,lookbehind:!0,alias:"keyword"},namespace:{pattern:/^(\s*)(?:(?!\s)[-*\w\xA0-\uFFFF])*\|(?!=)/,lookbehind:!0,inside:{punctuation:/\|$/}},"attr-name":{pattern:/^(\s*)(?:(?!\s)[-\w\xA0-\uFFFF])+/,lookbehind:!0},"attr-value":[n,{pattern:/(=\s*)(?:(?!\s)[-\w\xA0-\uFFFF])+(?=\s*$)/,lookbehind:!0}],operator:/[|~*^$]?=/}},"n-th":[{pattern:/(\(\s*)[+-]?\d*[\dn](?:\s*[+-]\s*\d+)?(?=\s*\))/,lookbehind:!0,inside:{number:/[\dn]+/,operator:/[+-]/}},{pattern:/(\(\s*)(?:even|odd)(?=\s*\))/i,lookbehind:!0}],combinator:/>|\+|~|\|\|/,punctuation:/[(),]/}},e.languages.css["atrule"].inside["selector-function-argument"].inside=t,e.languages.insertBefore("css","property",{variable:{pattern:/(^|[^-\w\xA0-\uFFFF])--(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*/i,lookbehind:!0}});var r={pattern:/(\b\d+)(?:%|[a-z]+(?![\w-]))/,lookbehind:!0},i={pattern:/(^|[^\w.-])-?(?:\d+(?:\.\d+)?|\.\d+)/,lookbehind:!0};e.languages.insertBefore("css","function",{operator:{pattern:/(\s)[+\-*\/](?=\s)/,lookbehind:!0},hexcode:{pattern:/\B#[\da-f]{3,8}\b/i,alias:"color"},color:[{pattern:/(^|[^\w-])(?:AliceBlue|AntiqueWhite|Aqua|Aquamarine|Azure|Beige|Bisque|Black|BlanchedAlmond|Blue|BlueViolet|Brown|BurlyWood|CadetBlue|Chartreuse|Chocolate|Coral|CornflowerBlue|Cornsilk|Crimson|Cyan|DarkBlue|DarkCyan|DarkGoldenRod|DarkGr[ae]y|DarkGreen|DarkKhaki|DarkMagenta|DarkOliveGreen|DarkOrange|DarkOrchid|DarkRed|DarkSalmon|DarkSeaGreen|DarkSlateBlue|DarkSlateGr[ae]y|DarkTurquoise|DarkViolet|DeepPink|DeepSkyBlue|DimGr[ae]y|DodgerBlue|FireBrick|FloralWhite|ForestGreen|Fuchsia|Gainsboro|GhostWhite|Gold|GoldenRod|Gr[ae]y|Green|GreenYellow|HoneyDew|HotPink|IndianRed|Indigo|Ivory|Khaki|Lavender|LavenderBlush|LawnGreen|LemonChiffon|LightBlue|LightCoral|LightCyan|LightGoldenRodYellow|LightGr[ae]y|LightGreen|LightPink|LightSalmon|LightSeaGreen|LightSkyBlue|LightSlateGr[ae]y|LightSteelBlue|LightYellow|Lime|LimeGreen|Linen|Magenta|Maroon|MediumAquaMarine|MediumBlue|MediumOrchid|MediumPurple|MediumSeaGreen|MediumSlateBlue|MediumSpringGreen|MediumTurquoise|MediumVioletRed|MidnightBlue|MintCream|MistyRose|Moccasin|NavajoWhite|Navy|OldLace|Olive|OliveDrab|Orange|OrangeRed|Orchid|PaleGoldenRod|PaleGreen|PaleTurquoise|PaleVioletRed|PapayaWhip|PeachPuff|Peru|Pink|Plum|PowderBlue|Purple|Red|RosyBrown|RoyalBlue|SaddleBrown|Salmon|SandyBrown|SeaGreen|SeaShell|Sienna|Silver|SkyBlue|SlateBlue|SlateGr[ae]y|Snow|SpringGreen|SteelBlue|Tan|Teal|Thistle|Tomato|Transparent|Turquoise|Violet|Wheat|White|WhiteSmoke|Yellow|YellowGreen)(?![\w-])/i,lookbehind:!0},{pattern:/\b(?:hsl|rgb)\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*\)\B|\b(?:hsl|rgb)a\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*,\s*(?:0|0?\.\d+|1)\s*\)\B/i,inside:{unit:r,number:i,function:/[\w-]+(?=\()/,punctuation:/[(),]/}}],entity:/\\[\da-f]{1,8}/i,unit:r,number:i})}(a),a.languages.javascript=a.languages.extend("clike",{"class-name":[a.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),a.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,a.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/,lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:a.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:a.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:a.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:a.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:a.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),a.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:a.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),a.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),a.languages.markup&&(a.languages.markup.tag.addInlined("script","javascript"),a.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),a.languages.js=a.languages.javascript,function(e){var t=/#(?!\{).+/,n={pattern:/#\{[^}]+\}/,alias:"variable"};e.languages.coffeescript=e.languages.extend("javascript",{comment:t,string:[{pattern:/'(?:\\[\s\S]|[^\\'])*'/,greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,greedy:!0,inside:{interpolation:n}}],keyword:/\b(?:and|break|by|catch|class|continue|debugger|delete|do|each|else|extend|extends|false|finally|for|if|in|instanceof|is|isnt|let|loop|namespace|new|no|not|null|of|off|on|or|own|return|super|switch|then|this|throw|true|try|typeof|undefined|unless|until|when|while|window|with|yes|yield)\b/,"class-member":{pattern:/@(?!\d)\w+/,alias:"variable"}}),e.languages.insertBefore("coffeescript","comment",{"multiline-comment":{pattern:/###[\s\S]+?###/,alias:"comment"},"block-regex":{pattern:/\/{3}[\s\S]*?\/{3}/,alias:"regex",inside:{comment:t,interpolation:n}}}),e.languages.insertBefore("coffeescript","string",{"inline-javascript":{pattern:/`(?:\\[\s\S]|[^\\`])*`/,inside:{delimiter:{pattern:/^`|`$/,alias:"punctuation"},script:{pattern:/[\s\S]+/,alias:"language-javascript",inside:e.languages.javascript}}},"multiline-string":[{pattern:/'''[\s\S]*?'''/,greedy:!0,alias:"string"},{pattern:/"""[\s\S]*?"""/,greedy:!0,alias:"string",inside:{interpolation:n}}]}),e.languages.insertBefore("coffeescript","keyword",{property:/(?!\d)\w+(?=\s*:(?!:))/}),delete e.languages.coffeescript["template-string"],e.languages.coffee=e.languages.coffeescript}(a),function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ \t]+"+t.source+")?|"+t.source+"(?:[ \t]+"+n.source+")?)",i=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,(function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source})),o=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function a(e,t){t=(t||"").replace(/m/g,"")+"m";var n=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,(function(){return r})).replace(/<<value>>/g,(function(){return e}));return RegExp(n,t)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,(function(){return r}))),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,(function(){return r})).replace(/<<key>>/g,(function(){return"(?:"+i+"|"+o+")"}))),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:a(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:a(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:a(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:a(o),lookbehind:!0,greedy:!0},number:{pattern:a(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml}(a),function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(e){return e=e.replace(/<inner>/g,(function(){return t})),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+e+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,i=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,(function(){return r})),o=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+i+o+"(?:"+i+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+i+o+")(?:"+i+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+i+")"+o+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+i+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach((function(t){["url","bold","italic","strike","code-snippet"].forEach((function(n){t!==n&&(e.languages.markdown[t].inside.content.inside[n]=e.languages.markdown[n])}))})),e.hooks.add("after-tokenize",(function(e){function t(e){if(e&&"string"!==typeof e)for(var n=0,r=e.length;n<r;n++){var i=e[n];if("code"===i.type){var o=i.content[1],a=i.content[3];if(o&&a&&"code-language"===o.type&&"code-block"===a.type&&"string"===typeof o.content){var s=o.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");s=(/[a-z][\w-]*/i.exec(s)||[""])[0].toLowerCase();var u="language-"+s;a.alias?"string"===typeof a.alias?a.alias=[a.alias,u]:a.alias.push(u):a.alias=[u]}}else t(i.content)}}"markdown"!==e.language&&"md"!==e.language||t(e.tokens)})),e.hooks.add("wrap",(function(t){if("code-block"===t.type){for(var n="",r=0,i=t.classes.length;r<i;r++){var o=t.classes[r],a=/language-(.+)/.exec(o);if(a){n=a[1];break}}var s=e.languages[n];if(s)t.content=e.highlight(c(t.content),s,n);else if(n&&"none"!==n&&e.plugins.autoloader){var u="md-"+(new Date).valueOf()+"-"+Math.floor(1e16*Math.random());t.attributes["id"]=u,e.plugins.autoloader.loadLanguages(n,(function(){var t=document.getElementById(u);t&&(t.innerHTML=e.highlight(t.textContent,e.languages[n],n))}))}}}));var a=RegExp(e.languages.markup.tag.pattern.source,"gi"),s={amp:"&",lt:"<",gt:">",quot:'"'},u=String.fromCodePoint||String.fromCharCode;function c(e){var t=e.replace(a,"");return t=t.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,(function(e,t){var n;if(t=t.toLowerCase(),"#"===t[0])return n="x"===t[1]?parseInt(t.slice(2),16):Number(t.slice(1)),u(n);var r=s[t];return r||e})),t}e.languages.md=e.languages.markdown}(a),a.languages.graphql={comment:/#.*/,description:{pattern:/(?:"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*")(?=\s*[a-z_])/i,greedy:!0,alias:"string",inside:{"language-markdown":{pattern:/(^"(?:"")?)(?!\1)[\s\S]+(?=\1$)/,lookbehind:!0,inside:a.languages.markdown}}},string:{pattern:/"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*"/,greedy:!0},number:/(?:\B-|\b)\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,boolean:/\b(?:false|true)\b/,variable:/\$[a-z_]\w*/i,directive:{pattern:/@[a-z_]\w*/i,alias:"function"},"attr-name":{pattern:/\b[a-z_]\w*(?=\s*(?:\((?:[^()"]|"(?:\\.|[^\\"\r\n])*")*\))?:)/i,greedy:!0},"atom-input":{pattern:/\b[A-Z]\w*Input\b/,alias:"class-name"},scalar:/\b(?:Boolean|Float|ID|Int|String)\b/,constant:/\b[A-Z][A-Z_\d]*\b/,"class-name":{pattern:/(\b(?:enum|implements|interface|on|scalar|type|union)\s+|&\s*|:\s*|\[)[A-Z_]\w*/,lookbehind:!0},fragment:{pattern:/(\bfragment\s+|\.{3}\s*(?!on\b))[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},"definition-mutation":{pattern:/(\bmutation\s+)[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},"definition-query":{pattern:/(\bquery\s+)[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},keyword:/\b(?:directive|enum|extend|fragment|implements|input|interface|mutation|on|query|repeatable|scalar|schema|subscription|type|union)\b/,operator:/[!=|&]|\.{3}/,"property-query":/\w+(?=\s*\()/,object:/\w+(?=\s*\{)/,punctuation:/[!(){}\[\]:=,]/,property:/\w+/},a.hooks.add("after-tokenize",(function(e){if("graphql"===e.language)for(var t=e.tokens.filter((function(e){return"string"!==typeof e&&"comment"!==e.type&&"scalar"!==e.type})),n=0;n<t.length;){var r=t[n++];if("keyword"===r.type&&"mutation"===r.content){var i=[];if(f(["definition-mutation","punctuation"])&&"("===l(1).content){n+=2;var o=p(/^\($/,/^\)$/);if(-1===o)continue;for(;n<o;n++){var a=l(0);"variable"===a.type&&(h(a,"variable-input"),i.push(a.content))}n=o+1}if(f(["punctuation","property-query"])&&"{"===l(0).content&&(n++,h(l(0),"property-mutation"),i.length>0)){var s=p(/^\{$/,/^\}$/);if(-1===s)continue;for(var u=n;u<s;u++){var c=t[u];"variable"===c.type&&i.indexOf(c.content)>=0&&h(c,"variable-input")}}}}function l(e){return t[n+e]}function f(e,t){t=t||0;for(var n=0;n<e.length;n++){var r=l(n+t);if(!r||r.type!==e[n])return!1}return!0}function p(e,r){for(var i=1,o=n;o<t.length;o++){var a=t[o],s=a.content;if("punctuation"===a.type&&"string"===typeof s)if(e.test(s))i++;else if(r.test(s)&&(i--,0===i))return o}return-1}function h(e,t){var n=e.alias;n?Array.isArray(n)||(e.alias=n=[n]):e.alias=n=[],n.push(t)}})),a.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/},function(e){var t=e.languages.javascript["template-string"],n=t.pattern.source,r=t.inside["interpolation"],i=r.inside["interpolation-punctuation"],o=r.pattern.source;function a(t,r){if(e.languages[t])return{pattern:RegExp("((?:"+r+")\\s*)"+n),lookbehind:!0,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},"embedded-code":{pattern:/[\s\S]+/,alias:t}}}}function s(e,t){return"___"+t.toUpperCase()+"_"+e+"___"}function u(t,n,r){var i={code:t,grammar:n,language:r};return e.hooks.run("before-tokenize",i),i.tokens=e.tokenize(i.code,i.grammar),e.hooks.run("after-tokenize",i),i.tokens}function c(t){var n={};n["interpolation-punctuation"]=i;var o=e.tokenize(t,n);if(3===o.length){var a=[1,1];a.push.apply(a,u(o[1],e.languages.javascript,"javascript")),o.splice.apply(o,a)}return new e.Token("interpolation",o,r.alias,t)}function l(t,n,r){var i=e.tokenize(t,{interpolation:{pattern:RegExp(o),lookbehind:!0}}),a=0,l={},f=i.map((function(e){if("string"===typeof e)return e;var n,i=e.content;while(-1!==t.indexOf(n=s(a++,r)));return l[n]=i,n})).join(""),p=u(f,n,r),h=Object.keys(l);function d(e){for(var t=0;t<e.length;t++){if(a>=h.length)return;var n=e[t];if("string"===typeof n||"string"===typeof n.content){var r=h[a],i="string"===typeof n?n:n.content,o=i.indexOf(r);if(-1!==o){++a;var s=i.substring(0,o),u=c(l[r]),f=i.substring(o+r.length),p=[];if(s&&p.push(s),p.push(u),f){var v=[f];d(v),p.push.apply(p,v)}"string"===typeof n?(e.splice.apply(e,[t,1].concat(p)),t+=p.length-1):n.content=p}}else{var m=n.content;Array.isArray(m)?d(m):d([m])}}}return a=0,d(p),new e.Token(r,p,"language-"+r,t)}e.languages.javascript["template-string"]=[a("css",/\b(?:styled(?:\([^)]*\))?(?:\s*\.\s*\w+(?:\([^)]*\))*)*|css(?:\s*\.\s*(?:global|resolve))?|createGlobalStyle|keyframes)/.source),a("html",/\bhtml|\.\s*(?:inner|outer)HTML\s*\+?=/.source),a("svg",/\bsvg/.source),a("markdown",/\b(?:markdown|md)/.source),a("graphql",/\b(?:gql|graphql(?:\s*\.\s*experimental)?)/.source),a("sql",/\bsql/.source),t].filter(Boolean);var f={javascript:!0,js:!0,typescript:!0,ts:!0,jsx:!0,tsx:!0};function p(e){return"string"===typeof e?e:Array.isArray(e)?e.map(p).join(""):p(e.content)}e.hooks.add("after-tokenize",(function(t){function n(t){for(var r=0,i=t.length;r<i;r++){var o=t[r];if("string"!==typeof o){var a=o.content;if(Array.isArray(a))if("template-string"===o.type){var s=a[1];if(3===a.length&&"string"!==typeof s&&"embedded-code"===s.type){var u=p(s),c=s.alias,f=Array.isArray(c)?c[0]:c,h=e.languages[f];if(!h)continue;a[1]=l(u,h,f)}}else n(a);else"string"!==typeof a&&n([a])}}}t.language in f&&n(t.tokens)}))}(a),function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript["parameter"],delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(a),function(e){function t(e,t){return RegExp(e.replace(/<ID>/g,(function(){return/(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/.source})),t)}e.languages.insertBefore("javascript","function-variable",{"method-variable":{pattern:RegExp("(\\.\\s*)"+e.languages.javascript["function-variable"].pattern.source),lookbehind:!0,alias:["function-variable","method","function","property-access"]}}),e.languages.insertBefore("javascript","function",{method:{pattern:RegExp("(\\.\\s*)"+e.languages.javascript["function"].source),lookbehind:!0,alias:["function","property-access"]}}),e.languages.insertBefore("javascript","constant",{"known-class-name":[{pattern:/\b(?:(?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)?Array|ArrayBuffer|BigInt|Boolean|DataView|Date|Error|Function|Intl|JSON|(?:Weak)?(?:Map|Set)|Math|Number|Object|Promise|Proxy|Reflect|RegExp|String|Symbol|WebAssembly)\b/,alias:"class-name"},{pattern:/\b(?:[A-Z]\w*)Error\b/,alias:"class-name"}]}),e.languages.insertBefore("javascript","keyword",{imports:{pattern:t(/(\bimport\b\s*)(?:<ID>(?:\s*,\s*(?:\*\s*as\s+<ID>|\{[^{}]*\}))?|\*\s*as\s+<ID>|\{[^{}]*\})(?=\s*\bfrom\b)/.source),lookbehind:!0,inside:e.languages.javascript},exports:{pattern:t(/(\bexport\b\s*)(?:\*(?:\s*as\s+<ID>)?(?=\s*\bfrom\b)|\{[^{}]*\})/.source),lookbehind:!0,inside:e.languages.javascript}}),e.languages.javascript["keyword"].unshift({pattern:/\b(?:as|default|export|from|import)\b/,alias:"module"},{pattern:/\b(?:await|break|catch|continue|do|else|finally|for|if|return|switch|throw|try|while|yield)\b/,alias:"control-flow"},{pattern:/\bnull\b/,alias:["null","nil"]},{pattern:/\bundefined\b/,alias:"nil"}),e.languages.insertBefore("javascript","operator",{spread:{pattern:/\.{3}/,alias:"operator"},arrow:{pattern:/=>/,alias:"operator"}}),e.languages.insertBefore("javascript","punctuation",{"property-access":{pattern:t(/(\.\s*)#?<ID>/.source),lookbehind:!0},"maybe-class-name":{pattern:/(^|[^$\w\xA0-\uFFFF])[A-Z][$\w\xA0-\uFFFF]+/,lookbehind:!0},dom:{pattern:/\b(?:document|(?:local|session)Storage|location|navigator|performance|window)\b/,alias:"variable"},console:{pattern:/\bconsole(?=\s*\.)/,alias:"class-name"}});for(var n=["function","function-variable","method","method-variable","property-access"],r=0;r<n.length;r++){var i=n[r],o=e.languages.javascript[i];"RegExp"===e.util.type(o)&&(o=e.languages.javascript[i]={pattern:o});var a=o.inside||{};o.inside=a,a["maybe-class-name"]=/^[A-Z][\s\S]*/}}(a),function(e){var t=e.util.clone(e.languages.javascript),n=/(?:\s|\/\/.*(?!.)|\/\*(?:[^*]|\*(?!\/))\*\/)/.source,r=/(?:\{(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])*\})/.source,i=/(?:\{<S>*\.{3}(?:[^{}]|<BRACES>)*\})/.source;function o(e,t){return e=e.replace(/<S>/g,(function(){return n})).replace(/<BRACES>/g,(function(){return r})).replace(/<SPREAD>/g,(function(){return i})),RegExp(e,t)}i=o(i).source,e.languages.jsx=e.languages.extend("markup",t),e.languages.jsx.tag.pattern=o(/<\/?(?:[\w.:-]+(?:<S>+(?:[\w.:$-]+(?:=(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s{'"/>=]+|<BRACES>))?|<SPREAD>))*<S>*\/?)?>/.source),e.languages.jsx.tag.inside["tag"].pattern=/^<\/?[^\s>\/]*/,e.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s'">]+)/,e.languages.jsx.tag.inside["tag"].inside["class-name"]=/^[A-Z]\w*(?:\.[A-Z]\w*)*$/,e.languages.jsx.tag.inside["comment"]=t["comment"],e.languages.insertBefore("inside","attr-name",{spread:{pattern:o(/<SPREAD>/.source),inside:e.languages.jsx}},e.languages.jsx.tag),e.languages.insertBefore("inside","special-attr",{script:{pattern:o(/=<BRACES>/.source),alias:"language-javascript",inside:{"script-punctuation":{pattern:/^=(?=\{)/,alias:"punctuation"},rest:e.languages.jsx}}},e.languages.jsx.tag);var a=function e(t){return t?"string"===typeof t?t:"string"===typeof t.content?t.content:t.content.map(e).join(""):""},s=function t(n){for(var r=[],i=0;i<n.length;i++){var o=n[i],s=!1;if("string"!==typeof o&&("tag"===o.type&&o.content[0]&&"tag"===o.content[0].type?"</"===o.content[0].content[0].content?r.length>0&&r[r.length-1].tagName===a(o.content[0].content[1])&&r.pop():"/>"===o.content[o.content.length-1].content||r.push({tagName:a(o.content[0].content[1]),openedBraces:0}):r.length>0&&"punctuation"===o.type&&"{"===o.content?r[r.length-1].openedBraces++:r.length>0&&r[r.length-1].openedBraces>0&&"punctuation"===o.type&&"}"===o.content?r[r.length-1].openedBraces--:s=!0),(s||"string"===typeof o)&&r.length>0&&0===r[r.length-1].openedBraces){var u=a(o);i<n.length-1&&("string"===typeof n[i+1]||"plain-text"===n[i+1].type)&&(u+=a(n[i+1]),n.splice(i+1,1)),i>0&&("string"===typeof n[i-1]||"plain-text"===n[i-1].type)&&(u=a(n[i-1])+u,n.splice(i-1,1),i--),n[i]=new e.Token("plain-text",u,null,u)}o.content&&"string"!==typeof o.content&&t(o.content)}};e.hooks.add("after-tokenize",(function(e){"jsx"!==e.language&&"tsx"!==e.language||s(e.tokens)}))}(a),function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach((function(n){var r=t[n],i=[];/^\w+$/.test(n)||i.push(/\w+/.exec(n)[0]),"diff"===n&&i.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+"].*(?:\r\n?|\n|(?![\\s\\S])))+","m"),alias:i,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}})),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})}(a),a.languages.git={comment:/^#.*/m,deleted:/^[-\u2013].*/m,inserted:/^\+.*/m,string:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,command:{pattern:/^.*\$ git .*$/m,inside:{parameter:/\s--?\w+/}},coord:/^@@.*@@$/m,"commit-sha1":/^commit \w{40}$/m},a.languages.go=a.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/}),a.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}}),delete a.languages.go["class-name"],function(e){function t(e,t){return"___"+e.toUpperCase()+t+"___"}Object.defineProperties(e.languages["markup-templating"]={},{buildPlaceholders:{value:function(n,r,i,o){if(n.language===r){var a=n.tokenStack=[];n.code=n.code.replace(i,(function(e){if("function"===typeof o&&!o(e))return e;var i,s=a.length;while(-1!==n.code.indexOf(i=t(r,s)))++s;return a[s]=e,i})),n.grammar=e.languages.markup}}},tokenizePlaceholders:{value:function(n,r){if(n.language===r&&n.tokenStack){n.grammar=e.languages[r];var i=0,o=Object.keys(n.tokenStack);a(n.tokens)}function a(s){for(var u=0;u<s.length;u++){if(i>=o.length)break;var c=s[u];if("string"===typeof c||c.content&&"string"===typeof c.content){var l=o[i],f=n.tokenStack[l],p="string"===typeof c?c:c.content,h=t(r,l),d=p.indexOf(h);if(d>-1){++i;var v=p.substring(0,d),m=new e.Token(r,e.tokenize(f,n.grammar),"language-"+r,f),g=p.substring(d+h.length),y=[];v&&y.push.apply(y,a([v])),y.push(m),g&&y.push.apply(y,a([g])),"string"===typeof c?s.splice.apply(s,[u,1].concat(y)):c.content=y}}else c.content&&a(c.content)}return s}}}})}(a),function(e){e.languages.handlebars={comment:/\{\{![\s\S]*?\}\}/,delimiter:{pattern:/^\{\{\{?|\}\}\}?$/,alias:"punctuation"},string:/(["'])(?:\\.|(?!\1)[^\\\r\n])*\1/,number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee][+-]?\d+)?/,boolean:/\b(?:false|true)\b/,block:{pattern:/^(\s*(?:~\s*)?)[#\/]\S+?(?=\s*(?:~\s*)?$|\s)/,lookbehind:!0,alias:"keyword"},brackets:{pattern:/\[[^\]]+\]/,inside:{punctuation:/\[|\]/,variable:/[\s\S]+/}},punctuation:/[!"#%&':()*+,.\/;<=>@\[\\\]^`{|}~]/,variable:/[^!"#%&'()*+,\/;<=>@\[\\\]^`{|}~\s]+/},e.hooks.add("before-tokenize",(function(t){var n=/\{\{\{[\s\S]+?\}\}\}|\{\{[\s\S]+?\}\}/g;e.languages["markup-templating"].buildPlaceholders(t,"handlebars",n)})),e.hooks.add("after-tokenize",(function(t){e.languages["markup-templating"].tokenizePlaceholders(t,"handlebars")})),e.languages.hbs=e.languages.handlebars}(a),a.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}},a.languages.webmanifest=a.languages.json,a.languages.less=a.languages.extend("css",{comment:[/\/\*[\s\S]*?\*\//,{pattern:/(^|[^\\])\/\/.*/,lookbehind:!0}],atrule:{pattern:/@[\w-](?:\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{punctuation:/[:()]/}},selector:{pattern:/(?:@\{[\w-]+\}|[^{};\s@])(?:@\{[\w-]+\}|\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};@\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{variable:/@+[\w-]+/}},property:/(?:@\{[\w-]+\}|[\w-])+(?:\+_?)?(?=\s*:)/,operator:/[+\-*\/]/}),a.languages.insertBefore("less","property",{variable:[{pattern:/@[\w-]+\s*:/,inside:{punctuation:/:/}},/@@?[\w-]+/],"mixin-usage":{pattern:/([{;]\s*)[.#](?!\d)[\w-].*?(?=[(;])/,lookbehind:!0,alias:"function"}}),a.languages.makefile={comment:{pattern:/(^|[^\\])#(?:\\(?:\r\n|[\s\S])|[^\\\r\n])*/,lookbehind:!0},string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"builtin-target":{pattern:/\.[A-Z][^:#=\s]+(?=\s*:(?!=))/,alias:"builtin"},target:{pattern:/^(?:[^:=\s]|[ \t]+(?![\s:]))+(?=\s*:(?!=))/m,alias:"symbol",inside:{variable:/\$+(?:(?!\$)[^(){}:#=\s]+|(?=[({]))/}},variable:/\$+(?:(?!\$)[^(){}:#=\s]+|\([@*%<^+?][DF]\)|(?=[({]))/,keyword:/-include\b|\b(?:define|else|endef|endif|export|ifn?def|ifn?eq|include|override|private|sinclude|undefine|unexport|vpath)\b/,function:{pattern:/(\()(?:abspath|addsuffix|and|basename|call|dir|error|eval|file|filter(?:-out)?|findstring|firstword|flavor|foreach|guile|if|info|join|lastword|load|notdir|or|origin|patsubst|realpath|shell|sort|strip|subst|suffix|value|warning|wildcard|word(?:list|s)?)(?=[ \t])/,lookbehind:!0},operator:/(?:::|[?:+!])?=|[|@]/,punctuation:/[:;(){}]/},a.languages.objectivec=a.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/}),delete a.languages.objectivec["class-name"],a.languages.objc=a.languages.objectivec,a.languages.ocaml={comment:{pattern:/\(\*[\s\S]*?\*\)/,greedy:!0},char:{pattern:/'(?:[^\\\r\n']|\\(?:.|[ox]?[0-9a-f]{1,3}))'/i,greedy:!0},string:[{pattern:/"(?:\\(?:[\s\S]|\r\n)|[^\\\r\n"])*"/,greedy:!0},{pattern:/\{([a-z_]*)\|[\s\S]*?\|\1\}/,greedy:!0}],number:[/\b(?:0b[01][01_]*|0o[0-7][0-7_]*)\b/i,/\b0x[a-f0-9][a-f0-9_]*(?:\.[a-f0-9_]*)?(?:p[+-]?\d[\d_]*)?(?!\w)/i,/\b\d[\d_]*(?:\.[\d_]*)?(?:e[+-]?\d[\d_]*)?(?!\w)/i],directive:{pattern:/\B#\w+/,alias:"property"},label:{pattern:/\B~\w+/,alias:"property"},"type-variable":{pattern:/\B'\w+/,alias:"function"},variant:{pattern:/`\w+/,alias:"symbol"},keyword:/\b(?:as|assert|begin|class|constraint|do|done|downto|else|end|exception|external|for|fun|function|functor|if|in|include|inherit|initializer|lazy|let|match|method|module|mutable|new|nonrec|object|of|open|private|rec|sig|struct|then|to|try|type|val|value|virtual|when|where|while|with)\b/,boolean:/\b(?:false|true)\b/,"operator-like-punctuation":{pattern:/\[[<>|]|[>|]\]|\{<|>\}/,alias:"punctuation"},operator:/\.[.~]|:[=>]|[=<>@^|&+\-*\/$%!?~][!$%&*+\-.\/:<=>?@^|~]*|\b(?:and|asr|land|lor|lsl|lsr|lxor|mod|or)\b/,punctuation:/;;|::|[(){}\[\].,:;#]|\b_\b/},a.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},a.languages.python["string-interpolation"].inside["interpolation"].inside.rest=a.languages.python,a.languages.py=a.languages.python,a.languages.reason=a.languages.extend("clike",{string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^\\\r\n"])*"/,greedy:!0},"class-name":/\b[A-Z]\w*/,keyword:/\b(?:and|as|assert|begin|class|constraint|do|done|downto|else|end|exception|external|for|fun|function|functor|if|in|include|inherit|initializer|lazy|let|method|module|mutable|new|nonrec|object|of|open|or|private|rec|sig|struct|switch|then|to|try|type|val|virtual|when|while|with)\b/,operator:/\.{3}|:[:=]|\|>|->|=(?:==?|>)?|<=?|>=?|[|^?'#!~`]|[+\-*\/]\.?|\b(?:asr|land|lor|lsl|lsr|lxor|mod)\b/}),a.languages.insertBefore("reason","class-name",{char:{pattern:/'(?:\\x[\da-f]{2}|\\o[0-3][0-7][0-7]|\\\d{3}|\\.|[^'\\\r\n])'/,greedy:!0},constructor:/\b[A-Z]\w*\b(?!\s*\.)/,label:{pattern:/\b[a-z]\w*(?=::)/,alias:"symbol"}}),delete a.languages.reason["function"],function(e){e.languages.sass=e.languages.extend("css",{comment:{pattern:/^([ \t]*)\/[\/*].*(?:(?:\r?\n|\r)\1[ \t].+)*/m,lookbehind:!0,greedy:!0}}),e.languages.insertBefore("sass","atrule",{"atrule-line":{pattern:/^(?:[ \t]*)[@+=].+/m,greedy:!0,inside:{atrule:/(?:@[\w-]+|[+=])/}}}),delete e.languages.sass.atrule;var t=/\$[-\w]+|#\{\$[-\w]+\}/,n=[/[+*\/%]|[=!]=|<=?|>=?|\b(?:and|not|or)\b/,{pattern:/(\s)-(?=\s)/,lookbehind:!0}];e.languages.insertBefore("sass","property",{"variable-line":{pattern:/^[ \t]*\$.+/m,greedy:!0,inside:{punctuation:/:/,variable:t,operator:n}},"property-line":{pattern:/^[ \t]*(?:[^:\s]+ *:.*|:[^:\s].*)/m,greedy:!0,inside:{property:[/[^:\s]+(?=\s*:)/,{pattern:/(:)[^:\s]+/,lookbehind:!0}],punctuation:/:/,variable:t,operator:n,important:e.languages.sass.important}}}),delete e.languages.sass.property,delete e.languages.sass.important,e.languages.insertBefore("sass","punctuation",{selector:{pattern:/^([ \t]*)\S(?:,[^,\r\n]+|[^,\r\n]*)(?:,[^,\r\n]+)*(?:,(?:\r?\n|\r)\1[ \t]+\S(?:,[^,\r\n]+|[^,\r\n]*)(?:,[^,\r\n]+)*)*/m,lookbehind:!0,greedy:!0}})}(a),a.languages.scss=a.languages.extend("css",{comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0},atrule:{pattern:/@[\w-](?:\([^()]+\)|[^()\s]|\s+(?!\s))*?(?=\s+[{;])/,inside:{rule:/@[\w-]+/}},url:/(?:[-a-z]+-)?url(?=\()/i,selector:{pattern:/(?=\S)[^@;{}()]?(?:[^@;{}()\s]|\s+(?!\s)|#\{\$[-\w]+\})+(?=\s*\{(?:\}|\s|[^}][^:{}]*[:{][^}]))/,inside:{parent:{pattern:/&/,alias:"important"},placeholder:/%[-\w]+/,variable:/\$[-\w]+|#\{\$[-\w]+\}/}},property:{pattern:/(?:[-\w]|\$[-\w]|#\{\$[-\w]+\})+(?=\s*:)/,inside:{variable:/\$[-\w]+|#\{\$[-\w]+\}/}}}),a.languages.insertBefore("scss","atrule",{keyword:[/@(?:content|debug|each|else(?: if)?|extend|for|forward|function|if|import|include|mixin|return|use|warn|while)\b/i,{pattern:/( )(?:from|through)(?= )/,lookbehind:!0}]}),a.languages.insertBefore("scss","important",{variable:/\$[-\w]+|#\{\$[-\w]+\}/}),a.languages.insertBefore("scss","function",{"module-modifier":{pattern:/\b(?:as|hide|show|with)\b/i,alias:"keyword"},placeholder:{pattern:/%[-\w]+/,alias:"selector"},statement:{pattern:/\B!(?:default|optional)\b/i,alias:"keyword"},boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"},operator:{pattern:/(\s)(?:[-+*\/%]|[=!]=|<=?|>=?|and|not|or)(?=\s)/,lookbehind:!0}}),a.languages.scss["atrule"].inside.rest=a.languages.scss,function(e){var t={pattern:/(\b\d+)(?:%|[a-z]+)/,lookbehind:!0},n={pattern:/(^|[^\w.-])-?(?:\d+(?:\.\d+)?|\.\d+)/,lookbehind:!0},r={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0},url:{pattern:/\burl\((["']?).*?\1\)/i,greedy:!0},string:{pattern:/("|')(?:(?!\1)[^\\\r\n]|\\(?:\r\n|[\s\S]))*\1/,greedy:!0},interpolation:null,func:null,important:/\B!(?:important|optional)\b/i,keyword:{pattern:/(^|\s+)(?:(?:else|for|if|return|unless)(?=\s|$)|@[\w-]+)/,lookbehind:!0},hexcode:/#[\da-f]{3,6}/i,color:[/\b(?:AliceBlue|AntiqueWhite|Aqua|Aquamarine|Azure|Beige|Bisque|Black|BlanchedAlmond|Blue|BlueViolet|Brown|BurlyWood|CadetBlue|Chartreuse|Chocolate|Coral|CornflowerBlue|Cornsilk|Crimson|Cyan|DarkBlue|DarkCyan|DarkGoldenRod|DarkGr[ae]y|DarkGreen|DarkKhaki|DarkMagenta|DarkOliveGreen|DarkOrange|DarkOrchid|DarkRed|DarkSalmon|DarkSeaGreen|DarkSlateBlue|DarkSlateGr[ae]y|DarkTurquoise|DarkViolet|DeepPink|DeepSkyBlue|DimGr[ae]y|DodgerBlue|FireBrick|FloralWhite|ForestGreen|Fuchsia|Gainsboro|GhostWhite|Gold|GoldenRod|Gr[ae]y|Green|GreenYellow|HoneyDew|HotPink|IndianRed|Indigo|Ivory|Khaki|Lavender|LavenderBlush|LawnGreen|LemonChiffon|LightBlue|LightCoral|LightCyan|LightGoldenRodYellow|LightGr[ae]y|LightGreen|LightPink|LightSalmon|LightSeaGreen|LightSkyBlue|LightSlateGr[ae]y|LightSteelBlue|LightYellow|Lime|LimeGreen|Linen|Magenta|Maroon|MediumAquaMarine|MediumBlue|MediumOrchid|MediumPurple|MediumSeaGreen|MediumSlateBlue|MediumSpringGreen|MediumTurquoise|MediumVioletRed|MidnightBlue|MintCream|MistyRose|Moccasin|NavajoWhite|Navy|OldLace|Olive|OliveDrab|Orange|OrangeRed|Orchid|PaleGoldenRod|PaleGreen|PaleTurquoise|PaleVioletRed|PapayaWhip|PeachPuff|Peru|Pink|Plum|PowderBlue|Purple|Red|RosyBrown|RoyalBlue|SaddleBrown|Salmon|SandyBrown|SeaGreen|SeaShell|Sienna|Silver|SkyBlue|SlateBlue|SlateGr[ae]y|Snow|SpringGreen|SteelBlue|Tan|Teal|Thistle|Tomato|Transparent|Turquoise|Violet|Wheat|White|WhiteSmoke|Yellow|YellowGreen)\b/i,{pattern:/\b(?:hsl|rgb)\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*\)\B|\b(?:hsl|rgb)a\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*,\s*(?:0|0?\.\d+|1)\s*\)\B/i,inside:{unit:t,number:n,function:/[\w-]+(?=\()/,punctuation:/[(),]/}}],entity:/\\[\da-f]{1,8}/i,unit:t,boolean:/\b(?:false|true)\b/,operator:[/~|[+!\/%<>?=]=?|[-:]=|\*[*=]?|\.{2,3}|&&|\|\||\B-\B|\b(?:and|in|is(?: a| defined| not|nt)?|not|or)\b/],number:n,punctuation:/[{}()\[\];:,]/};r["interpolation"]={pattern:/\{[^\r\n}:]+\}/,alias:"variable",inside:{delimiter:{pattern:/^\{|\}$/,alias:"punctuation"},rest:r}},r["func"]={pattern:/[\w-]+\([^)]*\).*/,inside:{function:/^[^(]+/,rest:r}},e.languages.stylus={"atrule-declaration":{pattern:/(^[ \t]*)@.+/m,lookbehind:!0,inside:{atrule:/^@[\w-]+/,rest:r}},"variable-declaration":{pattern:/(^[ \t]*)[\w$-]+\s*.?=[ \t]*(?:\{[^{}]*\}|\S.*|$)/m,lookbehind:!0,inside:{variable:/^\S+/,rest:r}},statement:{pattern:/(^[ \t]*)(?:else|for|if|return|unless)[ \t].+/m,lookbehind:!0,inside:{keyword:/^\S+/,rest:r}},"property-declaration":{pattern:/((?:^|\{)([ \t]*))(?:[\w-]|\{[^}\r\n]+\})+(?:\s*:\s*|[ \t]+)(?!\s)[^{\r\n]*(?:;|[^{\r\n,]$(?!(?:\r?\n|\r)(?:\{|\2[ \t])))/m,lookbehind:!0,inside:{property:{pattern:/^[^\s:]+/,inside:{interpolation:r.interpolation}},rest:r}},selector:{pattern:/(^[ \t]*)(?:(?=\S)(?:[^{}\r\n:()]|::?[\w-]+(?:\([^)\r\n]*\)|(?![\w-]))|\{[^}\r\n]+\})+)(?:(?:\r?\n|\r)(?:\1(?:(?=\S)(?:[^{}\r\n:()]|::?[\w-]+(?:\([^)\r\n]*\)|(?![\w-]))|\{[^}\r\n]+\})+)))*(?:,$|\{|(?=(?:\r?\n|\r)(?:\{|\1[ \t])))/m,lookbehind:!0,inside:{interpolation:r.interpolation,comment:r.comment,punctuation:/[{},]/}},func:r.func,string:r.string,comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0,greedy:!0},interpolation:r.interpolation,punctuation:/[{}()\[\];:.]/}}(a),function(e){var t=e.util.clone(e.languages.typescript);e.languages.tsx=e.languages.extend("jsx",t),delete e.languages.tsx["parameter"],delete e.languages.tsx["literal-property"];var n=e.languages.tsx.tag;n.pattern=RegExp(/(^|[^\w$]|(?=<\/))/.source+"(?:"+n.pattern.source+")",n.pattern.flags),n.lookbehind=!0}(a),a.languages.wasm={comment:[/\(;[\s\S]*?;\)/,{pattern:/;;.*/,greedy:!0}],string:{pattern:/"(?:\\[\s\S]|[^"\\])*"/,greedy:!0},keyword:[{pattern:/\b(?:align|offset)=/,inside:{operator:/=/}},{pattern:/\b(?:(?:f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|neg?|nearest|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|sqrt|store(?:8|16|32)?|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))?|memory\.(?:grow|size))\b/,inside:{punctuation:/\./}},/\b(?:anyfunc|block|br(?:_if|_table)?|call(?:_indirect)?|data|drop|elem|else|end|export|func|get_(?:global|local)|global|if|import|local|loop|memory|module|mut|nop|offset|param|result|return|select|set_(?:global|local)|start|table|tee_local|then|type|unreachable)\b/],variable:/\$[\w!#$%&'*+\-./:<=>?@\\^`|~]+/,number:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/,punctuation:/[()]/};var s=a,u={plain:{backgroundColor:"#2a2734",color:"#9a86fd"},styles:[{types:["comment","prolog","doctype","cdata","punctuation"],style:{color:"#6c6783"}},{types:["namespace"],style:{opacity:.7}},{types:["tag","operator","number"],style:{color:"#e09142"}},{types:["property","function"],style:{color:"#9a86fd"}},{types:["tag-id","selector","atrule-id"],style:{color:"#eeebff"}},{types:["attr-name"],style:{color:"#c4b9fe"}},{types:["boolean","string","entity","url","attr-value","keyword","control","directive","unit","statement","regex","atrule","placeholder","variable"],style:{color:"#ffcc99"}},{types:["deleted"],style:{textDecorationLine:"line-through"}},{types:["inserted"],style:{textDecorationLine:"underline"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["important"],style:{color:"#c4b9fe"}}]},c=u,l={Prism:s,theme:c};function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}var h=/\r\n|\r|\n/,d=function(e){0===e.length?e.push({types:["plain"],content:"\n",empty:!0}):1===e.length&&""===e[0].content&&(e[0].content="\n",e[0].empty=!0)},v=function(e,t){var n=e.length;return n>0&&e[n-1]===t?e:e.concat(t)},m=function(e){var t=[[]],n=[e],r=[0],i=[e.length],o=0,a=0,s=[],u=[s];while(a>-1){while((o=r[a]++)<i[a]){var c=void 0,l=t[a],f=n[a],p=f[o];if("string"===typeof p?(l=a>0?l:["plain"],c=p):(l=v(l,p.type),p.alias&&(l=v(l,p.alias)),c=p.content),"string"===typeof c){var m=c.split(h),g=m.length;s.push({types:l,content:m[0]});for(var y=1;y<g;y++)d(s),u.push(s=[]),s.push({types:l,content:m[y]})}else a++,t.push(l),n.push(c),r.push(0),i.push(c.length)}a--,t.pop(),n.pop(),r.pop(),i.pop()}return d(s),u},g=function(e,t){var n=e.plain,r=Object.create(null),i=e.styles.reduce((function(e,n){var r=n.languages,i=n.style;return r&&!r.includes(t)||n.types.forEach((function(t){var n=p({},e[t],i);e[t]=n})),e}),r);return i.root=n,i.plain=p({},n,{backgroundColor:null}),i};function y(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}var b=function(e){function t(){var t=this,n=[],r=arguments.length;while(r--)n[r]=arguments[r];e.apply(this,n),f(this,"getThemeDict",(function(e){if(void 0!==t.themeDict&&e.theme===t.prevTheme&&e.language===t.prevLanguage)return t.themeDict;t.prevTheme=e.theme,t.prevLanguage=e.language;var n=e.theme?g(e.theme,e.language):void 0;return t.themeDict=n})),f(this,"getLineProps",(function(e){var n=e.key,r=e.className,i=e.style,o=y(e,["key","className","style","line"]),a=o,s=p({},a,{className:"token-line",style:void 0,key:void 0}),u=t.getThemeDict(t.props);return void 0!==u&&(s.style=u.plain),void 0!==i&&(s.style=void 0!==s.style?p({},s.style,i):i),void 0!==n&&(s.key=n),r&&(s.className+=" "+r),s})),f(this,"getStyleForToken",(function(e){var n=e.types,r=e.empty,i=n.length,o=t.getThemeDict(t.props);if(void 0!==o){if(1===i&&"plain"===n[0])return r?{display:"inline-block"}:void 0;if(1===i&&!r)return o[n[0]];var a=r?{display:"inline-block"}:{},s=n.map((function(e){return o[e]}));return Object.assign.apply(Object,[a].concat(s))}})),f(this,"getTokenProps",(function(e){var n=e.key,r=e.className,i=e.style,o=e.token,a=y(e,["key","className","style","token"]),s=a,u=p({},s,{className:"token "+o.types.join(" "),children:o.content,style:t.getStyleForToken(o),key:void 0});return void 0!==i&&(u.style=void 0!==u.style?p({},u.style,i):i),void 0!==n&&(u.key=n),r&&(u.className+=" "+r),u})),f(this,"tokenize",(function(e,t,n,r){var i={code:t,grammar:n,language:r,tokens:[]};e.hooks.run("before-tokenize",i);var o=i.tokens=e.tokenize(i.code,i.grammar,i.language);return e.hooks.run("after-tokenize",i),o}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=this.props,t=e.Prism,n=e.language,r=e.code,i=e.children,o=this.getThemeDict(this.props),a=t.languages[n],s=void 0!==a?this.tokenize(t,r,a,n):[r],u=m(s);return i({tokens:u,className:"prism-code language-"+n,style:void 0!==o?o.root:{},getLineProps:this.getLineProps,getTokenProps:this.getTokenProps})},t}(r["Component"]),_=b,x=n("dEAq");n("qHiR"),n("foS9");function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w.apply(this,arguments)}function O(e,t){return k(e)||A(e,t)||S(e,t)||E()}function E(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(e,t){if(e){if("string"===typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),t&&o.length===t)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function k(e){if(Array.isArray(e))return e}var C={acss:"css",axml:"xml"};t["a"]=function(e){var t=e.code,n=e.lang,r=e.showCopy,o=void 0===r||r,a=Object(x["useCopy"])(),s=O(a,2),u=s[0],c=s[1];return i.a.createElement("div",{className:"__dumi-default-code-block"},i.a.createElement(_,w({},l,{code:t,language:C[n]||n,theme:void 0}),(function(e){var n=e.className,r=e.style,a=e.tokens,s=e.getLineProps,l=e.getTokenProps;return i.a.createElement("pre",{className:n,style:r},o&&i.a.createElement("button",{className:"__dumi-default-icon __dumi-default-code-block-copy-btn","data-status":c,onClick:function(){return u(t)}}),a.map((function(e,t){return i.a.createElement("div",s({line:e,key:t}),e.map((function(e,t){return i.a.createElement("span",l({token:e,key:t}))})))})))})))}},H84U:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));n("wx14");var r=n("q1tI"),i=function(e,t){return t||(e?"ant-".concat(e):"ant")},o=r["createContext"]({getPrefixCls:i}),a=o.Consumer},H8j4:function(e,t,n){var r=n("QkVE");function i(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}e.exports=i},HAuM:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},HDyB:function(e,t,n){var r=n("nmnc"),i=n("JHRd"),o=n("ljhN"),a=n("or5M"),s=n("7fqy"),u=n("rEGp"),c=1,l=2,f="[object Boolean]",p="[object Date]",h="[object Error]",d="[object Map]",v="[object Number]",m="[object RegExp]",g="[object Set]",y="[object String]",b="[object Symbol]",_="[object ArrayBuffer]",x="[object DataView]",w=r?r.prototype:void 0,O=w?w.valueOf:void 0;function E(e,t,n,r,w,E,S){switch(n){case x:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _:return!(e.byteLength!=t.byteLength||!E(new i(e),new i(t)));case f:case p:case v:return o(+e,+t);case h:return e.name==t.name&&e.message==t.message;case m:case y:return e==t+"";case d:var j=s;case g:var A=r&c;if(j||(j=u),e.size!=t.size&&!A)return!1;var k=S.get(e);if(k)return k==t;r|=l,S.set(e,t);var C=a(j(e),j(t),r,w,E,S);return S["delete"](e),C;case b:if(O)return O.call(e)==O.call(t)}return!1}e.exports=E},HH4o:function(e,t,n){var r=n("tiKp"),i=r("iterator"),o=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){o=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(u){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(u){}return n}},HNyW:function(e,t,n){var r=n("NC/Y");e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},HOxn:function(e,t,n){var r=n("Cwc5"),i=n("Kz5y"),o=r(i,"Promise");e.exports=o},HYAF:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},"HaE+":function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,u,"next",e)}function u(e){r(a,i,o,s,u,"throw",e)}s(void 0)}))}}n.d(t,"a",(function(){return i}))},Hd5f:function(e,t,n){var r=n("0Dky"),i=n("tiKp"),o=n("LQDL"),a=i("species");e.exports=function(e){return o>=51||!r((function(){var t=[],n=t.constructor={};return n[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},HfwV:function(e,t,n){"use strict";var r=n("xnQO");function i(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(o,this,t)}function o(e,t,n){1==e?t.id=n.readVarint():2==e?a(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function a(e,t){var n=e.readVarint()+e.pos;while(e.pos<n){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}function s(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var a=u(e[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}return n&&i.push(n),i}function u(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)t=e[i],n=e[a],r+=(n.x-t.x)*(t.y+n.y);return r}e.exports=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;var t,n=e.readVarint()+e.pos,i=1,o=0,a=0,s=0,u=[];while(e.pos<n){if(o<=0){var c=e.readVarint();i=7&c,o=c>>3}if(o--,1===i||2===i)a+=e.readSVarint(),s+=e.readSVarint(),1===i&&(t&&u.push(t),t=[]),t.push(new r(a,s));else{if(7!==i)throw new Error("unknown command "+i);t&&t.push(t[0].clone())}}return t&&u.push(t),u},i.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;var t=e.readVarint()+e.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,c=-1/0;while(e.pos<t){if(r<=0){var l=e.readVarint();n=7&l,r=l>>3}if(r--,1===n||2===n)i+=e.readSVarint(),o+=e.readSVarint(),i<a&&(a=i),i>s&&(s=i),o<u&&(u=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,c]},i.prototype.toGeoJSON=function(e,t,n){var r,o,a=this.extent*Math.pow(2,n),u=this.extent*e,c=this.extent*t,l=this.loadGeometry(),f=i.types[this.type];function p(e){for(var t=0;t<e.length;t++){var n=e[t],r=180-360*(n.y+c)/a;e[t]=[360*(n.x+u)/a-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];l=h,p(l);break;case 2:for(r=0;r<l.length;r++)p(l[r]);break;case 3:for(l=s(l),r=0;r<l.length;r++)for(o=0;o<l[r].length;o++)p(l[r][o]);break}1===l.length?l=l[0]:f="Multi"+f;var d={type:"Feature",geometry:{type:f,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d}},HiXI:function(e,t,n){"use strict";var r=n("I+eb"),i=n("WKiH").end,o=n("yNLB"),a=o("trimEnd"),s=a?function(){return i(this)}:"".trimEnd;r({target:"String",proto:!0,forced:a},{trimEnd:s,trimRight:s})},HpQ9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerSnapshot=void 0;var r=function(){function e(){}return e.of=function(t,n){var r=new e;return r.bindings=t,r.middleware=n,r},e}();t.ContainerSnapshot=r},HsHA:function(e,t){var n=Math.log;e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:n(1+e)}},Hvzi:function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=n},"I+eb":function(e,t,n){var r=n("2oRo"),i=n("Bs8V").f,o=n("kRJp"),a=n("busE"),s=n("zk60"),u=n("6JNq"),c=n("lMq5");e.exports=function(e,t){var n,l,f,p,h,d,v=e.target,m=e.global,g=e.stat;if(l=m?r:g?r[v]||s(v,{}):(r[v]||{}).prototype,l)for(f in t){if(h=t[f],e.noTargetGet?(d=i(l,f),p=d&&d.value):p=l[f],n=c(m?f:v+(g?".":"#")+f,e.forced),!n&&void 0!==p){if(typeof h===typeof p)continue;u(h,p)}(e.sham||p&&p.sham)&&o(h,"sham",!0),a(l,f,h,e)}}},I1Gw:function(e,t,n){var r=n("dG/n");r("split")},I5X1:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("tJVT"),i=n("q1tI"),o=n("1WJl"),a=n.n(o),s=n("qwGt");function u(e,t){var n=Object(i["useContext"])(s["a"]),o=Object(i["useRef"])(t);o.current=t;var u=Object(i["useState"])((()=>o.current?o.current(n.data[e]):n.data[e])),c=Object(r["a"])(u,2),l=c[0],f=c[1],p=Object(i["useRef"])(l);p.current=l;var h=Object(i["useRef"])(!1);return Object(i["useEffect"])((()=>(h.current=!0,()=>{h.current=!1})),[]),Object(i["useEffect"])((()=>{var r=r=>{if(h.current)if(t&&o.current){var i=o.current(r),s=p.current;a()(i,s)||f(i)}else f(r);else setTimeout((()=>{n.data[e]=r,n.update(e)}))};try{n.callbacks[e].add(r),n.update(e)}catch(i){n.callbacks[e]=new Set,n.callbacks[e].add(r),n.update(e)}return()=>{n.callbacks[e].delete(r)}}),[e]),l}},I8vh:function(e,t,n){var r=n("ppGB"),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},I9xj:function(e,t,n){var r=n("1E5z");r(Math,"Math",!0)},"IL/d":function(e,t,n){"use strict";var r=n("iqeF"),i=n("67WC").exportTypedArrayStaticMethod,o=n("oHi+");i("from",o,r)},IZzc:function(e,t,n){"use strict";var r=n("67WC"),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=[].sort;o("sort",(function(e){return a.call(i(this),e)}))},ImZN:function(e,t,n){var r=n("glrk"),i=n("6VoE"),o=n("UMSQ"),a=n("A2ZE"),s=n("NaFW"),u=n("m92n"),c=function(e,t){this.stopped=e,this.result=t},l=e.exports=function(e,t,n,l,f){var p,h,d,v,m,g,y,b=a(t,n,l?2:1);if(f)p=e;else{if(h=s(e),"function"!=typeof h)throw TypeError("Target is not iterable");if(i(h)){for(d=0,v=o(e.length);v>d;d++)if(m=l?b(r(y=e[d])[0],y[1]):b(e[d]),m&&m instanceof c)return m;return new c(!1)}p=h.call(e)}g=p.next;while(!(y=g.call(p)).done)if(m=u(p,b,y.value,l),"object"==typeof m&&m&&m instanceof c)return m;return new c(!1)};l.stop=function(e){return new c(!0,e)}},Ioao:function(e,t,n){var r=n("heNW"),i=Math.max;function o(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){var o=arguments,a=-1,s=i(o.length-t,0),u=Array(s);while(++a<s)u[a]=o[t+a];a=-1;var c=Array(t+1);while(++a<t)c[a]=o[a];return c[t]=n(u),r(e,this,c)}}e.exports=o},IyRk:function(e,t){(function(t){e.exports=function(){var e={873:function(e){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(n){"object"===typeof window&&(t=window)}e.exports=t}},n={};function r(t){if(n[t])return n[t].exports;var i=n[t]={exports:{}},o=!0;try{e[t](i,i.exports,r),o=!1}finally{o&&delete n[t]}return i.exports}return r.ab=t+"/",r(873)}()}).call(this,"/")},JBy8:function(e,t,n){var r=n("yoRg"),i=n("eDl+"),o=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},JHRd:function(e,t,n){var r=n("Kz5y"),i=r.Uint8Array;e.exports=i},JHgL:function(e,t,n){var r=n("QkVE");function i(e){return r(this,e).get(e)}e.exports=i},JSQU:function(e,t,n){var r=n("YESw"),i="__lodash_hash_undefined__";function o(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?i:t,this}e.exports=o},JTJg:function(e,t,n){"use strict";var r=n("I+eb"),i=n("WjRb"),o=n("HYAF"),a=n("qxPZ");r({target:"String",proto:!0,forced:!a("includes")},{includes:function(e){return!!~String(o(this)).indexOf(i(e),arguments.length>1?arguments[1]:void 0)}})},JTzB:function(e,t,n){var r=n("NykK"),i=n("ExA7"),o="[object Arguments]";function a(e){return i(e)&&r(e)==o}e.exports=a},JX7q:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},JevA:function(e,t,n){var r=n("I+eb"),i=n("wg0c");r({target:"Number",stat:!0,forced:Number.parseInt!=i},{parseInt:i})},JfAA:function(e,t,n){"use strict";var r=n("busE"),i=n("glrk"),o=n("0Dky"),a=n("rW0t"),s="toString",u=RegExp.prototype,c=u[s],l=o((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),f=c.name!=s;(l||f)&&r(RegExp.prototype,s,(function(){var e=i(this),t=String(e.source),n=e.flags,r=String(void 0===n&&e instanceof RegExp&&!("flags"in u)?a.call(e):n);return"/"+t+"/"+r}),{unsafe:!0})},Ji7U:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("s4An");function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Object(r["a"])(e,t)}},JiZb:function(e,t,n){"use strict";var r=n("0GbY"),i=n("m/L8"),o=n("tiKp"),a=n("g6v/"),s=o("species");e.exports=function(e){var t=r(e),n=i.f;a&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},Junv:function(e,t,n){"use strict";var r=n("I+eb"),i=n("6LWA"),o=[].reverse,a=[1,2];r({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),o.call(this)}})},JwUS:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("HAuM"),s=n("WGBp"),u=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{reduce:function(e){var t=o(this),n=s(t),r=arguments.length<2,i=r?void 0:arguments[1];if(a(e),u(n,(function(n){r?(r=!1,i=n):i=e(i,n,n,t)}),void 0,!1,!0),r)throw TypeError("Reduce of empty set with no initial value");return i}})},JxQ3:function(e,t,n){var r="function"===typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=r&&i&&"function"===typeof i.get?i.get:null,a=r&&Map.prototype.forEach,s="function"===typeof Set&&Set.prototype,u=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=s&&u&&"function"===typeof u.get?u.get:null,l=s&&Set.prototype.forEach,f="function"===typeof WeakMap&&WeakMap.prototype,p=f?WeakMap.prototype.has:null,h="function"===typeof WeakSet&&WeakSet.prototype,d=h?WeakSet.prototype.has:null,v="function"===typeof WeakRef&&WeakRef.prototype,m=v?WeakRef.prototype.deref:null,g=Boolean.prototype.valueOf,y=Object.prototype.toString,b=Function.prototype.toString,_=String.prototype.match,x=String.prototype.slice,w=String.prototype.replace,O=String.prototype.toUpperCase,E=String.prototype.toLowerCase,S=RegExp.prototype.test,j=Array.prototype.concat,A=Array.prototype.join,k=Array.prototype.slice,C=Math.floor,T="function"===typeof BigInt?BigInt.prototype.valueOf:null,M=Object.getOwnPropertySymbols,P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?Symbol.prototype.toString:null,I="function"===typeof Symbol&&"object"===typeof Symbol.iterator,R="function"===typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===I||"symbol")?Symbol.toStringTag:null,L=Object.prototype.propertyIsEnumerable,D=("function"===typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function N(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||S.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"===typeof e){var r=e<0?-C(-e):C(e);if(r!==e){var i=String(r),o=x.call(t,i.length+1);return w.call(i,n,"$&_")+"."+w.call(w.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return w.call(t,n,"$&_")}var F=n(1),z=F.custom,B=K(z)?z:null;function U(e,t,n){var r="double"===(n.quoteStyle||t)?'"':"'";return r+e+r}function V(e){return w.call(String(e),/"/g,"&quot;")}function H(e){return"[object Array]"===ee(e)&&(!R||!("object"===typeof e&&R in e))}function G(e){return"[object Date]"===ee(e)&&(!R||!("object"===typeof e&&R in e))}function W(e){return"[object RegExp]"===ee(e)&&(!R||!("object"===typeof e&&R in e))}function q(e){return"[object Error]"===ee(e)&&(!R||!("object"===typeof e&&R in e))}function Z(e){return"[object String]"===ee(e)&&(!R||!("object"===typeof e&&R in e))}function Y(e){return"[object Number]"===ee(e)&&(!R||!("object"===typeof e&&R in e))}function X(e){return"[object Boolean]"===ee(e)&&(!R||!("object"===typeof e&&R in e))}function K(e){if(I)return e&&"object"===typeof e&&e instanceof Symbol;if("symbol"===typeof e)return!0;if(!e||"object"!==typeof e||!P)return!1;try{return P.call(e),!0}catch(t){}return!1}function $(e){if(!e||"object"!==typeof e||!T)return!1;try{return T.call(e),!0}catch(t){}return!1}e.exports=function e(t,n,r,i){var s=n||{};if(J(s,"quoteStyle")&&"single"!==s.quoteStyle&&"double"!==s.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(J(s,"maxStringLength")&&("number"===typeof s.maxStringLength?s.maxStringLength<0&&s.maxStringLength!==1/0:null!==s.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var u=!J(s,"customInspect")||s.customInspect;if("boolean"!==typeof u&&"symbol"!==u)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(J(s,"indent")&&null!==s.indent&&"\t"!==s.indent&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(J(s,"numericSeparator")&&"boolean"!==typeof s.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var f=s.numericSeparator;if("undefined"===typeof t)return"undefined";if(null===t)return"null";if("boolean"===typeof t)return t?"true":"false";if("string"===typeof t)return ce(t,s);if("number"===typeof t){if(0===t)return 1/0/t>0?"0":"-0";var p=String(t);return f?N(t,p):p}if("bigint"===typeof t){var h=String(t)+"n";return f?N(t,h):h}var d="undefined"===typeof s.depth?5:s.depth;if("undefined"===typeof r&&(r=0),r>=d&&d>0&&"object"===typeof t)return H(t)?"[Array]":"[Object]";var v=ve(s,r);if("undefined"===typeof i)i=[];else if(ne(i,t)>=0)return"[Circular]";function m(t,n,o){if(n&&(i=k.call(i),i.push(n)),o){var a={depth:s.depth};return J(s,"quoteStyle")&&(a.quoteStyle=s.quoteStyle),e(t,a,r+1,i)}return e(t,s,r+1,i)}if("function"===typeof t&&!W(t)){var y=te(t),b=ge(t,m);return"[Function"+(y?": "+y:" (anonymous)")+"]"+(b.length>0?" { "+A.call(b,", ")+" }":"")}if(K(t)){var _=I?w.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):P.call(t);return"object"!==typeof t||I?_:fe(_)}if(ue(t)){for(var O="<"+E.call(String(t.nodeName)),S=t.attributes||[],C=0;C<S.length;C++)O+=" "+S[C].name+"="+U(V(S[C].value),"double",s);return O+=">",t.childNodes&&t.childNodes.length&&(O+="..."),O+="</"+E.call(String(t.nodeName))+">",O}if(H(t)){if(0===t.length)return"[]";var M=ge(t,m);return v&&!de(M)?"["+me(M,v)+"]":"[ "+A.call(M,", ")+" ]"}if(q(t)){var z=ge(t,m);return"cause"in Error.prototype||!("cause"in t)||L.call(t,"cause")?0===z.length?"["+String(t)+"]":"{ ["+String(t)+"] "+A.call(z,", ")+" }":"{ ["+String(t)+"] "+A.call(j.call("[cause]: "+m(t.cause),z),", ")+" }"}if("object"===typeof t&&u){if(B&&"function"===typeof t[B]&&F)return F(t,{depth:d-r});if("symbol"!==u&&"function"===typeof t.inspect)return t.inspect()}if(re(t)){var Q=[];return a&&a.call(t,(function(e,n){Q.push(m(n,t,!0)+" => "+m(e,t))})),he("Map",o.call(t),Q,v)}if(ae(t)){var le=[];return l&&l.call(t,(function(e){le.push(m(e,t))})),he("Set",c.call(t),le,v)}if(ie(t))return pe("WeakMap");if(se(t))return pe("WeakSet");if(oe(t))return pe("WeakRef");if(Y(t))return fe(m(Number(t)));if($(t))return fe(m(T.call(t)));if(X(t))return fe(g.call(t));if(Z(t))return fe(m(String(t)));if(!G(t)&&!W(t)){var ye=ge(t,m),be=D?D(t)===Object.prototype:t instanceof Object||t.constructor===Object,_e=t instanceof Object?"":"null prototype",xe=!be&&R&&Object(t)===t&&R in t?x.call(ee(t),8,-1):_e?"Object":"",we=be||"function"!==typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"",Oe=we+(xe||_e?"["+A.call(j.call([],xe||[],_e||[]),": ")+"] ":"");return 0===ye.length?Oe+"{}":v?Oe+"{"+me(ye,v)+"}":Oe+"{ "+A.call(ye,", ")+" }"}return String(t)};var Q=Object.prototype.hasOwnProperty||function(e){return e in this};function J(e,t){return Q.call(e,t)}function ee(e){return y.call(e)}function te(e){if(e.name)return e.name;var t=_.call(b.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function ne(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function re(e){if(!o||!e||"object"!==typeof e)return!1;try{o.call(e);try{c.call(e)}catch(t){return!0}return e instanceof Map}catch(n){}return!1}function ie(e){if(!p||!e||"object"!==typeof e)return!1;try{p.call(e,p);try{d.call(e,d)}catch(t){return!0}return e instanceof WeakMap}catch(n){}return!1}function oe(e){if(!m||!e||"object"!==typeof e)return!1;try{return m.call(e),!0}catch(t){}return!1}function ae(e){if(!c||!e||"object"!==typeof e)return!1;try{c.call(e);try{o.call(e)}catch(t){return!0}return e instanceof Set}catch(n){}return!1}function se(e){if(!d||!e||"object"!==typeof e)return!1;try{d.call(e,d);try{p.call(e,p)}catch(t){return!0}return e instanceof WeakSet}catch(n){}return!1}function ue(e){return!(!e||"object"!==typeof e)&&("undefined"!==typeof HTMLElement&&e instanceof HTMLElement||"string"===typeof e.nodeName&&"function"===typeof e.getAttribute)}function ce(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return ce(x.call(e,0,t.maxStringLength),t)+r}var i=w.call(w.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,le);return U(i,"single",t)}function le(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+O.call(t.toString(16))}function fe(e){return"Object("+e+")"}function pe(e){return e+" { ? }"}function he(e,t,n,r){var i=r?me(n,r):A.call(n,", ");return e+" ("+t+") {"+i+"}"}function de(e){for(var t=0;t<e.length;t++)if(ne(e[t],"\n")>=0)return!1;return!0}function ve(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"===typeof e.indent&&e.indent>0))return null;n=A.call(Array(e.indent+1)," ")}return{base:n,prev:A.call(Array(t+1),n)}}function me(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+A.call(e,","+n)+"\n"+t.prev}function ge(e,t){var n=H(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++)r[i]=J(e,i)?t(e[i],e):""}var o,a="function"===typeof M?M(e):[];if(I){o={};for(var s=0;s<a.length;s++)o["$"+a[s]]=a[s]}for(var u in e)J(e,u)&&(n&&String(Number(u))===u&&u<e.length||I&&o["$"+u]instanceof Symbol||(S.call(/[^\w$]/,u)?r.push(t(u,e)+": "+t(e[u],e)):r.push(u+": "+t(e[u],e))));if("function"===typeof M)for(var c=0;c<a.length;c++)L.call(e,a[c])&&r.push("["+t(a[c])+"]: "+t(e[a[c]],e));return r}},K6Lp:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),i=n.n(r),o=n("dEAq"),a=n("H1Ra"),s=n("nKUr"),u=i.a.memo((e=>{e.demos;return Object(s["jsx"])(s["Fragment"],{children:Object(s["jsxs"])("div",{className:"markdown",children:[Object(s["jsxs"])("h3",{id:"\u5b89\u88c5",children:[Object(s["jsx"])(o["AnchorLink"],{to:"#\u5b89\u88c5","aria-hidden":"true",tabIndex:-1,children:Object(s["jsx"])("span",{className:"icon icon-link"})}),"\u5b89\u88c5"]}),Object(s["jsx"])(a["a"],{code:"npm i @antv/l7-react",lang:"bash"}),Object(s["jsxs"])("h3",{id:"\u793a\u4f8b",children:[Object(s["jsx"])(o["AnchorLink"],{to:"#\u793a\u4f8b","aria-hidden":"true",tabIndex:-1,children:Object(s["jsx"])("span",{className:"icon icon-link"})}),"\u793a\u4f8b"]}),Object(s["jsx"])(a["a"],{code:"import { LineLayer, AMapScene } from '@antv/l7-react';\n\nexport default React.memo(function Map() {\n  const [data, setData] = React.useState();\n  React.useEffect(() => {\n    const fetchData = async () => {\n      const response = await fetch(\n        'https://gw.alipayobjects.com/os/basement_prod/32e1f3ab-8588-46cb-8a47-75afb692117d.json',\n      );\n      const raw = await response.json();\n      setData(raw);\n    };\n    fetchData();\n  }, []);\n  return (\n    <>\n      <AMapScene\n        map={{\n          center: [110.19382669582967, 50.258134],\n          pitch: 0,\n          style: 'dark',\n          zoom: 1,\n        }}\n        style={{\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n        }}\n      >\n        {data && (\n          <LineLayer\n            key={'2'}\n            source={{\n              data,\n            }}\n            size={{\n              values: 1,\n            }}\n            color={{\n              values: '#fff',\n            }}\n            shape={{\n              values: 'line',\n            }}\n            style={{\n              opacity: 1,\n            }}\n          />\n        )}\n      </AMapScene>\n    </>\n  );\n});",lang:"javascript"})]})})}));t["default"]=e=>{var t=i.a.useContext(o["context"]),n=t.demos;return i.a.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),Object(s["jsx"])(u,{demos:n})}},KMkd:function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},KQm4:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("a3WO");function i(e){if(Array.isArray(e))return Object(r["a"])(e)}var o=n("25BE"),a=n("BsWD");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e){return i(e)||Object(o["a"])(e)||Object(a["a"])(e)||s()}},KazK:function(e,t,n){"use strict";n.r(t);var r=n("/7QA"),i=(n("q1tI"),n("nKUr"));t["default"]=()=>Object(i["jsx"])(r["a"],{map:{center:[110.19382669582967,50.258134],pitch:0,style:"normal",zoom:1},style:{height:"400px",position:"relative",background:"#011030"},children:Object(i["jsx"])(r["f"],{options:{autoFit:!0},source:{data:"https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*8SUaRr7bxNsAAAAAAAAAAABkARQnAQ",parser:{type:"image",extent:[113.1277263548,32.3464238863,118.1365790452,36.4786759137]}},style:{opacity:1}})})},KcUY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=s(n("q1tI")),i=o(n("nLCz"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!==typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r["default"]=e,n&&n.set(e,r),r}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=p(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function l(e,t){return v(e)||d(e,t)||p(e,t)||f()}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){if(e){if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function v(e){if(Array.isArray(e))return e}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t=b(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){var t=_(e,"string");return"symbol"===u(t)?t:String(t)}function _(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var x=function(e,t){var n=function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r[1].replace(/([^^])\/$/,"$1");return g(g({},(null===(e=r[0].find((function(e){var t=e.path;return t===o})))||void 0===e?void 0:e.meta)||{}),{},{__pathname:t})},i=(0,r.useState)(n(e,t)),o=l(i,2),a=o[0],s=o[1];return(0,r.useLayoutEffect)((function(){s(n(e,t))}),[t]),a},w=function(e,t){var n=function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(null===(t=r[0].find((function(e){return new RegExp("/".concat(e.name,"(/|$)")).test(r[1])})))||void 0===t?void 0:t.name)||e[0].name},i=(0,r.useState)(n(e,t)),o=l(i,2),a=o[0],s=o[1];return(0,r.useLayoutEffect)((function(){s(n(e,t))}),[t]),a},O=function(e,t,n){var i=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=n[0].navs[n[1]]||[],o="*",a=i.length-1;a>=0;a-=1){var s=i[a],u=[s].concat(s.children).filter(Boolean),c=u.find((function(e){return e.path&&new RegExp("^".concat(e.path.replace(/\.html$/,""),"(/|.|$)")).test(n[2])}));if(c){o=c.path;break}}return(null===(e=n[0].menus[n[1]])||void 0===e?void 0:e[o])||[]},o=(0,r.useState)(i(e,t,n)),a=l(o,2),s=a[0],u=a[1];return(0,r.useLayoutEffect)((function(){u(i(e,t,n))}),[e.navs,e.menus,t,n]),s},E=function(e,t,n){var i=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return r[0]===r[1][0].name?r[2].path:"".concat(n.path,"/").concat(e).replace(/\/\//,"/")},o=(0,r.useState)(i(e,t,n)),a=l(o,2),s=a[0],u=a[1];return(0,r.useLayoutEffect)((function(){u(i(e,t,n))}),[e]),s},S=function e(t){var n,r,i=c(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.__dumiRoot){n=o.routes;break}if(o.routes&&(n=e(o.routes)))break}}catch(a){i.e(a)}finally{i.f()}return n},j=function(e){var t=e.location,n=e.route,o=e.children,a=e.config,s=e.apis,u=e.demos,c=t.pathname.replace(n.path.replace(/^\/$/,"//"),""),l=S(e.routes)||[],f=x(l,t.pathname),p=w(a.locales,c),h=O(a,p,t.pathname),d=E(p,a.locales,n);return r["default"].createElement(i["default"].Provider,{value:{config:a,meta:f.__pathname===t.pathname?f:{},locale:p,nav:a.navs[p]||[],menu:h,base:d,routes:l,apis:s,demos:u}},o)},A=j;t["default"]=A},KfNM:function(e,t){var n=Object.prototype,r=n.toString;function i(e){return r.call(e)}e.exports=i},KhsS:function(e,t,n){var r=n("dG/n");r("match")},KpVd:function(e,t,n){"use strict";(function(e){function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,a(e,t)}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function u(e,t,n){return u=s()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=Function.bind.apply(e,r),o=new i;return n&&a(o,n.prototype),o},u.apply(null,arguments)}function c(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function l(e){var t="function"===typeof Map?new Map:void 0;return l=function(e){if(null===e||!c(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return u(e,arguments,o(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a(n,e)},l(e)}n.d(t,"a",(function(){return re}));var f=/%[sdj%]/g,p=function(){};function h(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function d(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=0,o=n.length;if("function"===typeof e)return e.apply(null,n);if("string"===typeof e){var a=e.replace(f,(function(e){if("%%"===e)return"%";if(i>=o)return e;switch(e){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(t){return"[Circular]"}break;default:return e}}));return a}return e}function v(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}function m(e,t){return void 0===e||null===e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!v(t)||"string"!==typeof e||e))}function g(e,t,n){var r=[],i=0,o=e.length;function a(e){r.push.apply(r,e||[]),i++,i===o&&n(r)}e.forEach((function(e){t(e,a)}))}function y(e,t,n){var r=0,i=e.length;function o(a){if(a&&a.length)n(a);else{var s=r;r+=1,s<i?t(e[s],o):n([])}}o([])}function b(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n]||[])})),t}"undefined"!==typeof e&&Object({NODE_ENV:"production"});var _=function(e){function t(t,n){var r;return r=e.call(this,"Async Validation Error")||this,r.errors=t,r.fields=n,r}return i(t,e),t}(l(Error));function x(e,t,n,r,i){if(t.first){var o=new Promise((function(t,o){var a=function(e){return r(e),e.length?o(new _(e,h(e))):t(i)},s=b(e);y(s,n,a)}));return o["catch"]((function(e){return e})),o}var a=!0===t.firstFields?Object.keys(e):t.firstFields||[],s=Object.keys(e),u=s.length,c=0,l=[],f=new Promise((function(t,o){var f=function(e){if(l.push.apply(l,e),c++,c===u)return r(l),l.length?o(new _(l,h(l))):t(i)};s.length||(r(l),t(i)),s.forEach((function(t){var r=e[t];-1!==a.indexOf(t)?y(r,n,f):g(r,n,f)}))}));return f["catch"]((function(e){return e})),f}function w(e){return!(!e||void 0===e.message)}function O(e,t){for(var n=e,r=0;r<t.length;r++){if(void 0==n)return n;n=n[t[r]]}return n}function E(e,t){return function(n){var r;return r=e.fullFields?O(t,e.fullFields):t[n.field||e.fullField],w(n)?(n.field=n.field||e.fullField,n.fieldValue=r,n):{message:"function"===typeof n?n():n,fieldValue:r,field:n.field||e.fullField}}}function S(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];"object"===typeof i&&"object"===typeof e[n]?e[n]=r({},e[n],i):e[n]=i}return e}var j,A=function(e,t,n,r,i,o){!e.required||n.hasOwnProperty(e.field)&&!m(t,o||e.type)||r.push(d(i.messages.required,e.fullField))},k=function(e,t,n,r,i){(/^\s+$/.test(t)||""===t)&&r.push(d(i.messages.whitespace,e.fullField))},C=function(){if(j)return j;var e="[a-fA-F\\d:]",t=function(t){return t&&t.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",i=("\n(?:\n(?:"+r+":){7}(?:"+r+"|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:"+r+":){6}(?:"+n+"|:"+r+"|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:"+r+":){5}(?::"+n+"|(?::"+r+"){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:"+r+":){4}(?:(?::"+r+"){0,1}:"+n+"|(?::"+r+"){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:"+r+":){3}(?:(?::"+r+"){0,2}:"+n+"|(?::"+r+"){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:"+r+":){2}(?:(?::"+r+"){0,3}:"+n+"|(?::"+r+"){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:"+r+":){1}(?:(?::"+r+"){0,4}:"+n+"|(?::"+r+"){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::"+r+"){0,5}:"+n+"|(?::"+r+"){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n").replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),o=new RegExp("(?:^"+n+"$)|(?:^"+i+"$)"),a=new RegExp("^"+n+"$"),s=new RegExp("^"+i+"$"),u=function(e){return e&&e.exact?o:new RegExp("(?:"+t(e)+n+t(e)+")|(?:"+t(e)+i+t(e)+")","g")};u.v4=function(e){return e&&e.exact?a:new RegExp(""+t(e)+n+t(e),"g")},u.v6=function(e){return e&&e.exact?s:new RegExp(""+t(e)+i+t(e),"g")};var c="(?:(?:[a-z]+:)?//)",l="(?:\\S+(?::\\S*)?@)?",f=u.v4().source,p=u.v6().source,h="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",d="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",v="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",m="(?::\\d{2,5})?",g='(?:[/?#][^\\s"]*)?',y="(?:"+c+"|www\\.)"+l+"(?:localhost|"+f+"|"+p+"|"+h+d+v+")"+m+g;return j=new RegExp("(?:^"+y+"$)","i"),j},T={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},M={integer:function(e){return M.number(e)&&parseInt(e,10)===e},float:function(e){return M.number(e)&&!M.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(t){return!1}},date:function(e){return"function"===typeof e.getTime&&"function"===typeof e.getMonth&&"function"===typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"===typeof e},object:function(e){return"object"===typeof e&&!M.array(e)},method:function(e){return"function"===typeof e},email:function(e){return"string"===typeof e&&e.length<=320&&!!e.match(T.email)},url:function(e){return"string"===typeof e&&e.length<=2048&&!!e.match(C())},hex:function(e){return"string"===typeof e&&!!e.match(T.hex)}},P=function(e,t,n,r,i){if(e.required&&void 0===t)A(e,t,n,r,i);else{var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],a=e.type;o.indexOf(a)>-1?M[a](t)||r.push(d(i.messages.types[a],e.fullField,e.type)):a&&typeof t!==e.type&&r.push(d(i.messages.types[a],e.fullField,e.type))}},I=function(e,t,n,r,i){var o="number"===typeof e.len,a="number"===typeof e.min,s="number"===typeof e.max,u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=t,l=null,f="number"===typeof t,p="string"===typeof t,h=Array.isArray(t);if(f?l="number":p?l="string":h&&(l="array"),!l)return!1;h&&(c=t.length),p&&(c=t.replace(u,"_").length),o?c!==e.len&&r.push(d(i.messages[l].len,e.fullField,e.len)):a&&!s&&c<e.min?r.push(d(i.messages[l].min,e.fullField,e.min)):s&&!a&&c>e.max?r.push(d(i.messages[l].max,e.fullField,e.max)):a&&s&&(c<e.min||c>e.max)&&r.push(d(i.messages[l].range,e.fullField,e.min,e.max))},R="enum",L=function(e,t,n,r,i){e[R]=Array.isArray(e[R])?e[R]:[],-1===e[R].indexOf(t)&&r.push(d(i.messages[R],e.fullField,e[R].join(", ")))},D=function(e,t,n,r,i){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(d(i.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"===typeof e.pattern){var o=new RegExp(e.pattern);o.test(t)||r.push(d(i.messages.pattern.mismatch,e.fullField,t,e.pattern))}},N={required:A,whitespace:k,type:P,range:I,enum:L,pattern:D},F=function(e,t,n,r,i){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(m(t,"string")&&!e.required)return n();N.required(e,t,r,o,i,"string"),m(t,"string")||(N.type(e,t,r,o,i),N.range(e,t,r,o,i),N.pattern(e,t,r,o,i),!0===e.whitespace&&N.whitespace(e,t,r,o,i))}n(o)},z=function(e,t,n,r,i){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(m(t)&&!e.required)return n();N.required(e,t,r,o,i),void 0!==t&&N.type(e,t,r,o,i)}n(o)},B=function(e,t,n,r,i){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(""===t&&(t=void 0),m(t)&&!e.required)return n();N.required(e,t,r,o,i),void 0!==t&&(N.type(e,t,r,o,i),N.range(e,t,r,o,i))}n(o)},U=function(e,t,n,r,i){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(m(t)&&!e.required)return n();N.required(e,t,r,o,i),void 0!==t&&N.type(e,t,r,o,i)}n(o)},V=function(e,t,n,r,i){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(m(t)&&!e.required)return n();N.required(e,t,r,o,i),m(t)||N.type(e,t,r,o,i)}n(o)},H=function(e,t,n,r,i){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(m(t)&&!e.required)return n();N.required(e,t,r,o,i),void 0!==t&&(N.type(e,t,r,o,i),N.range(e,t,r,o,i))}n(o)},G=function(e,t,n,r,i){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(m(t)&&!e.required)return n();N.required(e,t,r,o,i),void 0!==t&&(N.type(e,t,r,o,i),N.range(e,t,r,o,i))}n(o)},W=function(e,t,n,r,i){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if((void 0===t||null===t)&&!e.required)return n();N.required(e,t,r,o,i,"array"),void 0!==t&&null!==t&&(N.type(e,t,r,o,i),N.range(e,t,r,o,i))}n(o)},q=function(e,t,n,r,i){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(m(t)&&!e.required)return n();N.required(e,t,r,o,i),void 0!==t&&N.type(e,t,r,o,i)}n(o)},Z="enum",Y=function(e,t,n,r,i){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(m(t)&&!e.required)return n();N.required(e,t,r,o,i),void 0!==t&&N[Z](e,t,r,o,i)}n(o)},X=function(e,t,n,r,i){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(m(t,"string")&&!e.required)return n();N.required(e,t,r,o,i),m(t,"string")||N.pattern(e,t,r,o,i)}n(o)},K=function(e,t,n,r,i){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(m(t,"date")&&!e.required)return n();var s;if(N.required(e,t,r,o,i),!m(t,"date"))s=t instanceof Date?t:new Date(t),N.type(e,s,r,o,i),s&&N.range(e,s.getTime(),r,o,i)}n(o)},$=function(e,t,n,r,i){var o=[],a=Array.isArray(t)?"array":typeof t;N.required(e,t,r,o,i,a),n(o)},Q=function(e,t,n,r,i){var o=e.type,a=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(m(t,o)&&!e.required)return n();N.required(e,t,r,a,i,o),m(t,o)||N.type(e,t,r,a,i)}n(a)},J=function(e,t,n,r,i){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(m(t)&&!e.required)return n();N.required(e,t,r,o,i)}n(o)},ee={string:F,method:z,number:B,boolean:U,regexp:V,integer:H,float:G,array:W,object:q,enum:Y,pattern:X,date:K,url:Q,hex:Q,email:Q,required:$,any:J};function te(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var ne=te(),re=function(){function e(e){this.rules=null,this._messages=ne,this.define(e)}var t=e.prototype;return t.define=function(e){var t=this;if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==typeof e||Array.isArray(e))throw new Error("Rules must be an object");this.rules={},Object.keys(e).forEach((function(n){var r=e[n];t.rules[n]=Array.isArray(r)?r:[r]}))},t.messages=function(e){return e&&(this._messages=S(te(),e)),this._messages},t.validate=function(t,n,i){var o=this;void 0===n&&(n={}),void 0===i&&(i=function(){});var a=t,s=n,u=i;if("function"===typeof s&&(u=s,s={}),!this.rules||0===Object.keys(this.rules).length)return u&&u(null,a),Promise.resolve(a);function c(e){var t=[],n={};function r(e){var n;Array.isArray(e)?t=(n=t).concat.apply(n,e):t.push(e)}for(var i=0;i<e.length;i++)r(e[i]);t.length?(n=h(t),u(t,n)):u(null,a)}if(s.messages){var l=this.messages();l===ne&&(l=te()),S(l,s.messages),s.messages=l}else s.messages=this.messages();var f={},p=s.keys||Object.keys(this.rules);p.forEach((function(e){var n=o.rules[e],i=a[e];n.forEach((function(n){var s=n;"function"===typeof s.transform&&(a===t&&(a=r({},a)),i=a[e]=s.transform(i)),s="function"===typeof s?{validator:s}:r({},s),s.validator=o.getValidationMethod(s),s.validator&&(s.field=e,s.fullField=s.fullField||e,s.type=o.getType(s),f[e]=f[e]||[],f[e].push({rule:s,value:i,source:a,field:e}))}))}));var v={};return x(f,s,(function(t,n){var i,o=t.rule,u=("object"===o.type||"array"===o.type)&&("object"===typeof o.fields||"object"===typeof o.defaultField);function c(e,t){return r({},t,{fullField:o.fullField+"."+e,fullFields:o.fullFields?[].concat(o.fullFields,[e]):[e]})}function l(i){void 0===i&&(i=[]);var l=Array.isArray(i)?i:[i];!s.suppressWarning&&l.length&&e.warning("async-validator:",l),l.length&&void 0!==o.message&&(l=[].concat(o.message));var f=l.map(E(o,a));if(s.first&&f.length)return v[o.field]=1,n(f);if(u){if(o.required&&!t.value)return void 0!==o.message?f=[].concat(o.message).map(E(o,a)):s.error&&(f=[s.error(o,d(s.messages.required,o.field))]),n(f);var p={};o.defaultField&&Object.keys(t.value).map((function(e){p[e]=o.defaultField})),p=r({},p,t.rule.fields);var h={};Object.keys(p).forEach((function(e){var t=p[e],n=Array.isArray(t)?t:[t];h[e]=n.map(c.bind(null,e))}));var m=new e(h);m.messages(s.messages),t.rule.options&&(t.rule.options.messages=s.messages,t.rule.options.error=s.error),m.validate(t.value,t.rule.options||s,(function(e){var t=[];f&&f.length&&t.push.apply(t,f),e&&e.length&&t.push.apply(t,e),n(t.length?t:null)}))}else n(f)}if(u=u&&(o.required||!o.required&&t.value),o.field=t.field,o.asyncValidator)i=o.asyncValidator(o,t.value,l,t.source,s);else if(o.validator){try{i=o.validator(o,t.value,l,t.source,s)}catch(f){null==console.error||console.error(f),s.suppressValidatorError||setTimeout((function(){throw f}),0),l(f.message)}!0===i?l():!1===i?l("function"===typeof o.message?o.message(o.fullField||o.field):o.message||(o.fullField||o.field)+" fails"):i instanceof Array?l(i):i instanceof Error&&l(i.message)}i&&i.then&&i.then((function(){return l()}),(function(e){return l(e)}))}),(function(e){c(e)}),a)},t.getType=function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!==typeof e.validator&&e.type&&!ee.hasOwnProperty(e.type))throw new Error(d("Unknown rule type %s",e.type));return e.type||"string"},t.getValidationMethod=function(e){if("function"===typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?ee.required:ee[this.getType(e)]||void 0},e}();re.register=function(e,t){if("function"!==typeof t)throw new Error("Cannot register a validator by type, validator is not a function");ee[e]=t},re.warning=p,re.messages=ne,re.validators=ee}).call(this,n("Q2Ig"))},KrxN:function(e,t,n){var r=n("I+eb"),i=180/Math.PI;r({target:"Math",stat:!0},{degrees:function(e){return e*i}})},Kwbf:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return f}));var r={},i=[],o=function(e){i.push(e)};function a(e,t){}function s(e,t){}function u(){r={}}function c(e,t,n){t||r[n]||(e(!1,n),r[n]=!0)}function l(e,t){c(a,e,t)}function f(e,t){c(s,e,t)}l.preMessage=o,l.resetWarned=u,l.noteOnce=f,t["a"]=l},Kz25:function(e,t,n){"use strict";n("PKPk");var r,i=n("I+eb"),o=n("g6v/"),a=n("DTth"),s=n("2oRo"),u=n("N+g0"),c=n("busE"),l=n("GarU"),f=n("UTVS"),p=n("YNrV"),h=n("TfTi"),d=n("ZUd8").codeAt,v=n("X7LM"),m=n("1E5z"),g=n("mGGf"),y=n("afO8"),b=s.URL,_=g.URLSearchParams,x=g.getState,w=y.set,O=y.getterFor("URL"),E=Math.floor,S=Math.pow,j="Invalid authority",A="Invalid scheme",k="Invalid host",C="Invalid port",T=/[A-Za-z]/,M=/[\d+-.A-Za-z]/,P=/\d/,I=/^(0x|0X)/,R=/^[0-7]+$/,L=/^\d+$/,D=/^[\dA-Fa-f]+$/,N=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,F=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,z=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,B=/[\u0009\u000A\u000D]/g,U=function(e,t){var n,r,i;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return k;if(n=H(t.slice(1,-1)),!n)return k;e.host=n}else if(Q(e)){if(t=v(t),N.test(t))return k;if(n=V(t),null===n)return k;e.host=n}else{if(F.test(t))return k;for(n="",r=h(t),i=0;i<r.length;i++)n+=K(r[i],q);e.host=n}},V=function(e){var t,n,r,i,o,a,s,u=e.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),t=u.length,t>4)return e;for(n=[],r=0;r<t;r++){if(i=u[r],""==i)return e;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=I.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)a=0;else{if(!(10==o?L:8==o?R:D).test(i))return e;a=parseInt(i,o)}n.push(a)}for(r=0;r<t;r++)if(a=n[r],r==t-1){if(a>=S(256,5-t))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*S(256,3-r);return s},H=function(e){var t,n,r,i,o,a,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,f=0,p=function(){return e.charAt(f)};if(":"==p()){if(":"!=e.charAt(1))return;f+=2,c++,l=c}while(p()){if(8==c)return;if(":"!=p()){t=n=0;while(n<4&&D.test(p()))t=16*t+parseInt(p(),16),f++,n++;if("."==p()){if(0==n)return;if(f-=n,c>6)return;r=0;while(p()){if(i=null,r>0){if(!("."==p()&&r<4))return;f++}if(!P.test(p()))return;while(P.test(p())){if(o=parseInt(p(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;f++}u[c]=256*u[c]+i,r++,2!=r&&4!=r||c++}if(4!=r)return;break}if(":"==p()){if(f++,!p())return}else if(p())return;u[c++]=t}else{if(null!==l)return;f++,c++,l=c}}if(null!==l){a=c-l,c=7;while(0!=c&&a>0)s=u[c],u[c--]=u[l+a-1],u[l+--a]=s}else if(8!=c)return;return u},G=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(t=r,n=i),t},W=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=E(e/256);return t.join(".")}if("object"==typeof e){for(t="",r=G(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},q={},Z=p({},q,{" ":1,'"':1,"<":1,">":1,"`":1}),Y=p({},Z,{"#":1,"?":1,"{":1,"}":1}),X=p({},Y,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),K=function(e,t){var n=d(e,0);return n>32&&n<127&&!f(t,e)?e:encodeURIComponent(e)},$={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Q=function(e){return f($,e.scheme)},J=function(e){return""!=e.username||""!=e.password},ee=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},te=function(e,t){var n;return 2==e.length&&T.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},ne=function(e){var t;return e.length>1&&te(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},re=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&te(t[0],!0)||t.pop()},ie=function(e){return"."===e||"%2e"===e.toLowerCase()},oe=function(e){return e=e.toLowerCase(),".."===e||"%2e."===e||".%2e"===e||"%2e%2e"===e},ae={},se={},ue={},ce={},le={},fe={},pe={},he={},de={},ve={},me={},ge={},ye={},be={},_e={},xe={},we={},Oe={},Ee={},Se={},je={},Ae=function(e,t,n,i){var o,a,s,u,c=n||ae,l=0,p="",d=!1,v=!1,m=!1;n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(z,"")),t=t.replace(B,""),o=h(t);while(l<=o.length){switch(a=o[l],c){case ae:if(!a||!T.test(a)){if(n)return A;c=ue;continue}p+=a.toLowerCase(),c=se;break;case se:if(a&&(M.test(a)||"+"==a||"-"==a||"."==a))p+=a.toLowerCase();else{if(":"!=a){if(n)return A;p="",c=ue,l=0;continue}if(n&&(Q(e)!=f($,p)||"file"==p&&(J(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=p,n)return void(Q(e)&&$[e.scheme]==e.port&&(e.port=null));p="","file"==e.scheme?c=be:Q(e)&&i&&i.scheme==e.scheme?c=ce:Q(e)?c=he:"/"==o[l+1]?(c=le,l++):(e.cannotBeABaseURL=!0,e.path.push(""),c=Ee)}break;case ue:if(!i||i.cannotBeABaseURL&&"#"!=a)return A;if(i.cannotBeABaseURL&&"#"==a){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,c=je;break}c="file"==i.scheme?be:fe;continue;case ce:if("/"!=a||"/"!=o[l+1]){c=fe;continue}c=de,l++;break;case le:if("/"==a){c=ve;break}c=Oe;continue;case fe:if(e.scheme=i.scheme,a==r)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if("/"==a||"\\"==a&&Q(e))c=pe;else if("?"==a)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",c=Se;else{if("#"!=a){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),c=Oe;continue}e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",c=je}break;case pe:if(!Q(e)||"/"!=a&&"\\"!=a){if("/"!=a){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,c=Oe;continue}c=ve}else c=de;break;case he:if(c=de,"/"!=a||"/"!=p.charAt(l+1))continue;l++;break;case de:if("/"!=a&&"\\"!=a){c=ve;continue}break;case ve:if("@"==a){d&&(p="%40"+p),d=!0,s=h(p);for(var g=0;g<s.length;g++){var y=s[g];if(":"!=y||m){var b=K(y,X);m?e.password+=b:e.username+=b}else m=!0}p=""}else if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&Q(e)){if(d&&""==p)return j;l-=h(p).length+1,p="",c=me}else p+=a;break;case me:case ge:if(n&&"file"==e.scheme){c=xe;continue}if(":"!=a||v){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&Q(e)){if(Q(e)&&""==p)return k;if(n&&""==p&&(J(e)||null!==e.port))return;if(u=U(e,p),u)return u;if(p="",c=we,n)return;continue}"["==a?v=!0:"]"==a&&(v=!1),p+=a}else{if(""==p)return k;if(u=U(e,p),u)return u;if(p="",c=ye,n==ge)return}break;case ye:if(!P.test(a)){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&Q(e)||n){if(""!=p){var _=parseInt(p,10);if(_>65535)return C;e.port=Q(e)&&_===$[e.scheme]?null:_,p=""}if(n)return;c=we;continue}return C}p+=a;break;case be:if(e.scheme="file","/"==a||"\\"==a)c=_e;else{if(!i||"file"!=i.scheme){c=Oe;continue}if(a==r)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if("?"==a)e.host=i.host,e.path=i.path.slice(),e.query="",c=Se;else{if("#"!=a){ne(o.slice(l).join(""))||(e.host=i.host,e.path=i.path.slice(),re(e)),c=Oe;continue}e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",c=je}}break;case _e:if("/"==a||"\\"==a){c=xe;break}i&&"file"==i.scheme&&!ne(o.slice(l).join(""))&&(te(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),c=Oe;continue;case xe:if(a==r||"/"==a||"\\"==a||"?"==a||"#"==a){if(!n&&te(p))c=Oe;else if(""==p){if(e.host="",n)return;c=we}else{if(u=U(e,p),u)return u;if("localhost"==e.host&&(e.host=""),n)return;p="",c=we}continue}p+=a;break;case we:if(Q(e)){if(c=Oe,"/"!=a&&"\\"!=a)continue}else if(n||"?"!=a)if(n||"#"!=a){if(a!=r&&(c=Oe,"/"!=a))continue}else e.fragment="",c=je;else e.query="",c=Se;break;case Oe:if(a==r||"/"==a||"\\"==a&&Q(e)||!n&&("?"==a||"#"==a)){if(oe(p)?(re(e),"/"==a||"\\"==a&&Q(e)||e.path.push("")):ie(p)?"/"==a||"\\"==a&&Q(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&te(p)&&(e.host&&(e.host=""),p=p.charAt(0)+":"),e.path.push(p)),p="","file"==e.scheme&&(a==r||"?"==a||"#"==a))while(e.path.length>1&&""===e.path[0])e.path.shift();"?"==a?(e.query="",c=Se):"#"==a&&(e.fragment="",c=je)}else p+=K(a,Y);break;case Ee:"?"==a?(e.query="",c=Se):"#"==a?(e.fragment="",c=je):a!=r&&(e.path[0]+=K(a,q));break;case Se:n||"#"!=a?a!=r&&("'"==a&&Q(e)?e.query+="%27":e.query+="#"==a?"%23":K(a,q)):(e.fragment="",c=je);break;case je:a!=r&&(e.fragment+=K(a,Z));break}l++}},ke=function(e){var t,n,r=l(this,ke,"URL"),i=arguments.length>1?arguments[1]:void 0,a=String(e),s=w(r,{type:"URL"});if(void 0!==i)if(i instanceof ke)t=O(i);else if(n=Ae(t={},String(i)),n)throw TypeError(n);if(n=Ae(s,a,null,t),n)throw TypeError(n);var u=s.searchParams=new _,c=x(u);c.updateSearchParams(s.query),c.updateURL=function(){s.query=String(u)||null},o||(r.href=Te.call(r),r.origin=Me.call(r),r.protocol=Pe.call(r),r.username=Ie.call(r),r.password=Re.call(r),r.host=Le.call(r),r.hostname=De.call(r),r.port=Ne.call(r),r.pathname=Fe.call(r),r.search=ze.call(r),r.searchParams=Be.call(r),r.hash=Ue.call(r))},Ce=ke.prototype,Te=function(){var e=O(this),t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,a=e.path,s=e.query,u=e.fragment,c=t+":";return null!==i?(c+="//",J(e)&&(c+=n+(r?":"+r:"")+"@"),c+=W(i),null!==o&&(c+=":"+o)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},Me=function(){var e=O(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(r){return"null"}return"file"!=t&&Q(e)?t+"://"+W(e.host)+(null!==n?":"+n:""):"null"},Pe=function(){return O(this).scheme+":"},Ie=function(){return O(this).username},Re=function(){return O(this).password},Le=function(){var e=O(this),t=e.host,n=e.port;return null===t?"":null===n?W(t):W(t)+":"+n},De=function(){var e=O(this).host;return null===e?"":W(e)},Ne=function(){var e=O(this).port;return null===e?"":String(e)},Fe=function(){var e=O(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},ze=function(){var e=O(this).query;return e?"?"+e:""},Be=function(){return O(this).searchParams},Ue=function(){var e=O(this).fragment;return e?"#"+e:""},Ve=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(o&&u(Ce,{href:Ve(Te,(function(e){var t=O(this),n=String(e),r=Ae(t,n);if(r)throw TypeError(r);x(t.searchParams).updateSearchParams(t.query)})),origin:Ve(Me),protocol:Ve(Pe,(function(e){var t=O(this);Ae(t,String(e)+":",ae)})),username:Ve(Ie,(function(e){var t=O(this),n=h(String(e));if(!ee(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=K(n[r],X)}})),password:Ve(Re,(function(e){var t=O(this),n=h(String(e));if(!ee(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=K(n[r],X)}})),host:Ve(Le,(function(e){var t=O(this);t.cannotBeABaseURL||Ae(t,String(e),me)})),hostname:Ve(De,(function(e){var t=O(this);t.cannotBeABaseURL||Ae(t,String(e),ge)})),port:Ve(Ne,(function(e){var t=O(this);ee(t)||(e=String(e),""==e?t.port=null:Ae(t,e,ye))})),pathname:Ve(Fe,(function(e){var t=O(this);t.cannotBeABaseURL||(t.path=[],Ae(t,e+"",we))})),search:Ve(ze,(function(e){var t=O(this);e=String(e),""==e?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Ae(t,e,Se)),x(t.searchParams).updateSearchParams(t.query)})),searchParams:Ve(Be),hash:Ve(Ue,(function(e){var t=O(this);e=String(e),""!=e?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Ae(t,e,je)):t.fragment=null}))}),c(Ce,"toJSON",(function(){return Te.call(this)}),{enumerable:!0}),c(Ce,"toString",(function(){return Te.call(this)}),{enumerable:!0}),b){var He=b.createObjectURL,Ge=b.revokeObjectURL;He&&c(ke,"createObjectURL",(function(e){return He.apply(b,arguments)})),Ge&&c(ke,"revokeObjectURL",(function(e){return Ge.apply(b,arguments)}))}m(ke,"URL"),i({global:!0,forced:!a,sham:!o},{URL:ke})},Kz5y:function(e,t,n){var r=n("WFqU"),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},L8xA:function(e,t){function n(e){var t=this.__data__,n=t["delete"](e);return this.size=t.size,n}e.exports=n},"LK+K":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("foSv"),i=n("2WcH"),o=n("md7G");function a(e){var t=Object(i["a"])();return function(){var n,i=Object(r["a"])(e);if(t){var a=Object(r["a"])(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Object(o["a"])(this,n)}}},LKBx:function(e,t,n){"use strict";var r=n("I+eb"),i=n("Bs8V").f,o=n("UMSQ"),a=n("WjRb"),s=n("HYAF"),u=n("qxPZ"),c=n("xDBR"),l="".startsWith,f=Math.min,p=u("startsWith"),h=!c&&!p&&!!function(){var e=i(String.prototype,"startsWith");return e&&!e.writable}();r({target:"String",proto:!0,forced:!h&&!p},{startsWith:function(e){var t=String(s(this));a(e);var n=o(f(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return l?l.call(t,r,n):t.slice(n,n+r.length)===r}})},LKzl:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingWhenOnSyntax=void 0;var r=n("406g"),i=n("z4Hk"),o=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}return e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingWhenOnSyntax=o},LPSS:function(e,t,n){var r,i,o,a=n("2oRo"),s=n("0Dky"),u=n("xrYK"),c=n("A2ZE"),l=n("G+Rx"),f=n("zBJ4"),p=n("HNyW"),h=a.location,d=a.setImmediate,v=a.clearImmediate,m=a.process,g=a.MessageChannel,y=a.Dispatch,b=0,_={},x="onreadystatechange",w=function(e){if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},O=function(e){return function(){w(e)}},E=function(e){w(e.data)},S=function(e){a.postMessage(e+"",h.protocol+"//"+h.host)};d&&v||(d=function(e){var t=[],n=1;while(arguments.length>n)t.push(arguments[n++]);return _[++b]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},r(b),b},v=function(e){delete _[e]},"process"==u(m)?r=function(e){m.nextTick(O(e))}:y&&y.now?r=function(e){y.now(O(e))}:g&&!p?(i=new g,o=i.port2,i.port1.onmessage=E,r=c(o.postMessage,o,1)):!a.addEventListener||"function"!=typeof postMessage||a.importScripts||s(S)||"file:"===h.protocol?r=x in f("script")?function(e){l.appendChild(f("script"))[x]=function(){l.removeChild(this),w(e)}}:function(e){setTimeout(O(e),0)}:(r=S,a.addEventListener("message",E,!1))),e.exports={set:d,clear:v}},LQDL:function(e,t,n){var r,i,o=n("2oRo"),a=n("NC/Y"),s=o.process,u=s&&s.versions,c=u&&u.v8;c?(r=c.split("."),i=r[0]+r[1]):a&&(r=a.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/),r&&(i=r[1]))),e.exports=i&&+i},LXxW:function(e,t){function n(e,t){var n=-1,r=null==e?0:e.length,i=0,o=[];while(++n<r){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}e.exports=n},LcsW:function(e,t,n){var r=n("kekF"),i=r(Object.getPrototypeOf,Object);e.exports=i},LgvC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Binding=void 0;var r=n("FV85"),i=n("d9O0"),o=function(){function e(e,t){this.id=i.id(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=r.BindingTypeEnum.Invalid,this.constraint=function(e){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=t.scope===r.BindingScopeEnum.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},e}();t.Binding=o},LpSC:function(e,t,n){n("bZMm"),e.exports=self.fetch.bind(self)},LsHQ:function(e,t,n){var r=n("EA7m"),i=n("mv/X");function o(e){return r((function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;a=e.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),t=Object(t);while(++r<o){var u=n[r];u&&e(t,u,r,a)}return t}))}e.exports=o},LtsZ:function(e,t,n){"use strict";n.r(t),n.d(t,"ApplyPluginsType",(function(){return B})),n.d(t,"Plugin",(function(){return G})),n.d(t,"dynamic",(function(){return F})),n.d(t,"isBrowser",(function(){return U}));var r=n("qLMh"),i=n("YS25");n.d(t,"createBrowserHistory",(function(){return i["a"]})),n.d(t,"createHashHistory",(function(){return i["b"]})),n.d(t,"createMemoryHistory",(function(){return i["d"]}));var o=n("Ty5D");n.d(t,"__RouterContext",(function(){return o["h"]}));var a=n("55Ip");n.d(t,"Link",(function(){return a["a"]})),n.d(t,"MemoryRouter",(function(){return o["a"]})),n.d(t,"NavLink",(function(){return a["b"]})),n.d(t,"Prompt",(function(){return o["b"]})),n.d(t,"Redirect",(function(){return o["c"]})),n.d(t,"Route",(function(){return o["d"]})),n.d(t,"Router",(function(){return o["e"]})),n.d(t,"StaticRouter",(function(){return o["f"]})),n.d(t,"Switch",(function(){return o["g"]})),n.d(t,"matchPath",(function(){return o["i"]})),n.d(t,"useHistory",(function(){return o["j"]})),n.d(t,"useLocation",(function(){return o["k"]})),n.d(t,"useParams",(function(){return o["l"]})),n.d(t,"useRouteMatch",(function(){return o["m"]})),n.d(t,"withRouter",(function(){return o["n"]}));var s=n("q1tI"),u=n("8L3h");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){return f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){p(o,r,i,a,s,"next",e)}function s(e){p(o,r,i,a,s,"throw",e)}a(void 0)}))}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){return b(e)||_(e)||x(e)||O()}function b(e){if(Array.isArray(e))return e}function _(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function x(e,t){if(e){if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=x(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}var S=Object(s["createContext"])(null),j=[],A=[],k=!1;function C(e){var t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then((function(e){return n.loading=!1,n.loaded=e,e}))["catch"]((function(e){throw n.loading=!1,n.error=e,e})),n}function T(e){var t={loading:!1,loaded:{},error:null},n=[];try{Object.keys(e).forEach((function(r){var i=C(e[r]);i.loading?t.loading=!0:(t.loaded[r]=i.loaded,t.error=i.error),n.push(i.promise),i.promise.then((function(e){t.loaded[r]=e}))["catch"]((function(e){t.error=e}))}))}catch(r){t.error=r}return t.promise=Promise.all(n).then((function(e){return t.loading=!1,e}))["catch"]((function(e){throw t.loading=!1,e})),t}function M(e){return e&&e.__esModule?e["default"]:e}function P(e,t){return Object(s["createElement"])(M(e),t)}function I(e,t){var n=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:P,webpack:null,modules:null},t),r=null;function i(){if(!r){var t=new R(e,n);r={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return r.promise()}if("undefined"===typeof window&&j.push(i),!k&&"undefined"!==typeof window&&"function"===typeof n.webpack){var o=n.webpack();A.push((function(e){var t,n=E(o);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(-1!==e.indexOf(r))return i()}}catch(a){n.e(a)}finally{n.f()}}))}var a=function(e,t){i();var o=Object(s["useContext"])(S),a=Object(u["useSubscription"])(r);return Object(s["useImperativeHandle"])(t,(function(){return{retry:r.retry}})),o&&Array.isArray(n.modules)&&n.modules.forEach((function(e){o(e)})),a.loading||a.error?Object(s["createElement"])(n.loading,{isLoading:a.loading,pastDelay:a.pastDelay,timedOut:a.timedOut,error:a.error,retry:r.retry}):a.loaded?n.render(a.loaded,e):null},c=Object(s["forwardRef"])(a);return c.preload=function(){return i()},c.displayName="LoadableComponent",c}var R=function(){function e(t,n){d(this,e),this._loadFn=t,this._opts=n,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}return m(e,[{key:"promise",value:function(){return this._res.promise}},{key:"retry",value:function(){var e=this;this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};var t=this._res,n=this._opts;t.loading&&("number"===typeof n.delay&&(0===n.delay?this._state.pastDelay=!0:this._delay=setTimeout((function(){e._update({pastDelay:!0})}),n.delay)),"number"===typeof n.timeout&&(this._timeout=setTimeout((function(){e._update({timedOut:!0})}),n.timeout))),this._res.promise.then((function(){e._update(),e._clearTimeouts()}))["catch"]((function(t){e._update(),e._clearTimeouts()})),this._update({})}},{key:"_update",value:function(e){this._state=l(l({},this._state),e),this._callbacks.forEach((function(e){return e()}))}},{key:"_clearTimeouts",value:function(){clearTimeout(this._delay),clearTimeout(this._timeout)}},{key:"getCurrentValue",value:function(){return l(l({},this._state),{},{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading})}},{key:"subscribe",value:function(e){var t=this;return this._callbacks.add(e),function(){t._callbacks["delete"](e)}}}]),e}();function L(e){return I(C,e)}function D(e){if("function"!==typeof e.render)throw new Error("LoadableMap requires a `render(loaded, props)` function");return I(T,e)}function N(e,t){var n=[];while(e.length){var r=e.pop();n.push(r(t))}return Promise.all(n).then((function(){if(e.length)return N(e,t)}))}function F(e){var t=L,n={loading:function(e){e.error,e.isLoading;return Object(s["createElement"])("p",null,"loading...")}};if("function"===typeof e)n.loader=e;else{if("object"!==f(e))throw new Error("Unexpect arguments ".concat(e));n=l(l({},n),e)}return t(n)}function z(e,t){if(!e)throw new Error(t)}L.Map=D,L.preloadAll=function(){return new Promise((function(e,t){N(j).then(e,t)}))},L.preloadReady=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(t){var n=function(){return k=!0,t()};N(A,e).then(n,n)}))},"undefined"!==typeof window&&(window.__NEXT_PRELOADREADY=L.preloadReady);var B,U=function(){return"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement};function V(e){var t=e.fns,n=e.args;if(1===t.length)return t[0];var r=t.pop();return t.reduce((function(e,t){return function(){return t(e,n)}}),r)}function H(e){return!!e&&"object"===f(e)&&"function"===typeof e.then}(function(e){e["compose"]="compose",e["modify"]="modify",e["event"]="event"})(B||(B={}));var G=function(){function e(t){d(this,e),this.validKeys=void 0,this.hooks={},this.validKeys=(null===t||void 0===t?void 0:t.validKeys)||[]}return m(e,[{key:"register",value:function(e){var t=this;z(!!e.apply,"register failed, plugin.apply must supplied"),z(!!e.path,"register failed, plugin.path must supplied"),Object.keys(e.apply).forEach((function(n){z(t.validKeys.indexOf(n)>-1,"register failed, invalid key ".concat(n," from plugin ").concat(e.path,".")),t.hooks[n]||(t.hooks[n]=[]),t.hooks[n]=t.hooks[n].concat(e.apply[n])}))}},{key:"getHooks",value:function(e){var t=e.split("."),n=y(t),r=n[0],i=n.slice(1),o=this.hooks[r]||[];return i.length&&(o=o.map((function(e){try{var t,n=e,r=E(i);try{for(r.s();!(t=r.n()).done;){var o=t.value;n=n[o]}}catch(a){r.e(a)}finally{r.f()}return n}catch(s){return null}})).filter(Boolean)),o}},{key:"applyPlugins",value:function(e){var t=e.key,n=e.type,i=e.initialValue,o=e.args,a=e.async,s=this.getHooks(t)||[];switch(o&&z("object"===f(o),"applyPlugins failed, args must be plain object."),n){case B.modify:return a?s.reduce(function(){var e=h(Object(r["a"])().mark((function e(n,i){var a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(z("function"===typeof i||"object"===f(i)||H(i),"applyPlugins failed, all hooks for key ".concat(t," must be function, plain object or Promise.")),!H(n)){e.next=5;break}return e.next=4,n;case 4:n=e.sent;case 5:if("function"!==typeof i){e.next=16;break}if(a=i(n,o),!H(a)){e.next=13;break}return e.next=10,a;case 10:return e.abrupt("return",e.sent);case 13:return e.abrupt("return",a);case 14:e.next=21;break;case 16:if(!H(i)){e.next=20;break}return e.next=19,i;case 19:i=e.sent;case 20:return e.abrupt("return",l(l({},n),i));case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),H(i)?i:Promise.resolve(i)):s.reduce((function(e,n){return z("function"===typeof n||"object"===f(n),"applyPlugins failed, all hooks for key ".concat(t," must be function or plain object.")),"function"===typeof n?n(e,o):l(l({},e),n)}),i);case B.event:return s.forEach((function(e){z("function"===typeof e,"applyPlugins failed, all hooks for key ".concat(t," must be function.")),e(o)}));case B.compose:return function(){return V({fns:s.concat(i),args:o})()}}}}]),e}()},LuSS:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("FER5"),i=n("iNWh"),o=n("b3aT");function a(e){var t={r:0,g:0,b:0},n=1,i=null,a=null,s=null,u=!1,c=!1;return"string"===typeof e&&(e=h(e)),"object"===typeof e&&(d(e.r)&&d(e.g)&&d(e.b)?(t=Object(r["i"])(e.r,e.g,e.b),u=!0,c="%"===String(e.r).substr(-1)?"prgb":"rgb"):d(e.h)&&d(e.s)&&d(e.v)?(i=Object(o["d"])(e.s),a=Object(o["d"])(e.v),t=Object(r["c"])(e.h,i,a),u=!0,c="hsv"):d(e.h)&&d(e.s)&&d(e.l)&&(i=Object(o["d"])(e.s),s=Object(o["d"])(e.l),t=Object(r["b"])(e.h,i,s),u=!0,c="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=Object(o["b"])(n),{ok:u,format:e.format||c,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var s="[-\\+]?\\d+%?",u="[-\\+]?\\d*\\.\\d+%?",c="(?:".concat(u,")|(?:").concat(s,")"),l="[\\s|\\(]+(".concat(c,")[,|\\s]+(").concat(c,")[,|\\s]+(").concat(c,")\\s*\\)?"),f="[\\s|\\(]+(".concat(c,")[,|\\s]+(").concat(c,")[,|\\s]+(").concat(c,")[,|\\s]+(").concat(c,")\\s*\\)?"),p={CSS_UNIT:new RegExp(c),rgb:new RegExp("rgb"+l),rgba:new RegExp("rgba"+f),hsl:new RegExp("hsl"+l),hsla:new RegExp("hsla"+f),hsv:new RegExp("hsv"+l),hsva:new RegExp("hsva"+f),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function h(e){if(e=e.trim().toLowerCase(),0===e.length)return!1;var t=!1;if(i["a"][e])e=i["a"][e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=p.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=p.rgba.exec(e),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=p.hsl.exec(e),n?{h:n[1],s:n[2],l:n[3]}:(n=p.hsla.exec(e),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=p.hsv.exec(e),n?{h:n[1],s:n[2],v:n[3]}:(n=p.hsva.exec(e),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=p.hex8.exec(e),n?{r:Object(r["e"])(n[1]),g:Object(r["e"])(n[2]),b:Object(r["e"])(n[3]),a:Object(r["a"])(n[4]),format:t?"name":"hex8"}:(n=p.hex6.exec(e),n?{r:Object(r["e"])(n[1]),g:Object(r["e"])(n[2]),b:Object(r["e"])(n[3]),format:t?"name":"hex"}:(n=p.hex4.exec(e),n?{r:Object(r["e"])(n[1]+n[1]),g:Object(r["e"])(n[2]+n[2]),b:Object(r["e"])(n[3]+n[3]),a:Object(r["a"])(n[4]+n[4]),format:t?"name":"hex8"}:(n=p.hex3.exec(e),!!n&&{r:Object(r["e"])(n[1]+n[1]),g:Object(r["e"])(n[2]+n[2]),b:Object(r["e"])(n[3]+n[3]),format:t?"name":"hex"})))))))))}function d(e){return Boolean(p.CSS_UNIT.exec(String(e)))}},LvDl:function(e,t,n){(function(e,r){var i;(function(){var o,a="4.17.21",s=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",l="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",p=500,h="__lodash_placeholder__",d=1,v=2,m=4,g=1,y=2,b=1,_=2,x=4,w=8,O=16,E=32,S=64,j=128,A=256,k=512,C=30,T="...",M=800,P=16,I=1,R=2,L=3,D=1/0,N=9007199254740991,F=17976931348623157e292,z=NaN,B=4294967295,U=B-1,V=B>>>1,H=[["ary",j],["bind",b],["bindKey",_],["curry",w],["curryRight",O],["flip",k],["partial",E],["partialRight",S],["rearg",A]],G="[object Arguments]",W="[object Array]",q="[object AsyncFunction]",Z="[object Boolean]",Y="[object Date]",X="[object DOMException]",K="[object Error]",$="[object Function]",Q="[object GeneratorFunction]",J="[object Map]",ee="[object Number]",te="[object Null]",ne="[object Object]",re="[object Promise]",ie="[object Proxy]",oe="[object RegExp]",ae="[object Set]",se="[object String]",ue="[object Symbol]",ce="[object Undefined]",le="[object WeakMap]",fe="[object WeakSet]",pe="[object ArrayBuffer]",he="[object DataView]",de="[object Float32Array]",ve="[object Float64Array]",me="[object Int8Array]",ge="[object Int16Array]",ye="[object Int32Array]",be="[object Uint8Array]",_e="[object Uint8ClampedArray]",xe="[object Uint16Array]",we="[object Uint32Array]",Oe=/\b__p \+= '';/g,Ee=/\b(__p \+=) '' \+/g,Se=/(__e\(.*?\)|\b__t\)) \+\n'';/g,je=/&(?:amp|lt|gt|quot|#39);/g,Ae=/[&<>"']/g,ke=RegExp(je.source),Ce=RegExp(Ae.source),Te=/<%-([\s\S]+?)%>/g,Me=/<%([\s\S]+?)%>/g,Pe=/<%=([\s\S]+?)%>/g,Ie=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Re=/^\w*$/,Le=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,De=/[\\^$.*+?()[\]{}|]/g,Ne=RegExp(De.source),Fe=/^\s+/,ze=/\s/,Be=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ue=/\{\n\/\* \[wrapped with (.+)\] \*/,Ve=/,? & /,He=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ge=/[()=,{}\[\]\/\s]/,We=/\\(\\)?/g,qe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ze=/\w*$/,Ye=/^[-+]0x[0-9a-f]+$/i,Xe=/^0b[01]+$/i,Ke=/^\[object .+?Constructor\]$/,$e=/^0o[0-7]+$/i,Qe=/^(?:0|[1-9]\d*)$/,Je=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,et=/($^)/,tt=/['\n\r\u2028\u2029\\]/g,nt="\\ud800-\\udfff",rt="\\u0300-\\u036f",it="\\ufe20-\\ufe2f",ot="\\u20d0-\\u20ff",at=rt+it+ot,st="\\u2700-\\u27bf",ut="a-z\\xdf-\\xf6\\xf8-\\xff",ct="\\xac\\xb1\\xd7\\xf7",lt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ft="\\u2000-\\u206f",pt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ht="A-Z\\xc0-\\xd6\\xd8-\\xde",dt="\\ufe0e\\ufe0f",vt=ct+lt+ft+pt,mt="['\u2019]",gt="["+nt+"]",yt="["+vt+"]",bt="["+at+"]",_t="\\d+",xt="["+st+"]",wt="["+ut+"]",Ot="[^"+nt+vt+_t+st+ut+ht+"]",Et="\\ud83c[\\udffb-\\udfff]",St="(?:"+bt+"|"+Et+")",jt="[^"+nt+"]",At="(?:\\ud83c[\\udde6-\\uddff]){2}",kt="[\\ud800-\\udbff][\\udc00-\\udfff]",Ct="["+ht+"]",Tt="\\u200d",Mt="(?:"+wt+"|"+Ot+")",Pt="(?:"+Ct+"|"+Ot+")",It="(?:"+mt+"(?:d|ll|m|re|s|t|ve))?",Rt="(?:"+mt+"(?:D|LL|M|RE|S|T|VE))?",Lt=St+"?",Dt="["+dt+"]?",Nt="(?:"+Tt+"(?:"+[jt,At,kt].join("|")+")"+Dt+Lt+")*",Ft="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",zt="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Bt=Dt+Lt+Nt,Ut="(?:"+[xt,At,kt].join("|")+")"+Bt,Vt="(?:"+[jt+bt+"?",bt,At,kt,gt].join("|")+")",Ht=RegExp(mt,"g"),Gt=RegExp(bt,"g"),Wt=RegExp(Et+"(?="+Et+")|"+Vt+Bt,"g"),qt=RegExp([Ct+"?"+wt+"+"+It+"(?="+[yt,Ct,"$"].join("|")+")",Pt+"+"+Rt+"(?="+[yt,Ct+Mt,"$"].join("|")+")",Ct+"?"+Mt+"+"+It,Ct+"+"+Rt,zt,Ft,_t,Ut].join("|"),"g"),Zt=RegExp("["+Tt+nt+at+dt+"]"),Yt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Kt=-1,$t={};$t[de]=$t[ve]=$t[me]=$t[ge]=$t[ye]=$t[be]=$t[_e]=$t[xe]=$t[we]=!0,$t[G]=$t[W]=$t[pe]=$t[Z]=$t[he]=$t[Y]=$t[K]=$t[$]=$t[J]=$t[ee]=$t[ne]=$t[oe]=$t[ae]=$t[se]=$t[le]=!1;var Qt={};Qt[G]=Qt[W]=Qt[pe]=Qt[he]=Qt[Z]=Qt[Y]=Qt[de]=Qt[ve]=Qt[me]=Qt[ge]=Qt[ye]=Qt[J]=Qt[ee]=Qt[ne]=Qt[oe]=Qt[ae]=Qt[se]=Qt[ue]=Qt[be]=Qt[_e]=Qt[xe]=Qt[we]=!0,Qt[K]=Qt[$]=Qt[le]=!1;var Jt={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"},en={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},nn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rn=parseFloat,on=parseInt,an="object"==typeof e&&e&&e.Object===Object&&e,sn="object"==typeof self&&self&&self.Object===Object&&self,un=an||sn||Function("return this")(),cn=t&&!t.nodeType&&t,ln=cn&&"object"==typeof r&&r&&!r.nodeType&&r,fn=ln&&ln.exports===cn,pn=fn&&an.process,hn=function(){try{var e=ln&&ln.require&&ln.require("util").types;return e||pn&&pn.binding&&pn.binding("util")}catch(t){}}(),dn=hn&&hn.isArrayBuffer,vn=hn&&hn.isDate,mn=hn&&hn.isMap,gn=hn&&hn.isRegExp,yn=hn&&hn.isSet,bn=hn&&hn.isTypedArray;function _n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function xn(e,t,n,r){var i=-1,o=null==e?0:e.length;while(++i<o){var a=e[i];t(r,a,n(a),e)}return r}function wn(e,t){var n=-1,r=null==e?0:e.length;while(++n<r)if(!1===t(e[n],n,e))break;return e}function On(e,t){var n=null==e?0:e.length;while(n--)if(!1===t(e[n],n,e))break;return e}function En(e,t){var n=-1,r=null==e?0:e.length;while(++n<r)if(!t(e[n],n,e))return!1;return!0}function Sn(e,t){var n=-1,r=null==e?0:e.length,i=0,o=[];while(++n<r){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function jn(e,t){var n=null==e?0:e.length;return!!n&&Fn(e,t,0)>-1}function An(e,t,n){var r=-1,i=null==e?0:e.length;while(++r<i)if(n(t,e[r]))return!0;return!1}function kn(e,t){var n=-1,r=null==e?0:e.length,i=Array(r);while(++n<r)i[n]=t(e[n],n,e);return i}function Cn(e,t){var n=-1,r=t.length,i=e.length;while(++n<r)e[i+n]=t[n];return e}function Tn(e,t,n,r){var i=-1,o=null==e?0:e.length;r&&o&&(n=e[++i]);while(++i<o)n=t(n,e[i],i,e);return n}function Mn(e,t,n,r){var i=null==e?0:e.length;r&&i&&(n=e[--i]);while(i--)n=t(n,e[i],i,e);return n}function Pn(e,t){var n=-1,r=null==e?0:e.length;while(++n<r)if(t(e[n],n,e))return!0;return!1}var In=Vn("length");function Rn(e){return e.split("")}function Ln(e){return e.match(He)||[]}function Dn(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Nn(e,t,n,r){var i=e.length,o=n+(r?1:-1);while(r?o--:++o<i)if(t(e[o],o,e))return o;return-1}function Fn(e,t,n){return t===t?dr(e,t,n):Nn(e,Bn,n)}function zn(e,t,n,r){var i=n-1,o=e.length;while(++i<o)if(r(e[i],t))return i;return-1}function Bn(e){return e!==e}function Un(e,t){var n=null==e?0:e.length;return n?qn(e,t)/n:z}function Vn(e){return function(t){return null==t?o:t[e]}}function Hn(e){return function(t){return null==e?o:e[t]}}function Gn(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Wn(e,t){var n=e.length;e.sort(t);while(n--)e[n]=e[n].value;return e}function qn(e,t){var n,r=-1,i=e.length;while(++r<i){var a=t(e[r]);a!==o&&(n=n===o?a:n+a)}return n}function Zn(e,t){var n=-1,r=Array(e);while(++n<e)r[n]=t(n);return r}function Yn(e,t){return kn(t,(function(t){return[t,e[t]]}))}function Xn(e){return e?e.slice(0,yr(e)+1).replace(Fe,""):e}function Kn(e){return function(t){return e(t)}}function $n(e,t){return kn(t,(function(t){return e[t]}))}function Qn(e,t){return e.has(t)}function Jn(e,t){var n=-1,r=e.length;while(++n<r&&Fn(t,e[n],0)>-1);return n}function er(e,t){var n=e.length;while(n--&&Fn(t,e[n],0)>-1);return n}function tr(e,t){var n=e.length,r=0;while(n--)e[n]===t&&++r;return r}var nr=Hn(Jt),rr=Hn(en);function ir(e){return"\\"+nn[e]}function or(e,t){return null==e?o:e[t]}function ar(e){return Zt.test(e)}function sr(e){return Yt.test(e)}function ur(e){var t,n=[];while(!(t=e.next()).done)n.push(t.value);return n}function cr(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function lr(e,t){return function(n){return e(t(n))}}function fr(e,t){var n=-1,r=e.length,i=0,o=[];while(++n<r){var a=e[n];a!==t&&a!==h||(e[n]=h,o[i++]=n)}return o}function pr(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function hr(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function dr(e,t,n){var r=n-1,i=e.length;while(++r<i)if(e[r]===t)return r;return-1}function vr(e,t,n){var r=n+1;while(r--)if(e[r]===t)return r;return r}function mr(e){return ar(e)?_r(e):In(e)}function gr(e){return ar(e)?xr(e):Rn(e)}function yr(e){var t=e.length;while(t--&&ze.test(e.charAt(t)));return t}var br=Hn(tn);function _r(e){var t=Wt.lastIndex=0;while(Wt.test(e))++t;return t}function xr(e){return e.match(Wt)||[]}function wr(e){return e.match(qt)||[]}var Or=function e(t){t=null==t?un:Er.defaults(un.Object(),t,Er.pick(un,Xt));var n=t.Array,r=t.Date,i=t.Error,ze=t.Function,He=t.Math,nt=t.Object,rt=t.RegExp,it=t.String,ot=t.TypeError,at=n.prototype,st=ze.prototype,ut=nt.prototype,ct=t["__core-js_shared__"],lt=st.toString,ft=ut.hasOwnProperty,pt=0,ht=function(){var e=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),dt=ut.toString,vt=lt.call(nt),mt=un._,gt=rt("^"+lt.call(ft).replace(De,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yt=fn?t.Buffer:o,bt=t.Symbol,_t=t.Uint8Array,xt=yt?yt.allocUnsafe:o,wt=lr(nt.getPrototypeOf,nt),Ot=nt.create,Et=ut.propertyIsEnumerable,St=at.splice,jt=bt?bt.isConcatSpreadable:o,At=bt?bt.iterator:o,kt=bt?bt.toStringTag:o,Ct=function(){try{var e=Za(nt,"defineProperty");return e({},"",{}),e}catch(t){}}(),Tt=t.clearTimeout!==un.clearTimeout&&t.clearTimeout,Mt=r&&r.now!==un.Date.now&&r.now,Pt=t.setTimeout!==un.setTimeout&&t.setTimeout,It=He.ceil,Rt=He.floor,Lt=nt.getOwnPropertySymbols,Dt=yt?yt.isBuffer:o,Nt=t.isFinite,Ft=at.join,zt=lr(nt.keys,nt),Bt=He.max,Ut=He.min,Vt=r.now,Wt=t.parseInt,qt=He.random,Zt=at.reverse,Yt=Za(t,"DataView"),Jt=Za(t,"Map"),en=Za(t,"Promise"),tn=Za(t,"Set"),nn=Za(t,"WeakMap"),an=Za(nt,"create"),sn=nn&&new nn,cn={},ln=Ps(Yt),pn=Ps(Jt),hn=Ps(en),In=Ps(tn),Rn=Ps(nn),Hn=bt?bt.prototype:o,dr=Hn?Hn.valueOf:o,_r=Hn?Hn.toString:o;function xr(e){if(Sl(e)&&!ul(e)&&!(e instanceof Ar)){if(e instanceof jr)return e;if(ft.call(e,"__wrapped__"))return Rs(e)}return new jr(e)}var Or=function(){function e(){}return function(t){if(!El(t))return{};if(Ot)return Ot(t);e.prototype=t;var n=new e;return e.prototype=o,n}}();function Sr(){}function jr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=o}function Ar(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function kr(){var e=new Ar(this.__wrapped__);return e.__actions__=ia(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ia(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ia(this.__views__),e}function Cr(){if(this.__filtered__){var e=new Ar(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Tr(){var e=this.__wrapped__.value(),t=this.__dir__,n=ul(e),r=t<0,i=n?e.length:0,o=Qa(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,f=l.length,p=0,h=Ut(u,this.__takeCount__);if(!n||!r&&i==u&&h==u)return zo(e,this.__actions__);var d=[];e:while(u--&&p<h){c+=t;var v=-1,m=e[c];while(++v<f){var g=l[v],y=g.iteratee,b=g.type,_=y(m);if(b==R)m=_;else if(!_){if(b==I)continue e;break e}}d[p++]=m}return d}function Mr(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function Pr(){this.__data__=an?an(null):{},this.size=0}function Ir(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Rr(e){var t=this.__data__;if(an){var n=t[e];return n===f?o:n}return ft.call(t,e)?t[e]:o}function Lr(e){var t=this.__data__;return an?t[e]!==o:ft.call(t,e)}function Dr(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=an&&t===o?f:t,this}function Nr(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function Fr(){this.__data__=[],this.size=0}function zr(e){var t=this.__data__,n=li(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():St.call(t,n,1),--this.size,!0}function Br(e){var t=this.__data__,n=li(t,e);return n<0?o:t[n][1]}function Ur(e){return li(this.__data__,e)>-1}function Vr(e,t){var n=this.__data__,r=li(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function Hr(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function Gr(){this.size=0,this.__data__={hash:new Mr,map:new(Jt||Nr),string:new Mr}}function Wr(e){var t=Wa(this,e)["delete"](e);return this.size-=t?1:0,t}function qr(e){return Wa(this,e).get(e)}function Zr(e){return Wa(this,e).has(e)}function Yr(e,t){var n=Wa(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function Xr(e){var t=-1,n=null==e?0:e.length;this.__data__=new Hr;while(++t<n)this.add(e[t])}function Kr(e){return this.__data__.set(e,f),this}function $r(e){return this.__data__.has(e)}function Qr(e){var t=this.__data__=new Nr(e);this.size=t.size}function Jr(){this.__data__=new Nr,this.size=0}function ei(e){var t=this.__data__,n=t["delete"](e);return this.size=t.size,n}function ti(e){return this.__data__.get(e)}function ni(e){return this.__data__.has(e)}function ri(e,t){var n=this.__data__;if(n instanceof Nr){var r=n.__data__;if(!Jt||r.length<s-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Hr(r)}return n.set(e,t),this.size=n.size,this}function ii(e,t){var n=ul(e),r=!n&&sl(e),i=!n&&!r&&hl(e),o=!n&&!r&&!i&&Bl(e),a=n||r||i||o,s=a?Zn(e.length,it):[],u=s.length;for(var c in e)!t&&!ft.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||as(c,u))||s.push(c);return s}function oi(e){var t=e.length;return t?e[yo(0,t-1)]:o}function ai(e,t){return Cs(ia(e),mi(t,0,e.length))}function si(e){return Cs(ia(e))}function ui(e,t,n){(n!==o&&!il(e[t],n)||n===o&&!(t in e))&&di(e,t,n)}function ci(e,t,n){var r=e[t];ft.call(e,t)&&il(r,n)&&(n!==o||t in e)||di(e,t,n)}function li(e,t){var n=e.length;while(n--)if(il(e[n][0],t))return n;return-1}function fi(e,t,n,r){return wi(e,(function(e,i,o){t(r,e,n(e),o)})),r}function pi(e,t){return e&&oa(t,Of(t),e)}function hi(e,t){return e&&oa(t,Ef(t),e)}function di(e,t,n){"__proto__"==t&&Ct?Ct(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function vi(e,t){var r=-1,i=t.length,a=n(i),s=null==e;while(++r<i)a[r]=s?o:gf(e,t[r]);return a}function mi(e,t,n){return e===e&&(n!==o&&(e=e<=n?e:n),t!==o&&(e=e>=t?e:t)),e}function gi(e,t,n,r,i,a){var s,u=t&d,c=t&v,l=t&m;if(n&&(s=i?n(e,r,i,a):n(e)),s!==o)return s;if(!El(e))return e;var f=ul(e);if(f){if(s=ts(e),!u)return ia(e,s)}else{var p=$a(e),h=p==$||p==Q;if(hl(e))return Yo(e,u);if(p==ne||p==G||h&&!i){if(s=c||h?{}:ns(e),!u)return c?sa(e,hi(s,e)):aa(e,pi(s,e))}else{if(!Qt[p])return i?e:{};s=rs(e,p,u)}}a||(a=new Qr);var g=a.get(e);if(g)return g;a.set(e,s),Nl(e)?e.forEach((function(r){s.add(gi(r,t,n,r,e,a))})):jl(e)&&e.forEach((function(r,i){s.set(i,gi(r,t,n,i,e,a))}));var y=l?c?Ba:za:c?Ef:Of,b=f?o:y(e);return wn(b||e,(function(r,i){b&&(i=r,r=e[i]),ci(s,i,gi(r,t,n,i,e,a))})),s}function yi(e){var t=Of(e);return function(n){return bi(n,e,t)}}function bi(e,t,n){var r=n.length;if(null==e)return!r;e=nt(e);while(r--){var i=n[r],a=t[i],s=e[i];if(s===o&&!(i in e)||!a(s))return!1}return!0}function _i(e,t,n){if("function"!=typeof e)throw new ot(c);return Ss((function(){e.apply(o,n)}),t)}function xi(e,t,n,r){var i=-1,o=jn,a=!0,u=e.length,c=[],l=t.length;if(!u)return c;n&&(t=kn(t,Kn(n))),r?(o=An,a=!1):t.length>=s&&(o=Qn,a=!1,t=new Xr(t));e:while(++i<u){var f=e[i],p=null==n?f:n(f);if(f=r||0!==f?f:0,a&&p===p){var h=l;while(h--)if(t[h]===p)continue e;c.push(f)}else o(t,p,r)||c.push(f)}return c}xr.templateSettings={escape:Te,evaluate:Me,interpolate:Pe,variable:"",imports:{_:xr}},xr.prototype=Sr.prototype,xr.prototype.constructor=xr,jr.prototype=Or(Sr.prototype),jr.prototype.constructor=jr,Ar.prototype=Or(Sr.prototype),Ar.prototype.constructor=Ar,Mr.prototype.clear=Pr,Mr.prototype["delete"]=Ir,Mr.prototype.get=Rr,Mr.prototype.has=Lr,Mr.prototype.set=Dr,Nr.prototype.clear=Fr,Nr.prototype["delete"]=zr,Nr.prototype.get=Br,Nr.prototype.has=Ur,Nr.prototype.set=Vr,Hr.prototype.clear=Gr,Hr.prototype["delete"]=Wr,Hr.prototype.get=qr,Hr.prototype.has=Zr,Hr.prototype.set=Yr,Xr.prototype.add=Xr.prototype.push=Kr,Xr.prototype.has=$r,Qr.prototype.clear=Jr,Qr.prototype["delete"]=ei,Qr.prototype.get=ti,Qr.prototype.has=ni,Qr.prototype.set=ri;var wi=la(Mi),Oi=la(Pi,!0);function Ei(e,t){var n=!0;return wi(e,(function(e,r,i){return n=!!t(e,r,i),n})),n}function Si(e,t,n){var r=-1,i=e.length;while(++r<i){var a=e[r],s=t(a);if(null!=s&&(u===o?s===s&&!zl(s):n(s,u)))var u=s,c=a}return c}function ji(e,t,n,r){var i=e.length;n=Yl(n),n<0&&(n=-n>i?0:i+n),r=r===o||r>i?i:Yl(r),r<0&&(r+=i),r=n>r?0:Xl(r);while(n<r)e[n++]=t;return e}function Ai(e,t){var n=[];return wi(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function ki(e,t,n,r,i){var o=-1,a=e.length;n||(n=os),i||(i=[]);while(++o<a){var s=e[o];t>0&&n(s)?t>1?ki(s,t-1,n,r,i):Cn(i,s):r||(i[i.length]=s)}return i}var Ci=fa(),Ti=fa(!0);function Mi(e,t){return e&&Ci(e,t,Of)}function Pi(e,t){return e&&Ti(e,t,Of)}function Ii(e,t){return Sn(t,(function(t){return xl(e[t])}))}function Ri(e,t){t=Go(t,e);var n=0,r=t.length;while(null!=e&&n<r)e=e[Ms(t[n++])];return n&&n==r?e:o}function Li(e,t,n){var r=t(e);return ul(e)?r:Cn(r,n(e))}function Di(e){return null==e?e===o?ce:te:kt&&kt in nt(e)?Ya(e):bs(e)}function Ni(e,t){return e>t}function Fi(e,t){return null!=e&&ft.call(e,t)}function zi(e,t){return null!=e&&t in nt(e)}function Bi(e,t,n){return e>=Ut(t,n)&&e<Bt(t,n)}function Ui(e,t,r){var i=r?An:jn,a=e[0].length,s=e.length,u=s,c=n(s),l=1/0,f=[];while(u--){var p=e[u];u&&t&&(p=kn(p,Kn(t))),l=Ut(p.length,l),c[u]=!r&&(t||a>=120&&p.length>=120)?new Xr(u&&p):o}p=e[0];var h=-1,d=c[0];e:while(++h<a&&f.length<l){var v=p[h],m=t?t(v):v;if(v=r||0!==v?v:0,!(d?Qn(d,m):i(f,m,r))){u=s;while(--u){var g=c[u];if(!(g?Qn(g,m):i(e[u],m,r)))continue e}d&&d.push(m),f.push(v)}}return f}function Vi(e,t,n,r){return Mi(e,(function(e,i,o){t(r,n(e),i,o)})),r}function Hi(e,t,n){t=Go(t,e),e=xs(e,t);var r=null==e?e:e[Ms(ou(t))];return null==r?o:_n(r,e,n)}function Gi(e){return Sl(e)&&Di(e)==G}function Wi(e){return Sl(e)&&Di(e)==pe}function qi(e){return Sl(e)&&Di(e)==Y}function Zi(e,t,n,r,i){return e===t||(null==e||null==t||!Sl(e)&&!Sl(t)?e!==e&&t!==t:Yi(e,t,n,r,Zi,i))}function Yi(e,t,n,r,i,o){var a=ul(e),s=ul(t),u=a?W:$a(e),c=s?W:$a(t);u=u==G?ne:u,c=c==G?ne:c;var l=u==ne,f=c==ne,p=u==c;if(p&&hl(e)){if(!hl(t))return!1;a=!0,l=!1}if(p&&!l)return o||(o=new Qr),a||Bl(e)?La(e,t,n,r,i,o):Da(e,t,u,n,r,i,o);if(!(n&g)){var h=l&&ft.call(e,"__wrapped__"),d=f&&ft.call(t,"__wrapped__");if(h||d){var v=h?e.value():e,m=d?t.value():t;return o||(o=new Qr),i(v,m,n,r,o)}}return!!p&&(o||(o=new Qr),Na(e,t,n,r,i,o))}function Xi(e){return Sl(e)&&$a(e)==J}function Ki(e,t,n,r){var i=n.length,a=i,s=!r;if(null==e)return!a;e=nt(e);while(i--){var u=n[i];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}while(++i<a){u=n[i];var c=u[0],l=e[c],f=u[1];if(s&&u[2]){if(l===o&&!(c in e))return!1}else{var p=new Qr;if(r)var h=r(l,f,c,e,t,p);if(!(h===o?Zi(f,l,g|y,r,p):h))return!1}}return!0}function $i(e){if(!El(e)||fs(e))return!1;var t=xl(e)?gt:Ke;return t.test(Ps(e))}function Qi(e){return Sl(e)&&Di(e)==oe}function Ji(e){return Sl(e)&&$a(e)==ae}function eo(e){return Sl(e)&&Ol(e.length)&&!!$t[Di(e)]}function to(e){return"function"==typeof e?e:null==e?Mp:"object"==typeof e?ul(e)?so(e[0],e[1]):ao(e):Gp(e)}function no(e){if(!hs(e))return zt(e);var t=[];for(var n in nt(e))ft.call(e,n)&&"constructor"!=n&&t.push(n);return t}function ro(e){if(!El(e))return ys(e);var t=hs(e),n=[];for(var r in e)("constructor"!=r||!t&&ft.call(e,r))&&n.push(r);return n}function io(e,t){return e<t}function oo(e,t){var r=-1,i=ll(e)?n(e.length):[];return wi(e,(function(e,n,o){i[++r]=t(e,n,o)})),i}function ao(e){var t=qa(e);return 1==t.length&&t[0][2]?vs(t[0][0],t[0][1]):function(n){return n===e||Ki(n,e,t)}}function so(e,t){return us(e)&&ds(t)?vs(Ms(e),t):function(n){var r=gf(n,e);return r===o&&r===t?bf(n,e):Zi(t,r,g|y)}}function uo(e,t,n,r,i){e!==t&&Ci(t,(function(a,s){if(i||(i=new Qr),El(a))co(e,t,s,n,uo,r,i);else{var u=r?r(Os(e,s),a,s+"",e,t,i):o;u===o&&(u=a),ui(e,s,u)}}),Ef)}function co(e,t,n,r,i,a,s){var u=Os(e,n),c=Os(t,n),l=s.get(c);if(l)ui(e,n,l);else{var f=a?a(u,c,n+"",e,t,s):o,p=f===o;if(p){var h=ul(c),d=!h&&hl(c),v=!h&&!d&&Bl(c);f=c,h||d||v?ul(u)?f=u:fl(u)?f=ia(u):d?(p=!1,f=Yo(c,!0)):v?(p=!1,f=Jo(c,!0)):f=[]:Rl(c)||sl(c)?(f=u,sl(u)?f=$l(u):El(u)&&!xl(u)||(f=ns(c))):p=!1}p&&(s.set(c,f),i(f,c,r,a,s),s["delete"](c)),ui(e,n,f)}}function lo(e,t){var n=e.length;if(n)return t+=t<0?n:0,as(t,n)?e[t]:o}function fo(e,t,n){t=t.length?kn(t,(function(e){return ul(e)?function(t){return Ri(t,1===e.length?e[0]:e)}:e})):[Mp];var r=-1;t=kn(t,Kn(Ga()));var i=oo(e,(function(e,n,i){var o=kn(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return Wn(i,(function(e,t){return ta(e,t,n)}))}function po(e,t){return ho(e,t,(function(t,n){return bf(e,n)}))}function ho(e,t,n){var r=-1,i=t.length,o={};while(++r<i){var a=t[r],s=Ri(e,a);n(s,a)&&Eo(o,Go(a,e),s)}return o}function vo(e){return function(t){return Ri(t,e)}}function mo(e,t,n,r){var i=r?zn:Fn,o=-1,a=t.length,s=e;e===t&&(t=ia(t)),n&&(s=kn(e,Kn(n)));while(++o<a){var u=0,c=t[o],l=n?n(c):c;while((u=i(s,l,u,r))>-1)s!==e&&St.call(s,u,1),St.call(e,u,1)}return e}function go(e,t){var n=e?t.length:0,r=n-1;while(n--){var i=t[n];if(n==r||i!==o){var o=i;as(i)?St.call(e,i,1):Do(e,i)}}return e}function yo(e,t){return e+Rt(qt()*(t-e+1))}function bo(e,t,r,i){var o=-1,a=Bt(It((t-e)/(r||1)),0),s=n(a);while(a--)s[i?a:++o]=e,e+=r;return s}function _o(e,t){var n="";if(!e||t<1||t>N)return n;do{t%2&&(n+=e),t=Rt(t/2),t&&(e+=e)}while(t);return n}function xo(e,t){return js(_s(e,t,Mp),e+"")}function wo(e){return oi(Vf(e))}function Oo(e,t){var n=Vf(e);return Cs(n,mi(t,0,n.length))}function Eo(e,t,n,r){if(!El(e))return e;t=Go(t,e);var i=-1,a=t.length,s=a-1,u=e;while(null!=u&&++i<a){var c=Ms(t[i]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(i!=s){var f=u[c];l=r?r(f,c,u):o,l===o&&(l=El(f)?f:as(t[i+1])?[]:{})}ci(u,c,l),u=u[c]}return e}var So=sn?function(e,t){return sn.set(e,t),e}:Mp,jo=Ct?function(e,t){return Ct(e,"toString",{configurable:!0,enumerable:!1,value:Ap(t),writable:!0})}:Mp;function Ao(e){return Cs(Vf(e))}function ko(e,t,r){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;var a=n(o);while(++i<o)a[i]=e[i+t];return a}function Co(e,t){var n;return wi(e,(function(e,r,i){return n=t(e,r,i),!n})),!!n}function To(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=V){while(r<i){var o=r+i>>>1,a=e[o];null!==a&&!zl(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return Mo(e,t,Mp,n)}function Mo(e,t,n,r){var i=0,a=null==e?0:e.length;if(0===a)return 0;t=n(t);var s=t!==t,u=null===t,c=zl(t),l=t===o;while(i<a){var f=Rt((i+a)/2),p=n(e[f]),h=p!==o,d=null===p,v=p===p,m=zl(p);if(s)var g=r||v;else g=l?v&&(r||h):u?v&&h&&(r||!d):c?v&&h&&!d&&(r||!m):!d&&!m&&(r?p<=t:p<t);g?i=f+1:a=f}return Ut(a,U)}function Po(e,t){var n=-1,r=e.length,i=0,o=[];while(++n<r){var a=e[n],s=t?t(a):a;if(!n||!il(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function Io(e){return"number"==typeof e?e:zl(e)?z:+e}function Ro(e){if("string"==typeof e)return e;if(ul(e))return kn(e,Ro)+"";if(zl(e))return _r?_r.call(e):"";var t=e+"";return"0"==t&&1/e==-D?"-0":t}function Lo(e,t,n){var r=-1,i=jn,o=e.length,a=!0,u=[],c=u;if(n)a=!1,i=An;else if(o>=s){var l=t?null:Ca(e);if(l)return pr(l);a=!1,i=Qn,c=new Xr}else c=t?[]:u;e:while(++r<o){var f=e[r],p=t?t(f):f;if(f=n||0!==f?f:0,a&&p===p){var h=c.length;while(h--)if(c[h]===p)continue e;t&&c.push(p),u.push(f)}else i(c,p,n)||(c!==u&&c.push(p),u.push(f))}return u}function Do(e,t){return t=Go(t,e),e=xs(e,t),null==e||delete e[Ms(ou(t))]}function No(e,t,n,r){return Eo(e,t,n(Ri(e,t)),r)}function Fo(e,t,n,r){var i=e.length,o=r?i:-1;while((r?o--:++o<i)&&t(e[o],o,e));return n?ko(e,r?0:o,r?o+1:i):ko(e,r?o+1:0,r?i:o)}function zo(e,t){var n=e;return n instanceof Ar&&(n=n.value()),Tn(t,(function(e,t){return t.func.apply(t.thisArg,Cn([e],t.args))}),n)}function Bo(e,t,r){var i=e.length;if(i<2)return i?Lo(e[0]):[];var o=-1,a=n(i);while(++o<i){var s=e[o],u=-1;while(++u<i)u!=o&&(a[o]=xi(a[o]||s,e[u],t,r))}return Lo(ki(a,1),t,r)}function Uo(e,t,n){var r=-1,i=e.length,a=t.length,s={};while(++r<i){var u=r<a?t[r]:o;n(s,e[r],u)}return s}function Vo(e){return fl(e)?e:[]}function Ho(e){return"function"==typeof e?e:Mp}function Go(e,t){return ul(e)?e:us(e,t)?[e]:Ts(Jl(e))}var Wo=xo;function qo(e,t,n){var r=e.length;return n=n===o?r:n,!t&&n>=r?e:ko(e,t,n)}var Zo=Tt||function(e){return un.clearTimeout(e)};function Yo(e,t){if(t)return e.slice();var n=e.length,r=xt?xt(n):new e.constructor(n);return e.copy(r),r}function Xo(e){var t=new e.constructor(e.byteLength);return new _t(t).set(new _t(e)),t}function Ko(e,t){var n=t?Xo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function $o(e){var t=new e.constructor(e.source,Ze.exec(e));return t.lastIndex=e.lastIndex,t}function Qo(e){return dr?nt(dr.call(e)):{}}function Jo(e,t){var n=t?Xo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ea(e,t){if(e!==t){var n=e!==o,r=null===e,i=e===e,a=zl(e),s=t!==o,u=null===t,c=t===t,l=zl(t);if(!u&&!l&&!a&&e>t||a&&s&&c&&!u&&!l||r&&s&&c||!n&&c||!i)return 1;if(!r&&!a&&!l&&e<t||l&&n&&i&&!r&&!a||u&&n&&i||!s&&i||!c)return-1}return 0}function ta(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;while(++r<a){var u=ea(i[r],o[r]);if(u){if(r>=s)return u;var c=n[r];return u*("desc"==c?-1:1)}}return e.index-t.index}function na(e,t,r,i){var o=-1,a=e.length,s=r.length,u=-1,c=t.length,l=Bt(a-s,0),f=n(c+l),p=!i;while(++u<c)f[u]=t[u];while(++o<s)(p||o<a)&&(f[r[o]]=e[o]);while(l--)f[u++]=e[o++];return f}function ra(e,t,r,i){var o=-1,a=e.length,s=-1,u=r.length,c=-1,l=t.length,f=Bt(a-u,0),p=n(f+l),h=!i;while(++o<f)p[o]=e[o];var d=o;while(++c<l)p[d+c]=t[c];while(++s<u)(h||o<a)&&(p[d+r[s]]=e[o++]);return p}function ia(e,t){var r=-1,i=e.length;t||(t=n(i));while(++r<i)t[r]=e[r];return t}function oa(e,t,n,r){var i=!n;n||(n={});var a=-1,s=t.length;while(++a<s){var u=t[a],c=r?r(n[u],e[u],u,n,e):o;c===o&&(c=e[u]),i?di(n,u,c):ci(n,u,c)}return n}function aa(e,t){return oa(e,Xa(e),t)}function sa(e,t){return oa(e,Ka(e),t)}function ua(e,t){return function(n,r){var i=ul(n)?xn:fi,o=t?t():{};return i(n,e,Ga(r,2),o)}}function ca(e){return xo((function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:o,s=i>2?n[2]:o;a=e.length>3&&"function"==typeof a?(i--,a):o,s&&ss(n[0],n[1],s)&&(a=i<3?o:a,i=1),t=nt(t);while(++r<i){var u=n[r];u&&e(t,u,r,a)}return t}))}function la(e,t){return function(n,r){if(null==n)return n;if(!ll(n))return e(n,r);var i=n.length,o=t?i:-1,a=nt(n);while(t?o--:++o<i)if(!1===r(a[o],o,a))break;return n}}function fa(e){return function(t,n,r){var i=-1,o=nt(t),a=r(t),s=a.length;while(s--){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}function pa(e,t,n){var r=t&b,i=va(e);function o(){var t=this&&this!==un&&this instanceof o?i:e;return t.apply(r?n:this,arguments)}return o}function ha(e){return function(t){t=Jl(t);var n=ar(t)?gr(t):o,r=n?n[0]:t.charAt(0),i=n?qo(n,1).join(""):t.slice(1);return r[e]()+i}}function da(e){return function(t){return Tn(wp(Xf(t).replace(Ht,"")),e,"")}}function va(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Or(e.prototype),r=e.apply(n,t);return El(r)?r:n}}function ma(e,t,r){var i=va(e);function a(){var s=arguments.length,u=n(s),c=s,l=Ha(a);while(c--)u[c]=arguments[c];var f=s<3&&u[0]!==l&&u[s-1]!==l?[]:fr(u,l);if(s-=f.length,s<r)return Aa(e,t,ba,a.placeholder,o,u,f,o,o,r-s);var p=this&&this!==un&&this instanceof a?i:e;return _n(p,this,u)}return a}function ga(e){return function(t,n,r){var i=nt(t);if(!ll(t)){var a=Ga(n,3);t=Of(t),n=function(e){return a(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[a?t[s]:s]:o}}function ya(e){return Fa((function(t){var n=t.length,r=n,i=jr.prototype.thru;e&&t.reverse();while(r--){var a=t[r];if("function"!=typeof a)throw new ot(c);if(i&&!s&&"wrapper"==Va(a))var s=new jr([],!0)}r=s?r:n;while(++r<n){a=t[r];var u=Va(a),l="wrapper"==u?Ua(a):o;s=l&&ls(l[0])&&l[1]==(j|w|E|A)&&!l[4].length&&1==l[9]?s[Va(l[0])].apply(s,l[3]):1==a.length&&ls(a)?s[u]():s.thru(a)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&ul(r))return s.plant(r).value();var i=0,o=n?t[i].apply(this,e):r;while(++i<n)o=t[i].call(this,o);return o}}))}function ba(e,t,r,i,a,s,u,c,l,f){var p=t&j,h=t&b,d=t&_,v=t&(w|O),m=t&k,g=d?o:va(e);function y(){var o=arguments.length,b=n(o),_=o;while(_--)b[_]=arguments[_];if(v)var x=Ha(y),w=tr(b,x);if(i&&(b=na(b,i,a,v)),s&&(b=ra(b,s,u,v)),o-=w,v&&o<f){var O=fr(b,x);return Aa(e,t,ba,y.placeholder,r,b,O,c,l,f-o)}var E=h?r:this,S=d?E[e]:e;return o=b.length,c?b=ws(b,c):m&&o>1&&b.reverse(),p&&l<o&&(b.length=l),this&&this!==un&&this instanceof y&&(S=g||va(S)),S.apply(E,b)}return y}function _a(e,t){return function(n,r){return Vi(n,e,t(r),{})}}function xa(e,t){return function(n,r){var i;if(n===o&&r===o)return t;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=Ro(n),r=Ro(r)):(n=Io(n),r=Io(r)),i=e(n,r)}return i}}function wa(e){return Fa((function(t){return t=kn(t,Kn(Ga())),xo((function(n){var r=this;return e(t,(function(e){return _n(e,r,n)}))}))}))}function Oa(e,t){t=t===o?" ":Ro(t);var n=t.length;if(n<2)return n?_o(t,e):t;var r=_o(t,It(e/mr(t)));return ar(t)?qo(gr(r),0,e).join(""):r.slice(0,e)}function Ea(e,t,r,i){var o=t&b,a=va(e);function s(){var t=-1,u=arguments.length,c=-1,l=i.length,f=n(l+u),p=this&&this!==un&&this instanceof s?a:e;while(++c<l)f[c]=i[c];while(u--)f[c++]=arguments[++t];return _n(p,o?r:this,f)}return s}function Sa(e){return function(t,n,r){return r&&"number"!=typeof r&&ss(t,n,r)&&(n=r=o),t=Zl(t),n===o?(n=t,t=0):n=Zl(n),r=r===o?t<n?1:-1:Zl(r),bo(t,n,r,e)}}function ja(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Kl(t),n=Kl(n)),e(t,n)}}function Aa(e,t,n,r,i,a,s,u,c,l){var f=t&w,p=f?s:o,h=f?o:s,d=f?a:o,v=f?o:a;t|=f?E:S,t&=~(f?S:E),t&x||(t&=~(b|_));var m=[e,t,i,d,p,v,h,u,c,l],g=n.apply(o,m);return ls(e)&&Es(g,m),g.placeholder=r,As(g,e,t)}function ka(e){var t=He[e];return function(e,n){if(e=Kl(e),n=null==n?0:Ut(Yl(n),292),n&&Nt(e)){var r=(Jl(e)+"e").split("e"),i=t(r[0]+"e"+(+r[1]+n));return r=(Jl(i)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return t(e)}}var Ca=tn&&1/pr(new tn([,-0]))[1]==D?function(e){return new tn(e)}:zp;function Ta(e){return function(t){var n=$a(t);return n==J?cr(t):n==ae?hr(t):Yn(t,e(t))}}function Ma(e,t,n,r,i,a,s,u){var l=t&_;if(!l&&"function"!=typeof e)throw new ot(c);var f=r?r.length:0;if(f||(t&=~(E|S),r=i=o),s=s===o?s:Bt(Yl(s),0),u=u===o?u:Yl(u),f-=i?i.length:0,t&S){var p=r,h=i;r=i=o}var d=l?o:Ua(e),v=[e,t,n,r,i,p,h,a,s,u];if(d&&gs(v,d),e=v[0],t=v[1],n=v[2],r=v[3],i=v[4],u=v[9]=v[9]===o?l?0:e.length:Bt(v[9]-f,0),!u&&t&(w|O)&&(t&=~(w|O)),t&&t!=b)m=t==w||t==O?ma(e,t,u):t!=E&&t!=(b|E)||i.length?ba.apply(o,v):Ea(e,t,n,r);else var m=pa(e,t,n);var g=d?So:Es;return As(g(m,v),e,t)}function Pa(e,t,n,r){return e===o||il(e,ut[n])&&!ft.call(r,n)?t:e}function Ia(e,t,n,r,i,a){return El(e)&&El(t)&&(a.set(t,e),uo(e,t,o,Ia,a),a["delete"](t)),e}function Ra(e){return Rl(e)?o:e}function La(e,t,n,r,i,a){var s=n&g,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;var l=a.get(e),f=a.get(t);if(l&&f)return l==t&&f==e;var p=-1,h=!0,d=n&y?new Xr:o;a.set(e,t),a.set(t,e);while(++p<u){var v=e[p],m=t[p];if(r)var b=s?r(m,v,p,t,e,a):r(v,m,p,e,t,a);if(b!==o){if(b)continue;h=!1;break}if(d){if(!Pn(t,(function(e,t){if(!Qn(d,t)&&(v===e||i(v,e,n,r,a)))return d.push(t)}))){h=!1;break}}else if(v!==m&&!i(v,m,n,r,a)){h=!1;break}}return a["delete"](e),a["delete"](t),h}function Da(e,t,n,r,i,o,a){switch(n){case he:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case pe:return!(e.byteLength!=t.byteLength||!o(new _t(e),new _t(t)));case Z:case Y:case ee:return il(+e,+t);case K:return e.name==t.name&&e.message==t.message;case oe:case se:return e==t+"";case J:var s=cr;case ae:var u=r&g;if(s||(s=pr),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=y,a.set(e,t);var l=La(s(e),s(t),r,i,o,a);return a["delete"](e),l;case ue:if(dr)return dr.call(e)==dr.call(t)}return!1}function Na(e,t,n,r,i,a){var s=n&g,u=za(e),c=u.length,l=za(t),f=l.length;if(c!=f&&!s)return!1;var p=c;while(p--){var h=u[p];if(!(s?h in t:ft.call(t,h)))return!1}var d=a.get(e),v=a.get(t);if(d&&v)return d==t&&v==e;var m=!0;a.set(e,t),a.set(t,e);var y=s;while(++p<c){h=u[p];var b=e[h],_=t[h];if(r)var x=s?r(_,b,h,t,e,a):r(b,_,h,e,t,a);if(!(x===o?b===_||i(b,_,n,r,a):x)){m=!1;break}y||(y="constructor"==h)}if(m&&!y){var w=e.constructor,O=t.constructor;w==O||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof O&&O instanceof O||(m=!1)}return a["delete"](e),a["delete"](t),m}function Fa(e){return js(_s(e,o,Ys),e+"")}function za(e){return Li(e,Of,Xa)}function Ba(e){return Li(e,Ef,Ka)}var Ua=sn?function(e){return sn.get(e)}:zp;function Va(e){var t=e.name+"",n=cn[t],r=ft.call(cn,t)?n.length:0;while(r--){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Ha(e){var t=ft.call(xr,"placeholder")?xr:e;return t.placeholder}function Ga(){var e=xr.iteratee||Pp;return e=e===Pp?to:e,arguments.length?e(arguments[0],arguments[1]):e}function Wa(e,t){var n=e.__data__;return cs(t)?n["string"==typeof t?"string":"hash"]:n.map}function qa(e){var t=Of(e),n=t.length;while(n--){var r=t[n],i=e[r];t[n]=[r,i,ds(i)]}return t}function Za(e,t){var n=or(e,t);return $i(n)?n:o}function Ya(e){var t=ft.call(e,kt),n=e[kt];try{e[kt]=o;var r=!0}catch(a){}var i=dt.call(e);return r&&(t?e[kt]=n:delete e[kt]),i}var Xa=Lt?function(e){return null==e?[]:(e=nt(e),Sn(Lt(e),(function(t){return Et.call(e,t)})))}:Yp,Ka=Lt?function(e){var t=[];while(e)Cn(t,Xa(e)),e=wt(e);return t}:Yp,$a=Di;function Qa(e,t,n){var r=-1,i=n.length;while(++r<i){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Ut(t,e+a);break;case"takeRight":e=Bt(e,t-a);break}}return{start:e,end:t}}function Ja(e){var t=e.match(Ue);return t?t[1].split(Ve):[]}function es(e,t,n){t=Go(t,e);var r=-1,i=t.length,o=!1;while(++r<i){var a=Ms(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:(i=null==e?0:e.length,!!i&&Ol(i)&&as(a,i)&&(ul(e)||sl(e)))}function ts(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&ft.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function ns(e){return"function"!=typeof e.constructor||hs(e)?{}:Or(wt(e))}function rs(e,t,n){var r=e.constructor;switch(t){case pe:return Xo(e);case Z:case Y:return new r(+e);case he:return Ko(e,n);case de:case ve:case me:case ge:case ye:case be:case _e:case xe:case we:return Jo(e,n);case J:return new r;case ee:case se:return new r(e);case oe:return $o(e);case ae:return new r;case ue:return Qo(e)}}function is(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Be,"{\n/* [wrapped with "+t+"] */\n")}function os(e){return ul(e)||sl(e)||!!(jt&&e&&e[jt])}function as(e,t){var n=typeof e;return t=null==t?N:t,!!t&&("number"==n||"symbol"!=n&&Qe.test(e))&&e>-1&&e%1==0&&e<t}function ss(e,t,n){if(!El(n))return!1;var r=typeof t;return!!("number"==r?ll(n)&&as(t,n.length):"string"==r&&t in n)&&il(n[t],e)}function us(e,t){if(ul(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!zl(e))||(Re.test(e)||!Ie.test(e)||null!=t&&e in nt(t))}function cs(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function ls(e){var t=Va(e),n=xr[t];if("function"!=typeof n||!(t in Ar.prototype))return!1;if(e===n)return!0;var r=Ua(n);return!!r&&e===r[0]}function fs(e){return!!ht&&ht in e}(Yt&&$a(new Yt(new ArrayBuffer(1)))!=he||Jt&&$a(new Jt)!=J||en&&$a(en.resolve())!=re||tn&&$a(new tn)!=ae||nn&&$a(new nn)!=le)&&($a=function(e){var t=Di(e),n=t==ne?e.constructor:o,r=n?Ps(n):"";if(r)switch(r){case ln:return he;case pn:return J;case hn:return re;case In:return ae;case Rn:return le}return t});var ps=ct?xl:Xp;function hs(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||ut;return e===n}function ds(e){return e===e&&!El(e)}function vs(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==o||e in nt(n)))}}function ms(e){var t=Bc(e,(function(e){return n.size===p&&n.clear(),e})),n=t.cache;return t}function gs(e,t){var n=e[1],r=t[1],i=n|r,o=i<(b|_|j),a=r==j&&n==w||r==j&&n==A&&e[7].length<=t[8]||r==(j|A)&&t[7].length<=t[8]&&n==w;if(!o&&!a)return e;r&b&&(e[2]=t[2],i|=n&b?0:x);var s=t[3];if(s){var u=e[3];e[3]=u?na(u,s,t[4]):s,e[4]=u?fr(e[3],h):t[4]}return s=t[5],s&&(u=e[5],e[5]=u?ra(u,s,t[6]):s,e[6]=u?fr(e[5],h):t[6]),s=t[7],s&&(e[7]=s),r&j&&(e[8]=null==e[8]?t[8]:Ut(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function ys(e){var t=[];if(null!=e)for(var n in nt(e))t.push(n);return t}function bs(e){return dt.call(e)}function _s(e,t,r){return t=Bt(t===o?e.length-1:t,0),function(){var i=arguments,o=-1,a=Bt(i.length-t,0),s=n(a);while(++o<a)s[o]=i[t+o];o=-1;var u=n(t+1);while(++o<t)u[o]=i[o];return u[t]=r(s),_n(e,this,u)}}function xs(e,t){return t.length<2?e:Ri(e,ko(t,0,-1))}function ws(e,t){var n=e.length,r=Ut(t.length,n),i=ia(e);while(r--){var a=t[r];e[r]=as(a,n)?i[a]:o}return e}function Os(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Es=ks(So),Ss=Pt||function(e,t){return un.setTimeout(e,t)},js=ks(jo);function As(e,t,n){var r=t+"";return js(e,is(r,Is(Ja(r),n)))}function ks(e){var t=0,n=0;return function(){var r=Vt(),i=P-(r-n);if(n=r,i>0){if(++t>=M)return arguments[0]}else t=0;return e.apply(o,arguments)}}function Cs(e,t){var n=-1,r=e.length,i=r-1;t=t===o?r:t;while(++n<t){var a=yo(n,i),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var Ts=ms((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Le,(function(e,n,r,i){t.push(r?i.replace(We,"$1"):n||e)})),t}));function Ms(e){if("string"==typeof e||zl(e))return e;var t=e+"";return"0"==t&&1/e==-D?"-0":t}function Ps(e){if(null!=e){try{return lt.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Is(e,t){return wn(H,(function(n){var r="_."+n[0];t&n[1]&&!jn(e,r)&&e.push(r)})),e.sort()}function Rs(e){if(e instanceof Ar)return e.clone();var t=new jr(e.__wrapped__,e.__chain__);return t.__actions__=ia(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Ls(e,t,r){t=(r?ss(e,t,r):t===o)?1:Bt(Yl(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];var a=0,s=0,u=n(It(i/t));while(a<i)u[s++]=ko(e,a,a+=t);return u}function Ds(e){var t=-1,n=null==e?0:e.length,r=0,i=[];while(++t<n){var o=e[t];o&&(i[r++]=o)}return i}function Ns(){var e=arguments.length;if(!e)return[];var t=n(e-1),r=arguments[0],i=e;while(i--)t[i-1]=arguments[i];return Cn(ul(r)?ia(r):[r],ki(t,1))}var Fs=xo((function(e,t){return fl(e)?xi(e,ki(t,1,fl,!0)):[]})),zs=xo((function(e,t){var n=ou(t);return fl(n)&&(n=o),fl(e)?xi(e,ki(t,1,fl,!0),Ga(n,2)):[]})),Bs=xo((function(e,t){var n=ou(t);return fl(n)&&(n=o),fl(e)?xi(e,ki(t,1,fl,!0),o,n):[]}));function Us(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===o?1:Yl(t),ko(e,t<0?0:t,r)):[]}function Vs(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===o?1:Yl(t),t=r-t,ko(e,0,t<0?0:t)):[]}function Hs(e,t){return e&&e.length?Fo(e,Ga(t,3),!0,!0):[]}function Gs(e,t){return e&&e.length?Fo(e,Ga(t,3),!0):[]}function Ws(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&ss(e,t,n)&&(n=0,r=i),ji(e,t,n,r)):[]}function qs(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Yl(n);return i<0&&(i=Bt(r+i,0)),Nn(e,Ga(t,3),i)}function Zs(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==o&&(i=Yl(n),i=n<0?Bt(r+i,0):Ut(i,r-1)),Nn(e,Ga(t,3),i,!0)}function Ys(e){var t=null==e?0:e.length;return t?ki(e,1):[]}function Xs(e){var t=null==e?0:e.length;return t?ki(e,D):[]}function Ks(e,t){var n=null==e?0:e.length;return n?(t=t===o?1:Yl(t),ki(e,t)):[]}function $s(e){var t=-1,n=null==e?0:e.length,r={};while(++t<n){var i=e[t];r[i[0]]=i[1]}return r}function Qs(e){return e&&e.length?e[0]:o}function Js(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Yl(n);return i<0&&(i=Bt(r+i,0)),Fn(e,t,i)}function eu(e){var t=null==e?0:e.length;return t?ko(e,0,-1):[]}var tu=xo((function(e){var t=kn(e,Vo);return t.length&&t[0]===e[0]?Ui(t):[]})),nu=xo((function(e){var t=ou(e),n=kn(e,Vo);return t===ou(n)?t=o:n.pop(),n.length&&n[0]===e[0]?Ui(n,Ga(t,2)):[]})),ru=xo((function(e){var t=ou(e),n=kn(e,Vo);return t="function"==typeof t?t:o,t&&n.pop(),n.length&&n[0]===e[0]?Ui(n,o,t):[]}));function iu(e,t){return null==e?"":Ft.call(e,t)}function ou(e){var t=null==e?0:e.length;return t?e[t-1]:o}function au(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==o&&(i=Yl(n),i=i<0?Bt(r+i,0):Ut(i,r-1)),t===t?vr(e,t,i):Nn(e,Bn,i,!0)}function su(e,t){return e&&e.length?lo(e,Yl(t)):o}var uu=xo(cu);function cu(e,t){return e&&e.length&&t&&t.length?mo(e,t):e}function lu(e,t,n){return e&&e.length&&t&&t.length?mo(e,t,Ga(n,2)):e}function fu(e,t,n){return e&&e.length&&t&&t.length?mo(e,t,o,n):e}var pu=Fa((function(e,t){var n=null==e?0:e.length,r=vi(e,t);return go(e,kn(t,(function(e){return as(e,n)?+e:e})).sort(ea)),r}));function hu(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;t=Ga(t,3);while(++r<o){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return go(e,i),n}function du(e){return null==e?e:Zt.call(e)}function vu(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&ss(e,t,n)?(t=0,n=r):(t=null==t?0:Yl(t),n=n===o?r:Yl(n)),ko(e,t,n)):[]}function mu(e,t){return To(e,t)}function gu(e,t,n){return Mo(e,t,Ga(n,2))}function yu(e,t){var n=null==e?0:e.length;if(n){var r=To(e,t);if(r<n&&il(e[r],t))return r}return-1}function bu(e,t){return To(e,t,!0)}function _u(e,t,n){return Mo(e,t,Ga(n,2),!0)}function xu(e,t){var n=null==e?0:e.length;if(n){var r=To(e,t,!0)-1;if(il(e[r],t))return r}return-1}function wu(e){return e&&e.length?Po(e):[]}function Ou(e,t){return e&&e.length?Po(e,Ga(t,2)):[]}function Eu(e){var t=null==e?0:e.length;return t?ko(e,1,t):[]}function Su(e,t,n){return e&&e.length?(t=n||t===o?1:Yl(t),ko(e,0,t<0?0:t)):[]}function ju(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===o?1:Yl(t),t=r-t,ko(e,t<0?0:t,r)):[]}function Au(e,t){return e&&e.length?Fo(e,Ga(t,3),!1,!0):[]}function ku(e,t){return e&&e.length?Fo(e,Ga(t,3)):[]}var Cu=xo((function(e){return Lo(ki(e,1,fl,!0))})),Tu=xo((function(e){var t=ou(e);return fl(t)&&(t=o),Lo(ki(e,1,fl,!0),Ga(t,2))})),Mu=xo((function(e){var t=ou(e);return t="function"==typeof t?t:o,Lo(ki(e,1,fl,!0),o,t)}));function Pu(e){return e&&e.length?Lo(e):[]}function Iu(e,t){return e&&e.length?Lo(e,Ga(t,2)):[]}function Ru(e,t){return t="function"==typeof t?t:o,e&&e.length?Lo(e,o,t):[]}function Lu(e){if(!e||!e.length)return[];var t=0;return e=Sn(e,(function(e){if(fl(e))return t=Bt(e.length,t),!0})),Zn(t,(function(t){return kn(e,Vn(t))}))}function Du(e,t){if(!e||!e.length)return[];var n=Lu(e);return null==t?n:kn(n,(function(e){return _n(t,o,e)}))}var Nu=xo((function(e,t){return fl(e)?xi(e,t):[]})),Fu=xo((function(e){return Bo(Sn(e,fl))})),zu=xo((function(e){var t=ou(e);return fl(t)&&(t=o),Bo(Sn(e,fl),Ga(t,2))})),Bu=xo((function(e){var t=ou(e);return t="function"==typeof t?t:o,Bo(Sn(e,fl),o,t)})),Uu=xo(Lu);function Vu(e,t){return Uo(e||[],t||[],ci)}function Hu(e,t){return Uo(e||[],t||[],Eo)}var Gu=xo((function(e){var t=e.length,n=t>1?e[t-1]:o;return n="function"==typeof n?(e.pop(),n):o,Du(e,n)}));function Wu(e){var t=xr(e);return t.__chain__=!0,t}function qu(e,t){return t(e),e}function Zu(e,t){return t(e)}var Yu=Fa((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return vi(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Ar&&as(n)?(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:Zu,args:[i],thisArg:o}),new jr(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(o),e}))):this.thru(i)}));function Xu(){return Wu(this)}function Ku(){return new jr(this.value(),this.__chain__)}function $u(){this.__values__===o&&(this.__values__=ql(this.value()));var e=this.__index__>=this.__values__.length,t=e?o:this.__values__[this.__index__++];return{done:e,value:t}}function Qu(){return this}function Ju(e){var t,n=this;while(n instanceof Sr){var r=Rs(n);r.__index__=0,r.__values__=o,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t}function ec(){var e=this.__wrapped__;if(e instanceof Ar){var t=e;return this.__actions__.length&&(t=new Ar(this)),t=t.reverse(),t.__actions__.push({func:Zu,args:[du],thisArg:o}),new jr(t,this.__chain__)}return this.thru(du)}function tc(){return zo(this.__wrapped__,this.__actions__)}var nc=ua((function(e,t,n){ft.call(e,n)?++e[n]:di(e,n,1)}));function rc(e,t,n){var r=ul(e)?En:Ei;return n&&ss(e,t,n)&&(t=o),r(e,Ga(t,3))}function ic(e,t){var n=ul(e)?Sn:Ai;return n(e,Ga(t,3))}var oc=ga(qs),ac=ga(Zs);function sc(e,t){return ki(mc(e,t),1)}function uc(e,t){return ki(mc(e,t),D)}function cc(e,t,n){return n=n===o?1:Yl(n),ki(mc(e,t),n)}function lc(e,t){var n=ul(e)?wn:wi;return n(e,Ga(t,3))}function fc(e,t){var n=ul(e)?On:Oi;return n(e,Ga(t,3))}var pc=ua((function(e,t,n){ft.call(e,n)?e[n].push(t):di(e,n,[t])}));function hc(e,t,n,r){e=ll(e)?e:Vf(e),n=n&&!r?Yl(n):0;var i=e.length;return n<0&&(n=Bt(i+n,0)),Fl(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Fn(e,t,n)>-1}var dc=xo((function(e,t,r){var i=-1,o="function"==typeof t,a=ll(e)?n(e.length):[];return wi(e,(function(e){a[++i]=o?_n(t,e,r):Hi(e,t,r)})),a})),vc=ua((function(e,t,n){di(e,n,t)}));function mc(e,t){var n=ul(e)?kn:oo;return n(e,Ga(t,3))}function gc(e,t,n,r){return null==e?[]:(ul(t)||(t=null==t?[]:[t]),n=r?o:n,ul(n)||(n=null==n?[]:[n]),fo(e,t,n))}var yc=ua((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));function bc(e,t,n){var r=ul(e)?Tn:Gn,i=arguments.length<3;return r(e,Ga(t,4),n,i,wi)}function _c(e,t,n){var r=ul(e)?Mn:Gn,i=arguments.length<3;return r(e,Ga(t,4),n,i,Oi)}function xc(e,t){var n=ul(e)?Sn:Ai;return n(e,Uc(Ga(t,3)))}function wc(e){var t=ul(e)?oi:wo;return t(e)}function Oc(e,t,n){t=(n?ss(e,t,n):t===o)?1:Yl(t);var r=ul(e)?ai:Oo;return r(e,t)}function Ec(e){var t=ul(e)?si:Ao;return t(e)}function Sc(e){if(null==e)return 0;if(ll(e))return Fl(e)?mr(e):e.length;var t=$a(e);return t==J||t==ae?e.size:no(e).length}function jc(e,t,n){var r=ul(e)?Pn:Co;return n&&ss(e,t,n)&&(t=o),r(e,Ga(t,3))}var Ac=xo((function(e,t){if(null==e)return[];var n=t.length;return n>1&&ss(e,t[0],t[1])?t=[]:n>2&&ss(t[0],t[1],t[2])&&(t=[t[0]]),fo(e,ki(t,1),[])})),kc=Mt||function(){return un.Date.now()};function Cc(e,t){if("function"!=typeof t)throw new ot(c);return e=Yl(e),function(){if(--e<1)return t.apply(this,arguments)}}function Tc(e,t,n){return t=n?o:t,t=e&&null==t?e.length:t,Ma(e,j,o,o,o,o,t)}function Mc(e,t){var n;if("function"!=typeof t)throw new ot(c);return e=Yl(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=o),n}}var Pc=xo((function(e,t,n){var r=b;if(n.length){var i=fr(n,Ha(Pc));r|=E}return Ma(e,r,t,n,i)})),Ic=xo((function(e,t,n){var r=b|_;if(n.length){var i=fr(n,Ha(Ic));r|=E}return Ma(t,r,e,n,i)}));function Rc(e,t,n){t=n?o:t;var r=Ma(e,w,o,o,o,o,o,t);return r.placeholder=Rc.placeholder,r}function Lc(e,t,n){t=n?o:t;var r=Ma(e,O,o,o,o,o,o,t);return r.placeholder=Lc.placeholder,r}function Dc(e,t,n){var r,i,a,s,u,l,f=0,p=!1,h=!1,d=!0;if("function"!=typeof e)throw new ot(c);function v(t){var n=r,a=i;return r=i=o,f=t,s=e.apply(a,n),s}function m(e){return f=e,u=Ss(b,t),p?v(e):s}function g(e){var n=e-l,r=e-f,i=t-n;return h?Ut(i,a-r):i}function y(e){var n=e-l,r=e-f;return l===o||n>=t||n<0||h&&r>=a}function b(){var e=kc();if(y(e))return _(e);u=Ss(b,g(e))}function _(e){return u=o,d&&r?v(e):(r=i=o,s)}function x(){u!==o&&Zo(u),f=0,r=l=i=u=o}function w(){return u===o?s:_(kc())}function O(){var e=kc(),n=y(e);if(r=arguments,i=this,l=e,n){if(u===o)return m(l);if(h)return Zo(u),u=Ss(b,t),v(l)}return u===o&&(u=Ss(b,t)),s}return t=Kl(t)||0,El(n)&&(p=!!n.leading,h="maxWait"in n,a=h?Bt(Kl(n.maxWait)||0,t):a,d="trailing"in n?!!n.trailing:d),O.cancel=x,O.flush=w,O}var Nc=xo((function(e,t){return _i(e,1,t)})),Fc=xo((function(e,t,n){return _i(e,Kl(t)||0,n)}));function zc(e){return Ma(e,k)}function Bc(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ot(c);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Bc.Cache||Hr),n}function Uc(e){if("function"!=typeof e)throw new ot(c);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Vc(e){return Mc(2,e)}Bc.Cache=Hr;var Hc=Wo((function(e,t){t=1==t.length&&ul(t[0])?kn(t[0],Kn(Ga())):kn(ki(t,1),Kn(Ga()));var n=t.length;return xo((function(r){var i=-1,o=Ut(r.length,n);while(++i<o)r[i]=t[i].call(this,r[i]);return _n(e,this,r)}))})),Gc=xo((function(e,t){var n=fr(t,Ha(Gc));return Ma(e,E,o,t,n)})),Wc=xo((function(e,t){var n=fr(t,Ha(Wc));return Ma(e,S,o,t,n)})),qc=Fa((function(e,t){return Ma(e,A,o,o,o,t)}));function Zc(e,t){if("function"!=typeof e)throw new ot(c);return t=t===o?t:Yl(t),xo(e,t)}function Yc(e,t){if("function"!=typeof e)throw new ot(c);return t=null==t?0:Bt(Yl(t),0),xo((function(n){var r=n[t],i=qo(n,0,t);return r&&Cn(i,r),_n(e,this,i)}))}function Xc(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new ot(c);return El(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Dc(e,t,{leading:r,maxWait:t,trailing:i})}function Kc(e){return Tc(e,1)}function $c(e,t){return Gc(Ho(t),e)}function Qc(){if(!arguments.length)return[];var e=arguments[0];return ul(e)?e:[e]}function Jc(e){return gi(e,m)}function el(e,t){return t="function"==typeof t?t:o,gi(e,m,t)}function tl(e){return gi(e,d|m)}function nl(e,t){return t="function"==typeof t?t:o,gi(e,d|m,t)}function rl(e,t){return null==t||bi(e,t,Of(t))}function il(e,t){return e===t||e!==e&&t!==t}var ol=ja(Ni),al=ja((function(e,t){return e>=t})),sl=Gi(function(){return arguments}())?Gi:function(e){return Sl(e)&&ft.call(e,"callee")&&!Et.call(e,"callee")},ul=n.isArray,cl=dn?Kn(dn):Wi;function ll(e){return null!=e&&Ol(e.length)&&!xl(e)}function fl(e){return Sl(e)&&ll(e)}function pl(e){return!0===e||!1===e||Sl(e)&&Di(e)==Z}var hl=Dt||Xp,dl=vn?Kn(vn):qi;function vl(e){return Sl(e)&&1===e.nodeType&&!Rl(e)}function ml(e){if(null==e)return!0;if(ll(e)&&(ul(e)||"string"==typeof e||"function"==typeof e.splice||hl(e)||Bl(e)||sl(e)))return!e.length;var t=$a(e);if(t==J||t==ae)return!e.size;if(hs(e))return!no(e).length;for(var n in e)if(ft.call(e,n))return!1;return!0}function gl(e,t){return Zi(e,t)}function yl(e,t,n){n="function"==typeof n?n:o;var r=n?n(e,t):o;return r===o?Zi(e,t,o,n):!!r}function bl(e){if(!Sl(e))return!1;var t=Di(e);return t==K||t==X||"string"==typeof e.message&&"string"==typeof e.name&&!Rl(e)}function _l(e){return"number"==typeof e&&Nt(e)}function xl(e){if(!El(e))return!1;var t=Di(e);return t==$||t==Q||t==q||t==ie}function wl(e){return"number"==typeof e&&e==Yl(e)}function Ol(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=N}function El(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Sl(e){return null!=e&&"object"==typeof e}var jl=mn?Kn(mn):Xi;function Al(e,t){return e===t||Ki(e,t,qa(t))}function kl(e,t,n){return n="function"==typeof n?n:o,Ki(e,t,qa(t),n)}function Cl(e){return Il(e)&&e!=+e}function Tl(e){if(ps(e))throw new i(u);return $i(e)}function Ml(e){return null===e}function Pl(e){return null==e}function Il(e){return"number"==typeof e||Sl(e)&&Di(e)==ee}function Rl(e){if(!Sl(e)||Di(e)!=ne)return!1;var t=wt(e);if(null===t)return!0;var n=ft.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&lt.call(n)==vt}var Ll=gn?Kn(gn):Qi;function Dl(e){return wl(e)&&e>=-N&&e<=N}var Nl=yn?Kn(yn):Ji;function Fl(e){return"string"==typeof e||!ul(e)&&Sl(e)&&Di(e)==se}function zl(e){return"symbol"==typeof e||Sl(e)&&Di(e)==ue}var Bl=bn?Kn(bn):eo;function Ul(e){return e===o}function Vl(e){return Sl(e)&&$a(e)==le}function Hl(e){return Sl(e)&&Di(e)==fe}var Gl=ja(io),Wl=ja((function(e,t){return e<=t}));function ql(e){if(!e)return[];if(ll(e))return Fl(e)?gr(e):ia(e);if(At&&e[At])return ur(e[At]());var t=$a(e),n=t==J?cr:t==ae?pr:Vf;return n(e)}function Zl(e){if(!e)return 0===e?e:0;if(e=Kl(e),e===D||e===-D){var t=e<0?-1:1;return t*F}return e===e?e:0}function Yl(e){var t=Zl(e),n=t%1;return t===t?n?t-n:t:0}function Xl(e){return e?mi(Yl(e),0,B):0}function Kl(e){if("number"==typeof e)return e;if(zl(e))return z;if(El(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=El(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Xn(e);var n=Xe.test(e);return n||$e.test(e)?on(e.slice(2),n?2:8):Ye.test(e)?z:+e}function $l(e){return oa(e,Ef(e))}function Ql(e){return e?mi(Yl(e),-N,N):0===e?e:0}function Jl(e){return null==e?"":Ro(e)}var ef=ca((function(e,t){if(hs(t)||ll(t))oa(t,Of(t),e);else for(var n in t)ft.call(t,n)&&ci(e,n,t[n])})),tf=ca((function(e,t){oa(t,Ef(t),e)})),nf=ca((function(e,t,n,r){oa(t,Ef(t),e,r)})),rf=ca((function(e,t,n,r){oa(t,Of(t),e,r)})),of=Fa(vi);function af(e,t){var n=Or(e);return null==t?n:pi(n,t)}var sf=xo((function(e,t){e=nt(e);var n=-1,r=t.length,i=r>2?t[2]:o;i&&ss(t[0],t[1],i)&&(r=1);while(++n<r){var a=t[n],s=Ef(a),u=-1,c=s.length;while(++u<c){var l=s[u],f=e[l];(f===o||il(f,ut[l])&&!ft.call(e,l))&&(e[l]=a[l])}}return e})),uf=xo((function(e){return e.push(o,Ia),_n(kf,o,e)}));function cf(e,t){return Dn(e,Ga(t,3),Mi)}function lf(e,t){return Dn(e,Ga(t,3),Pi)}function ff(e,t){return null==e?e:Ci(e,Ga(t,3),Ef)}function pf(e,t){return null==e?e:Ti(e,Ga(t,3),Ef)}function hf(e,t){return e&&Mi(e,Ga(t,3))}function df(e,t){return e&&Pi(e,Ga(t,3))}function vf(e){return null==e?[]:Ii(e,Of(e))}function mf(e){return null==e?[]:Ii(e,Ef(e))}function gf(e,t,n){var r=null==e?o:Ri(e,t);return r===o?n:r}function yf(e,t){return null!=e&&es(e,t,Fi)}function bf(e,t){return null!=e&&es(e,t,zi)}var _f=_a((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=dt.call(t)),e[t]=n}),Ap(Mp)),xf=_a((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=dt.call(t)),ft.call(e,t)?e[t].push(n):e[t]=[n]}),Ga),wf=xo(Hi);function Of(e){return ll(e)?ii(e):no(e)}function Ef(e){return ll(e)?ii(e,!0):ro(e)}function Sf(e,t){var n={};return t=Ga(t,3),Mi(e,(function(e,r,i){di(n,t(e,r,i),e)})),n}function jf(e,t){var n={};return t=Ga(t,3),Mi(e,(function(e,r,i){di(n,r,t(e,r,i))})),n}var Af=ca((function(e,t,n){uo(e,t,n)})),kf=ca((function(e,t,n,r){uo(e,t,n,r)})),Cf=Fa((function(e,t){var n={};if(null==e)return n;var r=!1;t=kn(t,(function(t){return t=Go(t,e),r||(r=t.length>1),t})),oa(e,Ba(e),n),r&&(n=gi(n,d|v|m,Ra));var i=t.length;while(i--)Do(n,t[i]);return n}));function Tf(e,t){return Pf(e,Uc(Ga(t)))}var Mf=Fa((function(e,t){return null==e?{}:po(e,t)}));function Pf(e,t){if(null==e)return{};var n=kn(Ba(e),(function(e){return[e]}));return t=Ga(t),ho(e,n,(function(e,n){return t(e,n[0])}))}function If(e,t,n){t=Go(t,e);var r=-1,i=t.length;i||(i=1,e=o);while(++r<i){var a=null==e?o:e[Ms(t[r])];a===o&&(r=i,a=n),e=xl(a)?a.call(e):a}return e}function Rf(e,t,n){return null==e?e:Eo(e,t,n)}function Lf(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:Eo(e,t,n,r)}var Df=Ta(Of),Nf=Ta(Ef);function Ff(e,t,n){var r=ul(e),i=r||hl(e)||Bl(e);if(t=Ga(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:El(e)&&xl(o)?Or(wt(e)):{}}return(i?wn:Mi)(e,(function(e,r,i){return t(n,e,r,i)})),n}function zf(e,t){return null==e||Do(e,t)}function Bf(e,t,n){return null==e?e:No(e,t,Ho(n))}function Uf(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:No(e,t,Ho(n),r)}function Vf(e){return null==e?[]:$n(e,Of(e))}function Hf(e){return null==e?[]:$n(e,Ef(e))}function Gf(e,t,n){return n===o&&(n=t,t=o),n!==o&&(n=Kl(n),n=n===n?n:0),t!==o&&(t=Kl(t),t=t===t?t:0),mi(Kl(e),t,n)}function Wf(e,t,n){return t=Zl(t),n===o?(n=t,t=0):n=Zl(n),e=Kl(e),Bi(e,t,n)}function qf(e,t,n){if(n&&"boolean"!=typeof n&&ss(e,t,n)&&(t=n=o),n===o&&("boolean"==typeof t?(n=t,t=o):"boolean"==typeof e&&(n=e,e=o)),e===o&&t===o?(e=0,t=1):(e=Zl(e),t===o?(t=e,e=0):t=Zl(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=qt();return Ut(e+i*(t-e+rn("1e-"+((i+"").length-1))),t)}return yo(e,t)}var Zf=da((function(e,t,n){return t=t.toLowerCase(),e+(n?Yf(t):t)}));function Yf(e){return xp(Jl(e).toLowerCase())}function Xf(e){return e=Jl(e),e&&e.replace(Je,nr).replace(Gt,"")}function Kf(e,t,n){e=Jl(e),t=Ro(t);var r=e.length;n=n===o?r:mi(Yl(n),0,r);var i=n;return n-=t.length,n>=0&&e.slice(n,i)==t}function $f(e){return e=Jl(e),e&&Ce.test(e)?e.replace(Ae,rr):e}function Qf(e){return e=Jl(e),e&&Ne.test(e)?e.replace(De,"\\$&"):e}var Jf=da((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),ep=da((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),tp=ha("toLowerCase");function np(e,t,n){e=Jl(e),t=Yl(t);var r=t?mr(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Oa(Rt(i),n)+e+Oa(It(i),n)}function rp(e,t,n){e=Jl(e),t=Yl(t);var r=t?mr(e):0;return t&&r<t?e+Oa(t-r,n):e}function ip(e,t,n){e=Jl(e),t=Yl(t);var r=t?mr(e):0;return t&&r<t?Oa(t-r,n)+e:e}function op(e,t,n){return n||null==t?t=0:t&&(t=+t),Wt(Jl(e).replace(Fe,""),t||0)}function ap(e,t,n){return t=(n?ss(e,t,n):t===o)?1:Yl(t),_o(Jl(e),t)}function sp(){var e=arguments,t=Jl(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var up=da((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));function cp(e,t,n){return n&&"number"!=typeof n&&ss(e,t,n)&&(t=n=o),n=n===o?B:n>>>0,n?(e=Jl(e),e&&("string"==typeof t||null!=t&&!Ll(t))&&(t=Ro(t),!t&&ar(e))?qo(gr(e),0,n):e.split(t,n)):[]}var lp=da((function(e,t,n){return e+(n?" ":"")+xp(t)}));function fp(e,t,n){return e=Jl(e),n=null==n?0:mi(Yl(n),0,e.length),t=Ro(t),e.slice(n,n+t.length)==t}function pp(e,t,n){var r=xr.templateSettings;n&&ss(e,t,n)&&(t=o),e=Jl(e),t=nf({},t,r,Pa);var a,s,u=nf({},t.imports,r.imports,Pa),c=Of(u),f=$n(u,c),p=0,h=t.interpolate||et,d="__p += '",v=rt((t.escape||et).source+"|"+h.source+"|"+(h===Pe?qe:et).source+"|"+(t.evaluate||et).source+"|$","g"),m="//# sourceURL="+(ft.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Kt+"]")+"\n";e.replace(v,(function(t,n,r,i,o,u){return r||(r=i),d+=e.slice(p,u).replace(tt,ir),n&&(a=!0,d+="' +\n__e("+n+") +\n'"),o&&(s=!0,d+="';\n"+o+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),p=u+t.length,t})),d+="';\n";var g=ft.call(t,"variable")&&t.variable;if(g){if(Ge.test(g))throw new i(l)}else d="with (obj) {\n"+d+"\n}\n";d=(s?d.replace(Oe,""):d).replace(Ee,"$1").replace(Se,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var y=Op((function(){return ze(c,m+"return "+d).apply(o,f)}));if(y.source=d,bl(y))throw y;return y}function hp(e){return Jl(e).toLowerCase()}function dp(e){return Jl(e).toUpperCase()}function vp(e,t,n){if(e=Jl(e),e&&(n||t===o))return Xn(e);if(!e||!(t=Ro(t)))return e;var r=gr(e),i=gr(t),a=Jn(r,i),s=er(r,i)+1;return qo(r,a,s).join("")}function mp(e,t,n){if(e=Jl(e),e&&(n||t===o))return e.slice(0,yr(e)+1);if(!e||!(t=Ro(t)))return e;var r=gr(e),i=er(r,gr(t))+1;return qo(r,0,i).join("")}function gp(e,t,n){if(e=Jl(e),e&&(n||t===o))return e.replace(Fe,"");if(!e||!(t=Ro(t)))return e;var r=gr(e),i=Jn(r,gr(t));return qo(r,i).join("")}function yp(e,t){var n=C,r=T;if(El(t)){var i="separator"in t?t.separator:i;n="length"in t?Yl(t.length):n,r="omission"in t?Ro(t.omission):r}e=Jl(e);var a=e.length;if(ar(e)){var s=gr(e);a=s.length}if(n>=a)return e;var u=n-mr(r);if(u<1)return r;var c=s?qo(s,0,u).join(""):e.slice(0,u);if(i===o)return c+r;if(s&&(u+=c.length-u),Ll(i)){if(e.slice(u).search(i)){var l,f=c;i.global||(i=rt(i.source,Jl(Ze.exec(i))+"g")),i.lastIndex=0;while(l=i.exec(f))var p=l.index;c=c.slice(0,p===o?u:p)}}else if(e.indexOf(Ro(i),u)!=u){var h=c.lastIndexOf(i);h>-1&&(c=c.slice(0,h))}return c+r}function bp(e){return e=Jl(e),e&&ke.test(e)?e.replace(je,br):e}var _p=da((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),xp=ha("toUpperCase");function wp(e,t,n){return e=Jl(e),t=n?o:t,t===o?sr(e)?wr(e):Ln(e):e.match(t)||[]}var Op=xo((function(e,t){try{return _n(e,o,t)}catch(n){return bl(n)?n:new i(n)}})),Ep=Fa((function(e,t){return wn(t,(function(t){t=Ms(t),di(e,t,Pc(e[t],e))})),e}));function Sp(e){var t=null==e?0:e.length,n=Ga();return e=t?kn(e,(function(e){if("function"!=typeof e[1])throw new ot(c);return[n(e[0]),e[1]]})):[],xo((function(n){var r=-1;while(++r<t){var i=e[r];if(_n(i[0],this,n))return _n(i[1],this,n)}}))}function jp(e){return yi(gi(e,d))}function Ap(e){return function(){return e}}function kp(e,t){return null==e||e!==e?t:e}var Cp=ya(),Tp=ya(!0);function Mp(e){return e}function Pp(e){return to("function"==typeof e?e:gi(e,d))}function Ip(e){return ao(gi(e,d))}function Rp(e,t){return so(e,gi(t,d))}var Lp=xo((function(e,t){return function(n){return Hi(n,e,t)}})),Dp=xo((function(e,t){return function(n){return Hi(e,n,t)}}));function Np(e,t,n){var r=Of(t),i=Ii(t,r);null!=n||El(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Ii(t,Of(t)));var o=!(El(n)&&"chain"in n)||!!n.chain,a=xl(e);return wn(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=ia(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Cn([this.value()],arguments))})})),e}function Fp(){return un._===this&&(un._=mt),this}function zp(){}function Bp(e){return e=Yl(e),xo((function(t){return lo(t,e)}))}var Up=wa(kn),Vp=wa(En),Hp=wa(Pn);function Gp(e){return us(e)?Vn(Ms(e)):vo(e)}function Wp(e){return function(t){return null==e?o:Ri(e,t)}}var qp=Sa(),Zp=Sa(!0);function Yp(){return[]}function Xp(){return!1}function Kp(){return{}}function $p(){return""}function Qp(){return!0}function Jp(e,t){if(e=Yl(e),e<1||e>N)return[];var n=B,r=Ut(e,B);t=Ga(t),e-=B;var i=Zn(r,t);while(++n<e)t(n);return i}function eh(e){return ul(e)?kn(e,Ms):zl(e)?[e]:ia(Ts(Jl(e)))}function th(e){var t=++pt;return Jl(e)+t}var nh=xa((function(e,t){return e+t}),0),rh=ka("ceil"),ih=xa((function(e,t){return e/t}),1),oh=ka("floor");function ah(e){return e&&e.length?Si(e,Mp,Ni):o}function sh(e,t){return e&&e.length?Si(e,Ga(t,2),Ni):o}function uh(e){return Un(e,Mp)}function ch(e,t){return Un(e,Ga(t,2))}function lh(e){return e&&e.length?Si(e,Mp,io):o}function fh(e,t){return e&&e.length?Si(e,Ga(t,2),io):o}var ph=xa((function(e,t){return e*t}),1),hh=ka("round"),dh=xa((function(e,t){return e-t}),0);function vh(e){return e&&e.length?qn(e,Mp):0}function mh(e,t){return e&&e.length?qn(e,Ga(t,2)):0}return xr.after=Cc,xr.ary=Tc,xr.assign=ef,xr.assignIn=tf,xr.assignInWith=nf,xr.assignWith=rf,xr.at=of,xr.before=Mc,xr.bind=Pc,xr.bindAll=Ep,xr.bindKey=Ic,xr.castArray=Qc,xr.chain=Wu,xr.chunk=Ls,xr.compact=Ds,xr.concat=Ns,xr.cond=Sp,xr.conforms=jp,xr.constant=Ap,xr.countBy=nc,xr.create=af,xr.curry=Rc,xr.curryRight=Lc,xr.debounce=Dc,xr.defaults=sf,xr.defaultsDeep=uf,xr.defer=Nc,xr.delay=Fc,xr.difference=Fs,xr.differenceBy=zs,xr.differenceWith=Bs,xr.drop=Us,xr.dropRight=Vs,xr.dropRightWhile=Hs,xr.dropWhile=Gs,xr.fill=Ws,xr.filter=ic,xr.flatMap=sc,xr.flatMapDeep=uc,xr.flatMapDepth=cc,xr.flatten=Ys,xr.flattenDeep=Xs,xr.flattenDepth=Ks,xr.flip=zc,xr.flow=Cp,xr.flowRight=Tp,xr.fromPairs=$s,xr.functions=vf,xr.functionsIn=mf,xr.groupBy=pc,xr.initial=eu,xr.intersection=tu,xr.intersectionBy=nu,xr.intersectionWith=ru,xr.invert=_f,xr.invertBy=xf,xr.invokeMap=dc,xr.iteratee=Pp,xr.keyBy=vc,xr.keys=Of,xr.keysIn=Ef,xr.map=mc,xr.mapKeys=Sf,xr.mapValues=jf,xr.matches=Ip,xr.matchesProperty=Rp,xr.memoize=Bc,xr.merge=Af,xr.mergeWith=kf,xr.method=Lp,xr.methodOf=Dp,xr.mixin=Np,xr.negate=Uc,xr.nthArg=Bp,xr.omit=Cf,xr.omitBy=Tf,xr.once=Vc,xr.orderBy=gc,xr.over=Up,xr.overArgs=Hc,xr.overEvery=Vp,xr.overSome=Hp,xr.partial=Gc,xr.partialRight=Wc,xr.partition=yc,xr.pick=Mf,xr.pickBy=Pf,xr.property=Gp,xr.propertyOf=Wp,xr.pull=uu,xr.pullAll=cu,xr.pullAllBy=lu,xr.pullAllWith=fu,xr.pullAt=pu,xr.range=qp,xr.rangeRight=Zp,xr.rearg=qc,xr.reject=xc,xr.remove=hu,xr.rest=Zc,xr.reverse=du,xr.sampleSize=Oc,xr.set=Rf,xr.setWith=Lf,xr.shuffle=Ec,xr.slice=vu,xr.sortBy=Ac,xr.sortedUniq=wu,xr.sortedUniqBy=Ou,xr.split=cp,xr.spread=Yc,xr.tail=Eu,xr.take=Su,xr.takeRight=ju,xr.takeRightWhile=Au,xr.takeWhile=ku,xr.tap=qu,xr.throttle=Xc,xr.thru=Zu,xr.toArray=ql,xr.toPairs=Df,xr.toPairsIn=Nf,xr.toPath=eh,xr.toPlainObject=$l,xr.transform=Ff,xr.unary=Kc,xr.union=Cu,xr.unionBy=Tu,xr.unionWith=Mu,xr.uniq=Pu,xr.uniqBy=Iu,xr.uniqWith=Ru,xr.unset=zf,xr.unzip=Lu,xr.unzipWith=Du,xr.update=Bf,xr.updateWith=Uf,xr.values=Vf,xr.valuesIn=Hf,xr.without=Nu,xr.words=wp,xr.wrap=$c,xr.xor=Fu,xr.xorBy=zu,xr.xorWith=Bu,xr.zip=Uu,xr.zipObject=Vu,xr.zipObjectDeep=Hu,xr.zipWith=Gu,xr.entries=Df,xr.entriesIn=Nf,xr.extend=tf,xr.extendWith=nf,Np(xr,xr),xr.add=nh,xr.attempt=Op,xr.camelCase=Zf,xr.capitalize=Yf,xr.ceil=rh,xr.clamp=Gf,xr.clone=Jc,xr.cloneDeep=tl,xr.cloneDeepWith=nl,xr.cloneWith=el,xr.conformsTo=rl,xr.deburr=Xf,xr.defaultTo=kp,xr.divide=ih,xr.endsWith=Kf,xr.eq=il,xr.escape=$f,xr.escapeRegExp=Qf,xr.every=rc,xr.find=oc,xr.findIndex=qs,xr.findKey=cf,xr.findLast=ac,xr.findLastIndex=Zs,xr.findLastKey=lf,xr.floor=oh,xr.forEach=lc,xr.forEachRight=fc,xr.forIn=ff,xr.forInRight=pf,xr.forOwn=hf,xr.forOwnRight=df,xr.get=gf,xr.gt=ol,xr.gte=al,xr.has=yf,xr.hasIn=bf,xr.head=Qs,xr.identity=Mp,xr.includes=hc,xr.indexOf=Js,xr.inRange=Wf,xr.invoke=wf,xr.isArguments=sl,xr.isArray=ul,xr.isArrayBuffer=cl,xr.isArrayLike=ll,xr.isArrayLikeObject=fl,xr.isBoolean=pl,xr.isBuffer=hl,xr.isDate=dl,xr.isElement=vl,xr.isEmpty=ml,xr.isEqual=gl,xr.isEqualWith=yl,xr.isError=bl,xr.isFinite=_l,xr.isFunction=xl,xr.isInteger=wl,xr.isLength=Ol,xr.isMap=jl,xr.isMatch=Al,xr.isMatchWith=kl,xr.isNaN=Cl,xr.isNative=Tl,xr.isNil=Pl,xr.isNull=Ml,xr.isNumber=Il,xr.isObject=El,xr.isObjectLike=Sl,xr.isPlainObject=Rl,xr.isRegExp=Ll,xr.isSafeInteger=Dl,xr.isSet=Nl,xr.isString=Fl,xr.isSymbol=zl,xr.isTypedArray=Bl,xr.isUndefined=Ul,xr.isWeakMap=Vl,xr.isWeakSet=Hl,xr.join=iu,xr.kebabCase=Jf,xr.last=ou,xr.lastIndexOf=au,xr.lowerCase=ep,xr.lowerFirst=tp,xr.lt=Gl,xr.lte=Wl,xr.max=ah,xr.maxBy=sh,xr.mean=uh,xr.meanBy=ch,xr.min=lh,xr.minBy=fh,xr.stubArray=Yp,xr.stubFalse=Xp,xr.stubObject=Kp,xr.stubString=$p,xr.stubTrue=Qp,xr.multiply=ph,xr.nth=su,xr.noConflict=Fp,xr.noop=zp,xr.now=kc,xr.pad=np,xr.padEnd=rp,xr.padStart=ip,xr.parseInt=op,xr.random=qf,xr.reduce=bc,xr.reduceRight=_c,xr.repeat=ap,xr.replace=sp,xr.result=If,xr.round=hh,xr.runInContext=e,xr.sample=wc,xr.size=Sc,xr.snakeCase=up,xr.some=jc,xr.sortedIndex=mu,xr.sortedIndexBy=gu,xr.sortedIndexOf=yu,xr.sortedLastIndex=bu,xr.sortedLastIndexBy=_u,xr.sortedLastIndexOf=xu,xr.startCase=lp,xr.startsWith=fp,xr.subtract=dh,xr.sum=vh,xr.sumBy=mh,xr.template=pp,xr.times=Jp,xr.toFinite=Zl,xr.toInteger=Yl,xr.toLength=Xl,xr.toLower=hp,xr.toNumber=Kl,xr.toSafeInteger=Ql,xr.toString=Jl,xr.toUpper=dp,xr.trim=vp,xr.trimEnd=mp,xr.trimStart=gp,xr.truncate=yp,xr.unescape=bp,xr.uniqueId=th,xr.upperCase=_p,xr.upperFirst=xp,xr.each=lc,xr.eachRight=fc,xr.first=Qs,Np(xr,function(){var e={};return Mi(xr,(function(t,n){ft.call(xr.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),xr.VERSION=a,wn(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){xr[e].placeholder=xr})),wn(["drop","take"],(function(e,t){Ar.prototype[e]=function(n){n=n===o?1:Bt(Yl(n),0);var r=this.__filtered__&&!t?new Ar(this):this.clone();return r.__filtered__?r.__takeCount__=Ut(n,r.__takeCount__):r.__views__.push({size:Ut(n,B),type:e+(r.__dir__<0?"Right":"")}),r},Ar.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),wn(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=n==I||n==L;Ar.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ga(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),wn(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Ar.prototype[e]=function(){return this[n](1).value()[0]}})),wn(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Ar.prototype[e]=function(){return this.__filtered__?new Ar(this):this[n](1)}})),Ar.prototype.compact=function(){return this.filter(Mp)},Ar.prototype.find=function(e){return this.filter(e).head()},Ar.prototype.findLast=function(e){return this.reverse().find(e)},Ar.prototype.invokeMap=xo((function(e,t){return"function"==typeof e?new Ar(this):this.map((function(n){return Hi(n,e,t)}))})),Ar.prototype.reject=function(e){return this.filter(Uc(Ga(e)))},Ar.prototype.slice=function(e,t){e=Yl(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Ar(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==o&&(t=Yl(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},Ar.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ar.prototype.toArray=function(){return this.take(B)},Mi(Ar.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=xr[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);i&&(xr.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,u=t instanceof Ar,c=s[0],l=u||ul(t),f=function(e){var t=i.apply(xr,Cn([e],s));return r&&p?t[0]:t};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var p=this.__chain__,h=!!this.__actions__.length,d=a&&!p,v=u&&!h;if(!a&&l){t=v?t:new Ar(this);var m=e.apply(t,s);return m.__actions__.push({func:Zu,args:[f],thisArg:o}),new jr(m,p)}return d&&v?e.apply(this,s):(m=this.thru(f),d?r?m.value()[0]:m.value():m)})})),wn(["pop","push","shift","sort","splice","unshift"],(function(e){var t=at[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);xr.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(ul(i)?i:[],e)}return this[n]((function(n){return t.apply(ul(n)?n:[],e)}))}})),Mi(Ar.prototype,(function(e,t){var n=xr[t];if(n){var r=n.name+"";ft.call(cn,r)||(cn[r]=[]),cn[r].push({name:t,func:n})}})),cn[ba(o,_).name]=[{name:"wrapper",func:o}],Ar.prototype.clone=kr,Ar.prototype.reverse=Cr,Ar.prototype.value=Tr,xr.prototype.at=Yu,xr.prototype.chain=Xu,xr.prototype.commit=Ku,xr.prototype.next=$u,xr.prototype.plant=Ju,xr.prototype.reverse=ec,xr.prototype.toJSON=xr.prototype.valueOf=xr.prototype.value=tc,xr.prototype.first=xr.prototype.head,At&&(xr.prototype[At]=Qu),xr},Er=Or();un._=Er,i=function(){return Er}.call(t,n,t,r),i===o||(r.exports=i)}).call(this)}).call(this,n("IyRk"),n("hOG+")(e))},Lw8S:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},"M/Q6":function(e,t,n){"use strict";var r=n("q1tI"),i=n.n(r);n("x8cr");function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}t["a"]=function(e){return i.a.createElement("div",o({className:"__dumi-default-alert"},e))}},MIOZ:function(e,t){function n(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),t&&o.length===t)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},MMmD:function(e,t,n){var r=n("lSCD"),i=n("shjB");function o(e){return null!=e&&i(e.length)&&!r(e)}e.exports=o},MNnm:function(e,t,n){"use strict";function r(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}n.d(t,"a",(function(){return r}))},MON2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STACK_OVERFLOW=t.CIRCULAR_DEPENDENCY_IN_FACTORY=t.POST_CONSTRUCT_ERROR=t.MULTIPLE_POST_CONSTRUCT_METHODS=t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=t.ARGUMENTS_LENGTH_MISMATCH=t.INVALID_DECORATOR_OPERATION=t.INVALID_TO_SELF_VALUE=t.INVALID_FUNCTION_BINDING=t.INVALID_MIDDLEWARE_RETURN=t.NO_MORE_SNAPSHOTS_AVAILABLE=t.INVALID_BINDING_TYPE=t.NOT_IMPLEMENTED=t.CIRCULAR_DEPENDENCY=t.UNDEFINED_INJECT_ANNOTATION=t.MISSING_INJECT_ANNOTATION=t.MISSING_INJECTABLE_ANNOTATION=t.NOT_REGISTERED=t.CANNOT_UNBIND=t.AMBIGUOUS_MATCH=t.KEY_NOT_FOUND=t.NULL_ARGUMENT=t.DUPLICATED_METADATA=t.DUPLICATED_INJECTABLE_DECORATOR=void 0,t.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",t.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",t.NULL_ARGUMENT="NULL argument",t.KEY_NOT_FOUND="Key Not Found",t.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",t.CANNOT_UNBIND="Could not unbind serviceIdentifier:",t.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",t.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",t.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var r=function(e){return"@inject called with undefined this could mean that the class "+e+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};t.UNDEFINED_INJECT_ANNOTATION=r,t.CIRCULAR_DEPENDENCY="Circular dependency found:",t.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",t.INVALID_BINDING_TYPE="Invalid binding type:",t.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",t.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",t.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",t.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",t.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+e[0]+" must be >= than the number of constructor arguments of its base class."};t.ARGUMENTS_LENGTH_MISMATCH=i,t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",t.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"@postConstruct error in class "+e[0]+": "+e[1]};t.POST_CONSTRUCT_ERROR=o;var a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"It looks like there is a circular dependency in one of the '"+e[0]+"' bindings. Please investigate bindings withservice identifier '"+e[1]+"'."};t.CIRCULAR_DEPENDENCY_IN_FACTORY=a,t.STACK_OVERFLOW="Maximum call stack size exceeded"},MgzW:function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function s(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map((function(e){return t[e]}));if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(o){return!1}}e.exports=s()?Object.assign:function(e,t){for(var n,s,u=a(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]),n)i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var f=0;f<s.length;f++)o.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},Mpie:function(e,t,n){},MrPd:function(e,t,n){var r=n("hypo"),i=n("ljhN"),o=Object.prototype,a=o.hasOwnProperty;function s(e,t,n){var o=e[t];a.call(e,t)&&i(o,n)&&(void 0!==n||t in e)||r(e,t,n)}e.exports=s},MvSz:function(e,t,n){var r=n("LXxW"),i=n("0ycA"),o=Object.prototype,a=o.propertyIsEnumerable,s=Object.getOwnPropertySymbols,u=s?function(e){return null==e?[]:(e=Object(e),r(s(e),(function(t){return a.call(e,t)})))}:i;e.exports=u},"N+g0":function(e,t,n){var r=n("g6v/"),i=n("m/L8"),o=n("glrk"),a=n("33Wh");e.exports=r?Object.defineProperties:function(e,t){o(e);var n,r=a(t),s=r.length,u=0;while(s>u)i.f(e,n=r[u++],t[n]);return e}},"NC/Y":function(e,t,n){var r=n("0GbY");e.exports=r("navigator","userAgent")||""},NKxu:function(e,t,n){var r=n("lSCD"),i=n("E2jh"),o=n("GoyQ"),a=n("3Fdi"),s=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,f=c.toString,p=l.hasOwnProperty,h=RegExp("^"+f.call(p).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(e){if(!o(e)||i(e))return!1;var t=r(e)?h:u;return t.test(a(e))}e.exports=d},NV22:function(e,t,n){var r=n("I+eb"),i=n("glrk"),o=n("4oU/"),a=n("ntOU"),s=n("afO8"),u="Seeded Random",c=u+" Generator",l=s.set,f=s.getterFor(c),p='Math.seededPRNG() argument should have a "seed" field with a finite value.',h=a((function(e){l(this,{type:c,seed:e%2147483647})}),u,(function(){var e=f(this),t=e.seed=(1103515245*e.seed+12345)%2147483647;return{value:(1073741823&t)/1073741823,done:!1}}));r({target:"Math",stat:!0,forced:!0},{seededPRNG:function(e){var t=i(e).seed;if(!o(t))throw TypeError(p);return new h(t)}})},NaFW:function(e,t,n){var r=n("9d/t"),i=n("P4y1"),o=n("tiKp"),a=o("iterator");e.exports=function(e){if(void 0!=e)return e[a]||e["@@iterator"]||i[r(e)]}},Npjl:function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},NqR8:function(e,t,n){var r=n("I+eb");r({target:"Math",stat:!0},{isubh:function(e,t,n,r){var i=e>>>0,o=t>>>0,a=n>>>0;return o-(r>>>0)-((~i&a|~(i^a)&i-a>>>0)>>>31)|0}})},NykK:function(e,t,n){var r=n("nmnc"),i=n("AP2z"),o=n("KfNM"),a="[object Null]",s="[object Undefined]",u=r?r.toStringTag:void 0;function c(e){return null==e?void 0===e?s:a:u&&u in Object(e)?i(e):o(e)}e.exports=c},O0oS:function(e,t,n){var r=n("Cwc5"),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=i},O741:function(e,t,n){var r=n("hh1v");e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},ODXe:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("DSFK");function i(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}var o=n("BsWD"),a=n("PYwp");function s(e,t){return Object(r["a"])(e)||i(e,t)||Object(o["a"])(e,t)||Object(a["a"])()}},"Of+w":function(e,t,n){var r=n("Cwc5"),i=n("Kz5y"),o=r(i,"WeakMap");e.exports=o},P4y1:function(e,t){e.exports={}},P940:function(e,t,n){"use strict";e.exports=function(){var e=arguments.length,t=new Array(e);while(e--)t[e]=arguments[e];return new this(t)}},PF2M:function(e,t,n){"use strict";var r=n("67WC"),i=n("UMSQ"),o=n("GC2F"),a=n("ewvW"),s=n("0Dky"),u=r.aTypedArray,c=r.exportTypedArrayMethod,l=s((function(){new Int8Array(1).set({})}));c("set",(function(e){u(this);var t=o(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=a(e),s=i(r.length),c=0;if(s+t>n)throw RangeError("Wrong length");while(c<s)this[t+c]=r[c++]}),l)},PKPk:function(e,t,n){"use strict";var r=n("ZUd8").charAt,i=n("afO8"),o=n("fdAy"),a="String Iterator",s=i.set,u=i.getterFor(a);o(String,"String",(function(e){s(this,{type:a,string:String(e),index:0})}),(function(){var e,t=u(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},PYwp:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,"a",(function(){return r}))},PpiC:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function i(e,t){if(null==e)return{};var n,i,o=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}n.d(t,"a",(function(){return i}))},PrET:function(e,t,n){"use strict";var r=n("D3zA"),i=n("AM7I"),o=i("%Function.prototype.apply%"),a=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||r.call(a,o),u=i("%Object.getOwnPropertyDescriptor%",!0),c=i("%Object.defineProperty%",!0),l=i("%Math.max%");if(c)try{c({},"a",{value:1})}catch(p){c=null}e.exports=function(e){var t=s(r,a,arguments);if(u&&c){var n=u(t,"length");n.configurable&&c(t,"length",{value:1+l(0,e.length-(arguments.length-1))})}return t};var f=function(){return s(r,o,arguments)};c?c(e.exports,"apply",{value:f}):e.exports.apply=f},Pw59:function(e,t,n){"use strict";var r=n("q1tI"),i=Object(r["createContext"])({});t["a"]=i},Q1l4:function(e,t){function n(e,t){var n=-1,r=e.length;t||(t=Array(r));while(++n<r)t[n]=e[n];return t}e.exports=n},Q2Ig:function(e,t,n){t.nextTick=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),setTimeout((function(){e.apply(null,t)}),0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,r="/";t.cwd=function(){return r},t.chdir=function(t){e||(e=n("33yf")),r=e.resolve(t,r)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},Q7Pz:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("Sssf"),s=n("i4U9"),u=n("ImZN");r({target:"Map",proto:!0,real:!0,forced:i},{includes:function(e){return u(a(o(this)),(function(t,n){if(s(n,e))return u.stop()}),void 0,!0,!0).stopped}})},Q9SF:function(e,t){function n(e){if(Array.isArray(e))return e}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},QCnb:function(e,t,n){"use strict";e.exports=n("+wdc")},QFcT:function(e,t,n){var r=n("I+eb"),i=Math.hypot,o=Math.abs,a=Math.sqrt,s=!!i&&i(1/0,NaN)!==1/0;r({target:"Math",stat:!0,forced:s},{hypot:function(e,t){var n,r,i=0,s=0,u=arguments.length,c=0;while(s<u)n=o(arguments[s++]),c<n?(r=c/n,i=i*r*r+1,c=n):n>0?(r=n/c,i+=r*r):i+=n;return c===1/0?1/0:c*a(i)}})},QGkA:function(e,t,n){var r=n("RNIs");r("flat")},QGke:function(e,t,n){var r=n("z01/")["default"];function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports["default"]=e.exports;var t={},n=Object.prototype,o=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),a=new j(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return k()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=p(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}t.wrap=f;var h={};function d(){}function v(){}function m(){}var g={};l(g,s,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(A([])));b&&b!==n&&o.call(b,s)&&(g=b);var _=m.prototype=d.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(i,a,s,u){var c=p(e[i],e,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator["return"]&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=p(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function A(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:k}}function k(){return{value:void 0,done:!0}}return v.prototype=m,l(_,"constructor",m),l(m,"constructor",v),v.displayName=l(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},x(w.prototype),l(w.prototype,u,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new w(f(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(_),l(_,c,"Generator"),l(_,s,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=A,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},QIpd:function(e,t,n){var r=n("xrYK");e.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},QSc6:function(e,t,n){"use strict";var r=n("VAJa"),i=n("0jNN"),o=n("sxOR"),a=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},u=Array.isArray,c=Array.prototype.push,l=function(e,t){c.apply(e,u(t)?t:[t])},f=Date.prototype.toISOString,p=o["default"],h={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,format:p,formatter:o.formatters[p],indices:!1,serializeDate:function(e){return f.call(e)},skipNulls:!1,strictNullHandling:!1},d=function(e){return"string"===typeof e||"number"===typeof e||"boolean"===typeof e||"symbol"===typeof e||"bigint"===typeof e},v={},m=function e(t,n,o,a,s,c,f,p,m,g,y,b,_,x,w,O){var E=t,S=O,j=0,A=!1;while(void 0!==(S=S.get(v))&&!A){var k=S.get(t);if(j+=1,"undefined"!==typeof k){if(k===j)throw new RangeError("Cyclic object value");A=!0}"undefined"===typeof S.get(v)&&(j=0)}if("function"===typeof p?E=p(n,E):E instanceof Date?E=y(E):"comma"===o&&u(E)&&(E=i.maybeMap(E,(function(e){return e instanceof Date?y(e):e}))),null===E){if(s)return f&&!x?f(n,h.encoder,w,"key",b):n;E=""}if(d(E)||i.isBuffer(E)){if(f){var C=x?n:f(n,h.encoder,w,"key",b);return[_(C)+"="+_(f(E,h.encoder,w,"value",b))]}return[_(n)+"="+_(String(E))]}var T,M=[];if("undefined"===typeof E)return M;if("comma"===o&&u(E))x&&f&&(E=i.maybeMap(E,f)),T=[{value:E.length>0?E.join(",")||null:void 0}];else if(u(p))T=p;else{var P=Object.keys(E);T=m?P.sort(m):P}for(var I=a&&u(E)&&1===E.length?n+"[]":n,R=0;R<T.length;++R){var L=T[R],D="object"===typeof L&&"undefined"!==typeof L.value?L.value:E[L];if(!c||null!==D){var N=u(E)?"function"===typeof o?o(I,L):I:I+(g?"."+L:"["+L+"]");O.set(t,j);var F=r();F.set(v,O),l(M,e(D,N,o,a,s,c,"comma"===o&&x&&u(E)?null:f,p,m,g,y,b,_,x,w,F))}}return M},g=function(e){if(!e)return h;if(null!==e.encoder&&"undefined"!==typeof e.encoder&&"function"!==typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||h.charset;if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=o["default"];if("undefined"!==typeof e.format){if(!a.call(o.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=o.formatters[n],i=h.filter;return("function"===typeof e.filter||u(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"===typeof e.addQueryPrefix?e.addQueryPrefix:h.addQueryPrefix,allowDots:"undefined"===typeof e.allowDots?h.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:h.charsetSentinel,delimiter:"undefined"===typeof e.delimiter?h.delimiter:e.delimiter,encode:"boolean"===typeof e.encode?e.encode:h.encode,encoder:"function"===typeof e.encoder?e.encoder:h.encoder,encodeValuesOnly:"boolean"===typeof e.encodeValuesOnly?e.encodeValuesOnly:h.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:"function"===typeof e.serializeDate?e.serializeDate:h.serializeDate,skipNulls:"boolean"===typeof e.skipNulls?e.skipNulls:h.skipNulls,sort:"function"===typeof e.sort?e.sort:null,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:h.strictNullHandling}};e.exports=function(e,t){var n,i,o=e,a=g(t);"function"===typeof a.filter?(i=a.filter,o=i("",o)):u(a.filter)&&(i=a.filter,n=i);var c,f=[];if("object"!==typeof o||null===o)return"";c=t&&t.arrayFormat in s?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var p=s[c];if(t&&"commaRoundTrip"in t&&"boolean"!==typeof t.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var h="comma"===p&&t&&t.commaRoundTrip;n||(n=Object.keys(o)),a.sort&&n.sort(a.sort);for(var d=r(),v=0;v<n.length;++v){var y=n[v];a.skipNulls&&null===o[y]||l(f,m(o[y],y,p,h,a.strictNullHandling,a.skipNulls,a.encode?a.encoder:null,a.filter,a.sort,a.allowDots,a.serializeDate,a.format,a.formatter,a.encodeValuesOnly,a.charset,d))}var b=f.join(a.delimiter),_=!0===a.addQueryPrefix?"?":"";return a.charsetSentinel&&("iso-8859-1"===a.charset?_+="utf8=%26%2310003%3B&":_+="utf8=%E2%9C%93&"),b.length>0?_+b:""}},QcOe:function(e,t,n){var r=n("GoyQ"),i=n("6sVZ"),o=n("7Ix3"),a=Object.prototype,s=a.hasOwnProperty;function u(e){if(!r(e))return o(e);var t=i(e),n=[];for(var a in e)("constructor"!=a||!t&&s.call(e,a))&&n.push(a);return n}e.exports=u},QkVE:function(e,t,n){var r=n("EpBk");function i(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}e.exports=i},QkVN:function(e,t,n){var r=n("+Qka"),i=n("LsHQ"),o=i((function(e,t,n){r(e,t,n)}));e.exports=o},Qo3T:function(e,t,n){"use strict";(function(e){var r;n.d(t,"a",(function(){return i}));var i,o=function(){return r||(r="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{})};r=o(),i="undefined"===typeof window?{devicePixelRatio:1,navigator:{userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36",browserLanguage:"zh-CN",language:"zh-CN",platform:""},location:"",document:{documentElement:{style:{}},createEvent:function(){return!0},getElementById:function(e){return!0},createElement:function(){return{className:"",classList:{add:function(){return""}}}},createElementNS:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},querySelector:function(){return!1}},performance:{mark:function(e){return null},clearMeasures:function(e){return null},clearMarks:function(e){return null},measure:function(e,t,n){return{duration:0}},now:function(){return(new Date).getTime()}},Blob:"",dispatchEvent:function(e){return!0},Event:function(e,t){return!0},createElement:function(){return!0},createElementNS:function(){return!0},XMLHttpRequest:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},requestAnimationFrame:function(){return!0},cancelAnimationFrame:function(){return!0},clearTimeout:function(){return!0}}:window}).call(this,n("IyRk"))},Qo9l:function(e,t,n){var r=n("2oRo");e.exports=r},QoRX:function(e,t){function n(e,t){var n=-1,r=null==e?0:e.length;while(++n<r)if(t(e[n],n,e))return!0;return!1}e.exports=n},QqLw:function(e,t,n){var r=n("tadb"),i=n("ebwN"),o=n("HOxn"),a=n("yGk4"),s=n("Of+w"),u=n("NykK"),c=n("3Fdi"),l="[object Map]",f="[object Object]",p="[object Promise]",h="[object Set]",d="[object WeakMap]",v="[object DataView]",m=c(r),g=c(i),y=c(o),b=c(a),_=c(s),x=u;(r&&x(new r(new ArrayBuffer(1)))!=v||i&&x(new i)!=l||o&&x(o.resolve())!=p||a&&x(new a)!=h||s&&x(new s)!=d)&&(x=function(e){var t=u(e),n=t==f?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case m:return v;case g:return l;case y:return p;case b:return h;case _:return d}return t}),e.exports=x},Qyje:function(e,t,n){"use strict";var r=n("QSc6"),i=n("nmq7"),o=n("sxOR");e.exports={formats:o,parse:i,stringify:r}},R1ph:function(e,t,n){"use strict";n.r(t);var r=n("/7QA"),i=(n("q1tI"),n("nKUr"));t["default"]=()=>Object(i["jsx"])(r["a"],{map:{center:[110.19382669582967,50.258134],pitch:0,style:"dark",zoom:1},style:{height:"400px",position:"relative",background:"#011030"},children:Object(i["jsx"])(r["f"],{source:{data:"https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*8SUaRr7bxNsAAAAAAAAAAABkARQnAQ",parser:{type:"image",extent:[113.1277263548,32.3464238863,118.1365790452,36.4786759137]}}})})},"R3/m":function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("A2ZE"),s=n("Sssf"),u=n("ImZN");r({target:"Map",proto:!0,real:!0,forced:i},{every:function(e){var t=o(this),n=s(t),r=a(e,arguments.length>1?arguments[1]:void 0,3);return!u(n,(function(e,n){if(!r(n,e,t))return u.stop()}),void 0,!0,!0).stopped}})},R5yR:function(e,t,n){var r=n("9xmf"),i=n("rhT+"),o=n("mGKP"),a=n("XWE6");function s(e){return r(e)||i(e)||o(e)||a()}e.exports=s,e.exports.__esModule=!0,e.exports["default"]=e.exports},RK3t:function(e,t,n){var r=n("0Dky"),i=n("xrYK"),o="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},RN6c:function(e,t,n){var r=n("2oRo");e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},RNIs:function(e,t,n){var r=n("tiKp"),i=n("fHMY"),o=n("m/L8"),a=r("unscopables"),s=Array.prototype;void 0==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},ROdP:function(e,t,n){var r=n("hh1v"),i=n("xrYK"),o=n("tiKp"),a=o("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==i(e))}},"RR/i":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typeConstraint=t.namedConstraint=t.taggedConstraint=t.traverseAncerstors=void 0;var r=n("xfSm"),i=n("GXnB"),o=function e(t,n){var r=t.parentRequest;return null!==r&&(!!n(r)||e(r,n))};t.traverseAncerstors=o;var a=function(e){return function(t){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(e)(t)};return n.metaData=new i.Metadata(e,t),n}};t.taggedConstraint=a;var s=a(r.NAMED_TAG);t.namedConstraint=s;var u=function(e){return function(t){var n=null;if(null!==t){if(n=t.bindings[0],"string"===typeof e){var r=n.serviceIdentifier;return r===e}var i=t.bindings[0].implementationType;return e===i}return!1}};t.typeConstraint=u},RZMt:function(e,t,n){},Rm1S:function(e,t,n){"use strict";var r=n("14Sl"),i=n("glrk"),o=n("UMSQ"),a=n("HYAF"),s=n("iqWW"),u=n("FMNM");r("match",1,(function(e,t,n){return[function(t){var n=a(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var a=i(e),c=String(this);if(!a.global)return u(a,c);var l=a.unicode;a.lastIndex=0;var f,p=[],h=0;while(null!==(f=u(a,c))){var d=String(f[0]);p[h]=d,""===d&&(a.lastIndex=s(c,o(a.lastIndex),l)),h++}return 0===h?null:p}]}))},SEBh:function(e,t,n){var r=n("glrk"),i=n("HAuM"),o=n("tiKp"),a=o("species");e.exports=function(e,t){var n,o=r(e).constructor;return void 0===o||void 0==(n=r(o)[a])?t:i(n)}},SL6q:function(e,t,n){var r=n("I+eb"),i=n("voyM"),o=n("vo4V");r({target:"Math",stat:!0},{fscale:function(e,t,n,r,a){return o(i(e,t,n,r,a))}})},STAE:function(e,t,n){var r=n("0Dky");e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},SUU4:function(e,t,n){(function(t,r){e.exports=r(n("szb8"))})(0,(function(e){"use strict";var t=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray},n=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;++r)e[n[r]]=t[n[r]];return e},r="\n";function i(e){return"undefined"!==typeof atob?atob(e):"base64:"+e}function o(e){var t=new Error("(regl) "+e);throw console.error(t),t}function a(e,t){e||o(t)}function s(e){return e?": "+e:""}function u(e,t,n){e in t||o("unknown parameter ("+e+")"+s(n)+". possible values: "+Object.keys(t).join())}function c(e,n){t(e)||o("invalid parameter type"+s(n)+". must be a typed array")}function l(e,t){switch(t){case"number":return"number"===typeof e;case"object":return"object"===typeof e;case"string":return"string"===typeof e;case"boolean":return"boolean"===typeof e;case"function":return"function"===typeof e;case"undefined":return"undefined"===typeof e;case"symbol":return"symbol"===typeof e}}function f(e,t,n){l(e,t)||o("invalid parameter type"+s(n)+". expected "+t+", got "+typeof e)}function p(e,t){e>=0&&(0|e)===e||o("invalid parameter type, ("+e+")"+s(t)+". must be a nonnegative integer")}function h(e,t,n){t.indexOf(e)<0&&o("invalid value"+s(n)+". must be one of: "+t)}var d=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function v(e){Object.keys(e).forEach((function(e){d.indexOf(e)<0&&o('invalid regl constructor argument "'+e+'". must be one of '+d)}))}function m(e,t){e+="";while(e.length<t)e=" "+e;return e}function g(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function y(e,t){this.number=e,this.line=t,this.errors=[]}function b(e,t,n){this.file=e,this.line=t,this.message=n}function _(){var e=new Error,t=(e.stack||e).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(t);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(t);return r?r[1]:"unknown"}function x(){var e=new Error,t=(e.stack||e).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(t);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(t);return r?r[1]:"unknown"}function w(e,t){var n=e.split("\n"),r=1,o=0,a={unknown:new g,0:new g};a.unknown.name=a[0].name=t||_(),a.unknown.lines.push(new y(0,""));for(var s=0;s<n.length;++s){var u=n[s],c=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(u);if(c)switch(c[1]){case"line":var l=/(\d+)(\s+\d+)?/.exec(c[2]);l&&(r=0|l[1],l[2]&&(o=0|l[2],o in a||(a[o]=new g)));break;case"define":var f=/SHADER_NAME(_B64)?\s+(.*)$/.exec(c[2]);f&&(a[o].name=f[1]?i(f[2]):f[2]);break}a[o].lines.push(new y(r++,u))}return Object.keys(a).forEach((function(e){var t=a[e];t.lines.forEach((function(e){t.index[e.number]=e}))})),a}function O(e){var t=[];return e.split("\n").forEach((function(e){if(!(e.length<5)){var n=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(e);n?t.push(new b(0|n[1],0|n[2],n[3].trim())):e.length>0&&t.push(new b("unknown",0,e))}})),t}function E(e,t){t.forEach((function(t){var n=e[t.file];if(n){var r=n.index[t.line];if(r)return r.errors.push(t),void(n.hasErrors=!0)}e.unknown.hasErrors=!0,e.unknown.lines[0].errors.push(t)}))}function S(e,t,n,i,o){if(!e.getShaderParameter(t,e.COMPILE_STATUS)){var s=e.getShaderInfoLog(t),u=i===e.FRAGMENT_SHADER?"fragment":"vertex";P(n,"string",u+" shader source must be a string",o);var c=w(n,o),l=O(s);E(c,l),Object.keys(c).forEach((function(e){var t=c[e];if(t.hasErrors){var n=[""],i=[""];o("file number "+e+": "+t.name+"\n","color:red;text-decoration:underline;font-weight:bold"),t.lines.forEach((function(e){if(e.errors.length>0){o(m(e.number,4)+"|  ","background-color:yellow; font-weight:bold"),o(e.line+r,"color:red; background-color:yellow; font-weight:bold");var t=0;e.errors.forEach((function(n){var i=n.message,a=/^\s*'(.*)'\s*:\s*(.*)$/.exec(i);if(a){var s=a[1];switch(i=a[2],s){case"assign":s="=";break}t=Math.max(e.line.indexOf(s,t),0)}else t=0;o(m("| ",6)),o(m("^^^",t+3)+r,"font-weight:bold"),o(m("| ",6)),o(i+r,"font-weight:bold")})),o(m("| ",6)+r)}else o(m(e.number,4)+"|  "),o(e.line+r,"color:red")})),"undefined"===typeof document||window.chrome?console.log(n.join("")):(i[0]=n.join("%c"),console.log.apply(console,i))}function o(e,t){n.push(e),i.push(t||"")}})),a.raise("Error compiling "+u+" shader, "+c[0].name)}}function j(e,t,n,i,o){if(!e.getProgramParameter(t,e.LINK_STATUS)){var s=e.getProgramInfoLog(t),u=w(n,o),c=w(i,o),l='Error linking program with vertex shader, "'+c[0].name+'", and fragment shader "'+u[0].name+'"';"undefined"!==typeof document?console.log("%c"+l+r+"%c"+s,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(l+r+s),a.raise(l)}}function A(e){e._commandRef=_()}function k(e,t,n,r){function i(e){return e?r.id(e):0}function o(e,t){Object.keys(t).forEach((function(t){e[r.id(t)]=!0}))}A(e),e._fragId=i(e["static"].frag),e._vertId=i(e["static"].vert);var a=e._uniformSet={};o(a,t["static"]),o(a,t.dynamic);var s=e._attributeSet={};o(s,n["static"]),o(s,n.dynamic),e._hasCount="count"in e["static"]||"count"in e.dynamic||"elements"in e["static"]||"elements"in e.dynamic}function C(e,t){var n=x();o(e+" in command "+(t||_())+("unknown"===n?"":" called from "+n))}function T(e,t,n){e||C(t,n||_())}function M(e,t,n,r){e in t||C("unknown parameter ("+e+")"+s(n)+". possible values: "+Object.keys(t).join(),r||_())}function P(e,t,n,r){l(e,t)||C("invalid parameter type"+s(n)+". expected "+t+", got "+typeof e,r||_())}function I(e){e()}function R(e,t,n){e.texture?h(e.texture._texture.internalformat,t,"unsupported texture format for attachment"):h(e.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")}var L=33071,D=9728,N=9984,F=9985,z=9986,B=9987,U=5120,V=5121,H=5122,G=5123,W=5124,q=5125,Z=5126,Y=32819,X=32820,K=33635,$=34042,Q=36193,J={};function ee(e,t){return e===X||e===Y||e===K?2:e===$?4:J[e]*t}function te(e){return!(e&e-1)&&!!e}function ne(e,t,n){var r,i=t.width,o=t.height,s=t.channels;a(i>0&&i<=n.maxTextureSize&&o>0&&o<=n.maxTextureSize,"invalid texture shape"),e.wrapS===L&&e.wrapT===L||a(te(i)&&te(o),"incompatible wrap mode for texture, both width and height must be power of 2"),1===t.mipmask?1!==i&&1!==o&&a(e.minFilter!==N&&e.minFilter!==z&&e.minFilter!==F&&e.minFilter!==B,"min filter requires mipmap"):(a(te(i)&&te(o),"texture must be a square power of 2 to support mipmapping"),a(t.mipmask===(i<<1)-1,"missing or incomplete mipmap data")),t.type===Z&&(n.extensions.indexOf("oes_texture_float_linear")<0&&a(e.minFilter===D&&e.magFilter===D,"filter not supported, must enable oes_texture_float_linear"),a(!e.genMipmaps,"mipmap generation not supported with float textures"));var u=t.images;for(r=0;r<16;++r)if(u[r]){var c=i>>r,l=o>>r;a(t.mipmask&1<<r,"missing mipmap data");var f=u[r];if(a(f.width===c&&f.height===l,"invalid shape for mip images"),a(f.format===t.format&&f.internalformat===t.internalformat&&f.type===t.type,"incompatible type for mip image"),f.compressed);else if(f.data){var p=Math.ceil(ee(f.type,s)*c/f.unpackAlignment)*f.unpackAlignment;a(f.data.byteLength===p*l,"invalid data for image, buffer size is inconsistent with image format")}else f.element||f.copy}else e.genMipmaps||a(0===(t.mipmask&1<<r),"extra mipmap data");t.compressed&&a(!e.genMipmaps,"mipmap generation for compressed images not supported")}function re(e,t,n,r){var i=e.width,o=e.height,s=e.channels;a(i>0&&i<=r.maxTextureSize&&o>0&&o<=r.maxTextureSize,"invalid texture shape"),a(i===o,"cube map must be square"),a(t.wrapS===L&&t.wrapT===L,"wrap mode not supported by cube map");for(var u=0;u<n.length;++u){var c=n[u];a(c.width===i&&c.height===o,"inconsistent cube map face shape"),t.genMipmaps&&(a(!c.compressed,"can not generate mipmap for compressed textures"),a(1===c.mipmask,"can not specify mipmaps and generate mipmaps"));for(var l=c.images,f=0;f<16;++f){var p=l[f];if(p){var h=i>>f,d=o>>f;a(c.mipmask&1<<f,"missing mipmap data"),a(p.width===h&&p.height===d,"invalid shape for mip images"),a(p.format===e.format&&p.internalformat===e.internalformat&&p.type===e.type,"incompatible type for mip image"),p.compressed||(p.data?a(p.data.byteLength===h*d*Math.max(ee(p.type,s),p.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):p.element||p.copy)}}}}J[U]=J[V]=1,J[H]=J[G]=J[Q]=J[K]=J[Y]=J[X]=2,J[W]=J[q]=J[Z]=J[$]=4;var ie=n(a,{optional:I,raise:o,commandRaise:C,command:T,parameter:u,commandParameter:M,constructor:v,type:f,commandType:P,isTypedArray:c,nni:p,oneOf:h,shaderError:S,linkError:j,callSite:x,saveCommandRef:A,saveDrawInfo:k,framebufferFormat:R,guessCommand:_,texture2D:ne,textureCube:re}),oe=0,ae=0,se=5,ue=6;function ce(e,t){this.id=oe++,this.type=e,this.data=t}function le(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function fe(e){if(0===e.length)return[];var t=e.charAt(0),n=e.charAt(e.length-1);if(e.length>1&&t===n&&('"'===t||"'"===t))return['"'+le(e.substr(1,e.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e);if(r)return fe(e.substr(0,r.index)).concat(fe(r[1])).concat(fe(e.substr(r.index+r[0].length)));var i=e.split(".");if(1===i.length)return['"'+le(e)+'"'];for(var o=[],a=0;a<i.length;++a)o=o.concat(fe(i[a]));return o}function pe(e){return"["+fe(e).join("][")+"]"}function he(e,t){return new ce(e,pe(t+""))}function de(e){return"function"===typeof e&&!e._reglType||e instanceof ce}function ve(e,t){return"function"===typeof e?new ce(ae,e):"number"===typeof e||"boolean"===typeof e?new ce(se,e):Array.isArray(e)?new ce(ue,e.map((function(e,n){return ve(e,t+"["+n+"]")}))):e instanceof ce?e:void ie(!1,"invalid option type in uniform "+t)}var me={DynamicVariable:ce,define:he,isDynamic:de,unbox:ve,accessor:pe},ge={next:"function"===typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"===typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},ye="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,be=ye?function(){return+new Date}:"undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function _e(){var e={"":0},t=[""];return{id:function(n){var r=e[n];return r||(r=e[n]=t.length,t.push(n),r)},str:function(e){return t[e]}}}function xe(e,t,r){var i,o=document.createElement("canvas");function a(){var t=window.innerWidth,n=window.innerHeight;if(e!==document.body){var i=o.getBoundingClientRect();t=i.right-i.left,n=i.bottom-i.top}o.width=r*t,o.height=r*n}function s(){i?i.disconnect():window.removeEventListener("resize",a),e.removeChild(o)}return n(o.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),e.appendChild(o),e===document.body&&(o.style.position="absolute",n(e.style,{margin:0,padding:0})),e!==document.body&&"function"===typeof ResizeObserver?(i=new ResizeObserver((function(){setTimeout(a)})),i.observe(e)):window.addEventListener("resize",a,!1),a(),{canvas:o,onDestroy:s}}function we(e,t){function n(n){try{return e.getContext(n,t)}catch(r){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}function Oe(e){return"string"===typeof e.nodeName&&"function"===typeof e.appendChild&&"function"===typeof e.getBoundingClientRect}function Ee(e){return"function"===typeof e.drawArrays||"function"===typeof e.drawElements}function Se(e){return"string"===typeof e?e.split():(ie(Array.isArray(e),"invalid extension array"),e)}function je(e){return"string"===typeof e?(ie("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(e)):e}function Ae(e){var t,n,r,i,o=e||{},a={},s=[],u=[],c="undefined"===typeof window?1:window.devicePixelRatio,l=!1,f=function(e){e&&ie.raise(e)},p=function(){};if("string"===typeof o?(ie("undefined"!==typeof document,"selector queries only supported in DOM environments"),t=document.querySelector(o),ie(t,"invalid query string for element")):"object"===typeof o?Oe(o)?t=o:Ee(o)?(i=o,r=i.canvas):(ie.constructor(o),"gl"in o?i=o.gl:"canvas"in o?r=je(o.canvas):"container"in o&&(n=je(o.container)),"attributes"in o&&(a=o.attributes,ie.type(a,"object","invalid context attributes")),"extensions"in o&&(s=Se(o.extensions)),"optionalExtensions"in o&&(u=Se(o.optionalExtensions)),"onDone"in o&&(ie.type(o.onDone,"function","invalid or missing onDone callback"),f=o.onDone),"profile"in o&&(l=!!o.profile),"pixelRatio"in o&&(c=+o.pixelRatio,ie(c>0,"invalid pixel ratio"))):ie.raise("invalid arguments to regl"),t&&("canvas"===t.nodeName.toLowerCase()?r=t:n=t),!i){if(!r){ie("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");var h=xe(n||document.body,f,c);if(!h)return null;r=h.canvas,p=h.onDestroy}void 0===a.premultipliedAlpha&&(a.premultipliedAlpha=!0),i=we(r,a)}return i?{gl:i,canvas:r,container:n,extensions:s,optionalExtensions:u,pixelRatio:c,profile:l,onDone:f,onDestroy:p}:(p(),f("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function ke(e,t){var n={};function r(e){ie.type(e,"string","extension name must be string");var t,r=e.toLowerCase();try{t=n[r]=i(e)}catch(o){}return!!t}function i(t){return e.getExtension(t)?e.getExtension(t):e.getExtension(t.toLowerCase())?e.getExtension(t.toLowerCase()):null}for(var o=0;o<t.extensions.length;++o){var a=t.extensions[o];if(!r(a))return t.onDestroy(),t.onDone('"'+a+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(e){if(n[e]&&!r(e))throw new Error("(regl): error restoring extension "+e)}))}}}function Ce(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=t(r);return n}var Te=5120,Me=5121,Pe=5122,Ie=5123,Re=5124,Le=5125,De=5126;function Ne(e){for(var t=16;t<=1<<28;t*=16)if(e<=t)return t;return 0}function Fe(e){var t,n;return t=(e>65535)<<4,e>>>=t,n=(e>255)<<3,e>>>=n,t|=n,n=(e>15)<<2,e>>>=n,t|=n,n=(e>3)<<1,e>>>=n,t|=n,t|e>>1}function ze(){var e=Ce(8,(function(){return[]}));function t(t){var n=Ne(t),r=e[Fe(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(t){e[Fe(t.byteLength)>>2].push(t)}function r(e,n){var r=null;switch(e){case Te:r=new Int8Array(t(n),0,n);break;case Me:r=new Uint8Array(t(n),0,n);break;case Pe:r=new Int16Array(t(2*n),0,n);break;case Ie:r=new Uint16Array(t(2*n),0,n);break;case Re:r=new Int32Array(t(4*n),0,n);break;case Le:r=new Uint32Array(t(4*n),0,n);break;case De:r=new Float32Array(t(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r}function i(e){n(e.buffer)}return{alloc:t,free:n,allocType:r,freeType:i}}var Be=ze();Be.zero=ze();var Ue=3408,Ve=3410,He=3411,Ge=3412,We=3413,qe=3414,Ze=3415,Ye=33901,Xe=33902,Ke=3379,$e=3386,Qe=34921,Je=36347,et=36348,tt=35661,nt=35660,rt=34930,it=36349,ot=34076,at=34024,st=7936,ut=7937,ct=7938,lt=35724,ft=34047,pt=36063,ht=34852,dt=3553,vt=34067,mt=34069,gt=33984,yt=6408,bt=5126,_t=5121,xt=36160,wt=36053,Ot=36064,Et=16384,St=function(e,t){var n=1;t.ext_texture_filter_anisotropic&&(n=e.getParameter(ft));var r=1,i=1;t.webgl_draw_buffers&&(r=e.getParameter(ht),i=e.getParameter(pt));var o=!!t.oes_texture_float;if(o){var a=e.createTexture();e.bindTexture(dt,a),e.texImage2D(dt,0,yt,1,1,0,yt,bt,null);var s=e.createFramebuffer();if(e.bindFramebuffer(xt,s),e.framebufferTexture2D(xt,Ot,dt,a,0),e.bindTexture(dt,null),e.checkFramebufferStatus(xt)!==wt)o=!1;else{e.viewport(0,0,1,1),e.clearColor(1,0,0,1),e.clear(Et);var u=Be.allocType(bt,4);e.readPixels(0,0,1,1,yt,bt,u),e.getError()?o=!1:(e.deleteFramebuffer(s),e.deleteTexture(a),o=1===u[0]),Be.freeType(u)}}var c="undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),l=!0;if(!c){var f=e.createTexture(),p=Be.allocType(_t,36);e.activeTexture(gt),e.bindTexture(vt,f),e.texImage2D(mt,0,yt,3,3,0,yt,_t,p),Be.freeType(p),e.bindTexture(vt,null),e.deleteTexture(f),l=!e.getError()}return{colorBits:[e.getParameter(Ve),e.getParameter(He),e.getParameter(Ge),e.getParameter(We)],depthBits:e.getParameter(qe),stencilBits:e.getParameter(Ze),subpixelBits:e.getParameter(Ue),extensions:Object.keys(t).filter((function(e){return!!t[e]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:e.getParameter(Ye),lineWidthDims:e.getParameter(Xe),maxViewportDims:e.getParameter($e),maxCombinedTextureUnits:e.getParameter(tt),maxCubeMapSize:e.getParameter(ot),maxRenderbufferSize:e.getParameter(at),maxTextureUnits:e.getParameter(rt),maxTextureSize:e.getParameter(Ke),maxAttributes:e.getParameter(Qe),maxVertexUniforms:e.getParameter(Je),maxVertexTextureUnits:e.getParameter(nt),maxVaryingVectors:e.getParameter(et),maxFragmentUniforms:e.getParameter(it),glsl:e.getParameter(lt),renderer:e.getParameter(ut),vendor:e.getParameter(st),version:e.getParameter(ct),readFloat:o,npotTextureCube:l}};function jt(e){return!!e&&"object"===typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"===typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||t(e.data))}var At=function(e){return Object.keys(e).map((function(t){return e[t]}))},kt={shape:Rt,flatten:It};function Ct(e,t,n){for(var r=0;r<t;++r)n[r]=e[r]}function Tt(e,t,n,r){for(var i=0,o=0;o<t;++o)for(var a=e[o],s=0;s<n;++s)r[i++]=a[s]}function Mt(e,t,n,r,i,o){for(var a=o,s=0;s<t;++s)for(var u=e[s],c=0;c<n;++c)for(var l=u[c],f=0;f<r;++f)i[a++]=l[f]}function Pt(e,t,n,r,i){for(var o=1,a=n+1;a<t.length;++a)o*=t[a];var s=t[n];if(t.length-n===4){var u=t[n+1],c=t[n+2],l=t[n+3];for(a=0;a<s;++a)Mt(e[a],u,c,l,r,i),i+=o}else for(a=0;a<s;++a)Pt(e[a],t,n+1,r,i),i+=o}function It(e,t,n,r){var i=1;if(t.length)for(var o=0;o<t.length;++o)i*=t[o];else i=0;var a=r||Be.allocType(n,i);switch(t.length){case 0:break;case 1:Ct(e,t[0],a);break;case 2:Tt(e,t[0],t[1],a);break;case 3:Mt(e,t[0],t[1],t[2],a,0);break;default:Pt(e,t,0,a,0)}return a}function Rt(e){for(var t=[],n=e;n.length;n=n[0])t.push(n.length);return t}var Lt={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Dt=5120,Nt=5122,Ft=5124,zt=5121,Bt=5123,Ut=5125,Vt=5126,Ht=5126,Gt={int8:Dt,int16:Nt,int32:Ft,uint8:zt,uint16:Bt,uint32:Ut,float:Vt,float32:Ht},Wt=35048,qt=35040,Zt={dynamic:Wt,stream:qt,static:35044},Yt=kt.flatten,Xt=kt.shape,Kt=35044,$t=35040,Qt=5121,Jt=5126,en=[];function tn(e){return 0|Lt[Object.prototype.toString.call(e)]}function nn(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function rn(e,t,n,r,i,o,a){for(var s=0,u=0;u<n;++u)for(var c=0;c<r;++c)e[s++]=t[i*u+o*c+a]}function on(e,n,r,i){var o=0,a={};function s(t){this.id=o++,this.buffer=e.createBuffer(),this.type=t,this.usage=Kt,this.byteLength=0,this.dimension=1,this.dtype=Qt,this.persistentData=null,r.profile&&(this.stats={size:0})}s.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},s.prototype.destroy=function(){h(this)};var u=[];function c(e,t){var n=u.pop();return n||(n=new s(e)),n.bind(),p(n,t,$t,0,1,!1),n}function l(e){u.push(e)}function f(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function p(e,n,r,i,o,a){var s,u;if(e.usage=r,Array.isArray(n)){if(e.dtype=i||Jt,n.length>0)if(Array.isArray(n[0])){s=Xt(n);for(var c=1,l=1;l<s.length;++l)c*=s[l];e.dimension=c,u=Yt(n,s,e.dtype),f(e,u,r),a?e.persistentData=u:Be.freeType(u)}else if("number"===typeof n[0]){e.dimension=o;var p=Be.allocType(e.dtype,n.length);nn(p,n),f(e,p,r),a?e.persistentData=p:Be.freeType(p)}else t(n[0])?(e.dimension=n[0].length,e.dtype=i||tn(n[0])||Jt,u=Yt(n,[n.length,n[0].length],e.dtype),f(e,u,r),a?e.persistentData=u:Be.freeType(u)):ie.raise("invalid buffer data")}else if(t(n))e.dtype=i||tn(n),e.dimension=o,f(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(jt(n)){s=n.shape;var h=n.stride,d=n.offset,v=0,m=0,g=0,y=0;1===s.length?(v=s[0],m=1,g=h[0],y=0):2===s.length?(v=s[0],m=s[1],g=h[0],y=h[1]):ie.raise("invalid shape"),e.dtype=i||tn(n.data)||Jt,e.dimension=m;var b=Be.allocType(e.dtype,v*m);rn(b,n.data,v,m,g,y,d),f(e,b,r),a?e.persistentData=b:Be.freeType(b)}else n instanceof ArrayBuffer?(e.dtype=Qt,e.dimension=o,f(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n)))):ie.raise("invalid buffer data")}function h(t){n.bufferCount--,i(t);var r=t.buffer;ie(r,"buffer must not be deleted already"),e.deleteBuffer(r),t.buffer=null,delete a[t.id]}function d(i,o,u,c){n.bufferCount++;var l=new s(o);function f(n){var i=Kt,o=null,a=0,s=0,u=1;return Array.isArray(n)||t(n)||jt(n)||n instanceof ArrayBuffer?o=n:"number"===typeof n?a=0|n:n&&(ie.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(ie(null===o||Array.isArray(o)||t(o)||jt(o),"invalid data for buffer"),o=n.data),"usage"in n&&(ie.parameter(n.usage,Zt,"invalid buffer usage"),i=Zt[n.usage]),"type"in n&&(ie.parameter(n.type,Gt,"invalid buffer type"),s=Gt[n.type]),"dimension"in n&&(ie.type(n.dimension,"number","invalid dimension"),u=0|n.dimension),"length"in n&&(ie.nni(a,"buffer length must be a nonnegative integer"),a=0|n.length)),l.bind(),o?p(l,o,i,s,u,c):(a&&e.bufferData(l.type,a,i),l.dtype=s||Qt,l.usage=i,l.dimension=u,l.byteLength=a),r.profile&&(l.stats.size=l.byteLength*en[l.dtype]),f}function d(t,n){ie(n+t.byteLength<=l.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+n+" to a buffer of size "+l.byteLength),e.bufferSubData(l.type,n,t)}function v(e,n){var r,i=0|(n||0);if(l.bind(),t(e)||e instanceof ArrayBuffer)d(e,i);else if(Array.isArray(e)){if(e.length>0)if("number"===typeof e[0]){var o=Be.allocType(l.dtype,e.length);nn(o,e),d(o,i),Be.freeType(o)}else if(Array.isArray(e[0])||t(e[0])){r=Xt(e);var a=Yt(e,r,l.dtype);d(a,i),Be.freeType(a)}else ie.raise("invalid buffer data")}else if(jt(e)){r=e.shape;var s=e.stride,u=0,c=0,p=0,h=0;1===r.length?(u=r[0],c=1,p=s[0],h=0):2===r.length?(u=r[0],c=r[1],p=s[0],h=s[1]):ie.raise("invalid shape");var v=Array.isArray(e.data)?l.dtype:tn(e.data),m=Be.allocType(v,u*c);rn(m,e.data,u,c,p,h,e.offset),d(m,i),Be.freeType(m)}else ie.raise("invalid data for buffer subdata");return f}return a[l.id]=l,u||f(i),f._reglType="buffer",f._buffer=l,f.subdata=v,r.profile&&(f.stats=l.stats),f.destroy=function(){h(l)},f}function v(){At(a).forEach((function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)}))}return r.profile&&(n.getTotalBufferSize=function(){var e=0;return Object.keys(a).forEach((function(t){e+=a[t].stats.size})),e}),{create:d,createStream:c,destroyStream:l,clear:function(){At(a).forEach(h),u.forEach(h)},getBuffer:function(e){return e&&e._buffer instanceof s?e._buffer:null},restore:v,_initBuffer:p}}en[5120]=1,en[5122]=2,en[5124]=4,en[5121]=1,en[5123]=2,en[5125]=4,en[5126]=4;var an=0,sn=0,un=1,cn=1,ln=4,fn=4,pn={points:an,point:sn,lines:un,line:cn,triangles:ln,triangle:fn,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},hn=0,dn=1,vn=4,mn=5120,gn=5121,yn=5122,bn=5123,_n=5124,xn=5125,wn=34963,On=35040,En=35044;function Sn(e,n,r,i){var o={},a=0,s={uint8:gn,uint16:bn};function u(e){this.id=a++,o[this.id]=this,this.buffer=e,this.primType=vn,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(s.uint32=xn),u.prototype.bind=function(){this.buffer.bind()};var c=[];function l(e){var t=c.pop();return t||(t=new u(r.create(null,wn,!0,!1)._buffer)),p(t,e,On,-1,-1,0,0),t}function f(e){c.push(e)}function p(i,o,a,s,u,c,l){var f;if(i.buffer.bind(),o){var p=l;l||t(o)&&(!jt(o)||t(o.data))||(p=n.oes_element_index_uint?xn:bn),r._initBuffer(i.buffer,o,a,p,3)}else e.bufferData(wn,c,a),i.buffer.dtype=f||gn,i.buffer.usage=a,i.buffer.dimension=3,i.buffer.byteLength=c;if(f=l,!l){switch(i.buffer.dtype){case gn:case mn:f=gn;break;case bn:case yn:f=bn;break;case xn:case _n:f=xn;break;default:ie.raise("unsupported type for element array")}i.buffer.dtype=f}i.type=f,ie(f!==xn||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var h=u;h<0&&(h=i.buffer.byteLength,f===bn?h>>=1:f===xn&&(h>>=2)),i.vertCount=h;var d=s;if(s<0){d=vn;var v=i.buffer.dimension;1===v&&(d=hn),2===v&&(d=dn),3===v&&(d=vn)}i.primType=d}function h(e){i.elementsCount--,ie(null!==e.buffer,"must not double destroy elements"),delete o[e.id],e.buffer.destroy(),e.buffer=null}function d(e,n){var o=r.create(null,wn,!0),a=new u(o._buffer);function c(e){if(e)if("number"===typeof e)o(e),a.primType=vn,a.vertCount=0|e,a.type=gn;else{var n=null,r=En,i=-1,u=-1,l=0,f=0;Array.isArray(e)||t(e)||jt(e)?n=e:(ie.type(e,"object","invalid arguments for elements"),"data"in e&&(n=e.data,ie(Array.isArray(n)||t(n)||jt(n),"invalid data for element buffer")),"usage"in e&&(ie.parameter(e.usage,Zt,"invalid element buffer usage"),r=Zt[e.usage]),"primitive"in e&&(ie.parameter(e.primitive,pn,"invalid element buffer primitive"),i=pn[e.primitive]),"count"in e&&(ie("number"===typeof e.count&&e.count>=0,"invalid vertex count for elements"),u=0|e.count),"type"in e&&(ie.parameter(e.type,s,"invalid buffer type"),f=s[e.type]),"length"in e?l=0|e.length:(l=u,f===bn||f===yn?l*=2:f!==xn&&f!==_n||(l*=4))),p(a,n,r,i,u,l,f)}else o(),a.primType=vn,a.vertCount=0,a.type=gn;return c}return i.elementsCount++,c(e),c._reglType="elements",c._elements=a,c.subdata=function(e,t){return o.subdata(e,t),c},c.destroy=function(){h(a)},c}return{create:d,createStream:l,destroyStream:f,getElements:function(e){return"function"===typeof e&&e._elements instanceof u?e._elements:null},clear:function(){At(o).forEach(h)}}}var jn=new Float32Array(1),An=new Uint32Array(jn.buffer),kn=5123;function Cn(e){for(var t=Be.allocType(kn,e.length),n=0;n<e.length;++n)if(isNaN(e[n]))t[n]=65535;else if(e[n]===1/0)t[n]=31744;else if(e[n]===-1/0)t[n]=64512;else{jn[0]=e[n];var r=An[0],i=r>>>31<<15,o=(r<<1>>>24)-127,a=r>>13&1023;if(o<-24)t[n]=i;else if(o<-14){var s=-14-o;t[n]=i+(a+1024>>s)}else t[n]=o>15?i+31744:i+(o+15<<10)+a}return t}function Tn(e){return Array.isArray(e)||t(e)}var Mn=function(e){return!(e&e-1)&&!!e},Pn=34467,In=3553,Rn=34067,Ln=34069,Dn=6408,Nn=6406,Fn=6407,zn=6409,Bn=6410,Un=32854,Vn=32855,Hn=36194,Gn=32819,Wn=32820,qn=33635,Zn=34042,Yn=6402,Xn=34041,Kn=35904,$n=35906,Qn=36193,Jn=33776,er=33777,tr=33778,nr=33779,rr=35986,ir=35987,or=34798,ar=35840,sr=35841,ur=35842,cr=35843,lr=36196,fr=5121,pr=5123,hr=5125,dr=5126,vr=10242,mr=10243,gr=10497,yr=33071,br=33648,_r=10240,xr=10241,wr=9728,Or=9729,Er=9984,Sr=9985,jr=9986,Ar=9987,kr=33170,Cr=4352,Tr=4353,Mr=4354,Pr=34046,Ir=3317,Rr=37440,Lr=37441,Dr=37443,Nr=37444,Fr=33984,zr=[Er,jr,Sr,Ar],Br=[0,zn,Bn,Fn,Dn],Ur={};function Vr(e){return"[object "+e+"]"}Ur[zn]=Ur[Nn]=Ur[Yn]=1,Ur[Xn]=Ur[Bn]=2,Ur[Fn]=Ur[Kn]=3,Ur[Dn]=Ur[$n]=4;var Hr=Vr("HTMLCanvasElement"),Gr=Vr("OffscreenCanvas"),Wr=Vr("CanvasRenderingContext2D"),qr=Vr("ImageBitmap"),Zr=Vr("HTMLImageElement"),Yr=Vr("HTMLVideoElement"),Xr=Object.keys(Lt).concat([Hr,Gr,Wr,qr,Zr,Yr]),Kr=[];Kr[fr]=1,Kr[dr]=4,Kr[Qn]=2,Kr[pr]=2,Kr[hr]=4;var $r=[];function Qr(e){return Array.isArray(e)&&(0===e.length||"number"===typeof e[0])}function Jr(e){if(!Array.isArray(e))return!1;var t=e.length;return!(0===t||!Tn(e[0]))}function ei(e){return Object.prototype.toString.call(e)}function ti(e){return ei(e)===Hr}function ni(e){return ei(e)===Gr}function ri(e){return ei(e)===Wr}function ii(e){return ei(e)===qr}function oi(e){return ei(e)===Zr}function ai(e){return ei(e)===Yr}function si(e){var t="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM;return!!(t&&e&&e.getContext)}function ui(e){var t="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM;return!!(t&&e&&"src"in e&&"crossOrigin"in e)}function ci(e){if(!e)return!1;if(si(e)||ui(e))return!0;var t=ei(e);return Xr.indexOf(t)>=0||(Qr(e)||Jr(e)||jt(e))}function li(e){return 0|Lt[Object.prototype.toString.call(e)]}function fi(e,t){var n=t.length;switch(e.type){case fr:case pr:case hr:case dr:var r=Be.allocType(e.type,n);r.set(t),e.data=r;break;case Qn:e.data=Cn(t);break;default:ie.raise("unsupported texture type, must specify a typed array")}}function pi(e,t){return Be.allocType(e.type===Qn?dr:e.type,t)}function hi(e,t){e.type===Qn?(e.data=Cn(t),Be.freeType(t)):e.data=t}function di(e,t,n,r,i,o){for(var a=e.width,s=e.height,u=e.channels,c=a*s*u,l=pi(e,c),f=0,p=0;p<s;++p)for(var h=0;h<a;++h)for(var d=0;d<u;++d)l[f++]=t[n*h+r*p+i*d+o];hi(e,l)}function vi(e,t,n,r,i,o){var a;if(a="undefined"!==typeof $r[e]?$r[e]:Ur[e]*Kr[t],o&&(a*=6),i){var s=0,u=n;while(u>=1)s+=a*u*u,u/=2;return s}return a*n*r}function mi(e,r,i,o,a,s,u){var c={"don't care":Cr,"dont care":Cr,nice:Mr,fast:Tr},l={repeat:gr,clamp:yr,mirror:br},f={nearest:wr,linear:Or},p=n({mipmap:Ar,"nearest mipmap nearest":Er,"linear mipmap nearest":Sr,"nearest mipmap linear":jr,"linear mipmap linear":Ar},f),h={none:0,browser:Nr},d={uint8:fr,rgba4:Gn,rgb565:qn,"rgb5 a1":Wn},v={alpha:Nn,luminance:zn,"luminance alpha":Bn,rgb:Fn,rgba:Dn,rgba4:Un,"rgb5 a1":Vn,rgb565:Hn},m={};r.ext_srgb&&(v.srgb=Kn,v.srgba=$n),r.oes_texture_float&&(d.float32=d["float"]=dr),r.oes_texture_half_float&&(d["float16"]=d["half float"]=Qn),r.webgl_depth_texture&&(n(v,{depth:Yn,"depth stencil":Xn}),n(d,{uint16:pr,uint32:hr,"depth stencil":Zn})),r.webgl_compressed_texture_s3tc&&n(m,{"rgb s3tc dxt1":Jn,"rgba s3tc dxt1":er,"rgba s3tc dxt3":tr,"rgba s3tc dxt5":nr}),r.webgl_compressed_texture_atc&&n(m,{"rgb atc":rr,"rgba atc explicit alpha":ir,"rgba atc interpolated alpha":or}),r.webgl_compressed_texture_pvrtc&&n(m,{"rgb pvrtc 4bppv1":ar,"rgb pvrtc 2bppv1":sr,"rgba pvrtc 4bppv1":ur,"rgba pvrtc 2bppv1":cr}),r.webgl_compressed_texture_etc1&&(m["rgb etc1"]=lr);var g=Array.prototype.slice.call(e.getParameter(Pn)||new Uint32Array(0));Object.keys(m).forEach((function(e){var t=m[e];g.indexOf(t)>=0&&(v[e]=t)}));var y=Object.keys(v);i.textureFormats=y;var b=[];Object.keys(v).forEach((function(e){var t=v[e];b[t]=e}));var _=[];Object.keys(d).forEach((function(e){var t=d[e];_[t]=e}));var x=[];Object.keys(f).forEach((function(e){var t=f[e];x[t]=e}));var w=[];Object.keys(p).forEach((function(e){var t=p[e];w[t]=e}));var O=[];Object.keys(l).forEach((function(e){var t=l[e];O[t]=e}));var E=y.reduce((function(e,t){var n=v[t];return n===zn||n===Nn||n===zn||n===Bn||n===Yn||n===Xn||r.ext_srgb&&(n===Kn||n===$n)?e[n]=n:n===Vn||t.indexOf("rgba")>=0?e[n]=Dn:e[n]=Fn,e}),{});function S(){this.internalformat=Dn,this.format=Dn,this.type=fr,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Nr,this.width=0,this.height=0,this.channels=0}function j(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function A(e,t){if("object"===typeof t&&t){if("premultiplyAlpha"in t&&(ie.type(t.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(ie.type(t.flipY,"boolean","invalid texture flip"),e.flipY=t.flipY),"alignment"in t&&(ie.oneOf(t.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=t.alignment),"colorSpace"in t&&(ie.parameter(t.colorSpace,h,"invalid colorSpace"),e.colorSpace=h[t.colorSpace]),"type"in t){var n=t.type;ie(r.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),ie(r.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),ie(r.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ie.parameter(n,d,"invalid texture type"),e.type=d[n]}var o=e.width,a=e.height,s=e.channels,u=!1;"shape"in t?(ie(Array.isArray(t.shape)&&t.shape.length>=2,"shape must be an array"),o=t.shape[0],a=t.shape[1],3===t.shape.length&&(s=t.shape[2],ie(s>0&&s<=4,"invalid number of channels"),u=!0),ie(o>=0&&o<=i.maxTextureSize,"invalid width"),ie(a>=0&&a<=i.maxTextureSize,"invalid height")):("radius"in t&&(o=a=t.radius,ie(o>=0&&o<=i.maxTextureSize,"invalid radius")),"width"in t&&(o=t.width,ie(o>=0&&o<=i.maxTextureSize,"invalid width")),"height"in t&&(a=t.height,ie(a>=0&&a<=i.maxTextureSize,"invalid height")),"channels"in t&&(s=t.channels,ie(s>0&&s<=4,"invalid number of channels"),u=!0)),e.width=0|o,e.height=0|a,e.channels=0|s;var c=!1;if("format"in t){var l=t.format;ie(r.webgl_depth_texture||!("depth"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ie.parameter(l,v,"invalid texture format");var f=e.internalformat=v[l];e.format=E[f],l in d&&("type"in t||(e.type=d[l])),l in m&&(e.compressed=!0),c=!0}!u&&c?e.channels=Ur[e.format]:u&&!c?e.channels!==Br[e.format]&&(e.format=e.internalformat=Br[e.channels]):c&&u&&ie(e.channels===Ur[e.format],"number of channels inconsistent with specified format")}}function k(t){e.pixelStorei(Rr,t.flipY),e.pixelStorei(Lr,t.premultiplyAlpha),e.pixelStorei(Dr,t.colorSpace),e.pixelStorei(Ir,t.unpackAlignment)}function C(){S.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function T(e,n){var r=null;if(ci(n)?r=n:n&&(ie.type(n,"object","invalid pixel data type"),A(e,n),"x"in n&&(e.xOffset=0|n.x),"y"in n&&(e.yOffset=0|n.y),ci(n.data)&&(r=n.data)),ie(!e.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){ie(!r,"can not specify copy and data field for the same texture");var o=a.viewportWidth,s=a.viewportHeight;e.width=e.width||o-e.xOffset,e.height=e.height||s-e.yOffset,e.needsCopy=!0,ie(e.xOffset>=0&&e.xOffset<o&&e.yOffset>=0&&e.yOffset<s&&e.width>0&&e.width<=o&&e.height>0&&e.height<=s,"copy texture read out of bounds")}else if(r){if(t(r))e.channels=e.channels||4,e.data=r,"type"in n||e.type!==fr||(e.type=li(r));else if(Qr(r))e.channels=e.channels||4,fi(e,r),e.alignment=1,e.needsFree=!0;else if(jt(r)){var u=r.data;Array.isArray(u)||e.type!==fr||(e.type=li(u));var c,l,f,p,h,d,v=r.shape,m=r.stride;3===v.length?(f=v[2],d=m[2]):(ie(2===v.length,"invalid ndarray pixel data, must be 2 or 3D"),f=1,d=1),c=v[0],l=v[1],p=m[0],h=m[1],e.alignment=1,e.width=c,e.height=l,e.channels=f,e.format=e.internalformat=Br[f],e.needsFree=!0,di(e,u,p,h,d,r.offset)}else if(si(r)||ti(r)||ni(r)||ri(r))si(r)||ti(r)||ni(r)?e.element=r:e.element=r.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(ii(r))e.element=r,e.width=r.width,e.height=r.height,e.channels=4;else if(oi(r))e.element=r,e.width=r.naturalWidth,e.height=r.naturalHeight,e.channels=4;else if(ui(r))e.element=r,e.width=r.width,e.height=r.height,e.channels=4;else if(ai(r))e.element=r,e.width=r.videoWidth,e.height=r.videoHeight,e.channels=4;else if(Jr(r)){var g=e.width||r[0].length,y=e.height||r.length,b=e.channels;b=Tn(r[0][0])?b||r[0][0].length:b||1;for(var _=kt.shape(r),x=1,w=0;w<_.length;++w)x*=_[w];var O=pi(e,x);kt.flatten(r,_,"",O),hi(e,O),e.alignment=1,e.width=g,e.height=y,e.channels=b,e.format=e.internalformat=Br[b],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;e.type===dr?ie(i.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):e.type===Qn&&ie(i.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function M(t,n,r){var i=t.element,a=t.data,s=t.internalformat,u=t.format,c=t.type,l=t.width,f=t.height;k(t),i?e.texImage2D(n,r,u,u,c,i):t.compressed?e.compressedTexImage2D(n,r,s,l,f,0,a):t.needsCopy?(o(),e.copyTexImage2D(n,r,u,t.xOffset,t.yOffset,l,f,0)):e.texImage2D(n,r,u,l,f,0,u,c,a||null)}function P(t,n,r,i,a){var s=t.element,u=t.data,c=t.internalformat,l=t.format,f=t.type,p=t.width,h=t.height;k(t),s?e.texSubImage2D(n,a,r,i,l,f,s):t.compressed?e.compressedTexSubImage2D(n,a,r,i,c,p,h,u):t.needsCopy?(o(),e.copyTexSubImage2D(n,a,r,i,t.xOffset,t.yOffset,p,h)):e.texSubImage2D(n,a,r,i,p,h,l,f,u)}var I=[];function R(){return I.pop()||new C}function L(e){e.needsFree&&Be.freeType(e.data),C.call(e),I.push(e)}function D(){S.call(this),this.genMipmaps=!1,this.mipmapHint=Cr,this.mipmask=0,this.images=Array(16)}function N(e,t,n){var r=e.images[0]=R();e.mipmask=1,r.width=e.width=t,r.height=e.height=n,r.channels=e.channels=4}function F(e,t){var n=null;if(ci(t))n=e.images[0]=R(),j(n,e),T(n,t),e.mipmask=1;else if(A(e,t),Array.isArray(t.mipmap))for(var r=t.mipmap,i=0;i<r.length;++i)n=e.images[i]=R(),j(n,e),n.width>>=i,n.height>>=i,T(n,r[i]),e.mipmask|=1<<i;else n=e.images[0]=R(),j(n,e),T(n,t),e.mipmask=1;j(e,e.images[0]),!e.compressed||e.internalformat!==Jn&&e.internalformat!==er&&e.internalformat!==tr&&e.internalformat!==nr||ie(e.width%4===0&&e.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function z(e,t){for(var n=e.images,r=0;r<n.length;++r){if(!n[r])return;M(n[r],t,r)}}var B=[];function U(){var e=B.pop()||new D;S.call(e),e.mipmask=0;for(var t=0;t<16;++t)e.images[t]=null;return e}function V(e){for(var t=e.images,n=0;n<t.length;++n)t[n]&&L(t[n]),t[n]=null;B.push(e)}function H(){this.minFilter=wr,this.magFilter=wr,this.wrapS=yr,this.wrapT=yr,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Cr}function G(e,t){if("min"in t){var n=t.min;ie.parameter(n,p),e.minFilter=p[n],zr.indexOf(e.minFilter)>=0&&!("faces"in t)&&(e.genMipmaps=!0)}if("mag"in t){var r=t.mag;ie.parameter(r,f),e.magFilter=f[r]}var o=e.wrapS,a=e.wrapT;if("wrap"in t){var s=t.wrap;"string"===typeof s?(ie.parameter(s,l),o=a=l[s]):Array.isArray(s)&&(ie.parameter(s[0],l),ie.parameter(s[1],l),o=l[s[0]],a=l[s[1]])}else{if("wrapS"in t){var u=t.wrapS;ie.parameter(u,l),o=l[u]}if("wrapT"in t){var h=t.wrapT;ie.parameter(h,l),a=l[h]}}if(e.wrapS=o,e.wrapT=a,"anisotropic"in t){var d=t.anisotropic;ie("number"===typeof d&&d>=1&&d<=i.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=t.anisotropic}if("mipmap"in t){var v=!1;switch(typeof t.mipmap){case"string":ie.parameter(t.mipmap,c,"invalid mipmap hint"),e.mipmapHint=c[t.mipmap],e.genMipmaps=!0,v=!0;break;case"boolean":v=e.genMipmaps=t.mipmap;break;case"object":ie(Array.isArray(t.mipmap),"invalid mipmap type"),e.genMipmaps=!1,v=!0;break;default:ie.raise("invalid mipmap type")}v&&!("min"in t)&&(e.minFilter=Er)}}function W(t,n){e.texParameteri(n,xr,t.minFilter),e.texParameteri(n,_r,t.magFilter),e.texParameteri(n,vr,t.wrapS),e.texParameteri(n,mr,t.wrapT),r.ext_texture_filter_anisotropic&&e.texParameteri(n,Pr,t.anisotropic),t.genMipmaps&&(e.hint(kr,t.mipmapHint),e.generateMipmap(n))}var q=0,Z={},Y=i.maxTextureUnits,X=Array(Y).map((function(){return null}));function K(t){S.call(this),this.mipmask=0,this.internalformat=Dn,this.id=q++,this.refCount=1,this.target=t,this.texture=e.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new H,u.profile&&(this.stats={size:0})}function $(t){e.activeTexture(Fr),e.bindTexture(t.target,t.texture)}function Q(){var t=X[0];t?e.bindTexture(t.target,t.texture):e.bindTexture(In,null)}function J(t){var n=t.texture;ie(n,"must not double destroy texture");var r=t.unit,i=t.target;r>=0&&(e.activeTexture(Fr+r),e.bindTexture(i,null),X[r]=null),e.deleteTexture(n),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete Z[t.id],s.textureCount--}function ee(t,n){var r=new K(In);function o(e,t){var n=r.texInfo;H.call(n);var a=U();return"number"===typeof e?N(a,0|e,"number"===typeof t?0|t:0|e):e?(ie.type(e,"object","invalid arguments to regl.texture"),G(n,e),F(a,e)):N(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),r.mipmask=a.mipmask,j(r,a),ie.texture2D(n,a,i),r.internalformat=a.internalformat,o.width=a.width,o.height=a.height,$(r),z(a,In),W(n,In),Q(),V(a),u.profile&&(r.stats.size=vi(r.internalformat,r.type,a.width,a.height,n.genMipmaps,!1)),o.format=b[r.internalformat],o.type=_[r.type],o.mag=x[n.magFilter],o.min=w[n.minFilter],o.wrapS=O[n.wrapS],o.wrapT=O[n.wrapT],o}function a(e,t,n,i){ie(!!e,"must specify image data");var a=0|t,s=0|n,u=0|i,c=R();return j(c,r),c.width=0,c.height=0,T(c,e),c.width=c.width||(r.width>>u)-a,c.height=c.height||(r.height>>u)-s,ie(r.type===c.type&&r.format===c.format&&r.internalformat===c.internalformat,"incompatible format for texture.subimage"),ie(a>=0&&s>=0&&a+c.width<=r.width&&s+c.height<=r.height,"texture.subimage write out of bounds"),ie(r.mipmask&1<<u,"missing mipmap data"),ie(c.data||c.element||c.needsCopy,"missing image data"),$(r),P(c,In,a,s,u),Q(),L(c),o}function c(t,n){var i=0|t,a=0|n||i;if(i===r.width&&a===r.height)return o;o.width=r.width=i,o.height=r.height=a,$(r);for(var s=0;r.mipmask>>s;++s){var c=i>>s,l=a>>s;if(!c||!l)break;e.texImage2D(In,s,r.format,c,l,0,r.format,r.type,null)}return Q(),u.profile&&(r.stats.size=vi(r.internalformat,r.type,i,a,!1,!1)),o}return Z[r.id]=r,s.textureCount++,o(t,n),o.subimage=a,o.resize=c,o._reglType="texture2d",o._texture=r,u.profile&&(o.stats=r.stats),o.destroy=function(){r.decRef()},o}function te(t,n,r,o,a,c){var l=new K(Rn);Z[l.id]=l,s.cubeCount++;var f=new Array(6);function p(e,t,n,r,o,a){var s,c=l.texInfo;for(H.call(c),s=0;s<6;++s)f[s]=U();if("number"!==typeof e&&e)if("object"===typeof e)if(t)F(f[0],e),F(f[1],t),F(f[2],n),F(f[3],r),F(f[4],o),F(f[5],a);else if(G(c,e),A(l,e),"faces"in e){var h=e.faces;for(ie(Array.isArray(h)&&6===h.length,"cube faces must be a length 6 array"),s=0;s<6;++s)ie("object"===typeof h[s]&&!!h[s],"invalid input for cube map face"),j(f[s],l),F(f[s],h[s])}else for(s=0;s<6;++s)F(f[s],e);else ie.raise("invalid arguments to cube map");else{var d=0|e||1;for(s=0;s<6;++s)N(f[s],d,d)}for(j(l,f[0]),ie.optional((function(){i.npotTextureCube||ie(Mn(l.width)&&Mn(l.height),"your browser does not support non power or two texture dimensions")})),c.genMipmaps?l.mipmask=(f[0].width<<1)-1:l.mipmask=f[0].mipmask,ie.textureCube(l,c,f,i),l.internalformat=f[0].internalformat,p.width=f[0].width,p.height=f[0].height,$(l),s=0;s<6;++s)z(f[s],Ln+s);for(W(c,Rn),Q(),u.profile&&(l.stats.size=vi(l.internalformat,l.type,p.width,p.height,c.genMipmaps,!0)),p.format=b[l.internalformat],p.type=_[l.type],p.mag=x[c.magFilter],p.min=w[c.minFilter],p.wrapS=O[c.wrapS],p.wrapT=O[c.wrapT],s=0;s<6;++s)V(f[s]);return p}function h(e,t,n,r,i){ie(!!t,"must specify image data"),ie("number"===typeof e&&e===(0|e)&&e>=0&&e<6,"invalid face");var o=0|n,a=0|r,s=0|i,u=R();return j(u,l),u.width=0,u.height=0,T(u,t),u.width=u.width||(l.width>>s)-o,u.height=u.height||(l.height>>s)-a,ie(l.type===u.type&&l.format===u.format&&l.internalformat===u.internalformat,"incompatible format for texture.subimage"),ie(o>=0&&a>=0&&o+u.width<=l.width&&a+u.height<=l.height,"texture.subimage write out of bounds"),ie(l.mipmask&1<<s,"missing mipmap data"),ie(u.data||u.element||u.needsCopy,"missing image data"),$(l),P(u,Ln+e,o,a,s),Q(),L(u),p}function d(t){var n=0|t;if(n!==l.width){p.width=l.width=n,p.height=l.height=n,$(l);for(var r=0;r<6;++r)for(var i=0;l.mipmask>>i;++i)e.texImage2D(Ln+r,i,l.format,n>>i,n>>i,0,l.format,l.type,null);return Q(),u.profile&&(l.stats.size=vi(l.internalformat,l.type,p.width,p.height,!1,!0)),p}}return p(t,n,r,o,a,c),p.subimage=h,p.resize=d,p._reglType="textureCube",p._texture=l,u.profile&&(p.stats=l.stats),p.destroy=function(){l.decRef()},p}function ne(){for(var t=0;t<Y;++t)e.activeTexture(Fr+t),e.bindTexture(In,null),X[t]=null;At(Z).forEach(J),s.cubeCount=0,s.textureCount=0}function re(){for(var t=0;t<Y;++t){var n=X[t];n&&(n.bindCount=0,n.unit=-1,X[t]=null)}At(Z).forEach((function(t){t.texture=e.createTexture(),e.bindTexture(t.target,t.texture);for(var n=0;n<32;++n)if(0!==(t.mipmask&1<<n))if(t.target===In)e.texImage2D(In,n,t.internalformat,t.width>>n,t.height>>n,0,t.internalformat,t.type,null);else for(var r=0;r<6;++r)e.texImage2D(Ln+r,n,t.internalformat,t.width>>n,t.height>>n,0,t.internalformat,t.type,null);W(t.texInfo,t.target)}))}function oe(){for(var t=0;t<Y;++t){var n=X[t];n&&(n.bindCount=0,n.unit=-1,X[t]=null),e.activeTexture(Fr+t),e.bindTexture(In,null),e.bindTexture(Rn,null)}}return n(K.prototype,{bind:function(){var t=this;t.bindCount+=1;var n=t.unit;if(n<0){for(var r=0;r<Y;++r){var i=X[r];if(i){if(i.bindCount>0)continue;i.unit=-1}X[r]=t,n=r;break}n>=Y&&ie.raise("insufficient number of texture units"),u.profile&&s.maxTextureUnits<n+1&&(s.maxTextureUnits=n+1),t.unit=n,e.activeTexture(Fr+n),e.bindTexture(t.target,t.texture)}return n},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&J(this)}}),u.profile&&(s.getTotalTextureSize=function(){var e=0;return Object.keys(Z).forEach((function(t){e+=Z[t].stats.size})),e}),{create2D:ee,createCube:te,clear:ne,getTexture:function(e){return null},restore:re,refresh:oe}}$r[Un]=2,$r[Vn]=2,$r[Hn]=2,$r[Xn]=4,$r[Jn]=.5,$r[er]=.5,$r[tr]=1,$r[nr]=1,$r[rr]=.5,$r[ir]=1,$r[or]=1,$r[ar]=.5,$r[sr]=.25,$r[ur]=.5,$r[cr]=.25,$r[lr]=.5;var gi=36161,yi=32854,bi=32855,_i=36194,xi=33189,wi=36168,Oi=34041,Ei=35907,Si=34836,ji=34842,Ai=34843,ki=[];function Ci(e,t,n){return ki[e]*t*n}ki[yi]=2,ki[bi]=2,ki[_i]=2,ki[xi]=2,ki[wi]=1,ki[Oi]=4,ki[Ei]=4,ki[Si]=16,ki[ji]=8,ki[Ai]=6;var Ti=function(e,t,n,r,i){var o={rgba4:yi,rgb565:_i,"rgb5 a1":bi,depth:xi,stencil:wi,"depth stencil":Oi};t.ext_srgb&&(o["srgba"]=Ei),t.ext_color_buffer_half_float&&(o["rgba16f"]=ji,o["rgb16f"]=Ai),t.webgl_color_buffer_float&&(o["rgba32f"]=Si);var a=[];Object.keys(o).forEach((function(e){var t=o[e];a[t]=e}));var s=0,u={};function c(e){this.id=s++,this.refCount=1,this.renderbuffer=e,this.format=yi,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function l(t){var n=t.renderbuffer;ie(n,"must not double destroy renderbuffer"),e.bindRenderbuffer(gi,null),e.deleteRenderbuffer(n),t.renderbuffer=null,t.refCount=0,delete u[t.id],r.renderbufferCount--}function f(t,s){var l=new c(e.createRenderbuffer());function f(t,r){var s=0,u=0,c=yi;if("object"===typeof t&&t){var p=t;if("shape"in p){var h=p.shape;ie(Array.isArray(h)&&h.length>=2,"invalid renderbuffer shape"),s=0|h[0],u=0|h[1]}else"radius"in p&&(s=u=0|p.radius),"width"in p&&(s=0|p.width),"height"in p&&(u=0|p.height);"format"in p&&(ie.parameter(p.format,o,"invalid renderbuffer format"),c=o[p.format])}else"number"===typeof t?(s=0|t,u="number"===typeof r?0|r:s):t?ie.raise("invalid arguments to renderbuffer constructor"):s=u=1;if(ie(s>0&&u>0&&s<=n.maxRenderbufferSize&&u<=n.maxRenderbufferSize,"invalid renderbuffer size"),s!==l.width||u!==l.height||c!==l.format)return f.width=l.width=s,f.height=l.height=u,l.format=c,e.bindRenderbuffer(gi,l.renderbuffer),e.renderbufferStorage(gi,c,s,u),ie(0===e.getError(),"invalid render buffer format"),i.profile&&(l.stats.size=Ci(l.format,l.width,l.height)),f.format=a[l.format],f}function p(t,r){var o=0|t,a=0|r||o;return o===l.width&&a===l.height||(ie(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),f.width=l.width=o,f.height=l.height=a,e.bindRenderbuffer(gi,l.renderbuffer),e.renderbufferStorage(gi,l.format,o,a),ie(0===e.getError(),"invalid render buffer format"),i.profile&&(l.stats.size=Ci(l.format,l.width,l.height))),f}return u[l.id]=l,r.renderbufferCount++,f(t,s),f.resize=p,f._reglType="renderbuffer",f._renderbuffer=l,i.profile&&(f.stats=l.stats),f.destroy=function(){l.decRef()},f}function p(){At(u).forEach((function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(gi,t.renderbuffer),e.renderbufferStorage(gi,t.format,t.width,t.height)})),e.bindRenderbuffer(gi,null)}return c.prototype.decRef=function(){--this.refCount<=0&&l(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var e=0;return Object.keys(u).forEach((function(t){e+=u[t].stats.size})),e}),{create:f,clear:function(){At(u).forEach(l)},restore:p}},Mi=36160,Pi=36161,Ii=3553,Ri=34069,Li=36064,Di=36096,Ni=36128,Fi=33306,zi=36053,Bi=36054,Ui=36055,Vi=36057,Hi=36061,Gi=36193,Wi=5121,qi=5126,Zi=6407,Yi=6408,Xi=6402,Ki=[Zi,Yi],$i=[];$i[Yi]=4,$i[Zi]=3;var Qi=[];Qi[Wi]=1,Qi[qi]=4,Qi[Gi]=2;var Ji=32854,eo=32855,to=36194,no=33189,ro=36168,io=34041,oo=35907,ao=34836,so=34842,uo=34843,co=[Ji,eo,to,oo,so,uo,ao],lo={};function fo(e,t,r,i,o,a){var s={cur:null,next:null,dirty:!1,setFBO:null},u=["rgba"],c=["rgba4","rgb565","rgb5 a1"];t.ext_srgb&&c.push("srgba"),t.ext_color_buffer_half_float&&c.push("rgba16f","rgb16f"),t.webgl_color_buffer_float&&c.push("rgba32f");var l=["uint8"];function f(e,t,n){this.target=e,this.texture=t,this.renderbuffer=n;var r=0,i=0;t?(r=t.width,i=t.height):n&&(r=n.width,i=n.height),this.width=r,this.height=i}function p(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function h(e,t,n){if(e)if(e.texture){var r=e.texture._texture,i=Math.max(1,r.width),o=Math.max(1,r.height);ie(i===t&&o===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=e.renderbuffer._renderbuffer;ie(a.width===t&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function d(t,n){n&&(n.texture?e.framebufferTexture2D(Mi,t,n.target,n.texture._texture.texture,0):e.framebufferRenderbuffer(Mi,t,Pi,n.renderbuffer._renderbuffer.renderbuffer))}function v(e){var t=Ii,n=null,r=null,i=e;"object"===typeof e&&(i=e.data,"target"in e&&(t=0|e.target)),ie.type(i,"function","invalid attachment data");var o=i._reglType;return"texture2d"===o?(n=i,ie(t===Ii)):"textureCube"===o?(n=i,ie(t>=Ri&&t<Ri+6,"invalid cube map target")):"renderbuffer"===o?(r=i,t=Pi):ie.raise("invalid regl object for attachment"),new f(t,n,r)}function m(e,t,n,r,a){if(n){var s=i.create2D({width:e,height:t,format:r,type:a});return s._texture.refCount=0,new f(Ii,s,null)}var u=o.create({width:e,height:t,format:r});return u._renderbuffer.refCount=0,new f(Pi,null,u)}function g(e){return e&&(e.texture||e.renderbuffer)}function y(e,t,n){e&&(e.texture?e.texture.resize(t,n):e.renderbuffer&&e.renderbuffer.resize(t,n),e.width=t,e.height=n)}t.oes_texture_half_float&&l.push("half float","float16"),t.oes_texture_float&&l.push("float","float32");var b=0,_={};function x(){this.id=b++,_[this.id]=this,this.framebuffer=e.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function w(e){e.colorAttachments.forEach(p),p(e.depthAttachment),p(e.stencilAttachment),p(e.depthStencilAttachment)}function O(t){var n=t.framebuffer;ie(n,"must not double destroy framebuffer"),e.deleteFramebuffer(n),t.framebuffer=null,a.framebufferCount--,delete _[t.id]}function E(t){var n;e.bindFramebuffer(Mi,t.framebuffer);var i=t.colorAttachments;for(n=0;n<i.length;++n)d(Li+n,i[n]);for(n=i.length;n<r.maxColorAttachments;++n)e.framebufferTexture2D(Mi,Li+n,Ii,null,0);e.framebufferTexture2D(Mi,Fi,Ii,null,0),e.framebufferTexture2D(Mi,Di,Ii,null,0),e.framebufferTexture2D(Mi,Ni,Ii,null,0),d(Di,t.depthAttachment),d(Ni,t.stencilAttachment),d(Fi,t.depthStencilAttachment);var o=e.checkFramebufferStatus(Mi);e.isContextLost()||o===zi||ie.raise("framebuffer configuration not supported, status = "+lo[o]),e.bindFramebuffer(Mi,s.next?s.next.framebuffer:null),s.cur=s.next,e.getError()}function S(e,i){var o=new x;function f(e,n){var i;ie(s.next!==o,"can not update framebuffer which is currently in use");var a=0,p=0,d=!0,y=!0,b=null,_=!0,x="rgba",O="uint8",S=1,j=null,A=null,k=null,C=!1;if("number"===typeof e)a=0|e,p=0|n||a;else if(e){ie.type(e,"object","invalid arguments for framebuffer");var T=e;if("shape"in T){var M=T.shape;ie(Array.isArray(M)&&M.length>=2,"invalid shape for framebuffer"),a=M[0],p=M[1]}else"radius"in T&&(a=p=T.radius),"width"in T&&(a=T.width),"height"in T&&(p=T.height);("color"in T||"colors"in T)&&(b=T.color||T.colors,Array.isArray(b)&&ie(1===b.length||t.webgl_draw_buffers,"multiple render targets not supported")),b||("colorCount"in T&&(S=0|T.colorCount,ie(S>0,"invalid color buffer count")),"colorTexture"in T&&(_=!!T.colorTexture,x="rgba4"),"colorType"in T&&(O=T.colorType,_?(ie(t.oes_texture_float||!("float"===O||"float32"===O),"you must enable OES_texture_float in order to use floating point framebuffer objects"),ie(t.oes_texture_half_float||!("half float"===O||"float16"===O),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===O||"float16"===O?(ie(t.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),x="rgba16f"):"float"!==O&&"float32"!==O||(ie(t.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),x="rgba32f"),ie.oneOf(O,l,"invalid color type")),"colorFormat"in T&&(x=T.colorFormat,u.indexOf(x)>=0?_=!0:c.indexOf(x)>=0?_=!1:ie.optional((function(){_?ie.oneOf(T.colorFormat,u,"invalid color format for texture"):ie.oneOf(T.colorFormat,c,"invalid color format for renderbuffer")})))),("depthTexture"in T||"depthStencilTexture"in T)&&(C=!(!T.depthTexture&&!T.depthStencilTexture),ie(!C||t.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in T&&("boolean"===typeof T.depth?d=T.depth:(j=T.depth,y=!1)),"stencil"in T&&("boolean"===typeof T.stencil?y=T.stencil:(A=T.stencil,d=!1)),"depthStencil"in T&&("boolean"===typeof T.depthStencil?d=y=T.depthStencil:(k=T.depthStencil,d=!1,y=!1))}else a=p=1;var P=null,I=null,R=null,L=null;if(Array.isArray(b))P=b.map(v);else if(b)P=[v(b)];else for(P=new Array(S),i=0;i<S;++i)P[i]=m(a,p,_,x,O);ie(t.webgl_draw_buffers||P.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),ie(P.length<=r.maxColorAttachments,"too many color attachments, not supported"),a=a||P[0].width,p=p||P[0].height,j?I=v(j):d&&!y&&(I=m(a,p,C,"depth","uint32")),A?R=v(A):y&&!d&&(R=m(a,p,!1,"stencil","uint8")),k?L=v(k):!j&&!A&&y&&d&&(L=m(a,p,C,"depth stencil","depth stencil")),ie(!!j+!!A+!!k<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var D=null;for(i=0;i<P.length;++i)if(h(P[i],a,p),ie(!P[i]||P[i].texture&&Ki.indexOf(P[i].texture._texture.format)>=0||P[i].renderbuffer&&co.indexOf(P[i].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+i+" is invalid"),P[i]&&P[i].texture){var N=$i[P[i].texture._texture.format]*Qi[P[i].texture._texture.type];null===D?D=N:ie(D===N,"all color attachments much have the same number of bits per pixel.")}return h(I,a,p),ie(!I||I.texture&&I.texture._texture.format===Xi||I.renderbuffer&&I.renderbuffer._renderbuffer.format===no,"invalid depth attachment for framebuffer object"),h(R,a,p),ie(!R||R.renderbuffer&&R.renderbuffer._renderbuffer.format===ro,"invalid stencil attachment for framebuffer object"),h(L,a,p),ie(!L||L.texture&&L.texture._texture.format===io||L.renderbuffer&&L.renderbuffer._renderbuffer.format===io,"invalid depth-stencil attachment for framebuffer object"),w(o),o.width=a,o.height=p,o.colorAttachments=P,o.depthAttachment=I,o.stencilAttachment=R,o.depthStencilAttachment=L,f.color=P.map(g),f.depth=g(I),f.stencil=g(R),f.depthStencil=g(L),f.width=o.width,f.height=o.height,E(o),f}function p(e,t){ie(s.next!==o,"can not resize a framebuffer which is currently in use");var n=Math.max(0|e,1),r=Math.max(0|t||n,1);if(n===o.width&&r===o.height)return f;for(var i=o.colorAttachments,a=0;a<i.length;++a)y(i[a],n,r);return y(o.depthAttachment,n,r),y(o.stencilAttachment,n,r),y(o.depthStencilAttachment,n,r),o.width=f.width=n,o.height=f.height=r,E(o),f}return a.framebufferCount++,f(e,i),n(f,{resize:p,_reglType:"framebuffer",_framebuffer:o,destroy:function(){O(o),w(o)},use:function(e){s.setFBO({framebuffer:f},e)}})}function j(e){var o=Array(6);function a(e){var r;ie(o.indexOf(s.next)<0,"can not update framebuffer which is currently in use");var c,f={color:null},p=0,h=null,d="rgba",v="uint8",m=1;if("number"===typeof e)p=0|e;else if(e){ie.type(e,"object","invalid arguments for framebuffer");var g=e;if("shape"in g){var y=g.shape;ie(Array.isArray(y)&&y.length>=2,"invalid shape for framebuffer"),ie(y[0]===y[1],"cube framebuffer must be square"),p=y[0]}else"radius"in g&&(p=0|g.radius),"width"in g?(p=0|g.width,"height"in g&&ie(g.height===p,"must be square")):"height"in g&&(p=0|g.height);("color"in g||"colors"in g)&&(h=g.color||g.colors,Array.isArray(h)&&ie(1===h.length||t.webgl_draw_buffers,"multiple render targets not supported")),h||("colorCount"in g&&(m=0|g.colorCount,ie(m>0,"invalid color buffer count")),"colorType"in g&&(ie.oneOf(g.colorType,l,"invalid color type"),v=g.colorType),"colorFormat"in g&&(d=g.colorFormat,ie.oneOf(g.colorFormat,u,"invalid color format for texture"))),"depth"in g&&(f.depth=g.depth),"stencil"in g&&(f.stencil=g.stencil),"depthStencil"in g&&(f.depthStencil=g.depthStencil)}else p=1;if(h)if(Array.isArray(h))for(c=[],r=0;r<h.length;++r)c[r]=h[r];else c=[h];else{c=Array(m);var b={radius:p,format:d,type:v};for(r=0;r<m;++r)c[r]=i.createCube(b)}for(f.color=Array(c.length),r=0;r<c.length;++r){var _=c[r];ie("function"===typeof _&&"textureCube"===_._reglType,"invalid cube map"),p=p||_.width,ie(_.width===p&&_.height===p,"invalid cube map shape"),f.color[r]={target:Ri,data:c[r]}}for(r=0;r<6;++r){for(var x=0;x<c.length;++x)f.color[x].target=Ri+r;r>0&&(f.depth=o[0].depth,f.stencil=o[0].stencil,f.depthStencil=o[0].depthStencil),o[r]?o[r](f):o[r]=S(f)}return n(a,{width:p,height:p,color:c})}function c(e){var t,n=0|e;if(ie(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===a.width)return a;var i=a.color;for(t=0;t<i.length;++t)i[t].resize(n);for(t=0;t<6;++t)o[t].resize(n);return a.width=a.height=n,a}return a(e),n(a,{faces:o,resize:c,_reglType:"framebufferCube",destroy:function(){o.forEach((function(e){e.destroy()}))}})}function A(){s.cur=null,s.next=null,s.dirty=!0,At(_).forEach((function(t){t.framebuffer=e.createFramebuffer(),E(t)}))}return n(s,{getFramebuffer:function(e){if("function"===typeof e&&"framebuffer"===e._reglType){var t=e._framebuffer;if(t instanceof x)return t}return null},create:S,createCube:j,clear:function(){At(_).forEach(O)},restore:A})}lo[zi]="complete",lo[Bi]="incomplete attachment",lo[Vi]="incomplete dimensions",lo[Ui]="incomplete, missing attachment",lo[Hi]="unsupported";var po=5126,ho=34962,vo=34963,mo=["attributes","elements","offset","count","primitive","instances"];function go(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=po,this.offset=0,this.stride=0,this.divisor=0}function yo(e,n,r,i,o,a,s){for(var u=r.maxAttributes,c=new Array(u),l=0;l<u;++l)c[l]=new go;var f=0,p={},h={Record:go,scope:{},state:c,currentVAO:null,targetVAO:null,restore:v()?w:function(){},createVAO:O,getVAO:g,destroyBuffer:d,setVAO:v()?y:b,clear:v()?_:function(){}};function d(t){for(var n=0;n<c.length;++n){var r=c[n];r.buffer===t&&(e.disableVertexAttribArray(n),r.buffer=null)}}function v(){return n.oes_vertex_array_object}function m(){return n.angle_instanced_arrays}function g(e){return"function"===typeof e&&e._vao?e._vao:null}function y(e){if(e!==h.currentVAO){var t=v();e?t.bindVertexArrayOES(e.vao):t.bindVertexArrayOES(null),h.currentVAO=e}}function b(t){if(t!==h.currentVAO){if(t)t.bindAttrs();else{for(var n=m(),r=0;r<c.length;++r){var i=c[r];i.buffer?(e.enableVertexAttribArray(r),i.buffer.bind(),e.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offfset),n&&i.divisor&&n.vertexAttribDivisorANGLE(r,i.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}s.elements?e.bindBuffer(vo,s.elements.buffer.buffer):e.bindBuffer(vo,null)}h.currentVAO=t}}function _(){At(p).forEach((function(e){e.destroy()}))}function x(){this.id=++f,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var e=v();this.vao=e?e.createVertexArrayOES():null,p[this.id]=this,this.buffers=[]}function w(){var e=v();e&&At(p).forEach((function(e){e.refresh()}))}function O(e){var r=new x;function s(e){var i;if(Array.isArray(e))i=e,r.elements&&r.ownsElements&&r.elements.destroy(),r.elements=null,r.ownsElements=!1,r.offset=0,r.count=0,r.instances=-1,r.primitive=4;else{if(ie("object"===typeof e,"invalid arguments for create vao"),ie("attributes"in e,"must specify attributes for vao"),e.elements){var c=e.elements;r.ownsElements?"function"===typeof c&&"elements"===c._reglType?(r.elements.destroy(),r.ownsElements=!1):(r.elements(c),r.ownsElements=!1):a.getElements(e.elements)?(r.elements=e.elements,r.ownsElements=!1):(r.elements=a.create(e.elements),r.ownsElements=!0)}else r.elements=null,r.ownsElements=!1;i=e.attributes,r.offset=0,r.count=-1,r.instances=-1,r.primitive=4,r.elements&&(r.count=r.elements._elements.vertCount,r.primitive=r.elements._elements.primType),"offset"in e&&(r.offset=0|e.offset),"count"in e&&(r.count=0|e.count),"instances"in e&&(r.instances=0|e.instances),"primitive"in e&&(ie(e.primitive in pn,"bad primitive type: "+e.primitive),r.primitive=pn[e.primitive]),ie.optional((function(){for(var t=Object.keys(e),n=0;n<t.length;++n)ie(mo.indexOf(t[n])>=0,'invalid option for vao: "'+t[n]+'" valid options are '+mo)})),ie(Array.isArray(i),"attributes must be an array")}ie(i.length<u,"too many attributes"),ie(i.length>0,"must specify at least one attribute");var l={},f=r.attributes;f.length=i.length;for(var p=0;p<i.length;++p){var h,d=i[p],v=f[p]=new go,m=d.data||d;if(Array.isArray(m)||t(m)||jt(m))r.buffers[p]&&(h=r.buffers[p],t(m)&&h._buffer.byteLength>=m.byteLength?h.subdata(m):(h.destroy(),r.buffers[p]=null)),r.buffers[p]||(h=r.buffers[p]=o.create(d,ho,!1,!0)),v.buffer=o.getBuffer(h),v.size=0|v.buffer.dimension,v.normalized=!1,v.type=v.buffer.dtype,v.offset=0,v.stride=0,v.divisor=0,v.state=1,l[p]=1;else o.getBuffer(d)?(v.buffer=o.getBuffer(d),v.size=0|v.buffer.dimension,v.normalized=!1,v.type=v.buffer.dtype,v.offset=0,v.stride=0,v.divisor=0,v.state=1):o.getBuffer(d.buffer)?(v.buffer=o.getBuffer(d.buffer),v.size=0|(+d.size||v.buffer.dimension),v.normalized=!!d.normalized||!1,"type"in d?(ie.parameter(d.type,Gt,"invalid buffer type"),v.type=Gt[d.type]):v.type=v.buffer.dtype,v.offset=0|(d.offset||0),v.stride=0|(d.stride||0),v.divisor=0|(d.divisor||0),v.state=1,ie(v.size>=1&&v.size<=4,"size must be between 1 and 4"),ie(v.offset>=0,"invalid offset"),ie(v.stride>=0&&v.stride<=255,"stride must be between 0 and 255"),ie(v.divisor>=0,"divisor must be positive"),ie(!v.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in d?(ie(p>0,"first attribute must not be a constant"),v.x=+d.x||0,v.y=+d.y||0,v.z=+d.z||0,v.w=+d.w||0,v.state=2):ie(!1,"invalid attribute spec for location "+p)}for(var g=0;g<r.buffers.length;++g)!l[g]&&r.buffers[g]&&(r.buffers[g].destroy(),r.buffers[g]=null);return r.refresh(),s}return i.vaoCount+=1,s.destroy=function(){for(var e=0;e<r.buffers.length;++e)r.buffers[e]&&r.buffers[e].destroy();r.buffers.length=0,r.ownsElements&&(r.elements.destroy(),r.elements=null,r.ownsElements=!1),r.destroy()},s._vao=r,s._reglType="vao",s(e)}return x.prototype.bindAttrs=function(){for(var t=m(),n=this.attributes,r=0;r<n.length;++r){var i=n[r];i.buffer?(e.enableVertexAttribArray(r),e.bindBuffer(ho,i.buffer.buffer),e.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offset),t&&i.divisor&&t.vertexAttribDivisorANGLE(r,i.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}for(var o=n.length;o<u;++o)e.disableVertexAttribArray(o);var s=a.getElements(this.elements);s?e.bindBuffer(vo,s.buffer.buffer):e.bindBuffer(vo,null)},x.prototype.refresh=function(){var e=v();e&&(e.bindVertexArrayOES(this.vao),this.bindAttrs(),h.currentVAO=null,e.bindVertexArrayOES(null))},x.prototype.destroy=function(){if(this.vao){var e=v();this===h.currentVAO&&(h.currentVAO=null,e.bindVertexArrayOES(null)),e.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),p[this.id]&&(delete p[this.id],i.vaoCount-=1)},h}var bo=35632,_o=35633,xo=35718,wo=35721;function Oo(e,t,r,i){var o={},a={};function s(e,t,n,r){this.name=e,this.id=t,this.location=n,this.info=r}function u(e,t){for(var n=0;n<e.length;++n)if(e[n].id===t.id)return void(e[n].location=t.location);e.push(t)}function c(n,r,i){var s=n===bo?o:a,u=s[r];if(!u){var c=t.str(r);u=e.createShader(n),e.shaderSource(u,c),e.compileShader(u),ie.shaderError(e,u,c,n,i),s[r]=u}return u}var l={},f=[],p=0;function h(e,t){this.id=p++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,i.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function d(n,r,o){var a,l,f=c(bo,n.fragId),p=c(_o,n.vertId),h=n.program=e.createProgram();if(e.attachShader(h,f),e.attachShader(h,p),o)for(a=0;a<o.length;++a){var d=o[a];e.bindAttribLocation(h,d[0],d[1])}e.linkProgram(h),ie.linkError(e,h,t.str(n.fragId),t.str(n.vertId),r);var v=e.getProgramParameter(h,xo);i.profile&&(n.stats.uniformsCount=v);var m=n.uniforms;for(a=0;a<v;++a)if(l=e.getActiveUniform(h,a),l)if(l.size>1)for(var g=0;g<l.size;++g){var y=l.name.replace("[0]","["+g+"]");u(m,new s(y,t.id(y),e.getUniformLocation(h,y),l))}else u(m,new s(l.name,t.id(l.name),e.getUniformLocation(h,l.name),l));var b=e.getProgramParameter(h,wo);i.profile&&(n.stats.attributesCount=b);var _=n.attributes;for(a=0;a<b;++a)l=e.getActiveAttrib(h,a),l&&u(_,new s(l.name,t.id(l.name),e.getAttribLocation(h,l.name),l))}function v(){o={},a={};for(var e=0;e<f.length;++e)d(f[e],null,f[e].attributes.map((function(e){return[e.location,e.name]})))}return i.profile&&(r.getMaxUniformsCount=function(){var e=0;return f.forEach((function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)})),e},r.getMaxAttributesCount=function(){var e=0;return f.forEach((function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)})),e}),{clear:function(){var t=e.deleteShader.bind(e);At(o).forEach(t),o={},At(a).forEach(t),a={},f.forEach((function(t){e.deleteProgram(t.program)})),f.length=0,l={},r.shaderCount=0},program:function(t,i,s,u){ie.command(t>=0,"missing vertex shader",s),ie.command(i>=0,"missing fragment shader",s);var c=l[i];c||(c=l[i]={});var p=c[t];if(p&&(p.refCount++,!u))return p;var v=new h(i,t);return r.shaderCount++,d(v,s,u),p||(c[t]=v),f.push(v),n(v,{destroy:function(){if(v.refCount--,v.refCount<=0){e.deleteProgram(v.program);var t=f.indexOf(v);f.splice(t,1),r.shaderCount--}c[v.vertId].refCount<=0&&(e.deleteShader(a[v.vertId]),delete a[v.vertId],delete l[v.fragId][v.vertId]),Object.keys(l[v.fragId]).length||(e.deleteShader(o[v.fragId]),delete o[v.fragId],delete l[v.fragId])}})},restore:v,shader:c,frag:-1,vert:-1}}var Eo=6408,So=5121,jo=3333,Ao=5126;function ko(e,n,r,i,o,a,s){function u(u){var c;null===n.next?(ie(o.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),c=So):(ie(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),c=n.next.colorAttachments[0].texture._texture.type,ie.optional((function(){a.oes_texture_float?(ie(c===So||c===Ao,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),c===Ao&&ie(s.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):ie(c===So,"Reading from a framebuffer is only allowed for the type 'uint8'")})));var l=0,f=0,p=i.framebufferWidth,h=i.framebufferHeight,d=null;t(u)?d=u:u&&(ie.type(u,"object","invalid arguments to regl.read()"),l=0|u.x,f=0|u.y,ie(l>=0&&l<i.framebufferWidth,"invalid x offset for regl.read"),ie(f>=0&&f<i.framebufferHeight,"invalid y offset for regl.read"),p=0|(u.width||i.framebufferWidth-l),h=0|(u.height||i.framebufferHeight-f),d=u.data||null),d&&(c===So?ie(d instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):c===Ao&&ie(d instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),ie(p>0&&p+l<=i.framebufferWidth,"invalid width for read pixels"),ie(h>0&&h+f<=i.framebufferHeight,"invalid height for read pixels"),r();var v=p*h*4;return d||(c===So?d=new Uint8Array(v):c===Ao&&(d=d||new Float32Array(v))),ie.isTypedArray(d,"data buffer for regl.read() must be a typedarray"),ie(d.byteLength>=v,"data buffer for regl.read() too small"),e.pixelStorei(jo,4),e.readPixels(l,f,p,h,Eo,c,d),d}function c(e){var t;return n.setFBO({framebuffer:e.framebuffer},(function(){t=u(e)})),t}function l(e){return e&&"framebuffer"in e?c(e):u(e)}return l}function Co(e){return Array.prototype.slice.call(e)}function To(e){return Co(e).join("")}function Mo(){var t=0,r=[],i=[];function o(e){for(var n=0;n<i.length;++n)if(i[n]===e)return r[n];var o="g"+t++;return r.push(o),i.push(e),o}function a(){var e=[];function r(){e.push.apply(e,Co(arguments))}var i=[];function o(){var n="v"+t++;return i.push(n),arguments.length>0&&(e.push(n,"="),e.push.apply(e,Co(arguments)),e.push(";")),n}return n(r,{def:o,toString:function(){return To([i.length>0?"var "+i.join(",")+";":"",To(e)])}})}function s(){var e=a(),t=a(),r=e.toString,i=t.toString;function o(n,r){t(n,r,"=",e.def(n,r),";")}return n((function(){e.apply(e,Co(arguments))}),{def:e.def,entry:e,exit:t,save:o,set:function(t,n,r){o(t,n),e(t,n,"=",r,";")},toString:function(){return r()+i()}})}function u(){var e=To(arguments),t=s(),r=s(),i=t.toString,o=r.toString;return n(t,{then:function(){return t.apply(t,Co(arguments)),this},else:function(){return r.apply(r,Co(arguments)),this},toString:function(){var t=o();return t&&(t="else{"+t+"}"),To(["if(",e,"){",i(),"}",t])}})}var c=a(),l={};function f(e,t){var r=[];function i(){var e="a"+r.length;return r.push(e),e}t=t||0;for(var o=0;o<t;++o)i();var a=s(),u=a.toString,c=l[e]=n(a,{arg:i,toString:function(){return To(["function(",r.join(),"){",u(),"}"])}});return c}function p(){var t=['"use strict";',c,"return {"];Object.keys(l).forEach((function(e){t.push('"',e,'":',l[e].toString(),",")})),t.push("}");var n=To(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),o="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,a=o?e.Function.apply(null,r.concat(n)):Function.apply(null,r.concat(n));return a.apply(null,i)}return{global:c,link:o,block:a,proc:f,scope:s,cond:u,compile:p}}var Po="xyzw".split(""),Io=5121,Ro=1,Lo=2,Do=0,No=1,Fo=2,zo=3,Bo=4,Uo=5,Vo=6,Ho="dither",Go="blend.enable",Wo="blend.color",qo="blend.equation",Zo="blend.func",Yo="depth.enable",Xo="depth.func",Ko="depth.range",$o="depth.mask",Qo="colorMask",Jo="cull.enable",ea="cull.face",ta="frontFace",na="lineWidth",ra="polygonOffset.enable",ia="polygonOffset.offset",oa="sample.alpha",aa="sample.enable",sa="sample.coverage",ua="stencil.enable",ca="stencil.mask",la="stencil.func",fa="stencil.opFront",pa="stencil.opBack",ha="scissor.enable",da="scissor.box",va="viewport",ma="profile",ga="framebuffer",ya="vert",ba="frag",_a="elements",xa="primitive",wa="count",Oa="offset",Ea="instances",Sa="vao",ja="Width",Aa="Height",ka=ga+ja,Ca=ga+Aa,Ta=va+ja,Ma=va+Aa,Pa="drawingBuffer",Ia=Pa+ja,Ra=Pa+Aa,La=[Zo,qo,la,fa,pa,sa,va,da,ia],Da=34962,Na=34963,Fa=35632,za=35633,Ba=3553,Ua=34067,Va=2884,Ha=3042,Ga=3024,Wa=2960,qa=2929,Za=3089,Ya=32823,Xa=32926,Ka=32928,$a=5126,Qa=35664,Ja=35665,es=35666,ts=5124,ns=35667,rs=35668,is=35669,os=35670,as=35671,ss=35672,us=35673,cs=35674,ls=35675,fs=35676,ps=35678,hs=35680,ds=4,vs=1028,ms=1029,gs=2304,ys=2305,bs=32775,_s=32776,xs=519,ws=7680,Os=0,Es=1,Ss=32774,js=513,As=36160,ks=36064,Cs={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ts=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Ms={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ps={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Is={frag:Fa,vert:za},Rs={cw:gs,ccw:ys};function Ls(e){return Array.isArray(e)||t(e)||jt(e)}function Ds(e){return e.sort((function(e,t){return e===va?-1:t===va?1:e<t?-1:1}))}function Ns(e,t,n,r){this.thisDep=e,this.contextDep=t,this.propDep=n,this.append=r}function Fs(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function zs(e){return new Ns(!1,!1,!1,e)}function Bs(e,t){var n=e.type;if(n===Do){var r=e.data.length;return new Ns(!0,r>=1,r>=2,t)}if(n===Bo){var i=e.data;return new Ns(i.thisDep,i.contextDep,i.propDep,t)}if(n===Uo)return new Ns(!1,!1,!1,t);if(n===Vo){for(var o=!1,a=!1,s=!1,u=0;u<e.data.length;++u){var c=e.data[u];if(c.type===No)s=!0;else if(c.type===Fo)a=!0;else if(c.type===zo)o=!0;else if(c.type===Do){o=!0;var l=c.data;l>=1&&(a=!0),l>=2&&(s=!0)}else c.type===Bo&&(o=o||c.data.thisDep,a=a||c.data.contextDep,s=s||c.data.propDep)}return new Ns(o,a,s,t)}return new Ns(n===zo,n===Fo,n===No,t)}var Us=new Ns(!1,!1,!1,(function(){}));function Vs(e,t,r,i,o,a,s,u,c,l,f,p,h,d,v){var m=l.Record,g={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(g.min=bs,g.max=_s);var y=r.angle_instanced_arrays,b=r.webgl_draw_buffers,_=r.oes_vertex_array_object,x={dirty:!0,profile:v.profile},w={},O=[],E={},S={};function j(e){return e.replace(".","_")}function A(e,t,n){var r=j(e);O.push(e),w[r]=x[r]=!!n,E[r]=t}function k(e,t,n){var r=j(e);O.push(e),Array.isArray(n)?(x[r]=n.slice(),w[r]=n.slice()):x[r]=w[r]=n,S[r]=t}A(Ho,Ga),A(Go,Ha),k(Wo,"blendColor",[0,0,0,0]),k(qo,"blendEquationSeparate",[Ss,Ss]),k(Zo,"blendFuncSeparate",[Es,Os,Es,Os]),A(Yo,qa,!0),k(Xo,"depthFunc",js),k(Ko,"depthRange",[0,1]),k($o,"depthMask",!0),k(Qo,Qo,[!0,!0,!0,!0]),A(Jo,Va),k(ea,"cullFace",ms),k(ta,ta,ys),k(na,na,1),A(ra,Ya),k(ia,"polygonOffset",[0,0]),A(oa,Xa),A(aa,Ka),k(sa,"sampleCoverage",[1,!1]),A(ua,Wa),k(ca,"stencilMask",-1),k(la,"stencilFunc",[xs,0,-1]),k(fa,"stencilOpSeparate",[vs,ws,ws,ws]),k(pa,"stencilOpSeparate",[ms,ws,ws,ws]),A(ha,Za),k(da,"scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),k(va,va,[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var C={gl:e,context:h,strings:t,next:w,current:x,draw:p,elements:a,buffer:o,shader:f,attributes:l.state,vao:l,uniforms:c,framebuffer:u,extensions:r,timer:d,isBufferArgs:Ls},T={primTypes:pn,compareFuncs:Ms,blendFuncs:Cs,blendEquations:g,stencilOps:Ps,glTypes:Gt,orientationType:Rs};ie.optional((function(){C.isArrayLike=Tn})),b&&(T.backBuffer=[ms],T.drawBuffer=Ce(i.maxDrawbuffers,(function(e){return 0===e?[0]:Ce(e,(function(e){return ks+e}))})));var M=0;function P(){var e=Mo(),n=e.link,r=e.global;e.id=M++,e.batchId="0";var i=n(C),o=e.shared={props:"a0"};Object.keys(C).forEach((function(e){o[e]=r.def(i,".",e)})),ie.optional((function(){e.CHECK=n(ie),e.commandStr=ie.guessCommand(),e.command=n(e.commandStr),e.assert=function(e,t,r){e("if(!(",t,"))",this.CHECK,".commandRaise(",n(r),",",this.command,");")},T.invalidBlendCombinations=Ts}));var a=e.next={},s=e.current={};Object.keys(S).forEach((function(e){Array.isArray(x[e])&&(a[e]=r.def(o.next,".",e),s[e]=r.def(o.current,".",e))}));var u=e.constants={};Object.keys(T).forEach((function(e){u[e]=r.def(JSON.stringify(T[e]))})),e.invoke=function(t,r){switch(r.type){case Do:var i=["this",o.context,o.props,e.batchId];return t.def(n(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case No:return t.def(o.props,r.data);case Fo:return t.def(o.context,r.data);case zo:return t.def("this",r.data);case Bo:return r.data.append(e,t),r.data.ref;case Uo:return r.data.toString();case Vo:return r.data.map((function(n){return e.invoke(t,n)}))}},e.attribCache={};var c={};return e.scopeAttrib=function(e){var r=t.id(e);if(r in c)return c[r];var i=l.scope[r];i||(i=l.scope[r]=new m);var o=c[r]=n(i);return o},e}function I(e){var t,n=e["static"],r=e.dynamic;if(ma in n){var i=!!n[ma];t=zs((function(e,t){return i})),t.enable=i}else if(ma in r){var o=r[ma];t=Bs(o,(function(e,t){return e.invoke(t,o)}))}return t}function R(e,t){var n=e["static"],r=e.dynamic;if(ga in n){var i=n[ga];return i?(i=u.getFramebuffer(i),ie.command(i,"invalid framebuffer object"),zs((function(e,t){var n=e.link(i),r=e.shared;t.set(r.framebuffer,".next",n);var o=r.context;return t.set(o,"."+ka,n+".width"),t.set(o,"."+Ca,n+".height"),n}))):zs((function(e,t){var n=e.shared;t.set(n.framebuffer,".next","null");var r=n.context;return t.set(r,"."+ka,r+"."+Ia),t.set(r,"."+Ca,r+"."+Ra),"null"}))}if(ga in r){var o=r[ga];return Bs(o,(function(e,t){var n=e.invoke(t,o),r=e.shared,i=r.framebuffer,a=t.def(i,".getFramebuffer(",n,")");ie.optional((function(){e.assert(t,"!"+n+"||"+a,"invalid framebuffer object")})),t.set(i,".next",a);var s=r.context;return t.set(s,"."+ka,a+"?"+a+".width:"+s+"."+Ia),t.set(s,"."+Ca,a+"?"+a+".height:"+s+"."+Ra),a}))}return null}function L(e,t,n){var r=e["static"],i=e.dynamic;function o(e){if(e in r){var o=r[e];ie.commandType(o,"object","invalid "+e,n.commandStr);var a,s,u=!0,c=0|o.x,l=0|o.y;return"width"in o?(a=0|o.width,ie.command(a>=0,"invalid "+e,n.commandStr)):u=!1,"height"in o?(s=0|o.height,ie.command(s>=0,"invalid "+e,n.commandStr)):u=!1,new Ns(!u&&t&&t.thisDep,!u&&t&&t.contextDep,!u&&t&&t.propDep,(function(e,t){var n=e.shared.context,r=a;"width"in o||(r=t.def(n,".",ka,"-",c));var i=s;return"height"in o||(i=t.def(n,".",Ca,"-",l)),[c,l,r,i]}))}if(e in i){var f=i[e],p=Bs(f,(function(t,n){var r=t.invoke(n,f);ie.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)}));var i=t.shared.context,o=n.def(r,".x|0"),a=n.def(r,".y|0"),s=n.def('"width" in ',r,"?",r,".width|0:","(",i,".",ka,"-",o,")"),u=n.def('"height" in ',r,"?",r,".height|0:","(",i,".",Ca,"-",a,")");return ie.optional((function(){t.assert(n,s+">=0&&"+u+">=0","invalid "+e)})),[o,a,s,u]}));return t&&(p.thisDep=p.thisDep||t.thisDep,p.contextDep=p.contextDep||t.contextDep,p.propDep=p.propDep||t.propDep),p}return t?new Ns(t.thisDep,t.contextDep,t.propDep,(function(e,t){var n=e.shared.context;return[0,0,t.def(n,".",ka),t.def(n,".",Ca)]})):null}var a=o(va);if(a){var s=a;a=new Ns(a.thisDep,a.contextDep,a.propDep,(function(e,t){var n=s.append(e,t),r=e.shared.context;return t.set(r,"."+Ta,n[2]),t.set(r,"."+Ma,n[3]),n}))}return{viewport:a,scissor_box:o(da)}}function D(e,t){var n=e["static"],r="string"===typeof n[ba]&&"string"===typeof n[ya];if(r){if(Object.keys(t.dynamic).length>0)return null;var i=t["static"],o=Object.keys(i);if(o.length>0&&"number"===typeof i[o[0]]){for(var a=[],s=0;s<o.length;++s)ie("number"===typeof i[o[s]],"must specify all vertex attribute locations when using vaos"),a.push([0|i[o[s]],o[s]]);return a}}return null}function N(e,n,r){var i=e["static"],o=e.dynamic;function a(e){if(e in i){var n=t.id(i[e]);ie.optional((function(){f.shader(Is[e],n,ie.guessCommand())}));var r=zs((function(){return n}));return r.id=n,r}if(e in o){var a=o[e];return Bs(a,(function(t,n){var r=t.invoke(n,a),i=n.def(t.shared.strings,".id(",r,")");return ie.optional((function(){n(t.shared.shader,".shader(",Is[e],",",i,",",t.command,");")})),i}))}return null}var s,u=a(ba),c=a(ya),l=null;return Fs(u)&&Fs(c)?(l=f.program(c.id,u.id,null,r),s=zs((function(e,t){return e.link(l)}))):s=new Ns(u&&u.thisDep||c&&c.thisDep,u&&u.contextDep||c&&c.contextDep,u&&u.propDep||c&&c.propDep,(function(e,t){var n,r,i=e.shared.shader;n=u?u.append(e,t):t.def(i,".",ba),r=c?c.append(e,t):t.def(i,".",ya);var o=i+".program("+r+","+n;return ie.optional((function(){o+=","+e.command})),t.def(o+")")})),{frag:u,vert:c,progVar:s,program:l}}function F(e,t){var n=e["static"],r=e.dynamic,i={},o=!1;function s(){if(Sa in n){var e=n[Sa];return null!==e&&null===l.getVAO(e)&&(e=l.createVAO(e)),o=!0,i.vao=e,zs((function(t){var n=l.getVAO(e);return n?t.link(n):"null"}))}if(Sa in r){o=!0;var t=r[Sa];return Bs(t,(function(e,n){var r=e.invoke(n,t);return n.def(e.shared.vao+".getVAO("+r+")")}))}return null}var u=s(),c=!1;function f(){if(_a in n){var e=n[_a];if(i.elements=e,Ls(e)){var s=i.elements=a.create(e,!0);e=a.getElements(s),c=!0}else e&&(e=a.getElements(e),c=!0,ie.command(e,"invalid elements",t.commandStr));var l=zs((function(t,n){if(e){var r=t.link(e);return t.ELEMENTS=r,r}return t.ELEMENTS=null,null}));return l.value=e,l}if(_a in r){c=!0;var f=r[_a];return Bs(f,(function(e,t){var n=e.shared,r=n.isBufferArgs,i=n.elements,o=e.invoke(t,f),a=t.def("null"),s=t.def(r,"(",o,")"),u=e.cond(s).then(a,"=",i,".createStream(",o,");")["else"](a,"=",i,".getElements(",o,");");return ie.optional((function(){e.assert(u["else"],"!"+o+"||"+a,"invalid elements")})),t.entry(u),t.exit(e.cond(s).then(i,".destroyStream(",a,");")),e.ELEMENTS=a,a}))}return o?new Ns(u.thisDep,u.contextDep,u.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.elements+".getElements("+e.shared.vao+".currentVAO.elements):null")})):null}var p=f();function h(){if(xa in n){var e=n[xa];return i.primitive=e,ie.commandParameter(e,pn,"invalid primitve",t.commandStr),zs((function(t,n){return pn[e]}))}if(xa in r){var a=r[xa];return Bs(a,(function(e,t){var n=e.constants.primTypes,r=e.invoke(t,a);return ie.optional((function(){e.assert(t,r+" in "+n,"invalid primitive, must be one of "+Object.keys(pn))})),t.def(n,"[",r,"]")}))}return c?Fs(p)?p.value?zs((function(e,t){return t.def(e.ELEMENTS,".primType")})):zs((function(){return ds})):new Ns(p.thisDep,p.contextDep,p.propDep,(function(e,t){var n=e.ELEMENTS;return t.def(n,"?",n,".primType:",ds)})):o?new Ns(u.thisDep,u.contextDep,u.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.primitive:"+ds)})):null}function d(e,a){if(e in n){var s=0|n[e];return a?i.offset=s:i.instances=s,ie.command(!a||s>=0,"invalid "+e,t.commandStr),zs((function(e,t){return a&&(e.OFFSET=s),s}))}if(e in r){var l=r[e];return Bs(l,(function(t,n){var r=t.invoke(n,l);return a&&(t.OFFSET=r,ie.optional((function(){t.assert(n,r+">=0","invalid "+e)}))),r}))}if(a){if(c)return zs((function(e,t){return e.OFFSET=0,0}));if(o)return new Ns(u.thisDep,u.contextDep,u.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.offset:0")}))}else if(o)return new Ns(u.thisDep,u.contextDep,u.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.instances:-1")}));return null}var v=d(Oa,!0);function m(){if(wa in n){var e=0|n[wa];return i.count=e,ie.command("number"===typeof e&&e>=0,"invalid vertex count",t.commandStr),zs((function(){return e}))}if(wa in r){var a=r[wa];return Bs(a,(function(e,t){var n=e.invoke(t,a);return ie.optional((function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")})),n}))}if(c){if(Fs(p)){if(p)return v?new Ns(v.thisDep,v.contextDep,v.propDep,(function(e,t){var n=t.def(e.ELEMENTS,".vertCount-",e.OFFSET);return ie.optional((function(){e.assert(t,n+">=0","invalid vertex offset/element buffer too small")})),n})):zs((function(e,t){return t.def(e.ELEMENTS,".vertCount")}));var s=zs((function(){return-1}));return ie.optional((function(){s.MISSING=!0})),s}var l=new Ns(p.thisDep||v.thisDep,p.contextDep||v.contextDep,p.propDep||v.propDep,(function(e,t){var n=e.ELEMENTS;return e.OFFSET?t.def(n,"?",n,".vertCount-",e.OFFSET,":-1"):t.def(n,"?",n,".vertCount:-1")}));return ie.optional((function(){l.DYNAMIC=!0})),l}if(o){var f=new Ns(u.thisDep,u.contextDep,u.propDep,(function(e,t){return t.def(e.shared.vao,".currentVAO?",e.shared.vao,".currentVAO.count:-1")}));return f}return null}var g=h(),y=m(),b=d(Ea,!1);return{elements:p,primitive:g,count:y,instances:b,offset:v,vao:u,vaoActive:o,elementsActive:c,static:i}}function z(e,t){var n=e["static"],r=e.dynamic,o={};return O.forEach((function(e){var a=j(e);function s(t,i){if(e in n){var s=t(n[e]);o[a]=zs((function(){return s}))}else if(e in r){var u=r[e];o[a]=Bs(u,(function(e,t){return i(e,t,e.invoke(t,u))}))}}switch(e){case Jo:case Go:case Ho:case ua:case Yo:case ha:case ra:case oa:case aa:case $o:return s((function(n){return ie.commandType(n,"boolean",e,t.commandStr),n}),(function(t,n,r){return ie.optional((function(){t.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+e,t.commandStr)})),r}));case Xo:return s((function(n){return ie.commandParameter(n,Ms,"invalid "+e,t.commandStr),Ms[n]}),(function(t,n,r){var i=t.constants.compareFuncs;return ie.optional((function(){t.assert(n,r+" in "+i,"invalid "+e+", must be one of "+Object.keys(Ms))})),n.def(i,"[",r,"]")}));case Ko:return s((function(e){return ie.command(Tn(e)&&2===e.length&&"number"===typeof e[0]&&"number"===typeof e[1]&&e[0]<=e[1],"depth range is 2d array",t.commandStr),e}),(function(e,t,n){ie.optional((function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")}));var r=t.def("+",n,"[0]"),i=t.def("+",n,"[1]");return[r,i]}));case Zo:return s((function(e){ie.commandType(e,"object","blend.func",t.commandStr);var n="srcRGB"in e?e.srcRGB:e.src,r="srcAlpha"in e?e.srcAlpha:e.src,i="dstRGB"in e?e.dstRGB:e.dst,o="dstAlpha"in e?e.dstAlpha:e.dst;return ie.commandParameter(n,Cs,a+".srcRGB",t.commandStr),ie.commandParameter(r,Cs,a+".srcAlpha",t.commandStr),ie.commandParameter(i,Cs,a+".dstRGB",t.commandStr),ie.commandParameter(o,Cs,a+".dstAlpha",t.commandStr),ie.command(-1===Ts.indexOf(n+", "+i),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+i+")",t.commandStr),[Cs[n],Cs[i],Cs[r],Cs[o]]}),(function(t,n,r){var i=t.constants.blendFuncs;function o(o,a){var s=n.def('"',o,a,'" in ',r,"?",r,".",o,a,":",r,".",o);return ie.optional((function(){t.assert(n,s+" in "+i,"invalid "+e+"."+o+a+", must be one of "+Object.keys(Cs))})),s}ie.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")}));var a=o("src","RGB"),s=o("dst","RGB");ie.optional((function(){var e=t.constants.invalidBlendCombinations;t.assert(n,e+".indexOf("+a+'+", "+'+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}));var u=n.def(i,"[",a,"]"),c=n.def(i,"[",o("src","Alpha"),"]"),l=n.def(i,"[",s,"]"),f=n.def(i,"[",o("dst","Alpha"),"]");return[u,l,c,f]}));case qo:return s((function(n){return"string"===typeof n?(ie.commandParameter(n,g,"invalid "+e,t.commandStr),[g[n],g[n]]):"object"===typeof n?(ie.commandParameter(n.rgb,g,e+".rgb",t.commandStr),ie.commandParameter(n.alpha,g,e+".alpha",t.commandStr),[g[n.rgb],g[n.alpha]]):void ie.commandRaise("invalid blend.equation",t.commandStr)}),(function(t,n,r){var i=t.constants.blendEquations,o=n.def(),a=n.def(),s=t.cond("typeof ",r,'==="string"');return ie.optional((function(){function n(e,n,r){t.assert(e,r+" in "+i,"invalid "+n+", must be one of "+Object.keys(g))}n(s.then,e,r),t.assert(s["else"],r+"&&typeof "+r+'==="object"',"invalid "+e),n(s["else"],e+".rgb",r+".rgb"),n(s["else"],e+".alpha",r+".alpha")})),s.then(o,"=",a,"=",i,"[",r,"];"),s["else"](o,"=",i,"[",r,".rgb];",a,"=",i,"[",r,".alpha];"),n(s),[o,a]}));case Wo:return s((function(e){return ie.command(Tn(e)&&4===e.length,"blend.color must be a 4d array",t.commandStr),Ce(4,(function(t){return+e[t]}))}),(function(e,t,n){return ie.optional((function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")})),Ce(4,(function(e){return t.def("+",n,"[",e,"]")}))}));case ca:return s((function(e){return ie.commandType(e,"number",a,t.commandStr),0|e}),(function(e,t,n){return ie.optional((function(){e.assert(t,"typeof "+n+'==="number"',"invalid stencil.mask")})),t.def(n,"|0")}));case la:return s((function(n){ie.commandType(n,"object",a,t.commandStr);var r=n.cmp||"keep",i=n.ref||0,o="mask"in n?n.mask:-1;return ie.commandParameter(r,Ms,e+".cmp",t.commandStr),ie.commandType(i,"number",e+".ref",t.commandStr),ie.commandType(o,"number",e+".mask",t.commandStr),[Ms[r],i,o]}),(function(e,t,n){var r=e.constants.compareFuncs;ie.optional((function(){function i(){e.assert(t,Array.prototype.join.call(arguments,""),"invalid stencil.func")}i(n+"&&typeof ",n,'==="object"'),i('!("cmp" in ',n,")||(",n,".cmp in ",r,")")}));var i=t.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",ws),o=t.def(n,".ref|0"),a=t.def('"mask" in ',n,"?",n,".mask|0:-1");return[i,o,a]}));case fa:case pa:return s((function(n){ie.commandType(n,"object",a,t.commandStr);var r=n.fail||"keep",i=n.zfail||"keep",o=n.zpass||"keep";return ie.commandParameter(r,Ps,e+".fail",t.commandStr),ie.commandParameter(i,Ps,e+".zfail",t.commandStr),ie.commandParameter(o,Ps,e+".zpass",t.commandStr),[e===pa?ms:vs,Ps[r],Ps[i],Ps[o]]}),(function(t,n,r){var i=t.constants.stencilOps;function o(o){return ie.optional((function(){t.assert(n,'!("'+o+'" in '+r+")||("+r+"."+o+" in "+i+")","invalid "+e+"."+o+", must be one of "+Object.keys(Ps))})),n.def('"',o,'" in ',r,"?",i,"[",r,".",o,"]:",ws)}return ie.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)})),[e===pa?ms:vs,o("fail"),o("zfail"),o("zpass")]}));case ia:return s((function(e){ie.commandType(e,"object",a,t.commandStr);var n=0|e.factor,r=0|e.units;return ie.commandType(n,"number",a+".factor",t.commandStr),ie.commandType(r,"number",a+".units",t.commandStr),[n,r]}),(function(t,n,r){ie.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)}));var i=n.def(r,".factor|0"),o=n.def(r,".units|0");return[i,o]}));case ea:return s((function(e){var n=0;return"front"===e?n=vs:"back"===e&&(n=ms),ie.command(!!n,a,t.commandStr),n}),(function(e,t,n){return ie.optional((function(){e.assert(t,n+'==="front"||'+n+'==="back"',"invalid cull.face")})),t.def(n,'==="front"?',vs,":",ms)}));case na:return s((function(e){return ie.command("number"===typeof e&&e>=i.lineWidthDims[0]&&e<=i.lineWidthDims[1],"invalid line width, must be a positive number between "+i.lineWidthDims[0]+" and "+i.lineWidthDims[1],t.commandStr),e}),(function(e,t,n){return ie.optional((function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">="+i.lineWidthDims[0]+"&&"+n+"<="+i.lineWidthDims[1],"invalid line width")})),n}));case ta:return s((function(e){return ie.commandParameter(e,Rs,a,t.commandStr),Rs[e]}),(function(e,t,n){return ie.optional((function(){e.assert(t,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")})),t.def(n+'==="cw"?'+gs+":"+ys)}));case Qo:return s((function(e){return ie.command(Tn(e)&&4===e.length,"color.mask must be length 4 array",t.commandStr),e.map((function(e){return!!e}))}),(function(e,t,n){return ie.optional((function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")})),Ce(4,(function(e){return"!!"+n+"["+e+"]"}))}));case sa:return s((function(e){ie.command("object"===typeof e&&e,a,t.commandStr);var n="value"in e?e.value:1,r=!!e.invert;return ie.command("number"===typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",t.commandStr),[n,r]}),(function(e,t,n){ie.optional((function(){e.assert(t,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")}));var r=t.def('"value" in ',n,"?+",n,".value:1"),i=t.def("!!",n,".invert");return[r,i]}))}})),o}function B(e,t){var n=e["static"],r=e.dynamic,i={};return Object.keys(n).forEach((function(e){var r,o=n[e];if("number"===typeof o||"boolean"===typeof o)r=zs((function(){return o}));else if("function"===typeof o){var a=o._reglType;"texture2d"===a||"textureCube"===a?r=zs((function(e){return e.link(o)})):"framebuffer"===a||"framebufferCube"===a?(ie.command(o.color.length>0,'missing color attachment for framebuffer sent to uniform "'+e+'"',t.commandStr),r=zs((function(e){return e.link(o.color[0])}))):ie.commandRaise('invalid data for uniform "'+e+'"',t.commandStr)}else Tn(o)?r=zs((function(t){var n=t.global.def("[",Ce(o.length,(function(n){return ie.command("number"===typeof o[n]||"boolean"===typeof o[n],"invalid uniform "+e,t.commandStr),o[n]})),"]");return n})):ie.commandRaise('invalid or missing data for uniform "'+e+'"',t.commandStr);r.value=o,i[e]=r})),Object.keys(r).forEach((function(e){var t=r[e];i[e]=Bs(t,(function(e,n){return e.invoke(n,t)}))})),i}function U(e,n){var r=e["static"],i=e.dynamic,a={};return Object.keys(r).forEach((function(e){var i=r[e],s=t.id(e),u=new m;if(Ls(i))u.state=Ro,u.buffer=o.getBuffer(o.create(i,Da,!1,!0)),u.type=0;else{var c=o.getBuffer(i);if(c)u.state=Ro,u.buffer=c,u.type=0;else if(ie.command("object"===typeof i&&i,"invalid data for attribute "+e,n.commandStr),"constant"in i){var l=i.constant;u.buffer="null",u.state=Lo,"number"===typeof l?u.x=l:(ie.command(Tn(l)&&l.length>0&&l.length<=4,"invalid constant for attribute "+e,n.commandStr),Po.forEach((function(e,t){t<l.length&&(u[e]=l[t])})))}else{c=Ls(i.buffer)?o.getBuffer(o.create(i.buffer,Da,!1,!0)):o.getBuffer(i.buffer),ie.command(!!c,'missing buffer for attribute "'+e+'"',n.commandStr);var f=0|i.offset;ie.command(f>=0,'invalid offset for attribute "'+e+'"',n.commandStr);var p=0|i.stride;ie.command(p>=0&&p<256,'invalid stride for attribute "'+e+'", must be integer betweeen [0, 255]',n.commandStr);var h=0|i.size;ie.command(!("size"in i)||h>0&&h<=4,'invalid size for attribute "'+e+'", must be 1,2,3,4',n.commandStr);var d=!!i.normalized,v=0;"type"in i&&(ie.commandParameter(i.type,Gt,"invalid type for attribute "+e,n.commandStr),v=Gt[i.type]);var g=0|i.divisor;ie.optional((function(){"divisor"in i&&(ie.command(0===g||y,'cannot specify divisor for attribute "'+e+'", instancing not supported',n.commandStr),ie.command(g>=0,'invalid divisor for attribute "'+e+'"',n.commandStr));var t=n.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(i).forEach((function(n){ie.command(r.indexOf(n)>=0,'unknown parameter "'+n+'" for attribute pointer "'+e+'" (valid parameters are '+r+")",t)}))})),u.buffer=c,u.state=Ro,u.size=h,u.normalized=d,u.type=v||c.dtype,u.offset=f,u.stride=p,u.divisor=g}}a[e]=zs((function(e,t){var n=e.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(u).forEach((function(e){r[e]=u[e]})),u.buffer&&(r.buffer=e.link(u.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r}))})),Object.keys(i).forEach((function(e){var t=i[e];function n(n,r){var i=n.invoke(r,t),o=n.shared,a=n.constants,s=o.isBufferArgs,u=o.buffer;ie.optional((function(){n.assert(r,i+"&&(typeof "+i+'==="object"||typeof '+i+'==="function")&&('+s+"("+i+")||"+u+".getBuffer("+i+")||"+u+".getBuffer("+i+".buffer)||"+s+"("+i+'.buffer)||("constant" in '+i+"&&(typeof "+i+'.constant==="number"||'+o.isArrayLike+"("+i+".constant))))",'invalid dynamic attribute "'+e+'"')}));var c={isStream:r.def(!1)},l=new m;l.state=Ro,Object.keys(l).forEach((function(e){c[e]=r.def(""+l[e])}));var f=c.buffer,p=c.type;function h(e){r(c[e],"=",i,".",e,"|0;")}return r("if(",s,"(",i,")){",c.isStream,"=true;",f,"=",u,".createStream(",Da,",",i,");",p,"=",f,".dtype;","}else{",f,"=",u,".getBuffer(",i,");","if(",f,"){",p,"=",f,".dtype;",'}else if("constant" in ',i,"){",c.state,"=",Lo,";","if(typeof "+i+'.constant === "number"){',c[Po[0]],"=",i,".constant;",Po.slice(1).map((function(e){return c[e]})).join("="),"=0;","}else{",Po.map((function(e,t){return c[e]+"="+i+".constant.length>"+t+"?"+i+".constant["+t+"]:0;"})).join(""),"}}else{","if(",s,"(",i,".buffer)){",f,"=",u,".createStream(",Da,",",i,".buffer);","}else{",f,"=",u,".getBuffer(",i,".buffer);","}",p,'="type" in ',i,"?",a.glTypes,"[",i,".type]:",f,".dtype;",c.normalized,"=!!",i,".normalized;"),h("size"),h("offset"),h("stride"),h("divisor"),r("}}"),r.exit("if(",c.isStream,"){",u,".destroyStream(",f,");","}"),c}a[e]=Bs(t,n)})),a}function V(e){var t=e["static"],n=e.dynamic,r={};return Object.keys(t).forEach((function(e){var n=t[e];r[e]=zs((function(e,t){return"number"===typeof n||"boolean"===typeof n?""+n:e.link(n)}))})),Object.keys(n).forEach((function(e){var t=n[e];r[e]=Bs(t,(function(e,n){return e.invoke(n,t)}))})),r}function H(e,t,n,i,o){var a=e["static"],s=e.dynamic;ie.optional((function(){var e=[ga,ya,ba,_a,xa,Oa,wa,Ea,ma,Sa].concat(O);function t(t){Object.keys(t).forEach((function(t){ie.command(e.indexOf(t)>=0,'unknown parameter "'+t+'"',o.commandStr)}))}t(a),t(s)}));var u=D(e,t),c=R(e,o),f=L(e,c,o),p=F(e,o),h=z(e,o),d=N(e,o,u);function v(e){var t=f[e];t&&(h[e]=t)}v(va),v(j(da));var m=Object.keys(h).length>0,g={framebuffer:c,draw:p,shader:d,state:h,dirty:m,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(g.profile=I(e,o),g.uniforms=B(n,o),g.drawVAO=g.scopeVAO=p.vao,!g.drawVAO&&d.program&&!u&&r.angle_instanced_arrays&&p["static"].elements){var y=!0,b=d.program.attributes.map((function(e){var n=t["static"][e];return y=y&&!!n,n}));if(y&&b.length>0){var _=l.getVAO(l.createVAO({attributes:b,elements:p["static"].elements}));g.drawVAO=new Ns(null,null,null,(function(e,t){return e.link(_)})),g.useVAO=!0}}return u?g.useVAO=!0:g.attributes=U(t,o),g.context=V(i,o),g}function G(e,t,n){var r=e.shared,i=r.context,o=e.scope();Object.keys(n).forEach((function(r){t.save(i,"."+r);var a=n[r],s=a.append(e,t);Array.isArray(s)?o(i,".",r,"=[",s.join(),"];"):o(i,".",r,"=",s,";")})),t(o)}function W(e,t,n,r){var i,o=e.shared,a=o.gl,s=o.framebuffer;b&&(i=t.def(o.extensions,".webgl_draw_buffers"));var u,c=e.constants,l=c.drawBuffer,f=c.backBuffer;u=n?n.append(e,t):t.def(s,".next"),r||t("if(",u,"!==",s,".cur){"),t("if(",u,"){",a,".bindFramebuffer(",As,",",u,".framebuffer);"),b&&t(i,".drawBuffersWEBGL(",l,"[",u,".colorAttachments.length]);"),t("}else{",a,".bindFramebuffer(",As,",null);"),b&&t(i,".drawBuffersWEBGL(",f,");"),t("}",s,".cur=",u,";"),r||t("}")}function q(e,t,n){var r=e.shared,i=r.gl,o=e.current,a=e.next,s=r.current,u=r.next,c=e.cond(s,".dirty");O.forEach((function(t){var r,l,f=j(t);if(!(f in n.state))if(f in a){r=a[f],l=o[f];var p=Ce(x[f].length,(function(e){return c.def(r,"[",e,"]")}));c(e.cond(p.map((function(e,t){return e+"!=="+l+"["+t+"]"})).join("||")).then(i,".",S[f],"(",p,");",p.map((function(e,t){return l+"["+t+"]="+e})).join(";"),";"))}else{r=c.def(u,".",f);var h=e.cond(r,"!==",s,".",f);c(h),f in E?h(e.cond(r).then(i,".enable(",E[f],");")["else"](i,".disable(",E[f],");"),s,".",f,"=",r,";"):h(i,".",S[f],"(",r,");",s,".",f,"=",r,";")}})),0===Object.keys(n.state).length&&c(s,".dirty=false;"),t(c)}function Z(e,t,n,r){var i=e.shared,o=e.current,a=i.current,s=i.gl;Ds(Object.keys(n)).forEach((function(i){var u=n[i];if(!r||r(u)){var c=u.append(e,t);if(E[i]){var l=E[i];Fs(u)?t(s,c?".enable(":".disable(",l,");"):t(e.cond(c).then(s,".enable(",l,");")["else"](s,".disable(",l,");")),t(a,".",i,"=",c,";")}else if(Tn(c)){var f=o[i];t(s,".",S[i],"(",c,");",c.map((function(e,t){return f+"["+t+"]="+e})).join(";"),";")}else t(s,".",S[i],"(",c,");",a,".",i,"=",c,";")}}))}function Y(e,t){y&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function X(e,t,n,r,i){var o,a,s,u=e.shared,c=e.stats,l=u.current,f=u.timer,p=n.profile;function h(){var e="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM;return e||"undefined"===typeof performance?"Date.now()":"performance.now()"}function v(e){o=t.def(),e(o,"=",h(),";"),"string"===typeof i?e(c,".count+=",i,";"):e(c,".count++;"),d&&(r?(a=t.def(),e(a,"=",f,".getNumPendingQueries();")):e(f,".beginQuery(",c,");"))}function m(e){e(c,".cpuTime+=",h(),"-",o,";"),d&&(r?e(f,".pushScopeStats(",a,",",f,".getNumPendingQueries(),",c,");"):e(f,".endQuery();"))}function g(e){var n=t.def(l,".profile");t(l,".profile=",e,";"),t.exit(l,".profile=",n,";")}if(p){if(Fs(p))return void(p.enable?(v(t),m(t.exit),g("true")):g("false"));s=p.append(e,t),g(s)}else s=t.def(l,".profile");var y=e.block();v(y),t("if(",s,"){",y,"}");var b=e.block();m(b),t.exit("if(",s,"){",b,"}")}function K(e,t,n,r,i){var o=e.shared;function a(e){switch(e){case Qa:case ns:case as:return 2;case Ja:case rs:case ss:return 3;case es:case is:case us:return 4;default:return 1}}function s(n,r,i){var a=o.gl,s=t.def(n,".location"),u=t.def(o.attributes,"[",s,"]"),c=i.state,l=i.buffer,f=[i.x,i.y,i.z,i.w],p=["buffer","normalized","offset","stride"];function h(){t("if(!",u,".buffer){",a,".enableVertexAttribArray(",s,");}");var n,o=i.type;if(n=i.size?t.def(i.size,"||",r):r,t("if(",u,".type!==",o,"||",u,".size!==",n,"||",p.map((function(e){return u+"."+e+"!=="+i[e]})).join("||"),"){",a,".bindBuffer(",Da,",",l,".buffer);",a,".vertexAttribPointer(",[s,n,o,i.normalized,i.stride,i.offset],");",u,".type=",o,";",u,".size=",n,";",p.map((function(e){return u+"."+e+"="+i[e]+";"})).join(""),"}"),y){var c=i.divisor;t("if(",u,".divisor!==",c,"){",e.instancing,".vertexAttribDivisorANGLE(",[s,c],");",u,".divisor=",c,";}")}}function d(){t("if(",u,".buffer){",a,".disableVertexAttribArray(",s,");",u,".buffer=null;","}if(",Po.map((function(e,t){return u+"."+e+"!=="+f[t]})).join("||"),"){",a,".vertexAttrib4f(",s,",",f,");",Po.map((function(e,t){return u+"."+e+"="+f[t]+";"})).join(""),"}")}c===Ro?h():c===Lo?d():(t("if(",c,"===",Ro,"){"),h(),t("}else{"),d(),t("}"))}r.forEach((function(r){var o,u=r.name,c=n.attributes[u];if(c){if(!i(c))return;o=c.append(e,t)}else{if(!i(Us))return;var l=e.scopeAttrib(u);ie.optional((function(){e.assert(t,l+".state","missing attribute "+u)})),o={},Object.keys(new m).forEach((function(e){o[e]=t.def(l,".",e)}))}s(e.link(r),a(r.info.type),o)}))}function $(e,n,r,i,o,a){for(var s,u=e.shared,c=u.gl,l=0;l<i.length;++l){var f,p=i[l],h=p.name,d=p.info.type,v=r.uniforms[h],m=e.link(p),g=m+".location";if(v){if(!o(v))continue;if(Fs(v)){var y=v.value;if(ie.command(null!==y&&"undefined"!==typeof y,'missing uniform "'+h+'"',e.commandStr),d===ps||d===hs){ie.command("function"===typeof y&&(d===ps&&("texture2d"===y._reglType||"framebuffer"===y._reglType)||d===hs&&("textureCube"===y._reglType||"framebufferCube"===y._reglType)),"invalid texture for uniform "+h,e.commandStr);var b=e.link(y._texture||y.color[0]._texture);n(c,".uniform1i(",g,",",b+".bind());"),n.exit(b,".unbind();")}else if(d===cs||d===ls||d===fs){ie.optional((function(){ie.command(Tn(y),"invalid matrix for uniform "+h,e.commandStr),ie.command(d===cs&&4===y.length||d===ls&&9===y.length||d===fs&&16===y.length,"invalid length for matrix uniform "+h,e.commandStr)}));var _=e.global.def("new Float32Array(["+Array.prototype.slice.call(y)+"])"),x=2;d===ls?x=3:d===fs&&(x=4),n(c,".uniformMatrix",x,"fv(",g,",false,",_,");")}else{switch(d){case $a:ie.commandType(y,"number","uniform "+h,e.commandStr),s="1f";break;case Qa:ie.command(Tn(y)&&2===y.length,"uniform "+h,e.commandStr),s="2f";break;case Ja:ie.command(Tn(y)&&3===y.length,"uniform "+h,e.commandStr),s="3f";break;case es:ie.command(Tn(y)&&4===y.length,"uniform "+h,e.commandStr),s="4f";break;case os:ie.commandType(y,"boolean","uniform "+h,e.commandStr),s="1i";break;case ts:ie.commandType(y,"number","uniform "+h,e.commandStr),s="1i";break;case as:ie.command(Tn(y)&&2===y.length,"uniform "+h,e.commandStr),s="2i";break;case ns:ie.command(Tn(y)&&2===y.length,"uniform "+h,e.commandStr),s="2i";break;case ss:ie.command(Tn(y)&&3===y.length,"uniform "+h,e.commandStr),s="3i";break;case rs:ie.command(Tn(y)&&3===y.length,"uniform "+h,e.commandStr),s="3i";break;case us:ie.command(Tn(y)&&4===y.length,"uniform "+h,e.commandStr),s="4i";break;case is:ie.command(Tn(y)&&4===y.length,"uniform "+h,e.commandStr),s="4i";break}n(c,".uniform",s,"(",g,",",Tn(y)?Array.prototype.slice.call(y):y,");")}continue}f=v.append(e,n)}else{if(!o(Us))continue;f=n.def(u.uniforms,"[",t.id(h),"]")}d===ps?(ie(!Array.isArray(f),"must specify a scalar prop for textures"),n("if(",f,"&&",f,'._reglType==="framebuffer"){',f,"=",f,".color[0];","}")):d===hs&&(ie(!Array.isArray(f),"must specify a scalar prop for cube maps"),n("if(",f,"&&",f,'._reglType==="framebufferCube"){',f,"=",f,".color[0];","}")),ie.optional((function(){function t(t,r){e.assert(n,t,'bad data or missing for uniform "'+h+'".  '+r)}function r(e){ie(!Array.isArray(f),"must not specify an array type for uniform"),t("typeof "+f+'==="'+e+'"',"invalid type, expected "+e)}function i(n,r){Array.isArray(f)?ie(f.length===n,"must have length "+n):t(u.isArrayLike+"("+f+")&&"+f+".length==="+n,"invalid vector, should have length "+n,e.commandStr)}function o(n){ie(!Array.isArray(f),"must not specify a value type"),t("typeof "+f+'==="function"&&'+f+'._reglType==="texture'+(n===Ba?"2d":"Cube")+'"',"invalid texture type",e.commandStr)}switch(d){case ts:r("number");break;case ns:i(2,"number");break;case rs:i(3,"number");break;case is:i(4,"number");break;case $a:r("number");break;case Qa:i(2,"number");break;case Ja:i(3,"number");break;case es:i(4,"number");break;case os:r("boolean");break;case as:i(2,"boolean");break;case ss:i(3,"boolean");break;case us:i(4,"boolean");break;case cs:i(4,"number");break;case ls:i(9,"number");break;case fs:i(16,"number");break;case ps:o(Ba);break;case hs:o(Ua);break}}));var w=1;switch(d){case ps:case hs:var O=n.def(f,"._texture");n(c,".uniform1i(",g,",",O,".bind());"),n.exit(O,".unbind();");continue;case ts:case os:s="1i";break;case ns:case as:s="2i",w=2;break;case rs:case ss:s="3i",w=3;break;case is:case us:s="4i",w=4;break;case $a:s="1f";break;case Qa:s="2f",w=2;break;case Ja:s="3f",w=3;break;case es:s="4f",w=4;break;case cs:s="Matrix2fv";break;case ls:s="Matrix3fv";break;case fs:s="Matrix4fv";break}if("M"===s.charAt(0)){n(c,".uniform",s,"(",g,",");var E=Math.pow(d-cs+2,2),S=e.global.def("new Float32Array(",E,")");Array.isArray(f)?n("false,(",Ce(E,(function(e){return S+"["+e+"]="+f[e]})),",",S,")"):n("false,(Array.isArray(",f,")||",f," instanceof Float32Array)?",f,":(",Ce(E,(function(e){return S+"["+e+"]="+f+"["+e+"]"})),",",S,")"),n(");")}else if(w>1){for(var j=[],A=[],k=0;k<w;++k)Array.isArray(f)?A.push(f[k]):A.push(n.def(f+"["+k+"]")),a&&j.push(n.def());a&&n("if(!",e.batchId,"||",j.map((function(e,t){return e+"!=="+A[t]})).join("||"),"){",j.map((function(e,t){return e+"="+A[t]+";"})).join("")),n(c,".uniform",s,"(",g,",",A.join(","),");"),a&&n("}")}else{if(ie(!Array.isArray(f),"uniform value must not be an array"),a){var C=n.def();n("if(!",e.batchId,"||",C,"!==",f,"){",C,"=",f,";")}n(c,".uniform",s,"(",g,",",f,");"),a&&n("}")}}}function Q(e,t,n,r){var i=e.shared,o=i.gl,a=i.draw,s=r.draw;function u(){var u,c=s.elements,l=t;return c?((c.contextDep&&r.contextDynamic||c.propDep)&&(l=n),u=c.append(e,l),s.elementsActive&&l("if("+u+")"+o+".bindBuffer("+Na+","+u+".buffer.buffer);")):(u=l.def(),l(u,"=",a,".",_a,";","if(",u,"){",o,".bindBuffer(",Na,",",u,".buffer.buffer);}","else if(",i.vao,".currentVAO){",u,"=",e.shared.elements+".getElements("+i.vao,".currentVAO.elements);",_?"":"if("+u+")"+o+".bindBuffer("+Na+","+u+".buffer.buffer);","}")),u}function c(){var i,o=s.count,u=t;return o?((o.contextDep&&r.contextDynamic||o.propDep)&&(u=n),i=o.append(e,u),ie.optional((function(){o.MISSING&&e.assert(t,"false","missing vertex count"),o.DYNAMIC&&e.assert(u,i+">=0","missing vertex count")}))):(i=u.def(a,".",wa),ie.optional((function(){e.assert(u,i+">=0","missing vertex count")}))),i}var l=u();function f(i){var o=s[i];return o?o.contextDep&&r.contextDynamic||o.propDep?o.append(e,n):o.append(e,t):t.def(a,".",i)}var p,h,d=f(xa),v=f(Oa),m=c();if("number"===typeof m){if(0===m)return}else n("if(",m,"){"),n.exit("}");y&&(p=f(Ea),h=e.instancing);var g=l+".type",b=s.elements&&Fs(s.elements)&&!s.vaoActive;function x(){function e(){n(h,".drawElementsInstancedANGLE(",[d,m,g,v+"<<(("+g+"-"+Io+")>>1)",p],");")}function t(){n(h,".drawArraysInstancedANGLE(",[d,v,m,p],");")}l&&"null"!==l?b?e():(n("if(",l,"){"),e(),n("}else{"),t(),n("}")):t()}function w(){function e(){n(o+".drawElements("+[d,m,g,v+"<<(("+g+"-"+Io+")>>1)"]+");")}function t(){n(o+".drawArrays("+[d,v,m]+");")}l&&"null"!==l?b?e():(n("if(",l,"){"),e(),n("}else{"),t(),n("}")):t()}y&&("number"!==typeof p||p>=0)?"string"===typeof p?(n("if(",p,">0){"),x(),n("}else if(",p,"<0){"),w(),n("}")):x():w()}function J(e,t,n,r,i){var o=P(),a=o.proc("body",i);return ie.optional((function(){o.commandStr=t.commandStr,o.command=o.link(t.commandStr)})),y&&(o.instancing=a.def(o.shared.extensions,".angle_instanced_arrays")),e(o,a,n,r),o.compile().body}function ee(e,t,n,r){Y(e,t),n.useVAO?n.drawVAO?t(e.shared.vao,".setVAO(",n.drawVAO.append(e,t),");"):t(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(t(e.shared.vao,".setVAO(null);"),K(e,t,n,r.attributes,(function(){return!0}))),$(e,t,n,r.uniforms,(function(){return!0}),!1),Q(e,t,t,n)}function te(e,t){var n=e.proc("draw",1);Y(e,n),G(e,n,t.context),W(e,n,t.framebuffer),q(e,n,t),Z(e,n,t.state),X(e,n,t,!1,!0);var r=t.shader.progVar.append(e,n);if(n(e.shared.gl,".useProgram(",r,".program);"),t.shader.program)ee(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var i=e.global.def("{}"),o=n.def(r,".id"),a=n.def(i,"[",o,"]");n(e.cond(a).then(a,".call(this,a0);")["else"](a,"=",i,"[",o,"]=",e.link((function(n){return J(ee,e,t,n,1)})),"(",r,");",a,".call(this,a0);"))}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;"),e.shared.vao&&n(e.shared.vao,".setVAO(null);")}function ne(e,t,n,r){function i(){return!0}e.batchId="a1",Y(e,t),K(e,t,n,r.attributes,i),$(e,t,n,r.uniforms,i,!1),Q(e,t,t,n)}function re(e,t,n,r){Y(e,t);var i=n.contextDep,o=t.def(),a="a0",s="a1",u=t.def();e.shared.props=u,e.batchId=o;var c=e.scope(),l=e.scope();function f(e){return e.contextDep&&i||e.propDep}function p(e){return!f(e)}if(t(c.entry,"for(",o,"=0;",o,"<",s,";++",o,"){",u,"=",a,"[",o,"];",l,"}",c.exit),n.needsContext&&G(e,l,n.context),n.needsFramebuffer&&W(e,l,n.framebuffer),Z(e,l,n.state,f),n.profile&&f(n.profile)&&X(e,l,n,!1,!0),r)n.useVAO?n.drawVAO?f(n.drawVAO)?l(e.shared.vao,".setVAO(",n.drawVAO.append(e,l),");"):c(e.shared.vao,".setVAO(",n.drawVAO.append(e,c),");"):c(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(c(e.shared.vao,".setVAO(null);"),K(e,c,n,r.attributes,p),K(e,l,n,r.attributes,f)),$(e,c,n,r.uniforms,p,!1),$(e,l,n,r.uniforms,f,!0),Q(e,c,l,n);else{var h=e.global.def("{}"),d=n.shader.progVar.append(e,l),v=l.def(d,".id"),m=l.def(h,"[",v,"]");l(e.shared.gl,".useProgram(",d,".program);","if(!",m,"){",m,"=",h,"[",v,"]=",e.link((function(t){return J(ne,e,n,t,2)})),"(",d,");}",m,".call(this,a0[",o,"],",o,");")}}function oe(e,t){var n=e.proc("batch",2);e.batchId="0",Y(e,n);var r=!1,i=!0;Object.keys(t.context).forEach((function(e){r=r||t.context[e].propDep})),r||(G(e,n,t.context),i=!1);var o=t.framebuffer,a=!1;function s(e){return e.contextDep&&r||e.propDep}o?(o.propDep?r=a=!0:o.contextDep&&r&&(a=!0),a||W(e,n,o)):W(e,n,null),t.state.viewport&&t.state.viewport.propDep&&(r=!0),q(e,n,t),Z(e,n,t.state,(function(e){return!s(e)})),t.profile&&s(t.profile)||X(e,n,t,!1,"a1"),t.contextDep=r,t.needsContext=i,t.needsFramebuffer=a;var u=t.shader.progVar;if(u.contextDep&&r||u.propDep)re(e,n,t,null);else{var c=u.append(e,n);if(n(e.shared.gl,".useProgram(",c,".program);"),t.shader.program)re(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var l=e.global.def("{}"),f=n.def(c,".id"),p=n.def(l,"[",f,"]");n(e.cond(p).then(p,".call(this,a0,a1);")["else"](p,"=",l,"[",f,"]=",e.link((function(n){return J(re,e,t,n,2)})),"(",c,");",p,".call(this,a0,a1);"))}}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;"),e.shared.vao&&n(e.shared.vao,".setVAO(null);")}function ae(e,n){var r=e.proc("scope",3);e.batchId="a2";var i=e.shared,o=i.current;function a(t){var o=n.shader[t];o&&r.set(i.shader,"."+t,o.append(e,r))}G(e,r,n.context),n.framebuffer&&n.framebuffer.append(e,r),Ds(Object.keys(n.state)).forEach((function(t){var o=n.state[t],a=o.append(e,r);Tn(a)?a.forEach((function(n,i){r.set(e.next[t],"["+i+"]",n)})):r.set(i.next,"."+t,a)})),X(e,r,n,!0,!0),[_a,Oa,wa,Ea,xa].forEach((function(t){var o=n.draw[t];o&&r.set(i.draw,"."+t,""+o.append(e,r))})),Object.keys(n.uniforms).forEach((function(o){var a=n.uniforms[o].append(e,r);Array.isArray(a)&&(a="["+a.join()+"]"),r.set(i.uniforms,"["+t.id(o)+"]",a)})),Object.keys(n.attributes).forEach((function(t){var i=n.attributes[t].append(e,r),o=e.scopeAttrib(t);Object.keys(new m).forEach((function(e){r.set(o,"."+e,i[e])}))})),n.scopeVAO&&r.set(i.vao,".targetVAO",n.scopeVAO.append(e,r)),a(ya),a(ba),Object.keys(n.state).length>0&&(r(o,".dirty=true;"),r.exit(o,".dirty=true;")),r("a1(",e.shared.context,",a0,",e.batchId,");")}function se(e){if("object"===typeof e&&!Tn(e)){for(var t=Object.keys(e),n=0;n<t.length;++n)if(me.isDynamic(e[t[n]]))return!0;return!1}}function ue(e,t,n){var r=t["static"][n];if(r&&se(r)){var i=e.global,o=Object.keys(r),a=!1,s=!1,u=!1,c=e.global.def("{}");o.forEach((function(t){var n=r[t];if(me.isDynamic(n)){"function"===typeof n&&(n=r[t]=me.unbox(n));var o=Bs(n,null);a=a||o.thisDep,u=u||o.propDep,s=s||o.contextDep}else{switch(i(c,".",t,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(e.link(n));break}i(";")}})),t.dynamic[n]=new me.DynamicVariable(Bo,{thisDep:a,contextDep:s,propDep:u,ref:c,append:l}),delete t["static"][n]}function l(e,t){o.forEach((function(n){var i=r[n];if(me.isDynamic(i)){var o=e.invoke(t,i);t(c,".",n,"=",o,";")}}))}}function ce(e,t,r,i,o){var a=P();a.stats=a.link(o),Object.keys(t["static"]).forEach((function(e){ue(a,t,e)})),La.forEach((function(t){ue(a,e,t)}));var s=H(e,t,r,i,a);return te(a,s),ae(a,s),oe(a,s),n(a.compile(),{destroy:function(){s.shader.program.destroy()}})}return{next:w,current:x,procs:function(){var e=P(),t=e.proc("poll"),n=e.proc("refresh"),o=e.block();t(o),n(o);var a,s=e.shared,u=s.gl,c=s.next,l=s.current;o(l,".dirty=false;"),W(e,t),W(e,n,null,!0),y&&(a=e.link(y)),r.oes_vertex_array_object&&n(e.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var f=0;f<i.maxAttributes;++f){var p=n.def(s.attributes,"[",f,"]"),h=e.cond(p,".buffer");h.then(u,".enableVertexAttribArray(",f,");",u,".bindBuffer(",Da,",",p,".buffer.buffer);",u,".vertexAttribPointer(",f,",",p,".size,",p,".type,",p,".normalized,",p,".stride,",p,".offset);")["else"](u,".disableVertexAttribArray(",f,");",u,".vertexAttrib4f(",f,",",p,".x,",p,".y,",p,".z,",p,".w);",p,".buffer=null;"),n(h),y&&n(a,".vertexAttribDivisorANGLE(",f,",",p,".divisor);")}return n(e.shared.vao,".currentVAO=null;",e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"),Object.keys(E).forEach((function(r){var i=E[r],a=o.def(c,".",r),s=e.block();s("if(",a,"){",u,".enable(",i,")}else{",u,".disable(",i,")}",l,".",r,"=",a,";"),n(s),t("if(",a,"!==",l,".",r,"){",s,"}")})),Object.keys(S).forEach((function(r){var i,a,s=S[r],f=x[r],p=e.block();if(p(u,".",s,"("),Tn(f)){var h=f.length;i=e.global.def(c,".",r),a=e.global.def(l,".",r),p(Ce(h,(function(e){return i+"["+e+"]"})),");",Ce(h,(function(e){return a+"["+e+"]="+i+"["+e+"];"})).join("")),t("if(",Ce(h,(function(e){return i+"["+e+"]!=="+a+"["+e+"]"})).join("||"),"){",p,"}")}else i=o.def(c,".",r),a=o.def(l,".",r),p(i,");",l,".",r,"=",i,";"),t("if(",i,"!==",a,"){",p,"}");n(p)})),e.compile()}(),compile:ce}}function Hs(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Gs=34918,Ws=34919,qs=35007,Zs=function(e,t){if(!t.ext_disjoint_timer_query)return null;var n=[];function r(){return n.pop()||t.ext_disjoint_timer_query.createQueryEXT()}function i(e){n.push(e)}var o=[];function a(e){var n=r();t.ext_disjoint_timer_query.beginQueryEXT(qs,n),o.push(n),h(o.length-1,o.length,e)}function s(){t.ext_disjoint_timer_query.endQueryEXT(qs)}function u(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var c=[];function l(){return c.pop()||new u}function f(e){c.push(e)}var p=[];function h(e,t,n){var r=l();r.startQueryIndex=e,r.endQueryIndex=t,r.sum=0,r.stats=n,p.push(r)}var d=[],v=[];function m(){var e,n,r=o.length;if(0!==r){v.length=Math.max(v.length,r+1),d.length=Math.max(d.length,r+1),d[0]=0,v[0]=0;var a=0;for(e=0,n=0;n<o.length;++n){var s=o[n];t.ext_disjoint_timer_query.getQueryObjectEXT(s,Ws)?(a+=t.ext_disjoint_timer_query.getQueryObjectEXT(s,Gs),i(s)):o[e++]=s,d[n+1]=a,v[n+1]=e}for(o.length=e,e=0,n=0;n<p.length;++n){var u=p[n],c=u.startQueryIndex,l=u.endQueryIndex;u.sum+=d[l]-d[c];var h=v[c],m=v[l];m===h?(u.stats.gpuTime+=u.sum/1e6,f(u)):(u.startQueryIndex=h,u.endQueryIndex=m,p[e++]=u)}p.length=e}}return{beginQuery:a,endQuery:s,pushScopeStats:h,update:m,getNumPendingQueries:function(){return o.length},clear:function(){n.push.apply(n,o);for(var e=0;e<n.length;e++)t.ext_disjoint_timer_query.deleteQueryEXT(n[e]);o.length=0,n.length=0},restore:function(){o.length=0,n.length=0}}},Ys=16384,Xs=256,Ks=1024,$s=34962,Qs="webglcontextlost",Js="webglcontextrestored",eu=1,tu=2,nu=3;function ru(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}function iu(e){var t=Ae(e);if(!t)return null;var r=t.gl,i=r.getContextAttributes(),o=r.isContextLost(),a=ke(r,t);if(!a)return null;var s=_e(),u=Hs(),c=a.extensions,l=Zs(r,c),f=be(),p=r.drawingBufferWidth,h=r.drawingBufferHeight,d={tick:0,time:0,viewportWidth:p,viewportHeight:h,framebufferWidth:p,framebufferHeight:h,drawingBufferWidth:p,drawingBufferHeight:h,pixelRatio:t.pixelRatio},v={},m={elements:null,primitive:4,count:-1,offset:0,instances:-1},g=St(r,c),y=on(r,u,t,x),b=Sn(r,c,y,u),_=yo(r,c,g,u,y,b,m);function x(e){return _.destroyBuffer(e)}var w=Oo(r,s,u,t),O=mi(r,c,g,(function(){j.procs.poll()}),d,u,t),E=Ti(r,c,g,u,t),S=fo(r,c,g,O,E,u),j=Vs(r,s,c,g,y,b,O,S,v,_,w,m,d,l,t),A=ko(r,S,j.procs.poll,d,i,c,g),k=j.next,C=r.canvas,T=[],M=[],P=[],I=[t.onDestroy],R=null;function L(){if(0===T.length)return l&&l.update(),void(R=null);R=ge.next(L),Y();for(var e=T.length-1;e>=0;--e){var t=T[e];t&&t(d,null,0)}r.flush(),l&&l.update()}function D(){!R&&T.length>0&&(R=ge.next(L))}function N(){R&&(ge.cancel(L),R=null)}function F(e){e.preventDefault(),o=!0,N(),M.forEach((function(e){e()}))}function z(e){r.getError(),o=!1,a.restore(),w.restore(),y.restore(),O.restore(),E.restore(),S.restore(),_.restore(),l&&l.restore(),j.procs.refresh(),D(),P.forEach((function(e){e()}))}var B="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM;function U(){T.length=0,N(),!B&&C&&(C.removeEventListener(Qs,F),C.removeEventListener(Js,z)),w.clear(),S.clear(),E.clear(),_.clear(),O.clear(),b.clear(),y.clear(),l&&l.clear(),I.forEach((function(e){e()}))}function V(e){function t(e){var t=n({},e);function r(e){if(e in t){var n=t[e];delete t[e],Object.keys(n).forEach((function(r){t[e+"."+r]=n[r]}))}}return delete t.uniforms,delete t.attributes,delete t.context,delete t.vao,"stencil"in t&&t.stencil.op&&(t.stencil.opBack=t.stencil.opFront=t.stencil.op,delete t.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),"vao"in e&&(t.vao=e.vao),t}function r(e,t){var n={},r={};return Object.keys(e).forEach((function(i){var o=e[i];if(me.isDynamic(o))r[i]=me.unbox(o,i);else{if(t&&Array.isArray(o))for(var a=0;a<o.length;++a)if(me.isDynamic(o[a]))return void(r[i]=me.unbox(o,i));n[i]=o}})),{dynamic:r,static:n}}ie(!!e,"invalid args to regl({...})"),ie.type(e,"object","invalid args to regl({...})");var i=r(e.context||{},!0),a=r(e.uniforms||{},!0),s=r(e.attributes||{},!1),u=r(t(e),!1),c={gpuTime:0,cpuTime:0,count:0},l=j.compile(u,s,a,i,c),f=l.draw,p=l.batch,h=l.scope,d=[];function v(e){while(d.length<e)d.push(null);return d}function m(e,t){var n;if(o&&ie.raise("context lost"),"function"===typeof e)return h.call(this,null,e,0);if("function"===typeof t)if("number"===typeof e)for(n=0;n<e;++n)h.call(this,null,t,n);else{if(!Array.isArray(e))return h.call(this,e,t,0);for(n=0;n<e.length;++n)h.call(this,e[n],t,n)}else if("number"===typeof e){if(e>0)return p.call(this,v(0|e),0|e)}else{if(!Array.isArray(e))return f.call(this,e);if(e.length)return p.call(this,e,e.length)}}return n(m,{stats:c,destroy:function(){l.destroy()}})}!B&&C&&(C.addEventListener(Qs,F,!1),C.addEventListener(Js,z,!1));var H=S.setFBO=V({framebuffer:me.define.call(null,eu,"framebuffer")});function G(e,t){var n=0;j.procs.poll();var i=t.color;i&&(r.clearColor(+i[0]||0,+i[1]||0,+i[2]||0,+i[3]||0),n|=Ys),"depth"in t&&(r.clearDepth(+t.depth),n|=Xs),"stencil"in t&&(r.clearStencil(0|t.stencil),n|=Ks),ie(!!n,"called regl.clear with no buffer specified"),r.clear(n)}function W(e){if(ie("object"===typeof e&&e,"regl.clear() takes an object as input"),"framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var t=0;t<6;++t)H(n({framebuffer:e.framebuffer.faces[t]},e),G);else H(e,G);else G(null,e)}function q(e){function t(){var t=ru(T,e);function n(){var e=ru(T,n);T[e]=T[T.length-1],T.length-=1,T.length<=0&&N()}ie(t>=0,"cannot cancel a frame twice"),T[t]=n}return ie.type(e,"function","regl.frame() callback must be a function"),T.push(e),D(),{cancel:t}}function Z(){var e=k.viewport,t=k.scissor_box;e[0]=e[1]=t[0]=t[1]=0,d.viewportWidth=d.framebufferWidth=d.drawingBufferWidth=e[2]=t[2]=r.drawingBufferWidth,d.viewportHeight=d.framebufferHeight=d.drawingBufferHeight=e[3]=t[3]=r.drawingBufferHeight}function Y(){d.tick+=1,d.time=K(),Z(),j.procs.poll()}function X(){O.refresh(),Z(),j.procs.refresh(),l&&l.update()}function K(){return(be()-f)/1e3}function $(e,t){var n;switch(ie.type(t,"function","listener callback must be a function"),e){case"frame":return q(t);case"lost":n=M;break;case"restore":n=P;break;case"destroy":n=I;break;default:ie.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(t),{cancel:function(){for(var e=0;e<n.length;++e)if(n[e]===t)return n[e]=n[n.length-1],void n.pop()}}}X();var Q=n(V,{clear:W,prop:me.define.bind(null,eu),context:me.define.bind(null,tu),this:me.define.bind(null,nu),draw:V({}),buffer:function(e){return y.create(e,$s,!1,!1)},elements:function(e){return b.create(e,!1)},texture:O.create2D,cube:O.createCube,renderbuffer:E.create,framebuffer:S.create,framebufferCube:S.createCube,vao:_.createVAO,attributes:i,frame:q,on:$,limits:g,hasExtension:function(e){return g.extensions.indexOf(e.toLowerCase())>=0},read:A,destroy:U,_gl:r,_refresh:X,poll:function(){Y(),l&&l.update()},now:K,stats:u});return t.onDone(null,Q),Q}return iu}))},SYor:function(e,t,n){"use strict";var r=n("I+eb"),i=n("WKiH").trim,o=n("yNLB");r({target:"String",proto:!0,forced:o("trim")},{trim:function(){return i(this)}})},SfRM:function(e,t,n){var r=n("YESw");function i(){this.__data__=r?r(null):{},this.size=0}e.exports=i},Si40:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("0GbY"),a=n("glrk"),s=n("HAuM"),u=n("SEBh"),c=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:function(e){var t=a(this),n=new(u(t,o("Set")))(t),r=s(n["delete"]),i=s(n.add);return c(e,(function(e){r.call(n,e)||i.call(n,e)})),n}})},Sk89:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.postConstruct=void 0;var r=n("MON2"),i=n("xfSm"),o=n("GXnB");function a(){return function(e,t,n){var a=new o.Metadata(i.POST_CONSTRUCT,t);if(Reflect.hasOwnMetadata(i.POST_CONSTRUCT,e.constructor))throw new Error(r.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(i.POST_CONSTRUCT,a,e.constructor)}}t.postConstruct=a},SpvK:function(e,t,n){var r=n("dOgj");r("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},Sssf:function(e,t,n){var r=n("xDBR"),i=n("mh/w");e.exports=r?i:function(e){return Map.prototype.entries.call(e)}},SuFq:function(e,t,n){var r=n("I+eb"),i=n("0GbY"),o=n("HAuM"),a=n("glrk"),s=n("hh1v"),u=n("fHMY"),c=n("BTho"),l=n("0Dky"),f=i("Reflect","construct"),p=l((function(){function e(){}return!(f((function(){}),[],e)instanceof e)})),h=!l((function(){f((function(){}))})),d=p||h;r({target:"Reflect",stat:!0,forced:d,sham:d},{construct:function(e,t){o(e),a(t);var n=arguments.length<3?e:o(arguments[2]);if(h&&!p)return f(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(c.apply(e,r))}var i=n.prototype,l=u(s(i)?i:Object.prototype),d=Function.apply.call(e,l,t);return s(d)?d:l}})},T1AV:function(e,t,n){var r=n("t2Dn"),i=n("5Tg0"),o=n("yP5f"),a=n("Q1l4"),s=n("+iFO"),u=n("03A+"),c=n("Z0cm"),l=n("3L66"),f=n("DSRE"),p=n("lSCD"),h=n("GoyQ"),d=n("YO3V"),v=n("c6wG"),m=n("itsj"),g=n("jeLo");function y(e,t,n,y,b,_,x){var w=m(e,n),O=m(t,n),E=x.get(O);if(E)r(e,n,E);else{var S=_?_(w,O,n+"",e,t,x):void 0,j=void 0===S;if(j){var A=c(O),k=!A&&f(O),C=!A&&!k&&v(O);S=O,A||k||C?c(w)?S=w:l(w)?S=a(w):k?(j=!1,S=i(O,!0)):C?(j=!1,S=o(O,!0)):S=[]:d(O)||u(O)?(S=w,u(w)?S=g(w):h(w)&&!p(w)||(S=s(O))):j=!1}j&&(x.set(O,S),b(S,O,y,_,x),x["delete"](O)),r(e,n,S)}}e.exports=y},T5bk:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("DSFK"),i=n("25BE"),o=n("BsWD"),a=n("PYwp");function s(e){return Object(r["a"])(e)||Object(i["a"])(e)||Object(o["a"])(e)||Object(a["a"])()}},T63A:function(e,t,n){var r=n("I+eb"),i=n("b1O7").entries;r({target:"Object",stat:!0},{entries:function(e){return i(e)}})},TIQr:function(e,t,n){"use strict";e.exports=i,e.exports["default"]=i;var r=1e20;function i(e,t,n,r,i,o){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer,s=a+2*this.buffer,u="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM;u?this.canvas=my.createOffscreenCanvas(a,a,"2d"):(this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a),this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=u?Math.round(a/2*1):Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function o(e,t,n,i,o,a,s){a.fill(r,0,t*n),s.fill(0,0,t*n);for(var u=(t-i)/2,c=0;c<o;c++)for(var l=0;l<i;l++){var f=(c+u)*t+l+u,p=e.data[4*(c*i+l)+3]/255;if(1===p)a[f]=0,s[f]=r;else if(0===p)a[f]=r,s[f]=0;else{var h=Math.max(0,.5-p),d=Math.max(0,p-.5);a[f]=h*h,s[f]=d*d}}}function a(e,t,n,r,i,o,a){for(var s=0;s<t*n;s++){var u=Math.sqrt(r[s])-Math.sqrt(i[s]);e[s]=Math.round(255-255*(u/o+a))}}function s(e,t,n,r,i,o){for(var a=0;a<t;a++)u(e,a,t,n,r,i,o);for(var s=0;s<n;s++)u(e,s*t,1,t,r,i,o)}function u(e,t,n,i,o,a,s){var u,c,l,f;for(a[0]=0,s[0]=-r,s[1]=r,u=0;u<i;u++)o[u]=e[t+u*n];for(u=1,c=0,l=0;u<i;u++){do{f=a[c],l=(o[u]-o[f]+u*u-f*f)/(u-f)/2}while(l<=s[c]&&--c>-1);c++,a[c]=u,s[c]=l,s[c+1]=r}for(u=0,c=0;u<i;u++){while(s[c+1]<u)c++;f=a[c],e[t+u*n]=o[f]+(u-f)*(u-f)}}i.prototype._draw=function(e,t){var n,r,i,u,c,l,f,p,h,d=this.ctx.measureText(e),v=d.width,m=2*this.buffer;t&&this.useMetrics?(c=Math.floor(d.actualBoundingBoxAscent),p=this.buffer+Math.ceil(d.actualBoundingBoxAscent),l=this.buffer,f=this.buffer,r=Math.min(this.size,Math.ceil(d.actualBoundingBoxRight-d.actualBoundingBoxLeft)),u=Math.min(this.size-l,Math.ceil(d.actualBoundingBoxAscent+d.actualBoundingBoxDescent)),n=r+m,i=u+m,this.ctx.textBaseline="alphabetic"):(n=r=this.size,i=u=this.size,c=19*this.fontSize/24,l=f=0,p=this.middle,this.ctx.textBaseline="middle"),r&&u&&(this.ctx.clearRect(f,l,r,u),this.ctx.fillText(e,this.buffer,p),h=this.ctx.getImageData(f,l,r,u));var g=new Uint8ClampedArray(n*i);return o(h,n,i,r,u,this.gridOuter,this.gridInner),s(this.gridOuter,n,i,this.f,this.v,this.z),s(this.gridInner,n,i,this.f,this.v,this.z),a(g,n,i,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:g,metrics:{width:r,height:u,sdfWidth:n,sdfHeight:i,top:c,left:0,advance:v}}},i.prototype.draw=function(e){return this._draw(e,!1).data},i.prototype.drawWithMetrics=function(e){return this._draw(e,!0)}},TJ79:function(e,t,n){var r=n("I+eb"),i=n("P940");r({target:"WeakMap",stat:!0},{of:i})},TLyq:function(e,t,n){"use strict";var r=n("MgzW"),i=n("q1tI");t.useSubscription=function(e){var t=e.getCurrentValue,n=e.subscribe,o=i.useState((function(){return{getCurrentValue:t,subscribe:n,value:t()}}));e=o[0];var a=o[1];return o=e.value,e.getCurrentValue===t&&e.subscribe===n||(o=t(),a({getCurrentValue:t,subscribe:n,value:o})),i.useDebugValue(o),i.useEffect((function(){function e(){if(!i){var e=t();a((function(i){return i.getCurrentValue!==t||i.subscribe!==n||i.value===e?i:r({},i,{value:e})}))}}var i=!1,o=n(e);return e(),function(){i=!0,o()}}),[t,n]),o}},TNol:function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));var r=n("q1tI"),i=n("MNnm"),o=Object(i["a"])()?r["useLayoutEffect"]:r["useEffect"];t["a"]=o;var a=function(e,t){var n=r["useRef"](!0);o((function(){if(!n.current)return e()}),t),o((function(){return n.current=!1,function(){n.current=!0}}),[])}},TOwV:function(e,t,n){"use strict";e.exports=n("qT12")},TSYQ:function(e,t,n){var r,i;(function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)){if(r.length){var a=o.apply(null,r);a&&e.push(a)}}else if("object"===i){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}}return e.join(" ")}e.exports?(o["default"]=o,e.exports=o):(r=[],i=function(){return o}.apply(t,r),void 0===i||(e.exports=i))})()},TWNs:function(e,t,n){var r=n("g6v/"),i=n("2oRo"),o=n("lMq5"),a=n("cVYH"),s=n("m/L8").f,u=n("JBy8").f,c=n("ROdP"),l=n("rW0t"),f=n("n3/R"),p=n("busE"),h=n("0Dky"),d=n("afO8").set,v=n("JiZb"),m=n("tiKp"),g=m("match"),y=i.RegExp,b=y.prototype,_=/a/g,x=/a/g,w=new y(_)!==_,O=f.UNSUPPORTED_Y,E=r&&o("RegExp",!w||O||h((function(){return x[g]=!1,y(_)!=_||y(x)==x||"/a/i"!=y(_,"i")})));if(E){var S=function(e,t){var n,r=this instanceof S,i=c(e),o=void 0===t;if(!r&&i&&e.constructor===S&&o)return e;w?i&&!o&&(e=e.source):e instanceof S&&(o&&(t=l.call(e)),e=e.source),O&&(n=!!t&&t.indexOf("y")>-1,n&&(t=t.replace(/y/g,"")));var s=a(w?new y(e,t):y(e,t),r?this:b,S);return O&&n&&d(s,{sticky:n}),s},j=function(e){e in S||s(S,e,{configurable:!0,get:function(){return y[e]},set:function(t){y[e]=t}})},A=u(y),k=0;while(A.length>k)j(A[k++]);b.constructor=S,S.prototype=b,p(i,"RegExp",S)}v("RegExp")},TWQb:function(e,t,n){var r=n("/GqU"),i=n("UMSQ"),o=n("I8vh"),a=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){while(c>l)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},TZCg:function(e,t,n){"use strict";var r=n("I+eb"),i=n("DMt2").start,o=n("mgyK");r({target:"String",proto:!0,forced:o},{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},TeQF:function(e,t,n){"use strict";var r=n("I+eb"),i=n("tycR").filter,o=n("Hd5f"),a=n("rkAj"),s=o("filter"),u=a("filter");r({target:"Array",proto:!0,forced:!s||!u},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},TeRw:function(e,t,n){"use strict";n.r(t),n.d(t,"getInstance",(function(){return Q}));var r=n("x+uP"),i=n("wx14"),o=n("rePB"),a=n("VTBJ"),s=n("q1tI"),u={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},c=u,l=n("6VBw"),f=function(e,t){return s["createElement"](l["a"],Object(a["a"])(Object(a["a"])({},e),{},{ref:t,icon:c}))};f.displayName="CheckCircleOutlined";var p=s["forwardRef"](f),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attrs:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"close-circle",theme:"outlined"},d=h,v=function(e,t){return s["createElement"](l["a"],Object(a["a"])(Object(a["a"])({},e),{},{ref:t,icon:d}))};v.displayName="CloseCircleOutlined";var m=s["forwardRef"](v),g=n("4i/N"),y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},b=y,_=function(e,t){return s["createElement"](l["a"],Object(a["a"])(Object(a["a"])({},e),{},{ref:t,icon:b}))};_.displayName="ExclamationCircleOutlined";var x=s["forwardRef"](_),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},O=w,E=function(e,t){return s["createElement"](l["a"],Object(a["a"])(Object(a["a"])({},e),{},{ref:t,icon:O}))};E.displayName="InfoCircleOutlined";var S=s["forwardRef"](E),j=n("TSYQ"),A=n.n(j),k=n("8tx+"),C=n("wEI+"),T=n("ODXe"),M=n("8HVG"),P=n("H84U");function I(e,t){var n=function(){var n,r=null,o={add:function(e,t){null===r||void 0===r||r.component.add(e,t)}},a=Object(M["a"])(o),u=Object(T["a"])(a,2),c=u[0],l=u[1];function f(o){var a=o.prefixCls,s=n("notification",a);e(Object(i["a"])(Object(i["a"])({},o),{prefixCls:s}),(function(e){var n=e.prefixCls,i=e.instance;r=i,c(t(o,n))}))}var p=s["useRef"]({});return p.current.open=f,["success","info","warning","error"].forEach((function(e){p.current[e]=function(t){return p.current.open(Object(i["a"])(Object(i["a"])({},t),{type:e}))}})),[p.current,s["createElement"](P["a"],{key:"holder"},(function(e){return n=e.getPrefixCls,l}))]};return n}var R,L,D,N=function(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r["throw"](e))}catch(t){o(t)}}function u(e){e.done?n(e.value):i(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},F={},z=4.5,B=24,U=24,V="",H="topRight",G=!1;function W(e){var t=e.duration,n=e.placement,r=e.bottom,i=e.top,o=e.getContainer,a=e.closeIcon,s=e.prefixCls;void 0!==s&&(V=s),void 0!==t&&(z=t),void 0!==n?H=n:e.rtl&&(H="topLeft"),void 0!==r&&(U=r),void 0!==i&&(B=i),void 0!==o&&(R=o),void 0!==a&&(L=a),void 0!==e.rtl&&(G=e.rtl),void 0!==e.maxCount&&(D=e.maxCount)}function q(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:U;switch(e){case"top":t={left:"50%",transform:"translateX(-50%)",right:"auto",top:n,bottom:"auto"};break;case"topLeft":t={left:0,top:n,bottom:"auto"};break;case"topRight":t={right:0,top:n,bottom:"auto"};break;case"bottom":t={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:r};break;case"bottomLeft":t={left:0,top:"auto",bottom:r};break;default:t={right:0,top:"auto",bottom:r};break}return t}function Z(e,t){var n=e.placement,r=void 0===n?H:n,i=e.top,a=e.bottom,s=e.getContainer,u=void 0===s?R:s,c=e.prefixCls,l=Object(C["b"])(),f=l.getPrefixCls,p=l.getIconPrefixCls,h=f("notification",c||V),d=p(),v="".concat(h,"-").concat(r),m=F[v];if(m)Promise.resolve(m).then((function(e){t({prefixCls:"".concat(h,"-notice"),iconPrefixCls:d,instance:e})}));else{var g=A()("".concat(h,"-").concat(r),Object(o["a"])({},"".concat(h,"-rtl"),!0===G));F[v]=new Promise((function(e){k["a"].newInstance({prefixCls:h,className:g,style:q(r,i,a),getContainer:u,maxCount:D},(function(n){e(n),t({prefixCls:"".concat(h,"-notice"),iconPrefixCls:d,instance:n})}))}))}}var Y={success:p,info:S,error:m,warning:x};function X(e,t,n){var r=e.duration,i=e.icon,a=e.type,u=e.description,c=e.message,l=e.btn,f=e.onClose,p=e.onClick,h=e.key,d=e.style,v=e.className,m=e.closeIcon,y=void 0===m?L:m,b=e.props,_=void 0===r?z:r,x=null;i?x=s["createElement"]("span",{className:"".concat(t,"-icon")},e.icon):a&&(x=s["createElement"](Y[a]||null,{className:"".concat(t,"-icon ").concat(t,"-icon-").concat(a)}));var w=s["createElement"]("span",{className:"".concat(t,"-close-x")},y||s["createElement"](g["a"],{className:"".concat(t,"-close-icon")})),O=!u&&x?s["createElement"]("span",{className:"".concat(t,"-message-single-line-auto-margin")}):null;return{content:s["createElement"](C["a"],{iconPrefixCls:n},s["createElement"]("div",{className:x?"".concat(t,"-with-icon"):"",role:"alert"},x,s["createElement"]("div",{className:"".concat(t,"-message")},O,c),s["createElement"]("div",{className:"".concat(t,"-description")},u),l?s["createElement"]("span",{className:"".concat(t,"-btn")},l):null)),duration:_,closable:!0,closeIcon:w,onClose:f,onClick:p,key:h,style:d||{},className:A()(v,Object(o["a"])({},"".concat(t,"-").concat(a),!!a)),props:b}}function K(e){Z(e,(function(t){var n=t.prefixCls,r=t.iconPrefixCls,i=t.instance;i.notice(X(e,n,r))}))}var $={open:K,close:function(e){Object.keys(F).forEach((function(t){return Promise.resolve(F[t]).then((function(t){t.removeNotice(e)}))}))},config:W,destroy:function(){Object.keys(F).forEach((function(e){Promise.resolve(F[e]).then((function(e){e.destroy()})),delete F[e]}))}};["success","info","warning","error"].forEach((function(e){$[e]=function(t){return $.open(Object(i["a"])(Object(i["a"])({},t),{type:e}))}})),$.warn=$.warning,$.useNotification=I(Z,X);var Q=function(e){return N(void 0,void 0,void 0,Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})))};t["default"]=$},TfTi:function(e,t,n){"use strict";var r=n("A2ZE"),i=n("ewvW"),o=n("m92n"),a=n("6VoE"),s=n("UMSQ"),u=n("hBjN"),c=n("NaFW");e.exports=function(e){var t,n,l,f,p,h,d=i(e),v="function"==typeof this?this:Array,m=arguments.length,g=m>1?arguments[1]:void 0,y=void 0!==g,b=c(d),_=0;if(y&&(g=r(g,m>2?arguments[2]:void 0,2)),void 0==b||v==Array&&a(b))for(t=s(d.length),n=new v(t);t>_;_++)h=y?g(d[_],_):d[_],u(n,_,h);else for(f=b.call(d),p=f.next,n=new v;!(l=p.call(f)).done;_++)h=y?o(f,g,[l.value,_],!0):l.value,u(n,_,h);return n.length=_,n}},Thag:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("A2ZE"),s=n("Sssf"),u=n("ImZN");r({target:"Map",proto:!0,real:!0,forced:i},{some:function(e){var t=o(this),n=s(t),r=a(e,arguments.length>1?arguments[1]:void 0,3);return u(n,(function(e,n){if(r(n,e,t))return u.stop()}),void 0,!0,!0).stopped}})},ToJy:function(e,t,n){"use strict";var r=n("I+eb"),i=n("HAuM"),o=n("ewvW"),a=n("0Dky"),s=n("pkCn"),u=[],c=u.sort,l=a((function(){u.sort(void 0)})),f=a((function(){u.sort(null)})),p=s("sort"),h=l||!f||!p;r({target:"Array",proto:!0,forced:h},{sort:function(e){return void 0===e?c.call(o(this)):c.call(o(this),i(e))}})},Tskq:function(e,t,n){"use strict";var r=n("bWFh"),i=n("ZWaQ");e.exports=r("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},Ty5D:function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return k})),n.d(t,"d",(function(){return R})),n.d(t,"e",(function(){return b})),n.d(t,"f",(function(){return U})),n.d(t,"g",(function(){return V})),n.d(t,"h",(function(){return y})),n.d(t,"i",(function(){return I})),n.d(t,"j",(function(){return W})),n.d(t,"k",(function(){return q})),n.d(t,"l",(function(){return Z})),n.d(t,"m",(function(){return Y})),n.d(t,"n",(function(){return H}));var r=n("dI71"),i=n("q1tI"),o=n.n(i),a=n("YS25"),s=n("tEiQ"),u=n("9R94"),c=n("wx14"),l=n("vRGJ"),f=n.n(l),p=(n("TOwV"),n("zLVn")),h=n("2mql"),d=n.n(h),v=function(e){var t=Object(s["a"])();return t.displayName=e,t},m=v("Router-History"),g=function(e){var t=Object(s["a"])();return t.displayName=e,t},y=g("Router"),b=function(e){function t(t){var n;return n=e.call(this,t)||this,n.state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}Object(r["a"])(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return o.a.createElement(y.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},o.a.createElement(m.Provider,{children:this.props.children||null,value:this.props.history}))},t}(o.a.Component);var _=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,t.history=Object(a["d"])(t.props),t}Object(r["a"])(t,e);var n=t.prototype;return n.render=function(){return o.a.createElement(b,{history:this.history,children:this.props.children})},t}(o.a.Component);var x=function(e){function t(){return e.apply(this,arguments)||this}Object(r["a"])(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(o.a.Component);function w(e){var t=e.message,n=e.when,r=void 0===n||n;return o.a.createElement(y.Consumer,null,(function(e){if(e||Object(u["a"])(!1),!r||e.staticContext)return null;var n=e.history.block;return o.a.createElement(x,{onMount:function(e){e.release=n(t)},onUpdate:function(e,r){r.message!==t&&(e.release(),e.release=n(t))},onUnmount:function(e){e.release()},message:t})}))}var O={},E=1e4,S=0;function j(e){if(O[e])return O[e];var t=f.a.compile(e);return S<E&&(O[e]=t,S++),t}function A(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:j(e)(t,{pretty:!0})}function k(e){var t=e.computedMatch,n=e.to,r=e.push,i=void 0!==r&&r;return o.a.createElement(y.Consumer,null,(function(e){e||Object(u["a"])(!1);var r=e.history,s=e.staticContext,l=i?r.push:r.replace,f=Object(a["c"])(t?"string"===typeof n?A(n,t.params):Object(c["a"])({},n,{pathname:A(n.pathname,t.params)}):n);return s?(l(f),null):o.a.createElement(x,{onMount:function(){l(f)},onUpdate:function(e,t){var n=Object(a["c"])(t.to);Object(a["f"])(n,Object(c["a"])({},f,{key:n.key}))||l(f)},to:n})}))}var C={},T=1e4,M=0;function P(e,t){var n=""+t.end+t.strict+t.sensitive,r=C[n]||(C[n]={});if(r[e])return r[e];var i=[],o=f()(e,i,t),a={regexp:o,keys:i};return M<T&&(r[e]=a,M++),a}function I(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,o=void 0!==i&&i,a=n.strict,s=void 0!==a&&a,u=n.sensitive,c=void 0!==u&&u,l=[].concat(r);return l.reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=P(n,{end:o,strict:s,sensitive:c}),i=r.regexp,a=r.keys,u=i.exec(e);if(!u)return null;var l=u[0],f=u.slice(1),p=e===l;return o&&!p?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:p,params:a.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var R=function(e){function t(){return e.apply(this,arguments)||this}Object(r["a"])(t,e);var n=t.prototype;return n.render=function(){var e=this;return o.a.createElement(y.Consumer,null,(function(t){t||Object(u["a"])(!1);var n=e.props.location||t.location,r=e.props.computedMatch?e.props.computedMatch:e.props.path?I(n.pathname,e.props):t.match,i=Object(c["a"])({},t,{location:n,match:r}),a=e.props,s=a.children,l=a.component,f=a.render;return Array.isArray(s)&&0===s.length&&(s=null),o.a.createElement(y.Provider,{value:i},i.match?s?"function"===typeof s?s(i):s:l?o.a.createElement(l,i):f?f(i):null:"function"===typeof s?s(i):null)}))},t}(o.a.Component);function L(e){return"/"===e.charAt(0)?e:"/"+e}function D(e,t){return e?Object(c["a"])({},t,{pathname:L(e)+t.pathname}):t}function N(e,t){if(!e)return t;var n=L(e);return 0!==t.pathname.indexOf(n)?t:Object(c["a"])({},t,{pathname:t.pathname.substr(n.length)})}function F(e){return"string"===typeof e?e:Object(a["e"])(e)}function z(e){return function(){Object(u["a"])(!1)}}function B(){}var U=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,t.handlePush=function(e){return t.navigateTo(e,"PUSH")},t.handleReplace=function(e){return t.navigateTo(e,"REPLACE")},t.handleListen=function(){return B},t.handleBlock=function(){return B},t}Object(r["a"])(t,e);var n=t.prototype;return n.navigateTo=function(e,t){var n=this.props,r=n.basename,i=void 0===r?"":r,o=n.context,s=void 0===o?{}:o;s.action=t,s.location=D(i,Object(a["c"])(e)),s.url=F(s.location)},n.render=function(){var e=this.props,t=e.basename,n=void 0===t?"":t,r=e.context,i=void 0===r?{}:r,s=e.location,u=void 0===s?"/":s,l=Object(p["a"])(e,["basename","context","location"]),f={createHref:function(e){return L(n+F(e))},action:"POP",location:N(n,Object(a["c"])(u)),push:this.handlePush,replace:this.handleReplace,go:z("go"),goBack:z("goBack"),goForward:z("goForward"),listen:this.handleListen,block:this.handleBlock};return o.a.createElement(b,Object(c["a"])({},l,{history:f,staticContext:i}))},t}(o.a.Component);var V=function(e){function t(){return e.apply(this,arguments)||this}Object(r["a"])(t,e);var n=t.prototype;return n.render=function(){var e=this;return o.a.createElement(y.Consumer,null,(function(t){t||Object(u["a"])(!1);var n,r,i=e.props.location||t.location;return o.a.Children.forEach(e.props.children,(function(e){if(null==r&&o.a.isValidElement(e)){n=e;var a=e.props.path||e.props.from;r=a?I(i.pathname,Object(c["a"])({},e.props,{path:a})):t.match}})),r?o.a.cloneElement(n,{location:i,computedMatch:r}):null}))},t}(o.a.Component);function H(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,r=Object(p["a"])(t,["wrappedComponentRef"]);return o.a.createElement(y.Consumer,null,(function(t){return t||Object(u["a"])(!1),o.a.createElement(e,Object(c["a"])({},r,t,{ref:n}))}))};return n.displayName=t,n.WrappedComponent=e,d()(n,e)}var G=o.a.useContext;function W(){return G(m)}function q(){return G(y).location}function Z(){var e=G(y).match;return e?e.params:{}}function Y(e){var t=q(),n=G(y).match;return e?I(t.pathname,e):n}},"U/TZ":function(e,t,n){"use strict";function r(){var e=n("q1tI");return r=function(){return e},e}function i(e,t){return c(e)||u(e,t)||a(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function c(e){if(Array.isArray(e))return e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var l=function(e,t){var n=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r={};return Object.keys(t[1]).forEach((function(e){var n=(e.match(/^(.+)\.([^_]+)$/)||[]).slice(1),o=i(n,2),a=o[0],s=o[1];s&&s!==t[0]||(r[a||e]=t[1][e])})),r},o=(0,r().useState)(n(e,t)),a=i(o,2),s=a[0],u=a[1];return(0,r().useEffect)((function(){u(n(e,t))}),[e,t]),s};t["default"]=l},U3f4:function(e,t,n){var r=n("g6v/"),i=n("m/L8"),o=n("rW0t"),a=n("n3/R").UNSUPPORTED_Y;r&&("g"!=/./g.flags||a)&&i.f(RegExp.prototype,"flags",{configurable:!0,get:o})},U8pU:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,"a",(function(){return r}))},UMSQ:function(e,t,n){var r=n("ppGB"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},"UNi/":function(e,t){function n(e,t){var n=-1,r=Array(e);while(++n<e)r[n]=t(n);return r}e.exports=n},UTVS:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},UVaH:function(e,t,n){"use strict";var r="undefined"!==typeof Symbol&&Symbol,i=n("FpZJ");e.exports=function(){return"function"===typeof r&&("function"===typeof Symbol&&("symbol"===typeof r("foo")&&("symbol"===typeof Symbol("bar")&&i())))}},Ucsi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Symbol["for"]("INJECTION");function i(e,t,n,i){function o(){return i&&!Reflect.hasMetadata(r,this,t)&&Reflect.defineMetadata(r,n(),this,t),Reflect.hasMetadata(r,this,t)?Reflect.getMetadata(r,this,t):n()}function a(e){Reflect.defineMetadata(r,e,this,t)}Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:o,set:a})}function o(e,t){return function(n){return function(r,o){var a=function(){return e.get(n)};i(r,o,a,t)}}}function a(e,t){return function(n,r){return function(o,a){var s=function(){return e.getNamed(n,r)};i(o,a,s,t)}}}function s(e,t){return function(n,r,o){return function(a,s){var u=function(){return e.getTagged(n,r,o)};i(a,s,u,t)}}}function u(e,t){return function(n){return function(r,o){var a=function(){return e.getAll(n)};i(r,o,a,t)}}}t.makePropertyInjectDecorator=o,t.makePropertyInjectNamedDecorator=a,t.makePropertyInjectTaggedDecorator=s,t.makePropertyMultiInjectDecorator=u},UesL:function(e,t,n){"use strict";var r=n("glrk"),i=n("wE6v");e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(r(this),"number"!==e)}},UxlC:function(e,t,n){"use strict";var r=n("14Sl"),i=n("glrk"),o=n("ewvW"),a=n("UMSQ"),s=n("ppGB"),u=n("HYAF"),c=n("iqWW"),l=n("FMNM"),f=Math.max,p=Math.min,h=Math.floor,d=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g,m=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,t,n,r){var g=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,y=r.REPLACE_KEEPS_$0,b=g?"$":"$0";return[function(n,r){var i=u(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,i,r):t.call(String(i),n,r)},function(e,r){if(!g&&y||"string"===typeof r&&-1===r.indexOf(b)){var o=n(t,e,this,r);if(o.done)return o.value}var u=i(e),h=String(this),d="function"===typeof r;d||(r=String(r));var v=u.global;if(v){var x=u.unicode;u.lastIndex=0}var w=[];while(1){var O=l(u,h);if(null===O)break;if(w.push(O),!v)break;var E=String(O[0]);""===E&&(u.lastIndex=c(h,a(u.lastIndex),x))}for(var S="",j=0,A=0;A<w.length;A++){O=w[A];for(var k=String(O[0]),C=f(p(s(O.index),h.length),0),T=[],M=1;M<O.length;M++)T.push(m(O[M]));var P=O.groups;if(d){var I=[k].concat(T,C,h);void 0!==P&&I.push(P);var R=String(r.apply(void 0,I))}else R=_(k,h,C,T,P,r);C>=j&&(S+=h.slice(j,C)+R,j=C+k.length)}return S+h.slice(j)}];function _(e,n,r,i,a,s){var u=r+e.length,c=i.length,l=v;return void 0!==a&&(a=o(a),l=d),t.call(s,l,(function(t,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(u);case"<":s=a[o.slice(1,-1)];break;default:var l=+o;if(0===l)return t;if(l>c){var f=h(l/10);return 0===f?t:f<=c?void 0===i[f-1]?o.charAt(1):i[f-1]+o.charAt(1):t}s=i[l-1]}return void 0===s?"":s}))}}))},Uydy:function(e,t,n){var r=n("I+eb"),i=n("HsHA"),o=Math.acosh,a=Math.log,s=Math.sqrt,u=Math.LN2,c=!o||710!=Math.floor(o(Number.MAX_VALUE))||o(1/0)!=1/0;r({target:"Math",stat:!0,forced:c},{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?a(e)+u:i(e-1+s(e-1)*s(e+1))}})},UzNg:function(e,t,n){"use strict";var r=n("I+eb"),i=n("ntOU"),o=n("HYAF"),a=n("afO8"),s=n("ZUd8"),u=s.codeAt,c=s.charAt,l="String Iterator",f=a.set,p=a.getterFor(l),h=i((function(e){f(this,{type:l,string:e,index:0})}),"String",(function(){var e,t=p(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=c(n,r),t.index+=e.length,{value:{codePoint:u(e,0),position:r},done:!1})}));r({target:"String",proto:!0},{codePoints:function(){return new h(String(o(this)))}})},"V/vL":function(e,t,n){"use strict";n.r(t),n.d(t,"matchRoutes",(function(){return s})),n.d(t,"renderRoutes",(function(){return u}));var r=n("Ty5D"),i=n("wx14"),o=n("q1tI"),a=n.n(o);function s(e,t,n){return void 0===n&&(n=[]),e.some((function(e){var i=e.path?Object(r["i"])(t,e):n.length?n[n.length-1].match:r["e"].computeRootMatch(t);return i&&(n.push({route:e,match:i}),e.routes&&s(e.routes,t,n)),i})),n}function u(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),e?a.a.createElement(r["g"],n,e.map((function(e,n){return a.a.createElement(r["d"],{key:e.key||n,path:e.path,exact:e.exact,strict:e.strict,render:function(n){return e.render?e.render(Object(i["a"])({},n,{},t,{route:e})):a.a.createElement(e.component,Object(i["a"])({},n,t,{route:e}))}})}))):null}},V6Ve:function(e,t,n){var r=n("kekF"),i=r(Object.keys,Object);e.exports=i},V93i:function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())}))}},VAJa:function(e,t,n){"use strict";var r=n("AM7I"),i=n("VF6F"),o=n("JxQ3"),a=r("%TypeError%"),s=r("%WeakMap%",!0),u=r("%Map%",!0),c=i("WeakMap.prototype.get",!0),l=i("WeakMap.prototype.set",!0),f=i("WeakMap.prototype.has",!0),p=i("Map.prototype.get",!0),h=i("Map.prototype.set",!0),d=i("Map.prototype.has",!0),v=function(e,t){for(var n,r=e;null!==(n=r.next);r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n},m=function(e,t){var n=v(e,t);return n&&n.value},g=function(e,t,n){var r=v(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}},y=function(e,t){return!!v(e,t)};e.exports=function(){var e,t,n,r={assert:function(e){if(!r.has(e))throw new a("Side channel does not contain "+o(e))},get:function(r){if(s&&r&&("object"===typeof r||"function"===typeof r)){if(e)return c(e,r)}else if(u){if(t)return p(t,r)}else if(n)return m(n,r)},has:function(r){if(s&&r&&("object"===typeof r||"function"===typeof r)){if(e)return f(e,r)}else if(u){if(t)return d(t,r)}else if(n)return y(n,r);return!1},set:function(r,i){s&&r&&("object"===typeof r||"function"===typeof r)?(e||(e=new s),l(e,r,i)):u?(t||(t=new u),h(t,r,i)):(n||(n={key:{},next:null}),g(n,r,i))}};return r}},VF6F:function(e,t,n){"use strict";var r=n("AM7I"),i=n("PrET"),o=i(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"===typeof n&&o(e,".prototype.")>-1?i(n):n}},VOz1:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("HAuM"),s=n("Sssf"),u=n("ImZN");r({target:"Map",proto:!0,real:!0,forced:i},{reduce:function(e){var t=o(this),n=s(t),r=arguments.length<2,i=r?void 0:arguments[1];if(a(e),u(n,(function(n,o){r?(r=!1,i=o):i=e(i,o,n,t)}),void 0,!0,!0),r)throw TypeError("Reduce of empty map with no initial value");return i}})},VTBJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("rePB");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},VaNO:function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},VmRL:function(e,t,n){"use strict";function r(e,t,n){n=n||2;var r,o,s,u,c,l,p,h=t&&t.length,d=h?t[0]*n:e.length,v=i(e,0,d,n,!0),m=[];if(!v||v.next===v.prev)return m;if(h&&(v=f(e,t,v,n)),e.length>80*n){r=s=e[0],o=u=e[1];for(var g=n;g<d;g+=n)c=e[g],l=e[g+1],c<r&&(r=c),l<o&&(o=l),c>s&&(s=c),l>u&&(u=l);p=Math.max(s-r,u-o),p=0!==p?32767/p:0}return a(v,m,n,r,o,p,0),m}function i(e,t,n,r,i){var o,a;if(i===R(e,t,n,r)>0)for(o=t;o<n;o+=r)a=M(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=M(o,e[o],e[o+1],a);return a&&O(a,a.next)&&(P(a),a=a.next),a}function o(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!O(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{if(P(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,i,f,p){if(e){!p&&f&&m(e,r,i,f);var h,d,v=e;while(e.prev!==e.next)if(h=e.prev,d=e.next,f?u(e,r,i,f):s(e))t.push(h.i/n|0),t.push(e.i/n|0),t.push(d.i/n|0),P(e),e=d.next,v=d.next;else if(e=d,e===v){p?1===p?(e=c(o(e),t,n),a(e,t,n,r,i,f,2)):2===p&&l(e,t,n,r,i,f):a(o(e),t,n,r,i,f,1);break}}}function s(e){var t=e.prev,n=e,r=e.next;if(w(t,n,r)>=0)return!1;var i=t.x,o=n.x,a=r.x,s=t.y,u=n.y,c=r.y,l=i<o?i<a?i:a:o<a?o:a,f=s<u?s<c?s:c:u<c?u:c,p=i>o?i>a?i:a:o>a?o:a,h=s>u?s>c?s:c:u>c?u:c,d=r.next;while(d!==t){if(d.x>=l&&d.x<=p&&d.y>=f&&d.y<=h&&_(i,s,o,u,a,c,d.x,d.y)&&w(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function u(e,t,n,r){var i=e.prev,o=e,a=e.next;if(w(i,o,a)>=0)return!1;var s=i.x,u=o.x,c=a.x,l=i.y,f=o.y,p=a.y,h=s<u?s<c?s:c:u<c?u:c,d=l<f?l<p?l:p:f<p?f:p,v=s>u?s>c?s:c:u>c?u:c,m=l>f?l>p?l:p:f>p?f:p,g=y(h,d,t,n,r),b=y(v,m,t,n,r),x=e.prevZ,O=e.nextZ;while(x&&x.z>=g&&O&&O.z<=b){if(x.x>=h&&x.x<=v&&x.y>=d&&x.y<=m&&x!==i&&x!==a&&_(s,l,u,f,c,p,x.x,x.y)&&w(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,O.x>=h&&O.x<=v&&O.y>=d&&O.y<=m&&O!==i&&O!==a&&_(s,l,u,f,c,p,O.x,O.y)&&w(O.prev,O,O.next)>=0)return!1;O=O.nextZ}while(x&&x.z>=g){if(x.x>=h&&x.x<=v&&x.y>=d&&x.y<=m&&x!==i&&x!==a&&_(s,l,u,f,c,p,x.x,x.y)&&w(x.prev,x,x.next)>=0)return!1;x=x.prevZ}while(O&&O.z<=b){if(O.x>=h&&O.x<=v&&O.y>=d&&O.y<=m&&O!==i&&O!==a&&_(s,l,u,f,c,p,O.x,O.y)&&w(O.prev,O,O.next)>=0)return!1;O=O.nextZ}return!0}function c(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!O(i,a)&&E(i,r,r.next,a)&&k(i,a)&&k(a,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(a.i/n|0),P(r),P(r.next),r=e=a),r=r.next}while(r!==e);return o(r)}function l(e,t,n,r,i,s){var u=e;do{var c=u.next.next;while(c!==u.prev){if(u.i!==c.i&&x(u,c)){var l=T(u,c);return u=o(u,u.next),l=o(l,l.next),a(u,t,n,r,i,s,0),void a(l,t,n,r,i,s,0)}c=c.next}u=u.next}while(u!==e)}function f(e,t,n,r){var o,a,s,u,c,l=[];for(o=0,a=t.length;o<a;o++)s=t[o]*r,u=o<a-1?t[o+1]*r:e.length,c=i(e,s,u,r,!1),c===c.next&&(c.steiner=!0),l.push(b(c));for(l.sort(p),o=0;o<l.length;o++)n=h(l[o],n);return n}function p(e,t){return e.x-t.x}function h(e,t){var n=d(e,t);if(!n)return t;var r=T(n,e);return o(r,r.next),o(n,n.next)}function d(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==t);if(!n)return null;var u,c=n,l=n.x,f=n.y,p=1/0;r=n;do{i>=r.x&&r.x>=l&&i!==r.x&&_(o<f?i:a,o,l,f,o<f?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),k(r,e)&&(u<p||u===p&&(r.x>n.x||r.x===n.x&&v(n,r)))&&(n=r,p=u)),r=r.next}while(r!==c);return n}function v(e,t){return w(e.prev,e,t.prev)<0&&w(t.next,e,e.next)<0}function m(e,t,n,r){var i=e;do{0===i.z&&(i.z=y(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,g(i)}function g(e){var t,n,r,i,o,a,s,u,c=1;do{n=e,e=null,o=null,a=0;while(n){for(a++,r=n,s=0,t=0;t<c;t++)if(s++,r=r.nextZ,!r)break;u=c;while(s>0||u>0&&r)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1);return e}function y(e,t,n,r,i){return e=(e-n)*i|0,t=(t-r)*i|0,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function b(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function _(e,t,n,r,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(r-s)>=(n-a)*(t-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function x(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!A(e,t)&&(k(e,t)&&k(t,e)&&C(e,t)&&(w(e.prev,e,t.prev)||w(e,t.prev,t))||O(e,t)&&w(e.prev,e,e.next)>0&&w(t.prev,t,t.next)>0)}function w(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function O(e,t){return e.x===t.x&&e.y===t.y}function E(e,t,n,r){var i=j(w(e,t,n)),o=j(w(e,t,r)),a=j(w(n,r,e)),s=j(w(n,r,t));return i!==o&&a!==s||(!(0!==i||!S(e,n,t))||(!(0!==o||!S(e,r,t))||(!(0!==a||!S(n,e,r))||!(0!==s||!S(n,t,r)))))}function S(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function j(e){return e>0?1:e<0?-1:0}function A(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&E(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function k(e,t){return w(e.prev,e,e.next)<0?w(e,t,e.next)>=0&&w(e,e.prev,t)>=0:w(e,t,e.prev)<0||w(e,e.next,t)<0}function C(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}function T(e,t){var n=new I(e.i,e.x,e.y),r=new I(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function M(e,t,n,r){var i=new I(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function P(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function I(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function R(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}e.exports=r,e.exports["default"]=r,r.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,a=Math.abs(R(e,0,o,n));if(i)for(var s=0,u=t.length;s<u;s++){var c=t[s]*n,l=s<u-1?t[s+1]*n:e.length;a-=Math.abs(R(e,c,l,n))}var f=0;for(s=0;s<r.length;s+=3){var p=r[s]*n,h=r[s+1]*n,d=r[s+2]*n;f+=Math.abs((e[p]-e[d])*(e[h+1]-e[p+1])-(e[p]-e[h])*(e[d+1]-e[p+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},r.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},Vnov:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("Sssf"),s=n("ImZN");r({target:"Map",proto:!0,real:!0,forced:i},{keyOf:function(e){return s(a(o(this)),(function(t,n){if(n===e)return s.stop(t)}),void 0,!0,!0).result}})},VpIT:function(e,t,n){var r=n("xDBR"),i=n("xs3f");(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},Vu81:function(e,t,n){var r=n("0GbY"),i=n("JBy8"),o=n("dBg+"),a=n("glrk");e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(a(e)),n=o.f;return n?t.concat(n(e)):t}},"W/eh":function(e,t,n){"use strict";var r=n("I+eb"),i=n("g6v/"),o=n("6x0u"),a=n("ewvW"),s=n("wE6v"),u=n("4WOD"),c=n("Bs8V").f;i&&r({target:"Object",proto:!0,forced:o},{__lookupSetter__:function(e){var t,n=a(this),r=s(e,!0);do{if(t=c(n,r))return t.set}while(n=u(n))}})},WC9I:function(e,t,n){"use strict";n.r(t);var r=n("k1fw"),i=n("q1tI"),o=n.n(i),a=n("dEAq"),s=n("Zxc8"),u=n("nKUr"),c=o.a.memo((e=>{var t=e.demos,n=t["docs-marker"].component;return Object(u["jsx"])(u["Fragment"],{children:Object(u["jsxs"])(o.a.Fragment,{children:[Object(u["jsx"])("div",{className:"markdown",children:Object(u["jsxs"])("h2",{id:"marker",children:[Object(u["jsx"])(a["AnchorLink"],{to:"#marker","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"Marker"]})}),Object(u["jsx"])(s["default"],Object(r["a"])(Object(r["a"])({},t["docs-marker"].previewerProps),{},{children:Object(u["jsx"])(n,{})}))]})})}));t["default"]=e=>{var t=o.a.useContext(a["context"]),n=t.demos;return o.a.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&a["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),Object(u["jsx"])(c,{demos:n})}},WFqU:function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n("IyRk"))},WGBp:function(e,t,n){var r=n("xDBR"),i=n("mh/w");e.exports=r?i:function(e){return Set.prototype.values.call(e)}},WJkJ:function(e,t){e.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},WKiH:function(e,t,n){var r=n("HYAF"),i=n("WJkJ"),o="["+i+"]",a=RegExp("^"+o+o+"*"),s=RegExp(o+o+"*$"),u=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(a,"")),2&e&&(n=n.replace(s,"")),n}};e.exports={start:u(1),end:u(2),trim:u(3)}},WPzJ:function(e,t,n){var r=n("I+eb"),i=n("voyM");r({target:"Math",stat:!0},{scale:i})},WWur:function(e,t,n){"use strict";var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.target,r=void 0===n?document.body:n,i=document.createElement("textarea"),o=document.activeElement;i.value=e,i.setAttribute("readonly",""),i.style.contain="strict",i.style.position="absolute",i.style.left="-9999px",i.style.fontSize="12pt";var a=document.getSelection(),s=!1;a.rangeCount>0&&(s=a.getRangeAt(0)),r.append(i),i.select(),i.selectionStart=0,i.selectionEnd=e.length;var u=!1;try{u=document.execCommand("copy")}catch(c){}return i.remove(),s&&(a.removeAllRanges(),a.addRange(s)),o&&o.focus(),u};e.exports=r,e.exports["default"]=r},WbBG:function(e,t,n){"use strict";var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=r},WjRb:function(e,t,n){var r=n("ROdP");e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},WpQk:function(e,t,n){},X7LM:function(e,t,n){"use strict";var r=2147483647,i=36,o=1,a=26,s=38,u=700,c=72,l=128,f="-",p=/[^\0-\u007E]/,h=/[.\u3002\uFF0E\uFF61]/g,d="Overflow: input needs wider integers to process",v=i-o,m=Math.floor,g=String.fromCharCode,y=function(e){var t=[],n=0,r=e.length;while(n<r){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t},b=function(e){return e+22+75*(e<26)},_=function(e,t,n){var r=0;for(e=n?m(e/u):e>>1,e+=m(e/t);e>v*a>>1;r+=i)e=m(e/v);return m(r+(v+1)*e/(e+s))},x=function(e){var t=[];e=y(e);var n,s,u=e.length,p=l,h=0,v=c;for(n=0;n<e.length;n++)s=e[n],s<128&&t.push(g(s));var x=t.length,w=x;x&&t.push(f);while(w<u){var O=r;for(n=0;n<e.length;n++)s=e[n],s>=p&&s<O&&(O=s);var E=w+1;if(O-p>m((r-h)/E))throw RangeError(d);for(h+=(O-p)*E,p=O,n=0;n<e.length;n++){if(s=e[n],s<p&&++h>r)throw RangeError(d);if(s==p){for(var S=h,j=i;;j+=i){var A=j<=v?o:j>=v+a?a:j-v;if(S<A)break;var k=S-A,C=i-A;t.push(g(b(A+k%C))),S=m(k/C)}t.push(g(b(S))),v=_(h,E,w==x),h=0,++w}}++h,++p}return t.join("")};e.exports=function(e){var t,n,r=[],i=e.toLowerCase().replace(h,".").split(".");for(t=0;t<i.length;t++)n=i[t],r.push(p.test(n)?"xn--"+x(n):n);return r.join(".")}},XGwC:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},XMab:function(e,t,n){var r=n("dOgj");r("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},XWE6:function(e,t){function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},XbcX:function(e,t,n){"use strict";var r=n("I+eb"),i=n("or9q"),o=n("ewvW"),a=n("UMSQ"),s=n("HAuM"),u=n("ZfDv");r({target:"Array",proto:!0},{flatMap:function(e){var t,n=o(this),r=a(n.length);return s(e),t=u(n,0),t.length=i(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},XcSm:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),i=n.n(r),o=n("dEAq"),a=n("H1Ra"),s=n("dMo/"),u=n("nKUr"),c=i.a.memo((e=>{e.demos;return Object(u["jsx"])(u["Fragment"],{children:Object(u["jsxs"])("div",{className:"markdown",children:[Object(u["jsxs"])("h2",{id:"marker-props",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#marker-props","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"Marker Props"]}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"prop name"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"option"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"marker \u914d\u7f6e\u9879"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"lnglat"}),Object(u["jsx"])("td",{children:"`Array"}),Object(u["jsx"])("td",{children:"Object`"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"onMarkerLoaded"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Function"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"layer \u56de\u8c03\u51fd\u6570"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"children"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"React.ReactNode"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"\u5b50\u7ec4\u4ef6"})]})]})]}),Object(u["jsxs"])("h3",{id:"option",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#option","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"option"]}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"prop name"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"color"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"blue"})}),Object(u["jsx"])("td",{children:"marker \u914d\u7f6e\u9879"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"anchor"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"center, top, top-left, top-right, bottom, bottom-left,bottom-right,left, right"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"offsets"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Array[x,y]"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"marker \u4f4d\u7f6e\u504f\u79fb"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"extData"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"object"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"marker \u5c5e\u6027\u6570\u636e"})]})]})]}),Object(u["jsxs"])("h2",{id:"\u5b9e\u4f8b",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#\u5b9e\u4f8b","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u5b9e\u4f8b"]}),Object(u["jsx"])(a["a"],{code:"import { Marker } from '@antv/l7-react';\n<Marker\n  option={{\n    color: 'red',\n  }}\n  lnglat={[120, 32]}\n/>;",lang:"jsx"})]})})}));t["default"]=e=>{var t=i.a.useContext(o["context"]),n=t.demos;return i.a.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),Object(u["jsx"])(c,{demos:n})}},Xi7e:function(e,t,n){var r=n("KMkd"),i=n("adU4"),o=n("tMB7"),a=n("+6XX"),s=n("Z8oC");function u(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype["delete"]=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,e.exports=u},"Y+p1":function(e,t,n){var r=n("wF/u");function i(e,t){return r(e,t)}e.exports=i},Y3xf:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),i=n.n(r),o=n("dEAq"),a=n("H1Ra"),s=n("dMo/"),u=n("nKUr"),c=i.a.memo((e=>{e.demos;return Object(u["jsx"])(u["Fragment"],{children:Object(u["jsxs"])("div",{className:"markdown",children:[Object(u["jsxs"])("h2",{id:"layer-\u7c7b\u578b",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#layer-\u7c7b\u578b","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"Layer \u7c7b\u578b"]}),Object(u["jsx"])("p",{children:"React \u5404\u4e2a\u7ec4\u4ef6\u540d\u79f0\u548c L7 \u540d\u79f0\u4fdd\u6301\u4e00\u81f4"}),Object(u["jsxs"])("ul",{children:[Object(u["jsx"])("li",{children:"PointLayer"}),Object(u["jsx"])("li",{children:"PolygonLayer"}),Object(u["jsx"])("li",{children:"LineLayer"}),Object(u["jsx"])("li",{children:"HeatmapLayer"}),Object(u["jsx"])("li",{children:"RasterLayer"}),Object(u["jsx"])("li",{children:"ImageLayer"}),Object(u["jsx"])("li",{children:"CityBuildingLayer"})]}),Object(u["jsxs"])("h3",{id:"\u4f7f\u7528\u65b9\u5f0f",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#\u4f7f\u7528\u65b9\u5f0f","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u4f7f\u7528\u65b9\u5f0f"]}),Object(u["jsx"])(a["a"],{code:"import { PointLayer } from '@antv/l7-react';",lang:"jsx"}),Object(u["jsxs"])("h2",{id:"layer-props",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#layer-props","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"Layer Props"]}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"prop name"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"options"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"layer options"})}),Object(u["jsx"])("td",{}),Object(u["jsx"])("td",{children:"layer \u914d\u7f6e\u9879"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"source"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"sourceOption"})}),Object(u["jsx"])("td",{}),Object(u["jsx"])("td",{children:"\u6570\u636e\u6e90\u914d\u7f6e\u9879"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"color"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"attributeOption"})}),Object(u["jsx"])("td",{}),Object(u["jsx"])("td",{children:"\u989c\u8272\u901a\u9053"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"shape"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"attributeOption"})}),Object(u["jsx"])("td",{}),Object(u["jsx"])("td",{children:"\u56fe\u5c42\u5f62\u72b6\u5c5e\u6027"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"size"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"attributeOption"})}),Object(u["jsx"])("td",{}),Object(u["jsx"])("td",{children:"\u56fe\u5c42\u5927\u5c0f\u5c5e\u6027"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"style"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Object"})}),Object(u["jsx"])("td",{}),Object(u["jsx"])("td",{children:"\u56fe\u5c42\u6837\u5f0f"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"scale"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"scale Option"})}),Object(u["jsx"])("td",{children:"\u9ed8\u8ba4\u4f1a\u6570\u503c\u7c7b\u8bbe\u5b9a scale\uff0c\u6570\u503c\u7c7b\u578b linear\uff0c\u5b57\u7b26\u4e32\u7c7b\u578b\u4e3a cat"}),Object(u["jsx"])("td",{children:"\u56fe\u5c42\u5ea6\u91cf"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"filter"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Function"})}),Object(u["jsx"])("td",{}),Object(u["jsx"])("td",{children:"\u56fe\u5c42\u6570\u636e\u8fc7\u6ee4\u65b9\u6cd5"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"select"}),Object(u["jsxs"])("td",{children:[Object(u["jsx"])("code",{children:"boolean"})," ",Object(u["jsx"])("code",{children:"interaction option"})]}),Object(u["jsx"])("td",{}),Object(u["jsx"])("td",{children:"\u56fe\u5c42\u9009\u4e2d\u9ad8\u4eae"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"active"}),Object(u["jsxs"])("td",{children:[Object(u["jsx"])("code",{children:"boolean"})," ",Object(u["jsx"])("code",{children:"interaction option"})]}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"false"})}),Object(u["jsx"])("td",{children:"\u56fe\u5c42 hover \u9ad8\u4eae"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"animate"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"animate Option"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"\u56fe\u5c42\u52a8\u753b\u914d\u7f6e"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"onLayerLoaded"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Function"})}),Object(u["jsx"])("td",{}),Object(u["jsx"])("td",{children:"\u56fe\u5c42\u6dfb\u52a0\u5b8c\u6210\u540e\u56de\u8c03\uff0c\u7528\u4e8e\u83b7\u53d6 layer \u5bf9\u8c61"})]})]})]}),Object(u["jsxs"])("h3",{id:"layer-options",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#layer-options","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"layer options"]}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"prop name"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"name"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{}),Object(u["jsx"])("td",{children:"\u56fe\u5c42\u540d\u5b57\uff0c\u53ef\u6839\u636e\u540d\u79f0\u83b7\u53d6 layer"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"visible"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"boolean"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"true"})}),Object(u["jsx"])("td",{children:"\u56fe\u5c42\u662f\u5426\u53ef\u89c1"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"zIndex"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"number"})}),Object(u["jsx"])("td",{children:"0"}),Object(u["jsx"])("td",{children:"\u56fe\u5c42\u7ed8\u5236\u987a\u5e8f\uff0c"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"minZoom"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"number"})}),Object(u["jsx"])("td",{children:"0"}),Object(u["jsx"])("td",{children:"\u8bbe\u7f6e layer \u6700\u5c0f\u53ef\u89c1\u7b49\u7ea7\uff0c\u5c0f\u4e8e\u5219\u4e0d\u663e\u793a"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"maxZoom"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"number"})}),Object(u["jsx"])("td",{children:"\u4e0e map \u6700\u5927\u7f29\u653e\u7b49\u7ea7\u4e00\u81f4"}),Object(u["jsx"])("td",{children:"\u8bbe\u7f6e layerd \u7684\u6700\u5927\u53ef\u89c1\u7b49\u7ea7\uff0c\u5927\u4e8e\u5219\u4e0d\u663e\u793a"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"aotoFit"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"boolean"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"false"})}),Object(u["jsx"])("td",{children:"\u662f\u5426\u7f29\u653e\u5230\u56fe\u5c42\u8303\u56f4"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"blend"}),Object(u["jsx"])("td",{children:"'string'"}),Object(u["jsx"])("td",{children:"'normal'"}),Object(u["jsxs"])("td",{children:["\u56fe\u5c42\u5143\u7d20\u6df7\u5408\u6548\u679c ",Object(u["jsx"])(o["AnchorLink"],{to:"../layer/layer/#blend",children:"\u8be6\u60c5"})]})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"pickingBuffer"}),Object(u["jsx"])("td",{children:"'number'"}),Object(u["jsx"])("td",{children:"'0'"}),Object(u["jsxs"])("td",{children:["\u56fe\u5c42\u62fe\u53d6\u7f13\u5b58\u673a\u5236\uff0c\u5982 1px \u5bbd\u5ea6\u7684\u7ebf\u9f20\u6807\u5f88\u96be\u62fe\u53d6(\u70b9\u51fb)\u5230, \u901a\u8fc7\u8bbe\u7f6e\u8be5\u53c2\u6570\u53ef\u6269\u5927\u62fe\u53d6\u7684\u8303\u56f4 ","{","number","}"," default 0"]})]})]})]}),Object(u["jsxs"])("h3",{id:"attribute-option",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#attribute-option","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"attribute Option"]}),Object(u["jsx"])("p",{children:"color, size, shape \u7b49\u56fe\u5f62\u6620\u5c04\u901a\u9053\uff0c\u901a\u8fc7\u4e0b\u9762\u53c2\u6570\u914d\u7f6e"}),Object(u["jsxs"])("ul",{children:[Object(u["jsx"])("li",{children:"field \u6620\u5c04\u5b57\u6bb5\uff0c\u5982\u679c\u662f\u5e38\u91cf\u8bbe\u7f6e\u4e3a null"}),Object(u["jsx"])("li",{children:"values \u6620\u5c04\u503c \u652f\u6301 \u5e38\u91cf\uff0c\u6570\u7ec4\uff0c\u56de\u8c03\u51fd\u6570\uff0c\u5982\u679c values \u4e3a\u6570\u7ec4\u6216\u56de\u8c03\u9700\u8981\u8bbe\u7f6e field \u5b57\u6bb5"})]}),Object(u["jsxs"])("p",{children:["\u8be6\u7ec6",Object(u["jsx"])(o["AnchorLink"],{to:"../layer/layer/#size",children:"\u914d\u7f6e\u9879"})]}),Object(u["jsxs"])("h3",{id:"source-option",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#source-option","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"source Option"]}),Object(u["jsx"])("p",{children:"\u6570\u636e\u6e90\u914d\u7f6e\u9879"}),Object(u["jsxs"])("ul",{children:[Object(u["jsx"])("li",{children:"data \u652f\u6301 geojson\u3001csv\u3001json"}),Object(u["jsx"])("li",{children:"parser \u6570\u636e\u89e3\u6790\u914d\u7f6e\u9879"}),Object(u["jsx"])("li",{children:"transforms \u6570\u636e\u5904\u7406\u914d\u7f6e\u9879"})]}),Object(u["jsxs"])("p",{children:["\u8be6\u7ec6",Object(u["jsx"])(o["AnchorLink"],{to:"../source/source/#parser-1",children:"\u914d\u7f6e\u9879"})]}),Object(u["jsxs"])("h3",{id:"scale-option",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#scale-option","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"scale Option"]}),Object(u["jsx"])("p",{children:"\u5ea6\u91cf\u914d\u7f6e\u9879"}),Object(u["jsx"])("ul",{children:Object(u["jsx"])("li",{children:"values scaleCfg"})}),Object(u["jsx"])("p",{children:Object(u["jsx"])("strong",{children:"scaleCfg"})}),Object(u["jsxs"])("ul",{children:[Object(u["jsx"])("li",{children:"key \u4e3a\u5b57\u6bb5\u540d fieldname | attributeName"}),Object(u["jsx"])("li",{children:"value scale \u914d\u7f6e\u9879"})]}),Object(u["jsx"])(a["a"],{code:"const scales = {\n  values: {\n    name: {\n      type: 'cat',\n    },\n  },\n};",lang:"javascript"}),Object(u["jsxs"])("h3",{id:"interaction-option",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#interaction-option","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"interaction option"]}),Object(u["jsx"])("p",{children:"active\uff0cselect \u914d\u7f6e\u9879"}),Object(u["jsx"])("p",{children:Object(u["jsx"])("strong",{children:"option"})}),Object(u["jsx"])("ul",{children:Object(u["jsx"])("li",{children:"color \u8bbe\u7f6e\u4ea4\u4e92\u7684\u989c\u8272\uff0c\u6307\u6ed1\u8fc7\u6216\u8005\u9009\u4e2d\u7684"})}),Object(u["jsxs"])("h3",{id:"\u83b7\u53d6-layer-\u5bf9\u8c61",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#\u83b7\u53d6-layer-\u5bf9\u8c61","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u83b7\u53d6 layer \u5bf9\u8c61"]}),Object(u["jsxs"])("h4",{id:"onlayerloaded",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#onlayerloaded","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"onLayerLoaded"]}),Object(u["jsx"])("p",{children:"\u56de\u8c03\u51fd\u6570\u83b7\u53d6 layer, scene \u5bf9\u8c61"}),Object(u["jsx"])(a["a"],{code:"onLayerLoaded = (layer, scene) => {};",lang:"javascript"}),Object(u["jsxs"])("h4",{id:"context-api",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#context-api","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"Context API"]}),Object(u["jsx"])(a["a"],{code:"import { LayerContext } from '@antv/l7-react';\n<LayerContext.Consumer>\n  {(layer, scene) => {\n    // use `scene` here\n  }}\n</LayerContext.Consumer>;",lang:"jsx"}),Object(u["jsxs"])("h3",{id:"layer-\u793a\u4f8b",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#layer-\u793a\u4f8b","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"Layer \u793a\u4f8b"]}),Object(u["jsx"])(a["a"],{code:"import { PolygonLayer } from '@antv/l7-react';\n<PolygonLayer\n  key={'2'}\n  source={{\n    data,\n  }}\n  color={{\n    field: 'name',\n    values: ['#2E8AE6', '#69D1AB', '#DAF291', '#FFD591', '#FF7A45', '#CF1D49'],\n  }}\n  shape={{\n    values: 'fill',\n  }}\n  style={{\n    opacity: 1,\n  }}\n  active={{\n    option: {\n      color: 'red',\n    },\n  }}\n/>;",lang:"jsx"}),Object(u["jsxs"])("h2",{id:"\u5b50\u7ec4\u4ef6",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#\u5b50\u7ec4\u4ef6","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u5b50\u7ec4\u4ef6"]}),Object(u["jsxs"])("h3",{id:"\u4e8b\u4ef6\u7ec4\u4ef6",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#\u4e8b\u4ef6\u7ec4\u4ef6","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u4e8b\u4ef6\u7ec4\u4ef6"]}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"prop name"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"type"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsxs"])("td",{children:["\u4e8b\u4ef6\u7c7b\u578b ",Object(u["jsx"])(o["AnchorLink"],{to:"../layer/layer/#%E9%BC%A0%E6%A0%87%E4%BA%8B%E4%BB%B6",children:"\u8be6\u60c5"})]})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"handler"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Function"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"layer \u56de\u8c03\u51fd\u6570"})]})]})]}),Object(u["jsxs"])("h3",{id:"\u793a\u4f8b",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#\u793a\u4f8b","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u793a\u4f8b"]}),Object(u["jsx"])(a["a"],{code:'import { LayerEvent, PolygonLayer } from \'@antv/l7-react\';\n<PolygonLayer>\n  <LayerEvent type="click" handler={() => {}} />\n  <LayerEvent type="mousemove" handler={() => {}} />\n</PolygonLayer>;',lang:"jsx"})]})})}));t["default"]=e=>{var t=i.a.useContext(o["context"]),n=t.demos;return i.a.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),Object(u["jsx"])(c,{demos:n})}},Y4C7:function(e,t,n){var r=n("I+eb"),i=n("eDxR"),o=n("glrk"),a=i.toKey,s=i.getMap,u=i.store;r({target:"Reflect",stat:!0},{deleteMetadata:function(e,t){var n=arguments.length<3?void 0:a(arguments[2]),r=s(o(t),n,!1);if(void 0===r||!r["delete"](e))return!1;if(r.size)return!0;var i=u.get(t);return i["delete"](n),!!i.size||u["delete"](t)}})},YESw:function(e,t,n){var r=n("Cwc5"),i=r(Object,"create");e.exports=i},YGK4:function(e,t,n){"use strict";var r=n("bWFh"),i=n("ZWaQ");e.exports=r("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},YJ9l:function(e,t,n){"use strict";var r=n("5wUe")["default"],i=n("bfL6")["default"],o=n("R5yR")["default"],a=n("V93i"),s=n("8jRI"),u=n("8yz6"),c=n("c0go"),l=function(e){return null===e||void 0===e};function f(e){switch(e.arrayFormat){case"index":return function(t){return function(n,r){var i=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(o(n),null===r?[[d(t,e),"[",i,"]"].join("")]:[[d(t,e),"[",d(i,e),"]=",d(r,e)].join("")])}};case"bracket":return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(o(n),null===r?[[d(t,e),"[]"].join("")]:[[d(t,e),"[]=",d(r,e)].join("")])}};case"comma":case"separator":return function(t){return function(n,r){return null===r||void 0===r||0===r.length?n:0===n.length?[[d(t,e),"=",d(r,e)].join("")]:[[n,d(r,e)].join(e.arrayFormatSeparator)]}};default:return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(o(n),null===r?[d(t,e)]:[[d(t,e),"=",d(r,e)].join("")])}}}}function p(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return function(t,n,r){var i="string"===typeof n&&n.includes(e.arrayFormatSeparator),o="string"===typeof n&&!i&&v(n,e).includes(e.arrayFormatSeparator);n=o?v(n,e):n;var a=i||o?n.split(e.arrayFormatSeparator).map((function(t){return v(t,e)})):null===n?n:v(n,e);r[t]=a};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}function h(e){if("string"!==typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function d(e,t){return t.encode?t.strict?a(e):encodeURIComponent(e):e}function v(e,t){return t.decode?s(e):e}function m(e){return Array.isArray(e)?e.sort():"object"===typeof e?m(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}function g(e){var t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function y(e){var t="",n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}function b(e){e=g(e);var t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function _(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"===typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function x(e,t){t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t),h(t.arrayFormatSeparator);var n=p(t),o=Object.create(null);if("string"!==typeof e)return o;if(e=e.trim().replace(/^[?#&]/,""),!e)return o;var a,s=i(e.split("&"));try{for(s.s();!(a=s.n()).done;){var c=a.value;if(""!==c){var l=u(t.decode?c.replace(/\+/g," "):c,"="),f=r(l,2),d=f[0],g=f[1];g=void 0===g?null:["comma","separator"].includes(t.arrayFormat)?g:v(g,t),n(v(d,t),g,o)}}}catch(j){s.e(j)}finally{s.f()}for(var y=0,b=Object.keys(o);y<b.length;y++){var x=b[y],w=o[x];if("object"===typeof w&&null!==w)for(var O=0,E=Object.keys(w);O<E.length;O++){var S=E[O];w[S]=_(w[S],t)}else o[x]=_(w,t)}return!1===t.sort?o:(!0===t.sort?Object.keys(o).sort():Object.keys(o).sort(t.sort)).reduce((function(e,t){var n=o[t];return Boolean(n)&&"object"===typeof n&&!Array.isArray(n)?e[t]=m(n):e[t]=n,e}),Object.create(null))}t.extract=b,t.parse=x,t.stringify=function(e,t){if(!e)return"";t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t),h(t.arrayFormatSeparator);for(var n=function(n){return t.skipNull&&l(e[n])||t.skipEmptyString&&""===e[n]},r=f(t),i={},o=0,a=Object.keys(e);o<a.length;o++){var s=a[o];n(s)||(i[s]=e[s])}var u=Object.keys(i);return!1!==t.sort&&u.sort(t.sort),u.map((function(n){var i=e[n];return void 0===i?"":null===i?d(n,t):Array.isArray(i)?i.reduce(r(n),[]).join("&"):d(n,t)+"="+d(i,t)})).filter((function(e){return e.length>0})).join("&")},t.parseUrl=function(e,t){t=Object.assign({decode:!0},t);var n=u(e,"#"),i=r(n,2),o=i[0],a=i[1];return Object.assign({url:o.split("?")[0]||"",query:x(b(e),t)},t&&t.parseFragmentIdentifier&&a?{fragmentIdentifier:v(a,t)}:{})},t.stringifyUrl=function(e,n){n=Object.assign({encode:!0,strict:!0},n);var r=g(e.url).split("?")[0]||"",i=t.extract(e.url),o=t.parse(i,{sort:!1}),a=Object.assign(o,e.query),s=t.stringify(a,n);s&&(s="?".concat(s));var u=y(e.url);return e.fragmentIdentifier&&(u="#".concat(d(e.fragmentIdentifier,n))),"".concat(r).concat(s).concat(u)},t.pick=function(e,n,r){r=Object.assign({parseFragmentIdentifier:!0},r);var i=t.parseUrl(e,r),o=i.url,a=i.query,s=i.fragmentIdentifier;return t.stringifyUrl({url:o,query:c(a,n),fragmentIdentifier:s},r)},t.exclude=function(e,n,r){var i=Array.isArray(n)?function(e){return!n.includes(e)}:function(e,t){return!n(e,t)};return t.pick(e,i,r)}},YL0P:function(e,t,n){"use strict";var r=n("2oRo"),i=n("67WC"),o=n("4mDm"),a=n("tiKp"),s=a("iterator"),u=r.Uint8Array,c=o.values,l=o.keys,f=o.entries,p=i.aTypedArray,h=i.exportTypedArrayMethod,d=u&&u.prototype[s],v=!!d&&("values"==d.name||void 0==d.name),m=function(){return c.call(p(this))};h("entries",(function(){return f.call(p(this))})),h("keys",(function(){return l.call(p(this))})),h("values",m,!v),h(s,m,!v)},YMnH:function(e,t,n){"use strict";var r=n("wx14"),i=n("q1tI"),o=n("YlG9"),a=n("ZvpZ"),s=a["a"],u=function(e){var t=e.componentName,n=void 0===t?"global":t,a=e.defaultLocale,u=e.children,c=i["useContext"](o["a"]),l=i["useMemo"]((function(){var e,t=a||s[n],i=null!==(e=null===c||void 0===c?void 0:c[n])&&void 0!==e?e:{};return Object(r["a"])(Object(r["a"])({},t instanceof Function?t():t),i||{})}),[n,a,c]),f=i["useMemo"]((function(){var e=c&&c.locale;return c&&c.exist&&!e?s.locale:e}),[c]);return u(l,f,c)};t["a"]=u},YNrV:function(e,t,n){"use strict";var r=n("g6v/"),i=n("0Dky"),o=n("33Wh"),a=n("dBg+"),s=n("0eef"),u=n("ewvW"),c=n("RK3t"),l=Object.assign,f=Object.defineProperty;e.exports=!l||i((function(){if(r&&1!==l({b:1},l(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||o(l({},t)).join("")!=i}))?function(e,t){var n=u(e),i=arguments.length,l=1,f=a.f,p=s.f;while(i>l){var h,d=c(arguments[l++]),v=f?o(d).concat(f(d)):o(d),m=v.length,g=0;while(m>g)h=v[g++],r&&!p.call(d,h)||(n[h]=d[h])}return n}:l},YO3V:function(e,t,n){var r=n("NykK"),i=n("LcsW"),o=n("ExA7"),a="[object Object]",s=Function.prototype,u=Object.prototype,c=s.toString,l=u.hasOwnProperty,f=c.call(Object);function p(e){if(!o(e)||r(e)!=a)return!1;var t=i(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==f}e.exports=p},YS25:function(e,t,n){"use strict";n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return B})),n.d(t,"d",(function(){return V})),n.d(t,"c",(function(){return x})),n.d(t,"f",(function(){return w})),n.d(t,"e",(function(){return _}));var r=n("wx14");function i(e){return"/"===e.charAt(0)}function o(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function a(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],a=t&&t.split("/")||[],s=e&&i(e),u=t&&i(t),c=s||u;if(e&&i(e)?a=r:r.length&&(a.pop(),a=a.concat(r)),!a.length)return"/";if(a.length){var l=a[a.length-1];n="."===l||".."===l||""===l}else n=!1;for(var f=0,p=a.length;p>=0;p--){var h=a[p];"."===h?o(a,p):".."===h?(o(a,p),f++):f&&(o(a,p),f--)}if(!c)for(;f--;f)a.unshift("..");!c||""===a[0]||a[0]&&i(a[0])||a.unshift("");var d=a.join("/");return n&&"/"!==d.substr(-1)&&(d+="/"),d}var s=a;function u(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}function c(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every((function(e,n){return c(e,t[n])}));if("object"===typeof e||"object"===typeof t){var n=u(e),r=u(t);return n!==e||r!==t?c(n,r):Object.keys(Object.assign({},e,t)).every((function(n){return c(e[n],t[n])}))}return!1}var l=c,f=n("YJ9l"),p=n.n(f),h=n("9R94");function d(e){return"/"===e.charAt(0)?e:"/"+e}function v(e){return"/"===e.charAt(0)?e.substr(1):e}function m(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}function g(e,t){return m(e,t)?e.substr(t.length):e}function y(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function b(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}function _(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function x(e,t,n,i){var o;"string"===typeof e?(o=b(e),o.query=o.search?p.a.parse(o.search):{},o.state=t):(o=Object(r["a"])({},e),void 0===o.pathname&&(o.pathname=""),o.search?("?"!==o.search.charAt(0)&&(o.search="?"+o.search),o.query=p.a.parse(o.search)):(o.search=o.query?p.a.stringify(o.query):"",o.query=o.query||{}),o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(o.key=n),i?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=s(o.pathname,i.pathname)):o.pathname=i.pathname:o.pathname||(o.pathname="/"),o}function w(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&l(e.state,t.state)}function O(){var e=null;function t(t){return e=t,function(){e===t&&(e=null)}}function n(t,n,r,i){if(null!=e){var o="function"===typeof e?e(t,n):e;"string"===typeof o?"function"===typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)}var r=[];function i(e){var t=!0;function n(){t&&e.apply(void 0,arguments)}return r.push(n),function(){t=!1,r=r.filter((function(e){return e!==n}))}}function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.forEach((function(e){return e.apply(void 0,t)}))}return{setPrompt:t,confirmTransitionTo:n,appendListener:i,notifyListeners:o}}var E=!("undefined"===typeof window||!window.document||!window.document.createElement);function S(e,t){t(window.confirm(e))}function j(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}function A(){return-1===window.navigator.userAgent.indexOf("Trident")}function k(){return-1===window.navigator.userAgent.indexOf("Firefox")}function C(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}var T="popstate",M="hashchange";function P(){try{return window.history.state||{}}catch(e){return{}}}function I(e){void 0===e&&(e={}),E||Object(h["a"])(!1);var t=window.history,n=j(),i=!A(),o=e,a=o.forceRefresh,s=void 0!==a&&a,u=o.getUserConfirmation,c=void 0===u?S:u,l=o.keyLength,f=void 0===l?6:l,p=e.basename?y(d(e.basename)):"";function v(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname,a=i.search,s=i.hash,u=o+a+s;return p&&(u=g(u,p)),x(u,r,n)}function m(){return Math.random().toString(36).substr(2,f)}var b=O();function w(e){Object(r["a"])(K,e),K.length=t.length,b.notifyListeners(K.location,K.action)}function k(e){C(e)||L(v(e.state))}function I(){L(v(P()))}var R=!1;function L(e){if(R)R=!1,w();else{var t="POP";b.confirmTransitionTo(e,t,c,(function(n){n?w({action:t,location:e}):D(e)}))}}function D(e){var t=K.location,n=F.indexOf(t.key);-1===n&&(n=0);var r=F.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(R=!0,V(i))}var N=v(P()),F=[N.key];function z(e){return p+_(e)}function B(e,r){var i="PUSH",o=x(e,r,m(),K.location);b.confirmTransitionTo(o,i,c,(function(e){if(e){var r=z(o),a=o.key,u=o.state;if(n)if(t.pushState({key:a,state:u},null,r),s)window.location.href=r;else{var c=F.indexOf(K.location.key),l=F.slice(0,c+1);l.push(o.key),F=l,w({action:i,location:o})}else window.location.href=r}}))}function U(e,r){var i="REPLACE",o=x(e,r,m(),K.location);b.confirmTransitionTo(o,i,c,(function(e){if(e){var r=z(o),a=o.key,u=o.state;if(n)if(t.replaceState({key:a,state:u},null,r),s)window.location.replace(r);else{var c=F.indexOf(K.location.key);-1!==c&&(F[c]=o.key),w({action:i,location:o})}else window.location.replace(r)}}))}function V(e){t.go(e)}function H(){V(-1)}function G(){V(1)}var W=0;function q(e){W+=e,1===W&&1===e?(window.addEventListener(T,k),i&&window.addEventListener(M,I)):0===W&&(window.removeEventListener(T,k),i&&window.removeEventListener(M,I))}var Z=!1;function Y(e){void 0===e&&(e=!1);var t=b.setPrompt(e);return Z||(q(1),Z=!0),function(){return Z&&(Z=!1,q(-1)),t()}}function X(e){var t=b.appendListener(e);return q(1),function(){q(-1),t()}}var K={length:t.length,action:"POP",location:N,createHref:z,push:B,replace:U,go:V,goBack:H,goForward:G,block:Y,listen:X};return K}var R="hashchange",L={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+v(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:v,decodePath:d},slash:{encodePath:d,decodePath:d}};function D(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function N(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function F(e){window.location.hash=e}function z(e){window.location.replace(D(window.location.href)+"#"+e)}function B(e){void 0===e&&(e={}),E||Object(h["a"])(!1);var t=window.history,n=(k(),e),i=n.getUserConfirmation,o=void 0===i?S:i,a=n.hashType,s=void 0===a?"slash":a,u=e.basename?y(d(e.basename)):"",c=L[s],l=c.encodePath,f=c.decodePath;function p(){var e=f(N());return u&&(e=g(e,u)),x(e)}var v=O();function m(e){Object(r["a"])(Q,e),Q.length=t.length,v.notifyListeners(Q.location,Q.action)}var b=!1,w=null;function j(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}function A(){var e=N(),t=l(e);if(e!==t)z(t);else{var n=p(),r=Q.location;if(!b&&j(r,n))return;if(w===_(n))return;w=null,C(n)}}function C(e){if(b)b=!1,m();else{var t="POP";v.confirmTransitionTo(e,t,o,(function(n){n?m({action:t,location:e}):T(e)}))}}function T(e){var t=Q.location,n=B.lastIndexOf(_(t));-1===n&&(n=0);var r=B.lastIndexOf(_(e));-1===r&&(r=0);var i=n-r;i&&(b=!0,G(i))}var M=N(),P=l(M);M!==P&&z(P);var I=p(),B=[_(I)];function U(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=D(window.location.href)),n+"#"+l(u+_(e))}function V(e,t){var n="PUSH",r=x(e,void 0,void 0,Q.location);v.confirmTransitionTo(r,n,o,(function(e){if(e){var t=_(r),i=l(u+t),o=N()!==i;if(o){w=t,F(i);var a=B.lastIndexOf(_(Q.location)),s=B.slice(0,a+1);s.push(t),B=s,m({action:n,location:r})}else m()}}))}function H(e,t){var n="REPLACE",r=x(e,void 0,void 0,Q.location);v.confirmTransitionTo(r,n,o,(function(e){if(e){var t=_(r),i=l(u+t),o=N()!==i;o&&(w=t,z(i));var a=B.indexOf(_(Q.location));-1!==a&&(B[a]=t),m({action:n,location:r})}}))}function G(e){t.go(e)}function W(){G(-1)}function q(){G(1)}var Z=0;function Y(e){Z+=e,1===Z&&1===e?window.addEventListener(R,A):0===Z&&window.removeEventListener(R,A)}var X=!1;function K(e){void 0===e&&(e=!1);var t=v.setPrompt(e);return X||(Y(1),X=!0),function(){return X&&(X=!1,Y(-1)),t()}}function $(e){var t=v.appendListener(e);return Y(1),function(){Y(-1),t()}}var Q={length:t.length,action:"POP",location:I,createHref:U,push:V,replace:H,go:G,goBack:W,goForward:q,block:K,listen:$};return Q}function U(e,t,n){return Math.min(Math.max(e,t),n)}function V(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,i=t.initialEntries,o=void 0===i?["/"]:i,a=t.initialIndex,s=void 0===a?0:a,u=t.keyLength,c=void 0===u?6:u,l=O();function f(e){Object(r["a"])(A,e),A.length=A.entries.length,l.notifyListeners(A.location,A.action)}function p(){return Math.random().toString(36).substr(2,c)}var h=U(s,0,o.length-1),d=o.map((function(e){return x(e,void 0,"string"===typeof e?p():e.key||p())})),v=_;function m(e,t){var r="PUSH",i=x(e,t,p(),A.location);l.confirmTransitionTo(i,r,n,(function(e){if(e){var t=A.index,n=t+1,o=A.entries.slice(0);o.length>n?o.splice(n,o.length-n,i):o.push(i),f({action:r,location:i,index:n,entries:o})}}))}function g(e,t){var r="REPLACE",i=x(e,t,p(),A.location);l.confirmTransitionTo(i,r,n,(function(e){e&&(A.entries[A.index]=i,f({action:r,location:i}))}))}function y(e){var t=U(A.index+e,0,A.entries.length-1),r="POP",i=A.entries[t];l.confirmTransitionTo(i,r,n,(function(e){e?f({action:r,location:i,index:t}):f()}))}function b(){y(-1)}function w(){y(1)}function E(e){var t=A.index+e;return t>=0&&t<A.entries.length}function S(e){return void 0===e&&(e=!1),l.setPrompt(e)}function j(e){return l.appendListener(e)}var A={length:d.length,action:"POP",location:d[h],index:h,entries:d,createHref:v,push:m,replace:g,go:y,goBack:b,goForward:w,canGo:E,block:S,listen:j};return A}},Yhre:function(e,t,n){"use strict";var r=n("2oRo"),i=n("g6v/"),o=n("qYE9"),a=n("kRJp"),s=n("4syw"),u=n("0Dky"),c=n("GarU"),l=n("ppGB"),f=n("UMSQ"),p=n("CyXQ"),h=n("d6cI"),d=n("4WOD"),v=n("0rvr"),m=n("JBy8").f,g=n("m/L8").f,y=n("gdVl"),b=n("1E5z"),_=n("afO8"),x=_.get,w=_.set,O="ArrayBuffer",E="DataView",S="prototype",j="Wrong length",A="Wrong index",k=r[O],C=k,T=r[E],M=T&&T[S],P=Object.prototype,I=r.RangeError,R=h.pack,L=h.unpack,D=function(e){return[255&e]},N=function(e){return[255&e,e>>8&255]},F=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},z=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},B=function(e){return R(e,23,4)},U=function(e){return R(e,52,8)},V=function(e,t){g(e[S],t,{get:function(){return x(this)[t]}})},H=function(e,t,n,r){var i=p(n),o=x(e);if(i+t>o.byteLength)throw I(A);var a=x(o.buffer).bytes,s=i+o.byteOffset,u=a.slice(s,s+t);return r?u:u.reverse()},G=function(e,t,n,r,i,o){var a=p(n),s=x(e);if(a+t>s.byteLength)throw I(A);for(var u=x(s.buffer).bytes,c=a+s.byteOffset,l=r(+i),f=0;f<t;f++)u[c+f]=l[o?f:t-f-1]};if(o){if(!u((function(){k(1)}))||!u((function(){new k(-1)}))||u((function(){return new k,new k(1.5),new k(NaN),k.name!=O}))){C=function(e){return c(this,C),new k(p(e))};for(var W,q=C[S]=k[S],Z=m(k),Y=0;Z.length>Y;)(W=Z[Y++])in C||a(C,W,k[W]);q.constructor=C}v&&d(M)!==P&&v(M,P);var X=new T(new C(2)),K=M.setInt8;X.setInt8(0,2147483648),X.setInt8(1,2147483649),!X.getInt8(0)&&X.getInt8(1)||s(M,{setInt8:function(e,t){K.call(this,e,t<<24>>24)},setUint8:function(e,t){K.call(this,e,t<<24>>24)}},{unsafe:!0})}else C=function(e){c(this,C,O);var t=p(e);w(this,{bytes:y.call(new Array(t),0),byteLength:t}),i||(this.byteLength=t)},T=function(e,t,n){c(this,T,E),c(e,C,E);var r=x(e).byteLength,o=l(t);if(o<0||o>r)throw I("Wrong offset");if(n=void 0===n?r-o:f(n),o+n>r)throw I(j);w(this,{buffer:e,byteLength:n,byteOffset:o}),i||(this.buffer=e,this.byteLength=n,this.byteOffset=o)},i&&(V(C,"byteLength"),V(T,"buffer"),V(T,"byteLength"),V(T,"byteOffset")),s(T[S],{getInt8:function(e){return H(this,1,e)[0]<<24>>24},getUint8:function(e){return H(this,1,e)[0]},getInt16:function(e){var t=H(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=H(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return z(H(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return z(H(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return L(H(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return L(H(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){G(this,1,e,D,t)},setUint8:function(e,t){G(this,1,e,D,t)},setInt16:function(e,t){G(this,2,e,N,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){G(this,2,e,N,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){G(this,4,e,F,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){G(this,4,e,F,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){G(this,4,e,B,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){G(this,8,e,U,t,arguments.length>2?arguments[2]:void 0)}});b(C,O),b(T,E),e.exports={ArrayBuffer:C,DataView:T}},Yk9n:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inject=t.LazyServiceIdentifer=void 0;var r=n("MON2"),i=n("xfSm"),o=n("GXnB"),a=n("Ztfv"),s=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}();function u(e){return function(t,n,s){if(void 0===e)throw new Error(r.UNDEFINED_INJECT_ANNOTATION(t.name));var u=new o.Metadata(i.INJECT_TAG,e);"number"===typeof s?a.tagParameter(t,n,s,u):a.tagProperty(t,n,u)}}t.LazyServiceIdentifer=s,t.inject=u},YlG9:function(e,t,n){"use strict";var r=n("q1tI"),i=Object(r["createContext"])(void 0);t["a"]=i},YrtM:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("q1tI");function i(e,t,n){var i=r["useRef"]({});return"value"in i.current&&!n(i.current.condition,t)||(i.current.value=e(),i.current.condition=t),i.current.value}},Z0cm:function(e,t){var n=Array.isArray;e.exports=n},Z4nd:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("fXLg");r({target:"WeakSet",proto:!0,real:!0,forced:i},{addAll:function(){return o.apply(this,arguments)}})},Z8oC:function(e,t,n){var r=n("y1pI");function i(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}e.exports=i},ZUd8:function(e,t,n){var r=n("ppGB"),i=n("HYAF"),o=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}};e.exports={codeAt:o(!1),charAt:o(!0)}},ZWaQ:function(e,t,n){"use strict";var r=n("m/L8").f,i=n("fHMY"),o=n("4syw"),a=n("A2ZE"),s=n("GarU"),u=n("ImZN"),c=n("fdAy"),l=n("JiZb"),f=n("g6v/"),p=n("8YOa").fastKey,h=n("afO8"),d=h.set,v=h.getterFor;e.exports={getConstructor:function(e,t,n,c){var l=e((function(e,r){s(e,l,t),d(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),f||(e.size=0),void 0!=r&&u(r,e[c],e,n)})),h=v(t),m=function(e,t,n){var r,i,o=h(e),a=g(e,t);return a?a.value=n:(o.last=a={index:i=p(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=a),r&&(r.next=a),f?o.size++:e.size++,"F"!==i&&(o.index[i]=a)),e},g=function(e,t){var n,r=h(e),i=p(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return o(l.prototype,{clear:function(){var e=this,t=h(e),n=t.index,r=t.first;while(r)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete n[r.index],r=r.next;t.first=t.last=void 0,f?t.size=0:e.size=0},delete:function(e){var t=this,n=h(t),r=g(t,e);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),f?n.size--:t.size--}return!!r},forEach:function(e){var t,n=h(this),r=a(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:n.first){r(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!g(this,e)}}),o(l.prototype,n?{get:function(e){var t=g(this,e);return t&&t.value},set:function(e,t){return m(this,0===e?0:e,t)}}:{add:function(e){return m(this,e=0===e?0:e,e)}}),f&&r(l.prototype,"size",{get:function(){return h(this).size}}),l},setStrong:function(e,t,n){var r=t+" Iterator",i=v(t),o=v(r);c(e,t,(function(e,t){d(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){var e=o(this),t=e.kind,n=e.last;while(n&&n.removed)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(t)}}},ZY7T:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("0GbY"),a=n("glrk"),s=n("HAuM"),u=n("SEBh"),c=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{intersection:function(e){var t=a(this),n=new(u(t,o("Set"))),r=s(t.has),i=s(n.add);return c(e,(function(e){r.call(t,e)&&i.call(n,e)})),n}})},ZfDv:function(e,t,n){var r=n("hh1v"),i=n("6LWA"),o=n("tiKp"),a=o("species");e.exports=function(e,t){var n;return i(e)&&(n=e.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?r(n)&&(n=n[a],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},Zkgb:function(e,t,n){},Zm9Q:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("q1tI"),i=n.n(r),o=n("TOwV");function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return i.a.Children.forEach(e,(function(e){(void 0!==e&&null!==e||t.keepEmpty)&&(Array.isArray(e)?n=n.concat(a(e)):Object(o["isFragment"])(e)&&e.props?n=n.concat(a(e.props.children,t)):n.push(e))})),n}},ZqBY:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return ae}));var r=n("Qyje");n("LpSC");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function v(e,t,n){return v=d()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=Function.bind.apply(e,r),o=new i;return n&&h(o,n.prototype),o},v.apply(null,arguments)}function m(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function g(e){var t="function"===typeof Map?new Map:void 0;return g=function(e){if(null===e||!m(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return v(e,arguments,p(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),h(n,e)},g(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function _(e){var t=d();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}function x(e){return w(e)||O(e)||E(e)||j()}function w(e){if(Array.isArray(e))return S(e)}function O(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function E(e,t){if(e){if("string"===typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function A(e){if(!Array.isArray(e))throw new TypeError("Middlewares must be an array!");for(var t=e.length,n=0;n<t;n++)if("function"!==typeof e[n])throw new TypeError("Middleware must be componsed of function");return function(t,n){var r=-1;function i(o){if(o<=r)return Promise.reject(new Error("next() should not be called multiple times in one middleware!"));r=o;var a=e[o]||n;if(!a)return Promise.resolve();try{return Promise.resolve(a(t,(function(){return i(o+1)})))}catch(s){return Promise.reject(s)}}return i(0)}}var k=function(){function t(e){if(s(this,t),!Array.isArray(e))throw new TypeError("Default middlewares must be an array!");this.defaultMiddlewares=x(e),this.middlewares=[]}return c(t,[{key:"use",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{global:!1,core:!1,defaultInstance:!1},i=!1,o=!1,s=!1;"number"===typeof r?(e&&Object({NODE_ENV:"production"}),i=!0,o=!1):"object"===a(r)&&r&&(o=r.global||!1,i=r.core||!1,s=r.defaultInstance||!1),o?t.globalMiddlewares.splice(t.globalMiddlewares.length-t.defaultGlobalMiddlewaresLength,0,n):i?t.coreMiddlewares.splice(t.coreMiddlewares.length-t.defaultCoreMiddlewaresLength,0,n):s?this.defaultMiddlewares.push(n):this.middlewares.push(n)}},{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=A([].concat(x(this.middlewares),x(this.defaultMiddlewares),x(t.globalMiddlewares),x(t.coreMiddlewares)));return n(e)}}]),t}();k.globalMiddlewares=[],k.defaultGlobalMiddlewaresLength=0,k.coreMiddlewares=[],k.defaultCoreMiddlewaresLength=0;var C=function(){function e(t){s(this,e),this.cache=new Map,this.timer={},this.extendOptions(t)}return c(e,[{key:"extendOptions",value:function(e){this.maxCache=e.maxCache||0}},{key:"get",value:function(e){return this.cache.get(JSON.stringify(e))}},{key:"set",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6e4;if(this.maxCache>0&&this.cache.size>=this.maxCache){var i=x(this.cache.keys())[0];this.cache["delete"](i),this.timer[i]&&clearTimeout(this.timer[i])}var o=JSON.stringify(e);this.cache.set(o,t),r>0&&(this.timer[o]=setTimeout((function(){n.cache["delete"](o),delete n.timer[o]}),r))}},{key:"delete",value:function(e){var t=JSON.stringify(e);return delete this.timer[t],this.cache["delete"](t)}},{key:"clear",value:function(){return this.timer={},this.cache.clear()}}]),e}(),T=function(e){f(n,e);var t=_(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RequestError";return s(this,n),i=t.call(this,e),i.name="RequestError",i.request=r,i.type=o,i}return n}(g(Error)),M=function(e){f(n,e);var t=_(n);function n(e,r,i,o){var a,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"ResponseError";return s(this,n),a=t.call(this,r||e.statusText),a.name="ResponseError",a.data=i,a.response=e,a.request=o,a.type=u,a}return n}(g(Error));function P(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=n,r.readAsText(e,"GBK")}))}function I(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{return JSON.parse(e)}catch(i){if(t)throw new M(n,"JSON.parse fail",e,r,"ParseError")}return e}function R(e,t,n){return new Promise((function(r,i){setTimeout((function(){i(new T(t||"timeout of ".concat(e,"ms exceeded"),n,"Timeout"))}),e)}))}function L(e){return new Promise((function(t,n){e.cancelToken&&e.cancelToken.promise.then((function(e){n(e)}))}))}var D=Object.prototype.toString;function N(){var t;return"undefined"!==typeof e&&"[object process]"===D.call(e)&&(t="NODE"),"undefined"!==typeof XMLHttpRequest&&(t="BROWSER"),t}function F(e){return"object"===a(e)&&"[object Array]"===Object.prototype.toString.call(e)}function z(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams}function B(e){return"object"===a(e)&&"[object Date]"===Object.prototype.toString.call(e)}function U(e){return null!==e&&"object"===a(e)}function V(e,t){if(e)if("object"!==a(e)&&(e=[e]),F(e))for(var n=0;n<e.length;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}function H(e){return z(e)?Object(r["parse"])(e.toString(),{strictNullHandling:!0}):"string"===typeof e?[e]:e}function G(e){return Object(r["stringify"])(e,{arrayFormat:"repeat",strictNullHandling:!0})}function W(e,t){return o(o(o({},e),t),{},{headers:o(o({},e.headers),t.headers),params:o(o({},H(e.params)),H(t.params)),method:(t.method||e.method||"get").toLowerCase()})}var q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.prefix,r=t.suffix;return n&&(e="".concat(n).concat(e)),r&&(e="".concat(e).concat(r)),{url:e,options:t}};function Z(e,t){var n=t.method,r=void 0===n?"get":n;return"get"===r.toLowerCase()}function Y(t,n){if(!t)return n();var r=t.req;r=void 0===r?{}:r;var i=r.options,o=void 0===i?{}:i,a=r.url,s=void 0===a?"":a,u=t.cache,c=t.responseInterceptors,l=o.timeout,f=void 0===l?0:l,p=o.timeoutMessage,h=o.__umiRequestCoreType__,d=void 0===h?"normal":h,v=o.useCache,m=void 0!==v&&v,g=o.method,y=void 0===g?"get":g,b=o.params,_=o.ttl,x=o.validateCache,w=void 0===x?Z:x;if("normal"!==d)return e&&Object({NODE_ENV:"production"}),n();var O=fetch;if(!O)throw new Error("Global fetch not exist!");var E,S="BROWSER"===N(),j=w(s,o)&&m&&S;if(j){var A=u.get({url:s,params:b,method:y});if(A)return A=A.clone(),A.useCache=!0,t.res=A,n()}return E=f>0?Promise.race([L(o),O(s,o),R(f,p,t.req)]):Promise.race([L(o),O(s,o)]),c.forEach((function(e){E=E.then((function(t){var n="function"===typeof t.clone?t.clone():t;return e(n,o)}))})),E.then((function(e){if(j&&200===e.status){var r=e.clone();r.useCache=!0,u.set({url:s,params:b,method:y},r,_)}return t.res=e,n()}))}function X(e,t){var n;return t().then((function(){if(e){var t=e.res,r=void 0===t?{}:t,i=e.req,o=void 0===i?{}:i,a=o||{},s=a.options;s=void 0===s?{}:s;var u=s.responseType,c=void 0===u?"json":u,l=s.charset,f=void 0===l?"utf8":l,p=(s.getResponse,s.throwErrIfParseFail),h=void 0!==p&&p,d=s.parseResponse,v=void 0===d||d;if(v&&r&&r.clone){if(n="BROWSER"===N()?r.clone():r,n.useCache=r.useCache||!1,"gbk"===f)try{return r.blob().then(P).then((function(e){return I(e,!1,n,o)}))}catch(m){throw new M(n,m.message,null,o,"ParseError")}else if("json"===c)return r.text().then((function(e){return I(e,h,n,o)}));try{return r[c]()}catch(m){throw new M(n,"responseType not support",null,o,"ParseError")}}}})).then((function(t){if(e){e.res;var r=e.req,i=void 0===r?{}:r,o=i||{},a=o.options;a=void 0===a?{}:a;var s=a.getResponse,u=void 0!==s&&s;if(n){if(n.status>=200&&n.status<300)return u?void(e.res={data:t,response:n}):void(e.res=t);throw new M(n,"http error",t,i,"HttpError")}}}))["catch"]((function(t){if(t instanceof T||t instanceof M)throw t;var n=e.req,r=e.res;throw t.request=t.request||n,t.response=t.response||r,t.type=t.type||t.name,t.data=t.data||void 0,t}))}function K(e,t){if(!e)return t();var n=e.req;n=void 0===n?{}:n;var r=n.options,i=void 0===r?{}:r,a=i.method,s=void 0===a?"get":a;if(-1===["post","put","patch","delete"].indexOf(s.toLowerCase()))return t();var u=i.requestType,c=void 0===u?"json":u,l=i.data;if(l){var f=Object.prototype.toString.call(l);"[object Object]"===f||"[object Array]"===f?"json"===c?(i.headers=o({Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},i.headers),i.body=JSON.stringify(l)):"form"===c&&(i.headers=o({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},i.headers),i.body=G(l)):(i.headers=o({Accept:"application/json"},i.headers),i.body=l)}return e.req.options=i,t()}function $(e,t){var n,r;if(e)if(t)n=t(e);else if(z(e))n=e.toString();else if(F(e))r=[],V(e,(function(e){null===e||"undefined"===typeof e?r.push(e):r.push(U(e)?JSON.stringify(e):e)})),n=G(r);else{r={},V(e,(function(e,t){var n=e;null===e||"undefined"===typeof e?r[t]=e:B(e)?n=e.toISOString():F(e)?n=e:U(e)&&(n=JSON.stringify(e)),r[t]=n}));var i=G(r);n=i}return n}function Q(e,t){if(!e)return t();var n=e.req;n=void 0===n?{}:n;var r=n.options,i=void 0===r?{}:r,o=i.paramsSerializer,a=i.params,s=e.req;s=void 0===s?{}:s;var u=s.url,c=void 0===u?"":u;i.method=i.method?i.method.toUpperCase():"GET",i.credentials=i.credentials||"same-origin";var l=$(a,o);if(e.req.originUrl=c,l){var f=-1!==c.indexOf("?")?"&":"?";e.req.url="".concat(c).concat(f).concat(l)}return e.req.options=i,t()}var J=[K,Q,X],ee=[Y];k.globalMiddlewares=J,k.defaultGlobalMiddlewaresLength=J.length,k.coreMiddlewares=ee,k.defaultCoreMiddlewaresLength=ee.length;var te=function(){function e(t){s(this,e),this.onion=new k([]),this.fetchIndex=0,this.mapCache=new C(t),this.initOptions=t,this.instanceRequestInterceptors=[],this.instanceResponseInterceptors=[]}return c(e,[{key:"use",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{global:!1,core:!1};return this.onion.use(e,t),this}},{key:"extendOptions",value:function(e){this.initOptions=W(this.initOptions,e),this.mapCache.extendOptions(e)}},{key:"dealRequestInterceptors",value:function(t){var n=function(e,n){return e.then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.req.url=e.url||t.req.url,t.req.options=e.options||t.req.options,n(t.req.url,t.req.options)}))},r=[].concat(x(e.requestInterceptors),x(this.instanceRequestInterceptors));return r.reduce(n,Promise.resolve()).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.req.url=e.url||t.req.url,t.req.options=e.options||t.req.options,Promise.resolve()}))}},{key:"request",value:function(t,n){var r=this,i=this.onion,a={req:{url:t,options:o(o({},n),{},{url:t})},res:null,cache:this.mapCache,responseInterceptors:[].concat(x(e.responseInterceptors),x(this.instanceResponseInterceptors))};if("string"!==typeof t)throw new Error("url MUST be a string");return new Promise((function(e,t){r.dealRequestInterceptors(a).then((function(){return i.execute(a)})).then((function(){e(a.res)}))["catch"]((function(n){var r=a.req.options.errorHandler;if(r)try{var i=r(n);e(i)}catch(o){t(o)}else t(n)}))}))}}],[{key:"requestUse",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{global:!0};if("function"!==typeof t)throw new TypeError("Interceptor must be function!");n.global?e.requestInterceptors.push(t):this.instanceRequestInterceptors.push(t)}},{key:"responseUse",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{global:!0};if("function"!==typeof t)throw new TypeError("Interceptor must be function!");n.global?e.responseInterceptors.push(t):this.instanceResponseInterceptors.push(t)}}]),e}();function ne(e){this.message=e}function re(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new ne(e),t(n.reason))}))}function ie(e){return!(!e||!e.__CANCEL__)}te.requestInterceptors=[q],te.responseInterceptors=[],ne.prototype.toString=function(){return this.message?"Cancel: ".concat(this.message):"Cancel"},ne.prototype.__CANCEL__=!0,re.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},re.source=function(){var e,t=new re((function(t){e=t}));return{token:t,cancel:e}};var oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new te(e),n=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=W(t.initOptions,n);return t.request(e,r)};n.use=t.use.bind(t),n.fetchIndex=t.fetchIndex,n.interceptors={request:{use:te.requestUse.bind(t)},response:{use:te.responseUse.bind(t)}};var r=["get","post","delete","put","patch","head","options","rpc"];return r.forEach((function(e){n[e]=function(t,r){return n(t,o(o({},r),{},{method:e}))}})),n.Cancel=ne,n.CancelToken=re,n.isCancel=ie,n.extendOptions=t.extendOptions.bind(t),n.middlewares={instance:t.onion.middlewares,defaultInstance:t.onion.defaultMiddlewares,global:k.globalMiddlewares,core:k.coreMiddlewares},n},ae=function(e){return oe(e)};oe({parseResponse:!1}),oe({})}).call(this,n("Q2Ig"))},ZsH6:function(e,t,n){var r=n("I+eb"),i=n("eDxR"),o=n("glrk"),a=n("4WOD"),s=i.has,u=i.get,c=i.toKey,l=function(e,t,n){var r=s(e,t,n);if(r)return u(e,t,n);var i=a(t);return null!==i?l(e,i,n):void 0};r({target:"Reflect",stat:!0},{getMetadata:function(e,t){var n=arguments.length<3?void 0:c(arguments[2]);return l(e,o(t),n)}})},Zsi7:function(e,t,n){"use strict";n.r(t);var r=n("k1fw"),i=n("q1tI"),o=n.n(i),a=n("dEAq"),s=n("Zxc8"),u=n("H1Ra"),c=n("nKUr"),l=o.a.memo((e=>{var t=e.demos,n=t["docs-control"].component;return Object(c["jsx"])(c["Fragment"],{children:Object(c["jsxs"])(o.a.Fragment,{children:[Object(c["jsxs"])("div",{className:"markdown",children:[Object(c["jsxs"])("h2",{id:"contorl-props",children:[Object(c["jsx"])(a["AnchorLink"],{to:"#contorl-props","aria-hidden":"true",tabIndex:-1,children:Object(c["jsx"])("span",{className:"icon icon-link"})}),"Contorl Props"]}),Object(c["jsxs"])("ul",{children:[Object(c["jsx"])("li",{children:Object(c["jsxs"])("p",{children:["type: ",Object(c["jsx"])("code",{children:"'scale' | 'zoom' | 'logo' | 'layer'"})]})}),Object(c["jsx"])("li",{children:Object(c["jsxs"])("p",{children:["position: ",Object(c["jsx"])("code",{children:"'topright' | 'topleft' | 'bottomright' | 'bottomleft' | 'topcenter' | 'bottomcenter' | 'leftcenter' | 'rightcenter';"})]})})]})]}),Object(c["jsx"])(s["default"],Object(r["a"])(Object(r["a"])({},t["docs-control"].previewerProps),{},{children:Object(c["jsx"])(n,{})})),Object(c["jsxs"])("div",{className:"markdown",children:[Object(c["jsxs"])("h2",{id:"customcontrol",children:[Object(c["jsx"])(a["AnchorLink"],{to:"#customcontrol","aria-hidden":"true",tabIndex:-1,children:Object(c["jsx"])("span",{className:"icon icon-link"})}),"CustomControl"]}),Object(c["jsx"])("p",{children:"\u81ea\u5b9a\u4e49 Control"}),Object(c["jsxs"])("ul",{children:[Object(c["jsxs"])("li",{children:["position: ",Object(c["jsx"])("code",{children:"'topright' | 'topleft' | 'bottomright' | 'bottomleft' | 'topcenter' | 'bottomcenter' | 'leftcenter' | 'rightcenter';"})]}),Object(c["jsx"])("li",{children:"style controll Css \u6837\u5f0f"})]}),Object(c["jsx"])(u["a"],{code:"<CustomControl position=\"topright\" style={{ display: 'flex' }}>\n  <h1 style={{ color: 'red' }}>1</h1>\n  <h1 style={{ color: 'red' }}>2</h1>\n</CustomControl>",lang:"tsx"})]})]})})}));t["default"]=e=>{var t=o.a.useContext(a["context"]),n=t.demos;return o.a.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&a["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),Object(c["jsx"])(l,{demos:n})}},Ztfv:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tagProperty=t.tagParameter=t.decorate=void 0;var r=n("MON2"),i=n("xfSm");function o(e,t,n,r){var o=i.TAGGED;s(o,e,t,r,n)}function a(e,t,n){var r=i.TAGGED_PROP;s(r,e.constructor,t,n)}function s(e,t,n,i,o){var a={},s="number"===typeof o,u=void 0!==o&&s?o.toString():n;if(s&&void 0!==n)throw new Error(r.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(e,t)&&(a=Reflect.getMetadata(e,t));var c=a[u];if(Array.isArray(c))for(var l=0,f=c;l<f.length;l++){var p=f[l];if(p.key===i.key)throw new Error(r.DUPLICATED_METADATA+" "+p.key.toString())}else c=[];c.push(i),a[u]=c,Reflect.defineMetadata(e,a,t)}function u(e,t){Reflect.decorate(e,t)}function c(e,t){return function(n,r){t(n,r,e)}}function l(e,t,n){"number"===typeof n?u([c(n,e)],t):"string"===typeof n?Reflect.decorate([e],t,n):u([e],t)}t.tagParameter=o,t.tagProperty=a,t.decorate=l},ZvpZ:function(e,t,n){"use strict";var r={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},i=n("wx14"),o={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},a=o,s={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},u=s,c={lang:Object(i["a"])({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},a),timePickerLocale:Object(i["a"])({},u)},l=c,f=l,p="${label} is not a valid ${type}",h={locale:"en",Pagination:r,DatePicker:l,TimePicker:u,Calendar:f,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:p,method:p,array:p,object:p,number:p,date:p,boolean:p,integer:p,float:p,regexp:p,email:p,url:p,hex:p},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}};t["a"]=h},Zxc8:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),i=n.n(r),o=n("wx14"),a=n("rePB"),s=n("ODXe"),u=n("U8pU"),c=n("Ff2n"),l=n("VTBJ"),f=n("TSYQ"),p=n.n(f),h=n("Zm9Q"),d=n("5Z9U"),v=n("6cGi"),m=n("KQm4"),g=n("wgJM"),y=n("t23M");function b(e){var t=Object(r["useRef"])(),n=Object(r["useRef"])(!1);function i(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];n.current||(g["a"].cancel(t.current),t.current=Object(g["a"])((function(){e.apply(void 0,i)})))}return Object(r["useEffect"])((function(){return n.current=!1,function(){n.current=!0,g["a"].cancel(t.current)}}),[]),i}function _(e){var t=Object(r["useRef"])([]),n=Object(r["useState"])({}),i=Object(s["a"])(n,2),o=i[1],a=Object(r["useRef"])("function"===typeof e?e():e),u=b((function(){var e=a.current;t.current.forEach((function(t){e=t(e)})),t.current=[],a.current=e,o({})}));function c(e){t.current.push(e),u()}return[a.current,c]}var x=n("4IlW");function w(e,t){var n,i=e.prefixCls,o=e.id,s=e.active,u=e.tab,c=u.key,l=u.tab,f=u.disabled,h=u.closeIcon,d=e.closable,v=e.renderWrapper,m=e.removeAriaLabel,g=e.editable,y=e.onClick,b=e.onRemove,_=e.onFocus,w=e.style,O="".concat(i,"-tab");r["useEffect"]((function(){return b}),[]);var E=g&&!1!==d&&!f;function S(e){f||y(e)}function j(e){e.preventDefault(),e.stopPropagation(),g.onEdit("remove",{key:c,event:e})}var A=r["createElement"]("div",{key:c,ref:t,className:p()(O,(n={},Object(a["a"])(n,"".concat(O,"-with-remove"),E),Object(a["a"])(n,"".concat(O,"-active"),s),Object(a["a"])(n,"".concat(O,"-disabled"),f),n)),style:w,onClick:S},r["createElement"]("div",{role:"tab","aria-selected":s,id:o&&"".concat(o,"-tab-").concat(c),className:"".concat(O,"-btn"),"aria-controls":o&&"".concat(o,"-panel-").concat(c),"aria-disabled":f,tabIndex:f?null:0,onClick:function(e){e.stopPropagation(),S(e)},onKeyDown:function(e){[x["a"].SPACE,x["a"].ENTER].includes(e.which)&&(e.preventDefault(),S(e))},onFocus:_},l),E&&r["createElement"]("button",{type:"button","aria-label":m||"remove",tabIndex:0,className:"".concat(O,"-remove"),onClick:function(e){e.stopPropagation(),j(e)}},h||g.removeIcon||"\xd7"));return v?v(A):A}var O=r["forwardRef"](w),E={width:0,height:0,left:0,top:0};function S(e,t,n){return Object(r["useMemo"])((function(){for(var n,r=new Map,i=t.get(null===(n=e[0])||void 0===n?void 0:n.key)||E,o=i.left+i.width,a=0;a<e.length;a+=1){var s,u=e[a].key,c=t.get(u);if(!c)c=t.get(null===(s=e[a-1])||void 0===s?void 0:s.key)||E;var f=r.get(u)||Object(l["a"])({},c);f.right=o-f.left-f.width,r.set(u,f)}return r}),[e.map((function(e){return e.key})).join("_"),t,n])}var j={width:0,height:0,left:0,top:0,right:0};function A(e,t,n,i,o){var a,s,u,c=o.tabs,l=o.tabPosition,f=o.rtl;["top","bottom"].includes(l)?(a="width",s=f?"right":"left",u=Math.abs(t.left)):(a="height",s="top",u=-t.top);var p=t[a],h=n[a],d=i[a],v=p;return h+d>p&&h<p&&(v=p-d),Object(r["useMemo"])((function(){if(!c.length)return[0,0];for(var t=c.length,n=t,r=0;r<t;r+=1){var i=e.get(c[r].key)||j;if(i[s]+i[a]>u+v){n=r-1;break}}for(var o=0,l=t-1;l>=0;l-=1){var f=e.get(c[l].key)||j;if(f[s]<u){o=l+1;break}}return[o,n]}),[e,u,v,l,c.map((function(e){return e.key})).join("_"),f])}var k=n("Gytx"),C=n.n(k),T=n("Kwbf"),M=n("8z13"),P=n("1OyB"),I=n("vuIU"),R=n("Ji7U"),L=n("LK+K"),D=n("bT9E"),N=n("YrtM"),F=["children","locked"],z=r["createContext"](null);function B(e,t){var n=Object(l["a"])({},e);return Object.keys(t).forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n}function U(e){var t=e.children,n=e.locked,i=Object(c["a"])(e,F),o=r["useContext"](z),a=Object(N["a"])((function(){return B(o,i)}),[o,i],(function(e,t){return!n&&(e[0]!==t[0]||!C()(e[1],t[1]))}));return r["createElement"](z.Provider,{value:a},t)}function V(e,t,n,i){var o=r["useContext"](z),a=o.activeKey,s=o.onActive,u=o.onInactive,c={active:a===e};return t||(c.onMouseEnter=function(t){null===n||void 0===n||n({key:e,domEvent:t}),s(e)},c.onMouseLeave=function(t){null===i||void 0===i||i({key:e,domEvent:t}),u(e)}),c}var H=["item"];function G(e){var t=e.item,n=Object(c["a"])(e,H);return Object.defineProperty(n,"item",{get:function(){return Object(T["a"])(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}function W(e){var t,n=e.icon,i=e.props,o=e.children;return t="function"===typeof n?r["createElement"](n,Object(l["a"])({},i)):n,t||o||null}function q(e){var t=r["useContext"](z),n=t.mode,i=t.rtl,o=t.inlineIndent;if("inline"!==n)return null;var a=e;return i?{paddingRight:a*o}:{paddingLeft:a*o}}var Z=[],Y=r["createContext"](null);function X(){return r["useContext"](Y)}var K=r["createContext"](Z);function $(e){var t=r["useContext"](K);return r["useMemo"]((function(){return void 0!==e?[].concat(Object(m["a"])(t),[e]):t}),[t,e])}var Q=r["createContext"](null),J=r["createContext"](null);function ee(e,t){return void 0===e?null:"".concat(e,"-").concat(t)}function te(e){var t=r["useContext"](J);return ee(t,e)}var ne=r["createContext"]({}),re=ne,ie=["title","attribute","elementRef"],oe=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],ae=["active"],se=function(e){Object(R["a"])(n,e);var t=Object(L["a"])(n);function n(){return Object(P["a"])(this,n),t.apply(this,arguments)}return Object(I["a"])(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.attribute,i=e.elementRef,a=Object(c["a"])(e,ie),s=Object(D["a"])(a,["eventKey"]);return Object(T["a"])(!n,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),r["createElement"](M["a"].Item,Object(o["a"])({},n,{title:"string"===typeof t?t:void 0},s,{ref:i}))}}]),n}(r["Component"]),ue=function(e){var t,n=e.style,i=e.className,s=e.eventKey,u=(e.warnKey,e.disabled),f=e.itemIcon,h=e.children,d=e.role,v=e.onMouseEnter,g=e.onMouseLeave,y=e.onClick,b=e.onKeyDown,_=e.onFocus,w=Object(c["a"])(e,oe),O=te(s),E=r["useContext"](z),S=E.prefixCls,j=E.onItemClick,A=E.disabled,k=E.overflowDisabled,C=E.itemIcon,T=E.selectedKeys,M=E.onActive,P=r["useContext"](re),I=P._internalRenderMenuItem,R="".concat(S,"-item"),L=r["useRef"](),D=r["useRef"](),N=A||u,F=$(s);var B=function(e){return{key:s,keyPath:Object(m["a"])(F).reverse(),item:L.current,domEvent:e}},U=f||C,H=V(s,N,v,g),Z=H.active,Y=Object(c["a"])(H,ae),X=T.includes(s),K=q(F.length),Q=function(e){if(!N){var t=B(e);null===y||void 0===y||y(G(t)),j(t)}},J=function(e){if(null===b||void 0===b||b(e),e.which===x["a"].ENTER){var t=B(e);null===y||void 0===y||y(G(t)),j(t)}},ee=function(e){M(s),null===_||void 0===_||_(e)},ne={};"option"===e.role&&(ne["aria-selected"]=X);var ie=r["createElement"](se,Object(o["a"])({ref:L,elementRef:D,role:null===d?"none":d||"menuitem",tabIndex:u?null:-1,"data-menu-id":k&&O?null:O},w,Y,ne,{component:"li","aria-disabled":u,style:Object(l["a"])(Object(l["a"])({},K),n),className:p()(R,(t={},Object(a["a"])(t,"".concat(R,"-active"),Z),Object(a["a"])(t,"".concat(R,"-selected"),X),Object(a["a"])(t,"".concat(R,"-disabled"),N),t),i),onClick:Q,onKeyDown:J,onFocus:ee}),h,r["createElement"](W,{props:Object(l["a"])(Object(l["a"])({},e),{},{isSelected:X}),icon:U}));return I&&(ie=I(ie,e,{selected:X})),ie};function ce(e){var t=e.eventKey,n=X(),i=$(t);return r["useEffect"]((function(){if(n)return n.registerPath(t,i),function(){n.unregisterPath(t,i)}}),[i]),n?null:r["createElement"](ue,e)}var le=ce,fe=["label","children","key","type"];function pe(e,t){return Object(h["a"])(e).map((function(e,n){if(r["isValidElement"](e)){var i,o,a=e.key,s=null!==(i=null===(o=e.props)||void 0===o?void 0:o.eventKey)&&void 0!==i?i:a,u=null===s||void 0===s;u&&(s="tmp_key-".concat([].concat(Object(m["a"])(t),[n]).join("-")));var c={key:s,eventKey:s};return r["cloneElement"](e,c)}return e}))}function he(e){return(e||[]).map((function(e,t){if(e&&"object"===Object(u["a"])(e)){var n=e.label,i=e.children,a=e.key,s=e.type,l=Object(c["a"])(e,fe),f=null!==a&&void 0!==a?a:"tmp-".concat(t);return i||"group"===s?"group"===s?r["createElement"](ht,Object(o["a"])({key:f},l,{title:n}),he(i)):r["createElement"](Pe,Object(o["a"])({key:f},l,{title:n}),he(i)):"divider"===s?r["createElement"](dt,Object(o["a"])({key:f},l)):r["createElement"](le,Object(o["a"])({key:f},l),n)}return null})).filter((function(e){return e}))}function de(e,t,n){var r=e;return t&&(r=he(t)),pe(r,n)}function ve(e){var t=r["useRef"](e);t.current=e;var n=r["useCallback"]((function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return e?n:void 0}var me=["className","children"],ge=function(e,t){var n=e.className,i=e.children,a=Object(c["a"])(e,me),s=r["useContext"](z),u=s.prefixCls,l=s.mode,f=s.rtl;return r["createElement"]("ul",Object(o["a"])({className:p()(u,f&&"".concat(u,"-rtl"),"".concat(u,"-sub"),"".concat(u,"-").concat("inline"===l?"inline":"vertical"),n)},a,{"data-menu-list":!0,ref:t}),i)},ye=r["forwardRef"](ge);ye.displayName="SubMenuList";var be=ye,_e=n("uciX"),xe={adjustX:1,adjustY:1},we={topLeft:{points:["bl","tl"],overflow:xe,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:xe,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:xe,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:xe,offset:[4,0]}},Oe={topLeft:{points:["bl","tl"],overflow:xe,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:xe,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:xe,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:xe,offset:[4,0]}};function Ee(e,t,n){return t||(n?n[e]||n.other:void 0)}var Se={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function je(e){var t=e.prefixCls,n=e.visible,i=e.children,o=e.popup,u=e.popupClassName,c=e.popupOffset,f=e.disabled,h=e.mode,d=e.onVisibleChange,v=r["useContext"](z),m=v.getPopupContainer,y=v.rtl,b=v.subMenuOpenDelay,_=v.subMenuCloseDelay,x=v.builtinPlacements,w=v.triggerSubMenuAction,O=v.forceSubMenuRender,E=v.rootClassName,S=v.motion,j=v.defaultMotions,A=r["useState"](!1),k=Object(s["a"])(A,2),C=k[0],T=k[1],M=y?Object(l["a"])(Object(l["a"])({},Oe),x):Object(l["a"])(Object(l["a"])({},we),x),P=Se[h],I=Ee(h,S,j),R=Object(l["a"])(Object(l["a"])({},I),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),L=r["useRef"]();return r["useEffect"]((function(){return L.current=Object(g["a"])((function(){T(n)})),function(){g["a"].cancel(L.current)}}),[n]),r["createElement"](_e["a"],{prefixCls:t,popupClassName:p()("".concat(t,"-popup"),Object(a["a"])({},"".concat(t,"-rtl"),y),u,E),stretch:"horizontal"===h?"minWidth":null,getPopupContainer:m,builtinPlacements:M,popupPlacement:P,popupVisible:C,popup:o,popupAlign:c&&{offset:c},action:f?[]:[w],mouseEnterDelay:b,mouseLeaveDelay:_,onPopupVisibleChange:d,forceRender:O,popupMotion:R},i)}var Ae=n("8XRh");function ke(e){var t=e.id,n=e.open,i=e.keyPath,a=e.children,u="inline",c=r["useContext"](z),f=c.prefixCls,p=c.forceSubMenuRender,h=c.motion,d=c.defaultMotions,v=c.mode,m=r["useRef"](!1);m.current=v===u;var g=r["useState"](!m.current),y=Object(s["a"])(g,2),b=y[0],_=y[1],x=!!m.current&&n;r["useEffect"]((function(){m.current&&_(!1)}),[v]);var w=Object(l["a"])({},Ee(u,h,d));i.length>1&&(w.motionAppear=!1);var O=w.onVisibleChanged;return w.onVisibleChanged=function(e){return m.current||e||_(!0),null===O||void 0===O?void 0:O(e)},b?null:r["createElement"](U,{mode:u,locked:!m.current},r["createElement"](Ae["b"],Object(o["a"])({visible:x},w,{forceRender:p,removeOnLeave:!1,leavedClassName:"".concat(f,"-hidden")}),(function(e){var n=e.className,i=e.style;return r["createElement"](be,{id:t,className:n,style:i},a)})))}var Ce=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],Te=["active"],Me=function(e){var t,n=e.style,i=e.className,u=e.title,f=e.eventKey,h=(e.warnKey,e.disabled),d=e.internalPopupClose,v=e.children,m=e.itemIcon,g=e.expandIcon,y=e.popupClassName,b=e.popupOffset,_=e.onClick,x=e.onMouseEnter,w=e.onMouseLeave,O=e.onTitleClick,E=e.onTitleMouseEnter,S=e.onTitleMouseLeave,j=Object(c["a"])(e,Ce),A=te(f),k=r["useContext"](z),C=k.prefixCls,T=k.mode,P=k.openKeys,I=k.disabled,R=k.overflowDisabled,L=k.activeKey,D=k.selectedKeys,N=k.itemIcon,F=k.expandIcon,B=k.onItemClick,H=k.onOpenChange,Z=k.onActive,Y=r["useContext"](re),X=Y._internalRenderSubMenuItem,K=r["useContext"](Q),J=K.isSubPathKey,ee=$(),ne="".concat(C,"-submenu"),ie=I||h,oe=r["useRef"](),ae=r["useRef"]();var se=m||N,ue=g||F,ce=P.includes(f),le=!R&&ce,fe=J(D,f),pe=V(f,ie,E,S),he=pe.active,de=Object(c["a"])(pe,Te),me=r["useState"](!1),ge=Object(s["a"])(me,2),ye=ge[0],_e=ge[1],xe=function(e){ie||_e(e)},we=function(e){xe(!0),null===x||void 0===x||x({key:f,domEvent:e})},Oe=function(e){xe(!1),null===w||void 0===w||w({key:f,domEvent:e})},Ee=r["useMemo"]((function(){return he||"inline"!==T&&(ye||J([L],f))}),[T,he,L,ye,f,J]),Se=q(ee.length),Ae=function(e){ie||(null===O||void 0===O||O({key:f,domEvent:e}),"inline"===T&&H(f,!ce))},Me=ve((function(e){null===_||void 0===_||_(G(e)),B(e)})),Pe=function(e){"inline"!==T&&H(f,e)},Ie=function(){Z(f)},Re=A&&"".concat(A,"-popup"),Le=r["createElement"]("div",Object(o["a"])({role:"menuitem",style:Se,className:"".concat(ne,"-title"),tabIndex:ie?null:-1,ref:oe,title:"string"===typeof u?u:null,"data-menu-id":R&&A?null:A,"aria-expanded":le,"aria-haspopup":!0,"aria-controls":Re,"aria-disabled":ie,onClick:Ae,onFocus:Ie},de),u,r["createElement"](W,{icon:"horizontal"!==T?ue:null,props:Object(l["a"])(Object(l["a"])({},e),{},{isOpen:le,isSubMenu:!0})},r["createElement"]("i",{className:"".concat(ne,"-arrow")}))),De=r["useRef"](T);if("inline"!==T&&(De.current=ee.length>1?"vertical":T),!R){var Ne=De.current;Le=r["createElement"](je,{mode:Ne,prefixCls:ne,visible:!d&&le&&"inline"!==T,popupClassName:y,popupOffset:b,popup:r["createElement"](U,{mode:"horizontal"===Ne?"vertical":Ne},r["createElement"](be,{id:Re,ref:ae},v)),disabled:ie,onVisibleChange:Pe},Le)}var Fe=r["createElement"](M["a"].Item,Object(o["a"])({role:"none"},j,{component:"li",style:n,className:p()(ne,"".concat(ne,"-").concat(T),i,(t={},Object(a["a"])(t,"".concat(ne,"-open"),le),Object(a["a"])(t,"".concat(ne,"-active"),Ee),Object(a["a"])(t,"".concat(ne,"-selected"),fe),Object(a["a"])(t,"".concat(ne,"-disabled"),ie),t)),onMouseEnter:we,onMouseLeave:Oe}),Le,!R&&r["createElement"](ke,{id:Re,open:le,keyPath:ee},v));return X&&(Fe=X(Fe,e,{selected:fe,active:Ee,open:le,disabled:ie})),r["createElement"](U,{onItemClick:Me,mode:"horizontal"===T?"vertical":T,itemIcon:se,expandIcon:ue},Fe)};function Pe(e){var t,n=e.eventKey,i=e.children,o=$(n),a=pe(i,o),s=X();return r["useEffect"]((function(){if(s)return s.registerPath(n,o),function(){s.unregisterPath(n,o)}}),[o]),t=s?a:r["createElement"](Me,e,a),r["createElement"](K.Provider,{value:o},t)}var Ie=n("x/xZ");function Re(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Object(Ie["a"])(e)){var n=e.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||e.isContentEditable||"a"===n&&!!e.getAttribute("href"),i=e.getAttribute("tabindex"),o=Number(i),a=null;return i&&!Number.isNaN(o)?a=o:r&&null===a&&(a=0),r&&e.disabled&&(a=null),null!==a&&(a>=0||t&&a<0)}return!1}function Le(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(m["a"])(e.querySelectorAll("*")).filter((function(e){return Re(e,t)}));return Re(e,t)&&n.unshift(e),n}var De=x["a"].LEFT,Ne=x["a"].RIGHT,Fe=x["a"].UP,ze=x["a"].DOWN,Be=x["a"].ENTER,Ue=x["a"].ESC,Ve=x["a"].HOME,He=x["a"].END,Ge=[Fe,ze,De,Ne];function We(e,t,n,r){var i,o,s,u,c="prev",l="next",f="children",p="parent";if("inline"===e&&r===Be)return{inlineTrigger:!0};var h=(i={},Object(a["a"])(i,Fe,c),Object(a["a"])(i,ze,l),i),d=(o={},Object(a["a"])(o,De,n?l:c),Object(a["a"])(o,Ne,n?c:l),Object(a["a"])(o,ze,f),Object(a["a"])(o,Be,f),o),v=(s={},Object(a["a"])(s,Fe,c),Object(a["a"])(s,ze,l),Object(a["a"])(s,Be,f),Object(a["a"])(s,Ue,p),Object(a["a"])(s,De,n?f:p),Object(a["a"])(s,Ne,n?p:f),s),m={inline:h,horizontal:d,vertical:v,inlineSub:h,horizontalSub:v,verticalSub:v},g=null===(u=m["".concat(e).concat(t?"":"Sub")])||void 0===u?void 0:u[r];switch(g){case c:return{offset:-1,sibling:!0};case l:return{offset:1,sibling:!0};case p:return{offset:-1,sibling:!1};case f:return{offset:1,sibling:!1};default:return null}}function qe(e){var t=e;while(t){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}function Ze(e,t){var n=e||document.activeElement;while(n){if(t.has(n))return n;n=n.parentElement}return null}function Ye(e,t){var n=Le(e,!0);return n.filter((function(e){return t.has(e)}))}function Xe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return null;var i=Ye(e,t),o=i.length,a=i.findIndex((function(e){return n===e}));return r<0?-1===a?a=o-1:a-=1:r>0&&(a+=1),a=(a+o)%o,i[a]}function Ke(e,t,n,i,o,a,s,u,c,l){var f=r["useRef"](),p=r["useRef"]();p.current=t;var h=function(){g["a"].cancel(f.current)};return r["useEffect"]((function(){return function(){h()}}),[]),function(r){var d=r.which;if([].concat(Ge,[Be,Ue,Ve,He]).includes(d)){var v,m,y,b=function(){v=new Set,m=new Map,y=new Map;var e=a();return e.forEach((function(e){var t=document.querySelector("[data-menu-id='".concat(ee(i,e),"']"));t&&(v.add(t),y.set(t,e),m.set(e,t))})),v};b();var _=m.get(t),x=Ze(_,v),w=y.get(x),O=We(e,1===s(w,!0).length,n,d);if(!O&&d!==Ve&&d!==He)return;(Ge.includes(d)||[Ve,He].includes(d))&&r.preventDefault();var E=function(e){if(e){var t=e,n=e.querySelector("a");(null===n||void 0===n?void 0:n.getAttribute("href"))&&(t=n);var r=y.get(e);u(r),h(),f.current=Object(g["a"])((function(){p.current===r&&t.focus()}))}};if([Ve,He].includes(d)||O.sibling||!x){var S,j;S=x&&"inline"!==e?qe(x):o.current;var A=Ye(S,v);j=d===Ve?A[0]:d===He?A[A.length-1]:Xe(S,v,x,O.offset),E(j)}else if(O.inlineTrigger)c(w);else if(O.offset>0)c(w,!0),h(),f.current=Object(g["a"])((function(){b();var e=x.getAttribute("aria-controls"),t=document.getElementById(e),n=Xe(t,v);E(n)}),5);else if(O.offset<0){var k=s(w,!0),C=k[k.length-2],T=m.get(C);c(C,!1),E(T)}}null===l||void 0===l||l(r)}}var $e=Math.random().toFixed(5).toString().slice(2),Qe=0;function Je(e){var t=Object(v["a"])(e,{value:e}),n=Object(s["a"])(t,2),i=n[0],o=n[1];return r["useEffect"]((function(){Qe+=1;var e="".concat($e,"-").concat(Qe);o("rc-menu-uuid-".concat(e))}),[]),i}function et(e){Promise.resolve().then(e)}var tt="__RC_UTIL_PATH_SPLIT__",nt=function(e){return e.join(tt)},rt=function(e){return e.split(tt)},it="rc-menu-more";function ot(){var e=r["useState"]({}),t=Object(s["a"])(e,2),n=t[1],i=Object(r["useRef"])(new Map),o=Object(r["useRef"])(new Map),a=r["useState"]([]),u=Object(s["a"])(a,2),c=u[0],l=u[1],f=Object(r["useRef"])(0),p=Object(r["useRef"])(!1),h=function(){p.current||n({})},d=Object(r["useCallback"])((function(e,t){var n=nt(t);o.current.set(n,e),i.current.set(e,n),f.current+=1;var r=f.current;et((function(){r===f.current&&h()}))}),[]),v=Object(r["useCallback"])((function(e,t){var n=nt(t);o.current["delete"](n),i.current["delete"](e)}),[]),g=Object(r["useCallback"])((function(e){l(e)}),[]),y=Object(r["useCallback"])((function(e,t){var n=i.current.get(e)||"",r=rt(n);return t&&c.includes(r[0])&&r.unshift(it),r}),[c]),b=Object(r["useCallback"])((function(e,t){return e.some((function(e){var n=y(e,!0);return n.includes(t)}))}),[y]),_=function(){var e=Object(m["a"])(i.current.keys());return c.length&&e.push(it),e},x=Object(r["useCallback"])((function(e){var t="".concat(i.current.get(e)).concat(tt),n=new Set;return Object(m["a"])(o.current.keys()).forEach((function(e){e.startsWith(t)&&n.add(o.current.get(e))})),n}),[]);return r["useEffect"]((function(){return function(){p.current=!0}}),[]),{registerPath:d,unregisterPath:v,refreshOverflowKeys:g,isSubPathKey:b,getKeyPath:y,getKeys:_,getSubPathKeys:x}}var at=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],st=[],ut=r["forwardRef"]((function(e,t){var n,i,u=e.prefixCls,f=void 0===u?"rc-menu":u,h=e.rootClassName,d=e.style,g=e.className,y=e.tabIndex,b=void 0===y?0:y,_=e.items,x=e.children,w=e.direction,O=e.id,E=e.mode,S=void 0===E?"vertical":E,j=e.inlineCollapsed,A=e.disabled,k=e.disabledOverflow,T=e.subMenuOpenDelay,P=void 0===T?.1:T,I=e.subMenuCloseDelay,R=void 0===I?.1:I,L=e.forceSubMenuRender,D=e.defaultOpenKeys,N=e.openKeys,F=e.activeKey,z=e.defaultActiveFirst,B=e.selectable,V=void 0===B||B,H=e.multiple,W=void 0!==H&&H,q=e.defaultSelectedKeys,Z=e.selectedKeys,X=e.onSelect,K=e.onDeselect,$=e.inlineIndent,te=void 0===$?24:$,ne=e.motion,ie=e.defaultMotions,oe=e.triggerSubMenuAction,ae=void 0===oe?"hover":oe,se=e.builtinPlacements,ue=e.itemIcon,ce=e.expandIcon,fe=e.overflowedIndicator,pe=void 0===fe?"...":fe,he=e.overflowedIndicatorPopupClassName,me=e.getPopupContainer,ge=e.onClick,ye=e.onOpenChange,be=e.onKeyDown,_e=(e.openAnimation,e.openTransitionName,e._internalRenderMenuItem),xe=e._internalRenderSubMenuItem,we=Object(c["a"])(e,at),Oe=r["useMemo"]((function(){return de(x,_,st)}),[x,_]),Ee=r["useState"](!1),Se=Object(s["a"])(Ee,2),je=Se[0],Ae=Se[1],ke=r["useRef"](),Ce=Je(O),Te="rtl"===w;var Me=r["useMemo"]((function(){return"inline"!==S&&"vertical"!==S||!j?[S,!1]:["vertical",j]}),[S,j]),Ie=Object(s["a"])(Me,2),Re=Ie[0],Le=Ie[1],De=r["useState"](0),Ne=Object(s["a"])(De,2),Fe=Ne[0],ze=Ne[1],Be=Fe>=Oe.length-1||"horizontal"!==Re||k,Ue=Object(v["a"])(D,{value:N,postState:function(e){return e||st}}),Ve=Object(s["a"])(Ue,2),He=Ve[0],Ge=Ve[1],We=function(e){Ge(e),null===ye||void 0===ye||ye(e)},qe=r["useState"](He),Ze=Object(s["a"])(qe,2),Ye=Ze[0],Xe=Ze[1],$e="inline"===Re,Qe=r["useRef"](!1);r["useEffect"]((function(){$e&&Xe(He)}),[He]),r["useEffect"]((function(){Qe.current&&($e?Ge(Ye):We(st))}),[$e]),r["useEffect"]((function(){return Qe.current=!0,function(){Qe.current=!1}}),[]);var et=ot(),tt=et.registerPath,nt=et.unregisterPath,rt=et.refreshOverflowKeys,ut=et.isSubPathKey,ct=et.getKeyPath,lt=et.getKeys,ft=et.getSubPathKeys,pt=r["useMemo"]((function(){return{registerPath:tt,unregisterPath:nt}}),[tt,nt]),ht=r["useMemo"]((function(){return{isSubPathKey:ut}}),[ut]);r["useEffect"]((function(){rt(Be?st:Oe.slice(Fe+1).map((function(e){return e.key})))}),[Fe,Be]);var dt=Object(v["a"])(F||z&&(null===(n=Oe[0])||void 0===n?void 0:n.key),{value:F}),vt=Object(s["a"])(dt,2),mt=vt[0],gt=vt[1],yt=ve((function(e){gt(e)})),bt=ve((function(){gt(void 0)}));Object(r["useImperativeHandle"])(t,(function(){return{list:ke.current,focus:function(e){var t,n,r,i,o=null!==mt&&void 0!==mt?mt:null===(t=Oe.find((function(e){return!e.props.disabled})))||void 0===t?void 0:t.key;o&&(null===(n=ke.current)||void 0===n||null===(r=n.querySelector("li[data-menu-id='".concat(ee(Ce,o),"']")))||void 0===r||null===(i=r.focus)||void 0===i||i.call(r,e))}}}));var _t=Object(v["a"])(q||[],{value:Z,postState:function(e){return Array.isArray(e)?e:null===e||void 0===e?st:[e]}}),xt=Object(s["a"])(_t,2),wt=xt[0],Ot=xt[1],Et=function(e){if(V){var t,n=e.key,r=wt.includes(n);t=W?r?wt.filter((function(e){return e!==n})):[].concat(Object(m["a"])(wt),[n]):[n],Ot(t);var i=Object(l["a"])(Object(l["a"])({},e),{},{selectedKeys:t});r?null===K||void 0===K||K(i):null===X||void 0===X||X(i)}!W&&He.length&&"inline"!==Re&&We(st)},St=ve((function(e){null===ge||void 0===ge||ge(G(e)),Et(e)})),jt=ve((function(e,t){var n=He.filter((function(t){return t!==e}));if(t)n.push(e);else if("inline"!==Re){var r=ft(e);n=n.filter((function(e){return!r.has(e)}))}C()(He,n)||We(n)})),At=ve(me),kt=function(e,t){var n=null!==t&&void 0!==t?t:!He.includes(e);jt(e,n)},Ct=Ke(Re,mt,Te,Ce,ke,lt,ct,gt,kt,be);r["useEffect"]((function(){Ae(!0)}),[]);var Tt=r["useMemo"]((function(){return{_internalRenderMenuItem:_e,_internalRenderSubMenuItem:xe}}),[_e,xe]),Mt="horizontal"!==Re||k?Oe:Oe.map((function(e,t){return r["createElement"](U,{key:e.key,overflowDisabled:t>Fe},e)})),Pt=r["createElement"](M["a"],Object(o["a"])({id:O,ref:ke,prefixCls:"".concat(f,"-overflow"),component:"ul",itemComponent:le,className:p()(f,"".concat(f,"-root"),"".concat(f,"-").concat(Re),g,(i={},Object(a["a"])(i,"".concat(f,"-inline-collapsed"),Le),Object(a["a"])(i,"".concat(f,"-rtl"),Te),i),h),dir:w,style:d,role:"menu",tabIndex:b,data:Mt,renderRawItem:function(e){return e},renderRawRest:function(e){var t=e.length,n=t?Oe.slice(-t):null;return r["createElement"](Pe,{eventKey:it,title:pe,disabled:Be,internalPopupClose:0===t,popupClassName:he},n)},maxCount:"horizontal"!==Re||k?M["a"].INVALIDATE:M["a"].RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(e){ze(e)},onKeyDown:Ct},we));return r["createElement"](re.Provider,{value:Tt},r["createElement"](J.Provider,{value:Ce},r["createElement"](U,{prefixCls:f,rootClassName:h,mode:Re,openKeys:He,rtl:Te,disabled:A,motion:je?ne:null,defaultMotions:je?ie:null,activeKey:mt,onActive:yt,onInactive:bt,selectedKeys:wt,inlineIndent:te,subMenuOpenDelay:P,subMenuCloseDelay:R,forceSubMenuRender:L,builtinPlacements:se,triggerSubMenuAction:ae,getPopupContainer:At,itemIcon:ue,expandIcon:ce,onItemClick:St,onOpenChange:jt},r["createElement"](Q.Provider,{value:ht},Pt),r["createElement"]("div",{style:{display:"none"},"aria-hidden":!0},r["createElement"](Y.Provider,{value:pt},Oe)))))})),ct=ut,lt=["className","title","eventKey","children"],ft=["children"],pt=function(e){var t=e.className,n=e.title,i=(e.eventKey,e.children),a=Object(c["a"])(e,lt),s=r["useContext"](z),u=s.prefixCls,l="".concat(u,"-item-group");return r["createElement"]("li",Object(o["a"])({},a,{onClick:function(e){return e.stopPropagation()},className:p()(l,t)}),r["createElement"]("div",{className:"".concat(l,"-title"),title:"string"===typeof n?n:void 0},n),r["createElement"]("ul",{className:"".concat(l,"-list")},i))};function ht(e){var t=e.children,n=Object(c["a"])(e,ft),i=$(n.eventKey),o=pe(t,i),a=X();return a?o:r["createElement"](pt,Object(D["a"])(n,["warnKey"]),o)}function dt(e){var t=e.className,n=e.style,i=r["useContext"](z),o=i.prefixCls,a=X();return a?null:r["createElement"]("li",{className:p()("".concat(o,"-item-divider"),t),style:n})}var vt=ct;vt.Item=le,vt.SubMenu=Pe,vt.ItemGroup=ht,vt.Divider=dt;var mt=vt,gt={adjustX:1,adjustY:1},yt=[0,0],bt={topLeft:{points:["bl","tl"],overflow:gt,offset:[0,-4],targetOffset:yt},topCenter:{points:["bc","tc"],overflow:gt,offset:[0,-4],targetOffset:yt},topRight:{points:["br","tr"],overflow:gt,offset:[0,-4],targetOffset:yt},bottomLeft:{points:["tl","bl"],overflow:gt,offset:[0,4],targetOffset:yt},bottomCenter:{points:["tc","bc"],overflow:gt,offset:[0,4],targetOffset:yt},bottomRight:{points:["tr","br"],overflow:gt,offset:[0,4],targetOffset:yt}},_t=bt,xt=x["a"].ESC,wt=x["a"].TAB;function Ot(e){var t=e.visible,n=e.setTriggerVisible,i=e.triggerRef,o=e.onVisibleChange,a=e.autoFocus,s=r["useRef"](!1),u=function(){var e,r,a,s;t&&i.current&&(null===(e=i.current)||void 0===e||null===(r=e.triggerRef)||void 0===r||null===(a=r.current)||void 0===a||null===(s=a.focus)||void 0===s||s.call(a),n(!1),"function"===typeof o&&o(!1))},c=function(){var e,t,n,r,o=Le(null===(e=i.current)||void 0===e||null===(t=e.popupRef)||void 0===t||null===(n=t.current)||void 0===n||null===(r=n.getElement)||void 0===r?void 0:r.call(n)),a=o[0];return!!(null===a||void 0===a?void 0:a.focus)&&(a.focus(),s.current=!0,!0)},l=function(e){switch(e.keyCode){case xt:u();break;case wt:var t=!1;s.current||(t=c()),t?e.preventDefault():u();break}};r["useEffect"]((function(){return t?(window.addEventListener("keydown",l),a&&Object(g["a"])(c,3),function(){window.removeEventListener("keydown",l),s.current=!1}):function(){s.current=!1}}),[t])}var Et=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function St(e,t){var n=e.arrow,i=void 0!==n&&n,o=e.prefixCls,u=void 0===o?"rc-dropdown":o,f=e.transitionName,h=e.animation,d=e.align,v=e.placement,m=void 0===v?"bottomLeft":v,g=e.placements,y=void 0===g?_t:g,b=e.getPopupContainer,_=e.showAction,x=e.hideAction,w=e.overlayClassName,O=e.overlayStyle,E=e.visible,S=e.trigger,j=void 0===S?["hover"]:S,A=e.autoFocus,k=Object(c["a"])(e,Et),C=r["useState"](),T=Object(s["a"])(C,2),M=T[0],P=T[1],I="visible"in e?E:M,R=r["useRef"](null);r["useImperativeHandle"](t,(function(){return R.current})),Ot({visible:I,setTriggerVisible:P,triggerRef:R,onVisibleChange:e.onVisibleChange,autoFocus:A});var L=function(){var t,n=e.overlay;return t="function"===typeof n?n():n,t},D=function(t){var n=e.onOverlayClick;P(!1),n&&n(t)},N=function(t){var n=e.onVisibleChange;P(t),"function"===typeof n&&n(t)},F=function(){var e=L();return r["createElement"](r["Fragment"],null,i&&r["createElement"]("div",{className:"".concat(u,"-arrow")}),e)},z=function(){var t=e.overlay;return"function"===typeof t?F:F()},B=function(){var t=e.minOverlayWidthMatchTrigger,n=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?t:!n},U=function(){var t=e.openClassName;return void 0!==t?t:"".concat(u,"-open")},V=function(){var t=e.children,n=t.props?t.props:{},i=p()(n.className,U());return I&&t?r["cloneElement"](t,{className:i}):t},H=x;return H||-1===j.indexOf("contextMenu")||(H=["click"]),r["createElement"](_e["a"],Object(l["a"])(Object(l["a"])({builtinPlacements:y},k),{},{prefixCls:u,ref:R,popupClassName:p()(w,Object(a["a"])({},"".concat(u,"-show-arrow"),i)),popupStyle:O,action:j,showAction:_,hideAction:H||[],popupPlacement:m,popupAlign:d,popupTransitionName:f,popupAnimation:h,popupVisible:I,stretch:B()?"minWidth":"",popup:z(),onPopupVisibleChange:N,onPopupClick:D,getPopupContainer:b}),V())}var jt=r["forwardRef"](St),At=jt;function kt(e,t){var n=e.prefixCls,i=e.editable,o=e.locale,a=e.style;return i&&!1!==i.showAdd?r["createElement"]("button",{ref:t,type:"button",className:"".concat(n,"-nav-add"),style:a,"aria-label":(null===o||void 0===o?void 0:o.addAriaLabel)||"Add tab",onClick:function(e){i.onEdit("add",{event:e})}},i.addIcon||"+"):null}var Ct=r["forwardRef"](kt);function Tt(e,t){var n=e.prefixCls,i=e.id,o=e.tabs,u=e.locale,c=e.mobile,l=e.moreIcon,f=void 0===l?"More":l,h=e.moreTransitionName,d=e.style,v=e.className,m=e.editable,g=e.tabBarGutter,y=e.rtl,b=e.removeAriaLabel,_=e.onTabClick,w=e.getPopupContainer,O=e.popupClassName,E=Object(r["useState"])(!1),S=Object(s["a"])(E,2),j=S[0],A=S[1],k=Object(r["useState"])(null),C=Object(s["a"])(k,2),T=C[0],M=C[1],P="".concat(i,"-more-popup"),I="".concat(n,"-dropdown"),R=null!==T?"".concat(P,"-").concat(T):null,L=null===u||void 0===u?void 0:u.dropdownAriaLabel;function D(e,t){e.preventDefault(),e.stopPropagation(),m.onEdit("remove",{key:t,event:e})}var N=r["createElement"](mt,{onClick:function(e){var t=e.key,n=e.domEvent;_(t,n),A(!1)},prefixCls:"".concat(I,"-menu"),id:P,tabIndex:-1,role:"listbox","aria-activedescendant":R,selectedKeys:[T],"aria-label":void 0!==L?L:"expanded dropdown"},o.map((function(e){var t=m&&!1!==e.closable&&!e.disabled;return r["createElement"](le,{key:e.key,id:"".concat(P,"-").concat(e.key),role:"option","aria-controls":i&&"".concat(i,"-panel-").concat(e.key),disabled:e.disabled},r["createElement"]("span",null,e.tab),t&&r["createElement"]("button",{type:"button","aria-label":b||"remove",tabIndex:0,className:"".concat(I,"-menu-item-remove"),onClick:function(t){t.stopPropagation(),D(t,e.key)}},e.closeIcon||m.removeIcon||"\xd7"))})));function F(e){for(var t=o.filter((function(e){return!e.disabled})),n=t.findIndex((function(e){return e.key===T}))||0,r=t.length,i=0;i<r;i+=1){n=(n+e+r)%r;var a=t[n];if(!a.disabled)return void M(a.key)}}function z(e){var t=e.which;if(j)switch(t){case x["a"].UP:F(-1),e.preventDefault();break;case x["a"].DOWN:F(1),e.preventDefault();break;case x["a"].ESC:A(!1);break;case x["a"].SPACE:case x["a"].ENTER:null!==T&&_(T,e);break}else[x["a"].DOWN,x["a"].SPACE,x["a"].ENTER].includes(t)&&(A(!0),e.preventDefault())}Object(r["useEffect"])((function(){var e=document.getElementById(R);e&&e.scrollIntoView&&e.scrollIntoView(!1)}),[T]),Object(r["useEffect"])((function(){j||M(null)}),[j]);var B=Object(a["a"])({},y?"marginRight":"marginLeft",g);o.length||(B.visibility="hidden",B.order=1);var U=p()(Object(a["a"])({},"".concat(I,"-rtl"),y)),V=c?null:r["createElement"](At,{prefixCls:I,overlay:N,trigger:["hover"],visible:!!o.length&&j,transitionName:h,onVisibleChange:A,overlayClassName:p()(U,O),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:w},r["createElement"]("button",{type:"button",className:"".concat(n,"-nav-more"),style:B,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":P,id:"".concat(i,"-more"),"aria-expanded":j,onKeyDown:z},f));return r["createElement"]("div",{className:p()("".concat(n,"-nav-operations"),v),style:d,ref:t},V,r["createElement"](Ct,{prefixCls:n,locale:u,editable:m}))}var Mt=r["memo"](r["forwardRef"](Tt),(function(e,t){return t.tabMoving})),Pt=Object(r["createContext"])(null),It=.1,Rt=.01,Lt=20,Dt=Math.pow(.995,Lt);function Nt(e,t){var n=Object(r["useState"])(),i=Object(s["a"])(n,2),o=i[0],a=i[1],u=Object(r["useState"])(0),c=Object(s["a"])(u,2),l=c[0],f=c[1],p=Object(r["useState"])(0),h=Object(s["a"])(p,2),d=h[0],v=h[1],m=Object(r["useState"])(),g=Object(s["a"])(m,2),y=g[0],b=g[1],_=Object(r["useRef"])();function x(e){var t=e.touches[0],n=t.screenX,r=t.screenY;a({x:n,y:r}),window.clearInterval(_.current)}function w(e){if(o){e.preventDefault();var n=e.touches[0],r=n.screenX,i=n.screenY;a({x:r,y:i});var s=r-o.x,u=i-o.y;t(s,u);var c=Date.now();f(c),v(c-l),b({x:s,y:u})}}function O(){if(o&&(a(null),b(null),y)){var e=y.x/d,n=y.y/d,r=Math.abs(e),i=Math.abs(n);if(Math.max(r,i)<It)return;var s=e,u=n;_.current=window.setInterval((function(){Math.abs(s)<Rt&&Math.abs(u)<Rt?window.clearInterval(_.current):(s*=Dt,u*=Dt,t(s*Lt,u*Lt))}),Lt)}}var E=Object(r["useRef"])();function S(e){var n=e.deltaX,r=e.deltaY,i=0,o=Math.abs(n),a=Math.abs(r);o===a?i="x"===E.current?n:r:o>a?(i=n,E.current="x"):(i=r,E.current="y"),t(-i,-i)&&e.preventDefault()}var j=Object(r["useRef"])(null);j.current={onTouchStart:x,onTouchMove:w,onTouchEnd:O,onWheel:S},r["useEffect"]((function(){function t(e){j.current.onTouchStart(e)}function n(e){j.current.onTouchMove(e)}function r(e){j.current.onTouchEnd(e)}function i(e){j.current.onWheel(e)}return document.addEventListener("touchmove",n,{passive:!1}),document.addEventListener("touchend",r,{passive:!1}),e.current.addEventListener("touchstart",t,{passive:!1}),e.current.addEventListener("wheel",i),function(){document.removeEventListener("touchmove",n),document.removeEventListener("touchend",r)}}),[])}function Ft(){var e=Object(r["useRef"])(new Map);function t(t){return e.current.has(t)||e.current.set(t,r["createRef"]()),e.current.get(t)}function n(t){e.current["delete"](t)}return[t,n]}function zt(e,t){var n=r["useRef"](e),i=r["useState"]({}),o=Object(s["a"])(i,2),a=o[1];function u(e){var r="function"===typeof e?e(n.current):e;r!==n.current&&t(r,n.current),n.current=r,a({})}return[n.current,u]}var Bt=function(e){var t,n=e.position,i=e.prefixCls,o=e.extra;if(!o)return null;var a={};return o&&"object"===Object(u["a"])(o)&&!r["isValidElement"](o)?a=o:a.right=o,"right"===n&&(t=a.right),"left"===n&&(t=a.left),t?r["createElement"]("div",{className:"".concat(i,"-extra-content")},t):null};function Ut(e,t){var n,i=r["useContext"](Pt),u=i.prefixCls,c=i.tabs,f=e.className,h=e.style,d=e.id,v=e.animated,x=e.activeKey,w=e.rtl,E=e.extra,j=e.editable,k=e.locale,C=e.tabPosition,T=e.tabBarGutter,M=e.children,P=e.onTabClick,I=e.onTabScroll,R=Object(r["useRef"])(),L=Object(r["useRef"])(),D=Object(r["useRef"])(),N=Object(r["useRef"])(),F=Ft(),z=Object(s["a"])(F,2),B=z[0],U=z[1],V="top"===C||"bottom"===C,H=zt(0,(function(e,t){V&&I&&I({direction:e>t?"left":"right"})})),G=Object(s["a"])(H,2),W=G[0],q=G[1],Z=zt(0,(function(e,t){!V&&I&&I({direction:e>t?"top":"bottom"})})),Y=Object(s["a"])(Z,2),X=Y[0],K=Y[1],$=Object(r["useState"])(0),Q=Object(s["a"])($,2),J=Q[0],ee=Q[1],te=Object(r["useState"])(0),ne=Object(s["a"])(te,2),re=ne[0],ie=ne[1],oe=Object(r["useState"])(null),ae=Object(s["a"])(oe,2),se=ae[0],ue=ae[1],ce=Object(r["useState"])(null),le=Object(s["a"])(ce,2),fe=le[0],pe=le[1],he=Object(r["useState"])(0),de=Object(s["a"])(he,2),ve=de[0],me=de[1],ge=Object(r["useState"])(0),ye=Object(s["a"])(ge,2),be=ye[0],_e=ye[1],xe=_(new Map),we=Object(s["a"])(xe,2),Oe=we[0],Ee=we[1],Se=S(c,Oe,J),je="".concat(u,"-nav-operations-hidden"),Ae=0,ke=0;function Ce(e){return e<Ae?Ae:e>ke?ke:e}V?w?(Ae=0,ke=Math.max(0,J-se)):(Ae=Math.min(0,se-J),ke=0):(Ae=Math.min(0,fe-re),ke=0);var Te=Object(r["useRef"])(),Me=Object(r["useState"])(),Pe=Object(s["a"])(Me,2),Ie=Pe[0],Re=Pe[1];function Le(){Re(Date.now())}function De(){window.clearTimeout(Te.current)}function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=Se.get(e)||{width:0,height:0,left:0,right:0,top:0};if(V){var n=W;w?t.right<W?n=t.right:t.right+t.width>W+se&&(n=t.right+t.width-se):t.left<-W?n=-t.left:t.left+t.width>-W+se&&(n=-(t.left+t.width-se)),K(0),q(Ce(n))}else{var r=X;t.top<-X?r=-t.top:t.top+t.height>-X+fe&&(r=-(t.top+t.height-fe)),q(0),K(Ce(r))}}Nt(R,(function(e,t){function n(e,t){e((function(e){var n=Ce(e+t);return n}))}if(V){if(se>=J)return!1;n(q,e)}else{if(fe>=re)return!1;n(K,t)}return De(),Le(),!0})),Object(r["useEffect"])((function(){return De(),Ie&&(Te.current=window.setTimeout((function(){Re(0)}),100)),De}),[Ie]);var Fe=A(Se,{width:se,height:fe,left:W,top:X},{width:J,height:re},{width:ve,height:be},Object(l["a"])(Object(l["a"])({},e),{},{tabs:c})),ze=Object(s["a"])(Fe,2),Be=ze[0],Ue=ze[1],Ve={};"top"===C||"bottom"===C?Ve[w?"marginRight":"marginLeft"]=T:Ve.marginTop=T;var He=c.map((function(e,t){var n=e.key;return r["createElement"](O,{id:d,prefixCls:u,key:n,tab:e,style:0===t?void 0:Ve,closable:e.closable,editable:j,active:n===x,renderWrapper:M,removeAriaLabel:null===k||void 0===k?void 0:k.removeAriaLabel,ref:B(n),onClick:function(e){P(n,e)},onRemove:function(){U(n)},onFocus:function(){Ne(n),Le(),R.current&&(w||(R.current.scrollLeft=0),R.current.scrollTop=0)}})})),Ge=b((function(){var e,t,n,r,i,o,a=(null===(e=R.current)||void 0===e?void 0:e.offsetWidth)||0,s=(null===(t=R.current)||void 0===t?void 0:t.offsetHeight)||0,u=(null===(n=N.current)||void 0===n?void 0:n.offsetWidth)||0,l=(null===(r=N.current)||void 0===r?void 0:r.offsetHeight)||0;ue(a),pe(s),me(u),_e(l);var f=((null===(i=L.current)||void 0===i?void 0:i.offsetWidth)||0)-u,p=((null===(o=L.current)||void 0===o?void 0:o.offsetHeight)||0)-l;ee(f),ie(p),Ee((function(){var e=new Map;return c.forEach((function(t){var n=t.key,r=B(n).current;r&&e.set(n,{width:r.offsetWidth,height:r.offsetHeight,left:r.offsetLeft,top:r.offsetTop})})),e}))})),We=c.slice(0,Be),qe=c.slice(Ue+1),Ze=[].concat(Object(m["a"])(We),Object(m["a"])(qe)),Ye=Object(r["useState"])(),Xe=Object(s["a"])(Ye,2),Ke=Xe[0],$e=Xe[1],Qe=Se.get(x),Je=Object(r["useRef"])();function et(){g["a"].cancel(Je.current)}Object(r["useEffect"])((function(){var e={};return Qe&&(V?(w?e.right=Qe.right:e.left=Qe.left,e.width=Qe.width):(e.top=Qe.top,e.height=Qe.height)),et(),Je.current=Object(g["a"])((function(){$e(e)})),et}),[Qe,V,w]),Object(r["useEffect"])((function(){Ne()}),[x,Qe,Se,V]),Object(r["useEffect"])((function(){Ge()}),[w,T,x,c.map((function(e){return e.key})).join("_")]);var tt,nt,rt,it,ot=!!Ze.length,at="".concat(u,"-nav-wrap");return V?w?(nt=W>0,tt=W+se<J):(tt=W<0,nt=-W+se<J):(rt=X<0,it=-X+fe<re),r["createElement"]("div",{ref:t,role:"tablist",className:p()("".concat(u,"-nav"),f),style:h,onKeyDown:function(){Le()}},r["createElement"](Bt,{position:"left",extra:E,prefixCls:u}),r["createElement"](y["a"],{onResize:Ge},r["createElement"]("div",{className:p()(at,(n={},Object(a["a"])(n,"".concat(at,"-ping-left"),tt),Object(a["a"])(n,"".concat(at,"-ping-right"),nt),Object(a["a"])(n,"".concat(at,"-ping-top"),rt),Object(a["a"])(n,"".concat(at,"-ping-bottom"),it),n)),ref:R},r["createElement"](y["a"],{onResize:Ge},r["createElement"]("div",{ref:L,className:"".concat(u,"-nav-list"),style:{transform:"translate(".concat(W,"px, ").concat(X,"px)"),transition:Ie?"none":void 0}},He,r["createElement"](Ct,{ref:N,prefixCls:u,locale:k,editable:j,style:Object(l["a"])(Object(l["a"])({},0===He.length?void 0:Ve),{},{visibility:ot?"hidden":null})}),r["createElement"]("div",{className:p()("".concat(u,"-ink-bar"),Object(a["a"])({},"".concat(u,"-ink-bar-animated"),v.inkBar)),style:Ke}))))),r["createElement"](Mt,Object(o["a"])({},e,{removeAriaLabel:null===k||void 0===k?void 0:k.removeAriaLabel,ref:D,prefixCls:u,tabs:Ze,className:!ot&&je,tabMoving:!!Ie})),r["createElement"](Bt,{position:"right",extra:E,prefixCls:u}))}var Vt=r["forwardRef"](Ut);function Ht(e){var t=e.id,n=e.activeKey,i=e.animated,o=e.tabPosition,s=e.rtl,u=e.destroyInactiveTabPane,c=r["useContext"](Pt),l=c.prefixCls,f=c.tabs,h=i.tabPane,d=f.findIndex((function(e){return e.key===n}));return r["createElement"]("div",{className:p()("".concat(l,"-content-holder"))},r["createElement"]("div",{className:p()("".concat(l,"-content"),"".concat(l,"-content-").concat(o),Object(a["a"])({},"".concat(l,"-content-animated"),h)),style:d&&h?Object(a["a"])({},s?"marginRight":"marginLeft","-".concat(d,"00%")):null},f.map((function(e){return r["cloneElement"](e.node,{key:e.key,prefixCls:l,tabKey:e.key,id:t,animated:h,active:e.key===n,destroyInactiveTabPane:u})}))))}function Gt(e){var t=e.prefixCls,n=e.forceRender,i=e.className,o=e.style,a=e.id,u=e.active,c=e.animated,f=e.destroyInactiveTabPane,h=e.tabKey,d=e.children,v=r["useState"](n),m=Object(s["a"])(v,2),g=m[0],y=m[1];r["useEffect"]((function(){u?y(!0):f&&y(!1)}),[u,f]);var b={};return u||(c?(b.visibility="hidden",b.height=0,b.overflowY="hidden"):b.display="none"),r["createElement"]("div",{id:a&&"".concat(a,"-panel-").concat(h),role:"tabpanel",tabIndex:u?0:-1,"aria-labelledby":a&&"".concat(a,"-tab-").concat(h),"aria-hidden":!u,style:Object(l["a"])(Object(l["a"])({},b),o),className:p()("".concat(t,"-tabpane"),u&&"".concat(t,"-tabpane-active"),i)},(u||g||n)&&d)}var Wt=["id","prefixCls","className","children","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName"],qt=0;function Zt(e){return Object(h["a"])(e).map((function(e){if(r["isValidElement"](e)){var t=void 0!==e.key?String(e.key):void 0;return Object(l["a"])(Object(l["a"])({key:t},e.props),{},{node:e})}return null})).filter((function(e){return e}))}function Yt(e,t){var n,i,f=e.id,h=e.prefixCls,m=void 0===h?"rc-tabs":h,g=e.className,y=e.children,b=e.direction,_=e.activeKey,x=e.defaultActiveKey,w=e.editable,O=e.animated,E=void 0===O?{inkBar:!0,tabPane:!1}:O,S=e.tabPosition,j=void 0===S?"top":S,A=e.tabBarGutter,k=e.tabBarStyle,C=e.tabBarExtraContent,T=e.locale,M=e.moreIcon,P=e.moreTransitionName,I=e.destroyInactiveTabPane,R=e.renderTabBar,L=e.onChange,D=e.onTabClick,N=e.onTabScroll,F=e.getPopupContainer,z=e.popupClassName,B=Object(c["a"])(e,Wt),U=Zt(y),V="rtl"===b;i=!1===E?{inkBar:!1,tabPane:!1}:!0===E?{inkBar:!0,tabPane:!0}:Object(l["a"])({inkBar:!0,tabPane:!1},"object"===Object(u["a"])(E)?E:{});var H=Object(r["useState"])(!1),G=Object(s["a"])(H,2),W=G[0],q=G[1];Object(r["useEffect"])((function(){q(Object(d["a"])())}),[]);var Z=Object(v["a"])((function(){var e;return null===(e=U[0])||void 0===e?void 0:e.key}),{value:_,defaultValue:x}),Y=Object(s["a"])(Z,2),X=Y[0],K=Y[1],$=Object(r["useState"])((function(){return U.findIndex((function(e){return e.key===X}))})),Q=Object(s["a"])($,2),J=Q[0],ee=Q[1];Object(r["useEffect"])((function(){var e,t=U.findIndex((function(e){return e.key===X}));-1===t&&(t=Math.max(0,Math.min(J,U.length-1)),K(null===(e=U[t])||void 0===e?void 0:e.key));ee(t)}),[U.map((function(e){return e.key})).join("_"),X,J]);var te=Object(v["a"])(null,{value:f}),ne=Object(s["a"])(te,2),re=ne[0],ie=ne[1],oe=j;function ae(e,t){null===D||void 0===D||D(e,t);var n=e!==X;K(e),n&&(null===L||void 0===L||L(e))}W&&!["left","right"].includes(j)&&(oe="top"),Object(r["useEffect"])((function(){f||(ie("rc-tabs-".concat(qt)),qt+=1)}),[]);var se,ue={id:re,activeKey:X,animated:i,tabPosition:oe,rtl:V,mobile:W},ce=Object(l["a"])(Object(l["a"])({},ue),{},{editable:w,locale:T,moreIcon:M,moreTransitionName:P,tabBarGutter:A,onTabClick:ae,onTabScroll:N,extra:C,style:k,panes:y,getPopupContainer:F,popupClassName:z});return se=R?R(ce,Vt):r["createElement"](Vt,ce),r["createElement"](Pt.Provider,{value:{tabs:U,prefixCls:m}},r["createElement"]("div",Object(o["a"])({ref:t,id:f,className:p()(m,"".concat(m,"-").concat(oe),(n={},Object(a["a"])(n,"".concat(m,"-mobile"),W),Object(a["a"])(n,"".concat(m,"-editable"),w),Object(a["a"])(n,"".concat(m,"-rtl"),V),n),g)},B),se,r["createElement"](Ht,Object(o["a"])({destroyInactiveTabPane:I},ue,{animated:i}))))}var Xt=r["forwardRef"](Yt);Xt.TabPane=Gt;var Kt=Xt,$t=Kt,Qt=n("6JX1"),Jt=n("9kvl"),en=n("dEAq"),tn=n("H1Ra"),nn=n("M/Q6");n("RZMt");function rn(e,t){return cn(e)||un(e,t)||an(e,t)||on()}function on(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function an(e,t){if(e){if("string"===typeof e)return sn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sn(e,t):void 0}}function sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function un(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),t&&o.length===t)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function cn(e){if(Array.isArray(e))return e}function ln(e,t){var n,r=null===(n=e.match(/\.(\w+)$/))||void 0===n?void 0:n[1];return r||(r=t.tsx?"tsx":"jsx"),r}var fn=function(e){var t,n,o,a=Object(r["useRef"])(),s=Object(r["useContext"])(en["context"]),u=s.locale,c=Object(en["useLocaleProps"])(u,e),l=Object(en["useDemoUrl"])(c.identifier),f=c.demoUrl||l,p=(null===Jt["a"]||void 0===Jt["a"]?void 0:Jt["a"].location.hash)==="#".concat(c.identifier),h=1===Object.keys(c.sources).length,d=Object(en["useCodeSandbox"])((null===(t=c.hideActions)||void 0===t?void 0:t.includes("CSB"))?null:c),v=Object(en["useRiddle"])((null===(n=c.hideActions)||void 0===n?void 0:n.includes("RIDDLE"))?null:c),m=Object(en["useMotions"])(c.motions||[],a.current),g=rn(m,2),y=g[0],b=g[1],_=Object(en["useCopy"])(),x=rn(_,2),w=x[0],O=x[1],E=Object(r["useState"])((function(){return c.sources._?"_":Object.keys(c.sources)[0]})),S=rn(E,2),j=S[0],A=S[1],k=Object(r["useState"])(ln(j,c.sources[j])),C=rn(k,2),T=C[0],M=C[1],P=Object(r["useState"])(Boolean(c.defaultShowCode)),I=rn(P,2),R=I[0],L=I[1],D=Object(r["useState"])(Math.random()),N=rn(D,2),F=N[0],z=N[1],B=c.sources[j][T]||c.sources[j].content,U=Object(en["useTSPlaygroundUrl"])(u,B),V=Object(r["useRef"])(),H=Object(en["usePrefersColor"])(),G=rn(H,1),W=G[0],q=c.actionBarRender,Z=void 0===q?function(e){return e}:q;function Y(e){A(e),M(ln(e,c.sources[e]))}return Object(r["useEffect"])((function(){z(Math.random())}),[W]),i.a.createElement("div",{style:c.style,className:[c.className,"__dumi-default-previewer",p?"__dumi-default-previewer-target":""].filter(Boolean).join(" "),id:c.identifier,"data-debug":c.debug||void 0,"data-iframe":c.iframe||void 0},c.iframe&&i.a.createElement("div",{className:"__dumi-default-previewer-browser-nav"}),i.a.createElement("div",{ref:a,className:"__dumi-default-previewer-demo",style:{transform:c.transform?"translate(0, 0)":void 0,padding:c.compact||c.iframe&&!1!==c.compact?"0":void 0,background:c.background}},c.iframe?i.a.createElement("iframe",{title:"dumi-previewer",style:{height:String(c.iframe).replace(/(\d)$/,"$1px")},key:F,src:f,ref:V}):i.a.createElement(Qt["ErrorBoundary"],{fallbackRender:function(e){var t=e.error;return i.a.createElement(nn["a"],{type:"error"},i.a.createElement("h4",null,t.message||"This demo has been crashed."),t.stack&&i.a.createElement("details",null,i.a.createElement("summary",null,"Error stack"),i.a.createElement("pre",null,t.stack)))}},c.children)),i.a.createElement("div",{className:"__dumi-default-previewer-desc","data-title":c.title},c.title&&i.a.createElement(en["AnchorLink"],{to:"#".concat(c.identifier)},c.title),c.description&&i.a.createElement("div",{dangerouslySetInnerHTML:{__html:c.description}})),i.a.createElement("div",{className:"__dumi-default-previewer-actions"},Z(i.a.createElement(i.a.Fragment,null,d&&i.a.createElement("button",{title:"Open demo on CodeSandbox.io",className:"__dumi-default-icon",role:"codesandbox",onClick:d}),v&&i.a.createElement("button",{title:"Open demo on Riddle",className:"__dumi-default-icon",role:"riddle",onClick:v}),c.motions&&i.a.createElement("button",{title:"Execute motions",className:"__dumi-default-icon",role:"motions",disabled:b,onClick:function(){return y()}}),c.iframe&&i.a.createElement("button",{title:"Reload demo iframe page",className:"__dumi-default-icon",role:"refresh",onClick:function(){return z(Math.random())}}),!(null===(o=c.hideActions)||void 0===o?void 0:o.includes("EXTERNAL"))&&i.a.createElement(en["Link"],{target:"_blank",to:f},i.a.createElement("button",{title:"Open demo in new tab",className:"__dumi-default-icon",role:"open-demo",type:"button"})),i.a.createElement("span",null),i.a.createElement("button",{title:"Copy source code",className:"__dumi-default-icon",role:"copy","data-status":O,onClick:function(){return w(B)}}),"tsx"===T&&R&&i.a.createElement(en["Link"],{target:"_blank",to:U},i.a.createElement("button",{title:"Get JSX via TypeScript Playground",className:"__dumi-default-icon",role:"change-tsx",type:"button"})),i.a.createElement("button",{title:"Toggle source code panel",className:"__dumi-default-icon".concat(R?" __dumi-default-btn-expand":""),role:"source",type:"button",onClick:function(){return L(!R)}})))),R&&i.a.createElement("div",{className:"__dumi-default-previewer-source-wrapper"},!h&&i.a.createElement($t,{className:"__dumi-default-previewer-source-tab",prefixCls:"__dumi-default-tabs",moreIcon:"\xb7\xb7\xb7",defaultActiveKey:j,onChange:Y},Object.keys(c.sources).map((function(e){return i.a.createElement(Gt,{tab:"_"===e?"index.".concat(ln(e,c.sources[e])):e,key:e})}))),i.a.createElement("div",{className:"__dumi-default-previewer-source"},i.a.createElement(tn["a"],{code:B,lang:T,showCopy:!1}))))};t["default"]=fn},ZzCi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.named=void 0;var r=n("xfSm"),i=n("GXnB"),o=n("Ztfv");function a(e){return function(t,n,a){var s=new i.Metadata(r.NAMED_TAG,e);"number"===typeof a?o.tagParameter(t,n,a,s):o.tagProperty(t,n,s)}}t.named=a},a3WO:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},"a5/B":function(e,t,n){var r=n("I+eb");r({target:"Math",stat:!0},{umulh:function(e,t){var n=65535,r=+e,i=+t,o=r&n,a=i&n,s=r>>>16,u=i>>>16,c=(s*a>>>0)+(o*a>>>16);return s*u+(c>>>16)+((o*u>>>0)+(c&n)>>>16)}})},a57n:function(e,t,n){var r=n("dG/n");r("search")},aI7X:function(e,t,n){"use strict";var r="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,o=Object.prototype.toString,a="[object Function]";e.exports=function(e){var t=this;if("function"!==typeof t||o.call(t)!==a)throw new TypeError(r+t);for(var n,s=i.call(arguments,1),u=function(){if(this instanceof n){var r=t.apply(this,s.concat(i.call(arguments)));return Object(r)===r?r:this}return t.apply(e,s.concat(i.call(arguments)))},c=Math.max(0,t.length-s.length),l=[],f=0;f<c;f++)l.push("$"+f);if(n=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(u),t.prototype){var p=function(){};p.prototype=t.prototype,n.prototype=new p,p.prototype=null}return n}},aPG5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolve=void 0;var r=n("MON2"),i=n("FV85"),o=n("qK8v"),a=n("ujMp"),s=n("cSJO"),u=function(e,t,n){try{return n()}catch(i){throw o.isStackOverflowExeption(i)?new Error(r.CIRCULAR_DEPENDENCY_IN_FACTORY(e,t.toString())):i}},c=function e(t){return function(n){n.parentContext.setCurrentRequest(n);var o=n.bindings,c=n.childRequests,l=n.target&&n.target.isArray(),f=!n.parentRequest||!n.parentRequest.target||!n.target||!n.parentRequest.target.matchesArray(n.target.serviceIdentifier);if(l&&f)return c.map((function(n){var r=e(t);return r(n)}));var p=null;if(!n.target.isOptional()||0!==o.length){var h=o[0],d=h.scope===i.BindingScopeEnum.Singleton,v=h.scope===i.BindingScopeEnum.Request;if(d&&h.activated)return h.cache;if(v&&null!==t&&t.has(h.id))return t.get(h.id);if(h.type===i.BindingTypeEnum.ConstantValue)p=h.cache,h.activated=!0;else if(h.type===i.BindingTypeEnum.Function)p=h.cache,h.activated=!0;else if(h.type===i.BindingTypeEnum.Constructor)p=h.implementationType;else if(h.type===i.BindingTypeEnum.DynamicValue&&null!==h.dynamicValue)p=u("toDynamicValue",h.serviceIdentifier,(function(){return h.dynamicValue(n.parentContext)}));else if(h.type===i.BindingTypeEnum.Factory&&null!==h.factory)p=u("toFactory",h.serviceIdentifier,(function(){return h.factory(n.parentContext)}));else if(h.type===i.BindingTypeEnum.Provider&&null!==h.provider)p=u("toProvider",h.serviceIdentifier,(function(){return h.provider(n.parentContext)}));else{if(h.type!==i.BindingTypeEnum.Instance||null===h.implementationType){var m=a.getServiceIdentifierAsString(n.serviceIdentifier);throw new Error(r.INVALID_BINDING_TYPE+" "+m)}p=s.resolveInstance(h.implementationType,c,e(t))}return"function"===typeof h.onActivation&&(p=h.onActivation(n.parentContext,p)),d&&(h.cache=p,h.activated=!0),v&&null!==t&&!t.has(h.id)&&t.set(h.id,p),p}}};function l(e){var t=c(e.plan.rootRequest.requestScope);return t(e.plan.rootRequest)}t.resolve=l},adU4:function(e,t,n){var r=n("y1pI"),i=Array.prototype,o=i.splice;function a(e){var t=this.__data__,n=r(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():o.call(t,n,1),--this.size,!0}e.exports=a},afA6:function(e,t,n){"use strict";n.r(t);var r=n("k1fw"),i=(n("q1tI"),n("q3YX")),o="import { AMapScene, Control, CustomControl } from '@antv/l7-react';\nimport * as React from 'react';\n\nexport default React.memo(function Map() {\n  return (\n    <AMapScene\n      map={{\n        center: [110.19382669582967, 30.258134],\n        pitch: 0,\n        style: 'dark',\n        zoom: 1,\n      }}\n      style={{\n        height: '400px',\n        position: 'relative',\n        background: '#011030',\n      }}\n    >\n      <Control type=\"scale\" position=\"topleft\" />\n      <Control type=\"zoom\" position=\"topleft\" />\n      <CustomControl position=\"topright\" style={{ display: 'flex' }}>\n        <h1 style={{ color: 'red' }}>1</h1>\n        <h1 style={{ color: 'red' }}>2</h1>\n      </CustomControl>\n    </AMapScene>\n  );\n});",a="import { AMapScene, ImageLayer } from '@antv/l7-react';\nimport React from 'react';\nexport default () => {\n  return (\n    <AMapScene\n      map={{\n        center: [110.19382669582967, 50.258134],\n        pitch: 0,\n        style: 'normal',\n        zoom: 1,\n      }}\n      style={{\n        height: '400px',\n        position: 'relative',\n        background: '#011030',\n      }}\n    >\n      <ImageLayer\n        options={{\n          autoFit: true,\n        }}\n        source={{\n          data:\n            'https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*8SUaRr7bxNsAAAAAAAAAAABkARQnAQ',\n          parser: {\n            type: 'image',\n            extent: [\n              113.1277263548,\n              32.3464238863,\n              118.1365790452,\n              36.4786759137,\n            ],\n          },\n        }}\n        style={{\n          opacity: 1,\n        }}\n      />\n    </AMapScene>\n  );\n};",s="import React from 'react';\nimport {\n  MapScene,\n  AMapSceneV2,\n  Control,\n  PolygonLayer,\n  HeatmapLayer,\n} from '@antv/l7-react';\nimport { useRequest } from 'ahooks';\nasync function getData(url: string) {\n  const res = await fetch(url);\n  return await res.json();\n}\nconst urls = {\n  world:\n    'https://gw.alipayobjects.com/os/bmw-prod/79143b04-5fab-4d24-8cce-80b818a3d189.json',\n  grid:\n    'https://gw.alipayobjects.com/os/bmw-prod/8990e8b4-c58e-419b-afb9-8ea3daff2dd1.json',\n};\nexport default () => {\n  const { run, fetches } = useRequest(getData, {\n    manual: true,\n    fetchKey: url => url,\n  });\n  React.useEffect(() => {\n    run(urls.world);\n    run(urls.grid);\n  }, []);\n\n  return (\n    <AMapSceneV2\n      map={{\n        pitch: 0,\n        style: 'light',\n        zoom: 2,\n        center: [112, 30],\n      }}\n      style={{\n        height: '400px',\n        position: 'relative',\n        background: '#011030',\n      }}\n    >\n      {fetches[urls.grid]?.loading === false && (\n        <HeatmapLayer\n          key={'2'}\n          source={{\n            data: fetches[urls.grid].data,\n            transforms: [\n              {\n                type: 'hexagon',\n                size: 500000,\n                field: 'capacity',\n                method: 'sum',\n              },\n            ],\n          }}\n          color={{\n            values: '#132953',\n          }}\n          shape={{\n            values: 'circle',\n          }}\n          style={{\n            coverage: 0.5,\n            angle: 0.3,\n            opacity: 0.8,\n          }}\n        />\n      )}\n      {fetches[urls.world]?.loading === false && (\n        <PolygonLayer\n          key={'1'}\n          options={{\n            autoFit: true,\n          }}\n          source={{\n            data: fetches[urls.world].data,\n          }}\n          active={false}\n          size={{\n            values: 0.6,\n          }}\n          color={{\n            values: '#274A91',\n          }}\n          shape={{\n            values: 'line',\n          }}\n          style={{\n            opacity: 0.6,\n          }}\n        />\n      )}\n      <Control type=\"scale\" position=\"bottomright\" />\n      <Control type=\"zoom\" position=\"bottomleft\" />\n    </AMapSceneV2>\n  );\n};",u="import { AMapScene, ImageLayer, Control } from '@antv/l7-react';\nimport React from 'react';\nexport default () => {\n  return (\n    <AMapScene\n      map={{\n        center: [110.19382669582967, 50.258134],\n        pitch: 0,\n        style: 'dark',\n        zoom: 1,\n      }}\n      style={{\n        height: '400px',\n        position: 'relative',\n        background: '#011030',\n      }}\n    >\n      <ImageLayer\n        source={{\n          data:\n            'https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*8SUaRr7bxNsAAAAAAAAAAABkARQnAQ',\n          parser: {\n            type: 'image',\n            extent: [\n              113.1277263548,\n              32.3464238863,\n              118.1365790452,\n              36.4786759137,\n            ],\n          },\n        }}\n      />\n    </AMapScene>\n  );\n};",c="import React, { useState } from 'react';\nimport {\n  AMapScene,\n  Marker,\n  MapScene,\n  Control,\n  PolygonLayer,\n  HeatmapLayer,\n} from '@antv/l7-react';\nimport { useInterval } from 'ahooks';\n\nexport default () => {\n  const [positionData, setPositionData] = useState<any>({\n    lng: 120,\n    lat: 30,\n  });\n\n  useInterval(() => {\n    setPositionData({\n      lng: 120 + Math.random() * 10,\n      lat: 30 + Math.random() * 10,\n    });\n  }, 400);\n\n  React.useEffect(() => {}, []);\n\n  return (\n    <AMapScene\n      map={{\n        pitch: 0,\n        style: 'light',\n        zoom: 2,\n        center: [112, 30],\n      }}\n      style={{\n        height: '400px',\n        position: 'relative',\n        background: '#011030',\n      }}\n    >\n      <Marker\n        // key={JSON.stringify(positionData)}\n        lnglat={{ lng: positionData.lng, lat: positionData.lat }}\n      >\n        <img\n          src=\"https://img0.baidu.com/it/u=3430222711,372718749&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=503\"\n          style={{ width: 100, height: 100 }}\n        />\n      </Marker>\n    </AMapScene>\n  );\n};",l="import { AMapScene, PointLayer, CustomControl } from '@antv/l7-react';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { Select } from 'antd';\nconst { Option } = Select;\n\nexport default () => {\n  const [data, setData] = useState();\n  const [blend, setBlend] = useState('additive');\n  const ControlPosition = useCallback(() => {\n    return (\n      <Select\n        defaultValue=\"additive\"\n        style={{ width: 120 }}\n        onChange={e => {\n          setBlend(e);\n        }}\n      >\n        {['additive', 'normal', 'max', 'min', 'none'].map((value: string) => {\n          return (\n            <Option key={value} value={value}>\n              {value}\n            </Option>\n          );\n        })}\n      </Select>\n    );\n  }, []);\n  useEffect(() => {\n    const fetchData = async () => {\n      const response = await fetch(\n        'https://gw.alipayobjects.com/os/basement_prod/337ddbb7-aa3f-4679-ab60-d64359241955.json',\n      );\n      const data = await response.json();\n      console.log(data);\n      setData(data);\n    };\n    fetchData();\n  }, []);\n  return (\n    <AMapScene\n      map={{\n        center: [110.19382669582967, 50.258134],\n        pitch: 0,\n        style: 'dark',\n        zoom: 1,\n      }}\n      style={{\n        height: '400px',\n        position: 'relative',\n        background: '#011030',\n      }}\n    >\n      {data && (\n        <PointLayer\n          options={{\n            blend,\n          }}\n          source={{\n            data,\n          }}\n          size={{\n            values: 10,\n          }}\n          color={{\n            values: '#b97feb',\n          }}\n          shape={{\n            values: 'circle',\n          }}\n        />\n      )}\n      <CustomControl position=\"topright\">\n        <ControlPosition />\n      </CustomControl>\n    </AMapScene>\n  );\n};",f="import {\n  AMapScene,\n  ImageLayer,\n  PolygonLayer,\n  LayerEvent,\n  Popup,\n} from '@antv/l7-react';\nimport React, { useState } from 'react';\nexport default () => {\n  const [selectFeature, setSelectFeature] = useState();\n  return (\n    <AMapScene\n      map={{\n        center: [110.19382669582967, 50.258134],\n        pitch: 0,\n        style: 'dark',\n        zoom: 1,\n      }}\n      style={{\n        height: '500px',\n        position: 'relative',\n      }}\n    >\n      <PolygonLayer\n        source={{\n          data: {\n            type: 'FeatureCollection',\n            features: [\n              {\n                type: 'Feature',\n                properties: {},\n                geometry: {\n                  type: 'Polygon',\n                  coordinates: [\n                    [\n                      [88.9453125, -3.864254615721396],\n                      [155.7421875, -3.864254615721396],\n                      [155.7421875, 46.800059446787316],\n                      [88.9453125, 46.800059446787316],\n                      [88.9453125, -3.864254615721396],\n                    ],\n                  ],\n                },\n              },\n            ],\n          },\n        }}\n        color={{\n          values: 'red',\n        }}\n        shape={{\n          values: 'fill',\n        }}\n      >\n        <LayerEvent\n          type=\"click\"\n          handler={e => {\n            setSelectFeature(e);\n          }}\n        ></LayerEvent>\n      </PolygonLayer>\n      {selectFeature && (\n        <Popup\n          option={{\n            stopPropagation: false,\n          }}\n          lnglat={selectFeature?.lngLat}\n        >\n          <div\n            onClick={e => {\n              e.stopPropagation();\n              // e.preventDefault();\n              alert('\u6211\u88ab\u70b9\u51fb\u4e86');\n            }}\n          >\n            <button\n              onClick={e => {\n                e.stopPropagation();\n                alert('b\u6211\u88ab\u70b9\u51fb\u4e86');\n              }}\n            >\n              \u6211\u80fd\u4e0d\u80fd\u88ab\u70b9\u51fb\n            </button>\n          </div>\n        </Popup>\n      )}\n    </AMapScene>\n  );\n};",p={"docs-control":{component:n("cR2u").default,previewerProps:{sources:{_:{tsx:o}},dependencies:{"@antv/l7-react":{version:"2.4.3"},react:{version:"^16.8.6 || ^17.0.2"},"@antv/l7":{version:"^2.11.0"},"mapbox-gl":{version:"^1.2.1",css:"mapbox-gl/dist/mapbox-gl.css"},"react-dom":{version:"^16.8.6 || ^17.0.2"}},identifier:"docs-control"}},"docs-imagelayer":{component:n("KazK").default,previewerProps:{sources:{_:{tsx:a}},dependencies:{"@antv/l7-react":{version:"2.4.3"},react:{version:"^16.8.6 || ^17.0.2"},"@antv/l7":{version:"^2.11.0"},"mapbox-gl":{version:"^1.2.1",css:"mapbox-gl/dist/mapbox-gl.css"},"react-dom":{version:"^16.8.6 || ^17.0.2"}},identifier:"docs-imagelayer"}},"docs-map":{component:n("d4sm").default,previewerProps:{sources:{_:{tsx:s}},dependencies:{react:{version:"^16.8.6 || ^17.0"},"@antv/l7-react":{version:"2.4.3"},ahooks:{version:"2.10.14"},"@antv/l7":{version:"^2.11.0"},"mapbox-gl":{version:"^1.2.1",css:"mapbox-gl/dist/mapbox-gl.css"},"react-dom":{version:"^16.8.6 || ^17.0.2"}},identifier:"docs-map"}},"docs-layercontrol":{component:n("R1ph").default,previewerProps:{sources:{_:{tsx:u}},dependencies:{"@antv/l7-react":{version:"2.4.3"},react:{version:"^16.8.6 || ^17.0.2"},"@antv/l7":{version:"^2.11.0"},"mapbox-gl":{version:"^1.2.1",css:"mapbox-gl/dist/mapbox-gl.css"},"react-dom":{version:"^16.8.6 || ^17.0.2"}},identifier:"docs-layercontrol"}},"docs-marker":{component:n("b7nI").default,previewerProps:{sources:{_:{tsx:c}},dependencies:{react:{version:"^16.8.6 || ^17.0"},"@antv/l7-react":{version:"2.4.3"},ahooks:{version:"2.10.14"},"@antv/l7":{version:"^2.11.0"},"mapbox-gl":{version:"^1.2.1",css:"mapbox-gl/dist/mapbox-gl.css"},"react-dom":{version:"^16.8.6 || ^17.0.2"}},identifier:"docs-marker"}},"docs-pointlayer":{component:n("1hic").default,previewerProps:{sources:{_:{tsx:l}},dependencies:{"@antv/l7-react":{version:"2.4.3"},react:{version:">=16.9.0"},antd:{version:"4.24.10",css:"antd/dist/antd.css"},"@antv/l7":{version:"^2.11.0"},"mapbox-gl":{version:"^1.2.1",css:"mapbox-gl/dist/mapbox-gl.css"},"react-dom":{version:">=16.9.0"}},identifier:"docs-pointlayer"}},"docs-popup":{component:n("8Dy3").default,previewerProps:{sources:{_:{tsx:f}},dependencies:{"@antv/l7-react":{version:"2.4.3"},react:{version:"^16.8.6 || ^17.0.2"},"@antv/l7":{version:"^2.11.0"},"mapbox-gl":{version:"^1.2.1",css:"mapbox-gl/dist/mapbox-gl.css"},"react-dom":{version:"^16.8.6 || ^17.0.2"}},identifier:"docs-popup"}}},h=n("x2v5"),d=n("KcUY"),v=n.n(d),m=n("nKUr");t["default"]=e=>Object(m["jsx"])(v.a,Object(r["a"])(Object(r["a"])({},e),{},{config:i,demos:p,apis:h}))},afO8:function(e,t,n){var r,i,o,a=n("f5p1"),s=n("2oRo"),u=n("hh1v"),c=n("kRJp"),l=n("UTVS"),f=n("93I0"),p=n("0BK2"),h=s.WeakMap,d=function(e){return o(e)?i(e):r(e,{})},v=function(e){return function(t){var n;if(!u(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}};if(a){var m=new h,g=m.get,y=m.has,b=m.set;r=function(e,t){return b.call(m,e,t),t},i=function(e){return g.call(m,e)||{}},o=function(e){return y.call(m,e)}}else{var _=f("state");p[_]=!0,r=function(e,t){return c(e,_,t),t},i=function(e){return l(e,_)?e[_]:{}},o=function(e){return l(e,_)}}e.exports={set:r,get:i,has:o,enforce:d,getterFor:v}},apDx:function(e,t,n){var r=n("dG/n");r("dispose")},b1O7:function(e,t,n){var r=n("g6v/"),i=n("33Wh"),o=n("/GqU"),a=n("0eef").f,s=function(e){return function(t){var n,s=o(t),u=i(s),c=u.length,l=0,f=[];while(c>l)n=u[l++],r&&!a.call(s,n)||f.push(e?[n,s[n]]:s[n]);return f}};e.exports={entries:s(!0),values:s(!1)}},b3aT:function(e,t,n){"use strict";function r(e,t){o(e)&&(e="100%");var n=a(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t)),e)}function i(e){return Math.min(1,Math.max(0,e))}function o(e){return"string"===typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)}function a(e){return"string"===typeof e&&-1!==e.indexOf("%")}function s(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function u(e){return e<=1?"".concat(100*Number(e),"%"):e}function c(e){return 1===e.length?"0"+e:String(e)}n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return c}))},b7nI:function(e,t,n){"use strict";n.r(t);var r=n("tJVT"),i=n("q1tI"),o=n.n(i),a=n("/7QA");function s(e,t,n){var r=null===n||void 0===n?void 0:n.immediate,o=Object(i["useRef"])();o.current=e,Object(i["useEffect"])((function(){var e;if(void 0!==t&&null!==t){r&&(null===(e=o.current)||void 0===e||e.call(o));var n=setInterval((function(){var e;null===(e=o.current)||void 0===e||e.call(o)}),t);return function(){clearInterval(n)}}}),[t])}var u=s,c=n("nKUr");t["default"]=()=>{var e=Object(i["useState"])({lng:120,lat:30}),t=Object(r["a"])(e,2),n=t[0],s=t[1];return u((()=>{s({lng:120+10*Math.random(),lat:30+10*Math.random()})}),400),o.a.useEffect((()=>{}),[]),Object(c["jsx"])(a["a"],{map:{pitch:0,style:"light",zoom:2,center:[112,30]},style:{height:"400px",position:"relative",background:"#011030"},children:Object(c["jsx"])(a["h"],{lnglat:{lng:n.lng,lat:n.lat},children:Object(c["jsx"])("img",{src:"https://img0.baidu.com/it/u=3430222711,372718749&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=503",style:{width:100,height:100}})})})}},b80T:function(e,t,n){var r=n("UNi/"),i=n("03A+"),o=n("Z0cm"),a=n("DSRE"),s=n("wJg7"),u=n("c6wG"),c=Object.prototype,l=c.hasOwnProperty;function f(e,t){var n=o(e),c=!n&&i(e),f=!n&&!c&&a(e),p=!n&&!c&&!f&&u(e),h=n||c||f||p,d=h?r(e.length,String):[],v=d.length;for(var m in e)!t&&!l.call(e,m)||h&&("length"==m||f&&("offset"==m||"parent"==m)||p&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,v))||d.push(m);return d}e.exports=f},bCY9:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("rlch"),i=new r["b"]({validKeys:["modifyClientRenderOpts","patchRoutes","rootContainer","render","onRouteChange","__mfsu","getInitialState","initialStateConfig","request"]})},bFeb:function(e,t,n){var r=n("I+eb"),i=n("2oRo");r({global:!0},{globalThis:i})},bKJz:function(e,t,n){},bT9E:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("VTBJ");function i(e,t){var n=Object(r["a"])({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}},bWFh:function(e,t,n){"use strict";var r=n("I+eb"),i=n("2oRo"),o=n("lMq5"),a=n("busE"),s=n("8YOa"),u=n("ImZN"),c=n("GarU"),l=n("hh1v"),f=n("0Dky"),p=n("HH4o"),h=n("1E5z"),d=n("cVYH");e.exports=function(e,t,n){var v=-1!==e.indexOf("Map"),m=-1!==e.indexOf("Weak"),g=v?"set":"add",y=i[e],b=y&&y.prototype,_=y,x={},w=function(e){var t=b[e];a(b,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(m&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return m&&!l(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(m&&!l(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(o(e,"function"!=typeof y||!(m||b.forEach&&!f((function(){(new y).entries().next()})))))_=n.getConstructor(t,e,v,g),s.REQUIRED=!0;else if(o(e,!0)){var O=new _,E=O[g](m?{}:-0,1)!=O,S=f((function(){O.has(1)})),j=p((function(e){new y(e)})),A=!m&&f((function(){var e=new y,t=5;while(t--)e[g](t,t);return!e.has(-0)}));j||(_=t((function(t,n){c(t,_,e);var r=d(new y,t,_);return void 0!=n&&u(n,r[g],r,v),r})),_.prototype=b,b.constructor=_),(S||A)&&(w("delete"),w("has"),v&&w("get")),(A||E)&&w(g),m&&b.clear&&delete b.clear}return x[e]=_,r({global:!0,forced:_!=y},x),h(_,e),m||n.setStrong(_,e,v),_}},bX4T:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("VTBJ"),i="accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap",o="onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError",a="".concat(i," ").concat(o).split(/[\s\n]+/),s="aria-",u="data-";function c(e,t){return 0===e.indexOf(t)}function l(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=!1===n?{aria:!0,data:!0,attr:!0}:!0===n?{aria:!0}:Object(r["a"])({},n);var i={};return Object.keys(e).forEach((function(n){(t.aria&&("role"===n||c(n,s))||t.data&&c(n,u)||t.attr&&a.includes(n))&&(i[n]=e[n])})),i}},bXwC:function(e,t,n){},bYHP:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=u(n("q1tI")),i=n("LtsZ"),o=a(n("hKI/"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==c(e)&&"function"!==typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r["default"]=e,n&&n.set(e,r),r}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function f(e,t){return m(e)||v(e,t)||h(e,t)||p()}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){if(e){if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function m(e){if(Array.isArray(e))return e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}function b(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _(e){var t=x(e,"string");return"symbol"===c(t)?t:String(t)}function x(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var w=new(function(){function e(){g(this,e),this.anchors=[],this.listeners=[],this.listener=void 0,this.listener=(0,o["default"])(this._matchActiveAnchor.bind(this),200)}return b(e,[{key:"_matchActiveAnchor",value:function(){var e=this,t=this.anchors.findIndex((function(t,n){return t.getBoundingClientRect().top>128||n===e.anchors.length-1})),n=this.anchors[Math.max(0,t-1)],r=n.parentElement.id;this.listeners.forEach((function(e){return e(r)}))}},{key:"watch",value:function(e){0===this.anchors.length&&"undefined"!==typeof window&&window.addEventListener("scroll",this.listener),this.anchors.push(e),this.listener()}},{key:"unwatch",value:function(e){this.anchors.splice(this.anchors.findIndex((function(t){return t===e})),1),0===this.anchors.length&&"undefined"!==typeof window&&window.removeEventListener("scroll",this.listener)}},{key:"listen",value:function(e){this.listeners.push(e)}},{key:"unlisten",value:function(e){this.listeners.splice(this.listeners.findIndex((function(t){return t===e})),1)}}]),e}());function O(e){return e.offsetTop+(e.offsetParent?O(e.offsetParent):0)}var E=function e(t){var n,o=(null===(n=t.to.match(/(#[^&?]*)/))||void 0===n?void 0:n[1])||"",a=(0,r.useRef)(null),s=(0,r.useState)(!1),u=f(s,2),c=u[0],p=u[1];return(0,r.useEffect)((function(){var e,t;if(["H1","H2","H3"].includes(null===(e=a.current)||void 0===e||null===(t=e.parentElement)||void 0===t?void 0:t.tagName)&&a.current.parentElement.id){var n=a.current;return w.watch(n),function(){w.unwatch(n)}}var r=function(e){p(o==="#".concat(e))};return w.listen(r),function(){return w.unlisten(r)}}),[]),r["default"].createElement(i.NavLink,l({},t,{ref:a,onClick:function(){return e.scrollToAnchor(o.substring(1))},isActive:function(){return c}}))};E.scrollToAnchor=function(e){window.requestAnimationFrame((function(){var t=document.getElementById(decodeURIComponent(e));t&&window.scrollTo(0,O(t)-100)}))};var S=E;t["default"]=S},bZMm:function(e,t,n){"use strict";n.r(t),n.d(t,"Headers",(function(){return f})),n.d(t,"Request",(function(){return x})),n.d(t,"Response",(function(){return E})),n.d(t,"DOMException",(function(){return j})),n.d(t,"fetch",(function(){return A}));var r="undefined"!==typeof globalThis&&globalThis||"undefined"!==typeof self&&self||"undefined"!==typeof r&&r,i={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};function o(e){return e&&DataView.prototype.isPrototypeOf(e)}if(i.arrayBuffer)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function c(e){return"string"!==typeof e&&(e=String(e)),e}function l(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i.iterable&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function d(e){var t=new FileReader,n=h(t);return t.readAsArrayBuffer(e),n}function v(e){var t=new FileReader,n=h(t);return t.readAsText(e),n}function m(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:i.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():i.arrayBuffer&&i.blob&&o(e)?(this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||s(e))?this._bodyArrayBuffer=g(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=p(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(d)}),this.text=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(m(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i.formData&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(e,t){e=u(e),t=c(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},f.prototype["delete"]=function(e){delete this.map[u(e)]},f.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},f.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},f.prototype.set=function(e,t){this.map[u(e)]=c(t)},f.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},f.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),l(e)},f.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),l(e)},f.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),l(e)},i.iterable&&(f.prototype[Symbol.iterator]=f.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function _(e){var t=e.toUpperCase();return b.indexOf(t)>-1?t:e}function x(e,t){if(!(this instanceof x))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t=t||{};var n=t.body;if(e instanceof x){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new f(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new f(t.headers)),this.method=_(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),("GET"===this.method||"HEAD"===this.method)&&("no-store"===t.cache||"no-cache"===t.cache)){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+(new Date).getTime());else{var i=/\?/;this.url+=(i.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function O(e){var t=new f,n=e.replace(/\r?\n[\t ]+/g," ");return n.split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t}function E(e,t){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new f(t.headers),this.url=t.url||"",this._initBody(e)}x.prototype.clone=function(){return new x(this,{body:this._bodyInit})},y.call(x.prototype),y.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},E.error=function(){var e=new E(null,{status:0,statusText:""});return e.type="error",e};var S=[301,302,303,307,308];E.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new E(null,{status:t,headers:{location:e}})};var j=r.DOMException;try{new j}catch(k){j=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},j.prototype=Object.create(Error.prototype),j.prototype.constructor=j}function A(e,t){return new Promise((function(n,o){var a=new x(e,t);if(a.signal&&a.signal.aborted)return o(new j("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}function l(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:O(s.getAllResponseHeaders()||"")};e.url="responseURL"in s?s.responseURL:e.headers.get("X-Request-URL");var t="response"in s?s.response:s.responseText;setTimeout((function(){n(new E(t,e))}),0)},s.onerror=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},s.ontimeout=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},s.onabort=function(){setTimeout((function(){o(new j("Aborted","AbortError"))}),0)},s.open(a.method,l(a.url),!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&(i.blob?s.responseType="blob":i.arrayBuffer&&a.headers.get("Content-Type")&&-1!==a.headers.get("Content-Type").indexOf("application/octet-stream")&&(s.responseType="arraybuffer")),!t||"object"!==typeof t.headers||t.headers instanceof f?a.headers.forEach((function(e,t){s.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){s.setRequestHeader(e,c(t.headers[e]))})),a.signal&&(a.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",u)}),s.send("undefined"===typeof a._bodyInit?null:a._bodyInit)}))}A.polyfill=!0,r.fetch||(r.fetch=A,r.Headers=f,r.Request=x,r.Response=E)},bdeN:function(e,t,n){var r=n("I+eb"),i=n("eDxR"),o=n("glrk"),a=n("4WOD"),s=i.has,u=i.toKey,c=function(e,t,n){var r=s(e,t,n);if(r)return!0;var i=a(t);return null!==i&&c(e,i,n)};r({target:"Reflect",stat:!0},{hasMetadata:function(e,t){var n=arguments.length<3?void 0:u(arguments[2]);return c(e,o(t),n)}})},bdgK:function(e,t,n){"use strict";(function(e){var n=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype["delete"]=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),r="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,i=function(){return"undefined"!==typeof e&&e.Math===Math?e:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")()}(),o=function(){return"function"===typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)}}(),a=2;function s(e,t){var n=!1,r=!1,i=0;function s(){n&&(n=!1,e()),r&&c()}function u(){o(s)}function c(){var e=Date.now();if(n){if(e-i<a)return;r=!0}else n=!0,r=!1,setTimeout(u,t);i=e}return c}var u=20,c=["top","right","bottom","left","width","height","size","weight"],l="undefined"!==typeof MutationObserver,f=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=s(this.refresh.bind(this),u)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),l?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t,r=c.some((function(e){return!!~n.indexOf(e)}));r&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),p=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},h=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||i},d=E(0,0,0,0);function v(e){return parseFloat(e)||0}function m(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){var r=e["border-"+n+"-width"];return t+v(r)}),0)}function g(e){for(var t=["top","right","bottom","left"],n={},r=0,i=t;r<i.length;r++){var o=i[r],a=e["padding-"+o];n[o]=v(a)}return n}function y(e){var t=e.getBBox();return E(0,0,t.width,t.height)}function b(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return d;var r=h(e).getComputedStyle(e),i=g(r),o=i.left+i.right,a=i.top+i.bottom,s=v(r.width),u=v(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==t&&(s-=m(r,"left","right")+o),Math.round(u+a)!==n&&(u-=m(r,"top","bottom")+a)),!x(e)){var c=Math.round(s+o)-t,l=Math.round(u+a)-n;1!==Math.abs(c)&&(s-=c),1!==Math.abs(l)&&(u-=l)}return E(i.left,i.top,s,u)}var _=function(){return"undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof h(e).SVGGraphicsElement}:function(e){return e instanceof h(e).SVGElement&&"function"===typeof e.getBBox}}();function x(e){return e===h(e).document.documentElement}function w(e){return r?_(e)?y(e):b(e):d}function O(e){var t=e.x,n=e.y,r=e.width,i=e.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return p(a,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),a}function E(e,t,n,r){return{x:e,y:t,width:n,height:r}}var S=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=E(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=w(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),j=function(){function e(e,t){var n=O(t);p(this,{target:e,contentRect:n})}return e}(),A=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new n,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof h(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new S(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof h(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t["delete"](e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new j(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),k="undefined"!==typeof WeakMap?new WeakMap:new n,C=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=f.getInstance(),r=new A(t,n,this);k.set(this,r)}return e}();["observe","unobserve","disconnect"].forEach((function(e){C.prototype[e]=function(){var t;return(t=k.get(this))[e].apply(t,arguments)}}));var T=function(){return"undefined"!==typeof i.ResizeObserver?i.ResizeObserver:C}();t["a"]=T}).call(this,n("IyRk"))},beRK:function(e,t,n){"use strict";function r(){var e=n("q1tI");return r=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.getDemoUrl=t.getDemoRouteName=t["default"]=void 0;var i=o(n("nLCz"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return f(e)||l(e,t)||u(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function f(e){if(Array.isArray(e))return e}function p(){return"BASEMENT"===Object({NODE_ENV:"production"}).PLATFORM_TYPE}var h=function(){return p()?"_demos":"~demos"};t.getDemoRouteName=h;var d=function(e,t){var n,r=window,i=r.location,o=i.href,s=i.origin,u=o.split(/#\//),c=a(u,2),l=c[0],f=c[1],p="string"===typeof f;return[p?"".concat(l,"#"):s,"".concat((null===(n=window)||void 0===n?void 0:n.routerBase)||"","/").replace(/\/\/$/,"/"),h(),"/",e,"".concat(t?".html":"")].join("")};t.getDemoUrl=d;var v=function(e){var t=(0,r().useContext)(i["default"]),n=t.config,o=(0,r().useState)(""),s=a(o,2),u=s[0],c=s[1];return(0,r().useEffect)((function(){c(e?d(e,n.exportStatic&&n.exportStatic.htmlSuffix):null)}),[e,n]),u};t["default"]=v},bfL6:function(e,t,n){var r=n("mGKP");function i(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n["return"]||n["return"]()}finally{if(u)throw a}}}}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},bgtt:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),i=n.n(r),o=n("dEAq"),a=n("H1Ra"),s=n("dMo/"),u=n("nKUr"),c=i.a.memo((e=>{e.demos;return Object(u["jsx"])(u["Fragment"],{children:Object(u["jsxs"])("div",{className:"markdown",children:[Object(u["jsxs"])("h2",{id:"layer-\u7c7b\u578b",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#layer-\u7c7b\u578b","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"Layer \u7c7b\u578b"]}),Object(u["jsx"])("p",{children:"React \u5404\u4e2a\u7ec4\u4ef6\u540d\u79f0\u548c L7 \u540d\u79f0\u4fdd\u6301\u4e00\u81f4"}),Object(u["jsxs"])("ul",{children:[Object(u["jsx"])("li",{children:"PointLayer"}),Object(u["jsx"])("li",{children:"PolygonLayer"}),Object(u["jsx"])("li",{children:"LineLayer"}),Object(u["jsx"])("li",{children:"HeatmapLayer"}),Object(u["jsx"])("li",{children:"RasterLayer"}),Object(u["jsx"])("li",{children:"ImageLayer"}),Object(u["jsx"])("li",{children:"CityBuildingLayer"})]}),Object(u["jsxs"])("h3",{id:"\u4f7f\u7528\u65b9\u5f0f",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#\u4f7f\u7528\u65b9\u5f0f","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u4f7f\u7528\u65b9\u5f0f"]}),Object(u["jsx"])(a["a"],{code:"import { PointLayer } from '@antv/l7-react';",lang:"jsx"}),Object(u["jsxs"])("h2",{id:"layer-props",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#layer-props","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"Layer Props"]}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"prop name"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"options"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"layer options"})}),Object(u["jsx"])("td",{}),Object(u["jsx"])("td",{children:"layer \u914d\u7f6e\u9879"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"source"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"sourceOption"})}),Object(u["jsx"])("td",{}),Object(u["jsx"])("td",{children:"\u6570\u636e\u6e90\u914d\u7f6e\u9879"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"color"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"attributeOption"})}),Object(u["jsx"])("td",{}),Object(u["jsx"])("td",{children:"\u989c\u8272\u901a\u9053"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"shape"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"attributeOption"})}),Object(u["jsx"])("td",{}),Object(u["jsx"])("td",{children:"\u56fe\u5c42\u5f62\u72b6\u5c5e\u6027"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"size"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"attributeOption"})}),Object(u["jsx"])("td",{}),Object(u["jsx"])("td",{children:"\u56fe\u5c42\u5927\u5c0f\u5c5e\u6027"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"style"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Object"})}),Object(u["jsx"])("td",{}),Object(u["jsx"])("td",{children:"\u56fe\u5c42\u6837\u5f0f"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"scale"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"scale Option"})}),Object(u["jsx"])("td",{children:"\u9ed8\u8ba4\u4f1a\u6570\u503c\u7c7b\u8bbe\u5b9a scale\uff0c\u6570\u503c\u7c7b\u578b linear\uff0c\u5b57\u7b26\u4e32\u7c7b\u578b\u4e3a cat"}),Object(u["jsx"])("td",{children:"\u56fe\u5c42\u5ea6\u91cf"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"filter"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Function"})}),Object(u["jsx"])("td",{}),Object(u["jsx"])("td",{children:"\u56fe\u5c42\u6570\u636e\u8fc7\u6ee4\u65b9\u6cd5"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"select"}),Object(u["jsxs"])("td",{children:[Object(u["jsx"])("code",{children:"boolean"})," ",Object(u["jsx"])("code",{children:"interaction option"})]}),Object(u["jsx"])("td",{}),Object(u["jsx"])("td",{children:"\u56fe\u5c42\u9009\u4e2d\u9ad8\u4eae"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"active"}),Object(u["jsxs"])("td",{children:[Object(u["jsx"])("code",{children:"boolean"})," ",Object(u["jsx"])("code",{children:"interaction option"})]}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"false"})}),Object(u["jsx"])("td",{children:"\u56fe\u5c42 hover \u9ad8\u4eae"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"animate"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"animate Option"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"\u56fe\u5c42\u52a8\u753b\u914d\u7f6e"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"onLayerLoaded"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Function"})}),Object(u["jsx"])("td",{}),Object(u["jsx"])("td",{children:"\u56fe\u5c42\u6dfb\u52a0\u5b8c\u6210\u540e\u56de\u8c03\uff0c\u7528\u4e8e\u83b7\u53d6 layer \u5bf9\u8c61"})]})]})]}),Object(u["jsxs"])("h3",{id:"layer-options",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#layer-options","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"layer options"]}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"prop name"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"name"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{}),Object(u["jsx"])("td",{children:"\u56fe\u5c42\u540d\u5b57\uff0c\u53ef\u6839\u636e\u540d\u79f0\u83b7\u53d6 layer"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"visible"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"boolean"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"true"})}),Object(u["jsx"])("td",{children:"\u56fe\u5c42\u662f\u5426\u53ef\u89c1"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"zIndex"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"number"})}),Object(u["jsx"])("td",{children:"0"}),Object(u["jsx"])("td",{children:"\u56fe\u5c42\u7ed8\u5236\u987a\u5e8f\uff0c"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"minZoom"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"number"})}),Object(u["jsx"])("td",{children:"0"}),Object(u["jsx"])("td",{children:"\u8bbe\u7f6e layer \u6700\u5c0f\u53ef\u89c1\u7b49\u7ea7\uff0c\u5c0f\u4e8e\u5219\u4e0d\u663e\u793a"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"maxZoom"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"number"})}),Object(u["jsx"])("td",{children:"\u4e0e map \u6700\u5927\u7f29\u653e\u7b49\u7ea7\u4e00\u81f4"}),Object(u["jsx"])("td",{children:"\u8bbe\u7f6e layerd \u7684\u6700\u5927\u53ef\u89c1\u7b49\u7ea7\uff0c\u5927\u4e8e\u5219\u4e0d\u663e\u793a"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"aotoFit"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"boolean"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"false"})}),Object(u["jsx"])("td",{children:"\u662f\u5426\u7f29\u653e\u5230\u56fe\u5c42\u8303\u56f4"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"blend"}),Object(u["jsx"])("td",{children:"'string'"}),Object(u["jsx"])("td",{children:"'normal'"}),Object(u["jsxs"])("td",{children:["\u56fe\u5c42\u5143\u7d20\u6df7\u5408\u6548\u679c ",Object(u["jsx"])(o["AnchorLink"],{to:"../layer/layer/#blend",children:"\u8be6\u60c5"})]})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"pickingBuffer"}),Object(u["jsx"])("td",{children:"'number'"}),Object(u["jsx"])("td",{children:"'0'"}),Object(u["jsxs"])("td",{children:["\u56fe\u5c42\u62fe\u53d6\u7f13\u5b58\u673a\u5236\uff0c\u5982 1px \u5bbd\u5ea6\u7684\u7ebf\u9f20\u6807\u5f88\u96be\u62fe\u53d6(\u70b9\u51fb)\u5230, \u901a\u8fc7\u8bbe\u7f6e\u8be5\u53c2\u6570\u53ef\u6269\u5927\u62fe\u53d6\u7684\u8303\u56f4 ","{","number","}"," default 0"]})]})]})]}),Object(u["jsxs"])("h3",{id:"attribute-option",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#attribute-option","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"attribute Option"]}),Object(u["jsx"])("p",{children:"color, size, shape \u7b49\u56fe\u5f62\u6620\u5c04\u901a\u9053\uff0c\u901a\u8fc7\u4e0b\u9762\u53c2\u6570\u914d\u7f6e"}),Object(u["jsxs"])("ul",{children:[Object(u["jsx"])("li",{children:"field \u6620\u5c04\u5b57\u6bb5\uff0c\u5982\u679c\u662f\u5e38\u91cf\u8bbe\u7f6e\u4e3a null"}),Object(u["jsx"])("li",{children:"values \u6620\u5c04\u503c \u652f\u6301 \u5e38\u91cf\uff0c\u6570\u7ec4\uff0c\u56de\u8c03\u51fd\u6570\uff0c\u5982\u679c values \u4e3a\u6570\u7ec4\u6216\u56de\u8c03\u9700\u8981\u8bbe\u7f6e field \u5b57\u6bb5"})]}),Object(u["jsxs"])("p",{children:["\u8be6\u7ec6",Object(u["jsx"])(o["AnchorLink"],{to:"../layer/layer/#size",children:"\u914d\u7f6e\u9879"})]}),Object(u["jsxs"])("h3",{id:"source-option",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#source-option","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"source Option"]}),Object(u["jsx"])("p",{children:"\u6570\u636e\u6e90\u914d\u7f6e\u9879"}),Object(u["jsxs"])("ul",{children:[Object(u["jsx"])("li",{children:"data \u652f\u6301 geojson\u3001csv\u3001json"}),Object(u["jsx"])("li",{children:"parser \u6570\u636e\u89e3\u6790\u914d\u7f6e\u9879"}),Object(u["jsx"])("li",{children:"transforms \u6570\u636e\u5904\u7406\u914d\u7f6e\u9879"})]}),Object(u["jsxs"])("p",{children:["\u8be6\u7ec6",Object(u["jsx"])(o["AnchorLink"],{to:"../source/source/#parser-1",children:"\u914d\u7f6e\u9879"})]}),Object(u["jsxs"])("h3",{id:"scale-option",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#scale-option","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"scale Option"]}),Object(u["jsx"])("p",{children:"\u5ea6\u91cf\u914d\u7f6e\u9879"}),Object(u["jsx"])("ul",{children:Object(u["jsx"])("li",{children:"values scaleCfg"})}),Object(u["jsx"])("p",{children:Object(u["jsx"])("strong",{children:"scaleCfg"})}),Object(u["jsxs"])("ul",{children:[Object(u["jsx"])("li",{children:"key \u4e3a\u5b57\u6bb5\u540d fieldname | attributeName"}),Object(u["jsx"])("li",{children:"value scale \u914d\u7f6e\u9879"})]}),Object(u["jsx"])(a["a"],{code:"const scales = {\n  values: {\n    name: {\n      type: 'cat',\n    },\n  },\n};",lang:"javascript"}),Object(u["jsxs"])("h3",{id:"interaction-option",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#interaction-option","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"interaction option"]}),Object(u["jsx"])("p",{children:"active\uff0cselect \u914d\u7f6e\u9879"}),Object(u["jsx"])("p",{children:Object(u["jsx"])("strong",{children:"option"})}),Object(u["jsx"])("ul",{children:Object(u["jsx"])("li",{children:"color \u8bbe\u7f6e\u4ea4\u4e92\u7684\u989c\u8272\uff0c\u6307\u6ed1\u8fc7\u6216\u8005\u9009\u4e2d\u7684"})}),Object(u["jsxs"])("h3",{id:"\u83b7\u53d6-layer-\u5bf9\u8c61",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#\u83b7\u53d6-layer-\u5bf9\u8c61","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u83b7\u53d6 layer \u5bf9\u8c61"]}),Object(u["jsxs"])("h4",{id:"onlayerloaded",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#onlayerloaded","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"onLayerLoaded"]}),Object(u["jsx"])("p",{children:"\u56de\u8c03\u51fd\u6570\u83b7\u53d6 layer, scene \u5bf9\u8c61"}),Object(u["jsx"])(a["a"],{code:"onLayerLoaded = (layer, scene) => {};",lang:"javascript"}),Object(u["jsxs"])("h4",{id:"context-api",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#context-api","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"Context API"]}),Object(u["jsx"])(a["a"],{code:"import { LayerContext } from '@antv/l7-react';\n<LayerContext.Consumer>\n  {(layer, scene) => {\n    // use `scene` here\n  }}\n</LayerContext.Consumer>;",lang:"jsx"}),Object(u["jsxs"])("h3",{id:"layer-\u793a\u4f8b",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#layer-\u793a\u4f8b","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"Layer \u793a\u4f8b"]}),Object(u["jsx"])(a["a"],{code:"import { PolygonLayer } from '@antv/l7-react';\n<PolygonLayer\n  key={'2'}\n  source={{\n    data,\n  }}\n  color={{\n    field: 'name',\n    values: ['#2E8AE6', '#69D1AB', '#DAF291', '#FFD591', '#FF7A45', '#CF1D49'],\n  }}\n  shape={{\n    values: 'fill',\n  }}\n  style={{\n    opacity: 1,\n  }}\n  active={{\n    option: {\n      color: 'red',\n    },\n  }}\n/>;",lang:"jsx"}),Object(u["jsxs"])("h2",{id:"\u5b50\u7ec4\u4ef6",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#\u5b50\u7ec4\u4ef6","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u5b50\u7ec4\u4ef6"]}),Object(u["jsxs"])("h3",{id:"\u4e8b\u4ef6\u7ec4\u4ef6",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#\u4e8b\u4ef6\u7ec4\u4ef6","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u4e8b\u4ef6\u7ec4\u4ef6"]}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"prop name"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"type"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsxs"])("td",{children:["\u4e8b\u4ef6\u7c7b\u578b ",Object(u["jsx"])(o["AnchorLink"],{to:"../layer/layer/#%E9%BC%A0%E6%A0%87%E4%BA%8B%E4%BB%B6",children:"\u8be6\u60c5"})]})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"handler"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Function"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"layer \u56de\u8c03\u51fd\u6570"})]})]})]}),Object(u["jsxs"])("h3",{id:"\u793a\u4f8b",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#\u793a\u4f8b","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u793a\u4f8b"]}),Object(u["jsx"])(a["a"],{code:'import { LayerEvent, PolygonLayer } from \'@antv/l7-react\';\n<PolygonLayer>\n  <LayerEvent type="click" handler={() => {}} />\n  <LayerEvent type="mousemove" handler={() => {}} />\n</PolygonLayer>;',lang:"jsx"})]})})}));t["default"]=e=>{var t=i.a.useContext(o["context"]),n=t.demos;return i.a.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),Object(u["jsx"])(c,{demos:n})}},bmMU:function(e,t){var n="undefined"!==typeof Element,r="function"===typeof Map,i="function"===typeof Set,o="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function a(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var s,u,c,l;if(Array.isArray(e)){if(s=e.length,s!=t.length)return!1;for(u=s;0!==u--;)if(!a(e[u],t[u]))return!1;return!0}if(r&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;l=e.entries();while(!(u=l.next()).done)if(!t.has(u.value[0]))return!1;l=e.entries();while(!(u=l.next()).done)if(!a(u.value[1],t.get(u.value[0])))return!1;return!0}if(i&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;l=e.entries();while(!(u=l.next()).done)if(!t.has(u.value[0]))return!1;return!0}if(o&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(s=e.length,s!=t.length)return!1;for(u=s;0!==u--;)if(e[u]!==t[u])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof t.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof t.toString)return e.toString()===t.toString();if(c=Object.keys(e),s=c.length,s!==Object.keys(t).length)return!1;for(u=s;0!==u--;)if(!Object.prototype.hasOwnProperty.call(t,c[u]))return!1;if(n&&e instanceof Element)return!1;for(u=s;0!==u--;)if(("_owner"!==c[u]&&"__v"!==c[u]&&"__o"!==c[u]||!e.$$typeof)&&!a(e[c[u]],t[c[u]]))return!1;return!0}return e!==e&&t!==t}e.exports=function(e,t){try{return a(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},bpoo:function(e,t){window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',function(e){try{var t=function(){c||(c=!0,s())},n=function e(){try{u.documentElement.doScroll("left")}catch(r){return void setTimeout(e,50)}t()},r=(r=document.getElementsByTagName("script"))[r.length-1],i=r.getAttribute("data-injectcss");r=r.getAttribute("data-disable-injectsvg");if(!r){var o,a,s,u,c,l=function(e,t){t.parentNode.insertBefore(e,t)};if(i&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(r){console&&console.log(r)}}o=function(){var t,n=document.createElement("div");n.innerHTML=e._iconfont_svg_string_3580659,(n=n.getElementsByTagName("svg")[0])&&(n.setAttribute("aria-hidden","true"),n.style.position="absolute",n.style.width=0,n.style.height=0,n.style.overflow="hidden",(t=document.body).firstChild?l(n,t.firstChild):t.appendChild(n))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(o,0):(a=function(){document.removeEventListener("DOMContentLoaded",a,!1),o()},document.addEventListener("DOMContentLoaded",a,!1)):document.attachEvent&&(s=o,u=e.document,c=!1,n(),u.onreadystatechange=function(){"complete"==u.readyState&&(u.onreadystatechange=null,t())})}}catch(f){}}(window)},busE:function(e,t,n){var r=n("2oRo"),i=n("kRJp"),o=n("UTVS"),a=n("zk60"),s=n("iSVu"),u=n("afO8"),c=u.get,l=u.enforce,f=String(String).split("String");(e.exports=function(e,t,n,s){var u=!!s&&!!s.unsafe,c=!!s&&!!s.enumerable,p=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||i(n,"name",t),l(n).source=f.join("string"==typeof t?t:"")),e!==r?(u?!p&&e[t]&&(c=!0):delete e[t],c?e[t]=n:i(e,t,n)):c?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},"c+Xe":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return c}));var r=n("U8pU"),i=n("TOwV"),o=n("YrtM");function a(e,t){"function"===typeof e?e(t):"object"===Object(r["a"])(e)&&e&&"current"in e&&(e.current=t)}function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter((function(e){return e}));return r.length<=1?r[0]:function(e){t.forEach((function(t){a(t,e)}))}}function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(o["a"])((function(){return s.apply(void 0,t)}),t,(function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}))}function c(e){var t,n,r=Object(i["isMemo"])(e)?e.type.type:e.type;return!!("function"!==typeof r||null!==(t=r.prototype)&&void 0!==t&&t.render)&&!!("function"!==typeof e||null!==(n=e.prototype)&&void 0!==n&&n.render)}},c0go:function(e,t,n){"use strict";e.exports=function(e,t){for(var n={},r=Object.keys(e),i=Array.isArray(t),o=0;o<r.length;o++){var a=r[o],s=e[a];(i?-1!==t.indexOf(a):t(a,s,e))&&(n[a]=s)}return n}},c162:function(e,t,n){"use strict";var r=n("67WC"),i=n("gdVl"),o=r.aTypedArray,a=r.exportTypedArrayMethod;a("fill",(function(e){return i.apply(o(this),arguments)}))},c6wG:function(e,t,n){var r=n("dD9F"),i=n("sEf8"),o=n("mdPL"),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},c9m3:function(e,t,n){var r=n("RNIs");r("flatMap")},cDf5:function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports["default"]=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},cOPa:function(e,t,n){var r=n("I+eb"),i=Math.min,o=Math.max;r({target:"Math",stat:!0},{clamp:function(e,t,n){return i(n,o(t,e))}})},cR2u:function(e,t,n){"use strict";n.r(t);var r=n("/7QA"),i=n("q1tI"),o=n("nKUr");t["default"]=i["memo"]((function(){return Object(o["jsxs"])(r["a"],{map:{center:[110.19382669582967,30.258134],pitch:0,style:"dark",zoom:1},style:{height:"400px",position:"relative",background:"#011030"},children:[Object(o["jsx"])(r["c"],{type:"scale",position:"topleft"}),Object(o["jsx"])(r["c"],{type:"zoom",position:"topleft"}),Object(o["jsxs"])(r["d"],{position:"topright",style:{display:"flex"},children:[Object(o["jsx"])("h1",{style:{color:"red"},children:"1"}),Object(o["jsx"])("h1",{style:{color:"red"},children:"2"})]})]})}))},cSJO:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.resolveInstance=void 0;var i=n("MON2"),o=n("FV85"),a=n("xfSm");function s(e,t,n){var r=t.filter((function(e){return null!==e.target&&e.target.type===o.TargetTypeEnum.ClassProperty})),i=r.map(n);return r.forEach((function(t,n){var r="";r=t.target.name.value();var o=i[n];e[r]=o})),e}function u(e,t){return new(e.bind.apply(e,r([void 0],t)))}function c(e,t){if(Reflect.hasMetadata(a.POST_CONSTRUCT,e)){var n=Reflect.getMetadata(a.POST_CONSTRUCT,e);try{t[n.value]()}catch(r){throw new Error(i.POST_CONSTRUCT_ERROR(e.name,r.message))}}}function l(e,t,n){var r=null;if(t.length>0){var i=t.filter((function(e){return null!==e.target&&e.target.type===o.TargetTypeEnum.ConstructorArgument})),a=i.map(n);r=u(e,a),r=s(r,t,n)}else r=new e;return c(e,r),r}t.resolveInstance=l},cVYH:function(e,t,n){var r=n("hh1v"),i=n("0rvr");e.exports=function(e,t,n){var o,a;return i&&"function"==typeof(o=t.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&i(e,a),e}},cZ5Q:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectable=void 0;var r=n("MON2"),i=n("xfSm");function o(){return function(e){if(Reflect.hasOwnMetadata(i.PARAM_TYPES,e))throw new Error(r.DUPLICATED_INJECTABLE_DECORATOR);var t=Reflect.getMetadata(i.DESIGN_PARAM_TYPES,e)||[];return Reflect.defineMetadata(i.PARAM_TYPES,t,e),e}}t.injectable=o},caoh:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("q1tI"),i=r["createContext"](!1),o=function(e){var t=e.children,n=e.disabled,o=r["useContext"](i);return r["createElement"](i.Provider,{value:null!==n&&void 0!==n?n:o},t)};t["b"]=i},cfiF:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("Cg3G");r({target:"WeakMap",proto:!0,real:!0,forced:i},{deleteAll:function(){return o.apply(this,arguments)}})},"cq/+":function(e,t,n){var r=n("mc0g"),i=r();e.exports=i},cs7w:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),i=n.n(r),o=n("dEAq"),a=n("H1Ra"),s=n("dMo/"),u=n("nKUr"),c=i.a.memo((e=>{e.demos;return Object(u["jsx"])(u["Fragment"],{children:Object(u["jsxs"])("div",{className:"markdown",children:[Object(u["jsxs"])("h2",{id:"popup-props",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#popup-props","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"Popup Props"]}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"prop name"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"option"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"popup \u914d\u7f6e\u9879"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"lnglat"}),Object(u["jsx"])("td",{children:"`Array"}),Object(u["jsx"])("td",{children:"Object`"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"children"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"React.ReactNode"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"\u5b50\u7ec4\u4ef6"})]})]})]}),Object(u["jsxs"])("h3",{id:"option",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#option","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"option"]}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"prop name"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"closeButton"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"true"})}),Object(u["jsx"])("td",{children:"\u662f\u5426\u663e\u793a\u5173\u95ed\u6309\u94ae"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"closeOnClick"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"blue"})}),Object(u["jsx"])("td",{children:"\u70b9\u51fb\u662f\u5426\u5173\u95ed popup"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"anchor"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"center, top, top-left, top-right, bottom, bottom-left,bottom-right,left, right"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"offsets"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Array[x,y]"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"popup \u4f4d\u7f6e\u504f\u79fb"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"className"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"\u6837\u5f0f\u540d\u79f0"})]})]})]}),Object(u["jsx"])(a["a"],{code:"import { Popup } from '@antv/l7-react';\n\n<Popup\n  option={{\n    closeOnClick: false, // \u5982\u679cPopup\u5185\u9700\u8981\u54cd\u5e94Dom\u4e8b\u4ef6\u9700\u8bbe\u7f6e\u6210false,\u5426\u5219\u4e8b\u4ef6\u4e0d\u751f\u6548\n  }}\n  lnglat={[]}\n/>;",lang:"jsx"}),Object(u["jsx"])("p",{children:Object(u["jsx"])(o["AnchorLink"],{to:"../../../examples/react/covid#covid_bubble",children:"popup \u4f7f\u7528\u5b8c\u6574 demo"})})]})})}));t["default"]=e=>{var t=i.a.useContext(o["context"]),n=t.demos;return i.a.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),Object(u["jsx"])(c,{demos:n})}},ctDJ:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("0GbY"),a=n("glrk"),s=n("HAuM"),u=n("A2ZE"),c=n("SEBh"),l=n("WGBp"),f=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{map:function(e){var t=a(this),n=l(t),r=u(e,arguments.length>1?arguments[1]:void 0,3),i=new(c(t,o("Set"))),p=s(i.add);return f(n,(function(e){p.call(i,r(e,e,t))}),void 0,!1,!0),i}})},cvCv:function(e,t){function n(e){return function(){return e}}e.exports=n},cvf0:function(e,t,n){"use strict";var r=n("67WC").exportTypedArrayMethod,i=n("0Dky"),o=n("2oRo"),a=o.Uint8Array,s=a&&a.prototype||{},u=[].toString,c=[].join;i((function(){u.call({})}))&&(u=function(){return c.call(this)});var l=s.toString!=u;r("toString",u,l)},d4sm:function(e,t,n){"use strict";n.r(t);var r=n("qLMh"),i=n("9og8"),o=n("q1tI"),a=n.n(o),s=n("/7QA"),u=n("0iz5"),c=n("nKUr");function l(e){return f.apply(this,arguments)}function f(){return f=Object(i["a"])(Object(r["a"])().mark((function e(t){var n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}var p={world:"https://gw.alipayobjects.com/os/bmw-prod/79143b04-5fab-4d24-8cce-80b818a3d189.json",grid:"https://gw.alipayobjects.com/os/bmw-prod/8990e8b4-c58e-419b-afb9-8ea3daff2dd1.json"};t["default"]=()=>{var e,t,n=Object(u["a"])(l,{manual:!0,fetchKey:e=>e}),r=n.run,i=n.fetches;return a.a.useEffect((()=>{r(p.world),r(p.grid)}),[]),Object(c["jsxs"])(s["b"],{map:{pitch:0,style:"light",zoom:2,center:[112,30]},style:{height:"400px",position:"relative",background:"#011030"},children:[!1===(null===(e=i[p.grid])||void 0===e?void 0:e.loading)&&Object(c["jsx"])(s["e"],{source:{data:i[p.grid].data,transforms:[{type:"hexagon",size:5e5,field:"capacity",method:"sum"}]},color:{values:"#132953"},shape:{values:"circle"},style:{coverage:.5,angle:.3,opacity:.8}},"2"),!1===(null===(t=i[p.world])||void 0===t?void 0:t.loading)&&Object(c["jsx"])(s["j"],{options:{autoFit:!0},source:{data:i[p.world].data},active:!1,size:{values:.6},color:{values:"#274A91"},shape:{values:"line"},style:{opacity:.6}},"1"),Object(c["jsx"])(s["c"],{type:"scale",position:"bottomright"}),Object(c["jsx"])(s["c"],{type:"zoom",position:"bottomleft"})]})}},d6cI:function(e,t){var n=1/0,r=Math.abs,i=Math.pow,o=Math.floor,a=Math.log,s=Math.LN2,u=function(e,t,u){var c,l,f,p=new Array(u),h=8*u-t-1,d=(1<<h)-1,v=d>>1,m=23===t?i(2,-24)-i(2,-77):0,g=e<0||0===e&&1/e<0?1:0,y=0;for(e=r(e),e!=e||e===n?(l=e!=e?1:0,c=d):(c=o(a(e)/s),e*(f=i(2,-c))<1&&(c--,f*=2),e+=c+v>=1?m/f:m*i(2,1-v),e*f>=2&&(c++,f/=2),c+v>=d?(l=0,c=d):c+v>=1?(l=(e*f-1)*i(2,t),c+=v):(l=e*i(2,v-1)*i(2,t),c=0));t>=8;p[y++]=255&l,l/=256,t-=8);for(c=c<<t|l,h+=t;h>0;p[y++]=255&c,c/=256,h-=8);return p[--y]|=128*g,p},c=function(e,t){var r,o=e.length,a=8*o-t-1,s=(1<<a)-1,u=s>>1,c=a-7,l=o-1,f=e[l--],p=127&f;for(f>>=7;c>0;p=256*p+e[l],l--,c-=8);for(r=p&(1<<-c)-1,p>>=-c,c+=t;c>0;r=256*r+e[l],l--,c-=8);if(0===p)p=1-u;else{if(p===s)return r?NaN:f?-n:n;r+=i(2,t),p-=u}return(f?-1:1)*r*i(2,p-t)};e.exports={pack:u,unpack:c}},d9O0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.id=void 0;var r=0;function i(){return r++}t.id=i},dA7e:function(e,t,n){e.exports.VectorTile=n("B93f"),e.exports.VectorTileFeature=n("HfwV"),e.exports.VectorTileLayer=n("DiGy")},"dBg+":function(e,t){t.f=Object.getOwnPropertySymbols},dD9F:function(e,t,n){var r=n("NykK"),i=n("shjB"),o=n("ExA7"),a="[object Arguments]",s="[object Array]",u="[object Boolean]",c="[object Date]",l="[object Error]",f="[object Function]",p="[object Map]",h="[object Number]",d="[object Object]",v="[object RegExp]",m="[object Set]",g="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",_="[object DataView]",x="[object Float32Array]",w="[object Float64Array]",O="[object Int8Array]",E="[object Int16Array]",S="[object Int32Array]",j="[object Uint8Array]",A="[object Uint8ClampedArray]",k="[object Uint16Array]",C="[object Uint32Array]",T={};function M(e){return o(e)&&i(e.length)&&!!T[r(e)]}T[x]=T[w]=T[O]=T[E]=T[S]=T[j]=T[A]=T[k]=T[C]=!0,T[a]=T[s]=T[b]=T[u]=T[_]=T[c]=T[l]=T[f]=T[p]=T[h]=T[d]=T[v]=T[m]=T[g]=T[y]=!1,e.exports=M},dEAq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AnchorLink",{enumerable:!0,get:function(){return a["default"]}}),Object.defineProperty(t,"Link",{enumerable:!0,get:function(){return i["default"]}}),Object.defineProperty(t,"NavLink",{enumerable:!0,get:function(){return o["default"]}}),Object.defineProperty(t,"context",{enumerable:!0,get:function(){return r["default"]}}),Object.defineProperty(t,"getDemoUrl",{enumerable:!0,get:function(){return h.getDemoUrl}}),Object.defineProperty(t,"useApiData",{enumerable:!0,get:function(){return d["default"]}}),Object.defineProperty(t,"useCodeSandbox",{enumerable:!0,get:function(){return f["default"]}}),Object.defineProperty(t,"useCopy",{enumerable:!0,get:function(){return u["default"]}}),Object.defineProperty(t,"useDemoUrl",{enumerable:!0,get:function(){return h["default"]}}),Object.defineProperty(t,"useLocaleProps",{enumerable:!0,get:function(){return p["default"]}}),Object.defineProperty(t,"useMotions",{enumerable:!0,get:function(){return l["default"]}}),Object.defineProperty(t,"usePrefersColor",{enumerable:!0,get:function(){return m["default"]}}),Object.defineProperty(t,"useRiddle",{enumerable:!0,get:function(){return c["default"]}}),Object.defineProperty(t,"useSearch",{enumerable:!0,get:function(){return s["default"]}}),Object.defineProperty(t,"useTSPlaygroundUrl",{enumerable:!0,get:function(){return v["default"]}});var r=b(n("nLCz")),i=b(n("zqmC")),o=b(n("6asN")),a=b(n("bYHP")),s=b(n("t/kZ")),u=b(n("dfPH")),c=b(n("o0kM")),l=b(n("zYLY")),f=b(n("r1Q5")),p=b(n("U/TZ")),h=y(n("beRK")),d=b(n("3QDa")),v=b(n("7sf/")),m=b(n("2N97"));function g(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r["default"]=e,n&&n.set(e,r),r}function b(e){return e&&e.__esModule?e:{default:e}}},"dG/n":function(e,t,n){var r=n("Qo9l"),i=n("UTVS"),o=n("5Tg+"),a=n("m/L8").f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},dI71:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("s4An");function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Object(r["a"])(e,t)}},"dMo/":function(e,t,n){"use strict";var r=n("q1tI"),i=n.n(r),o=n("hKI/"),a=n.n(o);n("WpQk");function s(e,t){return p(e)||f(e,t)||c(e,t)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),t&&o.length===t)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function p(e){if(Array.isArray(e))return e}var h=function(e){var t=e.children,n=Object(r["useRef"])(),o=Object(r["useState"])(!1),u=s(o,2),c=u[0],l=u[1],f=Object(r["useState"])(!1),p=s(f,2),h=p[0],d=p[1];return Object(r["useEffect"])((function(){var e=n.current,t=a()((function(){l(e.scrollLeft>0),d(e.scrollLeft<e.scrollWidth-e.offsetWidth)}),100);return t(),e.addEventListener("scroll",t),window.addEventListener("resize",t),function(){e.removeEventListener("scroll",t),window.removeEventListener("resize",t)}}),[]),i.a.createElement("div",{className:"__dumi-default-table"},i.a.createElement("div",{className:"__dumi-default-table-content",ref:n,"data-left-folded":c||void 0,"data-right-folded":h||void 0},i.a.createElement("table",null,t)))};t["a"]=h},dNT4:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("A2ZE"),s=n("WGBp"),u=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{every:function(e){var t=o(this),n=s(t),r=a(e,arguments.length>1?arguments[1]:void 0,3);return!u(n,(function(e){if(!r(e,e,t))return u.stop()}),void 0,!1,!0).stopped}})},dOgj:function(e,t,n){"use strict";var r=n("I+eb"),i=n("2oRo"),o=n("g6v/"),a=n("iqeF"),s=n("67WC"),u=n("Yhre"),c=n("GarU"),l=n("XGwC"),f=n("kRJp"),p=n("UMSQ"),h=n("CyXQ"),d=n("GC2F"),v=n("wE6v"),m=n("UTVS"),g=n("9d/t"),y=n("hh1v"),b=n("fHMY"),_=n("0rvr"),x=n("JBy8").f,w=n("oHi+"),O=n("tycR").forEach,E=n("JiZb"),S=n("m/L8"),j=n("Bs8V"),A=n("afO8"),k=n("cVYH"),C=A.get,T=A.set,M=S.f,P=j.f,I=Math.round,R=i.RangeError,L=u.ArrayBuffer,D=u.DataView,N=s.NATIVE_ARRAY_BUFFER_VIEWS,F=s.TYPED_ARRAY_TAG,z=s.TypedArray,B=s.TypedArrayPrototype,U=s.aTypedArrayConstructor,V=s.isTypedArray,H="BYTES_PER_ELEMENT",G="Wrong length",W=function(e,t){var n=0,r=t.length,i=new(U(e))(r);while(r>n)i[n]=t[n++];return i},q=function(e,t){M(e,t,{get:function(){return C(this)[t]}})},Z=function(e){var t;return e instanceof L||"ArrayBuffer"==(t=g(e))||"SharedArrayBuffer"==t},Y=function(e,t){return V(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},X=function(e,t){return Y(e,t=v(t,!0))?l(2,e[t]):P(e,t)},K=function(e,t,n){return!(Y(e,t=v(t,!0))&&y(n)&&m(n,"value"))||m(n,"get")||m(n,"set")||n.configurable||m(n,"writable")&&!n.writable||m(n,"enumerable")&&!n.enumerable?M(e,t,n):(e[t]=n.value,e)};o?(N||(j.f=X,S.f=K,q(B,"buffer"),q(B,"byteOffset"),q(B,"byteLength"),q(B,"length")),r({target:"Object",stat:!0,forced:!N},{getOwnPropertyDescriptor:X,defineProperty:K}),e.exports=function(e,t,n){var o=e.match(/\d+$/)[0]/8,s=e+(n?"Clamped":"")+"Array",u="get"+e,l="set"+e,v=i[s],m=v,g=m&&m.prototype,S={},j=function(e,t){var n=C(e);return n.view[u](t*o+n.byteOffset,!0)},A=function(e,t,r){var i=C(e);n&&(r=(r=I(r))<0?0:r>255?255:255&r),i.view[l](t*o+i.byteOffset,r,!0)},P=function(e,t){M(e,t,{get:function(){return j(this,t)},set:function(e){return A(this,t,e)},enumerable:!0})};N?a&&(m=t((function(e,t,n,r){return c(e,m,s),k(function(){return y(t)?Z(t)?void 0!==r?new v(t,d(n,o),r):void 0!==n?new v(t,d(n,o)):new v(t):V(t)?W(m,t):w.call(m,t):new v(h(t))}(),e,m)})),_&&_(m,z),O(x(v),(function(e){e in m||f(m,e,v[e])})),m.prototype=g):(m=t((function(e,t,n,r){c(e,m,s);var i,a,u,l=0,f=0;if(y(t)){if(!Z(t))return V(t)?W(m,t):w.call(m,t);i=t,f=d(n,o);var v=t.byteLength;if(void 0===r){if(v%o)throw R(G);if(a=v-f,a<0)throw R(G)}else if(a=p(r)*o,a+f>v)throw R(G);u=a/o}else u=h(t),a=u*o,i=new L(a);T(e,{buffer:i,byteOffset:f,byteLength:a,length:u,view:new D(i)});while(l<u)P(e,l++)})),_&&_(m,z),g=m.prototype=b(B)),g.constructor!==m&&f(g,"constructor",m),F&&f(g,F,s),S[s]=m,r({global:!0,forced:m!=v,sham:!N},S),H in m||f(m,H,o),H in g||f(g,H,o),E(s)}):e.exports=function(){}},dTAl:function(e,t,n){var r=n("GoyQ"),i=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},dX1H:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Target=void 0;var r=n("xfSm"),i=n("d9O0"),o=n("GXnB"),a=n("zxMA"),s=function(){function e(e,t,n,s){this.id=i.id(),this.type=e,this.serviceIdentifier=n,this.name=new a.QueryableString(t||""),this.metadata=new Array;var u=null;"string"===typeof s?u=new o.Metadata(r.NAMED_TAG,s):s instanceof o.Metadata&&(u=s),null!==u&&this.metadata.push(u)}return e.prototype.hasTag=function(e){for(var t=0,n=this.metadata;t<n.length;t++){var r=n[t];if(r.key===e)return!0}return!1},e.prototype.isArray=function(){return this.hasTag(r.MULTI_INJECT_TAG)},e.prototype.matchesArray=function(e){return this.matchesTag(r.MULTI_INJECT_TAG)(e)},e.prototype.isNamed=function(){return this.hasTag(r.NAMED_TAG)},e.prototype.isTagged=function(){return this.metadata.some((function(e){return r.NON_CUSTOM_TAG_KEYS.every((function(t){return e.key!==t}))}))},e.prototype.isOptional=function(){return this.matchesTag(r.OPTIONAL_TAG)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(e){return e.key===r.NAMED_TAG}))[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(e){return r.NON_CUSTOM_TAG_KEYS.every((function(t){return e.key!==t}))})):null},e.prototype.matchesNamedTag=function(e){return this.matchesTag(r.NAMED_TAG)(e)},e.prototype.matchesTag=function(e){var t=this;return function(n){for(var r=0,i=t.metadata;r<i.length;r++){var o=i[r];if(o.key===e&&o.value===n)return!0}return!1}},e}();t.Target=s},dfPH:function(e,t,n){"use strict";function r(){var e=n("q1tI");return r=function(){return e},e}function i(){var e=o(n("WWur"));return i=function(){return e},e}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return f(e)||l(e,t)||u(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function f(e){if(Array.isArray(e))return e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var p=function(){var e=(0,r().useState)(),t=a(e,2),n=t[0],o=t[1],s=(0,r().useState)("ready"),u=a(s,2),c=u[0],l=u[1],f=(0,r().useCallback)((function(e){(0,i()["default"])(e),l("copied"),clearTimeout(n),o(setTimeout((function(){l("ready")}),2e3))}),[]);return[f,c]};t["default"]=p},dm2S:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("ODXe"),i=n("q1tI");function o(e){var t=i["useRef"](!1),n=i["useState"](e),o=Object(r["a"])(n,2),a=o[0],s=o[1];function u(e,n){n&&t.current||s(e)}return i["useEffect"]((function(){return t.current=!1,function(){t.current=!0}}),[]),[a,u]}},dmwd:function(e,t){function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},doU7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingCount=void 0;var r={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};t.BindingCount=r},dxzI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncContainerModule=t.ContainerModule=void 0;var r=n("d9O0"),i=function(){function e(e){this.id=r.id(),this.registry=e}return e}();t.ContainerModule=i;var o=function(){function e(e){this.id=r.id(),this.registry=e}return e}();t.AsyncContainerModule=o},e4Nc:function(e,t,n){var r=n("fGT3"),i=n("k+1r"),o=n("JHgL"),a=n("pSRY"),s=n("H8j4");function u(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype["delete"]=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,e.exports=u},e5cp:function(e,t,n){var r=n("fmRc"),i=n("or5M"),o=n("HDyB"),a=n("seXi"),s=n("QqLw"),u=n("Z0cm"),c=n("DSRE"),l=n("c6wG"),f=1,p="[object Arguments]",h="[object Array]",d="[object Object]",v=Object.prototype,m=v.hasOwnProperty;function g(e,t,n,v,g,y){var b=u(e),_=u(t),x=b?h:s(e),w=_?h:s(t);x=x==p?d:x,w=w==p?d:w;var O=x==d,E=w==d,S=x==w;if(S&&c(e)){if(!c(t))return!1;b=!0,O=!1}if(S&&!O)return y||(y=new r),b||l(e)?i(e,t,n,v,g,y):o(e,t,x,n,v,g,y);if(!(n&f)){var j=O&&m.call(e,"__wrapped__"),A=E&&m.call(t,"__wrapped__");if(j||A){var k=j?e.value():e,C=A?t.value():t;return y||(y=new r),g(k,C,n,v,y)}}return!!S&&(y||(y=new r),a(e,t,n,v,g,y))}e.exports=g},e9O8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getParameters=void 0;var r=n("6xEa");function i(e){return r.compressToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function o(e){return i(JSON.stringify(e))}t.getParameters=o},"eDl+":function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},eDxR:function(e,t,n){var r=n("Tskq"),i=n("ENF9"),o=n("VpIT"),a=o("metadata"),s=a.store||(a.store=new i),u=function(e,t,n){var i=s.get(e);if(!i){if(!n)return;s.set(e,i=new r)}var o=i.get(t);if(!o){if(!n)return;i.set(t,o=new r)}return o},c=function(e,t,n){var r=u(t,n,!1);return void 0!==r&&r.has(e)},l=function(e,t,n){var r=u(t,n,!1);return void 0===r?void 0:r.get(e)},f=function(e,t,n,r){u(n,r,!0).set(e,t)},p=function(e,t){var n=u(e,t,!1),r=[];return n&&n.forEach((function(e,t){r.push(t)})),r},h=function(e){return void 0===e||"symbol"==typeof e?e:String(e)};e.exports={store:s,getMap:u,has:c,get:l,set:f,keys:p,toKey:h}},eO0o:function(e,t,n){var r=n("I+eb");r({target:"Math",stat:!0},{imulh:function(e,t){var n=65535,r=+e,i=+t,o=r&n,a=i&n,s=r>>16,u=i>>16,c=(s*a>>>0)+(o*a>>>16);return s*u+(c>>16)+((o*u>>>0)+(c&n)>>16)}})},eRUA:function(e,t,n){"use strict";e.exports=i;var r=n("kVK+");function i(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var o=4294967296,a=1/o,s=12,u="undefined"===typeof TextDecoder?null:new TextDecoder("utf8");function c(e,t,n){var r,i,o=n.buf;if(i=o[n.pos++],r=(112&i)>>4,i<128)return f(e,r,t);if(i=o[n.pos++],r|=(127&i)<<3,i<128)return f(e,r,t);if(i=o[n.pos++],r|=(127&i)<<10,i<128)return f(e,r,t);if(i=o[n.pos++],r|=(127&i)<<17,i<128)return f(e,r,t);if(i=o[n.pos++],r|=(127&i)<<24,i<128)return f(e,r,t);if(i=o[n.pos++],r|=(1&i)<<31,i<128)return f(e,r,t);throw new Error("Expected varint not more than 10 bytes")}function l(e){return e.type===i.Bytes?e.readVarint()+e.pos:e.pos+1}function f(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function p(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(n=~(-e%4294967296),r=~(-e/4294967296),4294967295^n?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),h(n,r,t),d(r,t)}function h(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos]=127&e}function d(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}function v(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function m(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function g(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function y(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function b(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function _(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function x(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function w(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function O(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function E(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function S(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function j(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function A(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function k(e,t,n){var r="",i=t;while(i<n){var o,a,s,u=e[i],c=null,l=u>239?4:u>223?3:u>191?2:1;if(i+l>n)break;1===l?u<128&&(c=u):2===l?(o=e[i+1],128===(192&o)&&(c=(31&u)<<6|63&o,c<=127&&(c=null))):3===l?(o=e[i+1],a=e[i+2],128===(192&o)&&128===(192&a)&&(c=(15&u)<<12|(63&o)<<6|63&a,(c<=2047||c>=55296&&c<=57343)&&(c=null))):4===l&&(o=e[i+1],a=e[i+2],s=e[i+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s,(c<=65535||c>=1114112)&&(c=null))),null===c?(c=65533,l=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=l}return r}function C(e,t,n){return u.decode(e.subarray(t,n))}function T(e,t,n){for(var r,i,o=0;o<t.length;o++){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){r>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}i.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){n=n||this.length;while(this.pos<n){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=S(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=A(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=S(this.buf,this.pos)+S(this.buf,this.pos+4)*o;return this.pos+=8,e},readSFixed64:function(){var e=S(this.buf,this.pos)+A(this.buf,this.pos+4)*o;return this.pos+=8,e},readFloat:function(){var e=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return n=r[this.pos++],t=127&n,n<128?t:(n=r[this.pos++],t|=(127&n)<<7,n<128?t:(n=r[this.pos++],t|=(127&n)<<14,n<128?t:(n=r[this.pos++],t|=(127&n)<<21,n<128?t:(n=r[this.pos],t|=(15&n)<<28,c(t,e,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=s&&u?C(this.buf,t,e):k(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==i.Bytes)return e.push(this.readVarint(t));var n=l(this);e=e||[];while(this.pos<n)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==i.Bytes)return e.push(this.readSVarint());var t=l(this);e=e||[];while(this.pos<t)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==i.Bytes)return e.push(this.readBoolean());var t=l(this);e=e||[];while(this.pos<t)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==i.Bytes)return e.push(this.readFloat());var t=l(this);e=e||[];while(this.pos<t)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==i.Bytes)return e.push(this.readDouble());var t=l(this);e=e||[];while(this.pos<t)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==i.Bytes)return e.push(this.readFixed32());var t=l(this);e=e||[];while(this.pos<t)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==i.Bytes)return e.push(this.readSFixed32());var t=l(this);e=e||[];while(this.pos<t)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==i.Bytes)return e.push(this.readFixed64());var t=l(this);e=e||[];while(this.pos<t)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==i.Bytes)return e.push(this.readSFixed64());var t=l(this);e=e||[];while(this.pos<t)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===i.Varint)while(this.buf[this.pos++]>127);else if(t===i.Bytes)this.pos=this.readVarint()+this.pos;else if(t===i.Fixed32)this.pos+=4;else{if(t!==i.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){var t=this.length||16;while(t<this.pos+e)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),j(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),j(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),j(this.buf,-1&e,this.pos),j(this.buf,Math.floor(e*a),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),j(this.buf,-1&e,this.pos),j(this.buf,Math.floor(e*a),this.pos+4),this.pos+=8},writeVarint:function(e){e=+e||0,e>268435455||e<0?p(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=T(this.buf,e,this.pos);var n=this.pos-t;n>=128&&v(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),r.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),r.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&v(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,i.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,m,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,g,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,_,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,y,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,b,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,x,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,w,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,O,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,E,t)},writeBytesField:function(e,t){this.writeTag(e,i.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,i.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,i.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,i.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,i.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,i.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,i.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,i.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,i.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,i.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}}},ebwN:function(e,t,n){var r=n("Cwc5"),i=n("Kz5y"),o=r(i,"Map");e.exports=o},ekgI:function(e,t,n){var r=n("YESw"),i=Object.prototype,o=i.hasOwnProperty;function a(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}e.exports=a},ewvW:function(e,t,n){var r=n("HYAF");e.exports=function(e){return Object(r(e))}},"f/k9":function(e,t,n){"use strict";var r=n("MgzW"),i=n("q1tI");t.useSubscription=function(e){var t=e.getCurrentValue,n=e.subscribe,o=i.useState((function(){return{getCurrentValue:t,subscribe:n,value:t()}}));e=o[0];var a=o[1];return o=e.value,e.getCurrentValue===t&&e.subscribe===n||(o=t(),a({getCurrentValue:t,subscribe:n,value:o})),i.useDebugValue(o),i.useEffect((function(){function e(){if(!i){var e=t();a((function(i){return i.getCurrentValue!==t||i.subscribe!==n||i.value===e?i:r({},i,{value:e})}))}}var i=!1,o=n(e);return e(),function(){i=!0,o()}}),[t,n]),o}},f1zR:function(e,t,n){"use strict";n.r(t);var r=n("k1fw"),i=n("q1tI"),o=n.n(i),a=n("dEAq"),s=n("Zxc8"),u=n("nKUr"),c=o.a.memo((e=>{var t=e.demos,n=t["docs-imagelayer"].component;return Object(u["jsx"])(u["Fragment"],{children:Object(u["jsxs"])(o.a.Fragment,{children:[Object(u["jsx"])("div",{className:"markdown",children:Object(u["jsxs"])("h2",{id:"\u56fe\u7247\u56fe\u5c42",children:[Object(u["jsx"])(a["AnchorLink"],{to:"#\u56fe\u7247\u56fe\u5c42","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u56fe\u7247\u56fe\u5c42"]})}),Object(u["jsx"])(s["default"],Object(r["a"])(Object(r["a"])({},t["docs-imagelayer"].previewerProps),{},{children:Object(u["jsx"])(n,{})}))]})})}));t["default"]=e=>{var t=o.a.useContext(a["context"]),n=t.demos;return o.a.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&a["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),Object(u["jsx"])(c,{demos:n})}},f5p1:function(e,t,n){var r=n("2oRo"),i=n("iSVu"),o=r.WeakMap;e.exports="function"===typeof o&&/native code/.test(i(o))},fGT3:function(e,t,n){var r=n("4kuk"),i=n("Xi7e"),o=n("ebwN");function a(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}e.exports=a},fHMY:function(e,t,n){var r,i=n("glrk"),o=n("N+g0"),a=n("eDl+"),s=n("0BK2"),u=n("G+Rx"),c=n("zBJ4"),l=n("93I0"),f=">",p="<",h="prototype",d="script",v=l("IE_PROTO"),m=function(){},g=function(e){return p+d+f+e+p+"/"+d+f},y=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},b=function(){var e,t=c("iframe"),n="java"+d+":";return t.style.display="none",u.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(g("document.F=Object")),e.close(),e.F},_=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}_=r?y(r):b();var e=a.length;while(e--)delete _[h][a[e]];return _()};s[v]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(m[h]=i(e),n=new m,m[h]=null,n[v]=e):n=_(),void 0===t?n:o(n,t)}},fN96:function(e,t,n){"use strict";var r=n("I+eb"),i=n("ZUd8").charAt;r({target:"String",proto:!0},{at:function(e){return i(this,e)}})},"fR/l":function(e,t,n){var r=n("CH3K"),i=n("Z0cm");function o(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}e.exports=o},fVI1:function(e,t,n){},fXLg:function(e,t,n){"use strict";var r=n("glrk"),i=n("HAuM");e.exports=function(){for(var e=r(this),t=i(e.add),n=0,o=arguments.length;n<o;n++)t.call(e,arguments[n]);return e}},fbrv:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.getFunctionName=t.getBaseClassDependencyCount=t.getDependencies=void 0;var i=n("Yk9n"),o=n("MON2"),a=n("FV85"),s=n("xfSm"),u=n("ujMp");Object.defineProperty(t,"getFunctionName",{enumerable:!0,get:function(){return u.getFunctionName}});var c=n("dX1H");function l(e,t){var n=u.getFunctionName(t),r=f(e,n,t,!1);return r}function f(e,t,n,i){var a=e.getConstructorMetadata(n),s=a.compilerGeneratedMetadata;if(void 0===s){var u=o.MISSING_INJECTABLE_ANNOTATION+" "+t+".";throw new Error(u)}var c=a.userGeneratedMetadata,l=Object.keys(c),f=0===n.length&&l.length>0,p=l.length>n.length,v=f||p?l.length:n.length,m=h(i,t,s,c,v),g=d(e,n),y=r(r([],m),g);return y}function p(e,t,n,r,s){var u=s[e.toString()]||[],l=m(u),f=!0!==l.unmanaged,p=r[e],h=l.inject||l.multiInject;if(p=h||p,p instanceof i.LazyServiceIdentifer&&(p=p.unwrap()),f){var d=p===Object,v=p===Function,g=void 0===p,y=d||v||g;if(!t&&y){var b=o.MISSING_INJECT_ANNOTATION+" argument "+e+" in class "+n+".";throw new Error(b)}var _=new c.Target(a.TargetTypeEnum.ConstructorArgument,l.targetName,p);return _.metadata=u,_}return null}function h(e,t,n,r,i){for(var o=[],a=0;a<i;a++){var s=a,u=p(s,e,t,n,r);null!==u&&o.push(u)}return o}function d(e,t){for(var n=e.getPropertiesMetadata(t),i=[],o=Object.keys(n),s=0,u=o;s<u.length;s++){var l=u[s],f=n[l],p=m(n[l]),h=p.targetName||l,v=p.inject||p.multiInject,g=new c.Target(a.TargetTypeEnum.ClassProperty,h,v);g.metadata=f,i.push(g)}var y=Object.getPrototypeOf(t.prototype).constructor;if(y!==Object){var b=d(e,y);i=r(r([],i),b)}return i}function v(e,t){var n=Object.getPrototypeOf(t.prototype).constructor;if(n!==Object){var r=u.getFunctionName(n),i=f(e,r,n,!0),o=i.map((function(e){return e.metadata.filter((function(e){return e.key===s.UNMANAGED_TAG}))})),a=[].concat.apply([],o).length,c=i.length-a;return c>0?c:v(e,n)}return 0}function m(e){var t={};return e.forEach((function(e){t[e.key.toString()]=e.value})),{inject:t[s.INJECT_TAG],multiInject:t[s.MULTI_INJECT_TAG],targetName:t[s.NAME_TAG],unmanaged:t[s.UNMANAGED_TAG]}}t.getDependencies=l,t.getBaseClassDependencyCount=v},fdAy:function(e,t,n){"use strict";var r=n("I+eb"),i=n("ntOU"),o=n("4WOD"),a=n("0rvr"),s=n("1E5z"),u=n("kRJp"),c=n("busE"),l=n("tiKp"),f=n("xDBR"),p=n("P4y1"),h=n("rpNk"),d=h.IteratorPrototype,v=h.BUGGY_SAFARI_ITERATORS,m=l("iterator"),g="keys",y="values",b="entries",_=function(){return this};e.exports=function(e,t,n,l,h,x,w){i(n,t,l);var O,E,S,j=function(e){if(e===h&&M)return M;if(!v&&e in C)return C[e];switch(e){case g:return function(){return new n(this,e)};case y:return function(){return new n(this,e)};case b:return function(){return new n(this,e)}}return function(){return new n(this)}},A=t+" Iterator",k=!1,C=e.prototype,T=C[m]||C["@@iterator"]||h&&C[h],M=!v&&T||j(h),P="Array"==t&&C.entries||T;if(P&&(O=o(P.call(new e)),d!==Object.prototype&&O.next&&(f||o(O)===d||(a?a(O,d):"function"!=typeof O[m]&&u(O,m,_)),s(O,A,!0,!0),f&&(p[A]=_))),h==y&&T&&T.name!==y&&(k=!0,M=function(){return T.call(this)}),f&&!w||C[m]===M||u(C,m,M),p[t]=M,h)if(E={values:j(y),keys:x?M:j(g),entries:j(b)},w)for(S in E)(v||k||!(S in C))&&c(C,S,E[S]);else r({target:t,proto:!0,forced:v||k},E);return E}},fhKU:function(e,t,n){var r=n("2oRo"),i=n("WKiH").trim,o=n("WJkJ"),a=r.parseFloat,s=1/a(o+"-0")!==-1/0;e.exports=s?function(e){var t=i(String(e)),n=a(t);return 0===n&&"-"==t.charAt(0)?-0:n}:a},fmRc:function(e,t,n){var r=n("Xi7e"),i=n("77Zs"),o=n("L8xA"),a=n("gCq4"),s=n("VaNO"),u=n("0Cz8");function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype["delete"]=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=u,e.exports=c},foS9:function(e,t,n){},foSv:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,"a",(function(){return r}))},fsL8:function(e,t,n){var r=n("cDf5")["default"];function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports["default"]=e.exports;var t={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(M){f=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,o=Object.create(i.prototype),s=new k(r||[]);return a(o,"_invoke",{value:E(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(M){return{type:"throw",arg:M}}}t.wrap=p;var d={};function v(){}function m(){}function g(){}var y={};f(y,u,(function(){return this}));var b=Object.getPrototypeOf,_=b&&b(b(C([])));_&&_!==n&&o.call(_,u)&&(y=_);var x=g.prototype=v.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function n(i,a,s,u){var c=h(e[i],e,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var i;a(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}})}function E(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator["return"]&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=h(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function C(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:T}}function T(){return{value:void 0,done:!0}}return m.prototype=g,a(x,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:m,configurable:!0}),m.displayName=f(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,f(e,l,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},w(O.prototype),f(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new O(p(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(x),f(x,l,"Generator"),f(x,u,(function(){return this})),f(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},ftHG:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),i=n.n(r),o=n("dEAq"),a=n("H1Ra"),s=n("dMo/"),u=n("nKUr"),c=i.a.memo((e=>{e.demos;return Object(u["jsx"])(u["Fragment"],{children:Object(u["jsxs"])("div",{className:"markdown",children:[Object(u["jsxs"])("h2",{id:"\u4f7f\u7528",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#\u4f7f\u7528","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u4f7f\u7528"]}),Object(u["jsx"])("p",{children:"\u5728 React \u7248\u672c\u4e2d Mapbox \u548c\u9ad8\u5fb7\u5730\u56fe\u4f5c\u4e3a\u4e24\u4e2a\u7ec4\u4ef6\u5c01\u88c5\u7684\u3002"}),Object(u["jsx"])(a["a"],{code:"import { MapboxScene, AmapScene } from '@antv/l7-react';",lang:"javascript"}),Object(u["jsxs"])("h2",{id:"scene-props",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#scene-props","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"Scene Props"]}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"prop name"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"style"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Object"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"scene css \u6837\u5f0f"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"className"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"\u6837\u5f0f\u540d\u79f0"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"map"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"map option"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Required"})}),Object(u["jsxs"])("td",{children:["map option ",Object(u["jsx"])(o["AnchorLink"],{to:"#map-option",children:"\u5730\u56fe\u914d\u7f6e\u9879"})]})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"option"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"scene option"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"void"})}),Object(u["jsxs"])("td",{children:["scene option \u914d\u7f6e\u9879 ",Object(u["jsx"])(o["AnchorLink"],{to:"#scene-option",children:"\u8be6\u60c5"})]})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"onSceneLoaded"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Function"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"void"})}),Object(u["jsx"])("td",{children:"scene \u52a0\u8f7d\u56de\u8c03\u51fd\u6570"})]})]})]}),Object(u["jsxs"])("h3",{id:"\u9ad8\u5fb7\u5730\u56fe\u573a\u666f",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#\u9ad8\u5fb7\u5730\u56fe\u573a\u666f","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u9ad8\u5fb7\u5730\u56fe\u573a\u666f"]}),Object(u["jsx"])(a["a"],{code:"import { AMapScene } from '@antv/l7-react';\n<AMapScene\n  option={{}}\n  map={{\n    style: 'light',\n    center: [112, 20],\n    token: '',\n  }}\n/>;",lang:"jsx"}),Object(u["jsxs"])("h3",{id:"mapbox-\u5730\u56fe\u573a\u666f",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#mapbox-\u5730\u56fe\u573a\u666f","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"Mapbox \u5730\u56fe\u573a\u666f"]}),Object(u["jsx"])(a["a"],{code:"import { MapboxScene } from '@antv/l7-react';\n<MapboxScene\n  option={{}}\n  map={{\n    style: 'light',\n    center: [112, 20],\n    token: '',\n  }}\n/>;",lang:"jsx"}),Object(u["jsxs"])("h3",{id:"map-option",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#map-option","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"map option"]}),Object(u["jsx"])("p",{children:"\u5730\u56fe\u914d\u7f6e\u9879"}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"option"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"style"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"light"})}),Object(u["jsx"])("td",{children:"\u5730\u56fe\u6837\u5f0f `dark"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"token"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Required"})}),Object(u["jsx"])("td",{children:"\u5730\u56fe\u5bc6\u94a5\uff0c\u9700\u8981\u5e73\u53f0\u7533\u8bf7"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"plugin"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string[]"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsxs"])("td",{children:["\u9ad8\u5fb7\u5730\u56fe",Object(u["jsx"])(o["Link"],{to:"https://lbs.amap.com/api/javascript-api/guide/abc/plugins",children:"API \u63d2\u4ef6"})," ",Object(u["jsx"])("code",{children:"['AMap.ToolBar','AMap.Driving']"})]})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"center"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"number"})}),Object(u["jsx"])("td",{children:"null"}),Object(u["jsx"])("td",{children:"\u5730\u56fe\u4e2d\u5fc3\u70b9"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"pitch"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"number"})}),Object(u["jsx"])("td",{children:"0"}),Object(u["jsx"])("td",{children:"\u5730\u56fe\u503e\u89d2"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"rotation"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"number"})}),Object(u["jsx"])("td",{children:"0"}),Object(u["jsx"])("td",{children:"\u5730\u56fe\u65cb\u8f6c\u89d2"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"zoom"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"number"})}),Object(u["jsx"])("td",{children:"null"}),Object(u["jsx"])("td",{children:"\u5730\u56fe\u7f29\u653e\u7b49\u7ea7"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"maxZoom"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"number"})}),Object(u["jsx"])("td",{children:"0"}),Object(u["jsx"])("td",{children:"\u6700\u5927\u7f29\u653e\u7b49\u7ea7"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"minZoom"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"number"})}),Object(u["jsx"])("td",{children:"AMap 18 ,Mapbox 20"}),Object(u["jsx"])("td",{children:"\u6700\u5c0f\u7f29\u653e\u7b49\u7ea7"})]})]})]}),Object(u["jsxs"])("p",{children:["\u5176\u4ed6\u914d\u7f6e\u9879\u89c1\u5730\u56fe\u6587\u6863 \u9ad8\u5fb7\u5730\u56fe Map ",Object(u["jsx"])(o["Link"],{to:"https://lbs.amap.com/api/javascript-api/reference/map",children:"\u914d\u7f6e\u9879"})]}),Object(u["jsxs"])("p",{children:["Mapbox Map \u5730\u56fe\u914d\u7f6e\u9879 ",Object(u["jsx"])(o["Link"],{to:"https://docs.mapbox.com/mapbox-gl-js/api/#map",children:"\u914d\u7f6e\u9879"})]}),Object(u["jsx"])("p",{children:"\u5176\u4ed6\u914d\u7f6e\u9879\u548c\u5e95\u56fe\u4e00\u81f4"}),Object(u["jsxs"])("h3",{id:"scene-option",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#scene-option","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"scene option"]}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"option"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"logoPosition"}),Object(u["jsx"])("td",{children:"string"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"bottomleft"})}),Object(u["jsx"])("td",{children:"logo \u4f4d\u7f6e `bottomright"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"logoVisible"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"boolean"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"true"})}),Object(u["jsx"])("td",{children:"\u662f\u5426\u663e\u793a logo"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"antialias"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"boolean"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"true"})}),Object(u["jsx"])("td",{children:"\u662f\u5426\u5f00\u542f\u6297\u952f\u9f7f"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"preserveDrawingBuffer"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"boolean"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"false"})}),Object(u["jsx"])("td",{children:"\u662f\u5426\u4fdd\u7559\u7f13\u51b2\u533a\u6570\u636e"})]})]})]}),Object(u["jsxs"])("h3",{id:"\u83b7\u53d6-scene-\u5bf9\u8c61",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#\u83b7\u53d6-scene-\u5bf9\u8c61","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u83b7\u53d6 scene \u5bf9\u8c61"]}),Object(u["jsxs"])("h4",{id:"onsceneloaded",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#onsceneloaded","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"onSceneLoaded"]}),Object(u["jsx"])("p",{children:"onSceneLoaded \u56de\u8c03\u51fd\u6570\u80fd\u591f\u53d6\u5230 scene \u5bf9\u8c61"}),Object(u["jsxs"])("h4",{id:"context-api",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#context-api","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"Context API"]}),Object(u["jsx"])(a["a"],{code:"import { SceneContext } from '@antv/l7-react';\n<SceneContext.Consumer>\n  {scene => {\n    // use `scene` here\n  }}\n</SceneContext.Consumer>;",lang:"jsx"}),Object(u["jsxs"])("h2",{id:"\u5b50\u7ec4\u4ef6",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#\u5b50\u7ec4\u4ef6","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u5b50\u7ec4\u4ef6"]}),Object(u["jsxs"])("h3",{id:"loadimage",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#loadimage","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"LoadImage"]}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"prop name"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"name"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"\u56fe\u6807\u540d\u79f0"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"url"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"\u56fe\u6807 url"})]})]})]}),Object(u["jsx"])(a["a"],{code:'import LoadImage from \'@antv/l7-react\';\n<LoadImage name="marker" url="xxx.png" />;',lang:"jsx"}),Object(u["jsxs"])("h3",{id:"layer-\u7ec4\u4ef6",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#layer-\u7ec4\u4ef6","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"Layer \u7ec4\u4ef6"]}),Object(u["jsx"])("p",{children:"\u6bcf\u4e2a\u56fe\u5c42\u4f5c\u4e3a scene \u5b50\u7ec4\u4ef6\u6dfb\u52a0"}),Object(u["jsxs"])("h3",{id:"-\u4e8b\u4ef6\u7ec4\u4ef6",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#-\u4e8b\u4ef6\u7ec4\u4ef6","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\b \u4e8b\u4ef6\u7ec4\u4ef6"]}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"prop name"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"type"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsxs"])("td",{children:["\u4e8b\u4ef6\u7c7b\u578b ",Object(u["jsx"])(o["AnchorLink"],{to:"../scene/#%E5%9C%B0%E5%9B%BE%E4%BA%8B%E4%BB%B6",children:"\u8be6\u60c5"})]})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"handler"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Function"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"scene \u56de\u8c03\u51fd\u6570"})]})]})]}),Object(u["jsx"])(a["a"],{code:"import { SceneEvent, MapboxScene } from '@antv/l7-react';\n\n<MapboxScene>\n  <SceneEvent type=\"click\" handler={() => {}} />\n</MapboxScene>;",lang:"javascript"})]})})}));t["default"]=e=>{var t=i.a.useContext(o["context"]),n=t.demos;return i.a.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),Object(u["jsx"])(c,{demos:n})}},ftKO:function(e,t){var n="__lodash_hash_undefined__";function r(e){return this.__data__.set(e,n),this}e.exports=r},ftMj:function(e,t,n){var r=n("I+eb"),i=n("glrk"),o=n("hh1v"),a=n("UTVS"),s=n("0Dky"),u=n("m/L8"),c=n("Bs8V"),l=n("4WOD"),f=n("XGwC");function p(e,t,n){var r,s,h=arguments.length<4?e:arguments[3],d=c.f(i(e),t);if(!d){if(o(s=l(e)))return p(s,t,n,h);d=f(0)}if(a(d,"value")){if(!1===d.writable||!o(h))return!1;if(r=c.f(h,t)){if(r.get||r.set||!1===r.writable)return!1;r.value=n,u.f(h,t,r)}else u.f(h,t,f(0,n));return!0}return void 0!==d.set&&(d.set.call(h,n),!0)}var h=s((function(){var e=u.f({},"a",{configurable:!0});return!1!==Reflect.set(l(e),"a",1,e)}));r({target:"Reflect",stat:!0,forced:h},{set:p})},"g6v/":function(e,t,n){var r=n("0Dky");e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},gCq4:function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},gOCb:function(e,t,n){var r=n("dG/n");r("replace")},gXIK:function(e,t,n){var r=n("dG/n");r("toPrimitive")},gYJb:function(e,t,n){var r=n("I+eb"),i=n("p5mE"),o=n("0GbY"),a=n("fHMY"),s=function(){var e=o("Object","freeze");return e?e(a(null)):a(null)};r({global:!0},{compositeKey:function(){return i.apply(Object,arguments).get("object",s)}})},gdVl:function(e,t,n){"use strict";var r=n("ewvW"),i=n("I8vh"),o=n("UMSQ");e.exports=function(e){var t=r(this),n=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);while(c>s)t[s++]=e;return t}},gg6r:function(e,t,n){"use strict";var r=n("I+eb"),i=n("HAuM"),o=n("8GlL"),a=n("5mdu"),s=n("ImZN");r({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=o.f(t),r=n.resolve,u=n.reject,c=a((function(){var n=i(t.resolve),o=[],a=0,u=1;s(e,(function(e){var i=a++,s=!1;o.push(void 0),u++,n.call(t,e).then((function(e){s||(s=!0,o[i]={status:"fulfilled",value:e},--u||r(o))}),(function(e){s||(s=!0,o[i]={status:"rejected",reason:e},--u||r(o))}))})),--u||r(o)}));return c.error&&u(c.value),n.promise}})},glrk:function(e,t,n){var r=n("hh1v");e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},gql7:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),i=n.n(r),o=n("dEAq"),a=n("H1Ra"),s=n("nKUr"),u=i.a.memo((e=>{e.demos;return Object(s["jsx"])(s["Fragment"],{children:Object(s["jsxs"])("div",{className:"markdown",children:[Object(s["jsxs"])("h1",{id:"l7-react",children:[Object(s["jsx"])(o["AnchorLink"],{to:"#l7-react","aria-hidden":"true",tabIndex:-1,children:Object(s["jsx"])("span",{className:"icon icon-link"})}),"L7-React"]}),Object(s["jsx"])("p",{children:"L7-React \u5df2\u5168\u9762 \u5347\u7ea7\u4e3a LarkMap,\u4e0d\u5728\u8fdb\u884c\u7ef4\u62a4 \u3002 LarkMap \u7a7a\u95f4\u6570\u636e\u53ef\u89c6\u5206\u6790\u7ec4\u4ef6\u5e93"}),Object(s["jsxs"])("h2",{id:"larkmap",children:[Object(s["jsx"])(o["AnchorLink"],{to:"#larkmap","aria-hidden":"true",tabIndex:-1,children:Object(s["jsx"])("span",{className:"icon icon-link"})}),"LarkMap"]}),Object(s["jsx"])("p",{children:"\u65b0\u4e00\u4ee3 React \u5730\u56fe\u53ef\u89c6\u5206\u6790\u7ec4\u4ef6\u5e93\uff0c\u63d0\u4f9b\u4e30\u5bcc/\u9ad8\u6548/\u4e13\u4e1a/\u6613\u7528\u7684\u53ef\u89c6\u5316\u7ec4\u4ef6\uff0c\u4e00\u7ad9\u5f0f\u6ee1\u8db3\u5730\u7406\u53ef\u89c6\u5316\u9700\u6c42\u3001"}),Object(s["jsx"])("p",{children:Object(s["jsx"])(o["Link"],{to:"https://larkmap.antv.antgroup.com/",children:"LarkMap \u5b98\u7f51"})}),Object(s["jsxs"])("h2",{id:"getting-started",children:[Object(s["jsx"])(o["AnchorLink"],{to:"#getting-started","aria-hidden":"true",tabIndex:-1,children:Object(s["jsx"])("span",{className:"icon icon-link"})}),"Getting Started"]}),Object(s["jsx"])("p",{children:"Install dependencies,"}),Object(s["jsx"])(a["a"],{code:"$ npm i",lang:"bash"}),Object(s["jsx"])("p",{children:"Start the dev server,"}),Object(s["jsx"])(a["a"],{code:"$ npm start",lang:"bash"}),Object(s["jsx"])("p",{children:"Build documentation,"}),Object(s["jsx"])(a["a"],{code:"$ npm run docs:build",lang:"bash"}),Object(s["jsxs"])("p",{children:["Build library via ",Object(s["jsx"])("code",{children:"father-build"}),","]}),Object(s["jsx"])(a["a"],{code:"$ npm run build",lang:"bash"})]})})}));t["default"]=e=>{var t=i.a.useContext(o["context"]),n=t.demos;return i.a.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),Object(s["jsx"])(u,{demos:n})}},gvgV:function(e,t,n){"use strict";var r=n("67WC"),i=n("TWQb").includes,o=r.aTypedArray,a=r.exportTypedArrayMethod;a("includes",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},gzZq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingToSyntax=void 0;var r=n("MON2"),i=n("FV85"),o=n("D9lx"),a=n("LKzl"),s=function(){function e(e){this._binding=e}return e.prototype.to=function(e){return this._binding.type=i.BindingTypeEnum.Instance,this._binding.implementationType=e,new o.BindingInWhenOnSyntax(this._binding)},e.prototype.toSelf=function(){if("function"!==typeof this._binding.serviceIdentifier)throw new Error(""+r.INVALID_TO_SELF_VALUE);var e=this._binding.serviceIdentifier;return this.to(e)},e.prototype.toConstantValue=function(e){return this._binding.type=i.BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toDynamicValue=function(e){return this._binding.type=i.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new o.BindingInWhenOnSyntax(this._binding)},e.prototype.toConstructor=function(e){return this._binding.type=i.BindingTypeEnum.Constructor,this._binding.implementationType=e,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toFactory=function(e){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=e,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toFunction=function(e){if("function"!==typeof e)throw new Error(r.INVALID_FUNCTION_BINDING);var t=this.toConstantValue(e);return this._binding.type=i.BindingTypeEnum.Function,this._binding.scope=i.BindingScopeEnum.Singleton,t},e.prototype.toAutoFactory=function(e){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=function(t){var n=function(){return t.container.get(e)};return n},this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toProvider=function(e){return this._binding.type=i.BindingTypeEnum.Provider,this._binding.provider=e,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toService=function(e){this.toDynamicValue((function(t){return t.container.get(e)}))},e}();t.BindingToSyntax=s},h0XC:function(e,t){function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},h7MG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBindingDictionary=t.createMockRequest=t.plan=void 0;var r=n("doU7"),i=n("MON2"),o=n("FV85"),a=n("xfSm"),s=n("qK8v"),u=n("ujMp"),c=n("oy+k"),l=n("GXnB"),f=n("yMAV"),p=n("fbrv"),h=n("xiII"),d=n("dX1H");function v(e){return e._bindingDictionary}function m(e,t,n,r,i,o){var s=e?a.MULTI_INJECT_TAG:a.INJECT_TAG,u=new l.Metadata(s,n),c=new d.Target(t,r,n,u);if(void 0!==i){var f=new l.Metadata(i,o);c.metadata.push(f)}return c}function g(e,t,n,i,o){var a=_(n.container,o.serviceIdentifier),s=[];return a.length===r.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"===typeof o.serviceIdentifier&&e.getConstructorMetadata(o.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(o.serviceIdentifier).toSelf(),a=_(n.container,o.serviceIdentifier)),s=t?a:a.filter((function(e){var t=new h.Request(e.serviceIdentifier,n,i,e,o);return e.constraint(t)})),y(o.serviceIdentifier,s,o,n.container),s}function y(e,t,n,o){switch(t.length){case r.BindingCount.NoBindingsAvailable:if(n.isOptional())return t;var a=u.getServiceIdentifierAsString(e),s=i.NOT_REGISTERED;throw s+=u.listMetadataForTarget(a,n),s+=u.listRegisteredBindingsForServiceIdentifier(o,a,_),new Error(s);case r.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return t;case r.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return t;a=u.getServiceIdentifierAsString(e),s=i.AMBIGUOUS_MATCH+" "+a;throw s+=u.listRegisteredBindingsForServiceIdentifier(o,a,_),new Error(s)}}function b(e,t,n,r,a,s){var u,c;if(null===a){u=g(e,t,r,null,s),c=new h.Request(n,r,null,u,s);var l=new f.Plan(r,c);r.addPlan(l)}else u=g(e,t,r,a,s),c=a.addChildRequest(s.serviceIdentifier,u,s);u.forEach((function(t){var n=null;if(s.isArray())n=c.addChildRequest(t.serviceIdentifier,t,s);else{if(t.cache)return;n=c}if(t.type===o.BindingTypeEnum.Instance&&null!==t.implementationType){var a=p.getDependencies(e,t.implementationType);if(!r.container.options.skipBaseClassChecks){var u=p.getBaseClassDependencyCount(e,t.implementationType);if(a.length<u){var l=i.ARGUMENTS_LENGTH_MISMATCH(p.getFunctionName(t.implementationType));throw new Error(l)}}a.forEach((function(t){b(e,!1,t.serviceIdentifier,r,n,t)}))}}))}function _(e,t){var n=[],r=v(e);return r.hasKey(t)?n=r.get(t):null!==e.parent&&(n=_(e.parent,t)),n}function x(e,t,n,r,i,o,a,l){void 0===l&&(l=!1);var f=new c.Context(t),p=m(n,r,i,"",o,a);try{return b(e,l,i,f,null,p),f}catch(h){throw s.isStackOverflowExeption(h)&&f.plan&&u.circularDependencyToException(f.plan.rootRequest),h}}function w(e,t,n,r){var i=new d.Target(o.TargetTypeEnum.Variable,"",t,new l.Metadata(n,r)),a=new c.Context(e),s=new h.Request(t,a,null,[],i);return s}t.getBindingDictionary=v,t.plan=x,t.createMockRequest=w},hBjN:function(e,t,n){"use strict";var r=n("wE6v"),i=n("m/L8"),o=n("XGwC");e.exports=function(e,t,n){var a=r(t);a in e?i.f(e,a,o(0,n)):e[a]=n}},hByQ:function(e,t,n){"use strict";var r=n("14Sl"),i=n("glrk"),o=n("HYAF"),a=n("Ep9I"),s=n("FMNM");r("search",1,(function(e,t,n){return[function(t){var n=o(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var o=i(e),u=String(this),c=o.lastIndex;a(c,0)||(o.lastIndex=0);var l=s(o,u);return a(o.lastIndex,c)||(o.lastIndex=c),null===l?-1:l.index}]}))},hDyC:function(e,t,n){"use strict";var r=n("I+eb"),i=n("DMt2").end,o=n("mgyK");r({target:"String",proto:!0,forced:o},{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},hJnp:function(e,t,n){},"hKI/":function(e,t,n){(function(t){var n="Expected a function",r=NaN,i="[object Symbol]",o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt,l="object"==typeof t&&t&&t.Object===Object&&t,f="object"==typeof self&&self&&self.Object===Object&&self,p=l||f||Function("return this")(),h=Object.prototype,d=h.toString,v=Math.max,m=Math.min,g=function(){return p.Date.now()};function y(e,t,r){var i,o,a,s,u,c,l=0,f=!1,p=!1,h=!0;if("function"!=typeof e)throw new TypeError(n);function d(t){var n=i,r=o;return i=o=void 0,l=t,s=e.apply(r,n),s}function y(e){return l=e,u=setTimeout(w,t),f?d(e):s}function b(e){var n=e-c,r=e-l,i=t-n;return p?m(i,a-r):i}function x(e){var n=e-c,r=e-l;return void 0===c||n>=t||n<0||p&&r>=a}function w(){var e=g();if(x(e))return E(e);u=setTimeout(w,b(e))}function E(e){return u=void 0,h&&i?d(e):(i=o=void 0,s)}function S(){void 0!==u&&clearTimeout(u),l=0,i=c=o=u=void 0}function j(){return void 0===u?s:E(g())}function A(){var e=g(),n=x(e);if(i=arguments,o=this,c=e,n){if(void 0===u)return y(c);if(p)return u=setTimeout(w,t),d(c)}return void 0===u&&(u=setTimeout(w,t)),s}return t=O(t)||0,_(r)&&(f=!!r.leading,p="maxWait"in r,a=p?v(O(r.maxWait)||0,t):a,h="trailing"in r?!!r.trailing:h),A.cancel=S,A.flush=j,A}function b(e,t,r){var i=!0,o=!0;if("function"!=typeof e)throw new TypeError(n);return _(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),y(e,t,{leading:i,maxWait:t,trailing:o})}function _(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function x(e){return!!e&&"object"==typeof e}function w(e){return"symbol"==typeof e||x(e)&&d.call(e)==i}function O(e){if("number"==typeof e)return e;if(w(e))return r;if(_(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=_(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=s.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):a.test(e)?r:+e}e.exports=b}).call(this,n("IyRk"))},hMMk:function(e,t,n){var r=n("dOgj");r("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},"hOG+":function(e,t){(function(t){e.exports=function(){var e={311:function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}}},n={};function r(t){if(n[t])return n[t].exports;var i=n[t]={exports:{}},o=!0;try{e[t](i,i.exports,r),o=!1}finally{o&&delete n[t]}return i.exports}return r.ab=t+"/",r(311)}()}).call(this,"/")},hcok:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("0GbY"),a=n("glrk"),s=n("HAuM"),u=n("SEBh"),c=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{difference:function(e){var t=a(this),n=new(u(t,o("Set")))(t),r=s(n["delete"]);return c(e,(function(e){r.call(n,e)})),n}})},heNW:function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},hh1v:function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},hi0z:function(e,t,n){"use strict";(function(t,n){e.exports=n()})(0,(function(){function e(e){var r=[];return e.AMapUI&&r.push(t(e.AMapUI)),e.Loca&&r.push(n(e.Loca)),Promise.all(r)}function t(e){return new Promise((function(t,n){var s=[];if(e.plugins)for(var u=0;u<e.plugins.length;u+=1)-1==i.AMapUI.plugins.indexOf(e.plugins[u])&&s.push(e.plugins[u]);if(o.AMapUI===r.failed)n("\u524d\u6b21\u8bf7\u6c42 AMapUI \u5931\u8d25");else if(o.AMapUI===r.notload){o.AMapUI=r.loading,i.AMapUI.version=e.version||i.AMapUI.version,u=i.AMapUI.version;var c=document.body||document.head,l=document.createElement("script");l.type="text/javascript",l.src="https://webapi.amap.com/ui/"+u+"/main.js",l.onerror=function(e){o.AMapUI=r.failed,n("\u8bf7\u6c42 AMapUI \u5931\u8d25")},l.onload=function(){if(o.AMapUI=r.loaded,s.length)window.AMapUI.loadUI(s,(function(){for(var e=0,n=s.length;e<n;e++){var r=s[e].split("/").slice(-1)[0];window.AMapUI[r]=arguments[e]}for(t();a.AMapUI.length;)a.AMapUI.splice(0,1)[0]()}));else for(t();a.AMapUI.length;)a.AMapUI.splice(0,1)[0]()},c.appendChild(l)}else o.AMapUI===r.loaded?e.version&&e.version!==i.AMapUI.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c AMapUI \u6df7\u7528"):s.length?window.AMapUI.loadUI(s,(function(){for(var e=0,n=s.length;e<n;e++){var r=s[e].split("/").slice(-1)[0];window.AMapUI[r]=arguments[e]}t()})):t():e.version&&e.version!==i.AMapUI.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c AMapUI \u6df7\u7528"):a.AMapUI.push((function(e){e?n(e):s.length?window.AMapUI.loadUI(s,(function(){for(var e=0,n=s.length;e<n;e++){var r=s[e].split("/").slice(-1)[0];window.AMapUI[r]=arguments[e]}t()})):t()}))}))}function n(e){return new Promise((function(t,n){if(o.Loca===r.failed)n("\u524d\u6b21\u8bf7\u6c42 Loca \u5931\u8d25");else if(o.Loca===r.notload){o.Loca=r.loading,i.Loca.version=e.version||i.Loca.version;var s=i.Loca.version,u=i.AMap.version.startsWith("2"),c=s.startsWith("2");if(u&&!c||!u&&c)n("JSAPI \u4e0e Loca \u7248\u672c\u4e0d\u5bf9\u5e94\uff01\uff01");else{u=i.key,c=document.body||document.head;var l=document.createElement("script");l.type="text/javascript",l.src="https://webapi.amap.com/loca?v="+s+"&key="+u,l.onerror=function(e){o.Loca=r.failed,n("\u8bf7\u6c42 AMapUI \u5931\u8d25")},l.onload=function(){for(o.Loca=r.loaded,t();a.Loca.length;)a.Loca.splice(0,1)[0]()},c.appendChild(l)}}else o.Loca===r.loaded?e.version&&e.version!==i.Loca.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c Loca \u6df7\u7528"):t():e.version&&e.version!==i.Loca.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c Loca \u6df7\u7528"):a.Loca.push((function(e){e?n(e):n()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var r;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(r||(r={}));var i={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},o={AMap:r.notload,AMapUI:r.notload,Loca:r.notload},a={AMap:[],AMapUI:[],Loca:[]},s=[],u=function(e){"function"==typeof e&&(o.AMap===r.loaded?e(window.AMap):s.push(e))};return{load:function(t){return new Promise((function(n,a){if(o.AMap==r.failed)a("");else if(o.AMap==r.notload){var c=t.key,l=t.version,f=t.plugins;c?(window.AMap&&"lbs.amap.com"!==location.host&&a("\u7981\u6b62\u591a\u79cdAPI\u52a0\u8f7d\u65b9\u5f0f\u6df7\u7528"),i.key=c,i.AMap.version=l||i.AMap.version,i.AMap.plugins=f||i.AMap.plugins,o.AMap=r.loading,l=document.body||document.head,window.___onAPILoaded=function(i){if(delete window.___onAPILoaded,i)o.AMap=r.failed,a(i);else for(o.AMap=r.loaded,e(t).then((function(){n(window.AMap)}))["catch"](a);s.length;)s.splice(0,1)[0]()},f=document.createElement("script"),f.type="text/javascript",f.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+i.AMap.version+"&key="+c+"&plugin="+i.AMap.plugins.join(","),f.onerror=function(e){o.AMap=r.failed,a(e)},l.appendChild(f)):a("\u8bf7\u586b\u5199key")}else if(o.AMap==r.loaded)if(t.key&&t.key!==i.key)a("\u591a\u4e2a\u4e0d\u4e00\u81f4\u7684 key");else if(t.version&&t.version!==i.AMap.version)a("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c JSAPI \u6df7\u7528");else{if(c=[],t.plugins)for(l=0;l<t.plugins.length;l+=1)-1==i.AMap.plugins.indexOf(t.plugins[l])&&c.push(t.plugins[l]);c.length?window.AMap.plugin(c,(function(){e(t).then((function(){n(window.AMap)}))["catch"](a)})):e(t).then((function(){n(window.AMap)}))["catch"](a)}else if(t.key&&t.key!==i.key)a("\u591a\u4e2a\u4e0d\u4e00\u81f4\u7684 key");else if(t.version&&t.version!==i.AMap.version)a("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c JSAPI \u6df7\u7528");else{var p=[];if(t.plugins)for(l=0;l<t.plugins.length;l+=1)-1==i.AMap.plugins.indexOf(t.plugins[l])&&p.push(t.plugins[l]);u((function(){p.length?window.AMap.plugin(p,(function(){e(t).then((function(){n(window.AMap)}))["catch"](a)})):e(t).then((function(){n(window.AMap)}))["catch"](a)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,i={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},o={AMap:r.notload,AMapUI:r.notload,Loca:r.notload},a={AMap:[],AMapUI:[],Loca:[]}}}}))},hypo:function(e,t,n){var r=n("O0oS");function i(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}e.exports=i},i4U9:function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},i8i4:function(e,t,n){"use strict";function r(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}}r(),e.exports=n("yl30")},iCN3:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),i=n.n(r),o=n("dEAq"),a=n("H1Ra"),s=n("dMo/"),u=n("nKUr"),c=i.a.memo((e=>{e.demos;return Object(u["jsx"])(u["Fragment"],{children:Object(u["jsxs"])("div",{className:"markdown",children:[Object(u["jsxs"])("h2",{id:"popup-props",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#popup-props","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"Popup Props"]}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"prop name"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"option"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"popup \u914d\u7f6e\u9879"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"lnglat"}),Object(u["jsx"])("td",{children:"`Array"}),Object(u["jsx"])("td",{children:"Object`"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"children"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"React.ReactNode"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"\u5b50\u7ec4\u4ef6"})]})]})]}),Object(u["jsxs"])("h3",{id:"option",children:[Object(u["jsx"])(o["AnchorLink"],{to:"#option","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"option"]}),Object(u["jsxs"])(s["a"],{children:[Object(u["jsx"])("thead",{children:Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("th",{children:"prop name"}),Object(u["jsx"])("th",{children:"Type"}),Object(u["jsx"])("th",{children:"Default"}),Object(u["jsx"])("th",{children:"Description"})]})}),Object(u["jsxs"])("tbody",{children:[Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"closeButton"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"true"})}),Object(u["jsx"])("td",{children:"\u662f\u5426\u663e\u793a\u5173\u95ed\u6309\u94ae"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"closeOnClick"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"blue"})}),Object(u["jsx"])("td",{children:"\u70b9\u51fb\u662f\u5426\u5173\u95ed popup"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"anchor"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"center, top, top-left, top-right, bottom, bottom-left,bottom-right,left, right"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"offsets"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"Array[x,y]"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"popup \u4f4d\u7f6e\u504f\u79fb"})]}),Object(u["jsxs"])("tr",{children:[Object(u["jsx"])("td",{children:"className"}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"string"})}),Object(u["jsx"])("td",{children:Object(u["jsx"])("code",{children:"null"})}),Object(u["jsx"])("td",{children:"\u6837\u5f0f\u540d\u79f0"})]})]})]}),Object(u["jsx"])(a["a"],{code:"import { Popup } from '@antv/l7-react';\n<Popup option={{}} lnglat={[]} />;",lang:"jsx"}),Object(u["jsx"])("p",{children:Object(u["jsx"])(o["AnchorLink"],{to:"../../../examples/react/covid#covid_bubble",children:"popup \u4f7f\u7528\u5b8c\u6574 demo"})})]})})}));t["default"]=e=>{var t=i.a.useContext(o["context"]),n=t.demos;return i.a.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),Object(u["jsx"])(c,{demos:n})}},iIM6:function(e,t,n){"use strict";var r=n("g6v/"),i=n("RNIs"),o=n("ewvW"),a=n("UMSQ"),s=n("m/L8").f;r&&!("lastIndex"in[])&&(s(Array.prototype,"lastIndex",{configurable:!0,get:function(){var e=o(this),t=a(e.length);return 0==t?0:t-1}}),i("lastIndex"))},iNWh:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},iSVu:function(e,t,n){var r=n("xs3f"),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return i.call(e)}),e.exports=r.inspectSource},iegG:function(e,t){function n(e){var t=e.target||e.srcElement;t.__resizeRAF__&&cancelAnimationFrame(t.__resizeRAF__),t.__resizeRAF__=requestAnimationFrame((function(){var n=t.__resizeTrigger__,r=n&&n.__resizeListeners__;r&&r.forEach((function(t){t.call(n,e)}))}))}var r=function(e,t){var r,i=this,o=i.document,a=o.attachEvent;function s(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",n)}if("undefined"!==typeof navigator&&(r=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/)),!e.__resizeListeners__)if(e.__resizeListeners__=[],a)e.__resizeTrigger__=e,e.attachEvent("onresize",n);else{"static"===getComputedStyle(e).position&&(e.style.position="relative");var u=e.__resizeTrigger__=o.createElement("object");u.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),u.setAttribute("class","resize-sensor"),u.setAttribute("tabindex","-1"),u.setAttribute("title",""),u.__resizeElement__=e,u.onload=s,u.type="text/html",r&&e.appendChild(u),u.data="about:blank",r||e.appendChild(u)}e.__resizeListeners__.push(t)};e.exports="undefined"===typeof window?r:r.bind(window),e.exports.unbind=function(e,t){var r=document.attachEvent,i=e.__resizeListeners__||[];if(t){var o=i.indexOf(t);-1!==o&&i.splice(o,1)}else i=e.__resizeListeners__=[];if(!i.length){if(r)e.detachEvent("onresize",n);else if(e.__resizeTrigger__){var a=e.__resizeTrigger__.contentDocument,s=a&&a.defaultView;s&&(s.removeEventListener("resize",n),delete s.__resizeTrigger__),e.__resizeTrigger__=!e.removeChild(e.__resizeTrigger__)}delete e.__resizeListeners__}}},ihrJ:function(e,t,n){"use strict";var r=n("I+eb"),i=n("ImZN"),o=n("HAuM");r({target:"Map",stat:!0},{groupBy:function(e,t){var n=new this;o(t);var r=o(n.has),a=o(n.get),s=o(n.set);return i(e,(function(e){var i=t(e);r.call(n,i)?a.call(n,i).push(e):s.call(n,i,[e])})),n}})},ilnZ:function(e,t,n){var r=n("dOgj");r("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},inlA:function(e,t,n){"use strict";var r=n("I+eb"),i=n("Bs8V").f,o=n("UMSQ"),a=n("WjRb"),s=n("HYAF"),u=n("qxPZ"),c=n("xDBR"),l="".endsWith,f=Math.min,p=u("endsWith"),h=!c&&!p&&!!function(){var e=i(String.prototype,"endsWith");return e&&!e.writable}();r({target:"String",proto:!0,forced:!h&&!p},{endsWith:function(e){var t=String(s(this));a(e);var n=arguments.length>1?arguments[1]:void 0,r=o(t.length),i=void 0===n?r:f(o(n),r),u=String(e);return l?l.call(t,u,i):t.slice(i-u.length,i)===u}})},iqWW:function(e,t,n){"use strict";var r=n("ZUd8").charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},iqeF:function(e,t,n){var r=n("2oRo"),i=n("0Dky"),o=n("HH4o"),a=n("67WC").NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,u=r.Int8Array;e.exports=!a||!i((function(){u(1)}))||!i((function(){new u(-1)}))||!o((function(e){new u,new u(null),new u(1.5),new u(e)}),!0)||i((function(){return 1!==new u(new s(2),1,void 0).length}))},itsj:function(e,t){function n(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}e.exports=n},iwkZ:function(e,t,n){var r=n("dOgj");r("Int16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},"j+VE":function(e,t,n){n("bFeb")},"jIg/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiInject=void 0;var r=n("xfSm"),i=n("GXnB"),o=n("Ztfv");function a(e){return function(t,n,a){var s=new i.Metadata(r.MULTI_INJECT_TAG,e);"number"===typeof a?o.tagParameter(t,n,a,s):o.tagProperty(t,n,s)}}t.multiInject=a},jN4g:function(e,t,n){"use strict";var r=n("VTBJ"),i=n("q1tI"),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"},a=o,s=n("6VBw"),u=function(e,t){return i["createElement"](s["a"],Object(r["a"])(Object(r["a"])({},e),{},{ref:t,icon:a}))};u.displayName="CloseCircleFilled";t["a"]=i["forwardRef"](u)},jYx5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.optional=void 0;var r=n("xfSm"),i=n("GXnB"),o=n("Ztfv");function a(){return function(e,t,n){var a=new i.Metadata(r.OPTIONAL_TAG,!0);"number"===typeof n?o.tagParameter(e,t,n,a):o.tagProperty(e,t,a)}}t.optional=a},jeLo:function(e,t,n){var r=n("juv8"),i=n("mTTR");function o(e){return r(e,i(e))}e.exports=o},juv8:function(e,t,n){var r=n("MrPd"),i=n("hypo");function o(e,t,n,o){var a=!n;n||(n={});var s=-1,u=t.length;while(++s<u){var c=t[s],l=o?o(n[c],e[c],c,n,e):void 0;void 0===l&&(l=e[c]),a?i(n,c,l):r(n,c,l)}return n}e.exports=o},"k+1r":function(e,t,n){var r=n("QkVE");function i(e){var t=r(this,e)["delete"](e);return this.size-=t?1:0,t}e.exports=i},k1fw:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"a",(function(){return o}))},kCkZ:function(e,t,n){"use strict";var r=n("I+eb"),i=n("8GlL"),o=n("5mdu");r({target:"Promise",stat:!0},{try:function(e){var t=i.f(this),n=o(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}})},kOOl:function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},kRJp:function(e,t,n){var r=n("g6v/"),i=n("m/L8"),o=n("XGwC");e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},"kVK+":function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,p=n?-1:1,h=e[t+f];for(f+=p,o=h&(1<<-l)-1,h>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=p,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=p,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=c}return(h?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,d=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+f>=1?p/u:p*Math.pow(2,1-f),t*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+h]=255&a,h+=d,a/=256,c-=8);e[n+h-d]|=128*v}},kekF:function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},kmMV:function(e,t,n){"use strict";var r=n("rW0t"),i=n("n3/R"),o=RegExp.prototype.exec,a=String.prototype.replace,s=o,u=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),c=i.UNSUPPORTED_Y||i.BROKEN_CARET,l=void 0!==/()??/.exec("")[1],f=u||l||c;f&&(s=function(e){var t,n,i,s,f=this,p=c&&f.sticky,h=r.call(f),d=f.source,v=0,m=e;return p&&(h=h.replace("y",""),-1===h.indexOf("g")&&(h+="g"),m=String(e).slice(f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==e[f.lastIndex-1])&&(d="(?: "+d+")",m=" "+m,v++),n=new RegExp("^(?:"+d+")",h)),l&&(n=new RegExp("^"+d+"$(?!\\s)",h)),u&&(t=f.lastIndex),i=o.call(p?n:f,m),p?i?(i.input=i.input.slice(v),i[0]=i[0].slice(v),i.index=f.lastIndex,f.lastIndex+=i[0].length):f.lastIndex=0:u&&i&&(f.lastIndex=f.global?i.index+i[0].length:t),l&&i&&i.length>1&&a.call(i[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i}),e.exports=s},"l/vG":function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("0GbY"),a=n("glrk"),s=n("HAuM"),u=n("A2ZE"),c=n("SEBh"),l=n("Sssf"),f=n("ImZN");r({target:"Map",proto:!0,real:!0,forced:i},{filter:function(e){var t=a(this),n=l(t),r=u(e,arguments.length>1?arguments[1]:void 0,3),i=new(c(t,o("Map"))),p=s(i.set);return f(n,(function(e,n){r(n,e,t)&&p.call(i,e,n)}),void 0,!0,!0),i}})},l4aY:function(e,t,n){"use strict";function r(e,t){if(!e)return!1;if(e.contains)return e.contains(t);var n=t;while(n){if(n===e)return!0;n=n.parentNode}return!1}n.d(t,"a",(function(){return r}))},lEou:function(e,t,n){var r=n("dG/n");r("toStringTag")},lMq5:function(e,t,n){var r=n("0Dky"),i=/#|\.prototype\./,o=function(e,t){var n=s[a(e)];return n==c||n!=u&&("function"==typeof t?r(t):!!t)},a=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";e.exports=o},lSCD:function(e,t,n){var r=n("NykK"),i=n("GoyQ"),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",u="[object Proxy]";function c(e){if(!i(e))return!1;var t=r(e);return t==a||t==s||t==o||t==u}e.exports=c},lehK:function(e,t,n){var r=n("I+eb");r({target:"Math",stat:!0},{iaddh:function(e,t,n,r){var i=e>>>0,o=t>>>0,a=n>>>0;return o+(r>>>0)+((i&a|(i|a)&~(i+a>>>0))>>>31)|0}})},ljhN:function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},lmH4:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("0GbY"),a=n("glrk"),s=n("HAuM"),u=n("mh/w"),c=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{isSubsetOf:function(e){var t=u(this),n=a(e),r=n.has;return"function"!=typeof r&&(n=new(o("Set"))(e),r=s(n.has)),!c(t,(function(e){if(!1===r.call(n,e))return c.stop()}),void 0,!1,!0).stopped}})},"m+aA":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("q1tI"),i=n.n(r),o=n("i8i4"),a=n.n(o);function s(e){return e instanceof HTMLElement||e instanceof SVGElement}function u(e){return s(e)?e:e instanceof i.a.Component?a.a.findDOMNode(e):null}},"m/L8":function(e,t,n){var r=n("g6v/"),i=n("DPsx"),o=n("glrk"),a=n("wE6v"),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(o(e),t=a(t,!0),o(n),i)try{return s(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},m92n:function(e,t,n){var r=n("glrk");e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(a){var o=e["return"];throw void 0!==o&&r(o.call(e)),a}}},mBDr:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("q1tI");function i(e){var t=r["useRef"]();t.current=e;var n=r["useCallback"]((function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return n}},mGGf:function(e,t,n){"use strict";n("4mDm");var r=n("I+eb"),i=n("0GbY"),o=n("DTth"),a=n("busE"),s=n("4syw"),u=n("1E5z"),c=n("ntOU"),l=n("afO8"),f=n("GarU"),p=n("UTVS"),h=n("A2ZE"),d=n("9d/t"),v=n("glrk"),m=n("hh1v"),g=n("fHMY"),y=n("XGwC"),b=n("mh/w"),_=n("NaFW"),x=n("tiKp"),w=i("fetch"),O=i("Headers"),E=x("iterator"),S="URLSearchParams",j=S+"Iterator",A=l.set,k=l.getterFor(S),C=l.getterFor(j),T=/\+/g,M=Array(4),P=function(e){return M[e-1]||(M[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},I=function(e){try{return decodeURIComponent(e)}catch(t){return e}},R=function(e){var t=e.replace(T," "),n=4;try{return decodeURIComponent(t)}catch(r){while(n)t=t.replace(P(n--),I);return t}},L=/[!'()~]|%20/g,D={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},N=function(e){return D[e]},F=function(e){return encodeURIComponent(e).replace(L,N)},z=function(e,t){if(t){var n,r,i=t.split("&"),o=0;while(o<i.length)n=i[o++],n.length&&(r=n.split("="),e.push({key:R(r.shift()),value:R(r.join("="))}))}},B=function(e){this.entries.length=0,z(this.entries,e)},U=function(e,t){if(e<t)throw TypeError("Not enough arguments")},V=c((function(e,t){A(this,{type:j,iterator:b(k(e).entries),kind:t})}),"Iterator",(function(){var e=C(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),H=function(){f(this,H,S);var e,t,n,r,i,o,a,s,u,c=arguments.length>0?arguments[0]:void 0,l=this,h=[];if(A(l,{type:S,entries:h,updateURL:function(){},updateSearchParams:B}),void 0!==c)if(m(c))if(e=_(c),"function"===typeof e){t=e.call(c),n=t.next;while(!(r=n.call(t)).done){if(i=b(v(r.value)),o=i.next,(a=o.call(i)).done||(s=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");h.push({key:a.value+"",value:s.value+""})}}else for(u in c)p(c,u)&&h.push({key:u,value:c[u]+""});else z(h,"string"===typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},G=H.prototype;s(G,{append:function(e,t){U(arguments.length,2);var n=k(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){U(arguments.length,1);var t=k(this),n=t.entries,r=e+"",i=0;while(i<n.length)n[i].key===r?n.splice(i,1):i++;t.updateURL()},get:function(e){U(arguments.length,1);for(var t=k(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){U(arguments.length,1);for(var t=k(this).entries,n=e+"",r=[],i=0;i<t.length;i++)t[i].key===n&&r.push(t[i].value);return r},has:function(e){U(arguments.length,1);var t=k(this).entries,n=e+"",r=0;while(r<t.length)if(t[r++].key===n)return!0;return!1},set:function(e,t){U(arguments.length,1);for(var n,r=k(this),i=r.entries,o=!1,a=e+"",s=t+"",u=0;u<i.length;u++)n=i[u],n.key===a&&(o?i.splice(u--,1):(o=!0,n.value=s));o||i.push({key:a,value:s}),r.updateURL()},sort:function(){var e,t,n,r=k(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(e=o[n],t=0;t<n;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===n&&i.push(e)}r.updateURL()},forEach:function(e){var t,n=k(this).entries,r=h(e,arguments.length>1?arguments[1]:void 0,3),i=0;while(i<n.length)t=n[i++],r(t.value,t.key,this)},keys:function(){return new V(this,"keys")},values:function(){return new V(this,"values")},entries:function(){return new V(this,"entries")}},{enumerable:!0}),a(G,E,G.entries),a(G,"toString",(function(){var e,t=k(this).entries,n=[],r=0;while(r<t.length)e=t[r++],n.push(F(e.key)+"="+F(e.value));return n.join("&")}),{enumerable:!0}),u(H,S),r({global:!0,forced:!o},{URLSearchParams:H}),o||"function"!=typeof w||"function"!=typeof O||r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r,i=[e];return arguments.length>1&&(t=arguments[1],m(t)&&(n=t.body,d(n)===S&&(r=t.headers?new O(t.headers):new O,r.has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=g(t,{body:y(0,String(n)),headers:y(0,r)}))),i.push(t)),w.apply(this,i)}}),e.exports={URLSearchParams:H,getState:k}},mGKP:function(e,t,n){var r=n("EdiO");function i(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},mNvP:function(e,t,n){(function(e,t){var n;(function(n){(function(e){var r="object"===typeof t?t:"object"===typeof self?self:"object"===typeof this?this:Function("return this;")(),i=o(n);function o(e,t){return function(n,r){"function"!==typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}"undefined"===typeof r.Reflect?r.Reflect=n:i=o(r.Reflect,i),e(i)})((function(t){var n=Object.prototype.hasOwnProperty,r="function"===typeof Symbol,i=r&&"undefined"!==typeof Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=r&&"undefined"!==typeof Symbol.iterator?Symbol.iterator:"@@iterator",a="function"===typeof Object.create,s={__proto__:[]}instanceof Array,u=!a&&!s,c={create:a?function(){return oe(Object.create(null))}:s?function(){return oe({__proto__:null})}:function(){return oe({})},has:u?function(e,t){return n.call(e,t)}:function(e,t){return t in e},get:u?function(e,t){return n.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}},l=Object.getPrototypeOf(Function),f="object"===typeof e&&Object({NODE_ENV:"production"})&&"true"===Object({NODE_ENV:"production"})["REFLECT_METADATA_USE_MAP_POLYFILL"],p=f||"function"!==typeof Map||"function"!==typeof Map.prototype.entries?ne():Map,h=f||"function"!==typeof Set||"function"!==typeof Set.prototype.entries?re():Set,d=f||"function"!==typeof WeakMap?ie():WeakMap,v=new d;function m(e,t,n,r){if(N(n)){if(!q(e))throw new TypeError;if(!Y(t))throw new TypeError;return j(e,t)}if(!q(e))throw new TypeError;if(!B(t))throw new TypeError;if(!B(r)&&!N(r)&&!F(r))throw new TypeError;return F(r)&&(r=void 0),n=W(n),A(e,t,n,r)}function g(e,t){function n(n,r){if(!B(n))throw new TypeError;if(!N(r)&&!X(r))throw new TypeError;I(e,t,n,r)}return n}function y(e,t,n,r){if(!B(n))throw new TypeError;return N(r)||(r=W(r)),I(e,t,n,r)}function b(e,t,n){if(!B(t))throw new TypeError;return N(n)||(n=W(n)),C(e,t,n)}function _(e,t,n){if(!B(t))throw new TypeError;return N(n)||(n=W(n)),T(e,t,n)}function x(e,t,n){if(!B(t))throw new TypeError;return N(n)||(n=W(n)),M(e,t,n)}function w(e,t,n){if(!B(t))throw new TypeError;return N(n)||(n=W(n)),P(e,t,n)}function O(e,t){if(!B(e))throw new TypeError;return N(t)||(t=W(t)),R(e,t)}function E(e,t){if(!B(e))throw new TypeError;return N(t)||(t=W(t)),L(e,t)}function S(e,t,n){if(!B(t))throw new TypeError;N(n)||(n=W(n));var r=k(t,n,!1);if(N(r))return!1;if(!r["delete"](e))return!1;if(r.size>0)return!0;var i=v.get(t);return i["delete"](n),i.size>0||v["delete"](t),!0}function j(e,t){for(var n=e.length-1;n>=0;--n){var r=e[n],i=r(t);if(!N(i)&&!F(i)){if(!Y(i))throw new TypeError;t=i}}return t}function A(e,t,n,r){for(var i=e.length-1;i>=0;--i){var o=e[i],a=o(t,n,r);if(!N(a)&&!F(a)){if(!B(a))throw new TypeError;r=a}}return r}function k(e,t,n){var r=v.get(e);if(N(r)){if(!n)return;r=new p,v.set(e,r)}var i=r.get(t);if(N(i)){if(!n)return;i=new p,r.set(t,i)}return i}function C(e,t,n){var r=T(e,t,n);if(r)return!0;var i=te(t);return!F(i)&&C(e,i,n)}function T(e,t,n){var r=k(t,n,!1);return!N(r)&&H(r.has(e))}function M(e,t,n){var r=T(e,t,n);if(r)return P(e,t,n);var i=te(t);return F(i)?void 0:M(e,i,n)}function P(e,t,n){var r=k(t,n,!1);if(!N(r))return r.get(e)}function I(e,t,n,r){var i=k(n,r,!0);i.set(e,t)}function R(e,t){var n=L(e,t),r=te(e);if(null===r)return n;var i=R(r,t);if(i.length<=0)return n;if(n.length<=0)return i;for(var o=new h,a=[],s=0,u=n;s<u.length;s++){var c=u[s],l=o.has(c);l||(o.add(c),a.push(c))}for(var f=0,p=i;f<p.length;f++){c=p[f],l=o.has(c);l||(o.add(c),a.push(c))}return a}function L(e,t){var n=[],r=k(e,t,!1);if(N(r))return n;var i=r.keys(),o=$(i),a=0;while(1){var s=J(o);if(!s)return n.length=a,n;var u=Q(s);try{n[a]=u}catch(c){try{ee(o)}finally{throw c}}a++}}function D(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function N(e){return void 0===e}function F(e){return null===e}function z(e){return"symbol"===typeof e}function B(e){return"object"===typeof e?null!==e:"function"===typeof e}function U(e,t){switch(D(e)){case 0:return e;case 1:return e;case 2:return e;case 3:return e;case 4:return e;case 5:return e}var n=3===t?"string":5===t?"number":"default",r=K(e,i);if(void 0!==r){var o=r.call(e,n);if(B(o))throw new TypeError;return o}return V(e,"default"===n?"number":n)}function V(e,t){if("string"===t){var n=e.toString;if(Z(n)){var r=n.call(e);if(!B(r))return r}var i=e.valueOf;if(Z(i)){r=i.call(e);if(!B(r))return r}}else{i=e.valueOf;if(Z(i)){r=i.call(e);if(!B(r))return r}var o=e.toString;if(Z(o)){r=o.call(e);if(!B(r))return r}}throw new TypeError}function H(e){return!!e}function G(e){return""+e}function W(e){var t=U(e,3);return z(t)?t:G(t)}function q(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function Z(e){return"function"===typeof e}function Y(e){return"function"===typeof e}function X(e){switch(D(e)){case 3:return!0;case 4:return!0;default:return!1}}function K(e,t){var n=e[t];if(void 0!==n&&null!==n){if(!Z(n))throw new TypeError;return n}}function $(e){var t=K(e,o);if(!Z(t))throw new TypeError;var n=t.call(e);if(!B(n))throw new TypeError;return n}function Q(e){return e.value}function J(e){var t=e.next();return!t.done&&t}function ee(e){var t=e["return"];t&&t.call(e)}function te(e){var t=Object.getPrototypeOf(e);if("function"!==typeof e||e===l)return t;if(t!==l)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var i=r.constructor;return"function"!==typeof i||i===e?t:i}function ne(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype["throw"]=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype["return"]=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype["delete"]=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,i)},t.prototype.entries=function(){return new n(this._keys,this._values,a)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function i(e,t){return t}function a(e,t){return[e,t]}}function re(){return function(){function e(){this._map=new p}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype["delete"]=function(e){return this._map["delete"](e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}()}function ie(){var e=16,t=c.create(),r=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&c.has(t,this._key)},e.prototype.get=function(e){var t=o(e,!1);return void 0!==t?c.get(t,this._key):void 0},e.prototype.set=function(e,t){var n=o(e,!0);return n[this._key]=t,this},e.prototype["delete"]=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var e;do{e="@@WeakMap@@"+u()}while(c.has(t,e));return t[e]=!0,e}function o(e,t){if(!n.call(e,r)){if(!t)return;Object.defineProperty(e,r,{value:c.create()})}return e[r]}function a(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function s(e){return"function"===typeof Uint8Array?"undefined"!==typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!==typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):a(new Uint8Array(e),e):a(new Array(e),e)}function u(){var t=s(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<e;++r){var i=t[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}function oe(e){return e.__=void 0,delete e.__,e}t("decorate",m),t("metadata",g),t("defineMetadata",y),t("hasMetadata",b),t("hasOwnMetadata",_),t("getMetadata",x),t("getOwnMetadata",w),t("getMetadataKeys",O),t("getOwnMetadataKeys",E),t("deleteMetadata",S)}))})(n||(n={}))}).call(this,n("Q2Ig"),n("IyRk"))},mTN9:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),i=n.n(r),o=n("dEAq"),a=n("H1Ra"),s=n("nKUr"),u=i.a.memo((e=>{e.demos;return Object(s["jsx"])(s["Fragment"],{children:Object(s["jsxs"])("div",{className:"markdown",children:[Object(s["jsxs"])("h3",{id:"\u5b89\u88c5",children:[Object(s["jsx"])(o["AnchorLink"],{to:"#\u5b89\u88c5","aria-hidden":"true",tabIndex:-1,children:Object(s["jsx"])("span",{className:"icon icon-link"})}),"\u5b89\u88c5"]}),Object(s["jsx"])(a["a"],{code:"npm i @antv/l7-react",lang:"bash"}),Object(s["jsxs"])("h3",{id:"\u793a\u4f8b",children:[Object(s["jsx"])(o["AnchorLink"],{to:"#\u793a\u4f8b","aria-hidden":"true",tabIndex:-1,children:Object(s["jsx"])("span",{className:"icon icon-link"})}),"\u793a\u4f8b"]}),Object(s["jsx"])(a["a"],{code:"import { LineLayer, AMapScene } from '@antv/l7-react';\nexport default React.memo(function Map() {\n  const [data, setData] = React.useState();\n  React.useEffect(() => {\n    const fetchData = async () => {\n      const response = await fetch(\n        'https://gw.alipayobjects.com/os/basement_prod/32e1f3ab-8588-46cb-8a47-75afb692117d.json',\n      );\n      const raw = await response.json();\n      setData(raw);\n    };\n    fetchData();\n  }, []);\n  return (\n    <>\n      <AMapScene\n        map={{\n          center: [110.19382669582967, 50.258134],\n          pitch: 0,\n          style: 'dark',\n          zoom: 1,\n        }}\n        style={{\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n        }}\n      >\n        {data && (\n          <LineLayer\n            key={'2'}\n            source={{\n              data,\n            }}\n            size={{\n              values: 1,\n            }}\n            color={{\n              values: '#fff',\n            }}\n            shape={{\n              values: 'line',\n            }}\n            style={{\n              opacity: 1,\n            }}\n          />\n        )}\n      </AMapScene>\n    </>\n  );\n});",lang:"javascript"})]})})}));t["default"]=e=>{var t=i.a.useContext(o["context"]),n=t.demos;return i.a.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),Object(s["jsx"])(u,{demos:n})}},mTTR:function(e,t,n){var r=n("b80T"),i=n("QcOe"),o=n("MMmD");function a(e){return o(e)?r(e,!0):i(e)}e.exports=a},ma9I:function(e,t,n){"use strict";var r=n("I+eb"),i=n("0Dky"),o=n("6LWA"),a=n("hh1v"),s=n("ewvW"),u=n("UMSQ"),c=n("hBjN"),l=n("ZfDv"),f=n("Hd5f"),p=n("tiKp"),h=n("LQDL"),d=p("isConcatSpreadable"),v=9007199254740991,m="Maximum allowed index exceeded",g=h>=51||!i((function(){var e=[];return e[d]=!1,e.concat()[0]!==e})),y=f("concat"),b=function(e){if(!a(e))return!1;var t=e[d];return void 0!==t?!!t:o(e)},_=!g||!y;r({target:"Array",proto:!0,forced:_},{concat:function(e){var t,n,r,i,o,a=s(this),f=l(a,0),p=0;for(t=-1,r=arguments.length;t<r;t++)if(o=-1===t?a:arguments[t],b(o)){if(i=u(o.length),p+i>v)throw TypeError(m);for(n=0;n<i;n++,p++)n in o&&c(f,p,o[n])}else{if(p>=v)throw TypeError(m);c(f,p++,o)}return f.length=p,f}})},mc0g:function(e,t){function n(e){return function(t,n,r){var i=-1,o=Object(t),a=r(t),s=a.length;while(s--){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}e.exports=n},md7G:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("U8pU"),i=n("JX7q");function o(e,t){if(t&&("object"===Object(r["a"])(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Object(i["a"])(e)}},mdPL:function(e,t,n){(function(e){var r=n("WFqU"),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i,s=a&&r.process,u=function(){try{var e=o&&o.require&&o.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(t){}}();e.exports=u}).call(this,n("hOG+")(e))},mdU6:function(e,t,n){},mgyK:function(e,t,n){var r=n("NC/Y");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},"mh/w":function(e,t,n){var r=n("glrk"),i=n("NaFW");e.exports=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return r(t.call(e))}},miYZ:function(e,t,n){"use strict";n.r(t);n("EFp3"),n("bXwC")},mpbz:function(e,t,n){(function(t,n){e.exports=n()})(0,(function(){"use strict";function e(n,r,i,o,a,s){if(!(a-o<=i)){var u=o+a>>1;t(n,r,u,o,a,s%2),e(n,r,i,o,u-1,s+1),e(n,r,i,u+1,a,s+1)}}function t(e,r,i,o,a,s){while(a>o){if(a-o>600){var u=a-o+1,c=i-o+1,l=Math.log(u),f=.5*Math.exp(2*l/3),p=.5*Math.sqrt(l*f*(u-f)/u)*(c-u/2<0?-1:1),h=Math.max(o,Math.floor(i-c*f/u+p)),d=Math.min(a,Math.floor(i+(u-c)*f/u+p));t(e,r,i,h,d,s)}var v=r[2*i+s],m=o,g=a;n(e,r,o,i),r[2*a+s]>v&&n(e,r,o,a);while(m<g){n(e,r,m,g),m++,g--;while(r[2*m+s]<v)m++;while(r[2*g+s]>v)g--}r[2*o+s]===v?n(e,r,o,g):(g++,n(e,r,g,a)),g<=i&&(o=g+1),i<=g&&(a=g-1)}}function n(e,t,n,i){r(e,n,i),r(t,2*n,2*i),r(t,2*n+1,2*i+1)}function r(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function i(e,t,n,r,i,o,a){var s,u,c=[0,e.length-1,0],l=[];while(c.length){var f=c.pop(),p=c.pop(),h=c.pop();if(p-h<=a)for(var d=h;d<=p;d++)s=t[2*d],u=t[2*d+1],s>=n&&s<=i&&u>=r&&u<=o&&l.push(e[d]);else{var v=Math.floor((h+p)/2);s=t[2*v],u=t[2*v+1],s>=n&&s<=i&&u>=r&&u<=o&&l.push(e[v]);var m=(f+1)%2;(0===f?n<=s:r<=u)&&(c.push(h),c.push(v-1),c.push(m)),(0===f?i>=s:o>=u)&&(c.push(v+1),c.push(p),c.push(m))}}return l}function o(e,t,n,r,i,o){var s=[0,e.length-1,0],u=[],c=i*i;while(s.length){var l=s.pop(),f=s.pop(),p=s.pop();if(f-p<=o)for(var h=p;h<=f;h++)a(t[2*h],t[2*h+1],n,r)<=c&&u.push(e[h]);else{var d=Math.floor((p+f)/2),v=t[2*d],m=t[2*d+1];a(v,m,n,r)<=c&&u.push(e[d]);var g=(l+1)%2;(0===l?n-i<=v:r-i<=m)&&(s.push(p),s.push(d-1),s.push(g)),(0===l?n+i>=v:r+i>=m)&&(s.push(d+1),s.push(f),s.push(g))}}return u}function a(e,t,n,r){var i=e-n,o=t-r;return i*i+o*o}var s=function(e){return e[0]},u=function(e){return e[1]},c=function(t,n,r,i,o){void 0===n&&(n=s),void 0===r&&(r=u),void 0===i&&(i=64),void 0===o&&(o=Float64Array),this.nodeSize=i,this.points=t;for(var a=t.length<65536?Uint16Array:Uint32Array,c=this.ids=new a(t.length),l=this.coords=new o(2*t.length),f=0;f<t.length;f++)c[f]=f,l[2*f]=n(t[f]),l[2*f+1]=r(t[f]);e(c,l,i,0,c.length-1,0)};c.prototype.range=function(e,t,n,r){return i(this.ids,this.coords,e,t,n,r,this.nodeSize)},c.prototype.within=function(e,t,n){return o(this.ids,this.coords,e,t,n,this.nodeSize)};var l={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(e){return e}},f=Math.fround||function(e){return function(t){return e[0]=+t,e[0]}}(new Float32Array(1)),p=function(e){this.options=x(Object.create(l),e),this.trees=new Array(this.options.maxZoom+1)};function h(e,t,n,r,i){return{x:f(e),y:f(t),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function d(e,t){var n=e.geometry.coordinates,r=n[0],i=n[1];return{x:f(g(r)),y:f(y(i)),zoom:1/0,index:t,parentId:-1}}function v(e){return{type:"Feature",id:e.id,properties:m(e),geometry:{type:"Point",coordinates:[b(e.x),_(e.y)]}}}function m(e){var t=e.numPoints,n=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return x(x({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function g(e){return e/360+.5}function y(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function b(e){return 360*(e-.5)}function _(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function x(e,t){for(var n in t)e[n]=t[n];return e}function w(e){return e.x}function O(e){return e.y}return p.prototype.load=function(e){var t=this.options,n=t.log,r=t.minZoom,i=t.maxZoom,o=t.nodeSize;n&&console.time("total time");var a="prepare "+e.length+" points";n&&console.time(a),this.points=e;for(var s=[],u=0;u<e.length;u++)e[u].geometry&&s.push(d(e[u],u));this.trees[i+1]=new c(s,w,O,o,Float32Array),n&&console.timeEnd(a);for(var l=i;l>=r;l--){var f=+Date.now();s=this._cluster(s,l),this.trees[l]=new c(s,w,O,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",l,s.length,+Date.now()-f)}return n&&console.timeEnd("total time"),this},p.prototype.getClusters=function(e,t){var n=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),i=180===e[2]?180:((e[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],t),s=this.getClusters([-180,r,i,o],t);return a.concat(s)}for(var u=this.trees[this._limitZoom(t)],c=u.range(g(n),y(o),g(i),y(r)),l=[],f=0,p=c;f<p.length;f+=1){var h=p[f],d=u.points[h];l.push(d.numPoints?v(d):this.points[d.index])}return l},p.prototype.getChildren=function(e){var t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[t];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o.x,o.y,a),u=[],c=0,l=s;c<l.length;c+=1){var f=l[c],p=i.points[f];p.parentId===e&&u.push(p.numPoints?v(p):this.points[p.index])}if(0===u.length)throw new Error(r);return u},p.prototype.getLeaves=function(e,t,n){t=t||10,n=n||0;var r=[];return this._appendLeaves(r,e,t,n,0),r},p.prototype.getTile=function(e,t,n){var r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),o=this.options,a=o.extent,s=o.radius,u=s/a,c=(n-u)/i,l=(n+1+u)/i,f={features:[]};return this._addTileFeatures(r.range((t-u)/i,c,(t+1+u)/i,l),r.points,t,n,i,f),0===t&&this._addTileFeatures(r.range(1-u/i,c,1,l),r.points,i,n,i,f),t===i-1&&this._addTileFeatures(r.range(0,c,u/i,l),r.points,-1,n,i,f),f.features.length?f:null},p.prototype.getClusterExpansionZoom=function(e){var t=this._getOriginZoom(e)-1;while(t<=this.options.maxZoom){var n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t},p.prototype._appendLeaves=function(e,t,n,r,i){for(var o=this.getChildren(t),a=0,s=o;a<s.length;a+=1){var u=s[a],c=u.properties;if(c&&c.cluster?i+c.point_count<=r?i+=c.point_count:i=this._appendLeaves(e,c.cluster_id,n,r,i):i<r?i++:e.push(u),e.length===n)break}return i},p.prototype._addTileFeatures=function(e,t,n,r,i,o){for(var a=0,s=e;a<s.length;a+=1){var u=s[a],c=t[u],l=c.numPoints,f=void 0,p=void 0,h=void 0;if(l)f=m(c),p=c.x,h=c.y;else{var d=this.points[c.index];f=d.properties,p=g(d.geometry.coordinates[0]),h=y(d.geometry.coordinates[1])}var v={type:1,geometry:[[Math.round(this.options.extent*(p*i-n)),Math.round(this.options.extent*(h*i-r))]],tags:f},b=void 0;l?b=c.id:this.options.generateId?b=c.index:this.points[c.index].id&&(b=this.points[c.index].id),void 0!==b&&(v.id=b),o.features.push(v)}},p.prototype._limitZoom=function(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))},p.prototype._cluster=function(e,t){for(var n=[],r=this.options,i=r.radius,o=r.extent,a=r.reduce,s=r.minPoints,u=i/(o*Math.pow(2,t)),c=0;c<e.length;c++){var l=e[c];if(!(l.zoom<=t)){l.zoom=t;for(var f=this.trees[t+1],p=f.within(l.x,l.y,u),d=l.numPoints||1,v=d,m=0,g=p;m<g.length;m+=1){var y=g[m],b=f.points[y];b.zoom>t&&(v+=b.numPoints||1)}if(v>d&&v>=s){for(var _=l.x*d,x=l.y*d,w=a&&d>1?this._map(l,!0):null,O=(c<<5)+(t+1)+this.points.length,E=0,S=p;E<S.length;E+=1){var j=S[E],A=f.points[j];if(!(A.zoom<=t)){A.zoom=t;var k=A.numPoints||1;_+=A.x*k,x+=A.y*k,A.parentId=O,a&&(w||(w=this._map(l,!0)),a(w,this._map(A)))}}l.parentId=O,n.push(h(_/v,x/v,O,v,w))}else if(n.push(l),v>1)for(var C=0,T=p;C<T.length;C+=1){var M=T[C],P=f.points[M];P.zoom<=t||(P.zoom=t,n.push(P))}}}return n},p.prototype._getOriginId=function(e){return e-this.points.length>>5},p.prototype._getOriginZoom=function(e){return(e-this.points.length)%32},p.prototype._map=function(e,t){if(e.numPoints)return t?x({},e.properties):e.properties;var n=this.points[e.index].properties,r=this.options.map(n);return t&&r===n?x({},r):r},p}))},"mv/X":function(e,t,n){var r=n("ljhN"),i=n("MMmD"),o=n("wJg7"),a=n("GoyQ");function s(e,t,n){if(!a(n))return!1;var s=typeof t;return!!("number"==s?i(n)&&o(t,n.length):"string"==s&&t in n)&&r(n[t],e)}e.exports=s},n2J3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unmanaged=void 0;var r=n("xfSm"),i=n("GXnB"),o=n("Ztfv");function a(){return function(e,t,n){var a=new i.Metadata(r.UNMANAGED_TAG,!0);o.tagParameter(e,t,n,a)}}t.unmanaged=a},"n3/R":function(e,t,n){"use strict";var r=n("0Dky");function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},n5b4:function(e,t,n){var r=n("I+eb"),i=n("2oRo"),o=n("tXUg"),a=n("xrYK"),s=i.process,u="process"==a(s);r({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(e){var t=u&&s.domain;o(t?t.bind(e):e)}})},n5pg:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("A2ZE"),s=n("Sssf"),u=n("ImZN");r({target:"Map",proto:!0,real:!0,forced:i},{findKey:function(e){var t=o(this),n=s(t),r=a(e,arguments.length>1?arguments[1]:void 0,3);return u(n,(function(e,n){if(r(n,e,t))return u.stop(e)}),void 0,!0,!0).result}})},nIe3:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("0GbY"),a=n("glrk"),s=n("HAuM"),u=n("A2ZE"),c=n("SEBh"),l=n("Sssf"),f=n("ImZN");r({target:"Map",proto:!0,real:!0,forced:i},{mapKeys:function(e){var t=a(this),n=l(t),r=u(e,arguments.length>1?arguments[1]:void 0,3),i=new(c(t,o("Map"))),p=s(i.set);return f(n,(function(e,n){p.call(i,r(n,e,t),n)}),void 0,!0,!0),i}})},nKUr:function(e,t,n){"use strict";e.exports=n("0x2o")},nLCz:function(e,t,n){"use strict";function r(){var e=i(n("q1tI"));return r=function(){return e},e}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var o=r()["default"].createContext({config:{mode:"doc",title:"",navs:{},menus:{},locales:[],repository:{branch:"master"},theme:{}},meta:{title:""},menu:[],nav:[],base:"",routes:[],apis:{},demos:{}});t["default"]=o},nmnc:function(e,t,n){var r=n("Kz5y"),i=r.Symbol;e.exports=i},nmq7:function(e,t,n){"use strict";var r=n("0jNN"),i=Object.prototype.hasOwnProperty,o=Array.isArray,a={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},u=function(e,t){return e&&"string"===typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},c="utf8=%26%2310003%3B",l="utf8=%E2%9C%93",f=function(e,t){var n,f={},p=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,h=t.parameterLimit===1/0?void 0:t.parameterLimit,d=p.split(t.delimiter,h),v=-1,m=t.charset;if(t.charsetSentinel)for(n=0;n<d.length;++n)0===d[n].indexOf("utf8=")&&(d[n]===l?m="utf-8":d[n]===c&&(m="iso-8859-1"),v=n,n=d.length);for(n=0;n<d.length;++n)if(n!==v){var g,y,b=d[n],_=b.indexOf("]="),x=-1===_?b.indexOf("="):_+1;-1===x?(g=t.decoder(b,a.decoder,m,"key"),y=t.strictNullHandling?null:""):(g=t.decoder(b.slice(0,x),a.decoder,m,"key"),y=r.maybeMap(u(b.slice(x+1),t),(function(e){return t.decoder(e,a.decoder,m,"value")}))),y&&t.interpretNumericEntities&&"iso-8859-1"===m&&(y=s(y)),b.indexOf("[]=")>-1&&(y=o(y)?[y]:y),i.call(f,g)?f[g]=r.combine(f[g],y):f[g]=y}return f},p=function(e,t,n,r){for(var i=r?t:u(t,n),o=e.length-1;o>=0;--o){var a,s=e[o];if("[]"===s&&n.parseArrays)a=[].concat(i);else{a=n.plainObjects?Object.create(null):{};var c="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,l=parseInt(c,10);n.parseArrays||""!==c?!isNaN(l)&&s!==c&&String(l)===c&&l>=0&&n.parseArrays&&l<=n.arrayLimit?(a=[],a[l]=i):"__proto__"!==c&&(a[c]=i):a={0:i}}i=a}return i},h=function(e,t,n,r){if(e){var o=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,u=n.depth>0&&a.exec(o),c=u?o.slice(0,u.index):o,l=[];if(c){if(!n.plainObjects&&i.call(Object.prototype,c)&&!n.allowPrototypes)return;l.push(c)}var f=0;while(n.depth>0&&null!==(u=s.exec(o))&&f<n.depth){if(f+=1,!n.plainObjects&&i.call(Object.prototype,u[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(u[1])}return u&&l.push("["+o.slice(u.index)+"]"),p(l,t,n,r)}},d=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!==typeof e.decoder)throw new TypeError("Decoder has to be a function.");if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t="undefined"===typeof e.charset?a.charset:e.charset;return{allowDots:"undefined"===typeof e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:"boolean"===typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,allowSparse:"boolean"===typeof e.allowSparse?e.allowSparse:a.allowSparse,arrayLimit:"number"===typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"===typeof e.comma?e.comma:a.comma,decoder:"function"===typeof e.decoder?e.decoder:a.decoder,delimiter:"string"===typeof e.delimiter||r.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"===typeof e.depth||!1===e.depth?+e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"===typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"===typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"===typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}};e.exports=function(e,t){var n=d(t);if(""===e||null===e||"undefined"===typeof e)return n.plainObjects?Object.create(null):{};for(var i="string"===typeof e?f(e,n):e,o=n.plainObjects?Object.create(null):{},a=Object.keys(i),s=0;s<a.length;++s){var u=a[s],c=h(u,i[u],n,"string"===typeof e);o=r.merge(o,c,n)}return!0===n.allowSparse?o:r.compact(o)}},ntOU:function(e,t,n){"use strict";var r=n("rpNk").IteratorPrototype,i=n("fHMY"),o=n("XGwC"),a=n("1E5z"),s=n("P4y1"),u=function(){return this};e.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=i(r,{next:o(1,n)}),a(e,c,!1,!0),s[c]=u,e}},nvu9:function(e,t,n){"use strict";t.__esModule=!0,t.getParameters=void 0;var r=n("e9O8");t.getParameters=r.getParameters},ny8l:function(e,t,n){var r=n("I+eb");r({target:"Math",stat:!0},{signbit:function(e){return(e=+e)==e&&0==e?1/e==-1/0:e<0}})},o0kM:function(e,t,n){"use strict";var r=n("dmwd")["default"],i=n("5wUe")["default"];function o(){var e=n("q1tI");return o=function(){return e},e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t=c(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){var t=l(e,"string");return"symbol"===typeof t?t:String(t)}function l(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function f(e,t){return m(e)||v(e,t)||h(e,t)||p()}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){if(e){if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function m(e){if(Array.isArray(e))return e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var g,y="https://riddle.alibaba-inc.com/riddles/define",b=function(){var e=(0,o().useState)(Boolean(g)),t=f(e,2),n=t[0],r=t[1];return(0,o().useEffect)((function(){if(void 0===g){var e=document.createElement("img");setTimeout((function(){e.src="",e.remove()}),200),e.onload=function(){g=!0,r(!0),e.remove()},e.src="https://private-alipayobjects.alipay.com/alipay-rmsdeploy-image/rmsportal/RKuAiriJqrUhyqW.png"}}),[]),n};function _(e){var t=e.sources._.tsx||e.sources._.jsx;return t=t.replace(/^/,"import ReactDOM from 'react-dom';\n").replace("export default","const DumiDemo =").concat("\nReactDOM.render(<DumiDemo />, mountNode);"),t}var x=function(e){var t=(0,o().useState)(),n=f(t,2),a=n[0],u=n[1],c=b();return(0,o().useEffect)((function(){if(e&&c&&1===Object.keys(e.sources).length){var t,n=document.createElement("form"),o=document.createElement("input");return n.method="POST",n.target="_blank",n.style.display="none",n.action=y,n.appendChild(o),n.setAttribute("data-demo",e.title||""),o.name="data",o.value=JSON.stringify({title:e.titlle,js:_(e),css:Object.entries(e.dependencies).filter((function(e){var t=i(e,2),n=t[1];return n.css})).map((function(e){var t=i(e,2),n=t[0],r=t[1],o=r.version,a=r.css;return"@import '~".concat(a.replace(new RegExp("^(".concat(n,")")),"$1@".concat(o)),"';")})).concat(e.background?"body {\n  background: ".concat(e.background,";\n}"):"").join("\n"),json:JSON.stringify({description:e.description,dependencies:Object.entries(e.dependencies).reduce((function(e,t){var n=i(t,2),o=n[0],a=n[1].version;return s(s({},e),{},r({},o,a))}),{"react-dom":(null===(t=e.dependencies.react)||void 0===t?void 0:t.version)||"latest"})},null,2)}),document.body.appendChild(n),u((function(){return function(){return n.submit()}})),function(){return n.remove()}}}),[e,c]),a};t["default"]=x},o0o1:function(e,t,n){var r=n("fsL8")();e.exports=r;try{regeneratorRuntime=r}catch(i){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},o46R:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("U8pU");function i(e,t){if("object"!==Object(r["a"])(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==Object(r["a"])(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function o(e){var t=i(e,"string");return"symbol"===Object(r["a"])(t)?t:String(t)}},"oHi+":function(e,t,n){var r=n("ewvW"),i=n("UMSQ"),o=n("NaFW"),a=n("6VoE"),s=n("A2ZE"),u=n("67WC").aTypedArrayConstructor;e.exports=function(e){var t,n,c,l,f,p,h=r(e),d=arguments.length,v=d>1?arguments[1]:void 0,m=void 0!==v,g=o(h);if(void 0!=g&&!a(g)){f=g.call(h),p=f.next,h=[];while(!(l=p.call(f)).done)h.push(l.value)}for(m&&d>2&&(v=s(v,arguments[2],2)),n=i(h.length),c=new(u(this))(n),t=0;n>t;t++)c[t]=m?v(h[t],t):h[t];return c}},oNNP:function(e,t,n){"use strict";var r=n("D3zA");e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},oaX6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.targetName=void 0;var r=n("xfSm"),i=n("GXnB"),o=n("Ztfv");function a(e){return function(t,n,a){var s=new i.Metadata(r.NAME_TAG,e);o.tagParameter(t,n,a,s)}}t.targetName=a},ofBz:function(e,t,n){"use strict";var r=n("I+eb"),i=n("ntOU"),o=n("HYAF"),a=n("UMSQ"),s=n("HAuM"),u=n("glrk"),c=n("xrYK"),l=n("ROdP"),f=n("rW0t"),p=n("kRJp"),h=n("0Dky"),d=n("tiKp"),v=n("SEBh"),m=n("iqWW"),g=n("afO8"),y=n("xDBR"),b=d("matchAll"),_="RegExp String",x=_+" Iterator",w=g.set,O=g.getterFor(x),E=RegExp.prototype,S=E.exec,j="".matchAll,A=!!j&&!h((function(){"a".matchAll(/./)})),k=function(e,t){var n,r=e.exec;if("function"==typeof r){if(n=r.call(e,t),"object"!=typeof n)throw TypeError("Incorrect exec result");return n}return S.call(e,t)},C=i((function(e,t,n,r){w(this,{type:x,regexp:e,string:t,global:n,unicode:r,done:!1})}),_,(function(){var e=O(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,n=e.string,r=k(t,n);return null===r?{value:void 0,done:e.done=!0}:e.global?(""==String(r[0])&&(t.lastIndex=m(n,a(t.lastIndex),e.unicode)),{value:r,done:!1}):(e.done=!0,{value:r,done:!1})})),T=function(e){var t,n,r,i,o,s,c=u(this),l=String(e);return t=v(c,RegExp),n=c.flags,void 0===n&&c instanceof RegExp&&!("flags"in E)&&(n=f.call(c)),r=void 0===n?"":String(n),i=new t(t===RegExp?c.source:c,r),o=!!~r.indexOf("g"),s=!!~r.indexOf("u"),i.lastIndex=a(c.lastIndex),new C(i,l,o,s)};r({target:"String",proto:!0,forced:A},{matchAll:function(e){var t,n,r,i,a=o(this);if(null!=e){if(l(e)&&(t=String(o("flags"in E?e.flags:f.call(e))),!~t.indexOf("g")))throw TypeError("`.matchAll` does not allow non-global regexes");if(A)return j.apply(a,arguments);if(r=e[b],void 0===r&&y&&"RegExp"==c(e)&&(r=T),null!=r)return s(r).call(e,a)}else if(A)return j.apply(a,arguments);return n=String(a),i=new RegExp(e,"g"),y?T.call(i,n):i[b](n)}}),y||b in E||p(E,b,T)},or5M:function(e,t,n){var r=n("1hJj"),i=n("QoRX"),o=n("xYSL"),a=1,s=2;function u(e,t,n,u,c,l){var f=n&a,p=e.length,h=t.length;if(p!=h&&!(f&&h>p))return!1;var d=l.get(e),v=l.get(t);if(d&&v)return d==t&&v==e;var m=-1,g=!0,y=n&s?new r:void 0;l.set(e,t),l.set(t,e);while(++m<p){var b=e[m],_=t[m];if(u)var x=f?u(_,b,m,t,e,l):u(b,_,m,e,t,l);if(void 0!==x){if(x)continue;g=!1;break}if(y){if(!i(t,(function(e,t){if(!o(y,t)&&(b===e||c(b,e,n,u,l)))return y.push(t)}))){g=!1;break}}else if(b!==_&&!c(b,_,n,u,l)){g=!1;break}}return l["delete"](e),l["delete"](t),g}e.exports=u},or9q:function(e,t,n){"use strict";var r=n("6LWA"),i=n("UMSQ"),o=n("A2ZE"),a=function(e,t,n,s,u,c,l,f){var p,h=u,d=0,v=!!l&&o(l,f,3);while(d<s){if(d in n){if(p=v?v(n[d],d,t):n[d],c>0&&r(p))h=a(e,t,p,i(p.length),h,c-1)-1;else{if(h>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[h]=p}h++}d++}return h};e.exports=a},"oy+k":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;var r=n("d9O0"),i=function(){function e(e){this.id=r.id(),this.container=e}return e.prototype.addPlan=function(e){this.plan=e},e.prototype.setCurrentRequest=function(e){this.currentRequest=e},e}();t.Context=i},p532:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("/qmn"),a=n("0Dky"),s=n("0GbY"),u=n("SEBh"),c=n("zfnd"),l=n("busE"),f=!!o&&a((function(){o.prototype["finally"].call({then:function(){}},(function(){}))}));r({target:"Promise",proto:!0,real:!0,forced:f},{finally:function(e){var t=u(this,s("Promise")),n="function"==typeof e;return this.then(n?function(n){return c(t,e()).then((function(){return n}))}:e,n?function(n){return c(t,e()).then((function(){throw n}))}:e)}}),i||"function"!=typeof o||o.prototype["finally"]||l(o.prototype,"finally",s("Promise").prototype["finally"])},p5mE:function(e,t,n){var r=n("Tskq"),i=n("ENF9"),o=n("fHMY"),a=n("hh1v"),s=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=o(null)};s.prototype.get=function(e,t){return this[e]||(this[e]=t())},s.prototype.next=function(e,t,n){var o=n?this.objectsByIndex[e]||(this.objectsByIndex[e]=new i):this.primitives||(this.primitives=new r),a=o.get(t);return a||o.set(t,a=new s),a};var u=new s;e.exports=function(){var e,t,n=u,r=arguments.length;for(e=0;e<r;e++)a(t=arguments[e])&&(n=n.next(e,t,!0));if(this===Object&&n===u)throw TypeError("Composite keys must contain a non-primitive component");for(e=0;e<r;e++)a(t=arguments[e])||(n=n.next(e,t,!1));return n}},pDQq:function(e,t,n){"use strict";var r=n("I+eb"),i=n("I8vh"),o=n("ppGB"),a=n("UMSQ"),s=n("ewvW"),u=n("ZfDv"),c=n("hBjN"),l=n("Hd5f"),f=n("rkAj"),p=l("splice"),h=f("splice",{ACCESSORS:!0,0:0,1:2}),d=Math.max,v=Math.min,m=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!p||!h},{splice:function(e,t){var n,r,l,f,p,h,y=s(this),b=a(y.length),_=i(e,b),x=arguments.length;if(0===x?n=r=0:1===x?(n=0,r=b-_):(n=x-2,r=v(d(o(t),0),b-_)),b+n-r>m)throw TypeError(g);for(l=u(y,r),f=0;f<r;f++)p=_+f,p in y&&c(l,f,y[p]);if(l.length=r,n<r){for(f=_;f<b-r;f++)p=f+r,h=f+n,p in y?y[h]=y[p]:delete y[h];for(f=b;f>b-r+n;f--)delete y[f-1]}else if(n>r)for(f=b-r;f>_;f--)p=f+r-1,h=f+n-1,p in y?y[h]=y[p]:delete y[h];for(f=0;f<n;f++)y[f+_]=arguments[f+2];return y.length=b-r+n,l}})},pFRH:function(e,t,n){var r=n("cvCv"),i=n("O0oS"),o=n("zZ0H"),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=a},pNMO:function(e,t,n){"use strict";var r=n("I+eb"),i=n("2oRo"),o=n("0GbY"),a=n("xDBR"),s=n("g6v/"),u=n("STAE"),c=n("/b8u"),l=n("0Dky"),f=n("UTVS"),p=n("6LWA"),h=n("hh1v"),d=n("glrk"),v=n("ewvW"),m=n("/GqU"),g=n("wE6v"),y=n("XGwC"),b=n("fHMY"),_=n("33Wh"),x=n("JBy8"),w=n("BX/b"),O=n("dBg+"),E=n("Bs8V"),S=n("m/L8"),j=n("0eef"),A=n("kRJp"),k=n("busE"),C=n("VpIT"),T=n("93I0"),M=n("0BK2"),P=n("kOOl"),I=n("tiKp"),R=n("5Tg+"),L=n("dG/n"),D=n("1E5z"),N=n("afO8"),F=n("tycR").forEach,z=T("hidden"),B="Symbol",U="prototype",V=I("toPrimitive"),H=N.set,G=N.getterFor(B),W=Object[U],q=i.Symbol,Z=o("JSON","stringify"),Y=E.f,X=S.f,K=w.f,$=j.f,Q=C("symbols"),J=C("op-symbols"),ee=C("string-to-symbol-registry"),te=C("symbol-to-string-registry"),ne=C("wks"),re=i.QObject,ie=!re||!re[U]||!re[U].findChild,oe=s&&l((function(){return 7!=b(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=Y(W,t);r&&delete W[t],X(e,t,n),r&&e!==W&&X(W,t,r)}:X,ae=function(e,t){var n=Q[e]=b(q[U]);return H(n,{type:B,tag:e,description:t}),s||(n.description=t),n},se=c?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof q},ue=function(e,t,n){e===W&&ue(J,t,n),d(e);var r=g(t,!0);return d(n),f(Q,r)?(n.enumerable?(f(e,z)&&e[z][r]&&(e[z][r]=!1),n=b(n,{enumerable:y(0,!1)})):(f(e,z)||X(e,z,y(1,{})),e[z][r]=!0),oe(e,r,n)):X(e,r,n)},ce=function(e,t){d(e);var n=m(t),r=_(n).concat(de(n));return F(r,(function(t){s&&!fe.call(n,t)||ue(e,t,n[t])})),e},le=function(e,t){return void 0===t?b(e):ce(b(e),t)},fe=function(e){var t=g(e,!0),n=$.call(this,t);return!(this===W&&f(Q,t)&&!f(J,t))&&(!(n||!f(this,t)||!f(Q,t)||f(this,z)&&this[z][t])||n)},pe=function(e,t){var n=m(e),r=g(t,!0);if(n!==W||!f(Q,r)||f(J,r)){var i=Y(n,r);return!i||!f(Q,r)||f(n,z)&&n[z][r]||(i.enumerable=!0),i}},he=function(e){var t=K(m(e)),n=[];return F(t,(function(e){f(Q,e)||f(M,e)||n.push(e)})),n},de=function(e){var t=e===W,n=K(t?J:m(e)),r=[];return F(n,(function(e){!f(Q,e)||t&&!f(W,e)||r.push(Q[e])})),r};if(u||(q=function(){if(this instanceof q)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=P(e),n=function(e){this===W&&n.call(J,e),f(this,z)&&f(this[z],t)&&(this[z][t]=!1),oe(this,t,y(1,e))};return s&&ie&&oe(W,t,{configurable:!0,set:n}),ae(t,e)},k(q[U],"toString",(function(){return G(this).tag})),k(q,"withoutSetter",(function(e){return ae(P(e),e)})),j.f=fe,S.f=ue,E.f=pe,x.f=w.f=he,O.f=de,R.f=function(e){return ae(I(e),e)},s&&(X(q[U],"description",{configurable:!0,get:function(){return G(this).description}}),a||k(W,"propertyIsEnumerable",fe,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:q}),F(_(ne),(function(e){L(e)})),r({target:B,stat:!0,forced:!u},{for:function(e){var t=String(e);if(f(ee,t))return ee[t];var n=q(t);return ee[t]=n,te[n]=t,n},keyFor:function(e){if(!se(e))throw TypeError(e+" is not a symbol");if(f(te,e))return te[e]},useSetter:function(){ie=!0},useSimple:function(){ie=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!s},{create:le,defineProperty:ue,defineProperties:ce,getOwnPropertyDescriptor:pe}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:he,getOwnPropertySymbols:de}),r({target:"Object",stat:!0,forced:l((function(){O.f(1)}))},{getOwnPropertySymbols:function(e){return O.f(v(e))}}),Z){var ve=!u||l((function(){var e=q();return"[null]"!=Z([e])||"{}"!=Z({a:e})||"{}"!=Z(Object(e))}));r({target:"JSON",stat:!0,forced:ve},{stringify:function(e,t,n){var r,i=[e],o=1;while(arguments.length>o)i.push(arguments[o++]);if(r=t,(h(t)||void 0!==e)&&!se(e))return p(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!se(t))return t}),i[1]=t,Z.apply(null,i)}})}q[U][V]||A(q[U],V,q[U].valueOf),D(q,B),M[z]=!0},pSRY:function(e,t,n){var r=n("QkVE");function i(e){return r(this,e).has(e)}e.exports=i},pevA:function(e,t,n){"use strict";var r=n("I+eb"),i=n("g6v/"),o=n("JiZb"),a=n("HAuM"),s=n("glrk"),u=n("hh1v"),c=n("GarU"),l=n("m/L8").f,f=n("kRJp"),p=n("4syw"),h=n("mh/w"),d=n("ImZN"),v=n("RN6c"),m=n("tiKp"),g=n("afO8"),y=m("observable"),b=g.get,_=g.set,x=function(e){return null==e?void 0:a(e)},w=function(e){var t=e.cleanup;if(t){e.cleanup=void 0;try{t()}catch(n){v(n)}}},O=function(e){return void 0===e.observer},E=function(e,t){if(!i){e.closed=!0;var n=t.subscriptionObserver;n&&(n.closed=!0)}t.observer=void 0},S=function(e,t){var n,r=_(this,{cleanup:void 0,observer:s(e),subscriptionObserver:void 0});i||(this.closed=!1);try{(n=x(e.start))&&n.call(e,this)}catch(l){v(l)}if(!O(r)){var o=r.subscriptionObserver=new j(this);try{var u=t(o),c=u;null!=u&&(r.cleanup="function"===typeof u.unsubscribe?function(){c.unsubscribe()}:a(u))}catch(l){return void o.error(l)}O(r)&&w(r)}};S.prototype=p({},{unsubscribe:function(){var e=b(this);O(e)||(E(this,e),w(e))}}),i&&l(S.prototype,"closed",{configurable:!0,get:function(){return O(b(this))}});var j=function(e){_(this,{subscription:e}),i||(this.closed=!1)};j.prototype=p({},{next:function(e){var t=b(b(this).subscription);if(!O(t)){var n=t.observer;try{var r=x(n.next);r&&r.call(n,e)}catch(i){v(i)}}},error:function(e){var t=b(this).subscription,n=b(t);if(!O(n)){var r=n.observer;E(t,n);try{var i=x(r.error);i?i.call(r,e):v(e)}catch(o){v(o)}w(n)}},complete:function(){var e=b(this).subscription,t=b(e);if(!O(t)){var n=t.observer;E(e,t);try{var r=x(n.complete);r&&r.call(n)}catch(i){v(i)}w(t)}}}),i&&l(j.prototype,"closed",{configurable:!0,get:function(){return O(b(b(this).subscription))}});var A=function(e){c(this,A,"Observable"),_(this,{subscriber:a(e)})};p(A.prototype,{subscribe:function(e){var t=arguments.length;return new S("function"===typeof e?{next:e,error:t>1?arguments[1]:void 0,complete:t>2?arguments[2]:void 0}:u(e)?e:{},b(this).subscriber)}}),p(A,{from:function(e){var t="function"===typeof this?this:A,n=x(s(e)[y]);if(n){var r=s(n.call(e));return r.constructor===t?r:new t((function(e){return r.subscribe(e)}))}var i=h(e);return new t((function(e){d(i,(function(t){if(e.next(t),e.closed)return d.stop()}),void 0,!1,!0),e.complete()}))},of:function(){var e="function"===typeof this?this:A,t=arguments.length,n=new Array(t),r=0;while(r<t)n[r]=arguments[r++];return new e((function(e){for(var r=0;r<t;r++)if(e.next(n[r]),e.closed)return;e.complete()}))}}),f(A.prototype,y,(function(){return this})),r({global:!0},{Observable:A}),o("Observable")},pjDv:function(e,t,n){var r=n("I+eb"),i=n("TfTi"),o=n("HH4o"),a=!o((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:a},{from:i})},pkCn:function(e,t,n){"use strict";var r=n("0Dky");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},ppGB:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},pv2x:function(e,t,n){var r=n("I+eb"),i=n("0GbY"),o=n("HAuM"),a=n("glrk"),s=n("0Dky"),u=i("Reflect","apply"),c=Function.apply,l=!s((function(){u((function(){}))}));r({target:"Reflect",stat:!0,forced:l},{apply:function(e,t,n){return o(e),a(n),u?u(e,t,n):c.call(e,t,n)}})},pwpV:function(e,t,n){},q1tI:function(e,t,n){"use strict";e.exports=n("viRO")},q3YX:function(e){e.exports=JSON.parse('{"menus":{"en-US":{"*":[{"path":"/","title":"L7-React","meta":{"order":null}},{"path":"/start","title":"\u5feb\u901f\u5f00\u59cb","meta":{"order":0}},{"path":"/scene","title":"Scene \u7ec4\u4ef6","meta":{"order":1}},{"path":"/layer","title":"Layer \u7ec4\u4ef6","meta":{"order":2}},{"path":"/marker","title":"Marker \u7ec4\u4ef6","meta":{"order":3}},{"path":"/control","title":"Control \u5730\u56fe\u7ec4\u4ef6","meta":{"order":4}},{"path":"/popup","title":"Popup \u7ec4\u4ef6","meta":{"order":4}},{"title":"Demo","path":"/demo","meta":{},"children":[{"path":"/demo","title":"Hello react!","meta":{}},{"path":"/demo/image-layer","title":"\u56fe\u7247\u56fe\u5c42","meta":{}},{"path":"/demo/layer","title":"\u56fe\u5c42\u63a7\u4ef6","meta":{}},{"path":"/demo/marker","title":"Marker","meta":{}},{"path":"/demo/point-layer","title":"\u6d4b\u8bd5 blend","meta":{}},{"path":"/demo/popup","title":"\u4fe1\u606f\u6846","meta":{}}]}]}},"locales":[{"name":"en-US","label":"English"}],"navs":{},"title":"L7React","logo":"https://gw.alipayobjects.com/mdn/rms_08cc33/afts/img/A*aoGdSISB9soAAAAAAAAAAAAAARQnAQ","mode":"doc","repository":{"url":"https://github.com/antvis/L7-react","branch":"master"},"theme":{}}')},qHiR:function(e,t,n){},qK8v:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isStackOverflowExeption=void 0;var r=n("MON2");function i(e){return e instanceof RangeError||e.message===r.STACK_OVERFLOW}t.isStackOverflowExeption=i},qLMh:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,o=Object.create(i.prototype),a=new S(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var p={};function h(){}function d(){}function v(){}var m={};c(m,a,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(j([])));y&&y!==t&&n.call(y,a)&&(m=y);var b=v.prototype=h.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function i(o,a,s,u){var c=f(e[o],e,a);if("throw"!==c.type){var l=c.arg,p=l.value;return p&&"object"==r(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){i("next",e,s,u)}),(function(e){i("throw",e,s,u)})):t.resolve(p).then((function(e){l.value=e,s(l)}),(function(e){return i("throw",e,s,u)}))}u(c.arg)}var o;this._invoke=function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator["return"]&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return d.prototype=v,c(b,"constructor",v),c(v,"constructor",d),d.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},_(x.prototype),c(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new x(l(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(b),c(b,u,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}n.d(t,"a",(function(){return i}))},qT12:function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol["for"],i=r?Symbol["for"]("react.element"):60103,o=r?Symbol["for"]("react.portal"):60106,a=r?Symbol["for"]("react.fragment"):60107,s=r?Symbol["for"]("react.strict_mode"):60108,u=r?Symbol["for"]("react.profiler"):60114,c=r?Symbol["for"]("react.provider"):60109,l=r?Symbol["for"]("react.context"):60110,f=r?Symbol["for"]("react.async_mode"):60111,p=r?Symbol["for"]("react.concurrent_mode"):60111,h=r?Symbol["for"]("react.forward_ref"):60112,d=r?Symbol["for"]("react.suspense"):60113,v=r?Symbol["for"]("react.suspense_list"):60120,m=r?Symbol["for"]("react.memo"):60115,g=r?Symbol["for"]("react.lazy"):60116,y=r?Symbol["for"]("react.block"):60121,b=r?Symbol["for"]("react.fundamental"):60117,_=r?Symbol["for"]("react.responder"):60118,x=r?Symbol["for"]("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type,e){case f:case p:case a:case u:case s:case d:return e;default:switch(e=e&&e.$$typeof,e){case l:case h:case g:case m:case c:return e;default:return t}}case o:return t}}}function O(e){return w(e)===p}t.AsyncMode=f,t.ConcurrentMode=p,t.ContextConsumer=l,t.ContextProvider=c,t.Element=i,t.ForwardRef=h,t.Fragment=a,t.Lazy=g,t.Memo=m,t.Portal=o,t.Profiler=u,t.StrictMode=s,t.Suspense=d,t.isAsyncMode=function(e){return O(e)||w(e)===f},t.isConcurrentMode=O,t.isContextConsumer=function(e){return w(e)===l},t.isContextProvider=function(e){return w(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===o},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===s},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===p||e===u||e===s||e===d||e===v||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===l||e.$$typeof===h||e.$$typeof===b||e.$$typeof===_||e.$$typeof===x||e.$$typeof===y)},t.typeOf=w},qY7S:function(e,t,n){"use strict";var r=n("HAuM"),i=n("A2ZE"),o=n("ImZN");e.exports=function(e){var t,n,a,s,u=arguments.length,c=u>1?arguments[1]:void 0;return r(this),t=void 0!==c,t&&r(c),void 0==e?new this:(n=[],t?(a=0,s=i(c,u>2?arguments[2]:void 0,2),o(e,(function(e){n.push(s(e,a++))}))):o(e,n.push,n),new this(n))}},qYE9:function(e,t){e.exports="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView},qZTm:function(e,t,n){var r=n("fR/l"),i=n("MvSz"),o=n("7GkX");function a(e){return r(e,o,i)}e.exports=a},qaHo:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("A2ZE"),s=n("WGBp"),u=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{some:function(e){var t=o(this),n=s(t),r=a(e,arguments.length>1?arguments[1]:void 0,3);return u(n,(function(e){if(r(e,e,t))return u.stop()}),void 0,!1,!0).stopped}})},qc1c:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("HAuM"),s=n("ImZN");r({target:"Map",proto:!0,real:!0,forced:i},{merge:function(e){var t=o(this),n=a(t.set),r=0;while(r<arguments.length)s(arguments[r++],n,t,!0);return t}})},qgGA:function(e,t,n){var r=n("I+eb"),i=n("eDxR"),o=n("glrk"),a=i.toKey,s=i.set;r({target:"Reflect",stat:!0},{metadata:function(e,t){return function(n,r){s(e,t,o(n),a(r))}}})},qhky:function(e,t,n){"use strict";(function(e){var t=n("17x9"),r=n.n(t),i=n("8+s/"),o=n.n(i),a=n("bmMU"),s=n.n(a),u=n("q1tI"),c=n.n(u),l=n("MgzW"),f=n.n(l),p={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},h={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},d=(Object.keys(h).map((function(e){return h[e]})),{CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"}),v={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},m={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},g=Object.keys(v).reduce((function(e,t){return e[v[t]]=t,e}),{}),y=[h.NOSCRIPT,h.SCRIPT,h.STYLE],b="data-react-helmet",_="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},S=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},j=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t},A=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!1===t?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},k=function(e){var t=I(e,h.TITLE),n=I(e,m.TITLE_TEMPLATE);if(n&&t)return n.replace(/%s/g,(function(){return Array.isArray(t)?t.join(""):t}));var r=I(e,m.DEFAULT_TITLE);return t||r||void 0},C=function(e){return I(e,m.ON_CHANGE_CLIENT_STATE)||function(){}},T=function(e,t){return t.filter((function(t){return"undefined"!==typeof t[e]})).map((function(t){return t[e]})).reduce((function(e,t){return O({},e,t)}),{})},M=function(e,t){return t.filter((function(e){return"undefined"!==typeof e[h.BASE]})).map((function(e){return e[h.BASE]})).reverse().reduce((function(t,n){if(!t.length)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=r[i],a=o.toLowerCase();if(-1!==e.indexOf(a)&&n[a])return t.concat(n)}return t}),[])},P=function(e,t,n){var r={};return n.filter((function(t){return!!Array.isArray(t[e])||("undefined"!==typeof t[e]&&z("Helmet: "+e+' should be of type "Array". Instead found type "'+_(t[e])+'"'),!1)})).map((function(t){return t[e]})).reverse().reduce((function(e,n){var i={};n.filter((function(e){for(var n=void 0,o=Object.keys(e),a=0;a<o.length;a++){var s=o[a],u=s.toLowerCase();-1===t.indexOf(u)||n===d.REL&&"canonical"===e[n].toLowerCase()||u===d.REL&&"stylesheet"===e[u].toLowerCase()||(n=u),-1===t.indexOf(s)||s!==d.INNER_HTML&&s!==d.CSS_TEXT&&s!==d.ITEM_PROP||(n=s)}if(!n||!e[n])return!1;var c=e[n].toLowerCase();return r[n]||(r[n]={}),i[n]||(i[n]={}),!r[n][c]&&(i[n][c]=!0,!0)})).reverse().forEach((function(t){return e.push(t)}));for(var o=Object.keys(i),a=0;a<o.length;a++){var s=o[a],u=f()({},r[s],i[s]);r[s]=u}return e}),[]).reverse()},I=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.hasOwnProperty(t))return r[t]}return null},R=function(e){return{baseTag:M([d.HREF,d.TARGET],e),bodyAttributes:T(p.BODY,e),defer:I(e,m.DEFER),encode:I(e,m.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:T(p.HTML,e),linkTags:P(h.LINK,[d.REL,d.HREF],e),metaTags:P(h.META,[d.NAME,d.CHARSET,d.HTTPEQUIV,d.PROPERTY,d.ITEM_PROP],e),noscriptTags:P(h.NOSCRIPT,[d.INNER_HTML],e),onChangeClientState:C(e),scriptTags:P(h.SCRIPT,[d.SRC,d.INNER_HTML],e),styleTags:P(h.STYLE,[d.CSS_TEXT],e),title:k(e),titleAttributes:T(p.TITLE,e)}},L=function(){var e=Date.now();return function(t){var n=Date.now();n-e>16?(e=n,t(n)):setTimeout((function(){L(t)}),0)}}(),D=function(e){return clearTimeout(e)},N="undefined"!==typeof window?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||L:e.requestAnimationFrame||L,F="undefined"!==typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||D:e.cancelAnimationFrame||D,z=function(e){return console&&"function"===typeof console.warn&&console.warn(e)},B=null,U=function(e){B&&F(B),e.defer?B=N((function(){V(e,(function(){B=null}))})):(V(e),B=null)},V=function(e,t){var n=e.baseTag,r=e.bodyAttributes,i=e.htmlAttributes,o=e.linkTags,a=e.metaTags,s=e.noscriptTags,u=e.onChangeClientState,c=e.scriptTags,l=e.styleTags,f=e.title,p=e.titleAttributes;W(h.BODY,r),W(h.HTML,i),G(f,p);var d={baseTag:q(h.BASE,n),linkTags:q(h.LINK,o),metaTags:q(h.META,a),noscriptTags:q(h.NOSCRIPT,s),scriptTags:q(h.SCRIPT,c),styleTags:q(h.STYLE,l)},v={},m={};Object.keys(d).forEach((function(e){var t=d[e],n=t.newTags,r=t.oldTags;n.length&&(v[e]=n),r.length&&(m[e]=d[e].oldTags)})),t&&t(),u(e,v,m)},H=function(e){return Array.isArray(e)?e.join(""):e},G=function(e,t){"undefined"!==typeof e&&document.title!==e&&(document.title=H(e)),W(h.TITLE,t)},W=function(e,t){var n=document.getElementsByTagName(e)[0];if(n){for(var r=n.getAttribute(b),i=r?r.split(","):[],o=[].concat(i),a=Object.keys(t),s=0;s<a.length;s++){var u=a[s],c=t[u]||"";n.getAttribute(u)!==c&&n.setAttribute(u,c),-1===i.indexOf(u)&&i.push(u);var l=o.indexOf(u);-1!==l&&o.splice(l,1)}for(var f=o.length-1;f>=0;f--)n.removeAttribute(o[f]);i.length===o.length?n.removeAttribute(b):n.getAttribute(b)!==a.join(",")&&n.setAttribute(b,a.join(","))}},q=function(e,t){var n=document.head||document.querySelector(h.HEAD),r=n.querySelectorAll(e+"["+b+"]"),i=Array.prototype.slice.call(r),o=[],a=void 0;return t&&t.length&&t.forEach((function(t){var n=document.createElement(e);for(var r in t)if(t.hasOwnProperty(r))if(r===d.INNER_HTML)n.innerHTML=t.innerHTML;else if(r===d.CSS_TEXT)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{var s="undefined"===typeof t[r]?"":t[r];n.setAttribute(r,s)}n.setAttribute(b,"true"),i.some((function(e,t){return a=t,n.isEqualNode(e)}))?i.splice(a,1):o.push(n)})),i.forEach((function(e){return e.parentNode.removeChild(e)})),o.forEach((function(e){return n.appendChild(e)})),{oldTags:i,newTags:o}},Z=function(e){return Object.keys(e).reduce((function(t,n){var r="undefined"!==typeof e[n]?n+'="'+e[n]+'"':""+n;return t?t+" "+r:r}),"")},Y=function(e,t,n,r){var i=Z(n),o=H(t);return i?"<"+e+" "+b+'="true" '+i+">"+A(o,r)+"</"+e+">":"<"+e+" "+b+'="true">'+A(o,r)+"</"+e+">"},X=function(e,t,n){return t.reduce((function(t,r){var i=Object.keys(r).filter((function(e){return!(e===d.INNER_HTML||e===d.CSS_TEXT)})).reduce((function(e,t){var i="undefined"===typeof r[t]?t:t+'="'+A(r[t],n)+'"';return e?e+" "+i:i}),""),o=r.innerHTML||r.cssText||"",a=-1===y.indexOf(e);return t+"<"+e+" "+b+'="true" '+i+(a?"/>":">"+o+"</"+e+">")}),"")},K=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,n){return t[v[n]||n]=e[n],t}),t)},$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,n){return t[g[n]||n]=e[n],t}),t)},Q=function(e,t,n){var r,i=(r={key:t},r[b]=!0,r),o=K(n,i);return[c.a.createElement(h.TITLE,o,t)]},J=function(e,t){return t.map((function(t,n){var r,i=(r={key:n},r[b]=!0,r);return Object.keys(t).forEach((function(e){var n=v[e]||e;if(n===d.INNER_HTML||n===d.CSS_TEXT){var r=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:r}}else i[n]=t[e]})),c.a.createElement(e,i)}))},ee=function(e,t,n){switch(e){case h.TITLE:return{toComponent:function(){return Q(e,t.title,t.titleAttributes,n)},toString:function(){return Y(e,t.title,t.titleAttributes,n)}};case p.BODY:case p.HTML:return{toComponent:function(){return K(t)},toString:function(){return Z(t)}};default:return{toComponent:function(){return J(e,t)},toString:function(){return X(e,t,n)}}}},te=function(e){var t=e.baseTag,n=e.bodyAttributes,r=e.encode,i=e.htmlAttributes,o=e.linkTags,a=e.metaTags,s=e.noscriptTags,u=e.scriptTags,c=e.styleTags,l=e.title,f=void 0===l?"":l,d=e.titleAttributes;return{base:ee(h.BASE,t,r),bodyAttributes:ee(p.BODY,n,r),htmlAttributes:ee(p.HTML,i,r),link:ee(h.LINK,o,r),meta:ee(h.META,a,r),noscript:ee(h.NOSCRIPT,s,r),script:ee(h.SCRIPT,u,r),style:ee(h.STYLE,c,r),title:ee(h.TITLE,{title:f,titleAttributes:d},r)}},ne=function(e){var t,n;return n=t=function(t){function n(){return x(this,n),j(this,t.apply(this,arguments))}return E(n,t),n.prototype.shouldComponentUpdate=function(e){return!s()(this.props,e)},n.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case h.SCRIPT:case h.NOSCRIPT:return{innerHTML:t};case h.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},n.prototype.flattenArrayTypeChildren=function(e){var t,n=e.child,r=e.arrayTypeChildren,i=e.newChildProps,o=e.nestedChildren;return O({},r,(t={},t[n.type]=[].concat(r[n.type]||[],[O({},i,this.mapNestedChildrenToProps(n,o))]),t))},n.prototype.mapObjectTypeChildren=function(e){var t,n,r=e.child,i=e.newProps,o=e.newChildProps,a=e.nestedChildren;switch(r.type){case h.TITLE:return O({},i,(t={},t[r.type]=a,t.titleAttributes=O({},o),t));case h.BODY:return O({},i,{bodyAttributes:O({},o)});case h.HTML:return O({},i,{htmlAttributes:O({},o)})}return O({},i,(n={},n[r.type]=O({},o),n))},n.prototype.mapArrayTypeChildrenToProps=function(e,t){var n=O({},t);return Object.keys(e).forEach((function(t){var r;n=O({},n,(r={},r[t]=e[t],r))})),n},n.prototype.warnOnInvalidChildren=function(e,t){return!0},n.prototype.mapChildrenToProps=function(e,t){var n=this,r={};return c.a.Children.forEach(e,(function(e){if(e&&e.props){var i=e.props,o=i.children,a=S(i,["children"]),s=$(a);switch(n.warnOnInvalidChildren(e,o),e.type){case h.LINK:case h.META:case h.NOSCRIPT:case h.SCRIPT:case h.STYLE:r=n.flattenArrayTypeChildren({child:e,arrayTypeChildren:r,newChildProps:s,nestedChildren:o});break;default:t=n.mapObjectTypeChildren({child:e,newProps:t,newChildProps:s,nestedChildren:o});break}}})),t=this.mapArrayTypeChildrenToProps(r,t),t},n.prototype.render=function(){var t=this.props,n=t.children,r=S(t,["children"]),i=O({},r);return n&&(i=this.mapChildrenToProps(n,i)),c.a.createElement(e,i)},w(n,null,[{key:"canUseDOM",set:function(t){e.canUseDOM=t}}]),n}(c.a.Component),t.propTypes={base:r.a.object,bodyAttributes:r.a.object,children:r.a.oneOfType([r.a.arrayOf(r.a.node),r.a.node]),defaultTitle:r.a.string,defer:r.a.bool,encodeSpecialCharacters:r.a.bool,htmlAttributes:r.a.object,link:r.a.arrayOf(r.a.object),meta:r.a.arrayOf(r.a.object),noscript:r.a.arrayOf(r.a.object),onChangeClientState:r.a.func,script:r.a.arrayOf(r.a.object),style:r.a.arrayOf(r.a.object),title:r.a.string,titleAttributes:r.a.object,titleTemplate:r.a.string},t.defaultProps={defer:!0,encodeSpecialCharacters:!0},t.peek=e.peek,t.rewind=function(){var t=e.rewind();return t||(t=te({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),t},n},re=function(){return null},ie=o()(R,U,te)(re),oe=ne(ie);oe.renderStatic=oe.rewind}).call(this,n("IyRk"))},qwGt:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("q1tI"),i=n.n(r),o=i.a.createContext({})},qxPZ:function(e,t,n){var r=n("tiKp"),i=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,"/./"[e](t)}catch(r){}}return!1}},r1Q5:function(e,t,n){"use strict";var r=n("5wUe")["default"];function i(){var e=n("q1tI");return i=function(){return e},e}function o(){var e=n("nvu9");return o=function(){return e},e}function a(e,t){return f(e)||l(e,t)||u(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function f(e){if(Array.isArray(e))return e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var p="https://codesandbox.io/api/v1/sandboxes/define",h=function(e,t){return"react-dom"===e?"/**\n* This is an auto-generated demo by dumi\n* if you think it is not working as expected,\n* please report the issue at\n* https://github.com/umijs/dumi/issues\n**/\n    \nimport React from 'react';\nimport ReactDOM from 'react-dom';\n".concat(t,"\nimport App from './App';\n    \nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);"):"react-dom/client"===e?"/**\n* This is an auto-generated demo by dumi\n* if you think it is not working as expected,\n* please report the issue at\n* https://github.com/umijs/dumi/issues\n**/\nimport React from 'react';\nimport { createRoot } from \"react-dom/client\";\n".concat(t,'\nimport App from "./App";\n\nconst rootElement = document.getElementById("root");\nconst root = createRoot(rootElement);\n\nroot.render(<App />);'):void 0};function d(e){var t=document.createElement("span");t.innerHTML=e;var n=t.textContent;return t.remove(),n}function v(e){var t,n=Boolean(e.sources._.tsx),i=n?".tsx":".jsx",a={},s={},u=Object.values(e.dependencies).filter((function(e){return e.css})),c="App".concat(i),l="index".concat(i);return Object.entries(e.dependencies).forEach((function(e){var t=r(e,2),n=t[0],i=t[1].version;s[n]=i})),s["react-dom"]||(s["react-dom"]=s.react||"latest"),a["sandbox.config.json"]={content:JSON.stringify({template:n?"create-react-app-typescript":"create-react-app"},null,2),isBinary:!1},a["package.json"]={content:JSON.stringify({name:e.title,description:d(e.description||"An auto-generated demo by dumi"),main:l,dependencies:s,devDependencies:n?{typescript:"^3"}:{}},null,2),isBinary:!1},a["index.html"]={content:'<div style="margin: 16px;" id="root"></div>',isBinary:!1},a[l]={content:h((null===s||void 0===s||null===(t=s["react-dom"])||void 0===t?void 0:t.startsWith("18."))||"latest"===s.react?"react-dom/client":"react-dom",u.map((function(e){var t=e.css;return"import '".concat(t,"';")})).join("\n")),isBinary:!1},Object.entries(e.sources).forEach((function(e){var t=r(e,2),n=t[0],i=t[1],o=i.tsx,s=i.jsx,u=i.content;a["_"===n?c:n]={content:o||s||u,isBinary:!1}})),(0,o().getParameters)({files:a})}var m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p,n=(0,i().useState)(),r=a(n,2),o=r[0],s=r[1];return(0,i().useEffect)((function(){if(e){var n=document.createElement("form"),r=document.createElement("input"),i=v(e);return n.method="POST",n.target="_blank",n.style.display="none",n.action=t,n.appendChild(r),n.setAttribute("data-demo",e.title||""),r.name="parameters",r.value=i,document.body.appendChild(n),s((function(){return function(){return n.submit()}})),function(){return n.remove()}}}),[e]),o};t["default"]=m},rB9j:function(e,t,n){"use strict";var r=n("I+eb"),i=n("kmMV");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},rEGp:function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}e.exports=n},rKzb:function(e,t,n){"use strict";var r=n("4syw"),i=n("8YOa").getWeakData,o=n("glrk"),a=n("hh1v"),s=n("GarU"),u=n("ImZN"),c=n("tycR"),l=n("UTVS"),f=n("afO8"),p=f.set,h=f.getterFor,d=c.find,v=c.findIndex,m=0,g=function(e){return e.frozen||(e.frozen=new y)},y=function(){this.entries=[]},b=function(e,t){return d(e.entries,(function(e){return e[0]===t}))};y.prototype={get:function(e){var t=b(this,e);if(t)return t[1]},has:function(e){return!!b(this,e)},set:function(e,t){var n=b(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=v(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,c){var f=e((function(e,r){s(e,f,t),p(e,{type:t,id:m++,frozen:void 0}),void 0!=r&&u(r,e[c],e,n)})),d=h(t),v=function(e,t,n){var r=d(e),a=i(o(t),!0);return!0===a?g(r).set(t,n):a[r.id]=n,e};return r(f.prototype,{delete:function(e){var t=d(this);if(!a(e))return!1;var n=i(e);return!0===n?g(t)["delete"](e):n&&l(n,t.id)&&delete n[t.id]},has:function(e){var t=d(this);if(!a(e))return!1;var n=i(e);return!0===n?g(t).has(e):n&&l(n,t.id)}}),r(f.prototype,n?{get:function(e){var t=d(this);if(a(e)){var n=i(e);return!0===n?g(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return v(this,e,t)}}:{add:function(e){return v(this,e,!0)}}),f}}},rNhl:function(e,t,n){var r=n("I+eb"),i=n("fhKU");r({global:!0,forced:parseFloat!=i},{parseFloat:i})},rOQg:function(e,t,n){"use strict";var r=n("I+eb"),i=n("0Dky"),o=n("Yhre"),a=n("glrk"),s=n("I8vh"),u=n("UMSQ"),c=n("SEBh"),l=o.ArrayBuffer,f=o.DataView,p=l.prototype.slice,h=i((function(){return!new l(2).slice(1,void 0).byteLength}));r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:h},{slice:function(e,t){if(void 0!==p&&void 0===t)return p.call(a(this),e);var n=a(this).byteLength,r=s(e,n),i=s(void 0===t?n:t,n),o=new(c(this,l))(u(i-r)),h=new f(this),d=new f(o),v=0;while(r<i)d.setUint8(v++,h.getUint8(r++));return o}})},rSSe:function(e,t,n){},rW0t:function(e,t,n){"use strict";var r=n("glrk");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},rZ3M:function(e,t,n){"use strict";var r=n("I+eb"),i=n("HYAF"),o=n("ROdP"),a=n("rW0t"),s=n("tiKp"),u=n("xDBR"),c=s("replace"),l=RegExp.prototype;r({target:"String",proto:!0},{replaceAll:function e(t,n){var r,s,f,p,h,d,v,m,g,y=i(this);if(null!=t){if(r=o(t),r&&(s=String(i("flags"in l?t.flags:a.call(t))),!~s.indexOf("g")))throw TypeError("`.replaceAll` does not allow non-global regexes");if(f=t[c],void 0!==f)return f.call(t,y,n);if(u&&r)return String(y).replace(t,n)}if(p=String(y),h=String(t),""===h)return e.call(p,/(?:)/g,n);if(d=p.split(h),"function"!==typeof n)return d.join(String(n));for(v=d[0],m=v.length,g=1;g<d.length;g++)v+=String(n(h,m,p)),m+=h.length+d[g].length,v+=d[g];return v}})},"rb3/":function(e,t,n){"use strict";n.r(t);var r=n("k1fw"),i=n("q1tI"),o=n.n(i),a=n("dEAq"),s=n("Zxc8"),u=n("nKUr"),c=o.a.memo((e=>{var t=e.demos,n=t["docs-popup"].component;return Object(u["jsx"])(u["Fragment"],{children:Object(u["jsxs"])(o.a.Fragment,{children:[Object(u["jsx"])("div",{className:"markdown",children:Object(u["jsxs"])("h2",{id:"\u4fe1\u606f\u6846",children:[Object(u["jsx"])(a["AnchorLink"],{to:"#\u4fe1\u606f\u6846","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u4fe1\u606f\u6846"]})}),Object(u["jsx"])(s["default"],Object(r["a"])(Object(r["a"])({},t["docs-popup"].previewerProps),{},{children:Object(u["jsx"])(n,{})}))]})})}));t["default"]=e=>{var t=o.a.useContext(a["context"]),n=t.demos;return o.a.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&a["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),Object(u["jsx"])(c,{demos:n})}},rb3L:function(e,t,n){var r=n("I+eb"),i=n("P940");r({target:"WeakSet",stat:!0},{of:i})},rePB:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("o46R");function i(e,t,n){return t=Object(r["a"])(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},"rhT+":function(e,t){function n(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},rkAj:function(e,t,n){var r=n("g6v/"),i=n("0Dky"),o=n("UTVS"),a=Object.defineProperty,s={},u=function(e){throw e};e.exports=function(e,t){if(o(s,e))return s[e];t||(t={});var n=[][e],c=!!o(t,"ACCESSORS")&&t.ACCESSORS,l=o(t,0)?t[0]:u,f=o(t,1)?t[1]:void 0;return s[e]=!!n&&!i((function(){if(c&&!r)return!0;var e={length:-1};c?a(e,1,{enumerable:!0,get:u}):e[1]=1,n.call(e,l,f)}))}},rlch:function(e,t,n){"use strict";n.d(t,"a",(function(){return D})),n.d(t,"b",(function(){return z}));var r=n("qLMh"),i=n("q1tI"),o=n("wXlr");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){c(o,r,i,a,s,"next",e)}function s(e){c(o,r,i,a,s,"throw",e)}a(void 0)}))}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){return m(e)||g(e)||y(e)||_()}function m(e){if(Array.isArray(e))return e}function g(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function y(e,t){if(e){if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=y(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}var w=Object(i["createContext"])(null),O=[],E=[],S=!1;function j(e){var t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then((function(e){return n.loading=!1,n.loaded=e,e}))["catch"]((function(e){throw n.loading=!1,n.error=e,e})),n}function A(e){var t={loading:!1,loaded:{},error:null},n=[];try{Object.keys(e).forEach((function(r){var i=j(e[r]);i.loading?t.loading=!0:(t.loaded[r]=i.loaded,t.error=i.error),n.push(i.promise),i.promise.then((function(e){t.loaded[r]=e}))["catch"]((function(e){t.error=e}))}))}catch(r){t.error=r}return t.promise=Promise.all(n).then((function(e){return t.loading=!1,e}))["catch"]((function(e){throw t.loading=!1,e})),t}function k(e){return e&&e.__esModule?e["default"]:e}function C(e,t){return Object(i["createElement"])(k(e),t)}function T(e,t){var n=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:C,webpack:null,modules:null},t),r=null;function a(){if(!r){var t=new M(e,n);r={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return r.promise()}if("undefined"===typeof window&&O.push(a),!S&&"undefined"!==typeof window&&"function"===typeof n.webpack){var s=n.webpack();E.push((function(e){var t,n=x(s);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(-1!==e.indexOf(r))return a()}}catch(i){n.e(i)}finally{n.f()}}))}var u=function(e,t){a();var s=Object(i["useContext"])(w),u=Object(o["useSubscription"])(r);return Object(i["useImperativeHandle"])(t,(function(){return{retry:r.retry}})),s&&Array.isArray(n.modules)&&n.modules.forEach((function(e){s(e)})),u.loading||u.error?Object(i["createElement"])(n.loading,{isLoading:u.loading,pastDelay:u.pastDelay,timedOut:u.timedOut,error:u.error,retry:r.retry}):u.loaded?n.render(u.loaded,e):null},c=Object(i["forwardRef"])(u);return c.preload=function(){return a()},c.displayName="LoadableComponent",c}var M=function(){function e(t,n){f(this,e),this._loadFn=t,this._opts=n,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}return h(e,[{key:"promise",value:function(){return this._res.promise}},{key:"retry",value:function(){var e=this;this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};var t=this._res,n=this._opts;t.loading&&("number"===typeof n.delay&&(0===n.delay?this._state.pastDelay=!0:this._delay=setTimeout((function(){e._update({pastDelay:!0})}),n.delay)),"number"===typeof n.timeout&&(this._timeout=setTimeout((function(){e._update({timedOut:!0})}),n.timeout))),this._res.promise.then((function(){e._update(),e._clearTimeouts()}))["catch"]((function(t){e._update(),e._clearTimeouts()})),this._update({})}},{key:"_update",value:function(e){this._state=s(s({},this._state),e),this._callbacks.forEach((function(e){return e()}))}},{key:"_clearTimeouts",value:function(){clearTimeout(this._delay),clearTimeout(this._timeout)}},{key:"getCurrentValue",value:function(){return s(s({},this._state),{},{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading})}},{key:"subscribe",value:function(e){var t=this;return this._callbacks.add(e),function(){t._callbacks["delete"](e)}}}]),e}();function P(e){return T(j,e)}function I(e){if("function"!==typeof e.render)throw new Error("LoadableMap requires a `render(loaded, props)` function");return T(A,e)}function R(e,t){var n=[];while(e.length){var r=e.pop();n.push(r(t))}return Promise.all(n).then((function(){if(e.length)return R(e,t)}))}function L(e,t){if(!e)throw new Error(t)}P.Map=I,P.preloadAll=function(){return new Promise((function(e,t){R(O).then(e,t)}))},P.preloadReady=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(t){var n=function(){return S=!0,t()};R(E,e).then(n,n)}))},"undefined"!==typeof window&&(window.__NEXT_PRELOADREADY=P.preloadReady);var D;function N(e){var t=e.fns,n=e.args;if(1===t.length)return t[0];var r=t.pop();return t.reduce((function(e,t){return function(){return t(e,n)}}),r)}function F(e){return!!e&&"object"===u(e)&&"function"===typeof e.then}(function(e){e["compose"]="compose",e["modify"]="modify",e["event"]="event"})(D||(D={}));var z=function(){function e(t){f(this,e),this.validKeys=void 0,this.hooks={},this.validKeys=(null===t||void 0===t?void 0:t.validKeys)||[]}return h(e,[{key:"register",value:function(e){var t=this;L(!!e.apply,"register failed, plugin.apply must supplied"),L(!!e.path,"register failed, plugin.path must supplied"),Object.keys(e.apply).forEach((function(n){L(t.validKeys.indexOf(n)>-1,"register failed, invalid key ".concat(n," from plugin ").concat(e.path,".")),t.hooks[n]||(t.hooks[n]=[]),t.hooks[n]=t.hooks[n].concat(e.apply[n])}))}},{key:"getHooks",value:function(e){var t=e.split("."),n=v(t),r=n[0],i=n.slice(1),o=this.hooks[r]||[];return i.length&&(o=o.map((function(e){try{var t,n=e,r=x(i);try{for(r.s();!(t=r.n()).done;){var o=t.value;n=n[o]}}catch(a){r.e(a)}finally{r.f()}return n}catch(s){return null}})).filter(Boolean)),o}},{key:"applyPlugins",value:function(e){var t=e.key,n=e.type,i=e.initialValue,o=e.args,a=e.async,c=this.getHooks(t)||[];switch(o&&L("object"===u(o),"applyPlugins failed, args must be plain object."),n){case D.modify:return a?c.reduce(function(){var e=l(Object(r["a"])().mark((function e(n,i){var a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(L("function"===typeof i||"object"===u(i)||F(i),"applyPlugins failed, all hooks for key ".concat(t," must be function, plain object or Promise.")),!F(n)){e.next=5;break}return e.next=4,n;case 4:n=e.sent;case 5:if("function"!==typeof i){e.next=16;break}if(a=i(n,o),!F(a)){e.next=13;break}return e.next=10,a;case 10:return e.abrupt("return",e.sent);case 13:return e.abrupt("return",a);case 14:e.next=21;break;case 16:if(!F(i)){e.next=20;break}return e.next=19,i;case 19:i=e.sent;case 20:return e.abrupt("return",s(s({},n),i));case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F(i)?i:Promise.resolve(i)):c.reduce((function(e,n){return L("function"===typeof n||"object"===u(n),"applyPlugins failed, all hooks for key ".concat(t," must be function or plain object.")),"function"===typeof n?n(e,o):s(s({},e),n)}),i);case D.event:return c.forEach((function(e){L("function"===typeof e,"applyPlugins failed, all hooks for key ".concat(t," must be function.")),e(o)}));case D.compose:return function(){return N({fns:c.concat(i),args:o})()}}}}]),e}()},rpNk:function(e,t,n){"use strict";var r,i,o,a=n("4WOD"),s=n("kRJp"),u=n("UTVS"),c=n("tiKp"),l=n("xDBR"),f=c("iterator"),p=!1,h=function(){return this};[].keys&&(o=[].keys(),"next"in o?(i=a(a(o)),i!==Object.prototype&&(r=i)):p=!0),void 0==r&&(r={}),l||u(r,f)||s(r,f,h),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},s4An:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,"a",(function(){return r}))},s5qe:function(e,t,n){"use strict";var r=n("2oRo"),i=n("67WC"),o=n("0Dky"),a=r.Int8Array,s=i.aTypedArray,u=i.exportTypedArrayMethod,c=[].toLocaleString,l=[].slice,f=!!a&&o((function(){c.call(new a(1))})),p=o((function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()}))||!o((function(){a.prototype.toLocaleString.call([1,2])}));u("toLocaleString",(function(){return c.apply(f?l.call(s(this)):s(this),arguments)}),p)},sEFX:function(e,t,n){"use strict";var r=n("AO7/"),i=n("9d/t");e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},sEf8:function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},sQ9d:function(e,t,n){var r=n("I+eb"),i=n("eDxR"),o=n("glrk"),a=i.keys,s=i.toKey;r({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(e){var t=arguments.length<2?void 0:s(arguments[1]);return a(o(e),t)}})},seXi:function(e,t,n){var r=n("qZTm"),i=1,o=Object.prototype,a=o.hasOwnProperty;function s(e,t,n,o,s,u){var c=n&i,l=r(e),f=l.length,p=r(t),h=p.length;if(f!=h&&!c)return!1;var d=f;while(d--){var v=l[d];if(!(c?v in t:a.call(t,v)))return!1}var m=u.get(e),g=u.get(t);if(m&&g)return m==t&&g==e;var y=!0;u.set(e,t),u.set(t,e);var b=c;while(++d<f){v=l[d];var _=e[v],x=t[v];if(o)var w=c?o(x,_,v,t,e,u):o(_,x,v,e,t,u);if(!(void 0===w?_===x||s(_,x,n,o,u):w)){y=!1;break}b||(b="constructor"==v)}if(y&&!b){var O=e.constructor,E=t.constructor;O==E||!("constructor"in e)||!("constructor"in t)||"function"==typeof O&&O instanceof O&&"function"==typeof E&&E instanceof E||(y=!1)}return u["delete"](e),u["delete"](t),y}e.exports=s},shjB:function(e,t){var n=9007199254740991;function r(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}e.exports=r},spTT:function(e,t,n){var r=n("I+eb"),i=n("qY7S");r({target:"WeakSet",stat:!0},{from:i})},sxOR:function(e,t,n){"use strict";var r=String.prototype.replace,i=/%20/g,o={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports={default:o.RFC3986,formatters:{RFC1738:function(e){return r.call(e,i,"+")},RFC3986:function(e){return String(e)}},RFC1738:o.RFC1738,RFC3986:o.RFC3986}},szb8:function(e,t,n){"use strict";n.r(t),n.d(t,"Interpreter",(function(){return Yt})),n.d(t,"vm",(function(){return r})),n.d(t,"evaluate",(function(){return en})),n.d(t,"Function",(function(){return tn}));var r={};n.r(r),n.d(r,"createContext",(function(){return Xt})),n.d(r,"compileFunction",(function(){return Kt})),n.d(r,"runInContext",(function(){return $t})),n.d(r,"runInNewContext",(function(){return Qt})),n.d(r,"Script",(function(){return Jt}));var i={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},o="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",a={5:o,"5module":o+" export import",6:o+" const class extends export import super"},s=/^in(stanceof)?$/,u="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",c="\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",l=new RegExp("["+u+"]"),f=new RegExp("["+u+c+"]");u=c=null;var p=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],h=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239];function d(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}}function v(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&l.test(String.fromCharCode(e)):!1!==t&&d(e,p)))}function m(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&f.test(String.fromCharCode(e)):!1!==t&&(d(e,p)||d(e,h)))))}var g=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function y(e,t){return new g(e,{beforeExpr:!0,binop:t})}var b={beforeExpr:!0},_={startsExpr:!0},x={};function w(e,t){return void 0===t&&(t={}),t.keyword=e,x[e]=new g(e,t)}var O={num:new g("num",_),regexp:new g("regexp",_),string:new g("string",_),name:new g("name",_),eof:new g("eof"),bracketL:new g("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new g("]"),braceL:new g("{",{beforeExpr:!0,startsExpr:!0}),braceR:new g("}"),parenL:new g("(",{beforeExpr:!0,startsExpr:!0}),parenR:new g(")"),comma:new g(",",b),semi:new g(";",b),colon:new g(":",b),dot:new g("."),question:new g("?",b),questionDot:new g("?."),arrow:new g("=>",b),template:new g("template"),invalidTemplate:new g("invalidTemplate"),ellipsis:new g("...",b),backQuote:new g("`",_),dollarBraceL:new g("${",{beforeExpr:!0,startsExpr:!0}),eq:new g("=",{beforeExpr:!0,isAssign:!0}),assign:new g("_=",{beforeExpr:!0,isAssign:!0}),incDec:new g("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new g("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:y("||",1),logicalAND:y("&&",2),bitwiseOR:y("|",3),bitwiseXOR:y("^",4),bitwiseAND:y("&",5),equality:y("==/!=/===/!==",6),relational:y("</>/<=/>=",7),bitShift:y("<</>>/>>>",8),plusMin:new g("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:y("%",10),star:y("*",10),slash:y("/",10),starstar:new g("**",{beforeExpr:!0}),coalesce:y("??",1),_break:w("break"),_case:w("case",b),_catch:w("catch"),_continue:w("continue"),_debugger:w("debugger"),_default:w("default",b),_do:w("do",{isLoop:!0,beforeExpr:!0}),_else:w("else",b),_finally:w("finally"),_for:w("for",{isLoop:!0}),_function:w("function",_),_if:w("if"),_return:w("return",b),_switch:w("switch"),_throw:w("throw",b),_try:w("try"),_var:w("var"),_const:w("const"),_while:w("while",{isLoop:!0}),_with:w("with"),_new:w("new",{beforeExpr:!0,startsExpr:!0}),_this:w("this",_),_super:w("super",_),_class:w("class",_),_extends:w("extends",b),_export:w("export"),_import:w("import",_),_null:w("null",_),_true:w("true",_),_false:w("false",_),_in:w("in",{beforeExpr:!0,binop:7}),_instanceof:w("instanceof",{beforeExpr:!0,binop:7}),_typeof:w("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:w("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:w("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},E=/\r\n?|\n|\u2028|\u2029/,S=new RegExp(E.source,"g");function j(e,t){return 10===e||13===e||!t&&(8232===e||8233===e)}var A=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,k=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,C=Object.prototype,T=C.hasOwnProperty,M=C.toString;function P(e,t){return T.call(e,t)}var I=Array.isArray||function(e){return"[object Array]"===M.call(e)};function R(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}var L=function(e,t){this.line=e,this.column=t};L.prototype.offset=function(e){return new L(this.line,this.column+e)};var D=function(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)};function N(e,t){for(var n=1,r=0;;){S.lastIndex=r;var i=S.exec(e);if(!(i&&i.index<t))return new L(n,t-r);++n,r=i.index+i[0].length}}var F={ecmaVersion:10,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function z(e){var t={};for(var n in F)t[n]=e&&P(e,n)?e[n]:F[n];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),I(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return I(t.onComment)&&(t.onComment=B(t,t.onComment)),t}function B(e,t){return function(n,r,i,o,a,s){var u={type:n?"Block":"Line",value:r,start:i,end:o};e.locations&&(u.loc=new D(this,a,s)),e.ranges&&(u.range=[i,o]),t.push(u)}}var U=1,V=2,H=U|V,G=4,W=8,q=16,Z=32,Y=64,X=128;function K(e,t){return V|(e?G:0)|(t?W:0)}var $=0,Q=1,J=2,ee=3,te=4,ne=5,re=function(e,t,n){this.options=e=z(e),this.sourceFile=e.sourceFile,this.keywords=R(a[e.ecmaVersion>=6?6:"module"===e.sourceType?"5module":5]);var r="";if(!0!==e.allowReserved){for(var o=e.ecmaVersion;;o--)if(r=i[o])break;"module"===e.sourceType&&(r+=" await")}this.reservedWords=R(r);var s=(r?r+" ":"")+i.strict;this.reservedWordsStrict=R(s),this.reservedWordsStrictBind=R(s+" "+i.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(E).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=O.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(U),this.regexpState=null},ie={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};re.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},ie.inFunction.get=function(){return(this.currentVarScope().flags&V)>0},ie.inGenerator.get=function(){return(this.currentVarScope().flags&W)>0},ie.inAsync.get=function(){return(this.currentVarScope().flags&G)>0},ie.allowSuper.get=function(){return(this.currentThisScope().flags&Y)>0},ie.allowDirectSuper.get=function(){return(this.currentThisScope().flags&X)>0},ie.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},re.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&V)>0},re.extend=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n},re.parse=function(e,t){return new this(t,e).parse()},re.parseExpressionAt=function(e,t,n){var r=new this(n,e,t);return r.nextToken(),r.parseExpression()},re.tokenizer=function(e,t){return new this(t,e)},Object.defineProperties(re.prototype,ie);var oe=re.prototype,ae=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;function se(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}oe.strictDirective=function(e){for(;;){k.lastIndex=e,e+=k.exec(this.input)[0].length;var t=ae.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2])){k.lastIndex=e+t[0].length;var n=k.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return";"===i||"}"===i||E.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||"!"===i&&"="===this.input.charAt(r+1))}e+=t[0].length,k.lastIndex=e,e+=k.exec(this.input)[0].length,";"===this.input[e]&&e++}},oe.eat=function(e){return this.type===e&&(this.next(),!0)},oe.isContextual=function(e){return this.type===O.name&&this.value===e&&!this.containsEsc},oe.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},oe.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},oe.canInsertSemicolon=function(){return this.type===O.eof||this.type===O.braceR||E.test(this.input.slice(this.lastTokEnd,this.start))},oe.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},oe.semicolon=function(){this.eat(O.semi)||this.insertSemicolon()||this.unexpected()},oe.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},oe.expect=function(e){this.eat(e)||this.unexpected()},oe.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},oe.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},oe.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},oe.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},oe.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var ue=re.prototype;ue.parseTopLevel=function(e){var t={};e.body||(e.body=[]);while(this.type!==O.eof){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var o=i[r];this.raiseRecoverable(this.undefinedExports[o].start,"Export '"+o+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var ce={kind:"loop"},le={kind:"switch"};ue.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;k.lastIndex=this.pos;var t=k.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(91===r)return!0;if(e)return!1;if(123===r)return!0;if(v(r,!0)){var i=n+1;while(m(this.input.charCodeAt(i),!0))++i;var o=this.input.slice(n,i);if(!s.test(o))return!0}return!1},ue.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;k.lastIndex=this.pos;var e=k.exec(this.input),t=this.pos+e[0].length;return!E.test(this.input.slice(this.pos,t))&&"function"===this.input.slice(t,t+8)&&(t+8===this.input.length||!m(this.input.charAt(t+8)))},ue.parseStatement=function(e,t,n){var r,i=this.type,o=this.startNode();switch(this.isLet(e)&&(i=O._var,r="let"),i){case O._break:case O._continue:return this.parseBreakContinueStatement(o,i.keyword);case O._debugger:return this.parseDebuggerStatement(o);case O._do:return this.parseDoStatement(o);case O._for:return this.parseForStatement(o);case O._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(o,!1,!e);case O._class:return e&&this.unexpected(),this.parseClass(o,!0);case O._if:return this.parseIfStatement(o);case O._return:return this.parseReturnStatement(o);case O._switch:return this.parseSwitchStatement(o);case O._throw:return this.parseThrowStatement(o);case O._try:return this.parseTryStatement(o);case O._const:case O._var:return r=r||this.value,e&&"var"!==r&&this.unexpected(),this.parseVarStatement(o,r);case O._while:return this.parseWhileStatement(o);case O._with:return this.parseWithStatement(o);case O.braceL:return this.parseBlock(!0,o);case O.semi:return this.parseEmptyStatement(o);case O._export:case O._import:if(this.options.ecmaVersion>10&&i===O._import){k.lastIndex=this.pos;var a=k.exec(this.input),s=this.pos+a[0].length,u=this.input.charCodeAt(s);if(40===u||46===u)return this.parseExpressionStatement(o,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===O._import?this.parseImport(o):this.parseExport(o,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(o,!0,!e);var c=this.value,l=this.parseExpression();return i===O.name&&"Identifier"===l.type&&this.eat(O.colon)?this.parseLabeledStatement(o,c,l,e):this.parseExpressionStatement(o,l)}},ue.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(O.semi)||this.insertSemicolon()?e.label=null:this.type!==O.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(e.label&&n)break}}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},ue.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},ue.parseDoStatement=function(e){return this.next(),this.labels.push(ce),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(O._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(O.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},ue.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(ce),this.enterScope(0),this.expect(O.parenL),this.type===O.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===O._var||this.type===O._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===O._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===r.declarations.length?(this.options.ecmaVersion>=9&&(this.type===O._in?t>-1&&this.unexpected(t):e["await"]=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var o=new se,a=this.parseExpression(!0,o);return this.type===O._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===O._in?t>-1&&this.unexpected(t):e["await"]=t>-1),this.toAssignable(a,!1,o),this.checkLVal(a),this.parseForIn(e,a)):(this.checkExpressionErrors(o,!0),t>-1&&this.unexpected(t),this.parseFor(e,a))},ue.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,pe|(n?0:he),!1,t)},ue.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(O._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},ue.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(O.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},ue.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(O.braceL),this.labels.push(le),this.enterScope(0);for(var n=!1;this.type!==O.braceR;)if(this.type===O._case||this.type===O._default){var r=this.type===O._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(O.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},ue.parseThrowStatement=function(e){return this.next(),E.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var fe=[];ue.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===O._catch){var t=this.startNode();if(this.next(),this.eat(O.parenL)){t.param=this.parseBindingAtom();var n="Identifier"===t.param.type;this.enterScope(n?Z:0),this.checkLVal(t.param,n?te:J),this.expect(O.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(O._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},ue.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},ue.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(ce),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},ue.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},ue.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},ue.parseLabeledStatement=function(e,t,n,r){for(var i=0,o=this.labels;i<o.length;i+=1){var a=o[i];a.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var s=this.type.isLoop?"loop":this.type===O._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var c=this.labels[u];if(c.statementStart!==e.start)break;c.statementStart=this.start,c.kind=s}return this.labels.push({name:t,kind:s,statementStart:this.start}),e.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},ue.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},ue.parseBlock=function(e,t,n){void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),t.body=[],this.expect(O.braceL),e&&this.enterScope(0);while(this.type!==O.braceR){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")},ue.parseFor=function(e,t){return e.init=t,this.expect(O.semi),e.test=this.type===O.semi?null:this.parseExpression(),this.expect(O.semi),e.update=this.type===O.parenR?null:this.parseExpression(),this.expect(O.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},ue.parseForIn=function(e,t){var n=this.type===O._in;return this.next(),"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==t.kind||"Identifier"!==t.declarations[0].id.type)?this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"):"AssignmentPattern"===t.type&&this.raise(t.start,"Invalid left-hand side in for-loop"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(O.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")},ue.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(O.eq)?r.init=this.parseMaybeAssign(t):"const"!==n||this.type===O._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||t&&(this.type===O._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(O.comma))break}return e},ue.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLVal(e.id,"var"===t?Q:J,!1)};var pe=1,he=2,de=4;ue.parseFunction=function(e,t,n,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===O.star&&t&he&&this.unexpected(),e.generator=this.eat(O.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&pe&&(e.id=t&de&&this.type!==O.name?null:this.parseIdent(),!e.id||t&he||this.checkLVal(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?Q:J:ee));var i=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(K(e.async,e.generator)),t&pe||(e.id=this.type===O.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1),this.yieldPos=i,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&pe?"FunctionDeclaration":"FunctionExpression")},ue.parseFunctionParams=function(e){this.expect(O.parenL),e.params=this.parseBindingList(O.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},ue.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.startNode(),i=!1;r.body=[],this.expect(O.braceL);while(this.type!==O.braceR){var o=this.parseClassElement(null!==e.superClass);o&&(r.body.push(o),"MethodDefinition"===o.type&&"constructor"===o.kind&&(i&&this.raise(o.start,"Duplicate constructor in the same class"),i=!0))}return this.strict=n,this.next(),e.body=this.finishNode(r,"ClassBody"),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},ue.parseClassElement=function(e){var t=this;if(this.eat(O.semi))return null;var n=this.startNode(),r=function(e,r){void 0===r&&(r=!1);var i=t.start,o=t.startLoc;return!!t.eatContextual(e)&&(!(t.type===O.parenL||r&&t.canInsertSemicolon())||(n.key&&t.unexpected(),n.computed=!1,n.key=t.startNodeAt(i,o),n.key.name=e,t.finishNode(n.key,"Identifier"),!1))};n.kind="method",n["static"]=r("static");var i=this.eat(O.star),o=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(o=!0,i=this.options.ecmaVersion>=9&&this.eat(O.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var a=n.key,s=!1;return n.computed||n["static"]||!("Identifier"===a.type&&"constructor"===a.name||"Literal"===a.type&&"constructor"===a.value)?n["static"]&&"Identifier"===a.type&&"prototype"===a.name&&this.raise(a.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(a.start,"Constructor can't have get/set modifier"),i&&this.raise(a.start,"Constructor can't be a generator"),o&&this.raise(a.start,"Constructor can't be an async method"),n.kind="constructor",s=e),this.parseClassMethod(n,i,o,s),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},ue.parseClassMethod=function(e,t,n,r){return e.value=this.parseMethod(t,n,r),this.finishNode(e,"MethodDefinition")},ue.parseClassId=function(e,t){this.type===O.name?(e.id=this.parseIdent(),t&&this.checkLVal(e.id,J,!1)):(!0===t&&this.unexpected(),e.id=null)},ue.parseClassSuper=function(e){e.superClass=this.eat(O._extends)?this.parseExprSubscripts():null},ue.parseExport=function(e,t){if(this.next(),this.eat(O.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseIdent(!0),this.checkExport(t,e.exported.name,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==O.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(O._default)){var n;if(this.checkExport(t,"default",this.lastTokStart),this.type===O._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(r,pe|de,!1,n)}else if(this.type===O._class){var i=this.startNode();e.declaration=this.parseClass(i,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==O.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var o=0,a=e.specifiers;o<a.length;o+=1){var s=a[o];this.checkUnreserved(s.local),this.checkLocalExport(s.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},ue.checkExport=function(e,t,n){e&&(P(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},ue.checkPatternExport=function(e,t){var n=t.type;if("Identifier"===n)this.checkExport(e,t.name,t.start);else if("ObjectPattern"===n)for(var r=0,i=t.properties;r<i.length;r+=1){var o=i[r];this.checkPatternExport(e,o)}else if("ArrayPattern"===n)for(var a=0,s=t.elements;a<s.length;a+=1){var u=s[a];u&&this.checkPatternExport(e,u)}else"Property"===n?this.checkPatternExport(e,t.value):"AssignmentPattern"===n?this.checkPatternExport(e,t.left):"RestElement"===n?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(e,t.expression)},ue.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}},ue.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},ue.parseExportSpecifiers=function(e){var t=[],n=!0;this.expect(O.braceL);while(!this.eat(O.braceR)){if(n)n=!1;else if(this.expect(O.comma),this.afterTrailingComma(O.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(e,r.exported.name,r.exported.start),t.push(this.finishNode(r,"ExportSpecifier"))}return t},ue.parseImport=function(e){return this.next(),this.type===O.string?(e.specifiers=fe,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===O.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},ue.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===O.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,J),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(O.comma))return e}if(this.type===O.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,J),e.push(this.finishNode(r,"ImportNamespaceSpecifier")),e}this.expect(O.braceL);while(!this.eat(O.braceR)){if(t)t=!1;else if(this.expect(O.comma),this.afterTrailingComma(O.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,J),e.push(this.finishNode(i,"ImportSpecifier"))}return e},ue.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},ue.isDirectiveCandidate=function(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"===typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var ve=re.prototype;ve.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var o=i[r];this.toAssignable(o,t),"RestElement"!==o.type||"ArrayPattern"!==o.argument.type&&"ObjectPattern"!==o.argument.type||this.raise(o.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},ve.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var o=e[n-1];6===this.options.ecmaVersion&&t&&o&&"RestElement"===o.type&&"Identifier"!==o.argument.type&&this.unexpected(o.argument.start)}return e},ve.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},ve.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==O.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},ve.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case O.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(O.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case O.braceL:return this.parseObj(!0)}return this.parseIdent()},ve.parseBindingList=function(e,t,n){var r=[],i=!0;while(!this.eat(e))if(i?i=!1:this.expect(O.comma),t&&this.type===O.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===O.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),r.push(o),this.type===O.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),r.push(a)}return r},ve.parseBindingListItem=function(e){return e},ve.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(O.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},ve.checkLVal=function(e,t,n){switch(void 0===t&&(t=$),e.type){case"Identifier":t===J&&"let"===e.name&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&(P(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==$&&t!==ne&&this.declareName(e.name,t,e.start);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var o=i[r];this.checkLVal(o,t,n)}break;case"Property":this.checkLVal(e.value,t,n);break;case"ArrayPattern":for(var a=0,s=e.elements;a<s.length;a+=1){var u=s[a];u&&this.checkLVal(u,t,n)}break;case"AssignmentPattern":this.checkLVal(e.left,t,n);break;case"RestElement":this.checkLVal(e.argument,t,n);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}};var me=re.prototype;me.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type)&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,i=e.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var o=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===o&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);else{r="$"+r;var a,s=t[r];if(s)a="init"===o?this.strict&&s.init||s.get||s.set:s.init||s[o],a&&this.raiseRecoverable(i.start,"Redefinition of property");else s=t[r]={init:!1,get:!1,set:!1};s[o]=!0}}},me.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===O.comma){var o=this.startNodeAt(n,r);o.expressions=[i];while(this.eat(O.comma))o.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(o,"SequenceExpression")}return i},me.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,o=-1;t?(i=t.parenthesizedAssign,o=t.trailingComma,t.parenthesizedAssign=t.trailingComma=-1):(t=new se,r=!0);var a=this.start,s=this.startLoc;this.type!==O.parenL&&this.type!==O.name||(this.potentialArrowAt=this.start);var u=this.parseMaybeConditional(e,t);if(n&&(u=n.call(this,u,a,s)),this.type.isAssign){var c=this.startNodeAt(a,s);return c.operator=this.value,c.left=this.type===O.eq?this.toAssignable(u,!1,t):u,r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=c.left.start&&(t.shorthandAssign=-1),this.checkLVal(u),this.next(),c.right=this.parseMaybeAssign(e),this.finishNode(c,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),o>-1&&(t.trailingComma=o),u},me.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(O.question)){var o=this.startNodeAt(n,r);return o.test=i,o.consequent=this.parseMaybeAssign(),this.expect(O.colon),o.alternate=this.parseMaybeAssign(e),this.finishNode(o,"ConditionalExpression")}return i},me.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)||i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,e)},me.parseExprOp=function(e,t,n,r,i){var o=this.type.binop;if(null!=o&&(!i||this.type!==O._in)&&o>r){var a=this.type===O.logicalOR||this.type===O.logicalAND,s=this.type===O.coalesce;s&&(o=O.logicalAND.binop);var u=this.value;this.next();var c=this.start,l=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1),c,l,o,i),p=this.buildBinary(t,n,e,f,u,a||s);return(a&&this.type===O.coalesce||s&&(this.type===O.logicalOR||this.type===O.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(p,t,n,r,i)}return e},me.buildBinary=function(e,t,n,r,i,o){var a=this.startNodeAt(e,t);return a.left=n,a.operator=i,a.right=r,this.finishNode(a,o?"LogicalExpression":"BinaryExpression")},me.parseMaybeUnary=function(e,t){var n,r=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),t=!0;else if(this.type.prefix){var o=this.startNode(),a=this.type===O.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),a?this.checkLVal(o.argument):this.strict&&"delete"===o.operator&&"Identifier"===o.argument.type?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):t=!0,n=this.finishNode(o,a?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return n;while(this.type.postfix&&!this.canInsertSemicolon()){var s=this.startNodeAt(r,i);s.operator=this.value,s.prefix=!1,s.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(s,"UpdateExpression")}}return!t&&this.eat(O.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},me.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,r=this.parseExprAtom(e);if("ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return r;var i=this.parseSubscripts(r,t,n);return e&&"MemberExpression"===i.type&&(e.parenthesizedAssign>=i.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=i.start&&(e.parenthesizedBind=-1)),i},me.parseSubscripts=function(e,t,n,r){var i=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;while(1){var a=this.parseSubscript(e,t,n,r,i,o);if(a.optional&&(o=!0),a===e||"ArrowFunctionExpression"===a.type){if(o){var s=this.startNodeAt(t,n);s.expression=a,a=this.finishNode(s,"ChainExpression")}return a}e=a}},me.parseSubscript=function(e,t,n,r,i,o){var a=this.options.ecmaVersion>=11,s=a&&this.eat(O.questionDot);r&&s&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var u=this.eat(O.bracketL);if(u||s&&this.type!==O.parenL&&this.type!==O.backQuote||this.eat(O.dot)){var c=this.startNodeAt(t,n);c.object=e,c.property=u?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),c.computed=!!u,u&&this.expect(O.bracketR),a&&(c.optional=s),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(O.parenL)){var l=new se,f=this.yieldPos,p=this.awaitPos,h=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var d=this.parseExprList(O.parenR,this.options.ecmaVersion>=8,!1,l);if(i&&!s&&!this.canInsertSemicolon()&&this.eat(O.arrow))return this.checkPatternErrors(l,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=f,this.awaitPos=p,this.awaitIdentPos=h,this.parseArrowExpression(this.startNodeAt(t,n),d,!0);this.checkExpressionErrors(l,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=p||this.awaitPos,this.awaitIdentPos=h||this.awaitIdentPos;var v=this.startNodeAt(t,n);v.callee=e,v.arguments=d,a&&(v.optional=s),e=this.finishNode(v,"CallExpression")}else if(this.type===O.backQuote){(s||o)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var m=this.startNodeAt(t,n);m.tag=e,m.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(m,"TaggedTemplateExpression")}return e},me.parseExprAtom=function(e){this.type===O.slash&&this.readRegexp();var t,n=this.potentialArrowAt===this.start;switch(this.type){case O._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),t=this.startNode(),this.next(),this.type!==O.parenL||this.allowDirectSuper||this.raise(t.start,"super() call outside constructor of a subclass"),this.type!==O.dot&&this.type!==O.bracketL&&this.type!==O.parenL&&this.unexpected(),this.finishNode(t,"Super");case O._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case O.name:var r=this.start,i=this.startLoc,o=this.containsEsc,a=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!o&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(O._function))return this.parseFunction(this.startNodeAt(r,i),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(O.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===O.name&&!o)return a=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(O.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[a],!0)}return a;case O.regexp:var s=this.value;return t=this.parseLiteral(s.value),t.regex={pattern:s.pattern,flags:s.flags},t;case O.num:case O.string:return this.parseLiteral(this.value);case O._null:case O._true:case O._false:return t=this.startNode(),t.value=this.type===O._null?null:this.type===O._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case O.parenL:var u=this.start,c=this.parseParenAndDistinguishExpression(n);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(c)&&(e.parenthesizedAssign=u),e.parenthesizedBind<0&&(e.parenthesizedBind=u)),c;case O.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(O.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case O.braceL:return this.parseObj(!1,e);case O._function:return t=this.startNode(),this.next(),this.parseFunction(t,0);case O._class:return this.parseClass(this.startNode(),!1);case O._new:return this.parseNew();case O.backQuote:return this.parseTemplate();case O._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},me.parseExprImport=function(){var e=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var t=this.parseIdent(!0);switch(this.type){case O.parenL:return this.parseDynamicImport(e);case O.dot:return e.meta=t,this.parseImportMeta(e);default:this.unexpected()}},me.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(O.parenR)){var t=this.start;this.eat(O.comma)&&this.eat(O.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")},me.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),"meta"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),"module"!==this.options.sourceType&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")},me.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),110===t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")},me.parseParenExpression=function(){this.expect(O.parenL);var e=this.parseExpression();return this.expect(O.parenR),e},me.parseParenAndDistinguishExpression=function(e){var t,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o,a=this.start,s=this.startLoc,u=[],c=!0,l=!1,f=new se,p=this.yieldPos,h=this.awaitPos;this.yieldPos=0,this.awaitPos=0;while(this.type!==O.parenR){if(c?c=!1:this.expect(O.comma),i&&this.afterTrailingComma(O.parenR,!0)){l=!0;break}if(this.type===O.ellipsis){o=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===O.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}u.push(this.parseMaybeAssign(!1,f,this.parseParenItem))}var d=this.start,v=this.startLoc;if(this.expect(O.parenR),e&&!this.canInsertSemicolon()&&this.eat(O.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=h,this.parseParenArrowList(n,r,u);u.length&&!l||this.unexpected(this.lastTokStart),o&&this.unexpected(o),this.checkExpressionErrors(f,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(t=this.startNodeAt(a,s),t.expressions=u,this.finishNodeAt(t,"SequenceExpression",d,v)):t=u[0]}else t=this.parseParenExpression();if(this.options.preserveParens){var m=this.startNodeAt(n,r);return m.expression=t,this.finishNode(m,"ParenthesizedExpression")}return t},me.parseParenItem=function(e){return e},me.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var ge=[];me.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(O.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),"target"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction()||this.raiseRecoverable(e.start,"'new.target' can only be used in functions"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc,o=this.type===O._import;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),o&&"ImportExpression"===e.callee.type&&this.raise(r,"Cannot use new with import()"),this.eat(O.parenL)?e.arguments=this.parseExprList(O.parenR,this.options.ecmaVersion>=8,!1):e.arguments=ge,this.finishNode(e,"NewExpression")},me.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===O.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===O.backQuote,this.finishNode(n,"TemplateElement")},me.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});n.quasis=[r];while(!r.tail)this.type===O.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(O.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(O.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")},me.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===O.name||this.type===O.num||this.type===O.string||this.type===O.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===O.star)&&!E.test(this.input.slice(this.lastTokEnd,this.start))},me.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};n.properties=[],this.next();while(!this.eat(O.braceR)){if(r)r=!1;else if(this.expect(O.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(O.braceR))break;var o=this.parseProperty(e,t);e||this.checkPropClash(o,i,t),n.properties.push(o)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},me.parseProperty=function(e,t){var n,r,i,o,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(O.ellipsis))return e?(a.argument=this.parseIdent(!1),this.type===O.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===O.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,t),this.type===O.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(e||t)&&(i=this.start,o=this.startLoc),e||(n=this.eat(O.star)));var s=this.containsEsc;return this.parsePropertyName(a),!e&&!s&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(a)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(O.star),this.parsePropertyName(a,t)):r=!1,this.parsePropertyValue(a,e,n,r,i,o,t,s),this.finishNode(a,"Property")},me.parsePropertyValue=function(e,t,n,r,i,o,a,s){if((n||r)&&this.type===O.colon&&this.unexpected(),this.eat(O.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===O.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r);else if(t||s||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===O.comma||this.type===O.braceR||this.type===O.eq)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,o,e.key):this.type===O.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,o,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var u="get"===e.kind?0:1;if(e.value.params.length!==u){var c=e.value.start;"get"===e.kind?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},me.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(O.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(O.bracketR),e.key;e.computed=!1}return e.key=this.type===O.num||this.type===O.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},me.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},me.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(K(t,r.generator)|Y|(n?X:0)),this.expect(O.parenL),r.params=this.parseBindingList(O.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0),this.yieldPos=i,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(r,"FunctionExpression")},me.parseArrowExpression=function(e,t,n){var r=this.yieldPos,i=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(K(n,!1)|q),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1),this.yieldPos=r,this.awaitPos=i,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")},me.parseFunctionBody=function(e,t,n){var r=t&&this.type!==O.braceL,i=this.strict,o=!1;if(r)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);i&&!a||(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var s=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!i&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLVal(e.id,ne),e.body=this.parseBlock(!1,void 0,o&&!i),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=s}this.exitScope()},me.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if("Identifier"!==r.type)return!1}return!0},me.checkParams=function(e,t){for(var n={},r=0,i=e.params;r<i.length;r+=1){var o=i[r];this.checkLVal(o,Q,t?null:n)}},me.parseExprList=function(e,t,n,r){var i=[],o=!0;while(!this.eat(e)){if(o)o=!1;else if(this.expect(O.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===O.comma?a=null:this.type===O.ellipsis?(a=this.parseSpread(r),r&&this.type===O.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),i.push(a)}return i},me.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&-1!==this.input.slice(t,n).indexOf("\\"))){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}},me.parseIdent=function(e,t){var n=this.startNode();return this.type===O.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!e),this.finishNode(n,"Identifier"),e||(this.checkUnreserved(n),"await"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},me.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===O.semi||this.canInsertSemicolon()||this.type!==O.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(O.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},me.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!1),this.finishNode(e,"AwaitExpression")};var ye=re.prototype;ye.raise=function(e,t){var n=N(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},ye.raiseRecoverable=ye.raise,ye.curPosition=function(){if(this.options.locations)return new L(this.curLine,this.pos-this.lineStart)};var be=re.prototype,_e=function(e){this.flags=e,this["var"]=[],this.lexical=[],this.functions=[]};be.enterScope=function(e){this.scopeStack.push(new _e(e))},be.exitScope=function(){this.scopeStack.pop()},be.treatFunctionsAsVarInScope=function(e){return e.flags&V||!this.inModule&&e.flags&U},be.declareName=function(e,t,n){var r=!1;if(t===J){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i["var"].indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&U&&delete this.undefinedExports[e]}else if(t===te){var o=this.currentScope();o.lexical.push(e)}else if(t===ee){var a=this.currentScope();r=this.treatFunctionsAsVar?a.lexical.indexOf(e)>-1:a.lexical.indexOf(e)>-1||a["var"].indexOf(e)>-1,a.functions.push(e)}else for(var s=this.scopeStack.length-1;s>=0;--s){var u=this.scopeStack[s];if(u.lexical.indexOf(e)>-1&&!(u.flags&Z&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u["var"].push(e),this.inModule&&u.flags&U&&delete this.undefinedExports[e],u.flags&H)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")},be.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0]["var"].indexOf(e.name)&&(this.undefinedExports[e.name]=e)},be.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},be.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&H)return t}},be.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&H&&!(t.flags&q))return t}};var xe=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new D(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},we=re.prototype;function Oe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}we.startNode=function(){return new xe(this,this.start,this.startLoc)},we.startNodeAt=function(e,t){return new xe(this,e,t)},we.finishNode=function(e,t){return Oe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},we.finishNodeAt=function(e,t,n,r){return Oe.call(this,e,t,n,r)};var Ee=function(e,t,n,r,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!i},Se={b_stat:new Ee("{",!1),b_expr:new Ee("{",!0),b_tmpl:new Ee("${",!1),p_stat:new Ee("(",!1),p_expr:new Ee("(",!0),q_tmpl:new Ee("`",!0,!0,(function(e){return e.tryReadTemplateToken()})),f_stat:new Ee("function",!1),f_expr:new Ee("function",!0),f_expr_gen:new Ee("function",!0,!1,null,!0),f_gen:new Ee("function",!1,!1,null,!0)},je=re.prototype;je.initialContext=function(){return[Se.b_stat]},je.braceIsBlock=function(e){var t=this.curContext();return t===Se.f_expr||t===Se.f_stat||(e!==O.colon||t!==Se.b_stat&&t!==Se.b_expr?e===O._return||e===O.name&&this.exprAllowed?E.test(this.input.slice(this.lastTokEnd,this.start)):e===O._else||e===O.semi||e===O.eof||e===O.parenR||e===O.arrow||(e===O.braceL?t===Se.b_stat:e!==O._var&&e!==O._const&&e!==O.name&&!this.exprAllowed):!t.isExpr)},je.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},je.updateContext=function(e){var t,n=this.type;n.keyword&&e===O.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},O.parenR.updateContext=O.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===Se.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},O.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Se.b_stat:Se.b_expr),this.exprAllowed=!0},O.dollarBraceL.updateContext=function(){this.context.push(Se.b_tmpl),this.exprAllowed=!0},O.parenL.updateContext=function(e){var t=e===O._if||e===O._for||e===O._with||e===O._while;this.context.push(t?Se.p_stat:Se.p_expr),this.exprAllowed=!0},O.incDec.updateContext=function(){},O._function.updateContext=O._class.updateContext=function(e){!e.beforeExpr||e===O.semi||e===O._else||e===O._return&&E.test(this.input.slice(this.lastTokEnd,this.start))||(e===O.colon||e===O.braceL)&&this.curContext()===Se.b_stat?this.context.push(Se.f_stat):this.context.push(Se.f_expr),this.exprAllowed=!1},O.backQuote.updateContext=function(){this.curContext()===Se.q_tmpl?this.context.pop():this.context.push(Se.q_tmpl),this.exprAllowed=!1},O.star.updateContext=function(e){if(e===O._function){var t=this.context.length-1;this.context[t]===Se.f_expr?this.context[t]=Se.f_expr_gen:this.context[t]=Se.f_gen}this.exprAllowed=!0},O.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==O.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Ae="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",ke=Ae+" Extended_Pictographic",Ce=ke,Te={9:Ae,10:ke,11:Ce},Me="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Pe="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Ie=Pe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Re=Ie+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Le={9:Pe,10:Ie,11:Re},De={};function Ne(e){var t=De[e]={binary:R(Te[e]+" "+Me),nonBinary:{General_Category:R(Me),Script:R(Le[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}Ne(9),Ne(10),Ne(11);var Fe=re.prototype,ze=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":""),this.unicodeProperties=De[e.options.ecmaVersion>=11?11:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function Be(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function Ue(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function Ve(e){return v(e,!0)||36===e||95===e}function He(e){return m(e,!0)||36===e||95===e||8204===e||8205===e}function Ge(e){return e>=65&&e<=90||e>=97&&e<=122}function We(e){return e>=0&&e<=1114111}function qe(e){return 100===e||68===e||115===e||83===e||119===e||87===e}function Ze(e){return Ge(e)||95===e}function Ye(e){return Ze(e)||Xe(e)}function Xe(e){return e>=48&&e<=57}function Ke(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function $e(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function Qe(e){return e>=48&&e<=55}ze.prototype.reset=function(e,t,n){var r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},ze.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},ze.prototype.at=function(e,t){void 0===t&&(t=!1);var n=this.source,r=n.length;if(e>=r)return-1;var i=n.charCodeAt(e);if(!t&&!this.switchU||i<=55295||i>=57344||e+1>=r)return i;var o=n.charCodeAt(e+1);return o>=56320&&o<=57343?(i<<10)+o-56613888:i},ze.prototype.nextIndex=function(e,t){void 0===t&&(t=!1);var n=this.source,r=n.length;if(e>=r)return r;var i,o=n.charCodeAt(e);return!t&&!this.switchU||o<=55295||o>=57344||e+1>=r||(i=n.charCodeAt(e+1))<56320||i>57343?e+1:e+2},ze.prototype.current=function(e){return void 0===e&&(e=!1),this.at(this.pos,e)},ze.prototype.lookahead=function(e){return void 0===e&&(e=!1),this.at(this.nextIndex(this.pos,e),e)},ze.prototype.advance=function(e){void 0===e&&(e=!1),this.pos=this.nextIndex(this.pos,e)},ze.prototype.eat=function(e,t){return void 0===t&&(t=!1),this.current(t)===e&&(this.advance(t),!0)},Fe.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===t.indexOf(i)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}},Fe.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},Fe.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];-1===e.groupNames.indexOf(r)&&e.raise("Invalid named capture referenced")}},Fe.regexp_disjunction=function(e){this.regexp_alternative(e);while(e.eat(124))this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},Fe.regexp_alternative=function(e){while(e.pos<e.source.length&&this.regexp_eatTerm(e));},Fe.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!!(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},Fe.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},Fe.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},Fe.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},Fe.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},Fe.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},Fe.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},Fe.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},Fe.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},Fe.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},Fe.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},Fe.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!Ue(t)&&(e.lastIntValue=t,e.advance(),!0)},Fe.regexp_eatPatternCharacters=function(e){var t=e.pos,n=0;while(-1!==(n=e.current())&&!Ue(n))e.advance();return e.pos!==t},Fe.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},Fe.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},Fe.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},Fe.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){e.lastStringValue+=Be(e.lastIntValue);while(this.regexp_eatRegExpIdentifierPart(e))e.lastStringValue+=Be(e.lastIntValue);return!0}return!1},Fe.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),Ve(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},Fe.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),He(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},Fe.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},Fe.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},Fe.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},Fe.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},Fe.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},Fe.regexp_eatZero=function(e){return 48===e.current()&&!Xe(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},Fe.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},Fe.regexp_eatControlLetter=function(e){var t=e.current();return!!Ge(t)&&(e.lastIntValue=t%32,e.advance(),!0)},Fe.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){void 0===t&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var o=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var a=e.lastIntValue;if(a>=56320&&a<=57343)return e.lastIntValue=1024*(i-55296)+(a-56320)+65536,!0}e.pos=o,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&We(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1},Fe.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},Fe.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},Fe.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(qe(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},Fe.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i),!0}return!1},Fe.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){P(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")},Fe.regexp_validateUnicodePropertyNameOrValue=function(e,t){e.unicodeProperties.binary.test(t)||e.raise("Invalid property name")},Fe.regexp_eatUnicodePropertyName=function(e){var t=0;e.lastStringValue="";while(Ze(t=e.current()))e.lastStringValue+=Be(t),e.advance();return""!==e.lastStringValue},Fe.regexp_eatUnicodePropertyValue=function(e){var t=0;e.lastStringValue="";while(Ye(t=e.current()))e.lastStringValue+=Be(t),e.advance();return""!==e.lastStringValue},Fe.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},Fe.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},Fe.regexp_classRanges=function(e){while(this.regexp_eatClassAtom(e)){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;!e.switchU||-1!==t&&-1!==n||e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},Fe.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||Qe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},Fe.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},Fe.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!Xe(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},Fe.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},Fe.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;e.lastIntValue=0;while(Xe(n=e.current()))e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},Fe.regexp_eatHexDigits=function(e){var t=e.pos,n=0;e.lastIntValue=0;while(Ke(n=e.current()))e.lastIntValue=16*e.lastIntValue+$e(n),e.advance();return e.pos!==t},Fe.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},Fe.regexp_eatOctalDigit=function(e){var t=e.current();return Qe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},Fe.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!Ke(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+$e(i),e.advance()}return!0};var Je=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new D(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},et=re.prototype;function tt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function nt(e){return"function"!==typeof BigInt?null:BigInt(e.replace(/_/g,""))}function rt(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}et.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Je(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},et.getToken=function(){return this.next(),new Je(this)},"undefined"!==typeof Symbol&&(et[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===O.eof,value:t}}}}),et.curContext=function(){return this.context[this.context.length-1]},et.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(O.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},et.readToken=function(e){return v(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},et.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=57344)return e;var t=this.input.charCodeAt(this.pos+1);return(e<<10)+t-56613888},et.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations){var r;S.lastIndex=t;while((r=S.exec(this.input))&&r.index<this.pos)++this.curLine,this.lineStart=r.index+r[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())},et.skipLineComment=function(e){var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);while(this.pos<this.input.length&&!j(r))r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},et.skipSpace=function(){e:while(this.pos<this.input.length){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&A.test(String.fromCharCode(e))))break e;++this.pos}}},et.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},et.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(O.ellipsis)):(++this.pos,this.finishToken(O.dot))},et.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(O.assign,2):this.finishOp(O.slash,1)},et.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?O.star:O.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,r=O.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(O.assign,n+1):this.finishOp(r,n)},et.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(61===n)return this.finishOp(O.assign,3)}return this.finishOp(124===e?O.logicalOR:O.logicalAND,2)}return 61===t?this.finishOp(O.assign,2):this.finishOp(124===e?O.bitwiseOR:O.bitwiseAND,1)},et.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(O.assign,2):this.finishOp(O.bitwiseXOR,1)},et.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!E.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(O.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(O.assign,2):this.finishOp(O.plusMin,1)},et.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(O.assign,n+1):this.finishOp(O.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(O.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},et.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(O.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(O.arrow)):this.finishOp(61===e?O.eq:O.prefix,1)},et.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(46===t){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(O.questionDot,2)}if(63===t){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(61===r)return this.finishOp(O.assign,3)}return this.finishOp(O.coalesce,2)}}return this.finishOp(O.question,1)},et.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(O.parenL);case 41:return++this.pos,this.finishToken(O.parenR);case 59:return++this.pos,this.finishToken(O.semi);case 44:return++this.pos,this.finishToken(O.comma);case 91:return++this.pos,this.finishToken(O.bracketL);case 93:return++this.pos,this.finishToken(O.bracketR);case 123:return++this.pos,this.finishToken(O.braceL);case 125:return++this.pos,this.finishToken(O.braceR);case 58:return++this.pos,this.finishToken(O.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(O.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(O.prefix,1)}this.raise(this.pos,"Unexpected character '"+rt(e)+"'")},et.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},et.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(E.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===r)t=!0;else if("]"===r&&t)t=!1;else if("/"===r&&!t)break;e="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var o=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(o);var s=this.regexpState||(this.regexpState=new ze(this));s.reset(n,i,a),this.validateRegExpFlags(s),this.validateRegExpPattern(s);var u=null;try{u=new RegExp(i,a)}catch(c){}return this.finishToken(O.regexp,{pattern:i,flags:a,value:u})},et.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&void 0===t,i=n&&48===this.input.charCodeAt(this.pos),o=this.pos,a=0,s=0,u=0,c=null==t?1/0:t;u<c;++u,++this.pos){var l=this.input.charCodeAt(this.pos),f=void 0;if(r&&95===l)i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===s&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===u&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),s=l;else{if(f=l>=97?l-97+10:l>=65?l-65+10:l>=48&&l<=57?l-48:1/0,f>=e)break;s=l,a=a*e+f}}return r&&95===s&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===o||null!=t&&this.pos-o!==t?null:a},et.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return null==n&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n=nt(this.input.slice(t,this.pos)),++this.pos):v(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(O.num,n)},et.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10,void 0,!0)||this.raise(t,"Invalid number");var n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&110===r){var i=nt(this.input.slice(t,this.pos));return++this.pos,v(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(O.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(r=this.input.charCodeAt(++this.pos),43!==r&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),v(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var o=tt(this.input.slice(t,this.pos),n);return this.finishToken(O.num,o)},et.readCodePoint=function(){var e,t=this.input.charCodeAt(this.pos);if(123===t){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else e=this.readHexChar(4);return e},et.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):(j(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(O.string,t)};var it={};et.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==it)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},et.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw it;this.raise(e,t)},et.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==O.template&&this.type!==O.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(O.template,e)):36===n?(this.pos+=2,this.finishToken(O.dollarBraceL)):(++this.pos,this.finishToken(O.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(j(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},et.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(O.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},et.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return rt(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(e){var n=this.pos-1;return this.invalidStringToken(n,"Invalid escape sequence in template string"),null}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),"0"===r&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return j(t)?"":String.fromCharCode(t)}},et.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},et.readWord1=function(){this.containsEsc=!1;var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;while(this.pos<this.input.length){var i=this.fullCharCodeAtPos();if(m(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var o=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?v:m)(a,r)||this.invalidStringToken(o,"Invalid Unicode escape"),e+=rt(a),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},et.readWord=function(){var e=this.readWord1(),t=O.name;return this.keywords.test(e)&&(t=x[e]),this.finishToken(t,e)};var ot="7.4.1";function at(e,t){return re.parse(e,t)}function st(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function ut(e){var t="function"===typeof Map?new Map:void 0;return ut=function(e){if(null===e||!ft(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return lt(e,arguments,ht(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),pt(n,e)},ut(e)}function ct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function lt(e,t,n){return lt=ct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=Function.bind.apply(e,r),o=new i;return n&&pt(o,n.prototype),o},lt.apply(null,arguments)}function ft(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function pt(e,t){return pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},pt(e,t)}function ht(e){return ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ht(e)}re.acorn={Parser:re,version:ot,defaultOptions:F,Position:L,SourceLocation:D,getLineInfo:N,Node:xe,TokenType:g,tokTypes:O,keywordTypes:x,TokContext:Ee,tokContexts:Se,isIdentifierChar:m,isIdentifierStart:v,Token:Je,isNewLine:j,lineBreak:E,lineBreakG:S,nonASCIIwhitespace:A};var dt=function(e){function t(){return e.apply(this,arguments)||this}return st(t,e),t}(ut(Error)),vt=function(e){function t(){return e.apply(this,arguments)||this}return st(t,e),t}(ut(SyntaxError)),mt=function(e){function t(){return e.apply(this,arguments)||this}return st(t,e),t}(ut(ReferenceError)),gt=function(e){function t(){return e.apply(this,arguments)||this}return st(t,e),t}(ut(TypeError)),yt=function(e){function t(){return e.apply(this,arguments)||this}return st(t,e),t}(dt),bt=function(e){function t(){return e.apply(this,arguments)||this}return st(t,e),t}(vt),_t=function(e){function t(){return e.apply(this,arguments)||this}return st(t,e),t}(mt),xt={UnknownError:[3001,"%0",yt],ExecutionTimeOutError:[3002,"Script execution timed out after %0ms",yt],NodeTypeSyntaxError:[1001,"Unknown node type: %0",_t],BinaryOperatorSyntaxError:[1002,"Unknown binary operator: %0",_t],LogicalOperatorSyntaxError:[1003,"Unknown logical operator: %0",_t],UnaryOperatorSyntaxError:[1004,"Unknown unary operator: %0",_t],UpdateOperatorSyntaxError:[1005,"Unknown update operator: %0",_t],ObjectStructureSyntaxError:[1006,"Unknown object structure: %0",_t],AssignmentExpressionSyntaxError:[1007,"Unknown assignment expression: %0",_t],VariableTypeSyntaxError:[1008,"Unknown variable type: %0",_t],ParamTypeSyntaxError:[1009,"Unknown param type: %0",_t],AssignmentTypeSyntaxError:[1010,"Unknown assignment type: %0",_t],FunctionUndefinedReferenceError:[2001,"%0 is not a function",mt],VariableUndefinedReferenceError:[2002,"%0 is not defined",mt],IsNotConstructor:[2003,"%0 is not a constructor",gt]};function wt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ot(e,t,n){return Ot=wt()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=Function.bind.apply(e,r),o=new i;return n&&Et(o,n.prototype),o},Ot.apply(null,arguments)}function Et(e,t){return Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Et(e,t)}var St="0.0.3";function jt(e,t){Object.defineProperty(e,"name",{value:t,writable:!1,enumerable:!1,configurable:!0})}var At=Object.prototype.hasOwnProperty,kt=Symbol("Break"),Ct=Symbol("Continue"),Tt=Symbol("DefaultCase"),Mt=Symbol("EmptyStatementReturn"),Pt=Symbol("WithScopeName"),It=Symbol("SuperScopeName"),Rt=Symbol("RootScopeName"),Lt=Symbol("GlobalScopeName");function Dt(e){return"function"===typeof e}var Nt=function(){function e(e){this.interpreter=e}var t=e.prototype;return t.generator=function(){var e=this.interpreter;function t(){return this.getCurrentScope()}function n(){return this.getGlobalScope()}function r(){return this.getCurrentContext()}return{getOptions:e.getOptions.bind(e),getCurrentScope:t.bind(e),getGlobalScope:n.bind(e),getCurrentContext:r.bind(e),getExecStartTime:e.getExecStartTime.bind(e)}},e}();function Ft(e,t,n){if(void 0===n&&(n=!0),!(e instanceof Nt))throw new Error("Illegal call");if("string"!==typeof t)return t;if(t){var r=e.generator(),i=r.getOptions(),o={timeout:i.timeout,_initEnv:function(){n||this.setCurrentContext(r.getCurrentContext()),this.execStartTime=r.getExecStartTime(),this.execEndTime=this.execStartTime}},a=n?r.getGlobalScope():r.getCurrentScope(),s=new Yt(a,o);return s.evaluate(t)}}function zt(e){if(!(e instanceof Nt))throw new Error("Illegal call");for(var t=e.generator(),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=r.pop(),a=new Yt(t.getGlobalScope(),t.getOptions()),s="\n\t\t    (function anonymous("+r.join(",")+"){\n\t\t        "+o+"\n\t\t    });\n\t\t    ";return a.evaluate(s)}Object.defineProperty(Ft,"__IS_EVAL_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(zt,"__IS_FUNCTION_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1});var Bt=function(e){this.value=e},Ut=function(e){this.value=e},Vt=function(e){this.value=e},Ht=function(e,t,n){void 0===t&&(t=null),this.name=n,this.parent=t,this.data=e,this.labelStack=[]};function Gt(){}function Wt(e,t){return void 0===e&&(e=null),new Ht(Object.create(null),e,t)}function qt(e){return Object.create(e)}var Zt={NaN:NaN,Infinity:1/0,undefined:void 0,Object:Object,Array:Array,String:String,Boolean:Boolean,Number:Number,Date:Date,RegExp:RegExp,Error:Error,URIError:URIError,TypeError:TypeError,RangeError:RangeError,SyntaxError:SyntaxError,ReferenceError:ReferenceError,Float32Array:Float32Array,Float64Array:Float64Array,Uint32Array:Uint32Array,Math:Math,parseInt:parseInt,parseFloat:parseFloat,isNaN:isNaN,isFinite:isFinite,decodeURI:decodeURI,decodeURIComponent:decodeURIComponent,encodeURI:encodeURI,encodeURIComponent:encodeURIComponent,escape:escape,unescape:unescape,eval:Ft,Function:zt};"undefined"!==typeof JSON&&(Zt.JSON=JSON),"undefined"!==typeof Promise&&(Zt.Promise=Promise),"undefined"!==typeof Set&&(Zt.Set=Set),"undefined"!==typeof Map&&(Zt.Map=Map),"undefined"!==typeof Symbol&&(Zt.Symbol=Symbol),"undefined"!==typeof Proxy&&(Zt.Proxy=Proxy),"undefined"!==typeof WeakMap&&(Zt.WeakMap=WeakMap),"undefined"!==typeof WeakSet&&(Zt.WeakSet=WeakSet),"undefined"!==typeof Reflect&&(Zt.Reflect=Reflect);var Yt=function(){function e(t,n){void 0===t&&(t=e.global),void 0===n&&(n={}),this.sourceList=[],this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.isVarDeclMode=!1,this.lastExecNode=null,this.isRunning=!1,this.options={ecmaVersion:n.ecmaVersion||e.ecmaVersion,timeout:n.timeout||0,rootContext:n.rootContext,globalContextInFunction:void 0===n.globalContextInFunction?e.globalContextInFunction:n.globalContextInFunction,_initEnv:n._initEnv},this.context=t||Object.create(null),this.callStack=[],this.initEnvironment(this.context)}var t=e.prototype;return t.initEnvironment=function(e){var t;if(e instanceof Ht)t=e;else{var n=null,r=this.createSuperScope(e);this.options.rootContext&&(n=new Ht(qt(this.options.rootContext),r,Rt)),t=new Ht(e,n||r,Lt)}this.globalScope=t,this.currentScope=this.globalScope,this.globalContext=t.data,this.currentContext=t.data,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.execStartTime=Date.now(),this.execEndTime=this.execStartTime;var i=this.options._initEnv;i&&i.call(this)},t.getExecStartTime=function(){return this.execStartTime},t.getExecutionTime=function(){return this.execEndTime-this.execStartTime},t.setExecTimeout=function(e){void 0===e&&(e=0),this.options.timeout=e},t.getOptions=function(){return this.options},t.getGlobalScope=function(){return this.globalScope},t.getCurrentScope=function(){return this.currentScope},t.getCurrentContext=function(){return this.currentContext},t.isInterruptThrow=function(e){return e instanceof yt||e instanceof _t||e instanceof bt},t.createSuperScope=function(e){var t=Object.assign({},Zt),n=Object.keys(t);return n.forEach((function(n){n in e&&delete t[n]})),new Ht(t,null,It)},t.setCurrentContext=function(e){this.currentContext=e},t.setCurrentScope=function(e){this.currentScope=e},t.evaluate=function(t){var n;if(void 0===t&&(t=""),t)return n=at(t,{ranges:!0,locations:!0,ecmaVersion:this.options.ecmaVersion||e.ecmaVersion}),this.evaluateNode(n,t)},t.appendCode=function(e){return this.evaluate(e)},t.evaluateNode=function(e,t){var n=this;void 0===t&&(t=""),this.value=void 0,this.source=t,this.sourceList.push(t),this.isRunning=!0,this.execStartTime=Date.now(),this.execEndTime=this.execStartTime,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var r=this.getCurrentScope(),i=this.getCurrentContext(),o=r.labelStack.concat([]),a=this.callStack.concat([]),s=function(){n.setCurrentScope(r),n.setCurrentContext(i),r.labelStack=o,n.callStack=a};try{var u=this.createClosure(e);this.addDeclarationsToScope(this.collectDeclVars,this.collectDeclFuncs,this.getCurrentScope()),u()}catch(c){throw c}finally{s(),this.execEndTime=Date.now()}return this.isRunning=!1,this.getValue()},t.createErrorMessage=function(e,t,n){var r=e[1].replace("%0",String(t));return null!==n&&(r+=this.getNodePosition(n||this.lastExecNode)),r},t.createError=function(e,t){return new t(e)},t.createThrowError=function(e,t){return this.createError(e,t)},t.createInternalThrowError=function(e,t,n){return this.createError(this.createErrorMessage(e,t,n),e[2])},t.checkTimeout=function(){if(!this.isRunning)return!1;var e=this.options.timeout||0,t=Date.now();return t-this.execStartTime>e},t.getNodePosition=function(e){if(e){var t="";return e.loc?" ["+e.loc.start.line+":"+e.loc.start.column+"]"+t:""}return""},t.createClosure=function(e){var t,n=this;switch(e.type){case"BinaryExpression":t=this.binaryExpressionHandler(e);break;case"LogicalExpression":t=this.logicalExpressionHandler(e);break;case"UnaryExpression":t=this.unaryExpressionHandler(e);break;case"UpdateExpression":t=this.updateExpressionHandler(e);break;case"ObjectExpression":t=this.objectExpressionHandler(e);break;case"ArrayExpression":t=this.arrayExpressionHandler(e);break;case"CallExpression":t=this.callExpressionHandler(e);break;case"NewExpression":t=this.newExpressionHandler(e);break;case"MemberExpression":t=this.memberExpressionHandler(e);break;case"ThisExpression":t=this.thisExpressionHandler(e);break;case"SequenceExpression":t=this.sequenceExpressionHandler(e);break;case"Literal":t=this.literalHandler(e);break;case"Identifier":t=this.identifierHandler(e);break;case"AssignmentExpression":t=this.assignmentExpressionHandler(e);break;case"FunctionDeclaration":t=this.functionDeclarationHandler(e);break;case"VariableDeclaration":t=this.variableDeclarationHandler(e);break;case"BlockStatement":case"Program":t=this.programHandler(e);break;case"ExpressionStatement":t=this.expressionStatementHandler(e);break;case"EmptyStatement":t=this.emptyStatementHandler(e);break;case"ReturnStatement":t=this.returnStatementHandler(e);break;case"FunctionExpression":t=this.functionExpressionHandler(e);break;case"IfStatement":t=this.ifStatementHandler(e);break;case"ConditionalExpression":t=this.conditionalExpressionHandler(e);break;case"ForStatement":t=this.forStatementHandler(e);break;case"WhileStatement":t=this.whileStatementHandler(e);break;case"DoWhileStatement":t=this.doWhileStatementHandler(e);break;case"ForInStatement":t=this.forInStatementHandler(e);break;case"WithStatement":t=this.withStatementHandler(e);break;case"ThrowStatement":t=this.throwStatementHandler(e);break;case"TryStatement":t=this.tryStatementHandler(e);break;case"ContinueStatement":t=this.continueStatementHandler(e);break;case"BreakStatement":t=this.breakStatementHandler(e);break;case"SwitchStatement":t=this.switchStatementHandler(e);break;case"LabeledStatement":t=this.labeledStatementHandler(e);break;case"DebuggerStatement":t=this.debuggerStatementHandler(e);break;default:throw this.createInternalThrowError(xt.NodeTypeSyntaxError,e.type,e)}return function(){var r=n.options.timeout;if(r&&r>0&&n.checkTimeout())throw n.createInternalThrowError(xt.ExecutionTimeOutError,r,null);return n.lastExecNode=e,t.apply(void 0,arguments)}},t.binaryExpressionHandler=function(e){var t=this,n=this.createClosure(e.left),r=this.createClosure(e.right);return function(){var i=n(),o=r();switch(e.operator){case"==":return i==o;case"!=":return i!=o;case"===":return i===o;case"!==":return i!==o;case"<":return i<o;case"<=":return i<=o;case">":return i>o;case">=":return i>=o;case"<<":return i<<o;case">>":return i>>o;case">>>":return i>>>o;case"+":return i+o;case"-":return i-o;case"*":return i*o;case"**":return Math.pow(i,o);case"/":return i/o;case"%":return i%o;case"|":return i|o;case"^":return i^o;case"&":return i&o;case"in":return i in o;case"instanceof":return i instanceof o;default:throw t.createInternalThrowError(xt.BinaryOperatorSyntaxError,e.operator,e)}}},t.logicalExpressionHandler=function(e){var t=this,n=this.createClosure(e.left),r=this.createClosure(e.right);return function(){switch(e.operator){case"||":return n()||r();case"&&":return n()&&r();default:throw t.createInternalThrowError(xt.LogicalOperatorSyntaxError,e.operator,e)}}},t.unaryExpressionHandler=function(e){var t=this;switch(e.operator){case"delete":var n=this.createObjectGetter(e.argument),r=this.createNameGetter(e.argument);return function(){var e=n(),t=r();return delete e[t]};default:var i;if("typeof"===e.operator&&"Identifier"===e.argument.type){var o=this.createObjectGetter(e.argument),a=this.createNameGetter(e.argument);i=function(){return o()[a()]}}else i=this.createClosure(e.argument);return function(){var n=i();switch(e.operator){case"-":return-n;case"+":return+n;case"!":return!n;case"~":return~n;case"void":return;case"typeof":return typeof n;default:throw t.createInternalThrowError(xt.UnaryOperatorSyntaxError,e.operator,e)}}}},t.updateExpressionHandler=function(e){var t=this,n=this.createObjectGetter(e.argument),r=this.createNameGetter(e.argument);return function(){var i=n(),o=r();switch(t.assertVariable(i,o,e),e.operator){case"++":return e.prefix?++i[o]:i[o]++;case"--":return e.prefix?--i[o]:i[o]--;default:throw t.createInternalThrowError(xt.UpdateOperatorSyntaxError,e.operator,e)}}},t.objectExpressionHandler=function(e){var t=this,n=[];function r(e){return"Identifier"===e.type?e.name:"Literal"===e.type?e.value:this.throwError(xt.ObjectStructureSyntaxError,e.type,e)}var i=Object.create(null);return e.properties.forEach((function(e){var o=e.kind,a=r(e.key);i[a]&&"init"!==o||(i[a]={}),i[a][o]=t.createClosure(e.value),n.push({key:a,property:e})})),function(){for(var e={},t=n.length,r=0;r<t;r++){var o=n[r],a=o.key,s=i[a],u=s.init?s.init():void 0,c=s.get?s.get():function(){},l=s.set?s.set():function(e){};if("set"in s||"get"in s){var f={configurable:!0,enumerable:!0,get:c,set:l};Object.defineProperty(e,a,f)}else{var p=o.property,h=p.kind;"Identifier"!==p.key.type||"FunctionExpression"!==p.value.type||"init"!==h||p.value.id||jt(u,p.key.name),e[a]=u}}return e}},t.arrayExpressionHandler=function(e){var t=this,n=e.elements.map((function(e){return e?t.createClosure(e):e}));return function(){for(var e=n.length,t=Array(e),r=0;r<e;r++){var i=n[r];i&&(t[r]=i())}return t}},t.safeObjectGet=function(e,t,n){return e[t]},t.createCallFunctionGetter=function(e){var t=this;switch(e.type){case"MemberExpression":var n=this.createClosure(e.object),r=this.createMemberKeyGetter(e),i=this.source;return function(){var o=n(),a=r(),s=t.safeObjectGet(o,a,e);if(!s||!Dt(s)){var u=i.slice(e.start,e.end);throw t.createInternalThrowError(xt.FunctionUndefinedReferenceError,u,e)}return s.__IS_EVAL_FUNC?function(e){return s(new Nt(t),e,!0)}:s.__IS_FUNCTION_FUNC?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return s.apply(void 0,[new Nt(t)].concat(n))}:s.bind(o)};default:var o=this.createClosure(e);return function(){var n="";"Identifier"===e.type&&(n=e.name);var r=o();if(!r||!Dt(r))throw t.createInternalThrowError(xt.FunctionUndefinedReferenceError,n,e);if("Identifier"===e.type&&r.__IS_EVAL_FUNC&&"eval"===n)return function(e){var i=t.getScopeFromName(n,t.getCurrentScope()),o=i.name===It||i.name===Lt||i.name===Rt;return r(new Nt(t),e,!o)};if(r.__IS_EVAL_FUNC)return function(e){return r(new Nt(t),e,!0)};if(r.__IS_FUNCTION_FUNC)return function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return r.apply(void 0,[new Nt(t)].concat(n))};var i=t.options.globalContextInFunction;if("Identifier"===e.type){var a=t.getIdentifierScope(e);a.name===Pt&&(i=a.data)}return r.bind(i)}}},t.callExpressionHandler=function(e){var t=this,n=this.createCallFunctionGetter(e.callee),r=e.arguments.map((function(e){return t.createClosure(e)}));return function(){return n().apply(void 0,r.map((function(e){return e()})))}},t.functionExpressionHandler=function(e){var t=this,n=this,r=this.source,i=this.collectDeclVars,o=this.collectDeclFuncs;this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var a=e.id?e.id.name:"",s=e.params.length,u=e.params.map((function(e){return t.createParamNameGetter(e)})),c=this.createClosure(e.body),l=this.collectDeclVars,f=this.collectDeclFuncs;return this.collectDeclVars=i,this.collectDeclFuncs=o,function(){var t=n.getCurrentScope(),i=function e(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];n.callStack.push(""+a);var s=n.getCurrentScope(),p=Wt(t,"FunctionScope("+a+")");n.setCurrentScope(p),n.addDeclarationsToScope(l,f,p),a&&(p.data[a]=e),p.data["arguments"]=arguments,u.forEach((function(e,t){p.data[e()]=i[t]}));var h=n.getCurrentContext();n.setCurrentContext(this);var d=c();if(n.setCurrentContext(h),n.setCurrentScope(s),n.callStack.pop(),d instanceof Bt)return d.value};return jt(i,a),Object.defineProperty(i,"length",{value:s,writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(i,"toString",{value:function(){return r.slice(e.start,e.end)},writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(i,"valueOf",{value:function(){return r.slice(e.start,e.end)},writable:!0,configurable:!0,enumerable:!1}),i}},t.newExpressionHandler=function(e){var t=this,n=this.source,r=this.createClosure(e.callee),i=e.arguments.map((function(e){return t.createClosure(e)}));return function(){var o=r();if(!Dt(o)||o.__IS_EVAL_FUNC){var a=e.callee,s=n.slice(a.start,a.end);throw t.createInternalThrowError(xt.IsNotConstructor,s,e)}return o.__IS_FUNCTION_FUNC?o.apply(void 0,[new Nt(t)].concat(i.map((function(e){return e()})))):Ot(o,i.map((function(e){return e()})))}},t.memberExpressionHandler=function(e){var t=this.createClosure(e.object),n=this.createMemberKeyGetter(e);return function(){var e=t(),r=n();return e[r]}},t.thisExpressionHandler=function(e){var t=this;return function(){return t.getCurrentContext()}},t.sequenceExpressionHandler=function(e){var t=this,n=e.expressions.map((function(e){return t.createClosure(e)}));return function(){for(var e,t=n.length,r=0;r<t;r++){var i=n[r];e=i()}return e}},t.literalHandler=function(e){return function(){return e.regex?new RegExp(e.regex.pattern,e.regex.flags):e.value}},t.identifierHandler=function(e){var t=this;return function(){var n=t.getCurrentScope(),r=t.getScopeDataFromName(e.name,n);return t.assertVariable(r,e.name,e),r[e.name]}},t.getIdentifierScope=function(e){var t=this.getCurrentScope(),n=this.getScopeFromName(e.name,t);return n},t.assignmentExpressionHandler=function(e){var t=this;"Identifier"!==e.left.type||"FunctionExpression"!==e.right.type||e.right.id||(e.right.id={type:"Identifier",name:e.left.name});var n=this.createObjectGetter(e.left),r=this.createNameGetter(e.left),i=this.createClosure(e.right);return function(){var o=n(),a=r(),s=i();switch("="!==e.operator&&t.assertVariable(o,a,e),e.operator){case"=":return o[a]=s;case"+=":return o[a]+=s;case"-=":return o[a]-=s;case"*=":return o[a]*=s;case"**=":return o[a]=Math.pow(o[a],s);case"/=":return o[a]/=s;case"%=":return o[a]%=s;case"<<=":return o[a]<<=s;case">>=":return o[a]>>=s;case">>>=":return o[a]>>>=s;case"&=":return o[a]&=s;case"^=":return o[a]^=s;case"|=":return o[a]|=s;default:throw t.createInternalThrowError(xt.AssignmentExpressionSyntaxError,e.type,e)}}},t.functionDeclarationHandler=function(e){if(e.id){var t=this.functionExpressionHandler(e);Object.defineProperty(t,"isFunctionDeclareClosure",{value:!0,writable:!1,configurable:!1,enumerable:!1}),this.funcDeclaration(e.id.name,t)}return function(){return Mt}},t.getVariableName=function(e){if("Identifier"===e.type)return e.name;throw this.createInternalThrowError(xt.VariableTypeSyntaxError,e.type,e)},t.variableDeclarationHandler=function(e){for(var t,n=this,r=[],i=0;i<e.declarations.length;i++){var o=e.declarations[i];this.varDeclaration(this.getVariableName(o.id)),o.init&&r.push({type:"AssignmentExpression",operator:"=",left:o.id,right:o.init})}return r.length&&(t=this.createClosure({type:"BlockStatement",body:r})),function(){if(t){var e=n.isVarDeclMode;n.isVarDeclMode=!0,t(),n.isVarDeclMode=e}return Mt}},t.assertVariable=function(e,t,n){if(e===this.globalScope.data&&!(t in e))throw this.createInternalThrowError(xt.VariableUndefinedReferenceError,t,n)},t.programHandler=function(e){var t=this,n=e.body.map((function(e){return t.createClosure(e)}));return function(){for(var e=Mt,r=0;r<n.length;r++){var i=n[r],o=t.setValue(i());if(o!==Mt&&(e=o,e instanceof Bt||e instanceof Ut||e instanceof Vt||e===kt||e===Ct))break}return e}},t.expressionStatementHandler=function(e){return this.createClosure(e.expression)},t.emptyStatementHandler=function(e){return function(){return Mt}},t.returnStatementHandler=function(e){var t=e.argument?this.createClosure(e.argument):Gt;return function(){return new Bt(t())}},t.ifStatementHandler=function(e){var t=this.createClosure(e.test),n=this.createClosure(e.consequent),r=e.alternate?this.createClosure(e.alternate):function(){return Mt};return function(){return t()?n():r()}},t.conditionalExpressionHandler=function(e){return this.ifStatementHandler(e)},t.forStatementHandler=function(e){var t=this,n=Gt,r=e.test?this.createClosure(e.test):function(){return!0},i=Gt,o=this.createClosure(e.body);return"ForStatement"===e.type&&(n=e.init?this.createClosure(e.init):n,i=e.update?this.createClosure(e.update):Gt),function(a){var s,u=Mt,c="DoWhileStatement"===e.type;for(a&&"LabeledStatement"===a.type&&(s=a.label.name),n();c||r();i()){c=!1;var l=t.setValue(o());if(l!==Mt&&l!==Ct){if(l===kt)break;if(u=l,u instanceof Vt&&u.value===s)u=Mt;else if(u instanceof Bt||u instanceof Ut||u instanceof Vt)break}}return u}},t.whileStatementHandler=function(e){return this.forStatementHandler(e)},t.doWhileStatementHandler=function(e){return this.forStatementHandler(e)},t.forInStatementHandler=function(e){var t=this,n=e.left,r=this.createClosure(e.right),i=this.createClosure(e.body);return"VariableDeclaration"===e.left.type&&(this.createClosure(e.left)(),n=e.left.declarations[0].id),function(e){var o,a,s=Mt;e&&"LabeledStatement"===e.type&&(o=e.label.name);var u=r();for(a in u){t.assignmentExpressionHandler({type:"AssignmentExpression",operator:"=",left:n,right:{type:"Literal",value:a}})();var c=t.setValue(i());if(c!==Mt&&c!==Ct){if(c===kt)break;if(s=c,s instanceof Vt&&s.value===o)s=Mt;else if(s instanceof Bt||s instanceof Ut||s instanceof Vt)break}}return s}},t.withStatementHandler=function(e){var t=this,n=this.createClosure(e.object),r=this.createClosure(e.body);return function(){var e=n(),i=t.getCurrentScope(),o=new Ht(e,i,Pt);t.setCurrentScope(o);var a=t.setValue(r());return t.setCurrentScope(i),a}},t.throwStatementHandler=function(e){var t=this,n=this.createClosure(e.argument);return function(){throw t.setValue(void 0),n()}},t.tryStatementHandler=function(e){var t=this,n=this.createClosure(e.block),r=e.handler?this.catchClauseHandler(e.handler):null,i=e.finalizer?this.createClosure(e.finalizer):null;return function(){var e,o,a=t.getCurrentScope(),s=t.getCurrentContext(),u=a.labelStack.concat([]),c=t.callStack.concat([]),l=Mt,f=function(){t.setCurrentScope(a),t.setCurrentContext(s),a.labelStack=u,t.callStack=c};try{l=t.setValue(n()),l instanceof Bt&&(e=l)}catch(p){if(f(),t.isInterruptThrow(p))throw p;if(r)try{l=t.setValue(r(p)),l instanceof Bt&&(e=l)}catch(p){if(f(),t.isInterruptThrow(p))throw p;o=p}}if(i)try{l=i(),l instanceof Bt&&(e=l)}catch(p){if(f(),t.isInterruptThrow(p))throw p;o=p}if(o)throw o;return e||l}},t.catchClauseHandler=function(e){var t=this,n=this.createParamNameGetter(e.param),r=this.createClosure(e.body);return function(e){var i,o=t.getCurrentScope(),a=o.data,s=n(),u=At.call(a,s),c=a[s];return a[s]=e,i=r(),u?a[s]=c:delete a[s],i}},t.continueStatementHandler=function(e){return function(){return e.label?new Vt(e.label.name):Ct}},t.breakStatementHandler=function(e){return function(){return e.label?new Ut(e.label.name):kt}},t.switchStatementHandler=function(e){var t=this,n=this.createClosure(e.discriminant),r=e.cases.map((function(e){return t.switchCaseHandler(e)}));return function(){for(var e,i,o,a=n(),s=!1,u=0;u<r.length;u++){var c=r[u](),l=c.testClosure();if(l!==Tt){if(s||l===a){if(s=!0,i=t.setValue(c.bodyClosure()),i===Mt)continue;if(i===kt)break;if(e=i,e instanceof Bt||e instanceof Ut||e instanceof Vt||e===Ct)break}}else o=c}if(!s&&o){i=t.setValue(o.bodyClosure());var f=i===Mt||i===kt||i===Ct;f||(e=i)}return e}},t.switchCaseHandler=function(e){var t=e.test?this.createClosure(e.test):function(){return Tt},n=this.createClosure({type:"BlockStatement",body:e.consequent});return function(){return{testClosure:t,bodyClosure:n}}},t.labeledStatementHandler=function(e){var t=this,n=e.label.name,r=this.createClosure(e.body);return function(){var i,o=t.getCurrentScope();return o.labelStack.push(n),i=r(e),i instanceof Ut&&i.value===n&&(i=Mt),o.labelStack.pop(),i}},t.debuggerStatementHandler=function(e){return function(){return Mt}},t.createParamNameGetter=function(e){if("Identifier"===e.type)return function(){return e.name};throw this.createInternalThrowError(xt.ParamTypeSyntaxError,e.type,e)},t.createObjectKeyGetter=function(e){var t;return t="Identifier"===e.type?function(){return e.name}:this.createClosure(e),function(){return t()}},t.createMemberKeyGetter=function(e){return e.computed?this.createClosure(e.property):this.createObjectKeyGetter(e.property)},t.createObjectGetter=function(e){var t=this;switch(e.type){case"Identifier":return function(){return t.getScopeDataFromName(e.name,t.getCurrentScope())};case"MemberExpression":return this.createClosure(e.object);default:throw this.createInternalThrowError(xt.AssignmentTypeSyntaxError,e.type,e)}},t.createNameGetter=function(e){switch(e.type){case"Identifier":return function(){return e.name};case"MemberExpression":return this.createMemberKeyGetter(e);default:throw this.createInternalThrowError(xt.AssignmentTypeSyntaxError,e.type,e)}},t.varDeclaration=function(e){var t=this.collectDeclVars;t[e]=void 0},t.funcDeclaration=function(e,t){var n=this.collectDeclFuncs;n[e]=t},t.addDeclarationsToScope=function(e,t,n){var r=n.data;for(var i in t){var o=t[i];r[i]=o?o():o}for(var a in e)a in r||(r[a]=void 0)},t.getScopeValue=function(e,t){var n=this.getScopeFromName(e,t);return n.data[e]},t.getScopeDataFromName=function(e,t){return this.getScopeFromName(e,t).data},t.getScopeFromName=function(e,t){var n=t;do{if(e in n.data)return n}while(n=n.parent);return this.globalScope},t.setValue=function(e){var t=this.callStack.length;return this.isVarDeclMode||t||e===Mt||e===kt||e===Ct||e instanceof Ut||e instanceof Vt||(this.value=e instanceof Bt?e.value:e),e},t.getValue=function(){return this.value},e}();function Xt(e){return void 0===e&&(e=Object.create(null)),e}function Kt(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={});var r=n.parsingContext,i=void 0===n.timeout?0:n.timeout,o="\n    (function anonymous("+t.join(",")+"){\n         "+e+"\n    });\n    ",a=new Yt(r,{ecmaVersion:n.ecmaVersion,timeout:i,rootContext:n.rootContext,globalContextInFunction:n.globalContextInFunction});return a.evaluate(o)}function $t(e,t,n){var r=new Yt(t,n);return r.evaluate(e)}Yt.version=St,Yt.eval=Ft,Yt.Function=zt,Yt.ecmaVersion=5,Yt.globalContextInFunction=void 0,Yt.global=Object.create(null);var Qt=$t,Jt=function(){function e(e){this._code=e}var t=e.prototype;return t.runInContext=function(e){return $t(this._code,e)},t.runInNewContext=function(e){return $t(this._code,e)},e}(),en=function(e,t,n){return $t(e,t,n)},tn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.pop();return Kt(r||"",t)};t["default"]=en},"t/kZ":function(e,t,n){"use strict";var r=n("R5yR")["default"];function i(){var e=n("q1tI");return i=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var o=n("dEAq");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t=c(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){var t=l(e,"string");return"symbol"===typeof t?t:String(t)}function l(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function f(e,t){return m(e)||v(e,t)||h(e,t)||p()}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){if(e){if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function m(e){if(Array.isArray(e))return e}var g=function(e){var t=(0,i().useContext)(o.context),n=t.locale,a=t.routes,s=t.config.locales,u=(0,i().useState)([]),c=f(u,2),l=c[0],p=c[1],h=(0,i().useState)([]),d=f(h,2),v=d[0],m=d[1];return(0,i().useEffect)((function(){p(a.filter((function(e){var t=e.title,r=e.meta,i=(null===r||void 0===r?void 0:r.locale)===n,o=!(null===r||void 0===r?void 0:r.locale)&&(!s.length||n===s[0].name);return t&&(o||i)})).reduce((function(e,t){var n,i,o,a={title:(null===(n=t.meta)||void 0===n?void 0:n.title)||t.title,path:t.path};return(null===(i=t.meta)||void 0===i?void 0:i.group)&&(a.parent=t.meta.group),e.push(a),e.push.apply(e,r(((null===(o=t.meta)||void 0===o?void 0:o.slugs)||[]).filter((function(e){var n,r=e.value;return r!==((null===(n=t.meta)||void 0===n?void 0:n.title)||t.title)})).map((function(e){return{title:e.value,path:"".concat(t.path,"#").concat(e.heading),parent:a}})))),e}),[]))}),[a.length,n]),(0,i().useEffect)((function(){var t=null===e||void 0===e?void 0:e.trim().toUpperCase();if(t){for(var n=[],r=0;r<l.length;r+=1)l[r].title.toUpperCase().indexOf(t)>-1&&n.push(l[r]);m(n)}else m([])}),[e,l.length]),v},y=function(){var e=(0,i().useContext)(o.context),t=e.config.algolia,n=(0,i().useCallback)((function(e){window.docsearch(s({inputSelector:e},t))}),[t]);return n},b=function(e){var t=(0,i().useContext)(o.context),n=t.config,r=g(e),a=y();return n.algolia?a:r};t["default"]=b},t23M:function(e,t,n){"use strict";var r=n("wx14"),i=n("q1tI"),o=n("Zm9Q"),a=(n("Kwbf"),n("VTBJ")),s=n("c+Xe"),u=n("m+aA"),c=n("bdgK"),l=new Map;function f(e){e.forEach((function(e){var t,n=e.target;null===(t=l.get(n))||void 0===t||t.forEach((function(e){return e(n)}))}))}var p=new c["a"](f);function h(e,t){l.has(e)||(l.set(e,new Set),p.observe(e)),l.get(e).add(t)}function d(e,t){l.has(e)&&(l.get(e)["delete"](t),l.get(e).size||(p.unobserve(e),l["delete"](e)))}var v=n("1OyB"),m=n("vuIU"),g=n("Ji7U"),y=n("LK+K"),b=function(e){Object(g["a"])(n,e);var t=Object(y["a"])(n);function n(){return Object(v["a"])(this,n),t.apply(this,arguments)}return Object(m["a"])(n,[{key:"render",value:function(){return this.props.children}}]),n}(i["Component"]),_=i["createContext"](null);function x(e){var t=e.children,n=e.onBatchResize,r=i["useRef"](0),o=i["useRef"]([]),a=i["useContext"](_),s=i["useCallback"]((function(e,t,i){r.current+=1;var s=r.current;o.current.push({size:e,element:t,data:i}),Promise.resolve().then((function(){s===r.current&&(null===n||void 0===n||n(o.current),o.current=[])})),null===a||void 0===a||a(e,t,i)}),[n,a]);return i["createElement"](_.Provider,{value:s},t)}function w(e,t){var n=e.children,r=e.disabled,o=i["useRef"](null),c=i["useRef"](null),l=i["useContext"](_),f="function"===typeof n,p=f?n(o):n,v=i["useRef"]({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),m=!f&&i["isValidElement"](p)&&Object(s["c"])(p),g=m?p.ref:null,y=i["useMemo"]((function(){return Object(s["a"])(g,o)}),[g,o]),x=function(){return Object(u["a"])(o.current)||Object(u["a"])(c.current)};i["useImperativeHandle"](t,(function(){return x()}));var w=i["useRef"](e);w.current=e;var O=i["useCallback"]((function(e){var t=w.current,n=t.onResize,r=t.data,i=e.getBoundingClientRect(),o=i.width,s=i.height,u=e.offsetWidth,c=e.offsetHeight,f=Math.floor(o),p=Math.floor(s);if(v.current.width!==f||v.current.height!==p||v.current.offsetWidth!==u||v.current.offsetHeight!==c){var h={width:f,height:p,offsetWidth:u,offsetHeight:c};v.current=h;var d=u===Math.round(o)?o:u,m=c===Math.round(s)?s:c,g=Object(a["a"])(Object(a["a"])({},h),{},{offsetWidth:d,offsetHeight:m});null===l||void 0===l||l(g,e,r),n&&Promise.resolve().then((function(){n(g,e)}))}}),[]);return i["useEffect"]((function(){var e=x();return e&&!r&&h(e,O),function(){return d(e,O)}}),[o.current,r]),i["createElement"](b,{ref:c},m?i["cloneElement"](p,{ref:y}):p)}var O=i["forwardRef"](w);var E=O,S="rc-observer-key";function j(e,t){var n=e.children,a="function"===typeof n?[n]:Object(o["a"])(n);return a.map((function(n,o){var a=(null===n||void 0===n?void 0:n.key)||"".concat(S,"-").concat(o);return i["createElement"](E,Object(r["a"])({},e,{key:a,ref:0===o?t:void 0}),n)}))}var A=i["forwardRef"](j);A.Collection=x;t["a"]=A},t2Dn:function(e,t,n){var r=n("hypo"),i=n("ljhN");function o(e,t,n){(void 0!==n&&!i(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}e.exports=o},tB8F:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"rootContainer",(function(){return p}));var i={};n.r(i),n.d(i,"rootContainer",(function(){return O}));n("pNMO"),n("4Brf"),n("tjZM"),n("3I1R"),n("7+kd"),n("KhsS"),n("gOCb"),n("a57n"),n("GXvd"),n("I1Gw"),n("gXIK"),n("lEou"),n("ma9I"),n("TeQF"),n("BIHw"),n("XbcX"),n("pjDv"),n("yq1k"),n("yXV3"),n("4mDm"),n("uqXc"),n("2B1R"),n("E9XD"),n("9N29"),n("Junv"),n("+2oP"),n("ToJy"),n("94Xl"),n("pDQq"),n("QGkA"),n("c9m3"),n("wZ/5"),n("rOQg"),n("7+zs"),n("tW5y"),n("DEfu"),n("Tskq"),n("Uydy"),n("QFcT"),n("I9xj"),n("w1rZ"),n("JevA"),n("toAj"),n("zKZe"),n("Eqjn"),n("5xtp"),n("T63A"),n("wfmh"),n("27RR"),n("v5b1"),n("W/eh"),n("07d7"),n("B6y2"),n("rNhl"),n("4l63"),n("5s+n"),n("p532"),n("pv2x"),n("SuFq"),n("ftMj"),n("TWNs"),n("rB9j"),n("U3f4"),n("JfAA"),n("YGK4"),n("inlA"),n("JTJg"),n("Rm1S"),n("hDyC"),n("TZCg"),n("UxlC"),n("hByQ"),n("EnZy"),n("LKBx"),n("SYor"),n("HiXI"),n("7ueG"),n("z8NH"),n("SpvK"),n("/Yfv"),n("iwkZ"),n("FDzp"),n("XMab"),n("ilnZ"),n("hMMk"),n("+ywr"),n("c162"),n("IL/d"),n("gvgV"),n("YL0P"),n("7JcK"),n("PF2M"),n("IZzc"),n("s5qe"),n("cvf0"),n("ENF9"),n("H+LF"),n("66V8"),n("iIM6"),n("2tOg"),n("gYJb"),n("EDT/"),n("j+VE"),n("wgYD"),n("R3/m"),n("l/vG"),n("0q/z"),n("n5pg"),n("zu+z"),n("ihrJ"),n("Q7Pz"),n("unQa"),n("Vnov"),n("nIe3"),n("CUyW"),n("qc1c"),n("5921"),n("VOz1"),n("Thag"),n("9D6x"),n("cOPa"),n("vdRX"),n("KrxN"),n("SL6q"),n("lehK"),n("eO0o"),n("NqR8"),n("w7s6"),n("uWhJ"),n("WPzJ"),n("NV22"),n("ny8l"),n("a5/B"),n("vzwy"),n("pevA"),n("8go2"),n("DrvE"),n("kCkZ"),n("++zV"),n("Y4C7"),n("ZsH6"),n("vZi8"),n("5r1n"),n("sQ9d"),n("bdeN"),n("AwgR"),n("qgGA"),n("49+q"),n("AVoK"),n("hcok"),n("dNT4"),n("3uUd"),n("tijO"),n("1kQv"),n("ZY7T"),n("C1JJ"),n("lmH4"),n("Co1j"),n("5JV0"),n("ctDJ"),n("8r4s"),n("JwUS"),n("qaHo"),n("Si40"),n("BGb9"),n("fN96"),n("UzNg"),n("DhMN"),n("rZ3M"),n("apDx"),n("4XaG"),n("6V7H"),n("cfiF"),n("702D"),n("TJ79"),n("Z4nd"),n("8STE"),n("spTT"),n("rb3L"),n("FZtP"),n("3bBZ"),n("Ew+T"),n("n5b4"),n("Kz25"),n("vxnP"),n("mGGf"),n("97ZR");var o=n("bCY9"),a=n("q1tI"),s=n.n(a),u=n("9kvl"),c=n("rlch"),l=n("I5X1");if("function"!==typeof l["a"])throw new Error("[plugin-initial-state]: useModel is not a function, @umijs/plugin-model is required.");var f=e=>{var t=e.children,n=Object(a["useRef"])(!1),r=u["b"].applyPlugins({key:"initialStateConfig",type:c["a"].modify,initialValue:{}})||{},i=Object(l["a"])("@@initialState")||{},o=i.loading,s=void 0!==o&&o;return Object(a["useEffect"])((()=>{s||(n.current=!0)}),[s]),s&&!n.current?r.loading||null:t};function p(e){return s.a.createElement(f,null,e)}var h=n("tJVT"),d=()=>({loading:!1,refresh:()=>{}});class v{constructor(){this.callbacks={},this.data={},this.update=e=>{(this.callbacks[e]||[]).forEach((t=>{try{var n=this.data[e];t(n)}catch(r){t(void 0)}}))}}}var m=n("nKUr"),g=e=>{var t=e.hook,n=e.onUpdate,r=e.namespace,i=Object(a["useRef"])(n);i.current=n;var o,s=Object(a["useRef"])(!1);try{o=t()}catch(u){console.error("plugin-model: Invoking '".concat(r||"unknown","' model failed:"),u)}return Object(a["useMemo"])((()=>{i.current(o),s.current=!1}),[]),Object(a["useEffect"])((()=>{s.current?i.current(o):s.current=!0})),Object(m["jsx"])(m["Fragment"],{})},y=n("qwGt"),b={"@@initialState":d},_=new v,x=g,w=e=>{var t=e.children;return Object(m["jsxs"])(y["a"].Provider,{value:_,children:[Object.entries(b).map((e=>Object(m["jsx"])(x,{namespace:e[0],hook:e[1],onUpdate:t=>{var n=e,r=Object(h["a"])(n,1),i=r[0];_.data[i]=t,_.update(i)}},e[0]))),t]})};function O(e){return s.a.createElement(w,null,e)}o["a"].register({apply:r,path:"../plugin-initial-state/runtime"}),o["a"].register({apply:i,path:"../plugin-model/runtime"});var E=n("FfOG"),S=n("zlVK");function j(){var e=[{path:"/~demos/:uuid",layout:!1,wrappers:[n("afA6").default],component:e=>{var t=n("q1tI"),r=n("F4QJ"),i=r.default,o=n("Zxc8"),a=o.default,s=n("dEAq"),u=s.usePrefersColor,c=s.context,l=t.useContext(c),f=l.demos,p=t.useState([]),d=Object(h["a"])(p,2),v=d[0],m=d[1];switch(t.useLayoutEffect((()=>{m(i(e,f))}),[e.match.params.uuid,e.location.query.wrapper,e.location.query.capture]),u(),v.length){case 1:return v[0];case 2:return t.createElement(a,v[0],v[1]);default:return"Demo ".concat(e.match.params.uuid," not found :(")}}},{path:"/_demos/:uuid",redirect:"/~demos/:uuid"},{__dumiRoot:!0,layout:!1,path:"/",wrappers:[n("afA6").default,n("0Bia").default],routes:[{path:"/",component:n("gql7").default,exact:!0,meta:{locale:"en-US",order:null,filePath:"README.md",updatedTime:1668859212e3,slugs:[{depth:1,value:"L7-React",heading:"l7-react"},{depth:2,value:"LarkMap",heading:"larkmap"},{depth:2,value:"Getting Started",heading:"getting-started"}],title:"L7-React"},title:"L7-React"},{path:"/control",component:n("Zsi7").default,exact:!0,meta:{filePath:"docs/control.md",updatedTime:1638184894e3,title:"Control \u5730\u56fe\u7ec4\u4ef6",order:4,slugs:[{depth:2,value:"Contorl Props",heading:"contorl-props"},{depth:2,value:"CustomControl",heading:"customcontrol"}],hasPreviewer:!0},title:"Control \u5730\u56fe\u7ec4\u4ef6 - L7React"},{path:"/layer",component:n("Y3xf").default,exact:!0,meta:{filePath:"docs/layer.en.md",updatedTime:1601174081e3,title:"Layer Component",order:2,slugs:[{depth:2,value:"Layer \u7c7b\u578b",heading:"layer-\u7c7b\u578b"},{depth:3,value:"\u4f7f\u7528\u65b9\u5f0f",heading:"\u4f7f\u7528\u65b9\u5f0f"},{depth:2,value:"Layer Props",heading:"layer-props"},{depth:3,value:"layer options",heading:"layer-options"},{depth:3,value:"attribute Option",heading:"attribute-option"},{depth:3,value:"source Option",heading:"source-option"},{depth:3,value:"scale Option",heading:"scale-option"},{depth:3,value:"interaction option",heading:"interaction-option"},{depth:3,value:"\u83b7\u53d6 layer \u5bf9\u8c61",heading:"\u83b7\u53d6-layer-\u5bf9\u8c61"},{depth:4,value:"onLayerLoaded",heading:"onlayerloaded"},{depth:4,value:"Context API",heading:"context-api"},{depth:3,value:"Layer \u793a\u4f8b",heading:"layer-\u793a\u4f8b"},{depth:2,value:"\u5b50\u7ec4\u4ef6",heading:"\u5b50\u7ec4\u4ef6"},{depth:3,value:"\u4e8b\u4ef6\u7ec4\u4ef6",heading:"\u4e8b\u4ef6\u7ec4\u4ef6"},{depth:3,value:"\u793a\u4f8b",heading:"\u793a\u4f8b"}]},title:"Layer Component - L7React"},{path:"/layer",component:n("bgtt").default,exact:!0,meta:{filePath:"docs/layer.zh.md",updatedTime:1601174081e3,title:"Layer \u7ec4\u4ef6",order:2,slugs:[{depth:2,value:"Layer \u7c7b\u578b",heading:"layer-\u7c7b\u578b"},{depth:3,value:"\u4f7f\u7528\u65b9\u5f0f",heading:"\u4f7f\u7528\u65b9\u5f0f"},{depth:2,value:"Layer Props",heading:"layer-props"},{depth:3,value:"layer options",heading:"layer-options"},{depth:3,value:"attribute Option",heading:"attribute-option"},{depth:3,value:"source Option",heading:"source-option"},{depth:3,value:"scale Option",heading:"scale-option"},{depth:3,value:"interaction option",heading:"interaction-option"},{depth:3,value:"\u83b7\u53d6 layer \u5bf9\u8c61",heading:"\u83b7\u53d6-layer-\u5bf9\u8c61"},{depth:4,value:"onLayerLoaded",heading:"onlayerloaded"},{depth:4,value:"Context API",heading:"context-api"},{depth:3,value:"Layer \u793a\u4f8b",heading:"layer-\u793a\u4f8b"},{depth:2,value:"\u5b50\u7ec4\u4ef6",heading:"\u5b50\u7ec4\u4ef6"},{depth:3,value:"\u4e8b\u4ef6\u7ec4\u4ef6",heading:"\u4e8b\u4ef6\u7ec4\u4ef6"},{depth:3,value:"\u793a\u4f8b",heading:"\u793a\u4f8b"}]},title:"Layer \u7ec4\u4ef6 - L7React"},{path:"/marker",component:n("XcSm").default,exact:!0,meta:{filePath:"docs/marker.en.md",updatedTime:1601174081e3,title:"Marker",order:3,slugs:[{depth:2,value:"Marker Props",heading:"marker-props"},{depth:3,value:"option",heading:"option"},{depth:2,value:"\u5b9e\u4f8b",heading:"\u5b9e\u4f8b"}]},title:"Marker - L7React"},{path:"/marker",component:n("CQ6b").default,exact:!0,meta:{filePath:"docs/marker.zh.md",updatedTime:1601174081e3,title:"Marker \u7ec4\u4ef6",order:3,slugs:[{depth:2,value:"Marker Props",heading:"marker-props"},{depth:3,value:"option",heading:"option"},{depth:2,value:"Maker \u4e8b\u4ef6",heading:"maker-\u4e8b\u4ef6"},{depth:2,value:"\u5b9e\u4f8b",heading:"\u5b9e\u4f8b"}]},title:"Marker \u7ec4\u4ef6 - L7React"},{path:"/popup",component:n("iCN3").default,exact:!0,meta:{filePath:"docs/popup.en.md",updatedTime:1599737676e3,title:"Popup Component",order:4,slugs:[{depth:2,value:"Popup Props",heading:"popup-props"},{depth:3,value:"option",heading:"option"}]},title:"Popup Component - L7React"},{path:"/popup",component:n("cs7w").default,exact:!0,meta:{filePath:"docs/popup.zh.md",updatedTime:1601174081e3,title:"Popup \u7ec4\u4ef6",order:4,slugs:[{depth:2,value:"Popup Props",heading:"popup-props"},{depth:3,value:"option",heading:"option"}]},title:"Popup \u7ec4\u4ef6 - L7React"},{path:"/scene",component:n("ftHG").default,exact:!0,meta:{filePath:"docs/scene.en.md",updatedTime:1599738037e3,title:"Scene",order:1,slugs:[{depth:2,value:"\u4f7f\u7528",heading:"\u4f7f\u7528"},{depth:2,value:"Scene Props",heading:"scene-props"},{depth:3,value:"\u9ad8\u5fb7\u5730\u56fe\u573a\u666f",heading:"\u9ad8\u5fb7\u5730\u56fe\u573a\u666f"},{depth:3,value:"Mapbox \u5730\u56fe\u573a\u666f",heading:"mapbox-\u5730\u56fe\u573a\u666f"},{depth:3,value:"map option",heading:"map-option"},{depth:3,value:"scene option",heading:"scene-option"},{depth:3,value:"\u83b7\u53d6 scene \u5bf9\u8c61",heading:"\u83b7\u53d6-scene-\u5bf9\u8c61"},{depth:4,value:"onSceneLoaded",heading:"onsceneloaded"},{depth:4,value:"Context API",heading:"context-api"},{depth:2,value:"\u5b50\u7ec4\u4ef6",heading:"\u5b50\u7ec4\u4ef6"},{depth:3,value:"LoadImage",heading:"loadimage"},{depth:3,value:"Layer \u7ec4\u4ef6",heading:"layer-\u7ec4\u4ef6"},{depth:3,value:"\b \u4e8b\u4ef6\u7ec4\u4ef6",heading:"-\u4e8b\u4ef6\u7ec4\u4ef6"}]},title:"Scene - L7React"},{path:"/scene",component:n("/6DY").default,exact:!0,meta:{filePath:"docs/scene.zh.md",updatedTime:1605112539e3,title:"Scene \u7ec4\u4ef6",order:1,slugs:[{depth:2,value:"\u4f7f\u7528",heading:"\u4f7f\u7528"},{depth:2,value:"Scene Props",heading:"scene-props"},{depth:3,value:"\u9ad8\u5fb7\u5730\u56fe\u573a\u666f",heading:"\u9ad8\u5fb7\u5730\u56fe\u573a\u666f"},{depth:3,value:"Mapbox \u5730\u56fe\u573a\u666f",heading:"mapbox-\u5730\u56fe\u573a\u666f"},{depth:3,value:"map option",heading:"map-option"},{depth:3,value:"scene option",heading:"scene-option"},{depth:3,value:"\u83b7\u53d6 scene \u5bf9\u8c61",heading:"\u83b7\u53d6-scene-\u5bf9\u8c61"},{depth:4,value:"onSceneLoaded",heading:"onsceneloaded"},{depth:4,value:"Context API",heading:"context-api"},{depth:2,value:"\u5b50\u7ec4\u4ef6",heading:"\u5b50\u7ec4\u4ef6"},{depth:3,value:"LoadImage",heading:"loadimage"},{depth:3,value:"Layer \u7ec4\u4ef6",heading:"layer-\u7ec4\u4ef6"},{depth:3,value:"\b \u4e8b\u4ef6\u7ec4\u4ef6",heading:"-\u4e8b\u4ef6\u7ec4\u4ef6"}]},title:"Scene \u7ec4\u4ef6 - L7React"},{path:"/start",component:n("K6Lp").default,exact:!0,meta:{filePath:"docs/start.en.md",updatedTime:1599737676e3,title:"Get Started",order:0,slugs:[{depth:3,value:"\u5b89\u88c5",heading:"\u5b89\u88c5"},{depth:3,value:"\u793a\u4f8b",heading:"\u793a\u4f8b"}]},title:"Get Started - L7React"},{path:"/start",component:n("mTN9").default,exact:!0,meta:{filePath:"docs/start.zh.md",updatedTime:1599737676e3,title:"\u5feb\u901f\u5f00\u59cb",order:0,slugs:[{depth:3,value:"\u5b89\u88c5",heading:"\u5b89\u88c5"},{depth:3,value:"\u793a\u4f8b",heading:"\u793a\u4f8b"}]},title:"\u5feb\u901f\u5f00\u59cb - L7React"},{path:"/demo/image-layer",component:n("f1zR").default,exact:!0,meta:{filePath:"docs/demo/imageLayer.md",updatedTime:1605112539e3,slugs:[{depth:2,value:"\u56fe\u7247\u56fe\u5c42",heading:"\u56fe\u7247\u56fe\u5c42"}],title:"\u56fe\u7247\u56fe\u5c42",hasPreviewer:!0,group:{path:"/demo",title:"Demo"}},title:"\u56fe\u7247\u56fe\u5c42 - L7React"},{path:"/demo",component:n("0lAh").default,exact:!0,meta:{filePath:"docs/demo/index.md",updatedTime:1605112539e3,slugs:[{depth:2,value:"Hello react!",heading:"hello-react"}],title:"Hello react!",hasPreviewer:!0,group:{path:"/demo",title:"Demo"}},title:"Hello react! - L7React"},{path:"/demo/layer",component:n("wtia").default,exact:!0,meta:{filePath:"docs/demo/layer.control.md",updatedTime:1620910178e3,slugs:[{depth:2,value:"\u56fe\u5c42\u63a7\u4ef6",heading:"\u56fe\u5c42\u63a7\u4ef6"}],title:"\u56fe\u5c42\u63a7\u4ef6",hasPreviewer:!0,group:{path:"/demo",title:"Demo"}},title:"\u56fe\u5c42\u63a7\u4ef6 - L7React"},{path:"/demo/marker",component:n("WC9I").default,exact:!0,meta:{filePath:"docs/demo/marker.md",updatedTime:1647403477e3,slugs:[{depth:2,value:"Marker",heading:"marker"}],title:"Marker",hasPreviewer:!0,group:{path:"/demo",title:"Demo"}},title:"Marker - L7React"},{path:"/demo/point-layer",component:n("x/wj").default,exact:!0,meta:{filePath:"docs/demo/pointLayer.md",updatedTime:1638177206e3,slugs:[{depth:2,value:"\u6d4b\u8bd5 blend",heading:"\u6d4b\u8bd5-blend"}],title:"\u6d4b\u8bd5 blend",hasPreviewer:!0,group:{path:"/demo",title:"Demo"}},title:"\u6d4b\u8bd5 blend - L7React"},{path:"/demo/popup",component:n("rb3/").default,exact:!0,meta:{filePath:"docs/demo/popup.md",updatedTime:1607860818e3,slugs:[{depth:2,value:"\u4fe1\u606f\u6846",heading:"\u4fe1\u606f\u6846"}],title:"\u4fe1\u606f\u6846",hasPreviewer:!0,group:{path:"/demo",title:"Demo"}},title:"\u4fe1\u606f\u6846 - L7React"}],title:"L7React",component:e=>e.children}];return o["a"].applyPlugins({key:"patchRoutes",type:c["a"].event,args:{routes:e}}),e}var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].applyPlugins({key:"render",type:c["a"].compose,initialValue:()=>{var t=o["a"].applyPlugins({key:"modifyClientRenderOpts",type:c["a"].modify,initialValue:{routes:e.routes||j(),plugin:o["a"],history:Object(E["a"])(e.hot),isServer:Object({NODE_ENV:"production"}).__IS_SERVER,rootElement:"root",defaultTitle:"L7React"}});return Object(S["renderClient"])(t)},args:e})},k=A();t["default"]=k();window.g_umi={version:"3.5.40"}},tEiQ:function(e,t,n){"use strict";(function(e){var r=n("q1tI"),i=n.n(r),o=n("dI71"),a=n("17x9"),s=n.n(a),u=1073741823,c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{};function l(){var e="__global_unique_id__";return c[e]=(c[e]||0)+1}function f(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function p(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}function h(e){return Array.isArray(e)?e[0]:e}function d(e,t){var n,i,a="__create-react-context-"+l()+"__",c=function(e){function n(){var t;return t=e.apply(this,arguments)||this,t.emitter=p(t.props.value),t}Object(o["a"])(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return e={},e[a]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;f(r,i)?n=0:(n="function"===typeof t?t(r,i):u,n|=0,0!==n&&this.emitter.set(e.value,n))}},r.render=function(){return this.props.children},n}(r["Component"]);c.childContextTypes=(n={},n[a]=s.a.object.isRequired,n);var d=function(t){function n(){var e;return e=t.apply(this,arguments)||this,e.state={value:e.getValue()},e.onUpdate=function(t,n){var r=0|e.observedBits;0!==(r&n)&&e.setState({value:e.getValue()})},e}Object(o["a"])(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?u:t},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?u:e},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():e},r.render=function(){return h(this.props.children)(this.state.value)},n}(r["Component"]);return d.contextTypes=(i={},i[a]=s.a.object,i),{Provider:c,Consumer:d}}var v=i.a.createContext||d;t["a"]=v}).call(this,n("IyRk"))},tJVT:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}function i(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),t&&o.length===t)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){return r(e)||i(e,t)||a(e,t)||s()}n.d(t,"a",(function(){return u}))},tMB7:function(e,t,n){var r=n("y1pI");function i(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}e.exports=i},tW5y:function(e,t,n){"use strict";var r=n("hh1v"),i=n("m/L8"),o=n("4WOD"),a=n("tiKp"),s=a("hasInstance"),u=Function.prototype;s in u||i.f(u,s,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;while(e=o(e))if(this.prototype===e)return!0;return!1}})},tXUg:function(e,t,n){var r,i,o,a,s,u,c,l,f=n("2oRo"),p=n("Bs8V").f,h=n("xrYK"),d=n("LPSS").set,v=n("HNyW"),m=f.MutationObserver||f.WebKitMutationObserver,g=f.process,y=f.Promise,b="process"==h(g),_=p(f,"queueMicrotask"),x=_&&_.value;x||(r=function(){var e,t;b&&(e=g.domain)&&e.exit();while(i){t=i.fn,i=i.next;try{t()}catch(n){throw i?a():o=void 0,n}}o=void 0,e&&e.enter()},b?a=function(){g.nextTick(r)}:m&&!v?(s=!0,u=document.createTextNode(""),new m(r).observe(u,{characterData:!0}),a=function(){u.data=s=!s}):y&&y.resolve?(c=y.resolve(void 0),l=c.then,a=function(){l.call(c,r)}):a=function(){d.call(f,r)}),e.exports=x||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,a()),o=t}},tadb:function(e,t,n){var r=n("Cwc5"),i=n("Kz5y"),o=r(i,"DataView");e.exports=o},tiKp:function(e,t,n){var r=n("2oRo"),i=n("VpIT"),o=n("UTVS"),a=n("kOOl"),s=n("STAE"),u=n("/b8u"),c=i("wks"),l=r.Symbol,f=u?l:l&&l.withoutSetter||a;e.exports=function(e){return o(c,e)||(s&&o(l,e)?c[e]=l[e]:c[e]=f("Symbol."+e)),c[e]}},tijO:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("A2ZE"),s=n("WGBp"),u=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{find:function(e){var t=o(this),n=s(t),r=a(e,arguments.length>1?arguments[1]:void 0,3);return u(n,(function(e){if(r(e,e,t))return u.stop(e)}),void 0,!1,!0).result}})},tjZM:function(e,t,n){var r=n("dG/n");r("asyncIterator")},toAj:function(e,t,n){"use strict";var r=n("I+eb"),i=n("ppGB"),o=n("QIpd"),a=n("EUja"),s=n("0Dky"),u=1..toFixed,c=Math.floor,l=function(e,t,n){return 0===t?n:t%2===1?l(e,t-1,n*e):l(e*e,t/2,n)},f=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},p=u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){u.call({})}));r({target:"Number",proto:!0,forced:p},{toFixed:function(e){var t,n,r,s,u=o(this),p=i(e),h=[0,0,0,0,0,0],d="",v="0",m=function(e,t){var n=-1,r=t;while(++n<6)r+=e*h[n],h[n]=r%1e7,r=c(r/1e7)},g=function(e){var t=6,n=0;while(--t>=0)n+=h[t],h[t]=c(n/e),n=n%e*1e7},y=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==h[e]){var n=String(h[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t};if(p<0||p>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(d="-",u=-u),u>1e-21)if(t=f(u*l(2,69,1))-69,n=t<0?u*l(2,-t,1):u/l(2,t,1),n*=4503599627370496,t=52-t,t>0){m(0,n),r=p;while(r>=7)m(1e7,0),r-=7;m(l(10,r,1),0),r=t-1;while(r>=23)g(1<<23),r-=23;g(1<<r),m(1,1),g(2),v=y()}else m(0,n),m(1<<-t,0),v=y()+a.call("0",p);return p>0?(s=v.length,v=d+(s<=p?"0."+a.call("0",p-s)+v:v.slice(0,s-p)+"."+v.slice(s-p))):v=d+v,v}})},tsqr:function(e,t,n){"use strict";n.r(t),n.d(t,"getKeyThenIncreaseKey",(function(){return B})),n.d(t,"typeList",(function(){return G})),n.d(t,"attachTypeApi",(function(){return X})),n.d(t,"getInstance",(function(){return K}));var r=n("wx14"),i=n("rePB"),o=n("VTBJ"),a=n("q1tI"),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},u=s,c=n("6VBw"),l=function(e,t){return a["createElement"](c["a"],Object(o["a"])(Object(o["a"])({},e),{},{ref:t,icon:u}))};l.displayName="CheckCircleFilled";var f=a["forwardRef"](l),p=n("jN4g"),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},d=h,v=function(e,t){return a["createElement"](c["a"],Object(o["a"])(Object(o["a"])({},e),{},{ref:t,icon:d}))};v.displayName="ExclamationCircleFilled";var m=a["forwardRef"](v),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},y=g,b=function(e,t){return a["createElement"](c["a"],Object(o["a"])(Object(o["a"])({},e),{},{ref:t,icon:y}))};b.displayName="InfoCircleFilled";var _,x=a["forwardRef"](b),w=n("ye1Q"),O=n("TSYQ"),E=n.n(O),S=n("8tx+"),j=n("wEI+"),A=n("ODXe"),k=n("8HVG"),C=n("H84U");function T(e,t){var n=function(){var n,i,o=null,s={add:function(e,t){null===o||void 0===o||o.component.add(e,t)}},u=Object(k["a"])(s),c=Object(A["a"])(u,2),l=c[0],f=c[1];function p(a){var s=a.prefixCls,u=n("message",s),c=n(),f=a.key||B(),p=new Promise((function(n){var s=function(){return"function"===typeof a.onClose&&a.onClose(),n(!0)};e(Object(r["a"])(Object(r["a"])({},a),{prefixCls:u,rootPrefixCls:c,getPopupContainer:i}),(function(e){var n=e.prefixCls,i=e.instance;o=i,l(t(Object(r["a"])(Object(r["a"])({},a),{key:f,onClose:s}),n))}))})),h=function(){o&&o.removeNotice(f)};return h.then=function(e,t){return p.then(e,t)},h.promise=p,h}var h=a["useRef"]({});return h.current.open=p,G.forEach((function(e){return X(h.current,e)})),[h.current,a["createElement"](C["a"],{key:"holder"},(function(e){return n=e.getPrefixCls,i=e.getPopupContainer,f}))]};return n}var M,P,I,R=3,L=1,D="",N="move-up",F=!1,z=!1;function B(){return L++}function U(e){void 0!==e.top&&(M=e.top,_=null),void 0!==e.duration&&(R=e.duration),void 0!==e.prefixCls&&(D=e.prefixCls),void 0!==e.getContainer&&(P=e.getContainer,_=null),void 0!==e.transitionName&&(N=e.transitionName,_=null,F=!0),void 0!==e.maxCount&&(I=e.maxCount,_=null),void 0!==e.rtl&&(z=e.rtl)}function V(e,t){var n=e.prefixCls,r=e.getPopupContainer,i=Object(j["b"])(),o=i.getPrefixCls,a=i.getRootPrefixCls,s=i.getIconPrefixCls,u=o("message",n||D),c=a(e.rootPrefixCls,u),l=s();if(_)t({prefixCls:u,rootPrefixCls:c,iconPrefixCls:l,instance:_});else{var f={prefixCls:u,transitionName:F?N:"".concat(c,"-").concat(N),style:{top:M},getContainer:P||r,maxCount:I};S["a"].newInstance(f,(function(e){_?t({prefixCls:u,rootPrefixCls:c,iconPrefixCls:l,instance:_}):(_=e,t({prefixCls:u,rootPrefixCls:c,iconPrefixCls:l,instance:e}))}))}}var H={info:x,success:f,error:p["a"],warning:m,loading:w["a"]},G=Object.keys(H);function W(e,t,n){var r,o=void 0!==e.duration?e.duration:R,s=H[e.type],u=E()("".concat(t,"-custom-content"),(r={},Object(i["a"])(r,"".concat(t,"-").concat(e.type),e.type),Object(i["a"])(r,"".concat(t,"-rtl"),!0===z),r));return{key:e.key,duration:o,style:e.style||{},className:e.className,content:a["createElement"](j["a"],{iconPrefixCls:n},a["createElement"]("div",{className:u},e.icon||s&&a["createElement"](s,null),a["createElement"]("span",null,e.content))),onClose:e.onClose,onClick:e.onClick}}function q(e){var t=e.key||B(),n=new Promise((function(n){var i=function(){return"function"===typeof e.onClose&&e.onClose(),n(!0)};V(e,(function(n){var o=n.prefixCls,a=n.iconPrefixCls,s=n.instance;s.notice(W(Object(r["a"])(Object(r["a"])({},e),{key:t,onClose:i}),o,a))}))})),i=function(){var n;_&&(_.removeNotice(t),null===(n=e.onClose)||void 0===n||n.call(e))};return i.then=function(e,t){return n.then(e,t)},i.promise=n,i}function Z(e){return"[object Object]"===Object.prototype.toString.call(e)&&!!e.content}var Y={open:q,config:U,destroy:function(e){if(_)if(e){var t=_,n=t.removeNotice;n(e)}else{var r=_,i=r.destroy;i(),_=null}}};function X(e,t){e[t]=function(n,i,o){return Z(n)?e.open(Object(r["a"])(Object(r["a"])({},n),{type:t})):("function"===typeof i&&(o=i,i=void 0),e.open({content:n,duration:i,type:t,onClose:o}))}}G.forEach((function(e){return X(Y,e)})),Y.warn=Y.warning,Y.useMessage=T(V,W);var K=function(){return null};t["default"]=Y},tycR:function(e,t,n){var r=n("A2ZE"),i=n("RK3t"),o=n("ewvW"),a=n("UMSQ"),s=n("ZfDv"),u=[].push,c=function(e){var t=1==e,n=2==e,c=3==e,l=4==e,f=6==e,p=5==e||f;return function(h,d,v,m){for(var g,y,b=o(h),_=i(b),x=r(d,v,3),w=a(_.length),O=0,E=m||s,S=t?E(h,w):n?E(h,0):void 0;w>O;O++)if((p||O in _)&&(g=_[O],y=x(g,O,b),e))if(t)S[O]=y;else if(y)switch(e){case 3:return!0;case 5:return g;case 6:return O;case 2:u.call(S,g)}else if(l)return!1;return f?-1:c||l?l:S}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},u8Dt:function(e,t,n){var r=n("YESw"),i="__lodash_hash_undefined__",o=Object.prototype,a=o.hasOwnProperty;function s(e){var t=this.__data__;if(r){var n=t[e];return n===i?void 0:n}return a.call(t,e)?t[e]:void 0}e.exports=s},uWhJ:function(e,t,n){var r=n("I+eb"),i=Math.PI/180;r({target:"Math",stat:!0},{radians:function(e){return e*i}})},uciX:function(e,t,n){"use strict";var r=n("VTBJ"),i=n("wx14"),o=n("1OyB"),a=n("vuIU"),s=n("JX7q"),u=n("Ji7U"),c=n("LK+K"),l=n("rePB"),f=n("q1tI"),p=n.n(f),h=n("i8i4"),d=n.n(h),v=n("wgJM"),m=n("l4aY"),g=n("m+aA"),y=n("c+Xe");function b(e,t,n,r){var i=d.a.unstable_batchedUpdates?function(e){d.a.unstable_batchedUpdates(n,e)}:n;return e.addEventListener&&e.addEventListener(t,i,r),{remove:function(){e.removeEventListener&&e.removeEventListener(t,i,r)}}}var _=n("MNnm"),x=Object(f["forwardRef"])((function(e,t){var n=e.didUpdate,r=e.getContainer,i=e.children,o=Object(f["useRef"])(),a=Object(f["useRef"])();Object(f["useImperativeHandle"])(t,(function(){return{}}));var s=Object(f["useRef"])(!1);return!s.current&&Object(_["a"])()&&(a.current=r(),o.current=a.current.parentNode,s.current=!0),Object(f["useEffect"])((function(){null===n||void 0===n||n(e)})),Object(f["useEffect"])((function(){return null===a.current.parentNode&&null!==o.current&&o.current.appendChild(a.current),function(){var e,t;null===(e=a.current)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(a.current)}}),[]),a.current?d.a.createPortal(i,a.current):null})),w=x,O=n("TSYQ"),E=n.n(O);function S(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function j(e,t,n){var i=e[t]||{};return Object(r["a"])(Object(r["a"])({},i),n)}function A(e,t,n,r){for(var i=n.points,o=Object.keys(e),a=0;a<o.length;a+=1){var s=o[a];if(S(e[s].points,i,r))return"".concat(t,"-placement-").concat(s)}return""}var k=n("ODXe"),C=n("Ff2n"),T=n("5Z9U"),M=n("8XRh");function P(e){var t=e.prefixCls,n=e.motion,r=e.animation,i=e.transitionName;return n||(r?{motionName:"".concat(t,"-").concat(r)}:i?{motionName:i}:null)}function I(e){var t=e.prefixCls,n=e.visible,o=e.zIndex,a=e.mask,s=e.maskMotion,u=e.maskAnimation,c=e.maskTransitionName;if(!a)return null;var l={};return(s||c||u)&&(l=Object(r["a"])({motionAppear:!0},P({motion:s,prefixCls:t,transitionName:c,animation:u}))),f["createElement"](M["b"],Object(i["a"])({},l,{visible:n,removeOnLeave:!0}),(function(e){var n=e.className;return f["createElement"]("div",{style:{zIndex:o},className:E()("".concat(t,"-mask"),n)})}))}var R,L=n("U8pU");function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function U(){if(void 0!==R)return R;R="";var e=document.createElement("p").style,t="Transform";for(var n in B)n+t in e&&(R=n);return R}function V(){return U()?"".concat(U(),"TransitionProperty"):"transitionProperty"}function H(){return U()?"".concat(U(),"Transform"):"transform"}function G(e,t){var n=V();n&&(e.style[n]=t,"transitionProperty"!==n&&(e.style.transitionProperty=t))}function W(e,t){var n=H();n&&(e.style[n]=t,"transform"!==n&&(e.style.transform=t))}function q(e){return e.style.transitionProperty||e.style[V()]}function Z(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(H());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}var Y=/matrix\((.*)\)/,X=/matrix3d\((.*)\)/;function K(e,t){var n=window.getComputedStyle(e,null),r=n.getPropertyValue("transform")||n.getPropertyValue(H());if(r&&"none"!==r){var i,o=r.match(Y);if(o)o=o[1],i=o.split(",").map((function(e){return parseFloat(e,10)})),i[4]=t.x,i[5]=t.y,W(e,"matrix(".concat(i.join(","),")"));else{var a=r.match(X)[1];i=a.split(",").map((function(e){return parseFloat(e,10)})),i[12]=t.x,i[13]=t.y,W(e,"matrix3d(".concat(i.join(","),")"))}}else W(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}var $,Q=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source;function J(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function ee(e,t,n){var r=n;if("object"!==F(t))return"undefined"!==typeof r?("number"===typeof r&&(r="".concat(r,"px")),void(e.style[t]=r)):$(e,t);for(var i in t)t.hasOwnProperty(i)&&ee(e,i,t[i])}function te(e){var t,n,r,i=e.ownerDocument,o=i.body,a=i&&i.documentElement;return t=e.getBoundingClientRect(),n=Math.floor(t.left),r=Math.floor(t.top),n-=a.clientLeft||o.clientLeft||0,r-=a.clientTop||o.clientTop||0,{left:n,top:r}}function ne(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!==typeof n){var i=e.document;n=i.documentElement[r],"number"!==typeof n&&(n=i.body[r])}return n}function re(e){return ne(e)}function ie(e){return ne(e,!0)}function oe(e){var t=te(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=re(r),t.top+=ie(r),t}function ae(e){return null!==e&&void 0!==e&&e==e.window}function se(e){return ae(e)?e.document:9===e.nodeType?e:e.ownerDocument}function ue(e,t,n){var r=n,i="",o=se(e);return r=r||o.defaultView.getComputedStyle(e,null),r&&(i=r.getPropertyValue(t)||r[t]),i}var ce=new RegExp("^(".concat(Q,")(?!px)[a-z%]+$"),"i"),le=/^(top|right|bottom|left)$/,fe="currentStyle",pe="runtimeStyle",he="left",de="px";function ve(e,t){var n=e[fe]&&e[fe][t];if(ce.test(n)&&!le.test(t)){var r=e.style,i=r[he],o=e[pe][he];e[pe][he]=e[fe][he],r[he]="fontSize"===t?"1em":n||0,n=r.pixelLeft+de,r[he]=i,e[pe][he]=o}return""===n?"auto":n}function me(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function ge(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function ye(e,t,n){"static"===ee(e,"position")&&(e.style.position="relative");var r=-999,i=-999,o=me("left",n),a=me("top",n),s=ge(o),u=ge(a);"left"!==o&&(r=999),"top"!==a&&(i=999);var c="",l=oe(e);("left"in t||"top"in t)&&(c=q(e)||"",G(e,"none")),"left"in t&&(e.style[s]="",e.style[o]="".concat(r,"px")),"top"in t&&(e.style[u]="",e.style[a]="".concat(i,"px")),J(e);var f=oe(e),p={};for(var h in t)if(t.hasOwnProperty(h)){var d=me(h,n),v="left"===h?r:i,m=l[h]-f[h];p[d]=d===h?v+m:v-m}ee(e,p),J(e),("left"in t||"top"in t)&&G(e,c);var g={};for(var y in t)if(t.hasOwnProperty(y)){var b=me(y,n),_=t[y]-l[y];g[b]=y===b?p[b]+_:p[b]-_}ee(e,g)}function be(e,t){var n=oe(e),r=Z(e),i={x:r.x,y:r.y};"left"in t&&(i.x=r.x+t.left-n.left),"top"in t&&(i.y=r.y+t.top-n.top),K(e,i)}function _e(e,t,n){if(n.ignoreShake){var r=oe(e),i=r.left.toFixed(0),o=r.top.toFixed(0),a=t.left.toFixed(0),s=t.top.toFixed(0);if(i===a&&o===s)return}n.useCssRight||n.useCssBottom?ye(e,t,n):n.useCssTransform&&H()in document.body.style?be(e,t):ye(e,t,n)}function xe(e,t){for(var n=0;n<e.length;n++)t(e[n])}function we(e){return"border-box"===$(e,"boxSizing")}"undefined"!==typeof window&&($=window.getComputedStyle?ue:ve);var Oe=["margin","border","padding"],Ee=-1,Se=2,je=1,Ae=0;function ke(e,t,n){var r,i={},o=e.style;for(r in t)t.hasOwnProperty(r)&&(i[r]=o[r],o[r]=t[r]);for(r in n.call(e),t)t.hasOwnProperty(r)&&(o[r]=i[r])}function Ce(e,t,n){var r,i,o,a=0;for(i=0;i<t.length;i++)if(r=t[i],r)for(o=0;o<n.length;o++){var s=void 0;s="border"===r?"".concat(r).concat(n[o],"Width"):r+n[o],a+=parseFloat($(e,s))||0}return a}var Te={getParent:function(e){var t=e;do{t=11===t.nodeType&&t.host?t.host:t.parentNode}while(t&&1!==t.nodeType&&9!==t.nodeType);return t}};function Me(e,t,n){var r=n;if(ae(e))return"width"===t?Te.viewportWidth(e):Te.viewportHeight(e);if(9===e.nodeType)return"width"===t?Te.docWidth(e):Te.docHeight(e);var i="width"===t?["Left","Right"]:["Top","Bottom"],o="width"===t?Math.floor(e.getBoundingClientRect().width):Math.floor(e.getBoundingClientRect().height),a=we(e),s=0;(null===o||void 0===o||o<=0)&&(o=void 0,s=$(e,t),(null===s||void 0===s||Number(s)<0)&&(s=e.style[t]||0),s=Math.floor(parseFloat(s))||0),void 0===r&&(r=a?je:Ee);var u=void 0!==o||a,c=o||s;return r===Ee?u?c-Ce(e,["border","padding"],i):s:u?r===je?c:c+(r===Se?-Ce(e,["border"],i):Ce(e,["margin"],i)):s+Ce(e,Oe.slice(r),i)}xe(["Width","Height"],(function(e){Te["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],Te["viewport".concat(e)](n))},Te["viewport".concat(e)]=function(t){var n="client".concat(e),r=t.document,i=r.body,o=r.documentElement,a=o[n];return"CSS1Compat"===r.compatMode&&a||i&&i[n]||a}}));var Pe={position:"absolute",visibility:"hidden",display:"block"};function Ie(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t[0];return 0!==i.offsetWidth?r=Me.apply(void 0,t):ke(i,Pe,(function(){r=Me.apply(void 0,t)})),r}function Re(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}xe(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);Te["outer".concat(t)]=function(t,n){return t&&Ie(t,e,n?Ae:je)};var n="width"===e?["Left","Right"]:["Top","Bottom"];Te[e]=function(t,r){var i=r;if(void 0===i)return t&&Ie(t,e,Ee);if(t){var o=we(t);return o&&(i+=Ce(t,["padding","border"],n)),ee(t,e,i)}}}));var Le={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:se,offset:function(e,t,n){if("undefined"===typeof t)return oe(e);_e(e,t,n||{})},isWindow:ae,each:xe,css:ee,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);var r=e.overflow;if(r)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:Re,getWindowScrollLeft:function(e){return re(e)},getWindowScrollTop:function(e){return ie(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)Le.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};Re(Le,Te);var De=Le.getParent;function Ne(e){if(Le.isWindow(e)||9===e.nodeType)return null;var t,n=Le.getDocument(e),r=n.body,i=Le.css(e,"position"),o="fixed"===i||"absolute"===i;if(!o)return"html"===e.nodeName.toLowerCase()?null:De(e);for(t=De(e);t&&t!==r&&9!==t.nodeType;t=De(t))if(i=Le.css(t,"position"),"static"!==i)return t;return null}var Fe=Le.getParent;function ze(e){if(Le.isWindow(e)||9===e.nodeType)return!1;var t=Le.getDocument(e),n=t.body,r=null;for(r=Fe(e);r&&r!==n&&r!==t;r=Fe(r)){var i=Le.css(r,"position");if("fixed"===i)return!0}return!1}function Be(e,t){var n={left:0,right:1/0,top:0,bottom:1/0},r=Ne(e),i=Le.getDocument(e),o=i.defaultView||i.parentWindow,a=i.body,s=i.documentElement;while(r){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===r.clientWidth||r===a||r===s||"visible"===Le.css(r,"overflow")){if(r===a||r===s)break}else{var u=Le.offset(r);u.left+=r.clientLeft,u.top+=r.clientTop,n.top=Math.max(n.top,u.top),n.right=Math.min(n.right,u.left+r.clientWidth),n.bottom=Math.min(n.bottom,u.top+r.clientHeight),n.left=Math.max(n.left,u.left)}r=Ne(r)}var c=null;if(!Le.isWindow(e)&&9!==e.nodeType){c=e.style.position;var l=Le.css(e,"position");"absolute"===l&&(e.style.position="fixed")}var f=Le.getWindowScrollLeft(o),p=Le.getWindowScrollTop(o),h=Le.viewportWidth(o),d=Le.viewportHeight(o),v=s.scrollWidth,m=s.scrollHeight,g=window.getComputedStyle(a);if("hidden"===g.overflowX&&(v=o.innerWidth),"hidden"===g.overflowY&&(m=o.innerHeight),e.style&&(e.style.position=c),t||ze(e))n.left=Math.max(n.left,f),n.top=Math.max(n.top,p),n.right=Math.min(n.right,f+h),n.bottom=Math.min(n.bottom,p+d);else{var y=Math.max(v,f+h);n.right=Math.min(n.right,y);var b=Math.max(m,p+d);n.bottom=Math.min(n.bottom,b)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function Ue(e,t,n,r){var i=Le.clone(e),o={width:t.width,height:t.height};return r.adjustX&&i.left<n.left&&(i.left=n.left),r.resizeWidth&&i.left>=n.left&&i.left+o.width>n.right&&(o.width-=i.left+o.width-n.right),r.adjustX&&i.left+o.width>n.right&&(i.left=Math.max(n.right-o.width,n.left)),r.adjustY&&i.top<n.top&&(i.top=n.top),r.resizeHeight&&i.top>=n.top&&i.top+o.height>n.bottom&&(o.height-=i.top+o.height-n.bottom),r.adjustY&&i.top+o.height>n.bottom&&(i.top=Math.max(n.bottom-o.height,n.top)),Le.mix(i,o)}function Ve(e){var t,n,r;if(Le.isWindow(e)||9===e.nodeType){var i=Le.getWindow(e);t={left:Le.getWindowScrollLeft(i),top:Le.getWindowScrollTop(i)},n=Le.viewportWidth(i),r=Le.viewportHeight(i)}else t=Le.offset(e),n=Le.outerWidth(e),r=Le.outerHeight(e);return t.width=n,t.height=r,t}function He(e,t){var n=t.charAt(0),r=t.charAt(1),i=e.width,o=e.height,a=e.left,s=e.top;return"c"===n?s+=o/2:"b"===n&&(s+=o),"c"===r?a+=i/2:"r"===r&&(a+=i),{left:a,top:s}}function Ge(e,t,n,r,i){var o=He(t,n[1]),a=He(e,n[0]),s=[a.left-o.left,a.top-o.top];return{left:Math.round(e.left-s[0]+r[0]-i[0]),top:Math.round(e.top-s[1]+r[1]-i[1])}}function We(e,t,n){return e.left<n.left||e.left+t.width>n.right}function qe(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function Ze(e,t,n){return e.left>n.right||e.left+t.width<n.left}function Ye(e,t,n){return e.top>n.bottom||e.top+t.height<n.top}function Xe(e,t,n){var r=[];return Le.each(e,(function(e){r.push(e.replace(t,(function(e){return n[e]})))})),r}function Ke(e,t){return e[t]=-e[t],e}function $e(e,t){var n;return n=/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10),n||0}function Qe(e,t){e[0]=$e(e[0],t.width),e[1]=$e(e[1],t.height)}function Je(e,t,n,r){var i=n.points,o=n.offset||[0,0],a=n.targetOffset||[0,0],s=n.overflow,u=n.source||e;o=[].concat(o),a=[].concat(a),s=s||{};var c={},l=0,f=!(!s||!s.alwaysByViewport),p=Be(u,f),h=Ve(u);Qe(o,h),Qe(a,t);var d=Ge(h,t,i,o,a),v=Le.merge(h,d);if(p&&(s.adjustX||s.adjustY)&&r){if(s.adjustX&&We(d,h,p)){var m=Xe(i,/[lr]/gi,{l:"r",r:"l"}),g=Ke(o,0),y=Ke(a,0),b=Ge(h,t,m,g,y);Ze(b,h,p)||(l=1,i=m,o=g,a=y)}if(s.adjustY&&qe(d,h,p)){var _=Xe(i,/[tb]/gi,{t:"b",b:"t"}),x=Ke(o,1),w=Ke(a,1),O=Ge(h,t,_,x,w);Ye(O,h,p)||(l=1,i=_,o=x,a=w)}l&&(d=Ge(h,t,i,o,a),Le.mix(v,d));var E=We(d,h,p),S=qe(d,h,p);if(E||S){var j=i;E&&(j=Xe(i,/[lr]/gi,{l:"r",r:"l"})),S&&(j=Xe(i,/[tb]/gi,{t:"b",b:"t"})),i=j,o=n.offset||[0,0],a=n.targetOffset||[0,0]}c.adjustX=s.adjustX&&E,c.adjustY=s.adjustY&&S,(c.adjustX||c.adjustY)&&(v=Ue(d,h,p,c))}return v.width!==h.width&&Le.css(u,"width",Le.width(u)+v.width-h.width),v.height!==h.height&&Le.css(u,"height",Le.height(u)+v.height-h.height),Le.offset(u,{left:v.left,top:v.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:i,offset:o,targetOffset:a,overflow:c}}function et(e,t){var n=Be(e,t),r=Ve(e);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}function tt(e,t,n){var r=n.target||t,i=Ve(r),o=!et(r,n.overflow&&n.overflow.alwaysByViewport);return Je(e,i,n,o)}function nt(e,t,n){var r,i,o=Le.getDocument(e),a=o.defaultView||o.parentWindow,s=Le.getWindowScrollLeft(a),u=Le.getWindowScrollTop(a),c=Le.viewportWidth(a),l=Le.viewportHeight(a);r="pageX"in t?t.pageX:s+t.clientX,i="pageY"in t?t.pageY:u+t.clientY;var f={left:r,top:i,width:0,height:0},p=r>=0&&r<=s+c&&i>=0&&i<=u+l,h=[n.points[0],"cc"];return Je(e,f,N(N({},n),{},{points:h}),p)}tt.__getOffsetParent=Ne,tt.__getVisibleRectForElement=Be;var rt=n("Kwbf");function it(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set;function i(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=r.has(e);if(Object(rt["a"])(!a,"Warning: There may be circular references"),a)return!1;if(e===t)return!0;if(n&&o>1)return!1;r.add(e);var s=o+1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var u=0;u<e.length;u++)if(!i(e[u],t[u],s))return!1;return!0}if(e&&t&&"object"===Object(L["a"])(e)&&"object"===Object(L["a"])(t)){var c=Object.keys(e);return c.length===Object.keys(t).length&&c.every((function(n){return i(e[n],t[n],s)}))}return!1}return i(e,t)}var ot=it,at=n("x/xZ"),st=n("TNol"),ut=function(e,t){var n=p.a.useRef(!1),r=p.a.useRef(null);function i(){window.clearTimeout(r.current)}function o(a){if(i(),n.current&&!0!==a)r.current=window.setTimeout((function(){n.current=!1,o()}),t);else{if(!1===e(a))return;n.current=!0,r.current=window.setTimeout((function(){n.current=!1}),t)}}return[o,function(){n.current=!1,i()}]},ct=n("bdgK");function lt(e,t){return e===t||!(!e||!t)&&("pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t&&(e.clientX===t.clientX&&e.clientY===t.clientY))}function ft(e,t){e!==document.activeElement&&Object(m["a"])(t,e)&&"function"===typeof e.focus&&e.focus()}function pt(e,t){var n=null,r=null;function i(e){var i=Object(k["a"])(e,1),o=i[0].target;if(document.documentElement.contains(o)){var a=o.getBoundingClientRect(),s=a.width,u=a.height,c=Math.floor(s),l=Math.floor(u);n===c&&r===l||Promise.resolve().then((function(){t({width:c,height:l})})),n=c,r=l}}var o=new ct["a"](i);return e&&o.observe(e),function(){o.disconnect()}}function ht(e){return"function"!==typeof e?null:e()}function dt(e){return"object"===Object(L["a"])(e)&&e?e:null}var vt=function(e,t){var n=e.children,r=e.disabled,i=e.target,o=e.align,a=e.onAlign,s=e.monitorWindowResize,u=e.monitorBufferTime,c=void 0===u?0:u,l=p.a.useRef({}),f=p.a.useRef(),h=p.a.Children.only(n),d=p.a.useRef({});d.current.disabled=r,d.current.target=i,d.current.align=o,d.current.onAlign=a;var v=ut((function(){var e=d.current,t=e.disabled,n=e.target,r=e.align,i=e.onAlign,o=f.current;if(!t&&n&&o){var a,s=ht(n),u=dt(n);l.current.element=s,l.current.point=u,l.current.align=r;var c=document,p=c.activeElement;return s&&Object(at["a"])(s)?a=tt(o,s,r):u&&(a=nt(o,u,r)),ft(p,o),i&&a&&i(o,a),!0}return!1}),c),m=Object(k["a"])(v,2),g=m[0],_=m[1],x=p.a.useState(),w=Object(k["a"])(x,2),O=w[0],E=w[1],S=p.a.useState(),j=Object(k["a"])(S,2),A=j[0],C=j[1];return Object(st["a"])((function(){E(ht(i)),C(dt(i))})),p.a.useEffect((function(){l.current.element===O&&lt(l.current.point,A)&&ot(l.current.align,o)||g()})),p.a.useEffect((function(){var e=pt(f.current,g);return e}),[f.current]),p.a.useEffect((function(){var e=pt(O,g);return e}),[O]),p.a.useEffect((function(){r?_():g()}),[r]),p.a.useEffect((function(){if(s){var e=b(window,"resize",g);return e.remove}}),[s]),p.a.useEffect((function(){return function(){_()}}),[]),p.a.useImperativeHandle(t,(function(){return{forceAlign:function(){return g(!0)}}})),p.a.isValidElement(h)&&(h=p.a.cloneElement(h,{ref:Object(y["a"])(h.ref,f)})),h},mt=p.a.forwardRef(vt);mt.displayName="Align";var gt=mt,yt=gt,bt=n("x+uP"),_t=n("HaE+"),xt=n("dm2S"),wt=["measure","alignPre","align",null,"motion"],Ot=function(e,t){var n=Object(xt["a"])(null),r=Object(k["a"])(n,2),i=r[0],o=r[1],a=Object(f["useRef"])();function s(e){o(e,!0)}function u(){v["a"].cancel(a.current)}function c(e){u(),a.current=Object(v["a"])((function(){s((function(e){switch(i){case"align":return"motion";case"motion":return"stable";default:}return e})),null===e||void 0===e||e()}))}return Object(f["useEffect"])((function(){s("measure")}),[e]),Object(f["useEffect"])((function(){switch(i){case"measure":t();break;default:}i&&(a.current=Object(v["a"])(Object(_t["a"])(Object(bt["a"])().mark((function e(){var t,n;return Object(bt["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=wt.indexOf(i),n=wt[t+1],n&&-1!==t&&s(n);case 3:case"end":return e.stop()}}),e)})))))}),[i]),Object(f["useEffect"])((function(){return function(){u()}}),[]),[i,c]},Et=function(e){var t=f["useState"]({width:0,height:0}),n=Object(k["a"])(t,2),r=n[0],i=n[1];function o(e){var t=e.offsetWidth,n=e.offsetHeight,r=e.getBoundingClientRect(),o=r.width,a=r.height;Math.abs(t-o)<1&&Math.abs(n-a)<1&&(t=o,n=a),i({width:t,height:n})}var a=f["useMemo"]((function(){var t={};if(e){var n=r.width,i=r.height;-1!==e.indexOf("height")&&i?t.height=i:-1!==e.indexOf("minHeight")&&i&&(t.minHeight=i),-1!==e.indexOf("width")&&n?t.width=n:-1!==e.indexOf("minWidth")&&n&&(t.minWidth=n)}return t}),[e,r]);return[a,o]},St=f["forwardRef"]((function(e,t){var n=e.visible,o=e.prefixCls,a=e.className,s=e.style,u=e.children,c=e.zIndex,l=e.stretch,p=e.destroyPopupOnHide,h=e.forceRender,d=e.align,v=e.point,m=e.getRootDomNode,g=e.getClassNameFromAlign,y=e.onAlign,b=e.onMouseEnter,_=e.onMouseLeave,x=e.onMouseDown,w=e.onTouchStart,O=e.onClick,S=Object(f["useRef"])(),j=Object(f["useRef"])(),A=Object(f["useState"])(),C=Object(k["a"])(A,2),T=C[0],I=C[1],R=Et(l),L=Object(k["a"])(R,2),D=L[0],N=L[1];function F(){l&&N(m())}var z=Ot(n,F),B=Object(k["a"])(z,2),U=B[0],V=B[1],H=Object(f["useState"])(0),G=Object(k["a"])(H,2),W=G[0],q=G[1],Z=Object(f["useRef"])();function Y(){return v||m}function X(){var e;null===(e=S.current)||void 0===e||e.forceAlign()}function K(e,t){var n=g(t);T!==n&&I(n),q((function(e){return e+1})),"align"===U&&(null===y||void 0===y||y(e,t))}Object(st["a"])((function(){"alignPre"===U&&q(0)}),[U]),Object(st["a"])((function(){"align"===U&&(W<3?X():V((function(){var e;null===(e=Z.current)||void 0===e||e.call(Z)})))}),[W]);var $=Object(r["a"])({},P(e));function Q(){return new Promise((function(e){Z.current=e}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(e){var t=$[e];$[e]=function(e,n){return V(),null===t||void 0===t?void 0:t(e,n)}})),f["useEffect"]((function(){$.motionName||"motion"!==U||V()}),[$.motionName,U]),f["useImperativeHandle"](t,(function(){return{forceAlign:X,getElement:function(){return j.current}}}));var J=Object(r["a"])(Object(r["a"])({},D),{},{zIndex:c,opacity:"motion"!==U&&"stable"!==U&&n?0:void 0,pointerEvents:n||"stable"===U?void 0:"none"},s),ee=!0;null===d||void 0===d||!d.points||"align"!==U&&"stable"!==U||(ee=!1);var te=u;return f["Children"].count(u)>1&&(te=f["createElement"]("div",{className:"".concat(o,"-content")},u)),f["createElement"](M["b"],Object(i["a"])({visible:n,ref:j,leavedClassName:"".concat(o,"-hidden")},$,{onAppearPrepare:Q,onEnterPrepare:Q,removeOnLeave:p,forceRender:h}),(function(e,t){var n=e.className,i=e.style,s=E()(o,a,T,n);return f["createElement"](yt,{target:Y(),key:"popup",ref:S,monitorWindowResize:!0,disabled:ee,align:d,onAlign:K},f["createElement"]("div",{ref:t,className:s,onMouseEnter:b,onMouseLeave:_,onMouseDownCapture:x,onTouchStartCapture:w,onClick:O,style:Object(r["a"])(Object(r["a"])({},i),J)},te))}))}));St.displayName="PopupInner";var jt=St,At=f["forwardRef"]((function(e,t){var n=e.prefixCls,o=e.visible,a=e.zIndex,s=e.children,u=e.mobile;u=void 0===u?{}:u;var c=u.popupClassName,l=u.popupStyle,p=u.popupMotion,h=void 0===p?{}:p,d=u.popupRender,v=e.onClick,m=f["useRef"]();f["useImperativeHandle"](t,(function(){return{forceAlign:function(){},getElement:function(){return m.current}}}));var g=Object(r["a"])({zIndex:a},l),y=s;return f["Children"].count(s)>1&&(y=f["createElement"]("div",{className:"".concat(n,"-content")},s)),d&&(y=d(y)),f["createElement"](M["b"],Object(i["a"])({visible:o,ref:m,removeOnLeave:!0},h),(function(e,t){var i=e.className,o=e.style,a=E()(n,c,i);return f["createElement"]("div",{ref:t,className:a,onClick:v,style:Object(r["a"])(Object(r["a"])({},o),g)},y)}))}));At.displayName="MobilePopupInner";var kt=At,Ct=["visible","mobile"],Tt=f["forwardRef"]((function(e,t){var n=e.visible,o=e.mobile,a=Object(C["a"])(e,Ct),s=Object(f["useState"])(n),u=Object(k["a"])(s,2),c=u[0],l=u[1],p=Object(f["useState"])(!1),h=Object(k["a"])(p,2),d=h[0],v=h[1],m=Object(r["a"])(Object(r["a"])({},a),{},{visible:c});Object(f["useEffect"])((function(){l(n),n&&o&&v(Object(T["a"])())}),[n,o]);var g=d?f["createElement"](kt,Object(i["a"])({},m,{mobile:o,ref:t})):f["createElement"](jt,Object(i["a"])({},m,{ref:t}));return f["createElement"]("div",null,f["createElement"](I,m),g)}));Tt.displayName="Popup";var Mt=Tt,Pt=f["createContext"](null),It=Pt;function Rt(){}function Lt(){return""}function Dt(e){return e?e.ownerDocument:window.document}var Nt=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function Ft(e){var t=function(t){Object(u["a"])(p,t);var n=Object(c["a"])(p);function p(e){var t,r;return Object(o["a"])(this,p),t=n.call(this,e),Object(l["a"])(Object(s["a"])(t),"popupRef",f["createRef"]()),Object(l["a"])(Object(s["a"])(t),"triggerRef",f["createRef"]()),Object(l["a"])(Object(s["a"])(t),"portalContainer",void 0),Object(l["a"])(Object(s["a"])(t),"attachId",void 0),Object(l["a"])(Object(s["a"])(t),"clickOutsideHandler",void 0),Object(l["a"])(Object(s["a"])(t),"touchOutsideHandler",void 0),Object(l["a"])(Object(s["a"])(t),"contextMenuOutsideHandler1",void 0),Object(l["a"])(Object(s["a"])(t),"contextMenuOutsideHandler2",void 0),Object(l["a"])(Object(s["a"])(t),"mouseDownTimeout",void 0),Object(l["a"])(Object(s["a"])(t),"focusTime",void 0),Object(l["a"])(Object(s["a"])(t),"preClickTime",void 0),Object(l["a"])(Object(s["a"])(t),"preTouchTime",void 0),Object(l["a"])(Object(s["a"])(t),"delayTimer",void 0),Object(l["a"])(Object(s["a"])(t),"hasPopupMouseDown",void 0),Object(l["a"])(Object(s["a"])(t),"onMouseEnter",(function(e){var n=t.props.mouseEnterDelay;t.fireEvents("onMouseEnter",e),t.delaySetPopupVisible(!0,n,n?null:e)})),Object(l["a"])(Object(s["a"])(t),"onMouseMove",(function(e){t.fireEvents("onMouseMove",e),t.setPoint(e)})),Object(l["a"])(Object(s["a"])(t),"onMouseLeave",(function(e){t.fireEvents("onMouseLeave",e),t.delaySetPopupVisible(!1,t.props.mouseLeaveDelay)})),Object(l["a"])(Object(s["a"])(t),"onPopupMouseEnter",(function(){t.clearDelayTimer()})),Object(l["a"])(Object(s["a"])(t),"onPopupMouseLeave",(function(e){var n;e.relatedTarget&&!e.relatedTarget.setTimeout&&Object(m["a"])(null===(n=t.popupRef.current)||void 0===n?void 0:n.getElement(),e.relatedTarget)||t.delaySetPopupVisible(!1,t.props.mouseLeaveDelay)})),Object(l["a"])(Object(s["a"])(t),"onFocus",(function(e){t.fireEvents("onFocus",e),t.clearDelayTimer(),t.isFocusToShow()&&(t.focusTime=Date.now(),t.delaySetPopupVisible(!0,t.props.focusDelay))})),Object(l["a"])(Object(s["a"])(t),"onMouseDown",(function(e){t.fireEvents("onMouseDown",e),t.preClickTime=Date.now()})),Object(l["a"])(Object(s["a"])(t),"onTouchStart",(function(e){t.fireEvents("onTouchStart",e),t.preTouchTime=Date.now()})),Object(l["a"])(Object(s["a"])(t),"onBlur",(function(e){t.fireEvents("onBlur",e),t.clearDelayTimer(),t.isBlurToHide()&&t.delaySetPopupVisible(!1,t.props.blurDelay)})),Object(l["a"])(Object(s["a"])(t),"onContextMenu",(function(e){e.preventDefault(),t.fireEvents("onContextMenu",e),t.setPopupVisible(!0,e)})),Object(l["a"])(Object(s["a"])(t),"onContextMenuClose",(function(){t.isContextMenuToShow()&&t.close()})),Object(l["a"])(Object(s["a"])(t),"onClick",(function(e){if(t.fireEvents("onClick",e),t.focusTime){var n;if(t.preClickTime&&t.preTouchTime?n=Math.min(t.preClickTime,t.preTouchTime):t.preClickTime?n=t.preClickTime:t.preTouchTime&&(n=t.preTouchTime),Math.abs(n-t.focusTime)<20)return;t.focusTime=0}t.preClickTime=0,t.preTouchTime=0,t.isClickToShow()&&(t.isClickToHide()||t.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var r=!t.state.popupVisible;(t.isClickToHide()&&!r||r&&t.isClickToShow())&&t.setPopupVisible(!t.state.popupVisible,e)})),Object(l["a"])(Object(s["a"])(t),"onPopupMouseDown",(function(){var e;(t.hasPopupMouseDown=!0,clearTimeout(t.mouseDownTimeout),t.mouseDownTimeout=window.setTimeout((function(){t.hasPopupMouseDown=!1}),0),t.context)&&(e=t.context).onPopupMouseDown.apply(e,arguments)})),Object(l["a"])(Object(s["a"])(t),"onDocumentClick",(function(e){if(!t.props.mask||t.props.maskClosable){var n=e.target,r=t.getRootDomNode(),i=t.getPopupDomNode();Object(m["a"])(r,n)&&!t.isContextMenuOnly()||Object(m["a"])(i,n)||t.hasPopupMouseDown||t.close()}})),Object(l["a"])(Object(s["a"])(t),"getRootDomNode",(function(){var e=t.props.getTriggerDOMNode;if(e)return e(t.triggerRef.current);try{var n=Object(g["a"])(t.triggerRef.current);if(n)return n}catch(r){}return d.a.findDOMNode(Object(s["a"])(t))})),Object(l["a"])(Object(s["a"])(t),"getPopupClassNameFromAlign",(function(e){var n=[],r=t.props,i=r.popupPlacement,o=r.builtinPlacements,a=r.prefixCls,s=r.alignPoint,u=r.getPopupClassNameFromAlign;return i&&o&&n.push(A(o,a,e,s)),u&&n.push(u(e)),n.join(" ")})),Object(l["a"])(Object(s["a"])(t),"getComponent",(function(){var e=t.props,n=e.prefixCls,r=e.destroyPopupOnHide,o=e.popupClassName,a=e.onPopupAlign,s=e.popupMotion,u=e.popupAnimation,c=e.popupTransitionName,l=e.popupStyle,p=e.mask,h=e.maskAnimation,d=e.maskTransitionName,v=e.maskMotion,m=e.zIndex,g=e.popup,y=e.stretch,b=e.alignPoint,_=e.mobile,x=e.forceRender,w=e.onPopupClick,O=t.state,E=O.popupVisible,S=O.point,j=t.getPopupAlign(),A={};return t.isMouseEnterToShow()&&(A.onMouseEnter=t.onPopupMouseEnter),t.isMouseLeaveToHide()&&(A.onMouseLeave=t.onPopupMouseLeave),A.onMouseDown=t.onPopupMouseDown,A.onTouchStart=t.onPopupMouseDown,f["createElement"](Mt,Object(i["a"])({prefixCls:n,destroyPopupOnHide:r,visible:E,point:b&&S,className:o,align:j,onAlign:a,animation:u,getClassNameFromAlign:t.getPopupClassNameFromAlign},A,{stretch:y,getRootDomNode:t.getRootDomNode,style:l,mask:p,zIndex:m,transitionName:c,maskAnimation:h,maskTransitionName:d,maskMotion:v,ref:t.popupRef,motion:s,mobile:_,forceRender:x,onClick:w}),"function"===typeof g?g():g)})),Object(l["a"])(Object(s["a"])(t),"attachParent",(function(e){v["a"].cancel(t.attachId);var n,r=t.props,i=r.getPopupContainer,o=r.getDocument,a=t.getRootDomNode();i?(a||0===i.length)&&(n=i(a)):n=o(t.getRootDomNode()).body,n?n.appendChild(e):t.attachId=Object(v["a"])((function(){t.attachParent(e)}))})),Object(l["a"])(Object(s["a"])(t),"getContainer",(function(){if(!t.portalContainer){var e=t.props.getDocument,n=e(t.getRootDomNode()).createElement("div");n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",t.portalContainer=n}return t.attachParent(t.portalContainer),t.portalContainer})),Object(l["a"])(Object(s["a"])(t),"setPoint",(function(e){var n=t.props.alignPoint;n&&e&&t.setState({point:{pageX:e.pageX,pageY:e.pageY}})})),Object(l["a"])(Object(s["a"])(t),"handlePortalUpdate",(function(){t.state.prevPopupVisible!==t.state.popupVisible&&t.props.afterPopupVisibleChange(t.state.popupVisible)})),Object(l["a"])(Object(s["a"])(t),"triggerContextValue",{onPopupMouseDown:t.onPopupMouseDown}),r="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,t.state={prevPopupVisible:r,popupVisible:r},Nt.forEach((function(e){t["fire".concat(e)]=function(n){t.fireEvents(e,n)}})),t}return Object(a["a"])(p,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,t=this.props,n=this.state;if(n.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(e=t.getDocument(this.getRootDomNode()),this.clickOutsideHandler=b(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||t.getDocument(this.getRootDomNode()),this.touchOutsideHandler=b(e,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(e=e||t.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=b(e,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=b(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),v["a"].cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var e;return(null===(e=this.popupRef.current)||void 0===e?void 0:e.getElement())||null}},{key:"getPopupAlign",value:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,r=e.builtinPlacements;return t&&r?j(r,t,n):n}},{key:"setPopupVisible",value:function(e,t){var n=this.props.alignPoint,r=this.state.popupVisible;this.clearDelayTimer(),r!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:r}),this.props.onPopupVisibleChange(e)),n&&t&&e&&this.setPoint(t)}},{key:"delaySetPopupVisible",value:function(e,t,n){var r=this,i=1e3*t;if(this.clearDelayTimer(),i){var o=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){r.setPopupVisible(e,o),r.clearDelayTimer()}),i)}else this.setPopupVisible(e,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire".concat(e)]:t[e]||n[e]}},{key:"isClickToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var e=this.props.action;return"contextMenu"===e||1===e.length&&"contextMenu"===e[0]}},{key:"isContextMenuToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var e;this.state.popupVisible&&(null===(e=this.popupRef.current)||void 0===e||e.forceAlign())}},{key:"fireEvents",value:function(e,t){var n=this.props.children.props[e];n&&n(t);var r=this.props[e];r&&r(t)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var t=this.state.popupVisible,n=this.props,i=n.children,o=n.forceRender,a=n.alignPoint,s=n.className,u=n.autoDestroy,c=f["Children"].only(i),l={key:"trigger"};this.isContextMenuToShow()?l.onContextMenu=this.onContextMenu:l.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(l.onClick=this.onClick,l.onMouseDown=this.onMouseDown,l.onTouchStart=this.onTouchStart):(l.onClick=this.createTwoChains("onClick"),l.onMouseDown=this.createTwoChains("onMouseDown"),l.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(l.onMouseEnter=this.onMouseEnter,a&&(l.onMouseMove=this.onMouseMove)):l.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?l.onMouseLeave=this.onMouseLeave:l.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(l.onFocus=this.onFocus,l.onBlur=this.onBlur):(l.onFocus=this.createTwoChains("onFocus"),l.onBlur=this.createTwoChains("onBlur"));var p=E()(c&&c.props&&c.props.className,s);p&&(l.className=p);var h=Object(r["a"])({},l);Object(y["c"])(c)&&(h.ref=Object(y["a"])(this.triggerRef,c.ref));var d,v=f["cloneElement"](c,h);return(t||this.popupRef.current||o)&&(d=f["createElement"](e,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!t&&u&&(d=null),f["createElement"](It.Provider,{value:this.triggerContextValue},v,d)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.popupVisible,r={};return void 0!==n&&t.popupVisible!==n&&(r.popupVisible=n,r.prevPopupVisible=t.popupVisible),r}}]),p}(f["Component"]);return Object(l["a"])(t,"contextType",It),Object(l["a"])(t,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:Lt,getDocument:Dt,onPopupVisibleChange:Rt,afterPopupVisibleChange:Rt,onPopupAlign:Rt,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),t}t["a"]=Ft(w)},uhBA:function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,n,r,o){if("function"!==typeof n)throw new TypeError("The listener must be a function");var s=new a(n,r||e,o),u=i?i+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function u(e,t){0===--e._eventsCount?e._events=new o:delete e._events[t]}function c(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),c.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},c.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,a=new Array(o);r<o;r++)a[r]=n[r].fn;return a},c.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},c.prototype.emit=function(e,t,n,r,o,a){var s=i?i+e:e;if(!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,o),!0;case 6:return l.fn.call(l.context,t,n,r,o,a),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var p,h=l.length;for(c=0;c<h;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,r);break;default:if(!u)for(p=1,u=new Array(f-1);p<f;p++)u[p-1]=arguments[p];l[c].fn.apply(l[c].context,u)}}return!0},c.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},c.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},c.prototype.removeListener=function(e,t,n,r){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return u(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||r&&!a.once||n&&a.context!==n||u(this,o);else{for(var s=0,c=[],l=a.length;s<l;s++)(a[s].fn!==t||r&&!a[s].once||n&&a[s].context!==n)&&c.push(a[s]);c.length?this._events[o]=1===c.length?c[0]:c:u(this,o)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&u(this,t)):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,e.exports=c},ujMp:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.circularDependencyToException=t.listMetadataForTarget=t.listRegisteredBindingsForServiceIdentifier=t.getServiceIdentifierAsString=t.getFunctionName=void 0;var r=n("MON2");function i(e){if("function"===typeof e){var t=e;return t.name}if("symbol"===typeof e)return e.toString();t=e;return t}function o(e,t,n){var r="",i=n(e,t);return 0!==i.length&&(r="\nRegistered bindings:",i.forEach((function(e){var t="Object";null!==e.implementationType&&(t=l(e.implementationType)),r=r+"\n "+t,e.constraint.metaData&&(r=r+" - "+e.constraint.metaData)}))),r}function a(e,t){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===t||a(e.parentRequest,t))}function s(e){function t(e,n){void 0===n&&(n=[]);var r=i(e.serviceIdentifier);return n.push(r),null!==e.parentRequest?t(e.parentRequest,n):n}var n=t(e);return n.reverse().join(" --\x3e ")}function u(e){e.childRequests.forEach((function(e){if(a(e,e.serviceIdentifier)){var t=s(e);throw new Error(r.CIRCULAR_DEPENDENCY+" "+t)}u(e)}))}function c(e,t){if(t.isTagged()||t.isNamed()){var n="",r=t.getNamedTag(),i=t.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach((function(e){n+=e.toString()+"\n"}))," "+e+"\n "+e+" - "+n}return" "+e}function l(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}t.getServiceIdentifierAsString=i,t.listRegisteredBindingsForServiceIdentifier=o,t.circularDependencyToException=u,t.listMetadataForTarget=c,t.getFunctionName=l},unQa:function(e,t,n){"use strict";var r=n("I+eb"),i=n("ImZN"),o=n("HAuM");r({target:"Map",stat:!0},{keyBy:function(e,t){var n=new this;o(t);var r=o(n.set);return i(e,(function(e){r.call(n,t(e),e)})),n}})},uqXc:function(e,t,n){var r=n("I+eb"),i=n("5Yz+");r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},uy83:function(e,t,n){var r=n("0Dky");e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},v5b1:function(e,t,n){"use strict";var r=n("I+eb"),i=n("g6v/"),o=n("6x0u"),a=n("ewvW"),s=n("wE6v"),u=n("4WOD"),c=n("Bs8V").f;i&&r({target:"Object",proto:!0,forced:o},{__lookupGetter__:function(e){var t,n=a(this),r=s(e,!0);do{if(t=c(n,r))return t.get}while(n=u(n))}})},vRGJ:function(e,t,n){var r=n("AqCL");e.exports=y,e.exports.parse=o,e.exports.compile=a,e.exports.tokensToFunction=c,e.exports.tokensToRegExp=g;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){var n,r=[],o=0,a=0,s="",u=t&&t.delimiter||"/";while(null!=(n=i.exec(e))){var c=n[0],p=n[1],h=n.index;if(s+=e.slice(a,h),a=h+c.length,p)s+=p[1];else{var d=e[a],v=n[2],m=n[3],g=n[4],y=n[5],b=n[6],_=n[7];s&&(r.push(s),s="");var x=null!=v&&null!=d&&d!==v,w="+"===b||"*"===b,O="?"===b||"*"===b,E=n[2]||u,S=g||y;r.push({name:m||o++,prefix:v||"",delimiter:E,optional:O,repeat:w,partial:x,asterisk:!!_,pattern:S?f(S):_?".*":"[^"+l(E)+"]+?"})}}return a<e.length&&(s+=e.substr(a)),s&&r.push(s),r}function a(e,t){return c(o(e,t),t)}function s(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e){return encodeURI(e).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function c(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",h(t)));return function(t,i){for(var o="",a=t||{},c=i||{},l=c.pretty?s:encodeURIComponent,f=0;f<e.length;f++){var p=e[f];if("string"!==typeof p){var h,d=a[p.name];if(null==d){if(p.optional){p.partial&&(o+=p.prefix);continue}throw new TypeError('Expected "'+p.name+'" to be defined')}if(r(d)){if(!p.repeat)throw new TypeError('Expected "'+p.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(p.optional)continue;throw new TypeError('Expected "'+p.name+'" to not be empty')}for(var v=0;v<d.length;v++){if(h=l(d[v]),!n[f].test(h))throw new TypeError('Expected all "'+p.name+'" to match "'+p.pattern+'", but received `'+JSON.stringify(h)+"`");o+=(0===v?p.prefix:p.delimiter)+h}}else{if(h=p.asterisk?u(d):l(d),!n[f].test(h))throw new TypeError('Expected "'+p.name+'" to match "'+p.pattern+'", but received "'+h+'"');o+=p.prefix+h}}else o+=p}return o}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function f(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function p(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function d(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return p(e,t)}function v(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(y(e[i],t,n).source);var o=new RegExp("(?:"+r.join("|")+")",h(n));return p(o,t)}function m(e,t,n){return g(o(e,n),t,n)}function g(e,t,n){r(t)||(n=t||n,t=[]),n=n||{};for(var i=n.strict,o=!1!==n.end,a="",s=0;s<e.length;s++){var u=e[s];if("string"===typeof u)a+=l(u);else{var c=l(u.prefix),f="(?:"+u.pattern+")";t.push(u),u.repeat&&(f+="(?:"+c+f+")*"),f=u.optional?u.partial?c+"("+f+")?":"(?:"+c+"("+f+"))?":c+"("+f+")",a+=f}}var d=l(n.delimiter||"/"),v=a.slice(-d.length)===d;return i||(a=(v?a.slice(0,-d.length):a)+"(?:"+d+"(?=$))?"),a+=o?"$":i&&v?"":"(?="+d+"|$)",p(new RegExp("^"+a,h(n)),t)}function y(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?d(e,t):r(e)?v(e,t,n):m(e,t,n)}},vZi8:function(e,t,n){var r=n("I+eb"),i=n("YGK4"),o=n("eDxR"),a=n("glrk"),s=n("4WOD"),u=n("ImZN"),c=o.keys,l=o.toKey,f=function(e){var t=[];return u(e,t.push,t),t},p=function(e,t){var n=c(e,t),r=s(e);if(null===r)return n;var o=p(r,t);return o.length?n.length?f(new i(n.concat(o))):o:n};r({target:"Reflect",stat:!0},{getMetadataKeys:function(e){var t=arguments.length<2?void 0:l(arguments[1]);return p(a(e),t)}})},vdRX:function(e,t,n){var r=n("I+eb");r({target:"Math",stat:!0},{DEG_PER_RAD:Math.PI/180})},viRO:function(e,t,n){"use strict";var r=n("MgzW"),i=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var a=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),o=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),a=f("react.provider"),s=f("react.context"),u=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var p="function"===typeof Symbol&&Symbol.iterator;function h(e){return null===e||"object"!==typeof e?null:(e=p&&e[p]||e["@@iterator"],"function"===typeof e?e:null)}function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||v}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||v}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var _=b.prototype=new y;_.constructor=b,r(_,g.prototype),_.isPureReactComponent=!0;var x={current:null},w=Object.prototype.hasOwnProperty,O={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var r,o={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,r)&&!O.hasOwnProperty(r)&&(o[r]=t[r]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];o.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)void 0===o[r]&&(o[r]=u[r]);return{$$typeof:i,type:e,key:a,ref:s,props:o,_owner:x.current}}function S(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function j(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}function A(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}var k=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?A(""+e.key):t.toString(36)}function T(e,t,n,r,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case o:u=!0}}if(u)return u=e,a=a(u),e=""===r?"."+C(u,0):r,Array.isArray(a)?(n="",null!=e&&(n=e.replace(k,"$&/")+"/"),T(a,t,n,"",(function(e){return e}))):null!=a&&(j(a)&&(a=S(a,n+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(k,"$&/")+"/")+e)),t.push(a)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){s=e[c];var l=r+C(s,c);u+=T(s,t,n,l,a)}else if(l=h(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)s=s.value,l=r+C(s,c++),u+=T(s,t,n,l,a);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function M(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var I={current:null};function R(){var e=I.current;if(null===e)throw Error(d(321));return e}var L={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:M,forEach:function(e,t,n){M(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return M(e,(function(){t++})),t},toArray:function(e){return M(e,(function(e){return e}))||[]},only:function(e){if(!j(e))throw Error(d(143));return e}},t.Component=g,t.PureComponent=b,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var o=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!O.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];o.children=c}return{$$typeof:i,type:e.type,key:a,ref:s,props:o,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=j,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.2"},vo4V:function(e,t,n){var r=n("90hW"),i=Math.abs,o=Math.pow,a=o(2,-52),s=o(2,-23),u=o(2,127)*(2-s),c=o(2,-126),l=function(e){return e+1/a-1/a};e.exports=Math.fround||function(e){var t,n,o=i(e),f=r(e);return o<c?f*l(o/c/s)*c*s:(t=(1+s/a)*o,n=t-(t-o),n>u||n!=n?f*(1/0):f*n)}},voyM:function(e,t){e.exports=Math.scale||function(e,t,n,r,i){return 0===arguments.length||e!=e||t!=t||n!=n||r!=r||i!=i?NaN:e===1/0||e===-1/0?e:(e-t)*(i-r)/(n-t)+r}},vuIU:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("o46R");function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Object(r["a"])(i.key),i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},vxnP:function(e,t,n){"use strict";var r=n("I+eb");r({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},vzwy:function(e,t,n){"use strict";var r=n("I+eb"),i=n("ppGB"),o=n("wg0c"),a="Invalid number representation",s="Invalid radix",u=/^[\da-z]+$/;r({target:"Number",stat:!0},{fromString:function(e,t){var n,r,c=1;if("string"!=typeof e)throw TypeError(a);if(!e.length)throw SyntaxError(a);if("-"==e.charAt(0)&&(c=-1,e=e.slice(1),!e.length))throw SyntaxError(a);if(n=void 0===t?10:i(t),n<2||n>36)throw RangeError(s);if(!u.test(e)||(r=o(e,n)).toString(n)!==e)throw SyntaxError(a);return c*r}})},w1rZ:function(e,t,n){var r=n("I+eb"),i=n("fhKU");r({target:"Number",stat:!0,forced:Number.parseFloat!=i},{parseFloat:i})},w7s6:function(e,t,n){var r=n("I+eb");r({target:"Math",stat:!0},{RAD_PER_DEG:180/Math.PI})},wE6v:function(e,t,n){var r=n("hh1v");e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},"wEI+":function(e,t,n){"use strict";n.d(t,"b",(function(){return B}));var r=n("wx14"),i=n("Pw59"),o=n("85Yc"),a=n("YrtM"),s=n("q1tI"),u=n("ZvpZ"),c=Object(r["a"])({},u["a"].Modal);function l(e){c=e?Object(r["a"])(Object(r["a"])({},c),e):Object(r["a"])({},u["a"].Modal)}var f=n("YlG9"),p="internalMark",h=function(e){var t=e.locale,n=void 0===t?{}:t,i=e.children;e._ANT_MARK__;s["useEffect"]((function(){return l(n&&n.Modal),function(){l()}}),[n]);var o=s["useMemo"]((function(){return Object(r["a"])(Object(r["a"])({},n),{exist:!0})}),[n]);return s["createElement"](f["a"].Provider,{value:o},i)},d=h,v=n("YMnH"),m=n("tsqr"),g=n("TeRw"),y=n("H84U"),b=n("AJpP"),_=n("FER5"),x=n("iNWh"),w=n("LuSS"),O=n("b3aT"),E=function(){function e(t,n){var r;if(void 0===t&&(t=""),void 0===n&&(n={}),t instanceof e)return t;"number"===typeof t&&(t=Object(_["d"])(t)),this.originalInput=t;var i=Object(w["a"])(t);this.originalInput=t,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(r=n.format)&&void 0!==r?r:i.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},e.prototype.getLuminance=function(){var e,t,n,r=this.toRgb(),i=r.r/255,o=r.g/255,a=r.b/255;return e=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4),t=o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4),n=a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4),.2126*e+.7152*t+.0722*n},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(e){return this.a=Object(O["b"])(e),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var e=this.toHsl().s;return 0===e},e.prototype.toHsv=function(){var e=Object(_["h"])(this.r,this.g,this.b);return{h:360*e.h,s:e.s,v:e.v,a:this.a}},e.prototype.toHsvString=function(){var e=Object(_["h"])(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1===this.a?"hsv(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsva(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var e=Object(_["g"])(this.r,this.g,this.b);return{h:360*e.h,s:e.s,l:e.l,a:this.a}},e.prototype.toHslString=function(){var e=Object(_["g"])(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1===this.a?"hsl(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsla(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(e){return void 0===e&&(e=!1),Object(_["f"])(this.r,this.g,this.b,e)},e.prototype.toHexString=function(e){return void 0===e&&(e=!1),"#"+this.toHex(e)},e.prototype.toHex8=function(e){return void 0===e&&(e=!1),Object(_["j"])(this.r,this.g,this.b,this.a,e)},e.prototype.toHex8String=function(e){return void 0===e&&(e=!1),"#"+this.toHex8(e)},e.prototype.toHexShortString=function(e){return void 0===e&&(e=!1),1===this.a?this.toHexString(e):this.toHex8String(e)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),n=Math.round(this.b);return 1===this.a?"rgb(".concat(e,", ").concat(t,", ").concat(n,")"):"rgba(".concat(e,", ").concat(t,", ").concat(n,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var e=function(e){return"".concat(Math.round(100*Object(O["a"])(e,255)),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var e=function(e){return Math.round(100*Object(O["a"])(e,255))};return 1===this.a?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var e="#"+Object(_["f"])(this.r,this.g,this.b,!1),t=0,n=Object.entries(x["a"]);t<n.length;t++){var r=n[t],i=r[0],o=r[1];if(e===o)return i}return!1},e.prototype.toString=function(e){var t=Boolean(e);e=null!==e&&void 0!==e?e:this.format;var n=!1,r=this.a<1&&this.a>=0,i=!t&&r&&(e.startsWith("hex")||"name"===e);return i?"name"===e&&0===this.a?this.toName():this.toRgbString():("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=Object(O["c"])(n.l),new e(n)},e.prototype.brighten=function(t){void 0===t&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),new e(n)},e.prototype.darken=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=Object(O["c"])(n.l),new e(n)},e.prototype.tint=function(e){return void 0===e&&(e=10),this.mix("white",e)},e.prototype.shade=function(e){return void 0===e&&(e=10),this.mix("black",e)},e.prototype.desaturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=Object(O["c"])(n.s),new e(n)},e.prototype.saturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=Object(O["c"])(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,new e(n)},e.prototype.mix=function(t,n){void 0===n&&(n=50);var r=this.toRgb(),i=new e(t).toRgb(),o=n/100,a={r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a};return new e(a)},e.prototype.analogous=function(t,n){void 0===t&&(t=6),void 0===n&&(n=30);var r=this.toHsl(),i=360/n,o=[this];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(new e(r));return o},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){void 0===t&&(t=6);var n=this.toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/t;while(t--)a.push(new e({h:r,s:i,v:o})),o=(o+s)%1;return a},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),r=new e(t).toRgb(),i=n.a+r.a*(1-n.a);return new e({r:(n.r*n.a+r.r*r.a*(1-n.a))/i,g:(n.g*n.a+r.g*r.a*(1-n.a))/i,b:(n.b*n.a+r.b*r.a*(1-n.a))/i,a:i})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),r=n.h,i=[this],o=360/t,a=1;a<t;a++)i.push(new e({h:(r+a*o)%360,s:n.s,l:n.l}));return i},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();var S=n("MNnm"),j=n("BU3w"),A="-ant-".concat(Date.now(),"-").concat(Math.random());function k(e,t){var n={},r=function(e,t){var n=e.clone();return n=(null===t||void 0===t?void 0:t(n))||n,n.toRgbString()},i=function(e,t){var i=new E(e),o=Object(b["a"])(i.toRgbString());n["".concat(t,"-color")]=r(i),n["".concat(t,"-color-disabled")]=o[1],n["".concat(t,"-color-hover")]=o[4],n["".concat(t,"-color-active")]=o[6],n["".concat(t,"-color-outline")]=i.clone().setAlpha(.2).toRgbString(),n["".concat(t,"-color-deprecated-bg")]=o[0],n["".concat(t,"-color-deprecated-border")]=o[2]};if(t.primaryColor){i(t.primaryColor,"primary");var o=new E(t.primaryColor),a=Object(b["a"])(o.toRgbString());a.forEach((function(e,t){n["primary-".concat(t+1)]=e})),n["primary-color-deprecated-l-35"]=r(o,(function(e){return e.lighten(35)})),n["primary-color-deprecated-l-20"]=r(o,(function(e){return e.lighten(20)})),n["primary-color-deprecated-t-20"]=r(o,(function(e){return e.tint(20)})),n["primary-color-deprecated-t-50"]=r(o,(function(e){return e.tint(50)})),n["primary-color-deprecated-f-12"]=r(o,(function(e){return e.setAlpha(.12*e.getAlpha())}));var s=new E(a[0]);n["primary-color-active-deprecated-f-30"]=r(s,(function(e){return e.setAlpha(.3*e.getAlpha())})),n["primary-color-active-deprecated-d-02"]=r(s,(function(e){return e.darken(2)}))}t.successColor&&i(t.successColor,"success"),t.warningColor&&i(t.warningColor,"warning"),t.errorColor&&i(t.errorColor,"error"),t.infoColor&&i(t.infoColor,"info");var u=Object.keys(n).map((function(t){return"--".concat(e,"-").concat(t,": ").concat(n[t],";")}));return"\n  :root {\n    ".concat(u.join("\n"),"\n  }\n  ").trim()}function C(e,t){var n=k(e,t);Object(S["a"])()&&Object(j["a"])(n,"".concat(A,"-dynamic-theme"))}var T,M,P=n("caoh"),I=n("3Nzz"),R=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form"],L="ant",D="anticon";function N(){return T||L}function F(){return M||D}var z=function(e){var t=e.prefixCls,n=e.iconPrefixCls,r=e.theme;void 0!==t&&(T=t),void 0!==n&&(M=n),r&&C(N(),r)},B=function(){return{getPrefixCls:function(e,t){return t||(e?"".concat(N(),"-").concat(e):N())},getIconPrefixCls:F,getRootPrefixCls:function(e,t){return e||(T||(t&&t.includes("-")?t.replace(/^(.*)-[^-]*$/,"$1"):N()))}}},U=function(e){var t,n,c=e.children,l=e.csp,f=e.autoInsertSpaceInButton,h=e.form,v=e.locale,m=e.componentSize,g=e.direction,b=e.space,_=e.virtual,x=e.dropdownMatchSelectWidth,w=e.legacyLocale,O=e.parentContext,E=e.iconPrefixCls,S=e.componentDisabled,j=s["useCallback"]((function(t,n){var r=e.prefixCls;if(n)return n;var i=r||O.getPrefixCls("");return t?"".concat(i,"-").concat(t):i}),[O.getPrefixCls,e.prefixCls]),A=Object(r["a"])(Object(r["a"])({},O),{csp:l,autoInsertSpaceInButton:f,locale:v||w,direction:g,space:b,virtual:_,dropdownMatchSelectWidth:x,getPrefixCls:j});R.forEach((function(t){var n=e[t];n&&(A[t]=n)}));var k=Object(a["a"])((function(){return A}),A,(function(e,t){var n=Object.keys(e),r=Object.keys(t);return n.length!==r.length||n.some((function(n){return e[n]!==t[n]}))})),C=s["useMemo"]((function(){return{prefixCls:E,csp:l}}),[E,l]),T=c,M={};return v&&(M=(null===(t=v.Form)||void 0===t?void 0:t.defaultValidateMessages)||(null===(n=u["a"].Form)||void 0===n?void 0:n.defaultValidateMessages)||{}),h&&h.validateMessages&&(M=Object(r["a"])(Object(r["a"])({},M),h.validateMessages)),Object.keys(M).length>0&&(T=s["createElement"](o["b"],{validateMessages:M},c)),v&&(T=s["createElement"](d,{locale:v,_ANT_MARK__:p},T)),(E||l)&&(T=s["createElement"](i["a"].Provider,{value:C},T)),m&&(T=s["createElement"](I["a"],{size:m},T)),void 0!==S&&(T=s["createElement"](P["a"],{disabled:S},T)),s["createElement"](y["b"].Provider,{value:k},T)},V=function(e){return s["useEffect"]((function(){e.direction&&(m["default"].config({rtl:"rtl"===e.direction}),g["default"].config({rtl:"rtl"===e.direction}))}),[e.direction]),s["createElement"](v["a"],null,(function(t,n,i){return s["createElement"](y["a"],null,(function(t){return s["createElement"](U,Object(r["a"])({parentContext:t,legacyLocale:i},e))}))}))};V.ConfigContext=y["b"],V.SizeContext=I["b"],V.config=z;t["a"]=V},"wF/u":function(e,t,n){var r=n("e5cp"),i=n("ExA7");function o(e,t,n,a,s){return e===t||(null==e||null==t||!i(e)&&!i(t)?e!==e&&t!==t:r(e,t,n,a,o,s))}e.exports=o},wJg7:function(e,t){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;function i(e,t){var i=typeof e;return t=null==t?n:t,!!t&&("number"==i||"symbol"!=i&&r.test(e))&&e>-1&&e%1==0&&e<t}e.exports=i},wXlr:function(e,t,n){"use strict";e.exports=n("TLyq")},"wZ/5":function(e,t,n){"use strict";var r=n("I+eb"),i=n("2oRo"),o=n("Yhre"),a=n("JiZb"),s="ArrayBuffer",u=o[s],c=i[s];r({global:!0,forced:c!==u},{ArrayBuffer:u}),a(s)},wclG:function(e,t,n){var r=n("pFRH"),i=n("88Gu"),o=i(r);e.exports=o},wfmh:function(e,t,n){var r=n("I+eb"),i=n("ImZN"),o=n("hBjN");r({target:"Object",stat:!0},{fromEntries:function(e){var t={};return i(e,(function(e,n){o(t,e,n)}),void 0,!0),t}})},wg0c:function(e,t,n){var r=n("2oRo"),i=n("WKiH").trim,o=n("WJkJ"),a=r.parseInt,s=/^[+-]?0[Xx]/,u=8!==a(o+"08")||22!==a(o+"0x16");e.exports=u?function(e,t){var n=i(String(e));return a(n,t>>>0||(s.test(n)?16:10))}:a},wgJM:function(e,t,n){"use strict";var r=function(e){return+setTimeout(e,16)},i=function(e){return clearTimeout(e)};"undefined"!==typeof window&&"requestAnimationFrame"in window&&(r=function(e){return window.requestAnimationFrame(e)},i=function(e){return window.cancelAnimationFrame(e)});var o=0,a=new Map;function s(e){a["delete"](e)}var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;o+=1;var n=o;function i(t){if(0===t)s(n),e();else{var o=r((function(){i(t-1)}));a.set(n,o)}}return i(t),n};u.cancel=function(e){var t=a.get(e);return s(t),i(t)},t["a"]=u},wgYD:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("Cg3G");r({target:"Map",proto:!0,real:!0,forced:i},{deleteAll:function(){return o.apply(this,arguments)}})},wnjb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataReader=void 0;var r=n("xfSm"),i=function(){function e(){}return e.prototype.getConstructorMetadata=function(e){var t=Reflect.getMetadata(r.PARAM_TYPES,e),n=Reflect.getMetadata(r.TAGGED,e);return{compilerGeneratedMetadata:t,userGeneratedMetadata:n||{}}},e.prototype.getPropertiesMetadata=function(e){var t=Reflect.getMetadata(r.TAGGED_PROP,e)||[];return t},e}();t.MetadataReader=i},wtia:function(e,t,n){"use strict";n.r(t);var r=n("k1fw"),i=n("q1tI"),o=n.n(i),a=n("dEAq"),s=n("Zxc8"),u=n("nKUr"),c=o.a.memo((e=>{var t=e.demos,n=t["docs-layercontrol"].component;return Object(u["jsx"])(u["Fragment"],{children:Object(u["jsxs"])(o.a.Fragment,{children:[Object(u["jsx"])("div",{className:"markdown",children:Object(u["jsxs"])("h2",{id:"\u56fe\u5c42\u63a7\u4ef6",children:[Object(u["jsx"])(a["AnchorLink"],{to:"#\u56fe\u5c42\u63a7\u4ef6","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u56fe\u5c42\u63a7\u4ef6"]})}),Object(u["jsx"])(s["default"],Object(r["a"])(Object(r["a"])({},t["docs-layercontrol"].previewerProps),{},{children:Object(u["jsx"])(n,{})}))]})})}));t["default"]=e=>{var t=o.a.useContext(a["context"]),n=t.demos;return o.a.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&a["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),Object(u["jsx"])(c,{demos:n})}},wx14:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,"a",(function(){return r}))},"x+uP":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("U8pU");function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(T){l=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),s=new A(r||[]);return o(a,"_invoke",{value:O(e,n,s)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(T){return{type:"throw",arg:T}}}e.wrap=f;var h={};function d(){}function v(){}function m(){}var g={};l(g,s,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(k([])));b&&b!==t&&n.call(b,s)&&(g=b);var _=m.prototype=d.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(o,a,s,u){var c=p(e[o],e,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==Object(r["a"])(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,s,u)}),(function(e){i("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return i("throw",e,s,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function O(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return C()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=p(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator["return"]&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=p(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function k(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return v.prototype=m,o(_,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:v,configurable:!0}),v.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},x(w.prototype),l(w.prototype,u,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new w(f(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(_),l(_,c,"Generator"),l(_,s,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;j(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}},"x/wj":function(e,t,n){"use strict";n.r(t);var r=n("k1fw"),i=n("q1tI"),o=n.n(i),a=n("dEAq"),s=n("Zxc8"),u=n("nKUr"),c=o.a.memo((e=>{var t=e.demos,n=t["docs-pointlayer"].component;return Object(u["jsx"])(u["Fragment"],{children:Object(u["jsxs"])(o.a.Fragment,{children:[Object(u["jsx"])("div",{className:"markdown",children:Object(u["jsxs"])("h2",{id:"\u6d4b\u8bd5-blend",children:[Object(u["jsx"])(a["AnchorLink"],{to:"#\u6d4b\u8bd5-blend","aria-hidden":"true",tabIndex:-1,children:Object(u["jsx"])("span",{className:"icon icon-link"})}),"\u6d4b\u8bd5 blend"]})}),Object(u["jsx"])(s["default"],Object(r["a"])(Object(r["a"])({},t["docs-pointlayer"].previewerProps),{},{children:Object(u["jsx"])(n,{})}))]})})}));t["default"]=e=>{var t=o.a.useContext(a["context"]),n=t.demos;return o.a.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&a["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),Object(u["jsx"])(c,{demos:n})}},"x/xZ":function(e,t,n){"use strict";t["a"]=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),n=t.width,r=t.height;if(n||r)return!0}if(e.getBoundingClientRect){var i=e.getBoundingClientRect(),o=i.width,a=i.height;if(o||a)return!0}}return!1}},x2v5:function(e){e.exports=JSON.parse("{}")},x8cr:function(e,t,n){},xDBR:function(e,t){e.exports=!1},xYSL:function(e,t){function n(e,t){return e.has(t)}e.exports=n},xbqb:function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},xfSm:function(e,t,n){"use strict";function r(){return[t.INJECT_TAG,t.MULTI_INJECT_TAG,t.NAME_TAG,t.UNMANAGED_TAG,t.NAMED_TAG,t.OPTIONAL_TAG]}Object.defineProperty(t,"__esModule",{value:!0}),t.NON_CUSTOM_TAG_KEYS=t.POST_CONSTRUCT=t.DESIGN_PARAM_TYPES=t.PARAM_TYPES=t.TAGGED_PROP=t.TAGGED=t.MULTI_INJECT_TAG=t.INJECT_TAG=t.OPTIONAL_TAG=t.UNMANAGED_TAG=t.NAME_TAG=t.NAMED_TAG=void 0,t.NAMED_TAG="named",t.NAME_TAG="name",t.UNMANAGED_TAG="unmanaged",t.OPTIONAL_TAG="optional",t.INJECT_TAG="inject",t.MULTI_INJECT_TAG="multi_inject",t.TAGGED="inversify:tagged",t.TAGGED_PROP="inversify:tagged_props",t.PARAM_TYPES="inversify:paramtypes",t.DESIGN_PARAM_TYPES="design:paramtypes",t.POST_CONSTRUCT="post_construct",t.NON_CUSTOM_TAG_KEYS=r()},xiII:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Request=void 0;var r=n("d9O0"),i=function(){function e(e,t,n,i,o){this.id=r.id(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===n?new Map:null}return e.prototype.addChildRequest=function(t,n,r){var i=new e(t,this.parentContext,this,n,r);return this.childRequests.push(i),i},e}();t.Request=i},xnQO:function(e,t,n){"use strict";function r(e,t){this.x=e,this.y=t}e.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,i=n*this.x+t*this.y;return this.x=r,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.x+n*(this.x-t.x)-r*(this.y-t.y),o=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(e){return e instanceof r?e:Array.isArray(e)?new r(e[0],e[1]):e}},xp6e:function(e,t,n){"use strict";(function(e){function r(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r["throw"](e))}catch(t){o(t)}}function u(e){e.done?n(e.value):i(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function i(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return u([e,t])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function o(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{while((void 0===t||t-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function a(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function s(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}n.d(t,"a",(function(){return Z})),n.d(t,"b",(function(){return q})),n.d(t,"c",(function(){return Y})),n.d(t,"d",(function(){return W})),n.d(t,"e",(function(){return z}));var u={exports:{}},c={exports:{}},l={exports:{}};(function(e,t){function n(e){return e&&"number"===typeof e.length&&e.length>=0&&e.length%1===0}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,e.exports=t["default"]})(l,l.exports);var f={},p={exports:{}},h={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var r=t.pop();return e.call(this,t,r)}},e.exports=t["default"]})(h,h.exports);var d={};Object.defineProperty(d,"__esModule",{value:!0}),d.fallback=b,d.wrap=_;var v,m=d.hasQueueMicrotask="function"===typeof queueMicrotask&&queueMicrotask,g=d.hasSetImmediate="function"===typeof setImmediate&&setImmediate,y=d.hasNextTick="object"===typeof e&&"function"===typeof e.nextTick;function b(e){setTimeout(e,0)}function _(e){return function(t){var n=[],r=arguments.length-1;while(r-- >0)n[r]=arguments[r+1];return e((function(){return t.apply(void 0,n)}))}}v=m?queueMicrotask:g?setImmediate:y?e.nextTick:b,d["default"]=_(v),function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=u;var n=h.exports,r=s(n),i=d,o=s(i),a=f;function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return(0,a.isAsync)(e)?function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var r=t.pop(),i=e.apply(this,t);return c(i,r)}:(0,r["default"])((function(t,n){var r;try{r=e.apply(this,t)}catch(i){return n(i)}if(r&&"function"===typeof r.then)return c(r,n);n(null,r)}))}function c(e,t){return e.then((function(e){l(t,null,e)}),(function(e){l(t,e&&e.message?e:new Error(e))}))}function l(e,t,n){try{e(t,n)}catch(r){(0,o["default"])((function(e){throw e}),r)}}e.exports=t["default"]}(p,p.exports),Object.defineProperty(f,"__esModule",{value:!0}),f.isAsyncIterable=f.isAsyncGenerator=f.isAsync=void 0;var x=p.exports,w=O(x);function O(e){return e&&e.__esModule?e:{default:e}}function E(e){return"AsyncFunction"===e[Symbol.toStringTag]}function S(e){return"AsyncGenerator"===e[Symbol.toStringTag]}function j(e){return"function"===typeof e[Symbol.asyncIterator]}function A(e){if("function"!==typeof e)throw new Error("expected a function");return E(e)?(0,w["default"])(e):e}f["default"]=A,f.isAsync=E,f.isAsyncGenerator=S,f.isAsyncIterable=j;var k={exports:{}};(function(e,t){function n(e,t){if(void 0===t&&(t=e.length),!t)throw new Error("arity is undefined");function n(){var n=this,r=[],i=arguments.length;while(i--)r[i]=arguments[i];return"function"===typeof r[t-1]?e.apply(this,r):new Promise((function(i,o){r[t-1]=function(e){var t=[],n=arguments.length-1;while(n-- >0)t[n]=arguments[n+1];if(e)return o(e);i(t.length>1?t:t[0])},e.apply(n,r)}))}return n}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,e.exports=t["default"]})(k,k.exports),function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=l.exports,r=u(n),i=f,o=u(i),a=k.exports,s=u(a);function u(e){return e&&e.__esModule?e:{default:e}}t["default"]=(0,s["default"])((function(e,t,n){var i=(0,r["default"])(t)?[]:{};e(t,(function(e,t,n){(0,o["default"])(e)((function(e){var r,o=[],a=arguments.length-1;while(a-- >0)o[a]=arguments[a+1];o.length<2&&(r=o,o=r[0]),i[t]=o,n(e)}))}),(function(e){return n(e,i)}))}),3),e.exports=t["default"]}(c,c.exports);var C={exports:{}},T={exports:{}},M={exports:{}},P={exports:{}};(function(e,t){function n(e){function t(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];if(null!==e){var r=e;e=null,r.apply(this,t)}}return Object.assign(t,e),t}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,e.exports=t["default"]})(P,P.exports);var I={exports:{}},R={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return e[Symbol.iterator]&&e[Symbol.iterator]()},e.exports=t["default"]})(R,R.exports),function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=f;var n=l.exports,r=a(n),i=R.exports,o=a(i);function a(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=-1,n=e.length;return function(){return++t<n?{value:e[t],key:t}:null}}function u(e){var t=-1;return function(){var n=e.next();return n.done?null:(t++,{value:n.value,key:t})}}function c(e){var t=e?Object.keys(e):[],n=-1,r=t.length;return function i(){var o=t[++n];return"__proto__"===o?i():n<r?{value:e[o],key:o}:null}}function f(e){if((0,r["default"])(e))return s(e);var t=(0,o["default"])(e);return t?u(t):c(e)}e.exports=t["default"]}(I,I.exports);var L={exports:{}};(function(e,t){function n(e){return function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];if(null===e)throw new Error("Callback was already called.");var r=e;e=null,r.apply(this,t)}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,e.exports=t["default"]})(L,L.exports);var D={exports:{}},N={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={};t["default"]=n,e.exports=t["default"]})(N,N.exports),function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var n=N.exports,r=i(n);function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,i){var o=!1,a=!1,s=!1,u=0,c=0;function l(){u>=t||s||o||(s=!0,e.next().then((function(e){var t=e.value,r=e.done;if(!a&&!o){if(s=!1,r)return o=!0,void(u<=0&&i(null));u++,n(t,c,f),c++,l()}}))["catch"](p))}function f(e,t){if(u-=1,!a)return e?p(e):!1===e?(o=!0,void(a=!0)):t===r["default"]||o&&u<=0?(o=!0,i(null)):void l()}function p(e){a||(s=!1,o=!0,i(e))}l()}e.exports=t["default"]}(D,D.exports),function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=P.exports,r=d(n),i=I.exports,o=d(i),a=L.exports,s=d(a),u=f,c=D.exports,l=d(c),p=N.exports,h=d(p);function d(e){return e&&e.__esModule?e:{default:e}}t["default"]=function(e){return function(t,n,i){if(i=(0,r["default"])(i),e<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!t)return i(null);if((0,u.isAsyncGenerator)(t))return(0,l["default"])(t,e,n,i);if((0,u.isAsyncIterable)(t))return(0,l["default"])(t[Symbol.asyncIterator](),e,n,i);var a=(0,o["default"])(t),c=!1,f=!1,p=0,d=!1;function v(e,t){if(!f)if(p-=1,e)c=!0,i(e);else if(!1===e)c=!0,f=!0;else{if(t===h["default"]||c&&p<=0)return c=!0,i(null);d||m()}}function m(){d=!0;while(p<e&&!c){var t=a();if(null===t)return c=!0,void(p<=0&&i(null));p+=1,n(t.value,t.key,(0,s["default"])(v))}d=!1}m()}},e.exports=t["default"]}(M,M.exports),function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=M.exports,r=u(n),i=f,o=u(i),a=k.exports,s=u(a);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,i){return(0,r["default"])(t)(e,(0,o["default"])(n),i)}t["default"]=(0,s["default"])(c,4),e.exports=t["default"]}(T,T.exports),function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=T.exports,r=a(n),i=k.exports,o=a(i);function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return(0,r["default"])(e,1,t,n)}t["default"]=(0,o["default"])(s,3),e.exports=t["default"]}(C,C.exports),function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s;var n=c.exports,r=a(n),i=C.exports,o=a(i);function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return(0,r["default"])(o["default"],e,t)}e.exports=t["default"]}(u,u.exports);var F=s(u.exports),z=function(){function e(){this.args=[],this.tasks=[]}return e.prototype.call=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];return this.args=t,F(this.tasks)},e.prototype.tap=function(e,t){var n=this;this.tasks.push((function(r){t.apply(void 0,a([],o(n.args),!1)),r(null,e)}))},e}(),B={exports:{}},U={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=l.exports,r=y(n),i=N.exports,o=y(i),a=T.exports,s=y(a),u=P.exports,c=y(u),p=L.exports,h=y(p),d=f,v=y(d),m=k.exports,g=y(m);function y(e){return e&&e.__esModule?e:{default:e}}function b(e,t,n){n=(0,c["default"])(n);var r=0,i=0,a=e.length,s=!1;function u(e,t){!1===e&&(s=!0),!0!==s&&(e?n(e):++i!==a&&t!==o["default"]||n(null))}for(0===a&&n(null);r<a;r++)t(e[r],r,(0,h["default"])(u))}function _(e,t,n){return(0,s["default"])(e,1/0,t,n)}function x(e,t,n){var i=(0,r["default"])(e)?b:_;return i(e,(0,v["default"])(t),n)}t["default"]=(0,g["default"])(x,3),e.exports=t["default"]})(U,U.exports),function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s;var n=U.exports,r=a(n),i=c.exports,o=a(i);function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return(0,o["default"])(r["default"],e,t)}e.exports=t["default"]}(B,B.exports);var V=s(B.exports),H=(function(){function e(){this.tasks=[]}e.prototype.promise=function(){return V(this.tasks)},e.prototype.tapPromise=function(e,t){var n=this;this.tasks.push((function(o){return r(n,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return n.sent(),o(null,e),[2]}}))}))}))}}(),{exports:{}});(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=P.exports,r=l(n),i=L.exports,o=l(i),a=f,s=l(a),u=k.exports,c=l(u);function l(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(t=(0,r["default"])(t),!Array.isArray(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var n=0;function i(t){var r=(0,s["default"])(e[n++]);r.apply(void 0,t.concat([(0,o["default"])(a)]))}function a(r){var o=[],a=arguments.length-1;while(a-- >0)o[a]=arguments[a+1];if(!1!==r)return r||n===e.length?t.apply(void 0,[r].concat(o)):void i(o)}i([])}t["default"]=(0,c["default"])(p),e.exports=t["default"]})(H,H.exports);var G=s(H.exports),W=(function(){function e(){this.tasks=[]}e.prototype.call=function(){return G(this.tasks)},e.prototype.tap=function(e,t){0===this.tasks.length?this.tasks.push((function(e){var n=t();e(!!n&&null,n)})):this.tasks.push((function(n,r){var i=t.apply(void 0,a([],o(n),!1));r(!!i&&null,e)}))}}(),function(){function e(){this.tasks=[]}return e.prototype.call=function(){return F(this.tasks)},e.prototype.tap=function(e,t){this.tasks.push((function(n){var r=t();n(r,e)}))},e}()),q=function(){function e(){this.args=[],this.tasks=[]}return e.prototype.promise=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];return this.args=t,F(this.tasks)},e.prototype.tapPromise=function(e,t){var n=this;this.tasks.push((function(s){return r(n,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,t.apply(void 0,a([],o(this.args),!1))];case 1:return n.sent(),s(null,e),[2]}}))}))}))},e}(),Z=function(){function e(){this.args=[],this.tasks=[]}return e.prototype.promise=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];return this.args=t,F(this.tasks)},e.prototype.tapPromise=function(e,t){var n=this;this.tasks.push((function(s){return r(n,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return[4,t.apply(void 0,a([],o(this.args),!1))];case 1:return n=r.sent(),s(n,e),[2]}}))}))}))},e}(),Y=function(){function e(){this.tasks=[]}return e.prototype.promise=function(){return G(this.tasks)},e.prototype.tapPromise=function(e,t){0===this.tasks.length?this.tasks.push((function(e){t().then((function(t){e(null,t)}))})):this.tasks.push((function(e,n){t(e).then((function(e){n(null,e)}))}))},e}()}).call(this,n("Q2Ig"))},xrYK:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},xs3f:function(e,t,n){var r=n("2oRo"),i=n("zk60"),o="__core-js_shared__",a=r[o]||i(o,{});e.exports=a},y1pI:function(e,t,n){var r=n("ljhN");function i(e,t){var n=e.length;while(n--)if(r(e[n][0],t))return n;return-1}e.exports=i},yGk4:function(e,t,n){var r=n("Cwc5"),i=n("Kz5y"),o=r(i,"Set");e.exports=o},yMAV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Plan=void 0;var r=function(){function e(e,t){this.parentContext=e,this.rootRequest=t}return e}();t.Plan=r},yNLB:function(e,t,n){var r=n("0Dky"),i=n("WJkJ"),o="\u200b\x85\u180e";e.exports=function(e){return r((function(){return!!i[e]()||o[e]()!=o||i[e].name!==e}))}},yP5f:function(e,t,n){var r=n("+K+b");function i(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}e.exports=i},yXV3:function(e,t,n){"use strict";var r=n("I+eb"),i=n("TWQb").indexOf,o=n("pkCn"),a=n("rkAj"),s=[].indexOf,u=!!s&&1/[1].indexOf(1,-0)<0,c=o("indexOf"),l=a("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:u||!c||!l},{indexOf:function(e){return u?s.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:void 0)}})},ye1Q:function(e,t,n){"use strict";var r=n("VTBJ"),i=n("q1tI"),o={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},a=o,s=n("6VBw"),u=function(e,t){return i["createElement"](s["a"],Object(r["a"])(Object(r["a"])({},e),{},{ref:t,icon:a}))};u.displayName="LoadingOutlined";t["a"]=i["forwardRef"](u)},yl30:function(e,t,n){"use strict";var r=n("q1tI"),i=n("MgzW"),o=n("QCnb");function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h=Object.prototype.hasOwnProperty,d={},v={};function m(e){return!!h.call(v,e)||!h.call(d,e)&&(p.test(e)?v[e]=!0:(d[e]=!0,!1))}function g(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),"data-"!==e&&"aria-"!==e));default:return!1}}function y(e,t,n,r){if(null===t||"undefined"===typeof t||g(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function b(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){_[e]=new b(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];_[t]=new b(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){_[e]=new b(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){_[e]=new b(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){_[e]=new b(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){_[e]=new b(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){_[e]=new b(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){_[e]=new b(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){_[e]=new b(e,5,!1,e.toLowerCase(),null,!1,!1)}));var x=/[\-:]([a-z])/g;function w(e){return e[1].toUpperCase()}function O(e,t,n,r){var i=_.hasOwnProperty(t)?_[t]:null,o=null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]));o||(y(t,n,i,r)&&(n=null),r||null===i?m(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(i=i.type,n=3===i||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(x,w);_[t]=new b(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(x,w);_[t]=new b(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(x,w);_[t]=new b(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){_[e]=new b(e,1,!1,e.toLowerCase(),null,!1,!1)})),_.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){_[e]=new b(e,1,!1,e.toLowerCase(),null,!0,!0)}));var E=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=60103,j=60106,A=60107,k=60108,C=60114,T=60109,M=60110,P=60112,I=60113,R=60120,L=60115,D=60116,N=60121,F=60128,z=60129,B=60130,U=60131;if("function"===typeof Symbol&&Symbol.for){var V=Symbol.for;S=V("react.element"),j=V("react.portal"),A=V("react.fragment"),k=V("react.strict_mode"),C=V("react.profiler"),T=V("react.provider"),M=V("react.context"),P=V("react.forward_ref"),I=V("react.suspense"),R=V("react.suspense_list"),L=V("react.memo"),D=V("react.lazy"),N=V("react.block"),V("react.scope"),F=V("react.opaque.id"),z=V("react.debug_trace_mode"),B=V("react.offscreen"),U=V("react.legacy_hidden")}var H,G="function"===typeof Symbol&&Symbol.iterator;function W(e){return null===e||"object"!==typeof e?null:(e=G&&e[G]||e["@@iterator"],"function"===typeof e?e:null)}function q(e){if(void 0===H)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);H=t&&t[1]||""}return"\n"+H+e}var Z=!1;function Y(e,t){if(!e||Z)return"";Z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,s--,0>s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{Z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?q(e):""}function X(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return e=Y(e.type,!1),e;case 11:return e=Y(e.type.render,!1),e;case 22:return e=Y(e.type._render,!1),e;case 1:return e=Y(e.type,!0),e;default:return""}}function K(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case A:return"Fragment";case j:return"Portal";case C:return"Profiler";case k:return"StrictMode";case I:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case M:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case P:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case L:return K(e.type);case N:return K(e._render);case D:t=e._payload,e=e._init;try{return K(e(t))}catch(n){}}return null}function $(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){var t=Q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ee(e){e._valueTracker||(e._valueTracker=J(e))}function te(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Q(e)?e.checked?"true":"false":e.value),e=r,e!==n&&(t.setValue(e),!0)}function ne(e){if(e=e||("undefined"!==typeof document?document:void 0),"undefined"===typeof e)return null;try{return e.activeElement||e.body}catch(t){return e.body}}function re(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ie(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=$(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function oe(e,t){t=t.checked,null!=t&&O(e,"checked",t,!1)}function ae(e,t){oe(e,t);var n=$(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ue(e,t.type,n):t.hasOwnProperty("defaultValue")&&ue(e,t.type,$(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function se(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,""!==n&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ue(e,t,n){"number"===t&&ne(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ce(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}function le(e,t){return e=i({children:void 0},t),(t=ce(t.children))&&(e.children=t),e}function fe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function pe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function he(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:$(n)}}function de(e,t){var n=$(t.value),r=$(t.defaultValue);null!=n&&(n=""+n,n!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ve(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var me={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function ge(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ye(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ge(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var be,_e=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n,r,i)}))}:e}((function(e,t){if(e.namespaceURI!==me.svg||"innerHTML"in e)e.innerHTML=t;else{for(be=be||document.createElement("div"),be.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=be.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function xe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var we={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Oe=["Webkit","ms","Moz","O"];function Ee(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||we.hasOwnProperty(e)&&we[e]?(""+t).trim():t+"px"}function Se(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=Ee(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(we).forEach((function(e){Oe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),we[t]=we[e]}))}));var je=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ae(e,t){if(t){if(je[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ce(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,Me=null,Pe=null;function Ie(e){if(e=Si(e)){if("function"!==typeof Te)throw Error(a(280));var t=e.stateNode;t&&(t=Ai(t),Te(e.stateNode,e.type,t))}}function Re(e){Me?Pe?Pe.push(e):Pe=[e]:Me=e}function Le(){if(Me){var e=Me,t=Pe;if(Pe=Me=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function De(e,t){return e(t)}function Ne(e,t,n,r,i){return e(t,n,r,i)}function Fe(){}var ze=De,Be=!1,Ue=!1;function Ve(){null===Me&&null===Pe||(Fe(),Le())}function He(e,t,n){if(Ue)return e(t,n);Ue=!0;try{return ze(e,t,n)}finally{Ue=!1,Ve()}}function Ge(e,t){var n=e.stateNode;if(null===n)return null;var r=Ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!("button"===e||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var We=!1;if(f)try{var qe={};Object.defineProperty(qe,"passive",{get:function(){We=!0}}),window.addEventListener("test",qe,qe),window.removeEventListener("test",qe,qe)}catch(zc){We=!1}function Ze(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ye=!1,Xe=null,Ke=!1,$e=null,Qe={onError:function(e){Ye=!0,Xe=e}};function Je(e,t,n,r,i,o,a,s,u){Ye=!1,Xe=null,Ze.apply(Qe,arguments)}function et(e,t,n,r,i,o,s,u,c){if(Je.apply(this,arguments),Ye){if(!Ye)throw Error(a(198));var l=Xe;Ye=!1,Xe=null,Ke||(Ke=!0,$e=l)}}function tt(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{t=e,0!==(1026&t.flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function nt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(e=e.alternate,null!==e&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function rt(e){if(tt(e)!==e)throw Error(a(188))}function it(e){var t=e.alternate;if(!t){if(t=tt(e),null===t)throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(r=i.return,null!==r){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return rt(i),e;if(o===r)return rt(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}function ot(e){if(e=it(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function at(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var st,ut,ct,lt,ft=!1,pt=[],ht=null,dt=null,vt=null,mt=new Map,gt=new Map,yt=[],bt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _t(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function xt(e,t){switch(e){case"focusin":case"focusout":ht=null;break;case"dragenter":case"dragleave":dt=null;break;case"mouseover":case"mouseout":vt=null;break;case"pointerover":case"pointerout":mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gt.delete(t.pointerId)}}function wt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=_t(t,n,r,i,o),null!==t&&(t=Si(t),null!==t&&ut(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ot(e,t,n,r,i){switch(t){case"focusin":return ht=wt(ht,e,t,n,r,i),!0;case"dragenter":return dt=wt(dt,e,t,n,r,i),!0;case"mouseover":return vt=wt(vt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return mt.set(o,wt(mt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,gt.set(o,wt(gt.get(o)||null,e,t,n,r,i)),!0}return!1}function Et(e){var t=Ei(e.target);if(null!==t){var n=tt(t);if(null!==n)if(t=n.tag,13===t){if(t=nt(n),null!==t)return e.blockedOn=t,void lt(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){ct(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function St(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=fn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return t=Si(n),null!==t&&ut(t),e.blockedOn=n,!1;t.shift()}return!0}function jt(e,t,n){St(e)&&n.delete(t)}function At(){for(ft=!1;0<pt.length;){var e=pt[0];if(null!==e.blockedOn){e=Si(e.blockedOn),null!==e&&st(e);break}for(var t=e.targetContainers;0<t.length;){var n=fn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&pt.shift()}null!==ht&&St(ht)&&(ht=null),null!==dt&&St(dt)&&(dt=null),null!==vt&&St(vt)&&(vt=null),mt.forEach(jt),gt.forEach(jt)}function kt(e,t){e.blockedOn===t&&(e.blockedOn=null,ft||(ft=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,At)))}function Ct(e){function t(t){return kt(t,e)}if(0<pt.length){kt(pt[0],e);for(var n=1;n<pt.length;n++){var r=pt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ht&&kt(ht,e),null!==dt&&kt(dt,e),null!==vt&&kt(vt,e),mt.forEach(t),gt.forEach(t),n=0;n<yt.length;n++)r=yt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<yt.length&&(n=yt[0],null===n.blockedOn);)Et(n),null===n.blockedOn&&yt.shift()}function Tt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Mt={animationend:Tt("Animation","AnimationEnd"),animationiteration:Tt("Animation","AnimationIteration"),animationstart:Tt("Animation","AnimationStart"),transitionend:Tt("Transition","TransitionEnd")},Pt={},It={};function Rt(e){if(Pt[e])return Pt[e];if(!Mt[e])return e;var t,n=Mt[e];for(t in n)if(n.hasOwnProperty(t)&&t in It)return Pt[e]=n[t];return e}f&&(It=document.createElement("div").style,"AnimationEvent"in window||(delete Mt.animationend.animation,delete Mt.animationiteration.animation,delete Mt.animationstart.animation),"TransitionEvent"in window||delete Mt.transitionend.transition);var Lt=Rt("animationend"),Dt=Rt("animationiteration"),Nt=Rt("animationstart"),Ft=Rt("transitionend"),zt=new Map,Bt=new Map,Ut=["abort","abort",Lt,"animationEnd",Dt,"animationIteration",Nt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ft,"transitionEnd","waiting","waiting"];function Vt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Bt.set(r,t),zt.set(r,i),c(i,[r])}}var Ht=o.unstable_now;Ht();var Gt=8;function Wt(e){if(0!==(1&e))return Gt=15,1;if(0!==(2&e))return Gt=14,2;if(0!==(4&e))return Gt=13,4;var t=24&e;return 0!==t?(Gt=12,t):0!==(32&e)?(Gt=11,32):(t=192&e,0!==t?(Gt=10,t):0!==(256&e)?(Gt=9,256):(t=3584&e,0!==t?(Gt=8,t):0!==(4096&e)?(Gt=7,4096):(t=4186112&e,0!==t?(Gt=6,t):(t=62914560&e,0!==t?(Gt=5,t):67108864&e?(Gt=4,67108864):0!==(134217728&e)?(Gt=3,134217728):(t=805306368&e,0!==t?(Gt=2,t):0!==(1073741824&e)?(Gt=1,1073741824):(Gt=8,e))))))}function qt(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Zt(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,e))}}function Yt(e,t){var n=e.pendingLanes;if(0===n)return Gt=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=Gt=15;else if(o=134217727&n,0!==o){var u=o&~a;0!==u?(r=Wt(u),i=Gt):(s&=o,0!==s&&(r=Wt(s),i=Gt))}else o=n&~a,0!==o?(r=Wt(o),i=Gt):0!==s&&(r=Wt(s),i=Gt);if(0===r)return 0;if(r=31-en(r),r=n&((0>r?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&a)){if(Wt(t),i<=Gt)return t;Gt=i}if(t=e.entangledLanes,0!==t)for(e=e.entanglements,t&=r;0<t;)n=31-en(t),i=1<<n,r|=e[n],t&=~i;return r}function Xt(e){return e=-1073741825&e.pendingLanes,0!==e?e:1073741824&e?1073741824:0}function Kt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=$t(24&~t),0===e?Kt(10,t):e;case 10:return e=$t(192&~t),0===e?Kt(8,t):e;case 8:return e=$t(3584&~t),0===e&&(e=$t(4186112&~t),0===e&&(e=512)),e;case 2:return t=$t(805306368&~t),0===t&&(t=268435456),t}throw Error(a(358,e))}function $t(e){return e&-e}function Qt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Jt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,e=e.eventTimes,t=31-en(t),e[t]=n}var en=Math.clz32?Math.clz32:rn,tn=Math.log,nn=Math.LN2;function rn(e){return 0===e?32:31-(tn(e)/nn|0)|0}var on=o.unstable_UserBlockingPriority,an=o.unstable_runWithPriority,sn=!0;function un(e,t,n,r){Be||Fe();var i=ln,o=Be;Be=!0;try{Ne(i,e,t,n,r)}finally{(Be=o)||Ve()}}function cn(e,t,n,r){an(on,ln.bind(null,e,t,n,r))}function ln(e,t,n,r){var i;if(sn)if((i=0===(4&t))&&0<pt.length&&-1<bt.indexOf(e))e=_t(null,e,t,n,r),pt.push(e);else{var o=fn(e,t,n,r);if(null===o)i&&xt(e,r);else{if(i){if(-1<bt.indexOf(e))return e=_t(o,e,t,n,r),void pt.push(e);if(Ot(o,e,t,n,r))return;xt(e,r)}ni(e,t,r,null,n)}}}function fn(e,t,n,r){var i=Ce(r);if(i=Ei(i),null!==i){var o=tt(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(i=nt(o),null!==i)return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return ni(e,t,r,i,n),null}var pn=null,hn=null,dn=null;function vn(){if(dn)return dn;var e,t,n=hn,r=n.length,i="value"in pn?pn.value:pn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return dn=i.slice(e,1<t?1-t:void 0)}function mn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,0===e&&13===t&&(e=13)):e=t,10===e&&(e=13),32<=e||13===e?e:0}function gn(){return!0}function yn(){return!1}function bn(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?gn:yn,this.isPropagationStopped=yn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=gn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=gn)},persist:function(){},isPersistent:gn}),t}var _n,xn,wn,On={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},En=bn(On),Sn=i({},On,{view:0,detail:0}),jn=bn(Sn),An=i({},Sn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wn&&(wn&&"mousemove"===e.type?(_n=e.screenX-wn.screenX,xn=e.screenY-wn.screenY):xn=_n=0,wn=e),_n)},movementY:function(e){return"movementY"in e?e.movementY:xn}}),kn=bn(An),Cn=i({},An,{dataTransfer:0}),Tn=bn(Cn),Mn=i({},Sn,{relatedTarget:0}),Pn=bn(Mn),In=i({},On,{animationName:0,elapsedTime:0,pseudoElement:0}),Rn=bn(In),Ln=i({},On,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dn=bn(Ln),Nn=i({},On,{data:0}),Fn=bn(Nn),zn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Un={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Un[e])&&!!t[e]}function Hn(){return Vn}var Gn=i({},Sn,{key:function(e){if(e.key){var t=zn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?(e=mn(e),13===e?"Enter":String.fromCharCode(e)):"keydown"===e.type||"keyup"===e.type?Bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hn,charCode:function(e){return"keypress"===e.type?mn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?mn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Wn=bn(Gn),qn=i({},An,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zn=bn(qn),Yn=i({},Sn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hn}),Xn=bn(Yn),Kn=i({},On,{propertyName:0,elapsedTime:0,pseudoElement:0}),$n=bn(Kn),Qn=i({},An,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Jn=bn(Qn),er=[9,13,27,32],tr=f&&"CompositionEvent"in window,nr=null;f&&"documentMode"in document&&(nr=document.documentMode);var rr=f&&"TextEvent"in window&&!nr,ir=f&&(!tr||nr&&8<nr&&11>=nr),or=String.fromCharCode(32),ar=!1;function sr(e,t){switch(e){case"keyup":return-1!==er.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ur(e){return e=e.detail,"object"===typeof e&&"data"in e?e.data:null}var cr=!1;function lr(e,t){switch(e){case"compositionend":return ur(t);case"keypress":return 32!==t.which?null:(ar=!0,or);case"textInput":return e=t.data,e===or&&ar?null:e;default:return null}}function fr(e,t){if(cr)return"compositionend"===e||!tr&&sr(e,t)?(e=vn(),dn=hn=pn=null,cr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ir&&"ko"!==t.locale?null:t.data;default:return null}}var pr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!pr[e.type]:"textarea"===t}function dr(e,t,n,r){Re(r),t=ii(t,"onChange"),0<t.length&&(n=new En("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var vr=null,mr=null;function gr(e){Kr(e,0)}function yr(e){var t=ji(e);if(te(t))return e}function br(e,t){if("change"===e)return t}var _r=!1;if(f){var xr;if(f){var wr="oninput"in document;if(!wr){var Or=document.createElement("div");Or.setAttribute("oninput","return;"),wr="function"===typeof Or.oninput}xr=wr}else xr=!1;_r=xr&&(!document.documentMode||9<document.documentMode)}function Er(){vr&&(vr.detachEvent("onpropertychange",Sr),mr=vr=null)}function Sr(e){if("value"===e.propertyName&&yr(mr)){var t=[];if(dr(t,mr,e,Ce(e)),e=gr,Be)e(t);else{Be=!0;try{De(e,t)}finally{Be=!1,Ve()}}}}function jr(e,t,n){"focusin"===e?(Er(),vr=t,mr=n,vr.attachEvent("onpropertychange",Sr)):"focusout"===e&&Er()}function Ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return yr(mr)}function kr(e,t){if("click"===e)return yr(t)}function Cr(e,t){if("input"===e||"change"===e)return yr(t)}function Tr(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t}var Mr="function"===typeof Object.is?Object.is:Tr,Pr=Object.prototype.hasOwnProperty;function Ir(e,t){if(Mr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Pr.call(t,n[r])||!Mr(e[n[r]],t[n[r]]))return!1;return!0}function Rr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Lr(e,t){var n,r=Rr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Rr(r)}}function Dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Nr(){for(var e=window,t=ne();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=t.contentWindow,t=ne(e.document)}return t}function Fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var zr=f&&"documentMode"in document&&11>=document.documentMode,Br=null,Ur=null,Vr=null,Hr=!1;function Gr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Hr||null==Br||Br!==ne(r)||(r=Br,"selectionStart"in r&&Fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vr&&Ir(Vr,r)||(Vr=r,r=ii(Ur,"onSelect"),0<r.length&&(t=new En("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Br)))}Vt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Vt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Vt(Ut,2);for(var Wr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),qr=0;qr<Wr.length;qr++)Bt.set(Wr[qr],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zr));function Xr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,et(r,t,void 0,e),e.currentTarget=null}function Kr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;Xr(i,s,c),o=u}else for(a=0;a<r.length;a++){if(s=r[a],u=s.instance,c=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;Xr(i,s,c),o=u}}}if(Ke)throw e=$e,Ke=!1,$e=null,e}function $r(e,t){var n=ki(t),r=e+"__bubble";n.has(r)||(ti(t,e,2,!1),n.add(r))}var Qr="_reactListening"+Math.random().toString(36).slice(2);function Jr(e){e[Qr]||(e[Qr]=!0,s.forEach((function(t){Yr.has(t)||ei(t,!1,e,null),ei(t,!0,e,null)})))}function ei(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&Yr.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=ki(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),ti(o,e,i,t),a.add(s))}function ti(e,t,n,r){var i=Bt.get(t);switch(void 0===i?2:i){case 0:i=un;break;case 1:i=cn;break;default:i=ln}n=i.bind(null,t,n,e),i=void 0,!We||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ni(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&(u=a.stateNode.containerInfo,u===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(a=Ei(s),null===a)return;if(u=a.tag,5===u||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}He((function(){var r=o,i=Ce(n),a=[];e:{var s=zt.get(e);if(void 0!==s){var u=En,c=e;switch(e){case"keypress":if(0===mn(n))break e;case"keydown":case"keyup":u=Wn;break;case"focusin":c="focus",u=Pn;break;case"focusout":c="blur",u=Pn;break;case"beforeblur":case"afterblur":u=Pn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=kn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=Tn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Xn;break;case Lt:case Dt:case Nt:u=Rn;break;case Ft:u=$n;break;case"scroll":u=jn;break;case"wheel":u=Jn;break;case"copy":case"cut":case"paste":u=Dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Zn}var l=0!==(4&t),f=!l&&"scroll"===e,p=l?null!==s?s+"Capture":null:s;l=[];for(var h,d=r;null!==d;){h=d;var v=h.stateNode;if(5===h.tag&&null!==v&&(h=v,null!==p&&(v=Ge(d,p),null!=v&&l.push(ri(d,v,h)))),f)break;d=d.return}0<l.length&&(s=new u(s,c,null,n,i),a.push({event:s,listeners:l}))}}if(0===(7&t)){if(s="mouseover"===e||"pointerover"===e,u="mouseout"===e||"pointerout"===e,(!s||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!Ei(c)&&!c[wi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(c=n.relatedTarget||n.toElement,u=r,c=c?Ei(c):null,null!==c&&(f=tt(c),c!==f||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=kn,v="onMouseLeave",p="onMouseEnter",d="mouse","pointerout"!==e&&"pointerover"!==e||(l=Zn,v="onPointerLeave",p="onPointerEnter",d="pointer"),f=null==u?s:ji(u),h=null==c?s:ji(c),s=new l(v,d+"leave",u,n,i),s.target=f,s.relatedTarget=h,v=null,Ei(i)===r&&(l=new l(p,d+"enter",c,n,i),l.target=h,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(l=u,p=c,d=0,h=l;h;h=oi(h))d++;for(h=0,v=p;v;v=oi(v))h++;for(;0<d-h;)l=oi(l),d--;for(;0<h-d;)p=oi(p),h--;for(;d--;){if(l===p||null!==p&&l===p.alternate)break e;l=oi(l),p=oi(p)}l=null}else l=null;null!==u&&ai(a,s,u,l,!1),null!==c&&null!==f&&ai(a,f,c,l,!0)}if(s=r?ji(r):window,u=s.nodeName&&s.nodeName.toLowerCase(),"select"===u||"input"===u&&"file"===s.type)var m=br;else if(hr(s))if(_r)m=Cr;else{m=Ar;var g=jr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=kr);switch(m&&(m=m(e,r))?dr(a,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ue(s,"number",s.value)),g=r?ji(r):window,e){case"focusin":(hr(g)||"true"===g.contentEditable)&&(Br=g,Ur=r,Vr=null);break;case"focusout":Vr=Ur=Br=null;break;case"mousedown":Hr=!0;break;case"contextmenu":case"mouseup":case"dragend":Hr=!1,Gr(a,n,i);break;case"selectionchange":if(zr)break;case"keydown":case"keyup":Gr(a,n,i)}var y;if(tr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else cr?sr(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(ir&&"ko"!==n.locale&&(cr||"onCompositionStart"!==b?"onCompositionEnd"===b&&cr&&(y=vn()):(pn=i,hn="value"in pn?pn.value:pn.textContent,cr=!0)),g=ii(r,b),0<g.length&&(b=new Fn(b,e,null,n,i),a.push({event:b,listeners:g}),y?b.data=y:(y=ur(n),null!==y&&(b.data=y)))),(y=rr?lr(e,n):fr(e,n))&&(r=ii(r,"onBeforeInput"),0<r.length&&(i=new Fn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Kr(a,t)}))}function ri(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ii(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,o=Ge(e,n),null!=o&&r.unshift(ri(e,o,i)),o=Ge(e,t),null!=o&&r.push(ri(e,o,i))),e=e.return}return r}function oi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function ai(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?(u=Ge(n,o),null!=u&&a.unshift(ri(n,u,s))):i||(u=Ge(n,o),null!=u&&a.push(ri(n,u,s)))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function si(){}var ui=null,ci=null;function li(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function fi(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var pi="function"===typeof setTimeout?setTimeout:void 0,hi="function"===typeof clearTimeout?clearTimeout:void 0;function di(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(e=e.body,null!=e&&(e.textContent=""))}function vi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function mi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var gi=0;function yi(e){return{$$typeof:F,toString:e,valueOf:e}}var bi=Math.random().toString(36).slice(2),_i="__reactFiber$"+bi,xi="__reactProps$"+bi,wi="__reactContainer$"+bi,Oi="__reactEvents$"+bi;function Ei(e){var t=e[_i];if(t)return t;for(var n=e.parentNode;n;){if(t=n[wi]||n[_i]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=mi(e);null!==e;){if(n=e[_i])return n;e=mi(e)}return t}e=n,n=e.parentNode}return null}function Si(e){return e=e[_i]||e[wi],!e||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ji(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Ai(e){return e[xi]||null}function ki(e){var t=e[Oi];return void 0===t&&(t=e[Oi]=new Set),t}var Ci=[],Ti=-1;function Mi(e){return{current:e}}function Pi(e){0>Ti||(e.current=Ci[Ti],Ci[Ti]=null,Ti--)}function Ii(e,t){Ti++,Ci[Ti]=e.current,e.current=t}var Ri={},Li=Mi(Ri),Di=Mi(!1),Ni=Ri;function Fi(e,t){var n=e.type.contextTypes;if(!n)return Ri;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function zi(e){return e=e.childContextTypes,null!==e&&void 0!==e}function Bi(){Pi(Di),Pi(Li)}function Ui(e,t,n){if(Li.current!==Ri)throw Error(a(168));Ii(Li,t),Ii(Di,n)}function Vi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext(),r)if(!(o in e))throw Error(a(108,K(t)||"Unknown",o));return i({},n,r)}function Hi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ri,Ni=Li.current,Ii(Li,e),Ii(Di,Di.current),!0}function Gi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Vi(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Pi(Di),Pi(Li),Ii(Li,e)):Pi(Di),Ii(Di,n)}var Wi=null,qi=null,Zi=o.unstable_runWithPriority,Yi=o.unstable_scheduleCallback,Xi=o.unstable_cancelCallback,Ki=o.unstable_shouldYield,$i=o.unstable_requestPaint,Qi=o.unstable_now,Ji=o.unstable_getCurrentPriorityLevel,eo=o.unstable_ImmediatePriority,to=o.unstable_UserBlockingPriority,no=o.unstable_NormalPriority,ro=o.unstable_LowPriority,io=o.unstable_IdlePriority,oo={},ao=void 0!==$i?$i:function(){},so=null,uo=null,co=!1,lo=Qi(),fo=1e4>lo?Qi:function(){return Qi()-lo};function po(){switch(Ji()){case eo:return 99;case to:return 98;case no:return 97;case ro:return 96;case io:return 95;default:throw Error(a(332))}}function ho(e){switch(e){case 99:return eo;case 98:return to;case 97:return no;case 96:return ro;case 95:return io;default:throw Error(a(332))}}function vo(e,t){return e=ho(e),Zi(e,t)}function mo(e,t,n){return e=ho(e),Yi(e,t,n)}function go(){if(null!==uo){var e=uo;uo=null,Xi(e)}yo()}function yo(){if(!co&&null!==so){co=!0;var e=0;try{var t=so;vo(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),so=null}catch(n){throw null!==so&&(so=so.slice(e+1)),Yi(eo,go),n}finally{co=!1}}}var bo=E.ReactCurrentBatchConfig;function _o(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps,e)void 0===t[n]&&(t[n]=e[n]);return t}return t}var xo=Mi(null),wo=null,Oo=null,Eo=null;function So(){Eo=Oo=wo=null}function jo(e){var t=xo.current;Pi(xo),e.type._context._currentValue=t}function Ao(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ko(e,t){wo=e,Eo=Oo=null,e=e.dependencies,null!==e&&null!==e.firstContext&&(0!==(e.lanes&t)&&(os=!0),e.firstContext=null)}function Co(e,t){if(Eo!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(Eo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Oo){if(null===wo)throw Error(a(308));Oo=t,wo.dependencies={lanes:0,firstContext:t,responders:null}}else Oo=Oo.next=t;return e._currentValue}var To=!1;function Mo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Po(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Io(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ro(e,t){if(e=e.updateQueue,null!==e){e=e.shared;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function Lo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,null!==n){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}e=n.lastBaseUpdate,null===e?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Do(e,t,n,r){var o=e.updateQueue;To=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?a=l:s.next=l,s=c;var f=e.alternate;if(null!==f){f=f.updateQueue;var p=f.lastBaseUpdate;p!==s&&(null===p?f.firstBaseUpdate=l:p.next=l,f.lastBaseUpdate=c)}}if(null!==a){p=o.baseState,s=0,f=l=c=null;do{u=a.lane;var h=a.eventTime;if((r&u)===u){null!==f&&(f=f.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var d=e,v=a;switch(u=t,h=n,v.tag){case 1:if(d=v.payload,"function"===typeof d){p=d.call(h,p,u);break e}p=d;break e;case 3:d.flags=-4097&d.flags|64;case 0:if(d=v.payload,u="function"===typeof d?d.call(h,p,u):d,null===u||void 0===u)break e;p=i({},p,u);break e;case 2:To=!0}}null!==a.callback&&(e.flags|=32,u=o.effects,null===u?o.effects=[a]:u.push(a))}else h={eventTime:h,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===f?(l=f=h,c=p):f=f.next=h,s|=u;if(a=a.next,null===a){if(u=o.shared.pending,null===u)break;a=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}while(1);null===f&&(c=p),o.baseState=c,o.firstBaseUpdate=l,o.lastBaseUpdate=f,lu|=s,e.lanes=s,e.memoizedState=p}}function No(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Fo=(new r.Component).refs;function zo(e,t,n,r){t=e.memoizedState,n=n(r,t),n=null===n||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bo={isMounted:function(e){return!!(e=e._reactInternals)&&tt(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Lu(),i=Du(e),o=Io(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),Ro(e,o),Nu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Lu(),i=Du(e),o=Io(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),Ro(e,o),Nu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Lu(),r=Du(e),i=Io(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),Ro(e,i),Nu(e,r,n)}};function Uo(e,t,n,r,i,o,a){return e=e.stateNode,"function"===typeof e.shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Ir(n,r)||!Ir(i,o))}function Vo(e,t,n){var r=!1,i=Ri,o=t.contextType;return"object"===typeof o&&null!==o?o=Co(o):(i=zi(t)?Ni:Li.current,r=t.contextTypes,o=(r=null!==r&&void 0!==r)?Fi(e,i):Ri),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ho(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bo.enqueueReplaceState(t,t.state,null)}function Go(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Fo,Mo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Co(o):(o=zi(t)?Ni:Li.current,i.context=Fi(e,o)),Do(e,n,i,r),i.state=e.memoizedState,o=t.getDerivedStateFromProps,"function"===typeof o&&(zo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Bo.enqueueReplaceState(i,i.state,null),Do(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var Wo=Array.isArray;function qo(e,t,n){if(e=n.ref,null!==e&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner,n){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===Fo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Zo(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Yo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return e=gc(e,t),e.index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?(r=t.alternate,null!==r?(r=r.index,r<n?(t.flags=2,n):r):(t.flags=2,n)):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?(t=xc(n,e.mode,r),t.return=e,t):(t=i(t,n),t.return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?(r=i(t,n.props),r.ref=qo(e,t,n),r.return=e,r):(r=yc(n.type,n.key,n.props,null,e.mode,r),r.ref=qo(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=wc(n,e.mode,r),t.return=e,t):(t=i(t,n.children||[]),t.return=e,t)}function f(e,t,n,r,o){return null===t||7!==t.tag?(t=bc(n,e.mode,r,o),t.return=e,t):(t=i(t,n),t.return=e,t)}function p(e,t,n){if("string"===typeof t||"number"===typeof t)return t=xc(""+t,e.mode,n),t.return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case S:return n=yc(t.type,t.key,t.props,null,e.mode,n),n.ref=qo(e,null,t),n.return=e,n;case j:return t=wc(t,e.mode,n),t.return=e,t}if(Wo(t)||W(t))return t=bc(t,e.mode,n,null),t.return=e,t;Zo(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===i?n.type===A?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case j:return n.key===i?l(e,t,n,r):null}if(Wo(n)||W(n))return null!==i?null:f(e,t,n,r,null);Zo(e,n)}return null}function d(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return e=e.get(n)||null,u(t,e,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case S:return e=e.get(null===r.key?n:r.key)||null,r.type===A?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case j:return e=e.get(null===r.key?n:r.key)||null,l(t,e,r,i)}if(Wo(r)||W(r))return e=e.get(n)||null,f(t,e,r,i,null);Zo(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var g=h(i,f,s[v],u);if(null===g){null===f&&(f=m);break}e&&f&&null===g.alternate&&t(i,f),a=o(g,a,v),null===l?c=g:l.sibling=g,l=g,f=m}if(v===s.length)return n(i,f),c;if(null===f){for(;v<s.length;v++)f=p(i,s[v],u),null!==f&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<s.length;v++)m=d(f,i,v,s[v],u),null!==m&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),c}function m(i,s,u,c){var l=W(u);if("function"!==typeof l)throw Error(a(150));if(u=l.call(u),null==u)throw Error(a(151));for(var f=l=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var b=h(i,v,y.value,c);if(null===b){null===v&&(v=g);break}e&&v&&null===b.alternate&&t(i,v),s=o(b,s,m),null===f?l=b:f.sibling=b,f=b,v=g}if(y.done)return n(i,v),l;if(null===v){for(;!y.done;m++,y=u.next())y=p(i,y.value,c),null!==y&&(s=o(y,s,m),null===f?l=y:f.sibling=y,f=y);return l}for(v=r(i,v);!y.done;m++,y=u.next())y=d(v,i,m,y.value,c),null!==y&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=o(y,s,m),null===f?l=y:f.sibling=y,f=y);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,o,u){var c="object"===typeof o&&null!==o&&o.type===A&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case S:e:{for(l=o.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(o.type===A){n(e,c.sibling),r=i(c,o.props.children),r.return=e,e=r;break e}break;default:if(c.elementType===o.type){n(e,c.sibling),r=i(c,o.props),r.ref=qo(e,c,o),r.return=e,e=r;break e}}n(e,c);break}t(e,c),c=c.sibling}o.type===A?(r=bc(o.props.children,e.mode,u,o.key),r.return=e,e=r):(u=yc(o.type,o.key,o.props,null,e.mode,u),u.ref=qo(e,r,o),u.return=e,e=u)}return s(e);case j:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),r=i(r,o.children||[]),r.return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}r=wc(o,e.mode,u),r.return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),r=i(r,o),r.return=e,e=r):(n(e,r),r=xc(o,e.mode,u),r.return=e,e=r),s(e);if(Wo(o))return v(e,r,o,u);if(W(o))return m(e,r,o,u);if(l&&Zo(e,o),"undefined"===typeof o&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,K(e.type)||"Component"))}return n(e,r)}}var Xo=Yo(!0),Ko=Yo(!1),$o={},Qo=Mi($o),Jo=Mi($o),ea=Mi($o);function ta(e){if(e===$o)throw Error(a(174));return e}function na(e,t){switch(Ii(ea,t),Ii(Jo,e),Ii(Qo,$o),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ye(null,"");break;default:e=8===e?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ye(t,e)}Pi(Qo),Ii(Qo,t)}function ra(){Pi(Qo),Pi(Jo),Pi(ea)}function ia(e){ta(ea.current);var t=ta(Qo.current),n=ye(t,e.type);t!==n&&(Ii(Jo,e),Ii(Qo,n))}function oa(e){Jo.current===e&&(Pi(Qo),Pi(Jo))}var aa=Mi(0);function sa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(n=n.dehydrated,null===n||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ua=null,ca=null,la=!1;function fa(e,t){var n=dc(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function pa(e,t){switch(e.tag){case 5:var n=e.type;return t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,null!==t&&(e.stateNode=t,!0);case 6:return t=""===e.pendingProps||3!==t.nodeType?null:t,null!==t&&(e.stateNode=t,!0);case 13:return!1;default:return!1}}function ha(e){if(la){var t=ca;if(t){var n=t;if(!pa(e,t)){if(t=vi(n.nextSibling),!t||!pa(e,t))return e.flags=-1025&e.flags|2,la=!1,void(ua=e);fa(ua,n)}ua=e,ca=vi(t.firstChild)}else e.flags=-1025&e.flags|2,la=!1,ua=e}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ua=e}function va(e){if(e!==ua)return!1;if(!la)return da(e),la=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!fi(t,e.memoizedProps))for(t=ca;t;)fa(e,t),t=vi(t.nextSibling);if(da(e),13===e.tag){if(e=e.memoizedState,e=null!==e?e.dehydrated:null,!e)throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ca=vi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ca=null}}else ca=ua?vi(e.stateNode.nextSibling):null;return!0}function ma(){ca=ua=null,la=!1}var ga=[];function ya(){for(var e=0;e<ga.length;e++)ga[e]._workInProgressVersionPrimary=null;ga.length=0}var ba=E.ReactCurrentDispatcher,_a=E.ReactCurrentBatchConfig,xa=0,wa=null,Oa=null,Ea=null,Sa=!1,ja=!1;function Aa(){throw Error(a(321))}function ka(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Mr(e[n],t[n]))return!1;return!0}function Ca(e,t,n,r,i,o){if(xa=o,wa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ba.current=null===e||null===e.memoizedState?ts:ns,e=n(r,i),ja){o=0;do{if(ja=!1,!(25>o))throw Error(a(301));o+=1,Ea=Oa=null,t.updateQueue=null,ba.current=rs,e=n(r,i)}while(ja)}if(ba.current=es,t=null!==Oa&&null!==Oa.next,xa=0,Ea=Oa=wa=null,Sa=!1,t)throw Error(a(300));return e}function Ta(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ea?wa.memoizedState=Ea=e:Ea=Ea.next=e,Ea}function Ma(){if(null===Oa){var e=wa.alternate;e=null!==e?e.memoizedState:null}else e=Oa.next;var t=null===Ea?wa.memoizedState:Ea.next;if(null!==t)Ea=t,Oa=e;else{if(null===e)throw Error(a(310));Oa=e,e={memoizedState:Oa.memoizedState,baseState:Oa.baseState,baseQueue:Oa.baseQueue,queue:Oa.queue,next:null},null===Ea?wa.memoizedState=Ea=e:Ea=Ea.next=e}return Ea}function Pa(e,t){return"function"===typeof t?t(e):t}function Ia(e){var t=Ma(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=Oa,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,c=i;do{var l=c.lane;if((xa&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=f,o=r):u=u.next=f,wa.lanes|=l,lu|=l}c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=s,Mr(r,t.memoizedState)||(os=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function Ra(e){var t=Ma(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);Mr(o,t.memoizedState)||(os=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function La(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(xa&e)===e)&&(t._workInProgressVersionPrimary=r,ga.push(t))),e)return n(t._source);throw ga.push(t),Error(a(350))}function Da(e,t,n,r){var i=nu;if(null===i)throw Error(a(349));var o=t._getVersion,s=o(t._source),u=ba.current,c=u.useState((function(){return La(i,t,n)})),l=c[1],f=c[0];c=Ea;var p=e.memoizedState,h=p.refs,d=h.getSnapshot,v=p.source;p=p.subscribe;var m=wa;return e.memoizedState={refs:h,source:t,subscribe:r},u.useEffect((function(){h.getSnapshot=n,h.setSnapshot=l;var e=o(t._source);if(!Mr(s,e)){e=n(t._source),Mr(f,e)||(l(e),e=Du(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,a=e;0<a;){var u=31-en(a),c=1<<u;r[u]|=e,a&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=h.getSnapshot,n=h.setSnapshot;try{n(e(t._source));var r=Du(m);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n((function(){throw o}))}}))}),[t,r]),Mr(d,n)&&Mr(v,t)&&Mr(p,r)||(e={pending:null,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:f},e.dispatch=l=Ja.bind(null,wa,e),c.queue=e,c.baseQueue=null,f=La(i,t,n),c.memoizedState=c.baseState=f),f}function Na(e,t,n){var r=Ma();return Da(r,e,t,n)}function Fa(e){var t=Ta();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:e},e=e.dispatch=Ja.bind(null,wa,e),[t.memoizedState,e]}function za(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=wa.updateQueue,null===t?(t={lastEffect:null},wa.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,null===n?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ba(e){var t=Ta();return e={current:e},t.memoizedState=e}function Ua(){return Ma().memoizedState}function Va(e,t,n,r){var i=Ta();wa.flags|=e,i.memoizedState=za(1|t,n,void 0,void 0===r?null:r)}function Ha(e,t,n,r){var i=Ma();r=void 0===r?null:r;var o=void 0;if(null!==Oa){var a=Oa.memoizedState;if(o=a.destroy,null!==r&&ka(r,a.deps))return void za(t,n,o,r)}wa.flags|=e,i.memoizedState=za(1|t,n,o,r)}function Ga(e,t){return Va(516,4,e,t)}function Wa(e,t){return Ha(516,4,e,t)}function qa(e,t){return Ha(4,2,e,t)}function Za(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ya(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ha(4,2,Za.bind(null,t,e),n)}function Xa(){}function Ka(e,t){var n=Ma();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ka(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $a(e,t){var n=Ma();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ka(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Qa(e,t){var n=po();vo(98>n?98:n,(function(){e(!0)})),vo(97<n?97:n,(function(){var n=_a.transition;_a.transition=1;try{e(!1),t()}finally{_a.transition=n}}))}function Ja(e,t,n){var r=Lu(),i=Du(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===wa||null!==a&&a===wa)ja=Sa=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&(a=t.lastRenderedReducer,null!==a))try{var s=t.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,Mr(u,s))return}catch(c){}Nu(e,i,r)}}var es={readContext:Co,useCallback:Aa,useContext:Aa,useEffect:Aa,useImperativeHandle:Aa,useLayoutEffect:Aa,useMemo:Aa,useReducer:Aa,useRef:Aa,useState:Aa,useDebugValue:Aa,useDeferredValue:Aa,useTransition:Aa,useMutableSource:Aa,useOpaqueIdentifier:Aa,unstable_isNewReconciler:!1},ts={readContext:Co,useCallback:function(e,t){return Ta().memoizedState=[e,void 0===t?null:t],e},useContext:Co,useEffect:Ga,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Va(4,2,Za.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Va(4,2,e,t)},useMemo:function(e,t){var n=Ta();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ta();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=Ja.bind(null,wa,e),[r.memoizedState,e]},useRef:Ba,useState:Fa,useDebugValue:Xa,useDeferredValue:function(e){var t=Fa(e),n=t[0],r=t[1];return Ga((function(){var t=_a.transition;_a.transition=1;try{r(e)}finally{_a.transition=t}}),[e]),n},useTransition:function(){var e=Fa(!1),t=e[0];return e=Qa.bind(null,e[1]),Ba(e),[e,t]},useMutableSource:function(e,t,n){var r=Ta();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},Da(r,e,t,n)},useOpaqueIdentifier:function(){if(la){var e=!1,t=yi((function(){throw e||(e=!0,n("r:"+(gi++).toString(36))),Error(a(355))})),n=Fa(t)[1];return 0===(2&wa.mode)&&(wa.flags|=516,za(5,(function(){n("r:"+(gi++).toString(36))}),void 0,null)),t}return t="r:"+(gi++).toString(36),Fa(t),t},unstable_isNewReconciler:!1},ns={readContext:Co,useCallback:Ka,useContext:Co,useEffect:Wa,useImperativeHandle:Ya,useLayoutEffect:qa,useMemo:$a,useReducer:Ia,useRef:Ua,useState:function(){return Ia(Pa)},useDebugValue:Xa,useDeferredValue:function(e){var t=Ia(Pa),n=t[0],r=t[1];return Wa((function(){var t=_a.transition;_a.transition=1;try{r(e)}finally{_a.transition=t}}),[e]),n},useTransition:function(){var e=Ia(Pa)[0];return[Ua().current,e]},useMutableSource:Na,useOpaqueIdentifier:function(){return Ia(Pa)[0]},unstable_isNewReconciler:!1},rs={readContext:Co,useCallback:Ka,useContext:Co,useEffect:Wa,useImperativeHandle:Ya,useLayoutEffect:qa,useMemo:$a,useReducer:Ra,useRef:Ua,useState:function(){return Ra(Pa)},useDebugValue:Xa,useDeferredValue:function(e){var t=Ra(Pa),n=t[0],r=t[1];return Wa((function(){var t=_a.transition;_a.transition=1;try{r(e)}finally{_a.transition=t}}),[e]),n},useTransition:function(){var e=Ra(Pa)[0];return[Ua().current,e]},useMutableSource:Na,useOpaqueIdentifier:function(){return Ra(Pa)[0]},unstable_isNewReconciler:!1},is=E.ReactCurrentOwner,os=!1;function as(e,t,n,r){t.child=null===e?Ko(t,null,n,r):Xo(t,e.child,n,r)}function ss(e,t,n,r,i){n=n.render;var o=t.ref;return ko(t,i),r=Ca(e,t,n,r,o,i),null===e||os?(t.flags|=1,as(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,ks(e,t,i))}function us(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||vc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?(e=yc(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,cs(e,t,a,r,i,o))}return a=e.child,0===(i&o)&&(i=a.memoizedProps,n=n.compare,n=null!==n?n:Ir,n(i,r)&&e.ref===t.ref)?ks(e,t,o):(t.flags|=1,e=gc(a,r),e.ref=t.ref,e.return=t,t.child=e)}function cs(e,t,n,r,i,o){if(null!==e&&Ir(e.memoizedProps,r)&&e.ref===t.ref){if(os=!1,0===(o&i))return t.lanes=e.lanes,ks(e,t,o);0!==(16384&e.flags)&&(os=!0)}return ps(e,t,n,r,o)}function ls(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},qu(t,n);else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},qu(t,e),null;t.memoizedState={baseLanes:0},qu(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,qu(t,r);return as(e,t,i,n),t.child}function fs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function ps(e,t,n,r,i){var o=zi(n)?Ni:Li.current;return o=Fi(t,o),ko(t,i),n=Ca(e,t,n,r,o,i),null===e||os?(t.flags|=1,as(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,ks(e,t,i))}function hs(e,t,n,r,i){if(zi(n)){var o=!0;Hi(t)}else o=!1;if(ko(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),Vo(t,n,r),Go(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Co(c):(c=zi(n)?Ni:Li.current,c=Fi(t,c));var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;f||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&Ho(t,a,r,c),To=!1;var p=t.memoizedState;a.state=p,Do(t,r,a,i),u=t.memoizedState,s!==r||p!==u||Di.current||To?("function"===typeof l&&(zo(t,n,l,r),u=t.memoizedState),(s=To||Uo(t,n,s,r,p,u,c))?(f||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4)):("function"===typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,Po(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:_o(t.type,s),a.props=c,f=t.pendingProps,p=a.context,u=n.contextType,"object"===typeof u&&null!==u?u=Co(u):(u=zi(n)?Ni:Li.current,u=Fi(t,u));var h=n.getDerivedStateFromProps;(l="function"===typeof h||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==f||p!==u)&&Ho(t,a,r,u),To=!1,p=t.memoizedState,a.state=p,Do(t,r,a,i);var d=t.memoizedState;s!==f||p!==d||Di.current||To?("function"===typeof h&&(zo(t,n,h,r),d=t.memoizedState),(c=To||Uo(t,n,c,r,p,d,u))?(l||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,d,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,d,u)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=d),a.props=r,a.state=d,a.context=u,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=256),r=!1)}return ds(e,t,n,r,o,i)}function ds(e,t,n,r,i,o){fs(e,t);var a=0!==(64&t.flags);if(!r&&!a)return i&&Gi(t,n,!1),ks(e,t,o);r=t.stateNode,is.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Xo(t,e.child,null,o),t.child=Xo(t,null,s,o)):as(e,t,s,o),t.memoizedState=r.state,i&&Gi(t,n,!0),t.child}function vs(e){var t=e.stateNode;t.pendingContext?Ui(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ui(e,t.context,!1),na(e,t.containerInfo)}var ms,gs,ys,bs,_s={dehydrated:null,retryLane:0};function xs(e,t,n){var r,i=t.pendingProps,o=aa.current,a=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),Ii(aa,1&o),null===e?(void 0!==i.fallback&&ha(t),e=i.children,o=i.fallback,a?(e=ws(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=_s,e):"number"===typeof i.unstable_expectedLoadTime?(e=ws(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=_s,t.lanes=33554432,e):(n=_c({mode:"visible",children:e},t.mode,n,null),n.return=t,t.child=n)):(e.memoizedState,a?(i=Es(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=_s,i):(n=Os(e,t,i.children,n),t.memoizedState=null,n))}function ws(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=_c(t,i,0,null),n=bc(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function Os(e,t,n,r){var i=e.child;return e=i.sibling,n=gc(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Es(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=s,a=n.lastEffect,null!==a?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=gc(a,s),null!==e?r=gc(e,r):(r=bc(r,o,i,null),r.flags|=2),r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Ss(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ao(e.return,t)}function js(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function As(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(as(e,t,r.children,n),r=aa.current,0!==(2&r))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ss(e,n);else if(19===e.tag)Ss(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(aa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)e=n.alternate,null!==e&&null===sa(e)&&(i=n),n=n.sibling;n=i,null===n?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),js(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(e=i.alternate,null!==e&&null===sa(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}js(t,!0,n,null,o,t.lastEffect);break;case"together":js(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ks(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),lu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(e=t.child,n=gc(e,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,n=n.sibling=gc(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}return null}function Cs(e,t){if(!la)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ts(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return zi(t.type)&&Bi(),null;case 3:return ra(),Pi(Di),Pi(Li),ya(),r=t.stateNode,r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(va(t)?t.flags|=4:r.hydrate||(t.flags|=256)),gs(t),null;case 5:oa(t);var o=ta(ea.current);if(n=t.type,null!==e&&null!=t.stateNode)ys(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=ta(Qo.current),va(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[_i]=t,r[xi]=s,n){case"dialog":$r("cancel",r),$r("close",r);break;case"iframe":case"object":case"embed":$r("load",r);break;case"video":case"audio":for(e=0;e<Zr.length;e++)$r(Zr[e],r);break;case"source":$r("error",r);break;case"img":case"image":case"link":$r("error",r),$r("load",r);break;case"details":$r("toggle",r);break;case"input":ie(r,s),$r("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},$r("invalid",r);break;case"textarea":he(r,s),$r("invalid",r)}for(var c in Ae(n,s),e=null,s)s.hasOwnProperty(c)&&(o=s[c],"children"===c?"string"===typeof o?r.textContent!==o&&(e=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(e=["children",""+o]):u.hasOwnProperty(c)&&null!=o&&"onScroll"===c&&$r("scroll",r));switch(n){case"input":ee(r),se(r,s,!0);break;case"textarea":ee(r),ve(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=si)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===o.nodeType?o:o.ownerDocument,e===me.html&&(e=ge(n)),e===me.html?"script"===n?(e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[_i]=t,e[xi]=r,ms(e,t,!1,!1),t.stateNode=e,c=ke(n,r),n){case"dialog":$r("cancel",e),$r("close",e),o=r;break;case"iframe":case"object":case"embed":$r("load",e),o=r;break;case"video":case"audio":for(o=0;o<Zr.length;o++)$r(Zr[o],e);o=r;break;case"source":$r("error",e),o=r;break;case"img":case"image":case"link":$r("error",e),$r("load",e),o=r;break;case"details":$r("toggle",e),o=r;break;case"input":ie(e,r),o=re(e,r),$r("invalid",e);break;case"option":o=le(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),$r("invalid",e);break;case"textarea":he(e,r),o=pe(e,r),$r("invalid",e);break;default:o=r}Ae(n,o);var l=o;for(s in l)if(l.hasOwnProperty(s)){var f=l[s];"style"===s?Se(e,f):"dangerouslySetInnerHTML"===s?(f=f?f.__html:void 0,null!=f&&_e(e,f)):"children"===s?"string"===typeof f?("textarea"!==n||""!==f)&&xe(e,f):"number"===typeof f&&xe(e,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=f&&"onScroll"===s&&$r("scroll",e):null!=f&&O(e,s,f,c))}switch(n){case"input":ee(e),se(e,r,!1);break;case"textarea":ee(e),ve(e);break;case"option":null!=r.value&&e.setAttribute("value",""+$(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,null!=s?fe(e,!!r.multiple,s,!1):null!=r.defaultValue&&fe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=si)}li(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)bs(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));n=ta(ea.current),ta(Qo.current),va(t)?(r=t.stateNode,n=t.memoizedProps,r[_i]=t,r.nodeValue!==n&&(t.flags|=4)):(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r),r[_i]=t,t.stateNode=r)}return null;case 13:return Pi(aa),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&va(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&aa.current)?0===su&&(su=3):(0!==su&&3!==su||(su=4),null===nu||0===(134217727&lu)&&0===(134217727&fu)||Uu(nu,iu))),(r||n)&&(t.flags|=4),null);case 4:return ra(),gs(t),null===e&&Jr(t.stateNode.containerInfo),null;case 10:return jo(t),null;case 17:return zi(t.type)&&Bi(),null;case 19:if(Pi(aa),r=t.memoizedState,null===r)return null;if(s=0!==(64&t.flags),c=r.rendering,null===c)if(s)Cs(r,!1);else{if(0!==su||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(c=sa(e),null!==c){for(t.flags|=64,Cs(r,!1),s=c.updateQueue,null!==s&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)s=n,e=r,s.flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,c=s.alternate,null===c?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(aa,1&aa.current|2),t.child}e=e.sibling}null!==r.tail&&fo()>vu&&(t.flags|=64,s=!0,Cs(r,!1),t.lanes=33554432)}else{if(!s)if(e=sa(c),null!==e){if(t.flags|=64,s=!0,n=e.updateQueue,null!==n&&(t.updateQueue=n,t.flags|=4),Cs(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!la)return t=t.lastEffect=r.lastEffect,null!==t&&(t.nextEffect=null),null}else 2*fo()-r.renderingStartTime>vu&&1073741824!==n&&(t.flags|=64,s=!0,Cs(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(n=r.last,null!==n?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=fo(),n.sibling=null,t=aa.current,Ii(aa,s?1&t|2:1&t),n):null;case 23:case 24:return Zu(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(a(156,t.tag))}function Ms(e){switch(e.tag){case 1:zi(e.type)&&Bi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(ra(),Pi(Di),Pi(Li),ya(),t=e.flags,0!==(64&t))throw Error(a(285));return e.flags=-4097&t|64,e;case 5:return oa(e),null;case 13:return Pi(aa),t=e.flags,4096&t?(e.flags=-4097&t|64,e):null;case 19:return Pi(aa),null;case 4:return ra(),null;case 10:return jo(e),null;case 23:case 24:return Zu(),null;default:return null}}function Ps(e,t){try{var n="",r=t;do{n+=X(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i}}function Is(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}ms=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},gs=function(){},ys=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ta(Qo.current);var a,s=null;switch(n){case"input":o=re(e,o),r=re(e,r),s=[];break;case"option":o=le(e,o),r=le(e,r),s=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":o=pe(e,o),r=pe(e,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=si)}for(f in Ae(n,r),n=null,o)if(!r.hasOwnProperty(f)&&o.hasOwnProperty(f)&&null!=o[f])if("style"===f){var c=o[f];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(u.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=o?o[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(a in c)!c.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&c[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(u.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&$r("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===F?l.toString():(s=s||[]).push(f,l))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}},bs=function(e,t,n,r){n!==r&&(t.flags|=4)};var Rs="function"===typeof WeakMap?WeakMap:Map;function Ls(e,t,n){n=Io(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){bu||(bu=!0,_u=r),Is(e,t)},n}function Ds(e,t,n){n=Io(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return Is(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===xu?xu=new Set([this]):xu.add(this),Is(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Ns="function"===typeof WeakSet?WeakSet:Set;function Fs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){lc(e,n)}else t.current=null}function zs(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?n:_o(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&di(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(a(163))}function Bs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(t=n.updateQueue,t=null!==t?t.lastEffect:null,null!==t){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(t=n.updateQueue,t=null!==t?t.lastEffect:null,null!==t){e=t=t.next;do{var i=e;r=i.next,i=i.tag,0!==(4&i)&&0!==(1&i)&&(sc(n,e),ac(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:_o(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=n.updateQueue,void(null!==t&&No(n,t,e));case 3:if(t=n.updateQueue,null!==t){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}No(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&li(n.type,n.memoizedProps)&&e.focus());case 6:return;case 4:return;case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Ct(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(a(163))}function Us(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)r=r.style,"function"===typeof r.setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=Ee("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function Vs(e,t){if(qi&&"function"===typeof qi.onCommitFiberUnmount)try{qi.onCommitFiberUnmount(Wi,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,null!==e&&(e=e.lastEffect,null!==e)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))sc(t,n);else{r=t;try{i()}catch(o){lc(r,o)}}n=n.next}while(n!==e)}break;case 1:if(Fs(t),e=t.stateNode,"function"===typeof e.componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){lc(t,o)}break;case 5:Fs(t);break;case 4:Ys(e,t)}}function Hs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function Gs(e){return 5===e.tag||3===e.tag||4===e.tag}function Ws(e){e:{for(var t=e.return;null!==t;){if(Gs(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:t=t.containerInfo,r=!0;break;case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(xe(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Gs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?qs(e,n,t):Zs(e,n,t)}function qs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,null!==n&&void 0!==n||null!==t.onclick||(t.onclick=si));else if(4!==r&&(e=e.child,null!==e))for(qs(e,t,n),e=e.sibling;null!==e;)qs(e,t,n),e=e.sibling}function Zs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(e=e.child,null!==e))for(Zs(e,t,n),e=e.sibling;null!==e;)Zs(e,t,n),e=e.sibling}function Ys(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:n=n.containerInfo,r=!0;break e;case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,c=u;;)if(Vs(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(Vs(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return,4===i.tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Xs(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(n=null!==n?n.lastEffect:null,null!==n){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(n=t.stateNode,null!=n){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[xi]=r,"input"===e&&"radio"===r.type&&null!=r.name&&oe(n,r),ke(e,i),t=ke(e,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?Se(n,u):"dangerouslySetInnerHTML"===s?_e(n,u):"children"===s?xe(n,u):O(n,s,u,t)}switch(e){case"input":ae(n,r);break;case"textarea":de(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,o=r.value,null!=o?fe(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?fe(n,!!r.multiple,r.defaultValue,!0):fe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return n=t.stateNode,void(n.hydrate&&(n.hydrate=!1,Ct(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(du=fo(),Us(t.child,!0)),void Ks(t);case 19:return void Ks(t);case 17:return;case 23:case 24:return void Us(t,null!==t.memoizedState)}throw Error(a(163))}function Ks(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ns),t.forEach((function(t){var r=pc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function $s(e,t){return null!==e&&(e=e.memoizedState,null===e||null!==e.dehydrated)&&(t=t.memoizedState,null!==t&&null===t.dehydrated)}var Qs=Math.ceil,Js=E.ReactCurrentDispatcher,eu=E.ReactCurrentOwner,tu=0,nu=null,ru=null,iu=0,ou=0,au=Mi(0),su=0,uu=null,cu=0,lu=0,fu=0,pu=0,hu=null,du=0,vu=1/0;function mu(){vu=fo()+500}var gu,yu=null,bu=!1,_u=null,xu=null,wu=!1,Ou=null,Eu=90,Su=[],ju=[],Au=null,ku=0,Cu=null,Tu=-1,Mu=0,Pu=0,Iu=null,Ru=!1;function Lu(){return 0!==(48&tu)?fo():-1!==Tu?Tu:Tu=fo()}function Du(e){if(e=e.mode,0===(2&e))return 1;if(0===(4&e))return 99===po()?1:2;if(0===Mu&&(Mu=cu),0!==bo.transition){0!==Pu&&(Pu=null!==hu?hu.pendingLanes:0),e=Mu;var t=4186112&~Pu;return t&=-t,0===t&&(e=4186112&~e,t=e&-e,0===t&&(t=8192)),t}return e=po(),0!==(4&tu)&&98===e?e=Kt(12,Mu):(e=qt(e),e=Kt(e,Mu)),e}function Nu(e,t,n){if(50<ku)throw ku=0,Cu=null,Error(a(185));if(e=Fu(e,t),null===e)return null;Jt(e,t,n),e===nu&&(fu|=t,4===su&&Uu(e,iu));var r=po();1===t?0!==(8&tu)&&0===(48&tu)?Vu(e):(zu(e,n),0===tu&&(mu(),go())):(0===(4&tu)||98!==r&&99!==r||(null===Au?Au=new Set([e]):Au.add(e)),zu(e,n)),hu=e}function Fu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,n=e.alternate,null!==n&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function zu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-en(a),u=1<<s,c=o[s];if(-1===c){if(0===(u&r)||0!==(u&i)){c=t,Wt(u);var l=Gt;o[s]=10<=l?c+250:6<=l?c+5e3:-1}}else c<=t&&(e.expiredLanes|=u);a&=~u}if(r=Yt(e,e===nu?iu:0),t=Gt,0===r)null!==n&&(n!==oo&&Xi(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==oo&&Xi(n)}15===t?(n=Vu.bind(null,e),null===so?(so=[n],uo=Yi(eo,yo)):so.push(n),n=oo):14===t?n=mo(99,Vu.bind(null,e)):(n=Zt(t),n=mo(n,Bu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function Bu(e){if(Tu=-1,Pu=Mu=0,0!==(48&tu))throw Error(a(327));var t=e.callbackNode;if(oc()&&e.callbackNode!==t)return null;var n=Yt(e,e===nu?iu:0);if(0===n)return null;var r=n,i=tu;tu|=16;var o=Ku();nu===e&&iu===r||(mu(),Yu(e,r));do{try{Ju();break}catch(u){Xu(e,u)}}while(1);if(So(),Js.current=o,tu=i,null!==ru?r=0:(nu=null,iu=0,r=su),0!==(cu&fu))Yu(e,0);else if(0!==r){if(2===r&&(tu|=64,e.hydrate&&(e.hydrate=!1,di(e.containerInfo)),n=Xt(e),0!==n&&(r=$u(e,n))),1===r)throw t=uu,Yu(e,0),Uu(e,n),zu(e,fo()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:nc(e);break;case 3:if(Uu(e,n),(62914560&n)===n&&(r=du+500-fo(),10<r)){if(0!==Yt(e,0))break;if(i=e.suspendedLanes,(i&n)!==n){Lu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=pi(nc.bind(null,e),r);break}nc(e);break;case 4:if(Uu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-en(n);o=1<<s,s=r[s],s>i&&(i=s),n&=~o}if(n=i,n=fo()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Qs(n/1960))-n,10<n){e.timeoutHandle=pi(nc.bind(null,e),n);break}nc(e);break;case 5:nc(e);break;default:throw Error(a(329))}}return zu(e,fo()),e.callbackNode===t?Bu.bind(null,e):null}function Uu(e,t){for(t&=~pu,t&=~fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-en(t),r=1<<n;e[n]=-1,t&=~r}}function Vu(e){if(0!==(48&tu))throw Error(a(327));if(oc(),e===nu&&0!==(e.expiredLanes&iu)){var t=iu,n=$u(e,t);0!==(cu&fu)&&(t=Yt(e,t),n=$u(e,t))}else t=Yt(e,0),n=$u(e,t);if(0!==e.tag&&2===n&&(tu|=64,e.hydrate&&(e.hydrate=!1,di(e.containerInfo)),t=Xt(e),0!==t&&(n=$u(e,t))),1===n)throw n=uu,Yu(e,0),Uu(e,t),zu(e,fo()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,nc(e),zu(e,fo()),null}function Hu(){if(null!==Au){var e=Au;Au=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,zu(e,fo())}))}go()}function Gu(e,t){var n=tu;tu|=1;try{return e(t)}finally{tu=n,0===tu&&(mu(),go())}}function Wu(e,t){var n=tu;tu&=-2,tu|=8;try{return e(t)}finally{tu=n,0===tu&&(mu(),go())}}function qu(e,t){Ii(au,ou),ou|=t,cu|=t}function Zu(){ou=au.current,Pi(au)}function Yu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,hi(n)),null!==ru)for(n=ru.return;null!==n;){var r=n;switch(r.tag){case 1:r=r.type.childContextTypes,null!==r&&void 0!==r&&Bi();break;case 3:ra(),Pi(Di),Pi(Li),ya();break;case 5:oa(r);break;case 4:ra();break;case 13:Pi(aa);break;case 19:Pi(aa);break;case 10:jo(r);break;case 23:case 24:Zu()}n=n.return}nu=e,ru=gc(e.current,null),iu=ou=cu=t,su=0,uu=null,pu=fu=lu=0}function Xu(e,t){do{var n=ru;try{if(So(),ba.current=es,Sa){for(var r=wa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Sa=!1}if(xa=0,Ea=Oa=wa=null,ja=!1,eu.current=null,null===n||null===n.return){su=1,uu=t,ru=null;break}e:{var o=e,a=n.return,s=n,u=t;if(t=iu,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!==(1&aa.current),p=a;do{var h;if(h=13===p.tag){var d=p.memoizedState;if(null!==d)h=null!==d.dehydrated;else{var v=p.memoizedProps;h=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(h){var m=p.updateQueue;if(null===m){var g=new Set;g.add(c),p.updateQueue=g}else m.add(c);if(0===(2&p.mode)){if(p.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=Io(-1,1);y.tag=2,Ro(s,y)}s.lanes|=1;break e}u=void 0,s=t;var b=o.pingCache;if(null===b?(b=o.pingCache=new Rs,u=new Set,b.set(c,u)):(u=b.get(c),void 0===u&&(u=new Set,b.set(c,u))),!u.has(s)){u.add(s);var _=fc.bind(null,o,c,s);c.then(_,_)}p.flags|=4096,p.lanes=t;break e}p=p.return}while(null!==p);u=Error((K(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==su&&(su=2),u=Ps(u,s),p=a;do{switch(p.tag){case 3:o=u,p.flags|=4096,t&=-t,p.lanes|=t;var x=Ls(p,o,t);Lo(p,x);break e;case 1:o=u;var w=p.type,O=p.stateNode;if(0===(64&p.flags)&&("function"===typeof w.getDerivedStateFromError||null!==O&&"function"===typeof O.componentDidCatch&&(null===xu||!xu.has(O)))){p.flags|=4096,t&=-t,p.lanes|=t;var E=Ds(p,o,t);Lo(p,E);break e}}p=p.return}while(null!==p)}tc(n)}catch(S){t=S,ru===n&&null!==n&&(ru=n=n.return);continue}break}while(1)}function Ku(){var e=Js.current;return Js.current=es,null===e?es:e}function $u(e,t){var n=tu;tu|=16;var r=Ku();nu===e&&iu===t||Yu(e,t);do{try{Qu();break}catch(i){Xu(e,i)}}while(1);if(So(),tu=n,Js.current=r,null!==ru)throw Error(a(261));return nu=null,iu=0,su}function Qu(){for(;null!==ru;)ec(ru)}function Ju(){for(;null!==ru&&!Ki();)ec(ru)}function ec(e){var t=gu(e.alternate,e,ou);e.memoizedProps=e.pendingProps,null===t?tc(e):ru=t,eu.current=null}function tc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(n=Ts(n,t,ou),null!==n)return void(ru=n);if(n=t,24!==n.tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&ou)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(n=Ms(t),null!==n)return n.flags&=2047,void(ru=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(t=t.sibling,null!==t)return void(ru=t);ru=t=e}while(null!==t);0===su&&(su=5)}function nc(e){var t=po();return vo(99,rc.bind(null,e,t)),null}function rc(e,t){do{oc()}while(null!==Ou);if(0!==(48&tu))throw Error(a(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<o;){var c=31-en(o),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,o&=~l}if(null!==Au&&0===(24&r)&&Au.has(e)&&Au.delete(e),e===nu&&(ru=nu=null,iu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=tu,tu|=32,eu.current=null,ui=sn,s=Nr(),Fr(s)){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,o=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(j){u=null;break e}var f=0,p=-1,h=-1,d=0,v=0,m=s,g=null;t:for(;;){for(var y;;){if(m!==u||0!==o&&3!==m.nodeType||(p=f+o),m!==c||0!==l&&3!==m.nodeType||(h=f+l),3===m.nodeType&&(f+=m.nodeValue.length),null===(y=m.firstChild))break;g=m,m=y}for(;;){if(m===s)break t;if(g===u&&++d===o&&(p=f),g===c&&++v===l&&(h=f),null!==(y=m.nextSibling))break;m=g,g=m.parentNode}m=y}u=-1===p||-1===h?null:{start:p,end:h}}else u=null;u=u||{start:0,end:0}}else u=null;ci={focusedElem:s,selectionRange:u},sn=!1,Iu=null,Ru=!1,yu=r;do{try{ic()}catch(j){if(null===yu)throw Error(a(330));lc(yu,j),yu=yu.nextEffect}}while(null!==yu);Iu=null,yu=r;do{try{for(s=e;null!==yu;){var b=yu.flags;if(16&b&&xe(yu.stateNode,""),128&b){var _=yu.alternate;if(null!==_){var x=_.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&b){case 2:Ws(yu),yu.flags&=-3;break;case 6:Ws(yu),yu.flags&=-3,Xs(yu.alternate,yu);break;case 1024:yu.flags&=-1025;break;case 1028:yu.flags&=-1025,Xs(yu.alternate,yu);break;case 4:Xs(yu.alternate,yu);break;case 8:u=yu,Ys(s,u);var w=u.alternate;Hs(u),null!==w&&Hs(w)}yu=yu.nextEffect}}catch(j){if(null===yu)throw Error(a(330));lc(yu,j),yu=yu.nextEffect}}while(null!==yu);if(x=ci,_=Nr(),b=x.focusedElem,s=x.selectionRange,_!==b&&b&&b.ownerDocument&&Dr(b.ownerDocument.documentElement,b)){null!==s&&Fr(b)&&(_=s.start,x=s.end,void 0===x&&(x=_),"selectionStart"in b?(b.selectionStart=_,b.selectionEnd=Math.min(x,b.value.length)):(x=(_=b.ownerDocument||document)&&_.defaultView||window,x.getSelection&&(x=x.getSelection(),u=b.textContent.length,w=Math.min(s.start,u),s=void 0===s.end?w:Math.min(s.end,u),!x.extend&&w>s&&(u=s,s=w,w=u),u=Lr(b,w),o=Lr(b,s),u&&o&&(1!==x.rangeCount||x.anchorNode!==u.node||x.anchorOffset!==u.offset||x.focusNode!==o.node||x.focusOffset!==o.offset)&&(_=_.createRange(),_.setStart(u.node,u.offset),x.removeAllRanges(),w>s?(x.addRange(_),x.extend(o.node,o.offset)):(_.setEnd(o.node,o.offset),x.addRange(_)))))),_=[];for(x=b;x=x.parentNode;)1===x.nodeType&&_.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<_.length;b++)x=_[b],x.element.scrollLeft=x.left,x.element.scrollTop=x.top}sn=!!ui,ci=ui=null,e.current=n,yu=r;do{try{for(b=e;null!==yu;){var O=yu.flags;if(36&O&&Bs(b,yu.alternate,yu),128&O){_=void 0;var E=yu.ref;if(null!==E){var S=yu.stateNode;switch(yu.tag){case 5:_=S;break;default:_=S}"function"===typeof E?E(_):E.current=_}}yu=yu.nextEffect}}catch(j){if(null===yu)throw Error(a(330));lc(yu,j),yu=yu.nextEffect}}while(null!==yu);yu=null,ao(),tu=i}else e.current=n;if(wu)wu=!1,Ou=e,Eu=t;else for(yu=r;null!==yu;)t=yu.nextEffect,yu.nextEffect=null,8&yu.flags&&(O=yu,O.sibling=null,O.stateNode=null),yu=t;if(r=e.pendingLanes,0===r&&(xu=null),1===r?e===Cu?ku++:(ku=0,Cu=e):ku=0,n=n.stateNode,qi&&"function"===typeof qi.onCommitFiberRoot)try{qi.onCommitFiberRoot(Wi,n,void 0,64===(64&n.current.flags))}catch(j){}if(zu(e,fo()),bu)throw bu=!1,e=_u,_u=null,e;return 0!==(8&tu)||go(),null}function ic(){for(;null!==yu;){var e=yu.alternate;Ru||null===Iu||(0!==(8&yu.flags)?at(yu,Iu)&&(Ru=!0):13===yu.tag&&$s(e,yu)&&at(yu,Iu)&&(Ru=!0));var t=yu.flags;0!==(256&t)&&zs(e,yu),0===(512&t)||wu||(wu=!0,mo(97,(function(){return oc(),null}))),yu=yu.nextEffect}}function oc(){if(90!==Eu){var e=97<Eu?97:Eu;return Eu=90,vo(e,uc)}return!1}function ac(e,t){Su.push(t,e),wu||(wu=!0,mo(97,(function(){return oc(),null})))}function sc(e,t){ju.push(t,e),wu||(wu=!0,mo(97,(function(){return oc(),null})))}function uc(){if(null===Ou)return!1;var e=Ou;if(Ou=null,0!==(48&tu))throw Error(a(331));var t=tu;tu|=32;var n=ju;ju=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===o)throw Error(a(330));lc(o,c)}}for(n=Su,Su=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===o)throw Error(a(330));lc(o,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return tu=t,go(),!0}function cc(e,t,n){t=Ps(n,t),t=Ls(e,t,1),Ro(e,t),t=Lu(),e=Fu(e,1),null!==e&&(Jt(e,1,t),zu(e,t))}function lc(e,t){if(3===e.tag)cc(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){cc(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===xu||!xu.has(r))){e=Ps(t,e);var i=Ds(n,e,1);if(Ro(n,i),i=Lu(),n=Fu(n,1),null!==n)Jt(n,1,i),zu(n,i);else if("function"===typeof r.componentDidCatch&&(null===xu||!xu.has(r)))try{r.componentDidCatch(t,e)}catch(o){}break}}n=n.return}}function fc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Lu(),e.pingedLanes|=e.suspendedLanes&n,nu===e&&(iu&n)===n&&(4===su||3===su&&(62914560&iu)===iu&&500>fo()-du?Yu(e,0):pu|=n),zu(e,t)}function pc(e,t){var n=e.stateNode;null!==n&&n.delete(t),t=0,0===t&&(t=e.mode,0===(2&t)?t=1:0===(4&t)?t=99===po()?1:2:(0===Mu&&(Mu=cu),t=$t(62914560&~Mu),0===t&&(t=4194304))),n=Lu(),e=Fu(e,t),null!==e&&(Jt(e,t,n),zu(e,n))}function hc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function dc(e,t,n,r){return new hc(e,t,n,r)}function vc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mc(e){if("function"===typeof e)return vc(e)?1:0;if(void 0!==e&&null!==e){if(e=e.$$typeof,e===P)return 11;if(e===L)return 14}return 2}function gc(e,t){var n=e.alternate;return null===n?(n=dc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function yc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)vc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case A:return bc(n.children,i,o,t);case z:s=8,i|=16;break;case k:s=8,i|=1;break;case C:return e=dc(12,n,t,8|i),e.elementType=C,e.type=C,e.lanes=o,e;case I:return e=dc(13,n,t,i),e.type=I,e.elementType=I,e.lanes=o,e;case R:return e=dc(19,n,t,i),e.elementType=R,e.lanes=o,e;case B:return _c(n,i,o,t);case U:return e=dc(24,n,t,i),e.elementType=U,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case M:s=9;break e;case P:s=11;break e;case L:s=14;break e;case D:s=16,r=null;break e;case N:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return t=dc(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function bc(e,t,n,r){return e=dc(7,e,r,t),e.lanes=n,e}function _c(e,t,n,r){return e=dc(23,e,r,t),e.elementType=B,e.lanes=n,e}function xc(e,t,n){return e=dc(6,e,null,t),e.lanes=n,e}function wc(e,t,n){return t=dc(4,null!==e.children?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Oc(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Qt(0),this.expirationTimes=Qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qt(0),this.mutableSourceEagerHydrationData=null}function Ec(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Sc(e,t,n,r){var i=t.current,o=Lu(),s=Du(i);e:if(n){n=n._reactInternals;t:{if(tt(n)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(zi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(zi(c)){n=Vi(n,c,u);break e}}n=u}else n=Ri;return null===t.context?t.context=n:t.pendingContext=n,t=Io(o,s),t.payload={element:e},r=void 0===r?null:r,null!==r&&(t.callback=r),Ro(i,t),Nu(i,s,o),s}function jc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ac(e,t){if(e=e.memoizedState,null!==e&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function kc(e,t){Ac(e,t),(e=e.alternate)&&Ac(e,t)}function Cc(){return null}function Tc(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Oc(e,t,null!=n&&!0===n.hydrate),t=dc(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,Mo(t),e[wi]=n.current,Jr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){t=r[e];var i=t._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function Mc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Pc(e,t){if(t||(t=e?9===e.nodeType?e.documentElement:e.firstChild:null,t=!(!t||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Tc(e,0,t?{hydrate:!0}:void 0)}function Ic(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=jc(a);s.call(e)}}Sc(t,a,e,i)}else{if(o=n._reactRootContainer=Pc(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var e=jc(a);u.call(e)}}Wu((function(){Sc(t,a,e,i)}))}return jc(a)}function Rc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Mc(t))throw Error(a(200));return Ec(e,t,null,n)}gu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||Di.current)os=!0;else{if(0===(n&r)){switch(os=!1,t.tag){case 3:vs(t),ma();break;case 5:ia(t);break;case 1:zi(t.type)&&Hi(t);break;case 4:na(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;Ii(xo,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?xs(e,t,n):(Ii(aa,1&aa.current),t=ks(e,t,n),null!==t?t.sibling:null);Ii(aa,1&aa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return As(e,t,n);t.flags|=64}if(i=t.memoizedState,null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(aa,aa.current),r)break;return null;case 23:case 24:return t.lanes=0,ls(e,t,n)}return ks(e,t,n)}os=0!==(16384&e.flags)}else os=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=Fi(t,Li.current),ko(t,n),i=Ca(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,zi(r)){var o=!0;Hi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Mo(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&zo(t,r,s,e),i.updater=Bo,t.stateNode=i,i._reactInternals=t,Go(t,r,e,n),t=ds(null,t,r,!0,o,n)}else t.tag=0,as(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=i._init,i=o(i._payload),t.type=i,o=t.tag=mc(i),e=_o(i,e),o){case 0:t=ps(null,t,i,e,n);break e;case 1:t=hs(null,t,i,e,n);break e;case 11:t=ss(null,t,i,e,n);break e;case 14:t=us(null,t,i,_o(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_o(r,i),ps(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_o(r,i),hs(e,t,r,i,n);case 3:if(vs(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=t.memoizedState,i=null!==i?i.element:null,Po(e,t),Do(t,r,null,n),r=t.memoizedState.element,r===i)ma(),t=ks(e,t,n);else{if(i=t.stateNode,(o=i.hydrate)&&(ca=vi(t.stateNode.containerInfo.firstChild),ua=t,o=la=!0),o){if(e=i.mutableSourceEagerHydrationData,null!=e)for(i=0;i<e.length;i+=2)o=e[i],o._workInProgressVersionPrimary=e[i+1],ga.push(o);for(n=Ko(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else as(e,t,r,n),ma();t=t.child}return t;case 5:return ia(t),null===e&&ha(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,fi(r,i)?s=null:null!==o&&fi(r,o)&&(t.flags|=16),fs(e,t),as(e,t,s,n),t.child;case 6:return null===e&&ha(t),null;case 13:return xs(e,t,n);case 4:return na(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xo(t,null,r,n):as(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_o(r,i),ss(e,t,r,i,n);case 7:return as(e,t,t.pendingProps,n),t.child;case 8:return as(e,t,t.pendingProps.children,n),t.child;case 12:return as(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var u=t.type._context;if(Ii(xo,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,o=Mr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823),0===o){if(s.children===i.children&&!Di.current){t=ks(e,t,n);break e}}else for(u=t.child,null!==u&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&(l=Io(-1,n&-n),l.tag=2,Ro(u,l)),u.lanes|=n,l=u.alternate,null!==l&&(l.lanes|=n),Ao(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(u=s.sibling,null!==u){u.return=s.return,s=u;break}s=s.return}u=s}as(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,o=t.pendingProps,r=o.children,ko(t,n),i=Co(i,o.unstable_observedBits),r=r(i),t.flags|=1,as(e,t,r,n),t.child;case 14:return i=t.type,o=_o(i,t.pendingProps),o=_o(i.type,o),us(e,t,i,o,r,n);case 15:return cs(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_o(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,zi(r)?(e=!0,Hi(t)):e=!1,ko(t,n),Vo(t,r,i),Go(t,r,i,n),ds(null,t,r,!0,e,n);case 19:return As(e,t,n);case 23:return ls(e,t,n);case 24:return ls(e,t,n)}throw Error(a(156,t.tag))},Tc.prototype.render=function(e){Sc(e,this._internalRoot,null,null)},Tc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Sc(null,e,null,(function(){t[wi]=null}))},st=function(e){if(13===e.tag){var t=Lu();Nu(e,4,t),kc(e,4)}},ut=function(e){if(13===e.tag){var t=Lu();Nu(e,67108864,t),kc(e,67108864)}},ct=function(e){if(13===e.tag){var t=Lu(),n=Du(e);Nu(e,n,t),kc(e,n)}},lt=function(e,t){return t()},Te=function(e,t,n){switch(t){case"input":if(ae(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ai(r);if(!i)throw Error(a(90));te(r),ae(r,i)}}}break;case"textarea":de(e,n);break;case"select":t=n.value,null!=t&&fe(e,!!n.multiple,t,!1)}},De=Gu,Ne=function(e,t,n,r,i){var o=tu;tu|=4;try{return vo(98,e.bind(null,t,n,r,i))}finally{tu=o,0===tu&&(mu(),go())}},Fe=function(){0===(49&tu)&&(Hu(),oc())},ze=function(e,t){var n=tu;tu|=2;try{return e(t)}finally{tu=n,0===tu&&(mu(),go())}};var Lc={Events:[Si,ji,Ai,Re,Le,oc,{current:!1}]},Dc={findFiberByHostInstance:Ei,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},Nc={bundleType:Dc.bundleType,version:Dc.version,rendererPackageName:Dc.rendererPackageName,rendererConfig:Dc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ot(e),null===e?null:e.stateNode},findFiberByHostInstance:Dc.findFiberByHostInstance||Cc,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fc.isDisabled&&Fc.supportsFiber)try{Wi=Fc.inject(Nc),qi=Fc}catch(zc){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lc,t.createPortal=Rc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=ot(t),e=null===e?null:e.stateNode,e},t.flushSync=function(e,t){var n=tu;if(0!==(48&n))return e(t);tu|=1;try{if(e)return vo(99,e.bind(null,t))}finally{tu=n,go()}},t.hydrate=function(e,t,n){if(!Mc(t))throw Error(a(200));return Ic(null,e,t,!0,n)},t.render=function(e,t,n){if(!Mc(t))throw Error(a(200));return Ic(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Mc(e))throw Error(a(40));return!!e._reactRootContainer&&(Wu((function(){Ic(null,null,e,!1,(function(){e._reactRootContainer=null,e[wi]=null}))})),!0)},t.unstable_batchedUpdates=Gu,t.unstable_createPortal=function(e,t){return Rc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Mc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Ic(e,t,n,!1,r)},t.version="17.0.2"},yoRg:function(e,t,n){var r=n("UTVS"),i=n("/GqU"),o=n("TWQb").indexOf,a=n("0BK2");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);while(t.length>u)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},yq1k:function(e,t,n){"use strict";var r=n("I+eb"),i=n("TWQb").includes,o=n("RNIs"),a=n("rkAj"),s=a("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:!s},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},"z01/":function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports["default"]=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},z4Hk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingWhenSyntax=void 0;var r=n("406g"),i=n("RR/i"),o=function(){function e(e){this._binding=e}return e.prototype.when=function(e){return this._binding.constraint=e,new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetNamed=function(e){return this._binding.constraint=i.namedConstraint(e),new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){var t=null!==e.target&&!e.target.isNamed()&&!e.target.isTagged();return t},new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=i.taggedConstraint(e)(t),new r.BindingOnSyntax(this._binding)},e.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return i.typeConstraint(e)(t.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return i.namedConstraint(e)(t.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(n){return i.taggedConstraint(e)(t)(n.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,i.typeConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,i.typeConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,i.namedConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,i.namedConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(n){return i.traverseAncerstors(n,i.taggedConstraint(e)(t))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(n){return!i.traverseAncerstors(n,i.taggedConstraint(e)(t))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,e)},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,e)},new r.BindingOnSyntax(this._binding)},e}();t.BindingWhenSyntax=o},z8NH:function(e,t,n){var r=n("dOgj");r("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},zBJ4:function(e,t,n){var r=n("2oRo"),i=n("hh1v"),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},zKZe:function(e,t,n){var r=n("I+eb"),i=n("YNrV");r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},zLVn:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,"a",(function(){return r}))},zYLY:function(e,t,n){"use strict";function r(){var e=n("q1tI");return r=function(){return e},e}function i(e,t){return c(e)||u(e,t)||a(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function c(e){if(Array.isArray(e))return e}function l(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(o<t.length){var a=t[o],s=function(){return l(e,t,n,o+1)},u=a.match(/^([^:]+):?(.*)$/)||[],c=i(u,3),f=c[1],p=c[2];switch(f){case"autoplay":s();break;case"click":var h=p.match(/^(global\()?(.+?)\)?$/)||[],d=i(h,3),v=d[1],m=d[2],g=v?document:e;null===(r=g.querySelector(m))||void 0===r||r.click(),s();break;case"timeout":setTimeout(s,Number(p));break;case"capture":window.postMessage({type:"dumi:capture-element",value:p},"*"),s();break;default:console.warn("[dumi: motion] unknown motion '".concat(a,"', skip.")),s()}}else n()}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var f=function(e,t){var n=(0,r().useState)(!1),o=i(n,2),a=o[0],s=o[1],u=(0,r().useCallback)((function(){a||(l(t,e,(function(){s(!1)})),s(!0))}),[e,t,a]);return(0,r().useEffect)((function(){"autoplay"===e[0]&&t&&u()}),[e,t]),[u,a]};t["default"]=f},zZ0H:function(e,t){function n(e){return e}e.exports=n},zfnd:function(e,t,n){var r=n("glrk"),i=n("hh1v"),o=n("8GlL");e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e),a=n.resolve;return a(t),n.promise}},zk60:function(e,t,n){var r=n("2oRo"),i=n("kRJp");e.exports=function(e,t){try{i(r,e,t)}catch(n){r[e]=t}return t}},zlVK:function(e,t,n){"use strict";var r=n("QGke")["default"];Object.defineProperty(t,"__esModule",{value:!0});var i=n("LtsZ"),o=n("q1tI"),a=n("i8i4"),s=n("V/vL");function u(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var c=u(o);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){p(o,r,i,a,s,"next",e)}function s(e){p(o,r,i,a,s,"throw",e)}a(void 0)}))}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}function m(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function g(e,t){if(null==e)return{};var n,r,i=m(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function y(e,t){return b(e)||_(e,t)||x(e,t)||O()}function b(e){if(Array.isArray(e))return e}function _(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),t&&o.length===t)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function x(e,t){if(e){if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=x(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function S(e){return c["default"].createElement(i.__RouterContext.Consumer,null,(function(t){var n=e.location||t.location,r=e.computedMatch,o=f(f({},t),{},{location:n,match:r}),a=e.render;return c["default"].createElement(i.__RouterContext.Provider,{value:o},o.match?a(f(f({},e.layoutProps),o)):null)}))}var j=["children"];function A(e){return c["default"].createElement(i.__RouterContext.Consumer,null,(function(t){var n,r=e.children,a=g(e,j),s=e.location||t.location,u=null;return o.Children.forEach(r,(function(e){if(null===u&&o.isValidElement(e)){n=e;var r=e.props.path||e.props.from;u=r?i.matchPath(s.pathname,f(f({},e.props),{},{path:r})):t.match}})),u?o.cloneElement(n,{location:s,computedMatch:u,layoutProps:a}):null}))}var k=["component"];function C(e,t){e.component;var n=g(e,k),a=e.component;function s(s){var u=o.useState((function(){return window.g_initialProps})),l=y(u,2),p=l[0],d=l[1];return o.useEffect((function(){var o=function(){var o=h(r().mark((function o(){var u,c,l,p,h;return r().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(c=a,!a.preload){r.next=6;break}return r.next=4,a.preload();case 4:c=r.sent,c=c["default"]||c;case 6:if(l=f(f({isServer:!1,match:null===s||void 0===s?void 0:s.match,history:null===s||void 0===s?void 0:s.history,route:e},t.getInitialPropsCtx||{}),n),!(null===(u=c)||void 0===u?void 0:u.getInitialProps)){r.next=15;break}return r.next=10,t.plugin.applyPlugins({key:"ssr.modifyGetInitialPropsCtx",type:i.ApplyPluginsType.modify,initialValue:l,async:!0});case 10:return p=r.sent,r.next=13,c.getInitialProps(p||l);case 13:h=r.sent,d(h);case 15:case"end":return r.stop()}}),o)})));return function(){return o.apply(this,arguments)}}();window.g_initialProps||o()}),[window.location.pathname,window.location.search]),c["default"].createElement(a,v({},s,p))}return s.wrapInitialPropsLoaded=!0,s.displayName="ComponentWithInitialPropsFetch",s}function T(e){var t=e.route,n=e.opts,r=e.props,i=P(f(f({},n),{},{routes:t.routes||[],rootRoutes:n.rootRoutes}),{location:r.location}),a=t.component,s=t.wrappers;if(a){var u=n.isServer?{}:window.g_initialProps,l=f(f(f(f({},r),n.extraProps),n.pageInitialProps||u),{},{route:t,routes:n.rootRoutes}),p=c["default"].createElement(a,l,i);if(s){var h=s.length-1;while(h>=0)p=o.createElement(s[h],l,p),h-=1}return p}return i}function M(e){var t,n,r,o=e.route,a=e.index,s=e.opts,u={key:o.key||a,exact:o.exact,strict:o.strict,sensitive:o.sensitive,path:o.path};return o.redirect?c["default"].createElement(i.Redirect,v({},u,{from:o.path,to:o.redirect})):(!s.ssrProps||s.isServer||(null===(t=o.component)||void 0===t?void 0:t.wrapInitialPropsLoaded)||!(null===(n=o.component)||void 0===n?void 0:n.getInitialProps)&&!(null===(r=o.component)||void 0===r?void 0:r.preload)||(o.component=C(o,s)),c["default"].createElement(S,v({},u,{render:function(e){return T({route:o,opts:s,props:e})}})))}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.routes?c["default"].createElement(A,t,e.routes.map((function(t,n){return M({route:t,index:n,opts:f(f({},e),{},{rootRoutes:e.rootRoutes||e.routes})})}))):null}var I=["history"];function R(e){var t=e.history,n=g(e,I);return o.useEffect((function(){function r(t,r){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=s.matchRoutes(e.routes,t.pathname);"undefined"!==typeof document&&void 0!==n.defaultTitle&&(document.title=a.length&&a[a.length-1].route.title||n.defaultTitle||""),e.plugin.applyPlugins({key:"onRouteChange",type:i.ApplyPluginsType.event,args:{routes:e.routes,matchedRoutes:a,location:t,action:r,isFirst:o}})}return window.g_useSSR&&(window.g_initialProps=null),r(t.location,"POP",!0),t.listen(r)}),[t]),c["default"].createElement(i.Router,{history:t},P(n))}function L(e){return e.plugin.applyPlugins({type:i.ApplyPluginsType.modify,key:"rootContainer",initialValue:c["default"].createElement(R,{history:e.history,routes:e.routes,plugin:e.plugin,ssrProps:e.ssrProps,defaultTitle:e.defaultTitle}),args:{history:e.history,routes:e.routes,plugin:e.plugin}})}function D(e){return N.apply(this,arguments)}function N(){return N=h(r().mark((function e(t){var n,i,o,a,u,c,l,f,p=arguments;return r().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=p.length>1&&void 0!==p[1]?p[1]:window.location.pathname,i=s.matchRoutes(t,n),o=E(i),e.prev=3,o.s();case 5:if((a=o.n()).done){e.next=19;break}if(c=a.value,l=c.route,"string"===typeof l.component||!(null===(u=l.component)||void 0===u?void 0:u.preload)){e.next=13;break}return e.next=11,l.component.preload();case 11:f=e.sent,l.component=f["default"]||f;case 13:if(!l.routes){e.next=17;break}return e.next=16,D(l.routes,n);case 16:l.routes=e.sent;case 17:e.next=5;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](3),o.e(e.t0);case 24:return e.prev=24,o.f(),e.finish(24);case 27:return e.abrupt("return",t);case 28:case"end":return e.stop()}}),e,null,[[3,21,24,27]])}))),N.apply(this,arguments)}function F(e){var t=L(e);if(!e.rootElement)return t;var n="string"===typeof e.rootElement?document.getElementById(e.rootElement):e.rootElement,r=e.callback||function(){};window.g_useSSR?e.dynamicImport?D(e.routes).then((function(){a.hydrate(t,n,r)})):a.hydrate(t,n,r):a.render(t,n,r)}t.renderClient=F,t.renderRoutes=P},zqmC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=t.LinkWrapper=void 0;var r=a(n("q1tI")),i=n("LtsZ"),o=["to"];function a(e){return e&&e.__esModule?e:{default:e}}function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function u(e,t){if(null==e)return{};var n,r,i=c(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function c(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var l=function(e){return function(t){var n=t.to,i=u(t,o),a=/^(\w+:)?\/\/|^(mailto|tel):/.test(n)||!n,c=r["default"].isValidElement(i.children);return r["default"].createElement(e,s({to:n||"",component:a?function(){return r["default"].createElement("a",{target:"_blank",rel:"noopener noreferrer",href:n},i.children,n&&!c&&r["default"].createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},r["default"].createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),r["default"].createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})))}:void 0},i,a?{}:{onClick:function(){var e;window.scrollTo({top:0});for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];null===(e=i.onClick)||void 0===e||e.apply(this,n)}}))}};t.LinkWrapper=l;var f=l(i.Link);t["default"]=f},"zu+z":function(e,t,n){var r=n("I+eb"),i=n("qY7S");r({target:"Map",stat:!0},{from:i})},zvhG:function(e,t){function n(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=r}e.exports=n,n.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},n.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},n.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},n.prototype.solveCurveX=function(e,t){var n,r,i,o,a;for("undefined"===typeof t&&(t=1e-6),i=e,a=0;a<8;a++){if(o=this.sampleCurveX(i)-e,Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if(n=0,r=1,i=e,i<n)return n;if(i>r)return r;while(n<r){if(o=this.sampleCurveX(i),Math.abs(o-e)<t)return i;e>o?n=i:r=i,i=.5*(r-n)+n}return i},n.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},zxMA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryableString=void 0;var r=function(){function e(e){this.str=e}return e.prototype.startsWith=function(e){return 0===this.str.indexOf(e)},e.prototype.endsWith=function(e){var t="",n=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},n)},e.prototype.contains=function(e){return-1!==this.str.indexOf(e)},e.prototype.equals=function(e){return this.str===e},e.prototype.value=function(){return this.str},e}();t.QueryableString=r}});